<!DOCTYPE html>
html(lang="et")
extends report_header

block content
    meta(charset='utf-8')

    style(type='text/css').
        .grid_head {
            background-color: lightgray;;
        }

        .doc_wrapper {
            margin-left: 5%;
            margin-top: 5%;
            width: auto;
        }

        .grid_data {
            width: 100%;
            border: 1px solid lightgray;
        }

        .row_wrapper {
            display: -webkit-box;
            flexDirection: row;
        }

        .label {
            width: 10%;
        }

        .input {
            width: 90%;
            margin-left: 5%;
            font-weight: bold;
        }

        .label_subtotal {
            width: 70%;
        }

        .td {
            border-bottom: 1px solid lightgray;
        }

        .yksus {
            border-bottom: 1px solid lightgray;
        }

        .total {
            font-weight: bold
        }

        .kokku {
            text-align: right
        }
    link(rel='stylesheet', href='/stylesheets/reports.css')

    div.body_wrapper
        h1 ASUTUSE KUU TAABEL
        h2 Vanematetasu
        each parameter in filter
            p #{parameter.name}: #{!parameter.start ? parameter.value : parameter.start} #{parameter.start ? ` - ${parameter.end}` : null}

        each tyyp in data
            p #{Object.keys(tyyp)[0]}

            table.table.table-hover.grid_data
                thead.grid_head
                    tr
                        th Nr.
                        th Ãœksus
                        th Teenus
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(1) > -1 ? 'red': 'none' }) 1
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(2) > -1 ? 'red': 'none' }) 2
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(3) > -1 ? 'red': 'none' }) 3
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(4) > -1 ? 'red': 'none' }) 4
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(5) > -1 ? 'red': 'none' }) 5
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(6) > -1 ? 'red': 'none' }) 6
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(7) > -1 ? 'red': 'none' }) 7
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(8) > -1 ? 'red': 'none' }) 8
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(9) > -1 ? 'red': 'none' }) 9
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(10) > -1 ? 'red': 'none' }) 10
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(11) > -1 ? 'red': 'none' }) 11
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(12) > -1 ? 'red': 'none' }) 12
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(13) > -1 ? 'red': 'none' }) 13
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(14) > -1 ? 'red': 'none' }) 14
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(15) > -1 ? 'red': 'none' }) 15
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(16) > -1 ? 'red': 'none' }) 16
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(17) > -1 ? 'red': 'none' }) 17
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(18) > -1 ? 'red': 'none' }) 18
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(19) > -1 ? 'red': 'none' }) 19
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(20) > -1 ? 'red': 'none' }) 20
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(21) > -1 ? 'red': 'none' }) 21
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(22) > -1 ? 'red': 'none' }) 22
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(23) > -1 ? 'red': 'none' }) 23
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(24) > -1 ? 'red': 'none' }) 24
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(25) > -1 ? 'red': 'none' }) 25
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(26) > -1 ? 'red': 'none' }) 26
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(27) > -1 ? 'red': 'none' }) 27
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(28) > -1 ? 'red': 'none' }) 28
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(29) > -1 ? 'red': 'none' }) 29
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(30) > -1 ? 'red': 'none' }) 30
                        th(style={color: tyyp[Object.keys(tyyp)[0]][0].week_ends.indexOf(31) > -1 ? 'red': 'none' }) 31
                        th Kokku
                tbody
                    -var id = 1;
                    each rea in tyyp[Object.keys(tyyp)[0]]
                        if rea.is_row
                            tr
                                td.yksus(style={visibility: rea.rea_count == 1 ? 'visible' : 'hidden'})=rea.rea_count == 1 ? id++: id
                                td.yksus(style={visibility: rea.rea_count == 1 ? 'visible' : 'hidden'})=rea.yksus
                                td=rea.teenus
                                td.td(align='center' style={"background-color": rea.day_1 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})= rea.day_1
                                td.td(align='center' style={"background-color": rea.day_2 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_2
                                td.td(align='center' style={"background-color": rea.day_3 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_3
                                td.td(align='center' style={"background-color": rea.day_4 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_4
                                td.td(align='center' style={"background-color": rea.day_5 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_5
                                td.td(align='center' style={"background-color": rea.day_6 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_6
                                td.td(align='center' style={"background-color": rea.day_7 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_7
                                td.td(align='center' style={"background-color": rea.day_8 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_8
                                td.td(align='center' style={"background-color": rea.day_9 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_9
                                td.td(align='center' style={"background-color": rea.day_10 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_10
                                td.td(align='center' style={"background-color": rea.day_11 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_11
                                td.td(align='center' style={"background-color": rea.day_12 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_12
                                td.td(align='center' style={"background-color": rea.day_13 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_13
                                td.td(align='center' style={"background-color": rea.day_14 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_14
                                td.td(align='center' style={"background-color": rea.day_15 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_15
                                td.td(align='center' style={"background-color": rea.day_16 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_16
                                td.td(align='center' style={"background-color": rea.day_17 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_17
                                td.td(align='center' style={"background-color": rea.day_18 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_18
                                td.td(align='center' style={"background-color": rea.day_19 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_19
                                td.td(align='center' style={"background-color": rea.day_20 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_20
                                td.td(align='center' style={"background-color": rea.day_21 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_21
                                td.td(align='center' style={"background-color": rea.day_22 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_22
                                td.td(align='center' style={"background-color": rea.day_23 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_23
                                td.td(align='center' style={"background-color": rea.day_24 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_24
                                td.td(align='center' style={"background-color": rea.day_25 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_25
                                td.td(align='center' style={"background-color": rea.day_26 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_26
                                td.td(align='center' style={"background-color": rea.day_27 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_27
                                td.td(align='center' style={"background-color": rea.day_28 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_28
                                td.td(align='center' style={"background-color": rea.day_29 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_29
                                td.td(align='center' style={"background-color": rea.day_30 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_30
                                td.td(align='center' style={"background-color": rea.day_31 == null ? 'lightgray': (rea.nom_id == 999999999 ? 'lightgreen': null)})=rea.day_31
                                td.td(align='center')=rea.kogus
                        else
                            tr
                                td
                                td(style={visibility: rea.rea_count == 1 ? 'visible' : 'hidden'})=rea.yksus
                                td=rea.teenus
                                td.td(align='center' style={"background-color": rea.day_1 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})= rea.day_1
                                td.td(align='center' style={"background-color": rea.day_2 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_2
                                td.td(align='center' style={"background-color": rea.day_3 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_3
                                td.td(align='center' style={"background-color": rea.day_4 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_4
                                td.td(align='center' style={"background-color": rea.day_5 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_5
                                td.td(align='center' style={"background-color": rea.day_6 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_6
                                td.td(align='center' style={"background-color": rea.day_7 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_7
                                td.td(align='center' style={"background-color": rea.day_8 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_8
                                td.td(align='center' style={"background-color": rea.day_9 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_9
                                td.td(align='center' style={"background-color": rea.day_10 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_10
                                td.td(align='center' style={"background-color": rea.day_11 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_11
                                td.td(align='center' style={"background-color": rea.day_12 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_12
                                td.td(align='center' style={"background-color": rea.day_13 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_13
                                td.td(align='center' style={"background-color": rea.day_14 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_14
                                td.td(align='center' style={"background-color": rea.day_15 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_15
                                td.td(align='center' style={"background-color": rea.day_16 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_16
                                td.td(align='center' style={"background-color": rea.day_17 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_17
                                td.td(align='center' style={"background-color": rea.day_18 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_18
                                td.td(align='center' style={"background-color": rea.day_19 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_19
                                td.td(align='center' style={"background-color": rea.day_20 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_20
                                td.td(align='center' style={"background-color": rea.day_21 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_21
                                td.td(align='center' style={"background-color": rea.day_22 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_22
                                td.td(align='center' style={"background-color": rea.day_23 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_23
                                td.td(align='center' style={"background-color": rea.day_24 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_24
                                td.td(align='center' style={"background-color": rea.day_25 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_25
                                td.td(align='center' style={"background-color": rea.day_26 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_26
                                td.td(align='center' style={"background-color": rea.day_27 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_27
                                td.td(align='center' style={"background-color": rea.day_28 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_28
                                td.td(align='center' style={"background-color": rea.day_29 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_29
                                td.td(align='center' style={"background-color": rea.day_30 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_30
                                td.td(align='center' style={"background-color": rea.day_31 == null ? 'lightgray' : (rea.nom_id == 999999999 ? 'lightgreen' : null)})=rea.day_31
                                td.td(align='center')=rea.kogus

