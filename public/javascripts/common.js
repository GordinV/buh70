/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	var parentJsonpFunction = window["webpackJsonp_name_"];
/******/ 	window["webpackJsonp_name_"] = function webpackJsonpCallback(chunkIds, moreModules) {
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, callbacks = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId])
/******/ 				callbacks.push.apply(callbacks, installedChunks[chunkId]);
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);
/******/ 		while(callbacks.length)
/******/ 			callbacks.shift().call(null, __webpack_require__);
/******/ 		if(moreModules[0]) {
/******/ 			installedModules[0] = 0;
/******/ 			return __webpack_require__(0);
/******/ 		}
/******/ 	};

/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// object to store loaded and loading chunks
/******/ 	// "0" means "already loaded"
/******/ 	// Array means "loading", array contains callbacks
/******/ 	var installedChunks = {
/******/ 		2:0
/******/ 	};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}

/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId, callback) {
/******/ 		// "0" is the signal for "already loaded"
/******/ 		if(installedChunks[chunkId] === 0)
/******/ 			return callback.call(null, __webpack_require__);

/******/ 		// an array means "currently loading".
/******/ 		if(installedChunks[chunkId] !== undefined) {
/******/ 			installedChunks[chunkId].push(callback);
/******/ 		} else {
/******/ 			// start chunk loading
/******/ 			installedChunks[chunkId] = [callback];
/******/ 			var head = document.getElementsByTagName('head')[0];
/******/ 			var script = document.createElement('script');
/******/ 			script.type = 'text/javascript';
/******/ 			script.charset = 'utf-8';
/******/ 			script.async = true;

/******/ 			script.src = __webpack_require__.p + "" + chunkId + "." + ({"0":"lapsed","1":"raama"}[chunkId]||chunkId) + ".js";
/******/ 			head.appendChild(script);
/******/ 		}
/******/ 	};

/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/ })
/************************************************************************/
/******/ ([
/* 0 */,
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(module) {'use strict';var createEmptyFilterData=__webpack_require__(3);var DocContext={filter:{},libs:{},menu:[],docTypeId:'LAPS',initFilter:function initFilter(docTypeId){/**
	         * метод создаст пустой фильтр по переданной конфигурации
	         */if(!docTypeId){docTypeId=undefined.docTypeId;// проверим наличие конфигураций. если нет, то вернем пустой массив
	if(!DocContext.gridConfig||!DocContext.gridConfig[docTypeId].length){DocContext.filter[docTypeId]=[];}else{DocContext.filter[docTypeId]=createEmptyFilterData(DocContext.gridConfig[docTypeId],[],docTypeId);}}}};module.export=DocContext;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))

/***/ }),
/* 2 */
/***/ (function(module, exports) {

	"use strict";module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];// module.parent = undefined by default
	module.children=[];module.webpackPolyfill=1;}return module;};

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var DocContext=__webpack_require__(1);/**
	 * создаст массив для создания фильтра
	 */function createEmptyFilterData(gridConfig,filterData,docTypeId){filterData=gridConfig.map(function(row){// props.data пустое, создаем
	var value=row.value?row.value:null;if(row.default){var defaultValue=getDefaultDates(row.default);value=defaultValue.start;if(row.interval){row.start=defaultValue.start;row[row.id+'_start']=defaultValue.start;row.end=defaultValue.end;row[row.id+'_end']=defaultValue.end;}}if(!row.type){row.type='text';}row.value=value;return row;});DocContext.filter[docTypeId]=filterData;return filterData;}module.exports=createEmptyFilterData;

/***/ }),
/* 4 */
/***/ (function(module, exports) {

	module.exports = ReactDOM;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";if(process.env.NODE_ENV==="production"){module.exports=__webpack_require__(7);}else{module.exports=__webpack_require__(48);}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 6 */
/***/ (function(module, exports) {

	'use strict';// shim for using process in browser
	var process=module.exports={};// cached from whatever global is present so that test runners that stub it
	// don't break things.  But we need to wrap it in a try catch in case it is
	// wrapped in strict mode code which doesn't define any globals.  It's inside a
	// function because try/catches deoptimize in certain engines.
	var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error('setTimeout has not been defined');}function defaultClearTimeout(){throw new Error('clearTimeout has not been defined');}(function(){try{if(typeof setTimeout==='function'){cachedSetTimeout=setTimeout;}else{cachedSetTimeout=defaultSetTimout;}}catch(e){cachedSetTimeout=defaultSetTimout;}try{if(typeof clearTimeout==='function'){cachedClearTimeout=clearTimeout;}else{cachedClearTimeout=defaultClearTimeout;}}catch(e){cachedClearTimeout=defaultClearTimeout;}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){//normal enviroments in sane situations
	return setTimeout(fun,0);}// if setTimeout wasn't available but was latter defined
	if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0);}try{// when when somebody has screwed with setTimeout but no I.E. maddness
	return cachedSetTimeout(fun,0);}catch(e){try{// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
	return cachedSetTimeout.call(null,fun,0);}catch(e){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
	return cachedSetTimeout.call(this,fun,0);}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){//normal enviroments in sane situations
	return clearTimeout(marker);}// if clearTimeout wasn't available but was latter defined
	if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker);}try{// when when somebody has screwed with setTimeout but no I.E. maddness
	return cachedClearTimeout(marker);}catch(e){try{// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
	return cachedClearTimeout.call(null,marker);}catch(e){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
	// Some versions of I.E. have different rules for clearTimeout vs setTimeout
	return cachedClearTimeout.call(this,marker);}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return;}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else{queueIndex=-1;}if(queue.length){drainQueue();}}function drainQueue(){if(draining){return;}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}queueIndex=-1;len=queue.length;}currentQueue=null;draining=false;runClearTimeout(timeout);}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue);}};// v8 likes predictible objects
	function Item(fun,array){this.fun=fun;this.array=array;}Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';// empty string to avoid regexp issues
	process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[];};process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return'/';};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _interopDefault(e){return e&&"object"==(typeof e==="undefined"?"undefined":_typeof(e))&&"default"in e?e.default:e;}Object.defineProperty(exports,"__esModule",{value:!0});var reactRouter=__webpack_require__(8),React=_interopDefault(__webpack_require__(10)),history=__webpack_require__(20);__webpack_require__(43),__webpack_require__(28);var invariant=_interopDefault(__webpack_require__(29));function _extends(){return(_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t){Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);}}return e;}).apply(this,arguments);}function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;}function _objectWithoutPropertiesLoose(e,r){if(null==e)return{};var t,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++){t=a[o],0<=r.indexOf(t)||(n[t]=e[t]);}return n;}var BrowserRouter=function(n){function e(){for(var e,r=arguments.length,t=new Array(r),o=0;o<r;o++){t[o]=arguments[o];}return(e=n.call.apply(n,[this].concat(t))||this).history=history.createBrowserHistory(e.props),e;}return _inheritsLoose(e,n),e.prototype.render=function(){return React.createElement(reactRouter.Router,{history:this.history,children:this.props.children});},e;}(React.Component),HashRouter=function(n){function e(){for(var e,r=arguments.length,t=new Array(r),o=0;o<r;o++){t[o]=arguments[o];}return(e=n.call.apply(n,[this].concat(t))||this).history=history.createHashHistory(e.props),e;}return _inheritsLoose(e,n),e.prototype.render=function(){return React.createElement(reactRouter.Router,{history:this.history,children:this.props.children});},e;}(React.Component),resolveToLocation=function resolveToLocation(e,r){return"function"==typeof e?e(r):e;},normalizeToLocation=function normalizeToLocation(e,r){return"string"==typeof e?history.createLocation(e,null,null,r):e;},forwardRefShim=function forwardRefShim(e){return e;},forwardRef=React.forwardRef;function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey);}void 0===forwardRef&&(forwardRef=forwardRefShim);var LinkAnchor=forwardRef(function(e,r){var t=e.innerRef,o=e.navigate,n=e.onClick,a=_objectWithoutPropertiesLoose(e,["innerRef","navigate","onClick"]),i=a.target,c=_extends({},a,{onClick:function onClick(r){try{n&&n(r);}catch(e){throw r.preventDefault(),e;}r.defaultPrevented||0!==r.button||i&&"_self"!==i||isModifiedEvent(r)||(r.preventDefault(),o());}});return c.ref=forwardRefShim!==forwardRef&&r||t,React.createElement("a",c);}),Link=forwardRef(function(e,a){var r=e.component,i=void 0===r?LinkAnchor:r,c=e.replace,f=e.to,u=e.innerRef,s=_objectWithoutPropertiesLoose(e,["component","replace","to","innerRef"]);return React.createElement(reactRouter.__RouterContext.Consumer,null,function(r){r||invariant(!1);var t=r.history,e=normalizeToLocation(resolveToLocation(f,r.location),r.location),o=e?t.createHref(e):"",n=_extends({},s,{href:o,navigate:function navigate(){var e=resolveToLocation(f,r.location);(c?t.replace:t.push)(e);}});return forwardRefShim!==forwardRef?n.ref=a||u:n.innerRef=u,React.createElement(i,n);});}),forwardRefShim$1=function forwardRefShim$1(e){return e;},forwardRef$1=React.forwardRef;function joinClassnames(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++){r[t]=arguments[t];}return r.filter(function(e){return e;}).join(" ");}void 0===forwardRef$1&&(forwardRef$1=forwardRefShim$1);var NavLink=forwardRef$1(function(e,s){var r=e["aria-current"],l=void 0===r?"page":r,t=e.activeClassName,p=void 0===t?"active":t,h=e.activeStyle,R=e.className,d=e.exact,v=e.isActive,y=e.location,m=e.strict,w=e.style,_=e.to,L=e.innerRef,x=_objectWithoutPropertiesLoose(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return React.createElement(reactRouter.__RouterContext.Consumer,null,function(e){e||invariant(!1);var r=y||e.location,t=normalizeToLocation(resolveToLocation(_,r),r),o=t.pathname,n=o&&o.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),a=n?reactRouter.matchPath(r.pathname,{path:n,exact:d,strict:m}):null,i=!!(v?v(a,r):a),c=i?joinClassnames(R,p):R,f=i?_extends({},w,{},h):w,u=_extends({"aria-current":i&&l||null,className:c,style:f,to:t},x);return forwardRefShim$1!==forwardRef$1?u.ref=s||L:u.innerRef=L,React.createElement(Link,u);});});Object.keys(reactRouter).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function get(){return reactRouter[e];}});}),exports.BrowserRouter=BrowserRouter,exports.HashRouter=HashRouter,exports.Link=Link,exports.NavLink=NavLink;//# sourceMappingURL=react-router-dom.min.js.map

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";if(process.env.NODE_ENV==="production"){module.exports=__webpack_require__(9);}else{module.exports=__webpack_require__(42);}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _interopDefault(t){return t&&"object"==(typeof t==="undefined"?"undefined":_typeof(t))&&"default"in t?t.default:t;}Object.defineProperty(exports,"__esModule",{value:!0});var React=_interopDefault(__webpack_require__(10));__webpack_require__(11);var history=__webpack_require__(20);__webpack_require__(28);var createContext=_interopDefault(__webpack_require__(31)),invariant=_interopDefault(__webpack_require__(29)),pathToRegexp=_interopDefault(__webpack_require__(39));__webpack_require__(12);var hoistStatics=_interopDefault(__webpack_require__(41));function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n){Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);}}return t;}).apply(this,arguments);}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e;}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++){n=a[o],0<=e.indexOf(n)||(r[n]=t[n]);}return r;}var createNamedContext=function createNamedContext(t){var e=createContext();return e.displayName=t,e;},context=createNamedContext("Router"),Router=function(n){function t(t){var e;return(e=n.call(this,t)||this).state={location:t.history.location},e._isMounted=!1,e._pendingLocation=null,t.staticContext||(e.unlisten=t.history.listen(function(t){e._isMounted?e.setState({location:t}):e._pendingLocation=t;})),e;}_inheritsLoose(t,n),t.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t};};var e=t.prototype;return e.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation});},e.componentWillUnmount=function(){this.unlisten&&this.unlisten();},e.render=function(){return React.createElement(context.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}});},t;}(React.Component),MemoryRouter=function(r){function t(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++){n[o]=arguments[o];}return(t=r.call.apply(r,[this].concat(n))||this).history=history.createMemoryHistory(t.props),t;}return _inheritsLoose(t,r),t.prototype.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children});},t;}(React.Component),Lifecycle=function(t){function e(){return t.apply(this,arguments)||this;}_inheritsLoose(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this);},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t);},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this);},n.render=function(){return null;},e;}(React.Component);function Prompt(t){var o=t.message,e=t.when,r=void 0===e||e;return React.createElement(context.Consumer,null,function(t){if(t||invariant(!1),!r||t.staticContext)return null;var n=t.history.block;return React.createElement(Lifecycle,{onMount:function onMount(t){t.release=n(o);},onUpdate:function onUpdate(t,e){e.message!==o&&(t.release(),t.release=n(o));},onUnmount:function onUnmount(t){t.release();},message:o});});}var cache={},cacheLimit=1e4,cacheCount=0;function compilePath(t){if(cache[t])return cache[t];var e=pathToRegexp.compile(t);return cacheCount<cacheLimit&&(cache[t]=e,cacheCount++),e;}function generatePath(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:compilePath(t)(e,{pretty:!0});}function Redirect(t){var a=t.computedMatch,i=t.to,e=t.push,c=void 0!==e&&e;return React.createElement(context.Consumer,null,function(t){t||invariant(!1);var e=t.history,n=t.staticContext,o=c?e.push:e.replace,r=history.createLocation(a?"string"==typeof i?generatePath(i,a.params):_extends({},i,{pathname:generatePath(i.pathname,a.params)}):i);return n?(o(r),null):React.createElement(Lifecycle,{onMount:function onMount(){o(r);},onUpdate:function onUpdate(t,e){var n=history.createLocation(e.to);history.locationsAreEqual(n,_extends({},r,{key:n.key}))||o(r);},to:i});});}var cache$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1(t,e){var n=""+e.end+e.strict+e.sensitive,o=cache$1[n]||(cache$1[n]={});if(o[t])return o[t];var r=[],a={regexp:pathToRegexp(t,r,e),keys:r};return cacheCount$1<cacheLimit$1&&(o[t]=a,cacheCount$1++),a;}function matchPath(u,t){void 0===t&&(t={}),"string"!=typeof t&&!Array.isArray(t)||(t={path:t});var e=t,n=e.path,o=e.exact,p=void 0!==o&&o,r=e.strict,h=void 0!==r&&r,a=e.sensitive,l=void 0!==a&&a;return[].concat(n).reduce(function(t,e){if(!e&&""!==e)return null;if(t)return t;var n=compilePath$1(e,{end:p,strict:h,sensitive:l}),o=n.regexp,r=n.keys,a=o.exec(u);if(!a)return null;var i=a[0],c=a.slice(1),s=u===i;return p&&!s?null:{path:e,url:"/"===e&&""===i?"/":i,isExact:s,params:r.reduce(function(t,e,n){return t[e.name]=c[n],t;},{})};},null);}var Route=function(t){function e(){return t.apply(this,arguments)||this;}return _inheritsLoose(e,t),e.prototype.render=function(){var c=this;return React.createElement(context.Consumer,null,function(t){t||invariant(!1);var e=c.props.location||t.location,n=_extends({},t,{location:e,match:c.props.computedMatch?c.props.computedMatch:c.props.path?matchPath(e.pathname,c.props):t.match}),o=c.props,r=o.children,a=o.component,i=o.render;return Array.isArray(r)&&0===r.length&&(r=null),React.createElement(context.Provider,{value:n},n.match?r?"function"==typeof r?r(n):r:a?React.createElement(a,n):i?i(n):null:"function"==typeof r?r(n):null);});},e;}(React.Component);function addLeadingSlash(t){return"/"===t.charAt(0)?t:"/"+t;}function addBasename(t,e){return t?_extends({},e,{pathname:addLeadingSlash(t)+e.pathname}):e;}function stripBasename(t,e){if(!t)return e;var n=addLeadingSlash(t);return 0!==e.pathname.indexOf(n)?e:_extends({},e,{pathname:e.pathname.substr(n.length)});}function createURL(t){return"string"==typeof t?t:history.createPath(t);}function staticHandler(t){return function(){invariant(!1);};}function noop(){}var StaticRouter=function(r){function t(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o];}return(e=r.call.apply(r,[this].concat(n))||this).handlePush=function(t){return e.navigateTo(t,"PUSH");},e.handleReplace=function(t){return e.navigateTo(t,"REPLACE");},e.handleListen=function(){return noop;},e.handleBlock=function(){return noop;},e;}_inheritsLoose(t,r);var e=t.prototype;return e.navigateTo=function(t,e){var n=this.props,o=n.basename,r=void 0===o?"":o,a=n.context,i=void 0===a?{}:a;i.action=e,i.location=addBasename(r,history.createLocation(t)),i.url=createURL(i.location);},e.render=function(){var t=this.props,e=t.basename,n=void 0===e?"":e,o=t.context,r=void 0===o?{}:o,a=t.location,i=void 0===a?"/":a,c=_objectWithoutPropertiesLoose(t,["basename","context","location"]),s={createHref:function createHref(t){return addLeadingSlash(n+createURL(t));},action:"POP",location:stripBasename(n,history.createLocation(i)),push:this.handlePush,replace:this.handleReplace,go:staticHandler(),goBack:staticHandler(),goForward:staticHandler(),listen:this.handleListen,block:this.handleBlock};return React.createElement(Router,_extends({},c,{history:s,staticContext:r}));},t;}(React.Component),Switch=function(t){function e(){return t.apply(this,arguments)||this;}return _inheritsLoose(e,t),e.prototype.render=function(){var t=this;return React.createElement(context.Consumer,null,function(n){n||invariant(!1);var o,r,a=t.props.location||n.location;return React.Children.forEach(t.props.children,function(t){if(null==r&&React.isValidElement(t)){var e=(o=t).props.path||t.props.from;r=e?matchPath(a.pathname,_extends({},t.props,{path:e})):n.match;}}),r?React.cloneElement(o,{location:a,computedMatch:r}):null;});},e;}(React.Component);function withRouter(o){function t(t){var e=t.wrappedComponentRef,n=_objectWithoutPropertiesLoose(t,["wrappedComponentRef"]);return React.createElement(context.Consumer,null,function(t){return t||invariant(!1),React.createElement(o,_extends({},n,t,{ref:e}));});}var e="withRouter("+(o.displayName||o.name)+")";return t.displayName=e,t.WrappedComponent=o,hoistStatics(t,o);}var useContext=React.useContext;function useHistory(){return useContext(context).history;}function useLocation(){return useContext(context).location;}function useParams(){var t=useContext(context).match;return t?t.params:{};}function useRouteMatch(t){return t?matchPath(useLocation().pathname,t):useContext(context).match;}exports.MemoryRouter=MemoryRouter,exports.Prompt=Prompt,exports.Redirect=Redirect,exports.Route=Route,exports.Router=Router,exports.StaticRouter=StaticRouter,exports.Switch=Switch,exports.__RouterContext=context,exports.generatePath=generatePath,exports.matchPath=matchPath,exports.useHistory=useHistory,exports.useLocation=useLocation,exports.useParams=useParams,exports.useRouteMatch=useRouteMatch,exports.withRouter=withRouter;//# sourceMappingURL=react-router.min.js.map

/***/ }),
/* 10 */
/***/ (function(module, exports) {

	module.exports = React;

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */if(process.env.NODE_ENV!=='production'){var ReactIs=__webpack_require__(12);// By explicitly using `prop-types` you are opting into new development behavior.
	// http://fb.me/prop-types-in-prod
	var throwOnDirectAccess=true;module.exports=__webpack_require__(15)(ReactIs.isElement,throwOnDirectAccess);}else{// By explicitly using `prop-types` you are opting into new production behavior.
	// http://fb.me/prop-types-in-prod
	module.exports=__webpack_require__(19)();}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';if(process.env.NODE_ENV==='production'){module.exports=__webpack_require__(13);}else{module.exports=__webpack_require__(14);}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 13 */
/***/ (function(module, exports) {

	/** @license React v16.9.0
	 * react-is.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:!0});var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.fundamental"):60117,w=b?Symbol.for("react.responder"):60118;function x(a){if("object"===(typeof a==="undefined"?"undefined":_typeof(a))&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case h:return a;default:return u;}}case t:case r:case d:return u;}}}function y(a){return x(a)===m;}exports.typeOf=x;exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"===(typeof a==="undefined"?"undefined":_typeof(a))&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===v||a.$$typeof===w);};exports.isAsyncMode=function(a){return y(a)||x(a)===l;};exports.isConcurrentMode=y;exports.isContextConsumer=function(a){return x(a)===k;};exports.isContextProvider=function(a){return x(a)===h;};exports.isElement=function(a){return"object"===(typeof a==="undefined"?"undefined":_typeof(a))&&null!==a&&a.$$typeof===c;};exports.isForwardRef=function(a){return x(a)===n;};exports.isFragment=function(a){return x(a)===e;};exports.isLazy=function(a){return x(a)===t;};exports.isMemo=function(a){return x(a)===r;};exports.isPortal=function(a){return x(a)===d;};exports.isProfiler=function(a){return x(a)===g;};exports.isStrictMode=function(a){return x(a)===f;};exports.isSuspense=function(a){return x(a)===p;};

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/** @license React v16.9.0
	 * react-is.development.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};if(process.env.NODE_ENV!=="production"){(function(){'use strict';Object.defineProperty(exports,'__esModule',{value:true});// The Symbol used to tag the ReactElement-like types. If there is no native Symbol
	// nor polyfill, then a plain number is used for performance.
	var hasSymbol=typeof Symbol==='function'&&Symbol.for;var REACT_ELEMENT_TYPE=hasSymbol?Symbol.for('react.element'):0xeac7;var REACT_PORTAL_TYPE=hasSymbol?Symbol.for('react.portal'):0xeaca;var REACT_FRAGMENT_TYPE=hasSymbol?Symbol.for('react.fragment'):0xeacb;var REACT_STRICT_MODE_TYPE=hasSymbol?Symbol.for('react.strict_mode'):0xeacc;var REACT_PROFILER_TYPE=hasSymbol?Symbol.for('react.profiler'):0xead2;var REACT_PROVIDER_TYPE=hasSymbol?Symbol.for('react.provider'):0xeacd;var REACT_CONTEXT_TYPE=hasSymbol?Symbol.for('react.context'):0xeace;// TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary
	// (unstable) APIs that have been removed. Can we remove the symbols?
	var REACT_ASYNC_MODE_TYPE=hasSymbol?Symbol.for('react.async_mode'):0xeacf;var REACT_CONCURRENT_MODE_TYPE=hasSymbol?Symbol.for('react.concurrent_mode'):0xeacf;var REACT_FORWARD_REF_TYPE=hasSymbol?Symbol.for('react.forward_ref'):0xead0;var REACT_SUSPENSE_TYPE=hasSymbol?Symbol.for('react.suspense'):0xead1;var REACT_SUSPENSE_LIST_TYPE=hasSymbol?Symbol.for('react.suspense_list'):0xead8;var REACT_MEMO_TYPE=hasSymbol?Symbol.for('react.memo'):0xead3;var REACT_LAZY_TYPE=hasSymbol?Symbol.for('react.lazy'):0xead4;var REACT_FUNDAMENTAL_TYPE=hasSymbol?Symbol.for('react.fundamental'):0xead5;var REACT_RESPONDER_TYPE=hasSymbol?Symbol.for('react.responder'):0xead6;function isValidElementType(type){return typeof type==='string'||typeof type==='function'||// Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.
	type===REACT_FRAGMENT_TYPE||type===REACT_CONCURRENT_MODE_TYPE||type===REACT_PROFILER_TYPE||type===REACT_STRICT_MODE_TYPE||type===REACT_SUSPENSE_TYPE||type===REACT_SUSPENSE_LIST_TYPE||(typeof type==='undefined'?'undefined':_typeof(type))==='object'&&type!==null&&(type.$$typeof===REACT_LAZY_TYPE||type.$$typeof===REACT_MEMO_TYPE||type.$$typeof===REACT_PROVIDER_TYPE||type.$$typeof===REACT_CONTEXT_TYPE||type.$$typeof===REACT_FORWARD_REF_TYPE||type.$$typeof===REACT_FUNDAMENTAL_TYPE||type.$$typeof===REACT_RESPONDER_TYPE);}/**
	 * Forked from fbjs/warning:
	 * https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/__forks__/warning.js
	 *
	 * Only change is we use console.warn instead of console.error,
	 * and do nothing when 'console' is not supported.
	 * This really simplifies the code.
	 * ---
	 * Similar to invariant but only logs a warning if the condition is not met.
	 * This can be used to log issues in development environments in critical
	 * paths. Removing the logging code for production environments will keep the
	 * same logic and follow the same code paths.
	 */var lowPriorityWarning=function lowPriorityWarning(){};{var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}var argIndex=0;var message='Warning: '+format.replace(/%s/g,function(){return args[argIndex++];});if(typeof console!=='undefined'){console.warn(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};lowPriorityWarning=function lowPriorityWarning(condition,format){if(format===undefined){throw new Error('`lowPriorityWarning(condition, format, ...args)` requires a warning '+'message argument');}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2];}printWarning.apply(undefined,[format].concat(args));}};}var lowPriorityWarning$1=lowPriorityWarning;function typeOf(object){if((typeof object==='undefined'?'undefined':_typeof(object))==='object'&&object!==null){var $$typeof=object.$$typeof;switch($$typeof){case REACT_ELEMENT_TYPE:var type=object.type;switch(type){case REACT_ASYNC_MODE_TYPE:case REACT_CONCURRENT_MODE_TYPE:case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:return type;default:var $$typeofType=type&&type.$$typeof;switch($$typeofType){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_PROVIDER_TYPE:return $$typeofType;default:return $$typeof;}}case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:case REACT_PORTAL_TYPE:return $$typeof;}}return undefined;}// AsyncMode is deprecated along with isAsyncMode
	var AsyncMode=REACT_ASYNC_MODE_TYPE;var ConcurrentMode=REACT_CONCURRENT_MODE_TYPE;var ContextConsumer=REACT_CONTEXT_TYPE;var ContextProvider=REACT_PROVIDER_TYPE;var Element=REACT_ELEMENT_TYPE;var ForwardRef=REACT_FORWARD_REF_TYPE;var Fragment=REACT_FRAGMENT_TYPE;var Lazy=REACT_LAZY_TYPE;var Memo=REACT_MEMO_TYPE;var Portal=REACT_PORTAL_TYPE;var Profiler=REACT_PROFILER_TYPE;var StrictMode=REACT_STRICT_MODE_TYPE;var Suspense=REACT_SUSPENSE_TYPE;var hasWarnedAboutDeprecatedIsAsyncMode=false;// AsyncMode should be deprecated
	function isAsyncMode(object){{if(!hasWarnedAboutDeprecatedIsAsyncMode){hasWarnedAboutDeprecatedIsAsyncMode=true;lowPriorityWarning$1(false,'The ReactIs.isAsyncMode() alias has been deprecated, '+'and will be removed in React 17+. Update your code to use '+'ReactIs.isConcurrentMode() instead. It has the exact same API.');}}return isConcurrentMode(object)||typeOf(object)===REACT_ASYNC_MODE_TYPE;}function isConcurrentMode(object){return typeOf(object)===REACT_CONCURRENT_MODE_TYPE;}function isContextConsumer(object){return typeOf(object)===REACT_CONTEXT_TYPE;}function isContextProvider(object){return typeOf(object)===REACT_PROVIDER_TYPE;}function isElement(object){return(typeof object==='undefined'?'undefined':_typeof(object))==='object'&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE;}function isForwardRef(object){return typeOf(object)===REACT_FORWARD_REF_TYPE;}function isFragment(object){return typeOf(object)===REACT_FRAGMENT_TYPE;}function isLazy(object){return typeOf(object)===REACT_LAZY_TYPE;}function isMemo(object){return typeOf(object)===REACT_MEMO_TYPE;}function isPortal(object){return typeOf(object)===REACT_PORTAL_TYPE;}function isProfiler(object){return typeOf(object)===REACT_PROFILER_TYPE;}function isStrictMode(object){return typeOf(object)===REACT_STRICT_MODE_TYPE;}function isSuspense(object){return typeOf(object)===REACT_SUSPENSE_TYPE;}exports.typeOf=typeOf;exports.AsyncMode=AsyncMode;exports.ConcurrentMode=ConcurrentMode;exports.ContextConsumer=ContextConsumer;exports.ContextProvider=ContextProvider;exports.Element=Element;exports.ForwardRef=ForwardRef;exports.Fragment=Fragment;exports.Lazy=Lazy;exports.Memo=Memo;exports.Portal=Portal;exports.Profiler=Profiler;exports.StrictMode=StrictMode;exports.Suspense=Suspense;exports.isValidElementType=isValidElementType;exports.isAsyncMode=isAsyncMode;exports.isConcurrentMode=isConcurrentMode;exports.isContextConsumer=isContextConsumer;exports.isContextProvider=isContextProvider;exports.isElement=isElement;exports.isForwardRef=isForwardRef;exports.isFragment=isFragment;exports.isLazy=isLazy;exports.isMemo=isMemo;exports.isPortal=isPortal;exports.isProfiler=isProfiler;exports.isStrictMode=isStrictMode;exports.isSuspense=isSuspense;})();}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var ReactIs=__webpack_require__(12);var assign=__webpack_require__(16);var ReactPropTypesSecret=__webpack_require__(17);var checkPropTypes=__webpack_require__(18);var has=Function.call.bind(Object.prototype.hasOwnProperty);var printWarning=function printWarning(){};if(process.env.NODE_ENV!=='production'){printWarning=function printWarning(text){var message='Warning: '+text;if(typeof console!=='undefined'){console.error(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};}function emptyFunctionThatReturnsNull(){return null;}module.exports=function(isValidElement,throwOnDirectAccess){/* global Symbol */var ITERATOR_SYMBOL=typeof Symbol==='function'&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL='@@iterator';// Before Symbol spec.
	/**
	   * Returns the iterator method function contained on the iterable object.
	   *
	   * Be sure to invoke the function with the iterable as context:
	   *
	   *     var iteratorFn = getIteratorFn(myIterable);
	   *     if (iteratorFn) {
	   *       var iterator = iteratorFn.call(myIterable);
	   *       ...
	   *     }
	   *
	   * @param {?object} maybeIterable
	   * @return {?function}
	   */function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==='function'){return iteratorFn;}}/**
	   * Collection of methods that allow declaration and validation of props that are
	   * supplied to React components. Example usage:
	   *
	   *   var Props = require('ReactPropTypes');
	   *   var MyArticle = React.createClass({
	   *     propTypes: {
	   *       // An optional string prop named "description".
	   *       description: Props.string,
	   *
	   *       // A required enum prop named "category".
	   *       category: Props.oneOf(['News','Photos']).isRequired,
	   *
	   *       // A prop named "dialog" that requires an instance of Dialog.
	   *       dialog: Props.instanceOf(Dialog).isRequired
	   *     },
	   *     render: function() { ... }
	   *   });
	   *
	   * A more formal specification of how these methods are used:
	   *
	   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)
	   *   decl := ReactPropTypes.{type}(.isRequired)?
	   *
	   * Each and every declaration produces a function with the same signature. This
	   * allows the creation of custom validation functions. For example:
	   *
	   *  var MyLink = React.createClass({
	   *    propTypes: {
	   *      // An optional string or URI prop named "href".
	   *      href: function(props, propName, componentName) {
	   *        var propValue = props[propName];
	   *        if (propValue != null && typeof propValue !== 'string' &&
	   *            !(propValue instanceof URI)) {
	   *          return new Error(
	   *            'Expected a string or an URI for ' + propName + ' in ' +
	   *            componentName
	   *          );
	   *        }
	   *      }
	   *    },
	   *    render: function() {...}
	   *  });
	   *
	   * @internal
	   */var ANONYMOUS='<<anonymous>>';// Important!
	// Keep this list in sync with production version in `./factoryWithThrowingShims.js`.
	var ReactPropTypes={array:createPrimitiveTypeChecker('array'),bool:createPrimitiveTypeChecker('boolean'),func:createPrimitiveTypeChecker('function'),number:createPrimitiveTypeChecker('number'),object:createPrimitiveTypeChecker('object'),string:createPrimitiveTypeChecker('string'),symbol:createPrimitiveTypeChecker('symbol'),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),elementType:createElementTypeTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};/**
	   * inlined Object.is polyfill to avoid requiring consumers ship their own
	   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
	   *//*eslint-disable no-self-compare*/function is(x,y){// SameValue algorithm
	if(x===y){// Steps 1-5, 7-10
	// Steps 6.b-6.e: +0 != -0
	return x!==0||1/x===1/y;}else{// Step 6.a: NaN == NaN
	return x!==x&&y!==y;}}/*eslint-enable no-self-compare*//**
	   * We use an Error-like object for backward compatibility as people may call
	   * PropTypes directly and inspect their output. However, we don't use real
	   * Errors anymore. We don't inspect their stack anyway, and creating them
	   * is prohibitively expensive if they are created too often, such as what
	   * happens in oneOfType() for any type before the one that matched.
	   */function PropTypeError(message){this.message=message;this.stack='';}// Make `instanceof Error` still work for returned errors.
	PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=='production'){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0;}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){// New behavior only for users of `prop-types` package
	var err=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. '+'Use `PropTypes.checkPropTypes()` to call them. '+'Read more at http://fb.me/use-check-prop-types');err.name='Invariant Violation';throw err;}else if(process.env.NODE_ENV!=='production'&&typeof console!=='undefined'){// Old behavior for people using React.PropTypes
	var cacheKey=componentName+':'+propName;if(!manualPropTypeCallCache[cacheKey]&&// Avoid spamming the console because they are often not actionable except for lib authors
	manualPropTypeWarningCount<3){printWarning('You are manually calling a React.PropTypes validation '+'function for the `'+propFullName+'` prop on `'+componentName+'`. This is deprecated '+'and will throw in the standalone `prop-types` package. '+'You may be seeing this warning due to a third-party PropTypes '+'library. See https://fb.me/react-warning-dont-call-proptypes '+'for details.');manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++;}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError('The '+location+' `'+propFullName+'` is marked as required '+('in `'+componentName+'`, but its value is `null`.'));}return new PropTypeError('The '+location+' `'+propFullName+'` is marked as required in '+('`'+componentName+'`, but its value is `undefined`.'));}return null;}else{return validate(props,propName,componentName,location,propFullName);}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType;}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){// `propValue` being instance of, say, date/regexp, pass the 'object'
	// check, but we can offer a more precise error message here rather than
	// 'of type `object`'.
	var preciseType=getPreciseType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+preciseType+'` supplied to `'+componentName+'`, expected ')+('`'+expectedType+'`.'));}return null;}return createChainableTypeChecker(validate);}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunctionThatReturnsNull);}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=='function'){return new PropTypeError('Property `'+propFullName+'` of component `'+componentName+'` has invalid PropType notation inside arrayOf.');}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected an array.'));}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+'['+i+']',ReactPropTypesSecret);if(error instanceof Error){return error;}}return null;}return createChainableTypeChecker(validate);}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected a single ReactElement.'));}return null;}return createChainableTypeChecker(validate);}function createElementTypeTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactIs.isValidElementType(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected a single ReactElement type.'));}return null;}return createChainableTypeChecker(validate);}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+actualClassName+'` supplied to `'+componentName+'`, expected ')+('instance of `'+expectedClassName+'`.'));}return null;}return createChainableTypeChecker(validate);}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){if(process.env.NODE_ENV!=='production'){if(arguments.length>1){printWarning('Invalid arguments supplied to oneOf, expected an array, got '+arguments.length+' arguments. '+'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');}else{printWarning('Invalid argument supplied to oneOf, expected an array.');}}return emptyFunctionThatReturnsNull;}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null;}}var valuesString=JSON.stringify(expectedValues,function replacer(key,value){var type=getPreciseType(value);if(type==='symbol'){return String(value);}return value;});return new PropTypeError('Invalid '+location+' `'+propFullName+'` of value `'+String(propValue)+'` '+('supplied to `'+componentName+'`, expected one of '+valuesString+'.'));}return createChainableTypeChecker(validate);}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=='function'){return new PropTypeError('Property `'+propFullName+'` of component `'+componentName+'` has invalid PropType notation inside objectOf.');}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected an object.'));}for(var key in propValue){if(has(propValue,key)){var error=typeChecker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error instanceof Error){return error;}}}return null;}return createChainableTypeChecker(validate);}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=='production'?printWarning('Invalid argument supplied to oneOfType, expected an instance of array.'):void 0;return emptyFunctionThatReturnsNull;}for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(typeof checker!=='function'){printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but '+'received '+getPostfixForTypeWarning(checker)+' at index '+i+'.');return emptyFunctionThatReturnsNull;}}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null;}}return new PropTypeError('Invalid '+location+' `'+propFullName+'` supplied to '+('`'+componentName+'`.'));}return createChainableTypeChecker(validate);}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError('Invalid '+location+' `'+propFullName+'` supplied to '+('`'+componentName+'`, expected a ReactNode.'));}return null;}return createChainableTypeChecker(validate);}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type `'+propType+'` '+('supplied to `'+componentName+'`, expected `object`.'));}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue;}var error=checker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error){return error;}}return null;}return createChainableTypeChecker(validate);}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type `'+propType+'` '+('supplied to `'+componentName+'`, expected `object`.'));}// We need to check all keys in case some are required but missing from
	// props.
	var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker){return new PropTypeError('Invalid '+location+' `'+propFullName+'` key `'+key+'` supplied to `'+componentName+'`.'+'\nBad object: '+JSON.stringify(props[propName],null,'  ')+'\nValid keys: '+JSON.stringify(Object.keys(shapeTypes),null,'  '));}var error=checker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error){return error;}}return null;}return createChainableTypeChecker(validate);}function isNode(propValue){switch(typeof propValue==='undefined'?'undefined':_typeof(propValue)){case'number':case'string':case'undefined':return true;case'boolean':return!propValue;case'object':if(Array.isArray(propValue)){return propValue.every(isNode);}if(propValue===null||isValidElement(propValue)){return true;}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false;}}}else{// Iterator will provide entry [k,v] tuples rather than values.
	while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false;}}}}}else{return false;}return true;default:return false;}}function isSymbol(propType,propValue){// Native Symbol.
	if(propType==='symbol'){return true;}// falsy value can't be a Symbol
	if(!propValue){return false;}// 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'
	if(propValue['@@toStringTag']==='Symbol'){return true;}// Fallback for non-spec compliant Symbols which are polyfilled.
	if(typeof Symbol==='function'&&propValue instanceof Symbol){return true;}return false;}// Equivalent of `typeof` but with special handling for array and regexp.
	function getPropType(propValue){var propType=typeof propValue==='undefined'?'undefined':_typeof(propValue);if(Array.isArray(propValue)){return'array';}if(propValue instanceof RegExp){// Old webkits (at least until Android 4.0) return 'function' rather than
	// 'object' for typeof a RegExp. We'll normalize this here so that /bla/
	// passes PropTypes.object.
	return'object';}if(isSymbol(propType,propValue)){return'symbol';}return propType;}// This handles more types than `getPropType`. Only used for error messages.
	// See `createPrimitiveTypeChecker`.
	function getPreciseType(propValue){if(typeof propValue==='undefined'||propValue===null){return''+propValue;}var propType=getPropType(propValue);if(propType==='object'){if(propValue instanceof Date){return'date';}else if(propValue instanceof RegExp){return'regexp';}}return propType;}// Returns a string that is postfixed to a warning about an invalid type.
	// For example, "undefined" or "of type array"
	function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case'array':case'object':return'an '+type;case'boolean':case'date':case'regexp':return'a '+type;default:return type;}}// Returns class name of the object, if any.
	function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS;}return propValue.constructor.name;}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.resetWarningCache=checkPropTypes.resetWarningCache;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes;};
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 16 */
/***/ (function(module, exports) {

	/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/'use strict';/* eslint-disable no-unused-vars */var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError('Object.assign cannot be called with null or undefined');}return Object(val);}function shouldUseNative(){try{if(!Object.assign){return false;}// Detect buggy property enumeration order in older V8 versions.
	// https://bugs.chromium.org/p/v8/issues/detail?id=4118
	var test1=new String('abc');// eslint-disable-line no-new-wrappers
	test1[5]='de';if(Object.getOwnPropertyNames(test1)[0]==='5'){return false;}// https://bugs.chromium.org/p/v8/issues/detail?id=3056
	var test2={};for(var i=0;i<10;i++){test2['_'+String.fromCharCode(i)]=i;}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n];});if(order2.join('')!=='0123456789'){return false;}// https://bugs.chromium.org/p/v8/issues/detail?id=3056
	var test3={};'abcdefghijklmnopqrst'.split('').forEach(function(letter){test3[letter]=letter;});if(Object.keys(Object.assign({},test3)).join('')!=='abcdefghijklmnopqrst'){return false;}return true;}catch(err){// We don't expect any of the above to throw, but better to be safe.
	return false;}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key];}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]];}}}}return to;};

/***/ }),
/* 17 */
/***/ (function(module, exports) {

	/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var ReactPropTypesSecret='SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';module.exports=ReactPropTypesSecret;

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var printWarning=function printWarning(){};if(process.env.NODE_ENV!=='production'){var ReactPropTypesSecret=__webpack_require__(17);var loggedTypeFailures={};var has=Function.call.bind(Object.prototype.hasOwnProperty);printWarning=function printWarning(text){var message='Warning: '+text;if(typeof console!=='undefined'){console.error(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};}/**
	 * Assert that the values match with the type specs.
	 * Error messages are memorized and will only be shown once.
	 *
	 * @param {object} typeSpecs Map of name to a ReactPropType
	 * @param {object} values Runtime values that need to be type-checked
	 * @param {string} location e.g. "prop", "context", "child context"
	 * @param {string} componentName Name of the component for error messages.
	 * @param {?Function} getStack Returns the component stack.
	 * @private
	 */function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=='production'){for(var typeSpecName in typeSpecs){if(has(typeSpecs,typeSpecName)){var error;// Prop type validation may throw. In case they do, we don't want to
	// fail the render phase where it didn't fail before. So we log it.
	// After these have been cleaned up, we'll let them throw.
	try{// This is intentionally an invariant that gets caught. It's the same
	// behavior as without this statement except with a better message.
	if(typeof typeSpecs[typeSpecName]!=='function'){var err=Error((componentName||'React class')+': '+location+' type `'+typeSpecName+'` is invalid; '+'it must be a function, usually from the `prop-types` package, but received `'+_typeof(typeSpecs[typeSpecName])+'`.');err.name='Invariant Violation';throw err;}error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret);}catch(ex){error=ex;}if(error&&!(error instanceof Error)){printWarning((componentName||'React class')+': type specification of '+location+' `'+typeSpecName+'` is invalid; the type checker '+'function must return `null` or an `Error` but returned a '+(typeof error==='undefined'?'undefined':_typeof(error))+'. '+'You may have forgotten to pass an argument to the type checker '+'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and '+'shape all require an argument).');}if(error instanceof Error&&!(error.message in loggedTypeFailures)){// Only monitor this failure once because there tends to be a lot of the
	// same error.
	loggedTypeFailures[error.message]=true;var stack=getStack?getStack():'';printWarning('Failed '+location+' type: '+error.message+(stack!=null?stack:''));}}}}}/**
	 * Resets warning cache when testing.
	 *
	 * @private
	 */checkPropTypes.resetWarningCache=function(){if(process.env.NODE_ENV!=='production'){loggedTypeFailures={};}};module.exports=checkPropTypes;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

	/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var ReactPropTypesSecret=__webpack_require__(17);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){// It is still safe when called from React.
	return;}var err=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. '+'Use PropTypes.checkPropTypes() to call them. '+'Read more at http://fb.me/use-check-prop-types');err.name='Invariant Violation';throw err;};shim.isRequired=shim;function getShim(){return shim;};// Important!
	// Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.
	var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes;};

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';if(process.env.NODE_ENV==='production'){module.exports=__webpack_require__(21);}else{module.exports=__webpack_require__(30);}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _interopDefault(t){return t&&"object"==(typeof t==="undefined"?"undefined":_typeof(t))&&"default"in t?t.default:t;}Object.defineProperty(exports,"__esModule",{value:!0});var resolvePathname=_interopDefault(__webpack_require__(22)),valueEqual=_interopDefault(__webpack_require__(25));__webpack_require__(28);var invariant=_interopDefault(__webpack_require__(29));function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var a in e){Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);}}return t;}).apply(this,arguments);}function addLeadingSlash(t){return"/"===t.charAt(0)?t:"/"+t;}function stripLeadingSlash(t){return"/"===t.charAt(0)?t.substr(1):t;}function hasBasename(t,n){return 0===t.toLowerCase().indexOf(n.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(n.length));}function stripBasename(t,n){return hasBasename(t,n)?t.substr(n.length):t;}function stripTrailingSlash(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t;}function parsePath(t){var n=t||"/",e="",a="",r=n.indexOf("#");-1!==r&&(a=n.substr(r),n=n.substr(0,r));var o=n.indexOf("?");return-1!==o&&(e=n.substr(o),n=n.substr(0,o)),{pathname:n,search:"?"===e?"":e,hash:"#"===a?"":a};}function createPath(t){var n=t.pathname,e=t.search,a=t.hash,r=n||"/";return e&&"?"!==e&&(r+="?"===e.charAt(0)?e:"?"+e),a&&"#"!==a&&(r+="#"===a.charAt(0)?a:"#"+a),r;}function createLocation(t,n,e,a){var r;"string"==typeof t?(r=parsePath(t)).state=n:(void 0===(r=_extends({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==n&&void 0===r.state&&(r.state=n));try{r.pathname=decodeURI(r.pathname);}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t;}return e&&(r.key=e),a?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=resolvePathname(r.pathname,a.pathname)):r.pathname=a.pathname:r.pathname||(r.pathname="/"),r;}function locationsAreEqual(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&valueEqual(t.state,n.state);}function createTransitionManager(){var o=null;var a=[];return{setPrompt:function setPrompt(t){return o=t,function(){o===t&&(o=null);};},confirmTransitionTo:function confirmTransitionTo(t,n,e,a){if(null!=o){var r="function"==typeof o?o(t,n):o;"string"==typeof r?"function"==typeof e?e(r,a):a(!0):a(!1!==r);}else a(!0);},appendListener:function appendListener(t){var n=!0;function e(){n&&t.apply(void 0,arguments);}return a.push(e),function(){n=!1,a=a.filter(function(t){return t!==e;});};},notifyListeners:function notifyListeners(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++){n[e]=arguments[e];}a.forEach(function(t){return t.apply(void 0,n);});}};}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(t,n){n(window.confirm(t));}function supportsHistory(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history;}function supportsPopStateOnHashChange(){return-1===window.navigator.userAgent.indexOf("Trident");}function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox");}function isExtraneousPopstateEvent(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS");}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{};}catch(t){return{};}}function createBrowserHistory(t){void 0===t&&(t={}),canUseDOM||invariant(!1);var s=window.history,c=supportsHistory(),n=!supportsPopStateOnHashChange(),e=t,a=e.forceRefresh,h=void 0!==a&&a,r=e.getUserConfirmation,u=void 0===r?getConfirmation:r,o=e.keyLength,i=void 0===o?6:o,f=t.basename?stripTrailingSlash(addLeadingSlash(t.basename)):"";function l(t){var n=t||{},e=n.key,a=n.state,r=window.location,o=r.pathname+r.search+r.hash;return f&&(o=stripBasename(o,f)),createLocation(o,a,e);}function d(){return Math.random().toString(36).substr(2,i);}var v=createTransitionManager();function p(t){_extends(T,t),T.length=s.length,v.notifyListeners(T.location,T.action);}function g(t){isExtraneousPopstateEvent(t)||w(l(t.state));}function P(){w(l(getHistoryState()));}var m=!1;function w(n){if(m)m=!1,p();else{v.confirmTransitionTo(n,"POP",u,function(t){t?p({action:"POP",location:n}):function(t){var n=T.location,e=H.indexOf(n.key);-1===e&&(e=0);var a=H.indexOf(t.key);-1===a&&(a=0);var r=e-a;r&&(m=!0,L(r));}(n);});}}var y=l(getHistoryState()),H=[y.key];function x(t){return f+createPath(t);}function L(t){s.go(t);}var O=0;function E(t){1===(O+=t)&&1===t?(window.addEventListener(PopStateEvent,g),n&&window.addEventListener(HashChangeEvent,P)):0===O&&(window.removeEventListener(PopStateEvent,g),n&&window.removeEventListener(HashChangeEvent,P));}var S=!1;var T={length:s.length,action:"POP",location:y,createHref:x,push:function push(t,n){var i=createLocation(t,n,d(),T.location);v.confirmTransitionTo(i,"PUSH",u,function(t){if(t){var n=x(i),e=i.key,a=i.state;if(c){if(s.pushState({key:e,state:a},null,n),h)window.location.href=n;else{var r=H.indexOf(T.location.key),o=H.slice(0,r+1);o.push(i.key),H=o,p({action:"PUSH",location:i});}}else window.location.href=n;}});},replace:function replace(t,n){var o="REPLACE",i=createLocation(t,n,d(),T.location);v.confirmTransitionTo(i,o,u,function(t){if(t){var n=x(i),e=i.key,a=i.state;if(c){if(s.replaceState({key:e,state:a},null,n),h)window.location.replace(n);else{var r=H.indexOf(T.location.key);-1!==r&&(H[r]=i.key),p({action:o,location:i});}}else window.location.replace(n);}});},go:L,goBack:function goBack(){L(-1);},goForward:function goForward(){L(1);},block:function block(t){void 0===t&&(t=!1);var n=v.setPrompt(t);return S||(E(1),S=!0),function(){return S&&(S=!1,E(-1)),n();};},listen:function listen(t){var n=v.appendListener(t);return E(1),function(){E(-1),n();};}};return T;}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function encodePath(t){return"!"===t.charAt(0)?t:"!/"+stripLeadingSlash(t);},decodePath:function decodePath(t){return"!"===t.charAt(0)?t.substr(1):t;}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function stripHash(t){var n=t.indexOf("#");return-1===n?t:t.slice(0,n);}function getHashPath(){var t=window.location.href,n=t.indexOf("#");return-1===n?"":t.substring(n+1);}function pushHashPath(t){window.location.hash=t;}function replaceHashPath(t){window.location.replace(stripHash(window.location.href)+"#"+t);}function createHashHistory(t){void 0===t&&(t={}),canUseDOM||invariant(!1);var n=window.history,e=(supportsGoWithoutReloadUsingHash(),t),a=e.getUserConfirmation,i=void 0===a?getConfirmation:a,r=e.hashType,o=void 0===r?"slash":r,s=t.basename?stripTrailingSlash(addLeadingSlash(t.basename)):"",c=HashPathCoders[o],h=c.encodePath,u=c.decodePath;function f(){var t=u(getHashPath());return s&&(t=stripBasename(t,s)),createLocation(t);}var l=createTransitionManager();function d(t){_extends(E,t),E.length=n.length,l.notifyListeners(E.location,E.action);}var v=!1,p=null;function g(){var t=getHashPath(),n=h(t);if(t!==n)replaceHashPath(n);else{var e=f(),a=E.location;if(!v&&function(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash;}(a,e))return;if(p===createPath(e))return;p=null,function(n){if(v)v=!1,d();else{l.confirmTransitionTo(n,"POP",i,function(t){t?d({action:"POP",location:n}):function(t){var n=E.location,e=y.lastIndexOf(createPath(n));-1===e&&(e=0);var a=y.lastIndexOf(createPath(t));-1===a&&(a=0);var r=e-a;r&&(v=!0,H(r));}(n);});}}(e);}}var P=getHashPath(),m=h(P);P!==m&&replaceHashPath(m);var w=f(),y=[createPath(w)];function H(t){n.go(t);}var x=0;function L(t){1===(x+=t)&&1===t?window.addEventListener(HashChangeEvent$1,g):0===x&&window.removeEventListener(HashChangeEvent$1,g);}var O=!1;var E={length:n.length,action:"POP",location:w,createHref:function createHref(t){var n=document.querySelector("base"),e="";return n&&n.getAttribute("href")&&(e=stripHash(window.location.href)),e+"#"+h(s+createPath(t));},push:function push(t,n){var o=createLocation(t,void 0,void 0,E.location);l.confirmTransitionTo(o,"PUSH",i,function(t){if(t){var n=createPath(o),e=h(s+n);if(getHashPath()!==e){p=n,pushHashPath(e);var a=y.lastIndexOf(createPath(E.location)),r=y.slice(0,a+1);r.push(n),y=r,d({action:"PUSH",location:o});}else d();}});},replace:function replace(t,n){var r="REPLACE",o=createLocation(t,void 0,void 0,E.location);l.confirmTransitionTo(o,r,i,function(t){if(t){var n=createPath(o),e=h(s+n);getHashPath()!==e&&(p=n,replaceHashPath(e));var a=y.indexOf(createPath(E.location));-1!==a&&(y[a]=n),d({action:r,location:o});}});},go:H,goBack:function goBack(){H(-1);},goForward:function goForward(){H(1);},block:function block(t){void 0===t&&(t=!1);var n=l.setPrompt(t);return O||(L(1),O=!0),function(){return O&&(O=!1,L(-1)),n();};},listen:function listen(t){var n=l.appendListener(t);return L(1),function(){L(-1),n();};}};return E;}function clamp(t,n,e){return Math.min(Math.max(t,n),e);}function createMemoryHistory(t){void 0===t&&(t={});var n=t,r=n.getUserConfirmation,e=n.initialEntries,a=void 0===e?["/"]:e,o=n.initialIndex,i=void 0===o?0:o,s=n.keyLength,c=void 0===s?6:s,h=createTransitionManager();function u(t){_extends(g,t),g.length=g.entries.length,h.notifyListeners(g.location,g.action);}function f(){return Math.random().toString(36).substr(2,c);}var l=clamp(i,0,a.length-1),d=a.map(function(t){return createLocation(t,void 0,"string"==typeof t?f():t.key||f());}),v=createPath;function p(t){var n=clamp(g.index+t,0,g.entries.length-1),e=g.entries[n];h.confirmTransitionTo(e,"POP",r,function(t){t?u({action:"POP",location:e,index:n}):u();});}var g={length:d.length,action:"POP",location:d[l],index:l,entries:d,createHref:v,push:function push(t,n){var a=createLocation(t,n,f(),g.location);h.confirmTransitionTo(a,"PUSH",r,function(t){if(t){var n=g.index+1,e=g.entries.slice(0);e.length>n?e.splice(n,e.length-n,a):e.push(a),u({action:"PUSH",location:a,index:n,entries:e});}});},replace:function replace(t,n){var e="REPLACE",a=createLocation(t,n,f(),g.location);h.confirmTransitionTo(a,e,r,function(t){t&&(g.entries[g.index]=a,u({action:e,location:a}));});},go:p,goBack:function goBack(){p(-1);},goForward:function goForward(){p(1);},canGo:function canGo(t){var n=g.index+t;return 0<=n&&n<g.entries.length;},block:function block(t){return void 0===t&&(t=!1),h.setPrompt(t);},listen:function listen(t){return h.appendListener(t);}};return g;}exports.createBrowserHistory=createBrowserHistory,exports.createHashHistory=createHashHistory,exports.createMemoryHistory=createMemoryHistory,exports.createLocation=createLocation,exports.locationsAreEqual=locationsAreEqual,exports.parsePath=parsePath,exports.createPath=createPath;

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';if(process.env.NODE_ENV==='production'){module.exports=__webpack_require__(23);}else{module.exports=__webpack_require__(24);}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 23 */
/***/ (function(module, exports) {

	"use strict";function isAbsolute(e){return"/"===e.charAt(0);}function spliceOne(e,t){for(var s=t,n=s+1,i=e.length;n<i;s+=1,n+=1){e[s]=e[n];}e.pop();}function resolvePathname(e,t){void 0===t&&(t="");var s,n=e&&e.split("/")||[],i=t&&t.split("/")||[],l=e&&isAbsolute(e),r=t&&isAbsolute(t),o=l||r;if(e&&isAbsolute(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";if(i.length){var u=i[i.length-1];s="."===u||".."===u||""===u;}else s=!1;for(var a=0,c=i.length;0<=c;c--){var f=i[c];"."===f?spliceOne(i,c):".."===f?(spliceOne(i,c),a++):a&&(spliceOne(i,c),a--);}if(!o)for(;a--;a){i.unshift("..");}!o||""===i[0]||i[0]&&isAbsolute(i[0])||i.unshift("");var h=i.join("/");return s&&"/"!==h.substr(-1)&&(h+="/"),h;}module.exports=resolvePathname;

/***/ }),
/* 24 */
/***/ (function(module, exports) {

	'use strict';function isAbsolute(pathname){return pathname.charAt(0)==='/';}// About 1.5x faster than the two-arg version of Array#splice()
	function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1){list[i]=list[k];}list.pop();}// This implementation is based heavily on node's url.parse
	function resolvePathname(to,from){if(from===undefined)from='';var toParts=to&&to.split('/')||[];var fromParts=from&&from.split('/')||[];var isToAbs=to&&isAbsolute(to);var isFromAbs=from&&isAbsolute(from);var mustEndAbs=isToAbs||isFromAbs;if(to&&isAbsolute(to)){// to is absolute
	fromParts=toParts;}else if(toParts.length){// to is relative, drop the filename
	fromParts.pop();fromParts=fromParts.concat(toParts);}if(!fromParts.length)return'/';var hasTrailingSlash;if(fromParts.length){var last=fromParts[fromParts.length-1];hasTrailingSlash=last==='.'||last==='..'||last==='';}else{hasTrailingSlash=false;}var up=0;for(var i=fromParts.length;i>=0;i--){var part=fromParts[i];if(part==='.'){spliceOne(fromParts,i);}else if(part==='..'){spliceOne(fromParts,i);up++;}else if(up){spliceOne(fromParts,i);up--;}}if(!mustEndAbs)for(;up--;up){fromParts.unshift('..');}if(mustEndAbs&&fromParts[0]!==''&&(!fromParts[0]||!isAbsolute(fromParts[0])))fromParts.unshift('');var result=fromParts.join('/');if(hasTrailingSlash&&result.substr(-1)!=='/')result+='/';return result;}module.exports=resolvePathname;

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';if(process.env.NODE_ENV==='production'){module.exports=__webpack_require__(26);}else{module.exports=__webpack_require__(27);}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 26 */
/***/ (function(module, exports) {

	"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function valueOf(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e);}function valueEqual(u,r){if(u===r)return!0;if(null==u||null==r)return!1;if(Array.isArray(u))return Array.isArray(r)&&u.length===r.length&&u.every(function(e,u){return valueEqual(e,r[u]);});if("object"!=(typeof u==="undefined"?"undefined":_typeof(u))&&"object"!=(typeof r==="undefined"?"undefined":_typeof(r)))return!1;var e=valueOf(u),t=valueOf(r);return e!==u||t!==r?valueEqual(e,t):Object.keys(Object.assign({},u,r)).every(function(e){return valueEqual(u[e],r[e]);});}module.exports=valueEqual;

/***/ }),
/* 27 */
/***/ (function(module, exports) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function valueOf(obj){return obj.valueOf?obj.valueOf():Object.prototype.valueOf.call(obj);}function valueEqual(a,b){// Test for strict equality first.
	if(a===b)return true;// Otherwise, if either of them == null they are not equal.
	if(a==null||b==null)return false;if(Array.isArray(a)){return Array.isArray(b)&&a.length===b.length&&a.every(function(item,index){return valueEqual(item,b[index]);});}if((typeof a==='undefined'?'undefined':_typeof(a))==='object'||(typeof b==='undefined'?'undefined':_typeof(b))==='object'){var aValue=valueOf(a);var bValue=valueOf(b);if(aValue!==a||bValue!==b)return valueEqual(aValue,bValue);return Object.keys(Object.assign({},a,b)).every(function(key){return valueEqual(a[key],b[key]);});}return false;}module.exports=valueEqual;

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';var isProduction=process.env.NODE_ENV==='production';function warning(condition,message){if(!isProduction){if(condition){return;}var text="Warning: "+message;if(typeof console!=='undefined'){console.warn(text);}try{throw Error(text);}catch(x){}}}module.exports=warning;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';var isProduction=process.env.NODE_ENV==='production';var prefix='Invariant failed';function invariant(condition,message){if(condition){return;}if(isProduction){throw new Error(prefix);}else{throw new Error(prefix+": "+(message||''));}}module.exports=invariant;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,'__esModule',{value:true});function _interopDefault(ex){return ex&&(typeof ex==='undefined'?'undefined':_typeof(ex))==='object'&&'default'in ex?ex['default']:ex;}var resolvePathname=_interopDefault(__webpack_require__(22));var valueEqual=_interopDefault(__webpack_require__(25));var warning=_interopDefault(__webpack_require__(28));var invariant=_interopDefault(__webpack_require__(29));function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function addLeadingSlash(path){return path.charAt(0)==='/'?path:'/'+path;}function stripLeadingSlash(path){return path.charAt(0)==='/'?path.substr(1):path;}function hasBasename(path,prefix){return path.toLowerCase().indexOf(prefix.toLowerCase())===0&&'/?#'.indexOf(path.charAt(prefix.length))!==-1;}function stripBasename(path,prefix){return hasBasename(path,prefix)?path.substr(prefix.length):path;}function stripTrailingSlash(path){return path.charAt(path.length-1)==='/'?path.slice(0,-1):path;}function parsePath(path){var pathname=path||'/';var search='';var hash='';var hashIndex=pathname.indexOf('#');if(hashIndex!==-1){hash=pathname.substr(hashIndex);pathname=pathname.substr(0,hashIndex);}var searchIndex=pathname.indexOf('?');if(searchIndex!==-1){search=pathname.substr(searchIndex);pathname=pathname.substr(0,searchIndex);}return{pathname:pathname,search:search==='?'?'':search,hash:hash==='#'?'':hash};}function createPath(location){var pathname=location.pathname,search=location.search,hash=location.hash;var path=pathname||'/';if(search&&search!=='?')path+=search.charAt(0)==='?'?search:"?"+search;if(hash&&hash!=='#')path+=hash.charAt(0)==='#'?hash:"#"+hash;return path;}function createLocation(path,state,key,currentLocation){var location;if(typeof path==='string'){// Two-arg form: push(path, state)
	location=parsePath(path);location.state=state;}else{// One-arg form: push(location)
	location=_extends({},path);if(location.pathname===undefined)location.pathname='';if(location.search){if(location.search.charAt(0)!=='?')location.search='?'+location.search;}else{location.search='';}if(location.hash){if(location.hash.charAt(0)!=='#')location.hash='#'+location.hash;}else{location.hash='';}if(state!==undefined&&location.state===undefined)location.state=state;}try{location.pathname=decodeURI(location.pathname);}catch(e){if(e instanceof URIError){throw new URIError('Pathname "'+location.pathname+'" could not be decoded. '+'This is likely caused by an invalid percent-encoding.');}else{throw e;}}if(key)location.key=key;if(currentLocation){// Resolve incomplete/relative pathname relative to current location.
	if(!location.pathname){location.pathname=currentLocation.pathname;}else if(location.pathname.charAt(0)!=='/'){location.pathname=resolvePathname(location.pathname,currentLocation.pathname);}}else{// When there is no prior location and pathname is empty, set it to /
	if(!location.pathname){location.pathname='/';}}return location;}function locationsAreEqual(a,b){return a.pathname===b.pathname&&a.search===b.search&&a.hash===b.hash&&a.key===b.key&&valueEqual(a.state,b.state);}function createTransitionManager(){var prompt=null;function setPrompt(nextPrompt){warning(prompt==null,'A history supports only one prompt at a time');prompt=nextPrompt;return function(){if(prompt===nextPrompt)prompt=null;};}function confirmTransitionTo(location,action,getUserConfirmation,callback){// TODO: If another transition starts while we're still confirming
	// the previous one, we may end up in a weird state. Figure out the
	// best way to handle this.
	if(prompt!=null){var result=typeof prompt==='function'?prompt(location,action):prompt;if(typeof result==='string'){if(typeof getUserConfirmation==='function'){getUserConfirmation(result,callback);}else{warning(false,'A history needs a getUserConfirmation function in order to use a prompt message');callback(true);}}else{// Return false from a transition hook to cancel the transition.
	callback(result!==false);}}else{callback(true);}}var listeners=[];function appendListener(fn){var isActive=true;function listener(){if(isActive)fn.apply(void 0,arguments);}listeners.push(listener);return function(){isActive=false;listeners=listeners.filter(function(item){return item!==listener;});};}function notifyListeners(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}listeners.forEach(function(listener){return listener.apply(void 0,args);});}return{setPrompt:setPrompt,confirmTransitionTo:confirmTransitionTo,appendListener:appendListener,notifyListeners:notifyListeners};}var canUseDOM=!!(typeof window!=='undefined'&&window.document&&window.document.createElement);function getConfirmation(message,callback){callback(window.confirm(message));// eslint-disable-line no-alert
	}/**
	 * Returns true if the HTML5 history API is supported. Taken from Modernizr.
	 *
	 * https://github.com/Modernizr/Modernizr/blob/master/LICENSE
	 * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js
	 * changed to avoid false negatives for Windows Phones: https://github.com/reactjs/react-router/issues/586
	 */function supportsHistory(){var ua=window.navigator.userAgent;if((ua.indexOf('Android 2.')!==-1||ua.indexOf('Android 4.0')!==-1)&&ua.indexOf('Mobile Safari')!==-1&&ua.indexOf('Chrome')===-1&&ua.indexOf('Windows Phone')===-1)return false;return window.history&&'pushState'in window.history;}/**
	 * Returns true if browser fires popstate on hash change.
	 * IE10 and IE11 do not.
	 */function supportsPopStateOnHashChange(){return window.navigator.userAgent.indexOf('Trident')===-1;}/**
	 * Returns false if using go(n) with hash history causes a full page reload.
	 */function supportsGoWithoutReloadUsingHash(){return window.navigator.userAgent.indexOf('Firefox')===-1;}/**
	 * Returns true if a given popstate event is an extraneous WebKit event.
	 * Accounts for the fact that Chrome on iOS fires real popstate events
	 * containing undefined state when pressing the back button.
	 */function isExtraneousPopstateEvent(event){return event.state===undefined&&navigator.userAgent.indexOf('CriOS')===-1;}var PopStateEvent='popstate';var HashChangeEvent='hashchange';function getHistoryState(){try{return window.history.state||{};}catch(e){// IE 11 sometimes throws when accessing window.history.state
	// See https://github.com/ReactTraining/history/pull/289
	return{};}}/**
	 * Creates a history object that uses the HTML5 history API including
	 * pushState, replaceState, and the popstate event.
	 */function createBrowserHistory(props){if(props===void 0){props={};}!canUseDOM?invariant(false,'Browser history needs a DOM'):void 0;var globalHistory=window.history;var canUseHistory=supportsHistory();var needsHashChangeListener=!supportsPopStateOnHashChange();var _props=props,_props$forceRefresh=_props.forceRefresh,forceRefresh=_props$forceRefresh===void 0?false:_props$forceRefresh,_props$getUserConfirm=_props.getUserConfirmation,getUserConfirmation=_props$getUserConfirm===void 0?getConfirmation:_props$getUserConfirm,_props$keyLength=_props.keyLength,keyLength=_props$keyLength===void 0?6:_props$keyLength;var basename=props.basename?stripTrailingSlash(addLeadingSlash(props.basename)):'';function getDOMLocation(historyState){var _ref=historyState||{},key=_ref.key,state=_ref.state;var _window$location=window.location,pathname=_window$location.pathname,search=_window$location.search,hash=_window$location.hash;var path=pathname+search+hash;warning(!basename||hasBasename(path,basename),'You are attempting to use a basename on a page whose URL path does not begin '+'with the basename. Expected path "'+path+'" to begin with "'+basename+'".');if(basename)path=stripBasename(path,basename);return createLocation(path,state,key);}function createKey(){return Math.random().toString(36).substr(2,keyLength);}var transitionManager=createTransitionManager();function setState(nextState){_extends(history,nextState);history.length=globalHistory.length;transitionManager.notifyListeners(history.location,history.action);}function handlePopState(event){// Ignore extraneous popstate events in WebKit.
	if(isExtraneousPopstateEvent(event))return;handlePop(getDOMLocation(event.state));}function handleHashChange(){handlePop(getDOMLocation(getHistoryState()));}var forceNextPop=false;function handlePop(location){if(forceNextPop){forceNextPop=false;setState();}else{var action='POP';transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(ok){setState({action:action,location:location});}else{revertPop(location);}});}}function revertPop(fromLocation){var toLocation=history.location;// TODO: We could probably make this more reliable by
	// keeping a list of keys we've seen in sessionStorage.
	// Instead, we just default to 0 for keys we don't know.
	var toIndex=allKeys.indexOf(toLocation.key);if(toIndex===-1)toIndex=0;var fromIndex=allKeys.indexOf(fromLocation.key);if(fromIndex===-1)fromIndex=0;var delta=toIndex-fromIndex;if(delta){forceNextPop=true;go(delta);}}var initialLocation=getDOMLocation(getHistoryState());var allKeys=[initialLocation.key];// Public interface
	function createHref(location){return basename+createPath(location);}function push(path,state){warning(!((typeof path==='undefined'?'undefined':_typeof(path))==='object'&&path.state!==undefined&&state!==undefined),'You should avoid providing a 2nd state argument to push when the 1st '+'argument is a location-like object that already has state; it is ignored');var action='PUSH';var location=createLocation(path,state,createKey(),history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var href=createHref(location);var key=location.key,state=location.state;if(canUseHistory){globalHistory.pushState({key:key,state:state},null,href);if(forceRefresh){window.location.href=href;}else{var prevIndex=allKeys.indexOf(history.location.key);var nextKeys=allKeys.slice(0,prevIndex+1);nextKeys.push(location.key);allKeys=nextKeys;setState({action:action,location:location});}}else{warning(state===undefined,'Browser history cannot push state in browsers that do not support HTML5 history');window.location.href=href;}});}function replace(path,state){warning(!((typeof path==='undefined'?'undefined':_typeof(path))==='object'&&path.state!==undefined&&state!==undefined),'You should avoid providing a 2nd state argument to replace when the 1st '+'argument is a location-like object that already has state; it is ignored');var action='REPLACE';var location=createLocation(path,state,createKey(),history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var href=createHref(location);var key=location.key,state=location.state;if(canUseHistory){globalHistory.replaceState({key:key,state:state},null,href);if(forceRefresh){window.location.replace(href);}else{var prevIndex=allKeys.indexOf(history.location.key);if(prevIndex!==-1)allKeys[prevIndex]=location.key;setState({action:action,location:location});}}else{warning(state===undefined,'Browser history cannot replace state in browsers that do not support HTML5 history');window.location.replace(href);}});}function go(n){globalHistory.go(n);}function goBack(){go(-1);}function goForward(){go(1);}var listenerCount=0;function checkDOMListeners(delta){listenerCount+=delta;if(listenerCount===1&&delta===1){window.addEventListener(PopStateEvent,handlePopState);if(needsHashChangeListener)window.addEventListener(HashChangeEvent,handleHashChange);}else if(listenerCount===0){window.removeEventListener(PopStateEvent,handlePopState);if(needsHashChangeListener)window.removeEventListener(HashChangeEvent,handleHashChange);}}var isBlocked=false;function block(prompt){if(prompt===void 0){prompt=false;}var unblock=transitionManager.setPrompt(prompt);if(!isBlocked){checkDOMListeners(1);isBlocked=true;}return function(){if(isBlocked){isBlocked=false;checkDOMListeners(-1);}return unblock();};}function listen(listener){var unlisten=transitionManager.appendListener(listener);checkDOMListeners(1);return function(){checkDOMListeners(-1);unlisten();};}var history={length:globalHistory.length,action:'POP',location:initialLocation,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return history;}var HashChangeEvent$1='hashchange';var HashPathCoders={hashbang:{encodePath:function encodePath(path){return path.charAt(0)==='!'?path:'!/'+stripLeadingSlash(path);},decodePath:function decodePath(path){return path.charAt(0)==='!'?path.substr(1):path;}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function stripHash(url){var hashIndex=url.indexOf('#');return hashIndex===-1?url:url.slice(0,hashIndex);}function getHashPath(){// We can't use window.location.hash here because it's not
	// consistent across browsers - Firefox will pre-decode it!
	var href=window.location.href;var hashIndex=href.indexOf('#');return hashIndex===-1?'':href.substring(hashIndex+1);}function pushHashPath(path){window.location.hash=path;}function replaceHashPath(path){window.location.replace(stripHash(window.location.href)+'#'+path);}function createHashHistory(props){if(props===void 0){props={};}!canUseDOM?invariant(false,'Hash history needs a DOM'):void 0;var globalHistory=window.history;var canGoWithoutReload=supportsGoWithoutReloadUsingHash();var _props=props,_props$getUserConfirm=_props.getUserConfirmation,getUserConfirmation=_props$getUserConfirm===void 0?getConfirmation:_props$getUserConfirm,_props$hashType=_props.hashType,hashType=_props$hashType===void 0?'slash':_props$hashType;var basename=props.basename?stripTrailingSlash(addLeadingSlash(props.basename)):'';var _HashPathCoders$hashT=HashPathCoders[hashType],encodePath=_HashPathCoders$hashT.encodePath,decodePath=_HashPathCoders$hashT.decodePath;function getDOMLocation(){var path=decodePath(getHashPath());warning(!basename||hasBasename(path,basename),'You are attempting to use a basename on a page whose URL path does not begin '+'with the basename. Expected path "'+path+'" to begin with "'+basename+'".');if(basename)path=stripBasename(path,basename);return createLocation(path);}var transitionManager=createTransitionManager();function setState(nextState){_extends(history,nextState);history.length=globalHistory.length;transitionManager.notifyListeners(history.location,history.action);}var forceNextPop=false;var ignorePath=null;function locationsAreEqual$$1(a,b){return a.pathname===b.pathname&&a.search===b.search&&a.hash===b.hash;}function handleHashChange(){var path=getHashPath();var encodedPath=encodePath(path);if(path!==encodedPath){// Ensure we always have a properly-encoded hash.
	replaceHashPath(encodedPath);}else{var location=getDOMLocation();var prevLocation=history.location;if(!forceNextPop&&locationsAreEqual$$1(prevLocation,location))return;// A hashchange doesn't always == location change.
	if(ignorePath===createPath(location))return;// Ignore this change; we already setState in push/replace.
	ignorePath=null;handlePop(location);}}function handlePop(location){if(forceNextPop){forceNextPop=false;setState();}else{var action='POP';transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(ok){setState({action:action,location:location});}else{revertPop(location);}});}}function revertPop(fromLocation){var toLocation=history.location;// TODO: We could probably make this more reliable by
	// keeping a list of paths we've seen in sessionStorage.
	// Instead, we just default to 0 for paths we don't know.
	var toIndex=allPaths.lastIndexOf(createPath(toLocation));if(toIndex===-1)toIndex=0;var fromIndex=allPaths.lastIndexOf(createPath(fromLocation));if(fromIndex===-1)fromIndex=0;var delta=toIndex-fromIndex;if(delta){forceNextPop=true;go(delta);}}// Ensure the hash is encoded properly before doing anything else.
	var path=getHashPath();var encodedPath=encodePath(path);if(path!==encodedPath)replaceHashPath(encodedPath);var initialLocation=getDOMLocation();var allPaths=[createPath(initialLocation)];// Public interface
	function createHref(location){var baseTag=document.querySelector('base');var href='';if(baseTag&&baseTag.getAttribute('href')){href=stripHash(window.location.href);}return href+'#'+encodePath(basename+createPath(location));}function push(path,state){warning(state===undefined,'Hash history cannot push state; it is ignored');var action='PUSH';var location=createLocation(path,undefined,undefined,history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var path=createPath(location);var encodedPath=encodePath(basename+path);var hashChanged=getHashPath()!==encodedPath;if(hashChanged){// We cannot tell if a hashchange was caused by a PUSH, so we'd
	// rather setState here and ignore the hashchange. The caveat here
	// is that other hash histories in the page will consider it a POP.
	ignorePath=path;pushHashPath(encodedPath);var prevIndex=allPaths.lastIndexOf(createPath(history.location));var nextPaths=allPaths.slice(0,prevIndex+1);nextPaths.push(path);allPaths=nextPaths;setState({action:action,location:location});}else{warning(false,'Hash history cannot PUSH the same path; a new entry will not be added to the history stack');setState();}});}function replace(path,state){warning(state===undefined,'Hash history cannot replace state; it is ignored');var action='REPLACE';var location=createLocation(path,undefined,undefined,history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var path=createPath(location);var encodedPath=encodePath(basename+path);var hashChanged=getHashPath()!==encodedPath;if(hashChanged){// We cannot tell if a hashchange was caused by a REPLACE, so we'd
	// rather setState here and ignore the hashchange. The caveat here
	// is that other hash histories in the page will consider it a POP.
	ignorePath=path;replaceHashPath(encodedPath);}var prevIndex=allPaths.indexOf(createPath(history.location));if(prevIndex!==-1)allPaths[prevIndex]=path;setState({action:action,location:location});});}function go(n){warning(canGoWithoutReload,'Hash history go(n) causes a full page reload in this browser');globalHistory.go(n);}function goBack(){go(-1);}function goForward(){go(1);}var listenerCount=0;function checkDOMListeners(delta){listenerCount+=delta;if(listenerCount===1&&delta===1){window.addEventListener(HashChangeEvent$1,handleHashChange);}else if(listenerCount===0){window.removeEventListener(HashChangeEvent$1,handleHashChange);}}var isBlocked=false;function block(prompt){if(prompt===void 0){prompt=false;}var unblock=transitionManager.setPrompt(prompt);if(!isBlocked){checkDOMListeners(1);isBlocked=true;}return function(){if(isBlocked){isBlocked=false;checkDOMListeners(-1);}return unblock();};}function listen(listener){var unlisten=transitionManager.appendListener(listener);checkDOMListeners(1);return function(){checkDOMListeners(-1);unlisten();};}var history={length:globalHistory.length,action:'POP',location:initialLocation,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return history;}function clamp(n,lowerBound,upperBound){return Math.min(Math.max(n,lowerBound),upperBound);}/**
	 * Creates a history object that stores locations in memory.
	 */function createMemoryHistory(props){if(props===void 0){props={};}var _props=props,getUserConfirmation=_props.getUserConfirmation,_props$initialEntries=_props.initialEntries,initialEntries=_props$initialEntries===void 0?['/']:_props$initialEntries,_props$initialIndex=_props.initialIndex,initialIndex=_props$initialIndex===void 0?0:_props$initialIndex,_props$keyLength=_props.keyLength,keyLength=_props$keyLength===void 0?6:_props$keyLength;var transitionManager=createTransitionManager();function setState(nextState){_extends(history,nextState);history.length=history.entries.length;transitionManager.notifyListeners(history.location,history.action);}function createKey(){return Math.random().toString(36).substr(2,keyLength);}var index=clamp(initialIndex,0,initialEntries.length-1);var entries=initialEntries.map(function(entry){return typeof entry==='string'?createLocation(entry,undefined,createKey()):createLocation(entry,undefined,entry.key||createKey());});// Public interface
	var createHref=createPath;function push(path,state){warning(!((typeof path==='undefined'?'undefined':_typeof(path))==='object'&&path.state!==undefined&&state!==undefined),'You should avoid providing a 2nd state argument to push when the 1st '+'argument is a location-like object that already has state; it is ignored');var action='PUSH';var location=createLocation(path,state,createKey(),history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var prevIndex=history.index;var nextIndex=prevIndex+1;var nextEntries=history.entries.slice(0);if(nextEntries.length>nextIndex){nextEntries.splice(nextIndex,nextEntries.length-nextIndex,location);}else{nextEntries.push(location);}setState({action:action,location:location,index:nextIndex,entries:nextEntries});});}function replace(path,state){warning(!((typeof path==='undefined'?'undefined':_typeof(path))==='object'&&path.state!==undefined&&state!==undefined),'You should avoid providing a 2nd state argument to replace when the 1st '+'argument is a location-like object that already has state; it is ignored');var action='REPLACE';var location=createLocation(path,state,createKey(),history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;history.entries[history.index]=location;setState({action:action,location:location});});}function go(n){var nextIndex=clamp(history.index+n,0,history.entries.length-1);var action='POP';var location=history.entries[nextIndex];transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(ok){setState({action:action,location:location,index:nextIndex});}else{// Mimic the behavior of DOM histories by
	// causing a render after a cancelled POP.
	setState();}});}function goBack(){go(-1);}function goForward(){go(1);}function canGo(n){var nextIndex=history.index+n;return nextIndex>=0&&nextIndex<history.entries.length;}function block(prompt){if(prompt===void 0){prompt=false;}return transitionManager.setPrompt(prompt);}function listen(listener){return transitionManager.appendListener(listener);}var history={length:entries.length,action:'POP',location:entries[index],index:index,entries:entries,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,canGo:canGo,block:block,listen:listen};return history;}exports.createBrowserHistory=createBrowserHistory;exports.createHashHistory=createHashHistory;exports.createMemoryHistory=createMemoryHistory;exports.createLocation=createLocation;exports.locationsAreEqual=locationsAreEqual;exports.parsePath=parsePath;exports.createPath=createPath;

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _interopDefault(e){return e&&(typeof e==='undefined'?'undefined':_typeof(e))==='object'&&'default'in e?e['default']:e;}var React=__webpack_require__(10),React__default=_interopDefault(React),_inheritsLoose=_interopDefault(__webpack_require__(32)),PropTypes=_interopDefault(__webpack_require__(33)),gud=_interopDefault(__webpack_require__(38)),warning=_interopDefault(__webpack_require__(28));var MAX_SIGNED_31_BIT_INT=1073741823;function objectIs(x,y){if(x===y){return x!==0||1/x===1/y;}else{return x!==x&&y!==y;}}function createEventEmitter(value){var handlers=[];return{on:function on(handler){handlers.push(handler);},off:function off(handler){handlers=handlers.filter(function(h){return h!==handler;});},get:function get(){return value;},set:function set(newValue,changedBits){value=newValue;handlers.forEach(function(handler){return handler(value,changedBits);});}};}function onlyChild(children){return Array.isArray(children)?children[0]:children;}function createReactContext(defaultValue,calculateChangedBits){var _Provider$childContex,_Consumer$contextType;var contextProp='__create-react-context-'+gud()+'__';var Provider=/*#__PURE__*/function(_Component){_inheritsLoose(Provider,_Component);function Provider(){var _this;_this=_Component.apply(this,arguments)||this;_this.emitter=createEventEmitter(_this.props.value);return _this;}var _proto=Provider.prototype;_proto.getChildContext=function getChildContext(){var _ref;return _ref={},_ref[contextProp]=this.emitter,_ref;};_proto.componentWillReceiveProps=function componentWillReceiveProps(nextProps){if(this.props.value!==nextProps.value){var oldValue=this.props.value;var newValue=nextProps.value;var changedBits;if(objectIs(oldValue,newValue)){changedBits=0;}else{changedBits=typeof calculateChangedBits==='function'?calculateChangedBits(oldValue,newValue):MAX_SIGNED_31_BIT_INT;if(process.env.NODE_ENV!=='production'){warning((changedBits&MAX_SIGNED_31_BIT_INT)===changedBits,'calculateChangedBits: Expected the return value to be a '+'31-bit integer. Instead received: '+changedBits);}changedBits|=0;if(changedBits!==0){this.emitter.set(nextProps.value,changedBits);}}}};_proto.render=function render(){return this.props.children;};return Provider;}(React.Component);Provider.childContextTypes=(_Provider$childContex={},_Provider$childContex[contextProp]=PropTypes.object.isRequired,_Provider$childContex);var Consumer=/*#__PURE__*/function(_Component2){_inheritsLoose(Consumer,_Component2);function Consumer(){var _this2;_this2=_Component2.apply(this,arguments)||this;_this2.state={value:_this2.getValue()};_this2.onUpdate=function(newValue,changedBits){var observedBits=_this2.observedBits|0;if((observedBits&changedBits)!==0){_this2.setState({value:_this2.getValue()});}};return _this2;}var _proto2=Consumer.prototype;_proto2.componentWillReceiveProps=function componentWillReceiveProps(nextProps){var observedBits=nextProps.observedBits;this.observedBits=observedBits===undefined||observedBits===null?MAX_SIGNED_31_BIT_INT:observedBits;};_proto2.componentDidMount=function componentDidMount(){if(this.context[contextProp]){this.context[contextProp].on(this.onUpdate);}var observedBits=this.props.observedBits;this.observedBits=observedBits===undefined||observedBits===null?MAX_SIGNED_31_BIT_INT:observedBits;};_proto2.componentWillUnmount=function componentWillUnmount(){if(this.context[contextProp]){this.context[contextProp].off(this.onUpdate);}};_proto2.getValue=function getValue(){if(this.context[contextProp]){return this.context[contextProp].get();}else{return defaultValue;}};_proto2.render=function render(){return onlyChild(this.props.children)(this.state.value);};return Consumer;}(React.Component);Consumer.contextTypes=(_Consumer$contextType={},_Consumer$contextType[contextProp]=PropTypes.object,_Consumer$contextType);return{Provider:Provider,Consumer:Consumer};}var index=React__default.createContext||createReactContext;module.exports=index;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 32 */
/***/ (function(module, exports) {

	"use strict";function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}module.exports=_inheritsLoose;

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */if(process.env.NODE_ENV!=='production'){var ReactIs=__webpack_require__(12);// By explicitly using `prop-types` you are opting into new development behavior.
	// http://fb.me/prop-types-in-prod
	var throwOnDirectAccess=true;module.exports=__webpack_require__(34)(ReactIs.isElement,throwOnDirectAccess);}else{// By explicitly using `prop-types` you are opting into new production behavior.
	// http://fb.me/prop-types-in-prod
	module.exports=__webpack_require__(37)();}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var ReactIs=__webpack_require__(12);var assign=__webpack_require__(16);var ReactPropTypesSecret=__webpack_require__(35);var checkPropTypes=__webpack_require__(36);var has=Function.call.bind(Object.prototype.hasOwnProperty);var printWarning=function printWarning(){};if(process.env.NODE_ENV!=='production'){printWarning=function printWarning(text){var message='Warning: '+text;if(typeof console!=='undefined'){console.error(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};}function emptyFunctionThatReturnsNull(){return null;}module.exports=function(isValidElement,throwOnDirectAccess){/* global Symbol */var ITERATOR_SYMBOL=typeof Symbol==='function'&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL='@@iterator';// Before Symbol spec.
	/**
	   * Returns the iterator method function contained on the iterable object.
	   *
	   * Be sure to invoke the function with the iterable as context:
	   *
	   *     var iteratorFn = getIteratorFn(myIterable);
	   *     if (iteratorFn) {
	   *       var iterator = iteratorFn.call(myIterable);
	   *       ...
	   *     }
	   *
	   * @param {?object} maybeIterable
	   * @return {?function}
	   */function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==='function'){return iteratorFn;}}/**
	   * Collection of methods that allow declaration and validation of props that are
	   * supplied to React components. Example usage:
	   *
	   *   var Props = require('ReactPropTypes');
	   *   var MyArticle = React.createClass({
	   *     propTypes: {
	   *       // An optional string prop named "description".
	   *       description: Props.string,
	   *
	   *       // A required enum prop named "category".
	   *       category: Props.oneOf(['News','Photos']).isRequired,
	   *
	   *       // A prop named "dialog" that requires an instance of Dialog.
	   *       dialog: Props.instanceOf(Dialog).isRequired
	   *     },
	   *     render: function() { ... }
	   *   });
	   *
	   * A more formal specification of how these methods are used:
	   *
	   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)
	   *   decl := ReactPropTypes.{type}(.isRequired)?
	   *
	   * Each and every declaration produces a function with the same signature. This
	   * allows the creation of custom validation functions. For example:
	   *
	   *  var MyLink = React.createClass({
	   *    propTypes: {
	   *      // An optional string or URI prop named "href".
	   *      href: function(props, propName, componentName) {
	   *        var propValue = props[propName];
	   *        if (propValue != null && typeof propValue !== 'string' &&
	   *            !(propValue instanceof URI)) {
	   *          return new Error(
	   *            'Expected a string or an URI for ' + propName + ' in ' +
	   *            componentName
	   *          );
	   *        }
	   *      }
	   *    },
	   *    render: function() {...}
	   *  });
	   *
	   * @internal
	   */var ANONYMOUS='<<anonymous>>';// Important!
	// Keep this list in sync with production version in `./factoryWithThrowingShims.js`.
	var ReactPropTypes={array:createPrimitiveTypeChecker('array'),bool:createPrimitiveTypeChecker('boolean'),func:createPrimitiveTypeChecker('function'),number:createPrimitiveTypeChecker('number'),object:createPrimitiveTypeChecker('object'),string:createPrimitiveTypeChecker('string'),symbol:createPrimitiveTypeChecker('symbol'),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),elementType:createElementTypeTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};/**
	   * inlined Object.is polyfill to avoid requiring consumers ship their own
	   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
	   *//*eslint-disable no-self-compare*/function is(x,y){// SameValue algorithm
	if(x===y){// Steps 1-5, 7-10
	// Steps 6.b-6.e: +0 != -0
	return x!==0||1/x===1/y;}else{// Step 6.a: NaN == NaN
	return x!==x&&y!==y;}}/*eslint-enable no-self-compare*//**
	   * We use an Error-like object for backward compatibility as people may call
	   * PropTypes directly and inspect their output. However, we don't use real
	   * Errors anymore. We don't inspect their stack anyway, and creating them
	   * is prohibitively expensive if they are created too often, such as what
	   * happens in oneOfType() for any type before the one that matched.
	   */function PropTypeError(message){this.message=message;this.stack='';}// Make `instanceof Error` still work for returned errors.
	PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=='production'){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0;}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){// New behavior only for users of `prop-types` package
	var err=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. '+'Use `PropTypes.checkPropTypes()` to call them. '+'Read more at http://fb.me/use-check-prop-types');err.name='Invariant Violation';throw err;}else if(process.env.NODE_ENV!=='production'&&typeof console!=='undefined'){// Old behavior for people using React.PropTypes
	var cacheKey=componentName+':'+propName;if(!manualPropTypeCallCache[cacheKey]&&// Avoid spamming the console because they are often not actionable except for lib authors
	manualPropTypeWarningCount<3){printWarning('You are manually calling a React.PropTypes validation '+'function for the `'+propFullName+'` prop on `'+componentName+'`. This is deprecated '+'and will throw in the standalone `prop-types` package. '+'You may be seeing this warning due to a third-party PropTypes '+'library. See https://fb.me/react-warning-dont-call-proptypes '+'for details.');manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++;}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError('The '+location+' `'+propFullName+'` is marked as required '+('in `'+componentName+'`, but its value is `null`.'));}return new PropTypeError('The '+location+' `'+propFullName+'` is marked as required in '+('`'+componentName+'`, but its value is `undefined`.'));}return null;}else{return validate(props,propName,componentName,location,propFullName);}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType;}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){// `propValue` being instance of, say, date/regexp, pass the 'object'
	// check, but we can offer a more precise error message here rather than
	// 'of type `object`'.
	var preciseType=getPreciseType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+preciseType+'` supplied to `'+componentName+'`, expected ')+('`'+expectedType+'`.'));}return null;}return createChainableTypeChecker(validate);}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunctionThatReturnsNull);}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=='function'){return new PropTypeError('Property `'+propFullName+'` of component `'+componentName+'` has invalid PropType notation inside arrayOf.');}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected an array.'));}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+'['+i+']',ReactPropTypesSecret);if(error instanceof Error){return error;}}return null;}return createChainableTypeChecker(validate);}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected a single ReactElement.'));}return null;}return createChainableTypeChecker(validate);}function createElementTypeTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactIs.isValidElementType(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected a single ReactElement type.'));}return null;}return createChainableTypeChecker(validate);}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+actualClassName+'` supplied to `'+componentName+'`, expected ')+('instance of `'+expectedClassName+'`.'));}return null;}return createChainableTypeChecker(validate);}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){if(process.env.NODE_ENV!=='production'){if(arguments.length>1){printWarning('Invalid arguments supplied to oneOf, expected an array, got '+arguments.length+' arguments. '+'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');}else{printWarning('Invalid argument supplied to oneOf, expected an array.');}}return emptyFunctionThatReturnsNull;}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null;}}var valuesString=JSON.stringify(expectedValues,function replacer(key,value){var type=getPreciseType(value);if(type==='symbol'){return String(value);}return value;});return new PropTypeError('Invalid '+location+' `'+propFullName+'` of value `'+String(propValue)+'` '+('supplied to `'+componentName+'`, expected one of '+valuesString+'.'));}return createChainableTypeChecker(validate);}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=='function'){return new PropTypeError('Property `'+propFullName+'` of component `'+componentName+'` has invalid PropType notation inside objectOf.');}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected an object.'));}for(var key in propValue){if(has(propValue,key)){var error=typeChecker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error instanceof Error){return error;}}}return null;}return createChainableTypeChecker(validate);}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=='production'?printWarning('Invalid argument supplied to oneOfType, expected an instance of array.'):void 0;return emptyFunctionThatReturnsNull;}for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(typeof checker!=='function'){printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but '+'received '+getPostfixForTypeWarning(checker)+' at index '+i+'.');return emptyFunctionThatReturnsNull;}}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null;}}return new PropTypeError('Invalid '+location+' `'+propFullName+'` supplied to '+('`'+componentName+'`.'));}return createChainableTypeChecker(validate);}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError('Invalid '+location+' `'+propFullName+'` supplied to '+('`'+componentName+'`, expected a ReactNode.'));}return null;}return createChainableTypeChecker(validate);}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type `'+propType+'` '+('supplied to `'+componentName+'`, expected `object`.'));}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue;}var error=checker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error){return error;}}return null;}return createChainableTypeChecker(validate);}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type `'+propType+'` '+('supplied to `'+componentName+'`, expected `object`.'));}// We need to check all keys in case some are required but missing from
	// props.
	var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker){return new PropTypeError('Invalid '+location+' `'+propFullName+'` key `'+key+'` supplied to `'+componentName+'`.'+'\nBad object: '+JSON.stringify(props[propName],null,'  ')+'\nValid keys: '+JSON.stringify(Object.keys(shapeTypes),null,'  '));}var error=checker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error){return error;}}return null;}return createChainableTypeChecker(validate);}function isNode(propValue){switch(typeof propValue==='undefined'?'undefined':_typeof(propValue)){case'number':case'string':case'undefined':return true;case'boolean':return!propValue;case'object':if(Array.isArray(propValue)){return propValue.every(isNode);}if(propValue===null||isValidElement(propValue)){return true;}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false;}}}else{// Iterator will provide entry [k,v] tuples rather than values.
	while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false;}}}}}else{return false;}return true;default:return false;}}function isSymbol(propType,propValue){// Native Symbol.
	if(propType==='symbol'){return true;}// falsy value can't be a Symbol
	if(!propValue){return false;}// 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'
	if(propValue['@@toStringTag']==='Symbol'){return true;}// Fallback for non-spec compliant Symbols which are polyfilled.
	if(typeof Symbol==='function'&&propValue instanceof Symbol){return true;}return false;}// Equivalent of `typeof` but with special handling for array and regexp.
	function getPropType(propValue){var propType=typeof propValue==='undefined'?'undefined':_typeof(propValue);if(Array.isArray(propValue)){return'array';}if(propValue instanceof RegExp){// Old webkits (at least until Android 4.0) return 'function' rather than
	// 'object' for typeof a RegExp. We'll normalize this here so that /bla/
	// passes PropTypes.object.
	return'object';}if(isSymbol(propType,propValue)){return'symbol';}return propType;}// This handles more types than `getPropType`. Only used for error messages.
	// See `createPrimitiveTypeChecker`.
	function getPreciseType(propValue){if(typeof propValue==='undefined'||propValue===null){return''+propValue;}var propType=getPropType(propValue);if(propType==='object'){if(propValue instanceof Date){return'date';}else if(propValue instanceof RegExp){return'regexp';}}return propType;}// Returns a string that is postfixed to a warning about an invalid type.
	// For example, "undefined" or "of type array"
	function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case'array':case'object':return'an '+type;case'boolean':case'date':case'regexp':return'a '+type;default:return type;}}// Returns class name of the object, if any.
	function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS;}return propValue.constructor.name;}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.resetWarningCache=checkPropTypes.resetWarningCache;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes;};
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 35 */
/***/ (function(module, exports) {

	/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var ReactPropTypesSecret='SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';module.exports=ReactPropTypesSecret;

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var printWarning=function printWarning(){};if(process.env.NODE_ENV!=='production'){var ReactPropTypesSecret=__webpack_require__(35);var loggedTypeFailures={};var has=Function.call.bind(Object.prototype.hasOwnProperty);printWarning=function printWarning(text){var message='Warning: '+text;if(typeof console!=='undefined'){console.error(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};}/**
	 * Assert that the values match with the type specs.
	 * Error messages are memorized and will only be shown once.
	 *
	 * @param {object} typeSpecs Map of name to a ReactPropType
	 * @param {object} values Runtime values that need to be type-checked
	 * @param {string} location e.g. "prop", "context", "child context"
	 * @param {string} componentName Name of the component for error messages.
	 * @param {?Function} getStack Returns the component stack.
	 * @private
	 */function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=='production'){for(var typeSpecName in typeSpecs){if(has(typeSpecs,typeSpecName)){var error;// Prop type validation may throw. In case they do, we don't want to
	// fail the render phase where it didn't fail before. So we log it.
	// After these have been cleaned up, we'll let them throw.
	try{// This is intentionally an invariant that gets caught. It's the same
	// behavior as without this statement except with a better message.
	if(typeof typeSpecs[typeSpecName]!=='function'){var err=Error((componentName||'React class')+': '+location+' type `'+typeSpecName+'` is invalid; '+'it must be a function, usually from the `prop-types` package, but received `'+_typeof(typeSpecs[typeSpecName])+'`.');err.name='Invariant Violation';throw err;}error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret);}catch(ex){error=ex;}if(error&&!(error instanceof Error)){printWarning((componentName||'React class')+': type specification of '+location+' `'+typeSpecName+'` is invalid; the type checker '+'function must return `null` or an `Error` but returned a '+(typeof error==='undefined'?'undefined':_typeof(error))+'. '+'You may have forgotten to pass an argument to the type checker '+'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and '+'shape all require an argument).');}if(error instanceof Error&&!(error.message in loggedTypeFailures)){// Only monitor this failure once because there tends to be a lot of the
	// same error.
	loggedTypeFailures[error.message]=true;var stack=getStack?getStack():'';printWarning('Failed '+location+' type: '+error.message+(stack!=null?stack:''));}}}}}/**
	 * Resets warning cache when testing.
	 *
	 * @private
	 */checkPropTypes.resetWarningCache=function(){if(process.env.NODE_ENV!=='production'){loggedTypeFailures={};}};module.exports=checkPropTypes;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

	/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var ReactPropTypesSecret=__webpack_require__(35);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){// It is still safe when called from React.
	return;}var err=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. '+'Use PropTypes.checkPropTypes() to call them. '+'Read more at http://fb.me/use-check-prop-types');err.name='Invariant Violation';throw err;};shim.isRequired=shim;function getShim(){return shim;};// Important!
	// Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.
	var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes;};

/***/ }),
/* 38 */
/***/ (function(module, exports) {

	/* WEBPACK VAR INJECTION */(function(global) {'use strict';var key='__global_unique_id__';module.exports=function(){return global[key]=(global[key]||0)+1;};
	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var isarray=__webpack_require__(40);/**
	 * Expose `pathToRegexp`.
	 */module.exports=pathToRegexp;module.exports.parse=parse;module.exports.compile=compile;module.exports.tokensToFunction=tokensToFunction;module.exports.tokensToRegExp=tokensToRegExp;/**
	 * The main path matching regexp utility.
	 *
	 * @type {RegExp}
	 */var PATH_REGEXP=new RegExp([// Match escaped characters that would otherwise appear in future matches.
	// This allows the user to escape special characters that won't transform.
	'(\\\\.)',// Match Express-style parameters and un-named parameters with a prefix
	// and optional suffixes. Matches appear as:
	//
	// "/:test(\\d+)?" => ["/", "test", "\d+", undefined, "?", undefined]
	// "/route(\\d+)"  => [undefined, undefined, undefined, "\d+", undefined, undefined]
	// "/*"            => ["/", undefined, undefined, undefined, undefined, "*"]
	'([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))'].join('|'),'g');/**
	 * Parse a string for the raw tokens.
	 *
	 * @param  {string}  str
	 * @param  {Object=} options
	 * @return {!Array}
	 */function parse(str,options){var tokens=[];var key=0;var index=0;var path='';var defaultDelimiter=options&&options.delimiter||'/';var res;while((res=PATH_REGEXP.exec(str))!=null){var m=res[0];var escaped=res[1];var offset=res.index;path+=str.slice(index,offset);index=offset+m.length;// Ignore already escaped sequences.
	if(escaped){path+=escaped[1];continue;}var next=str[index];var prefix=res[2];var name=res[3];var capture=res[4];var group=res[5];var modifier=res[6];var asterisk=res[7];// Push the current path onto the tokens.
	if(path){tokens.push(path);path='';}var partial=prefix!=null&&next!=null&&next!==prefix;var repeat=modifier==='+'||modifier==='*';var optional=modifier==='?'||modifier==='*';var delimiter=res[2]||defaultDelimiter;var pattern=capture||group;tokens.push({name:name||key++,prefix:prefix||'',delimiter:delimiter,optional:optional,repeat:repeat,partial:partial,asterisk:!!asterisk,pattern:pattern?escapeGroup(pattern):asterisk?'.*':'[^'+escapeString(delimiter)+']+?'});}// Match any characters still remaining.
	if(index<str.length){path+=str.substr(index);}// If the path exists, push it onto the end.
	if(path){tokens.push(path);}return tokens;}/**
	 * Compile a string to a template function for the path.
	 *
	 * @param  {string}             str
	 * @param  {Object=}            options
	 * @return {!function(Object=, Object=)}
	 */function compile(str,options){return tokensToFunction(parse(str,options));}/**
	 * Prettier encoding of URI path segments.
	 *
	 * @param  {string}
	 * @return {string}
	 */function encodeURIComponentPretty(str){return encodeURI(str).replace(/[\/?#]/g,function(c){return'%'+c.charCodeAt(0).toString(16).toUpperCase();});}/**
	 * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.
	 *
	 * @param  {string}
	 * @return {string}
	 */function encodeAsterisk(str){return encodeURI(str).replace(/[?#]/g,function(c){return'%'+c.charCodeAt(0).toString(16).toUpperCase();});}/**
	 * Expose a method for transforming tokens into the path function.
	 */function tokensToFunction(tokens){// Compile all the tokens into regexps.
	var matches=new Array(tokens.length);// Compile all the patterns before compilation.
	for(var i=0;i<tokens.length;i++){if(_typeof(tokens[i])==='object'){matches[i]=new RegExp('^(?:'+tokens[i].pattern+')$');}}return function(obj,opts){var path='';var data=obj||{};var options=opts||{};var encode=options.pretty?encodeURIComponentPretty:encodeURIComponent;for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==='string'){path+=token;continue;}var value=data[token.name];var segment;if(value==null){if(token.optional){// Prepend partial segment prefixes.
	if(token.partial){path+=token.prefix;}continue;}else{throw new TypeError('Expected "'+token.name+'" to be defined');}}if(isarray(value)){if(!token.repeat){throw new TypeError('Expected "'+token.name+'" to not repeat, but received `'+JSON.stringify(value)+'`');}if(value.length===0){if(token.optional){continue;}else{throw new TypeError('Expected "'+token.name+'" to not be empty');}}for(var j=0;j<value.length;j++){segment=encode(value[j]);if(!matches[i].test(segment)){throw new TypeError('Expected all "'+token.name+'" to match "'+token.pattern+'", but received `'+JSON.stringify(segment)+'`');}path+=(j===0?token.prefix:token.delimiter)+segment;}continue;}segment=token.asterisk?encodeAsterisk(value):encode(value);if(!matches[i].test(segment)){throw new TypeError('Expected "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"');}path+=token.prefix+segment;}return path;};}/**
	 * Escape a regular expression string.
	 *
	 * @param  {string} str
	 * @return {string}
	 */function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|\/\\])/g,'\\$1');}/**
	 * Escape the capturing group by escaping special characters and meaning.
	 *
	 * @param  {string} group
	 * @return {string}
	 */function escapeGroup(group){return group.replace(/([=!:$\/()])/g,'\\$1');}/**
	 * Attach the keys as a property of the regexp.
	 *
	 * @param  {!RegExp} re
	 * @param  {Array}   keys
	 * @return {!RegExp}
	 */function attachKeys(re,keys){re.keys=keys;return re;}/**
	 * Get the flags for a regexp from the options.
	 *
	 * @param  {Object} options
	 * @return {string}
	 */function flags(options){return options.sensitive?'':'i';}/**
	 * Pull out keys from a regexp.
	 *
	 * @param  {!RegExp} path
	 * @param  {!Array}  keys
	 * @return {!RegExp}
	 */function regexpToRegexp(path,keys){// Use a negative lookahead to match only capturing groups.
	var groups=path.source.match(/\((?!\?)/g);if(groups){for(var i=0;i<groups.length;i++){keys.push({name:i,prefix:null,delimiter:null,optional:false,repeat:false,partial:false,asterisk:false,pattern:null});}}return attachKeys(path,keys);}/**
	 * Transform an array into a regexp.
	 *
	 * @param  {!Array}  path
	 * @param  {Array}   keys
	 * @param  {!Object} options
	 * @return {!RegExp}
	 */function arrayToRegexp(path,keys,options){var parts=[];for(var i=0;i<path.length;i++){parts.push(pathToRegexp(path[i],keys,options).source);}var regexp=new RegExp('(?:'+parts.join('|')+')',flags(options));return attachKeys(regexp,keys);}/**
	 * Create a path regexp from string input.
	 *
	 * @param  {string}  path
	 * @param  {!Array}  keys
	 * @param  {!Object} options
	 * @return {!RegExp}
	 */function stringToRegexp(path,keys,options){return tokensToRegExp(parse(path,options),keys,options);}/**
	 * Expose a function for taking tokens and returning a RegExp.
	 *
	 * @param  {!Array}          tokens
	 * @param  {(Array|Object)=} keys
	 * @param  {Object=}         options
	 * @return {!RegExp}
	 */function tokensToRegExp(tokens,keys,options){if(!isarray(keys)){options=/** @type {!Object} */keys||options;keys=[];}options=options||{};var strict=options.strict;var end=options.end!==false;var route='';// Iterate over the tokens and create our regexp string.
	for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==='string'){route+=escapeString(token);}else{var prefix=escapeString(token.prefix);var capture='(?:'+token.pattern+')';keys.push(token);if(token.repeat){capture+='(?:'+prefix+capture+')*';}if(token.optional){if(!token.partial){capture='(?:'+prefix+'('+capture+'))?';}else{capture=prefix+'('+capture+')?';}}else{capture=prefix+'('+capture+')';}route+=capture;}}var delimiter=escapeString(options.delimiter||'/');var endsWithDelimiter=route.slice(-delimiter.length)===delimiter;// In non-strict mode we allow a slash at the end of match. If the path to
	// match already ends with a slash, we remove it for consistency. The slash
	// is valid at the end of a path match, not in the middle. This is important
	// in non-ending mode, where "/test/" shouldn't match "/test//route".
	if(!strict){route=(endsWithDelimiter?route.slice(0,-delimiter.length):route)+'(?:'+delimiter+'(?=$))?';}if(end){route+='$';}else{// In non-ending mode, we need the capturing groups to match as much as
	// possible by using a positive lookahead to the end or next path segment.
	route+=strict&&endsWithDelimiter?'':'(?='+delimiter+'|$)';}return attachKeys(new RegExp('^'+route,flags(options)),keys);}/**
	 * Normalize the given path string, returning a regular expression.
	 *
	 * An empty array can be passed in for the keys, which will hold the
	 * placeholder key descriptions. For example, using `/user/:id`, `keys` will
	 * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.
	 *
	 * @param  {(string|RegExp|Array)} path
	 * @param  {(Array|Object)=}       keys
	 * @param  {Object=}               options
	 * @return {!RegExp}
	 */function pathToRegexp(path,keys,options){if(!isarray(keys)){options=/** @type {!Object} */keys||options;keys=[];}options=options||{};if(path instanceof RegExp){return regexpToRegexp(path,/** @type {!Array} */keys);}if(isarray(path)){return arrayToRegexp(/** @type {!Array} */path,/** @type {!Array} */keys,options);}return stringToRegexp(/** @type {string} */path,/** @type {!Array} */keys,options);}

/***/ }),
/* 40 */
/***/ (function(module, exports) {

	'use strict';module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=='[object Array]';};

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';/**
	 * Copyright 2015, Yahoo! Inc.
	 * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.
	 */var ReactIs=__webpack_require__(12);var REACT_STATICS={childContextTypes:true,contextType:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromError:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var KNOWN_STATICS={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var FORWARD_REF_STATICS={'$$typeof':true,render:true,defaultProps:true,displayName:true,propTypes:true};var MEMO_STATICS={'$$typeof':true,compare:true,defaultProps:true,displayName:true,propTypes:true,type:true};var TYPE_STATICS={};TYPE_STATICS[ReactIs.ForwardRef]=FORWARD_REF_STATICS;function getStatics(component){if(ReactIs.isMemo(component)){return MEMO_STATICS;}return TYPE_STATICS[component['$$typeof']]||REACT_STATICS;}var defineProperty=Object.defineProperty;var getOwnPropertyNames=Object.getOwnPropertyNames;var getOwnPropertySymbols=Object.getOwnPropertySymbols;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var getPrototypeOf=Object.getPrototypeOf;var objectPrototype=Object.prototype;function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if(typeof sourceComponent!=='string'){// don't hoist over string (html) components
	if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);if(inheritedComponent&&inheritedComponent!==objectPrototype){hoistNonReactStatics(targetComponent,inheritedComponent,blacklist);}}var keys=getOwnPropertyNames(sourceComponent);if(getOwnPropertySymbols){keys=keys.concat(getOwnPropertySymbols(sourceComponent));}var targetStatics=getStatics(targetComponent);var sourceStatics=getStatics(sourceComponent);for(var i=0;i<keys.length;++i){var key=keys[i];if(!KNOWN_STATICS[key]&&!(blacklist&&blacklist[key])&&!(sourceStatics&&sourceStatics[key])&&!(targetStatics&&targetStatics[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{// Avoid failures from read-only properties
	defineProperty(targetComponent,key,descriptor);}catch(e){}}}return targetComponent;}return targetComponent;}module.exports=hoistNonReactStatics;

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _interopDefault(ex){return ex&&(typeof ex==='undefined'?'undefined':_typeof(ex))==='object'&&'default'in ex?ex['default']:ex;}var React=_interopDefault(__webpack_require__(10));var PropTypes=_interopDefault(__webpack_require__(11));var history=__webpack_require__(20);var warning=_interopDefault(__webpack_require__(28));var createContext=_interopDefault(__webpack_require__(31));var invariant=_interopDefault(__webpack_require__(29));var pathToRegexp=_interopDefault(__webpack_require__(39));var reactIs=__webpack_require__(12);var hoistStatics=_interopDefault(__webpack_require__(41));function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}// TODO: Replace with React.createContext once we can assume React 16+
	var createNamedContext=function createNamedContext(name){var context=createContext();context.displayName=name;return context;};var context=/*#__PURE__*/createNamedContext("Router");/**
	 * The public API for putting history on context.
	 */var Router=/*#__PURE__*/function(_React$Component){_inheritsLoose(Router,_React$Component);Router.computeRootMatch=function computeRootMatch(pathname){return{path:"/",url:"/",params:{},isExact:pathname==="/"};};function Router(props){var _this;_this=_React$Component.call(this,props)||this;_this.state={location:props.history.location};// This is a bit of a hack. We have to start listening for location
	// changes here in the constructor in case there are any <Redirect>s
	// on the initial render. If there are, they will replace/push when
	// they mount and since cDM fires in children before parents, we may
	// get a new location before the <Router> is mounted.
	_this._isMounted=false;_this._pendingLocation=null;if(!props.staticContext){_this.unlisten=props.history.listen(function(location){if(_this._isMounted){_this.setState({location:location});}else{_this._pendingLocation=location;}});}return _this;}var _proto=Router.prototype;_proto.componentDidMount=function componentDidMount(){this._isMounted=true;if(this._pendingLocation){this.setState({location:this._pendingLocation});}};_proto.componentWillUnmount=function componentWillUnmount(){if(this.unlisten)this.unlisten();};_proto.render=function render(){return React.createElement(context.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:Router.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}});};return Router;}(React.Component);{Router.propTypes={children:PropTypes.node,history:PropTypes.object.isRequired,staticContext:PropTypes.object};Router.prototype.componentDidUpdate=function(prevProps){warning(prevProps.history===this.props.history,"You cannot change <Router history>");};}/**
	 * The public API for a <Router> that stores location in memory.
	 */var MemoryRouter=/*#__PURE__*/function(_React$Component){_inheritsLoose(MemoryRouter,_React$Component);function MemoryRouter(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this;_this.history=history.createMemoryHistory(_this.props);return _this;}var _proto=MemoryRouter.prototype;_proto.render=function render(){return React.createElement(Router,{history:this.history,children:this.props.children});};return MemoryRouter;}(React.Component);{MemoryRouter.propTypes={initialEntries:PropTypes.array,initialIndex:PropTypes.number,getUserConfirmation:PropTypes.func,keyLength:PropTypes.number,children:PropTypes.node};MemoryRouter.prototype.componentDidMount=function(){warning(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, "+"use `import { Router }` instead of `import { MemoryRouter as Router }`.");};}var Lifecycle=/*#__PURE__*/function(_React$Component){_inheritsLoose(Lifecycle,_React$Component);function Lifecycle(){return _React$Component.apply(this,arguments)||this;}var _proto=Lifecycle.prototype;_proto.componentDidMount=function componentDidMount(){if(this.props.onMount)this.props.onMount.call(this,this);};_proto.componentDidUpdate=function componentDidUpdate(prevProps){if(this.props.onUpdate)this.props.onUpdate.call(this,this,prevProps);};_proto.componentWillUnmount=function componentWillUnmount(){if(this.props.onUnmount)this.props.onUnmount.call(this,this);};_proto.render=function render(){return null;};return Lifecycle;}(React.Component);/**
	 * The public API for prompting the user before navigating away from a screen.
	 */function Prompt(_ref){var message=_ref.message,_ref$when=_ref.when,when=_ref$when===void 0?true:_ref$when;return React.createElement(context.Consumer,null,function(context){!context?invariant(false,"You should not use <Prompt> outside a <Router>"):void 0;if(!when||context.staticContext)return null;var method=context.history.block;return React.createElement(Lifecycle,{onMount:function onMount(self){self.release=method(message);},onUpdate:function onUpdate(self,prevProps){if(prevProps.message!==message){self.release();self.release=method(message);}},onUnmount:function onUnmount(self){self.release();},message:message});});}{var messageType=PropTypes.oneOfType([PropTypes.func,PropTypes.string]);Prompt.propTypes={when:PropTypes.bool,message:messageType.isRequired};}var cache={};var cacheLimit=10000;var cacheCount=0;function compilePath(path){if(cache[path])return cache[path];var generator=pathToRegexp.compile(path);if(cacheCount<cacheLimit){cache[path]=generator;cacheCount++;}return generator;}/**
	 * Public API for generating a URL pathname from a path and parameters.
	 */function generatePath(path,params){if(path===void 0){path="/";}if(params===void 0){params={};}return path==="/"?path:compilePath(path)(params,{pretty:true});}/**
	 * The public API for navigating programmatically with a component.
	 */function Redirect(_ref){var computedMatch=_ref.computedMatch,to=_ref.to,_ref$push=_ref.push,push=_ref$push===void 0?false:_ref$push;return React.createElement(context.Consumer,null,function(context){!context?invariant(false,"You should not use <Redirect> outside a <Router>"):void 0;var history$1=context.history,staticContext=context.staticContext;var method=push?history$1.push:history$1.replace;var location=history.createLocation(computedMatch?typeof to==="string"?generatePath(to,computedMatch.params):_extends({},to,{pathname:generatePath(to.pathname,computedMatch.params)}):to);// When rendering in a static context,
	// set the new location immediately.
	if(staticContext){method(location);return null;}return React.createElement(Lifecycle,{onMount:function onMount(){method(location);},onUpdate:function onUpdate(self,prevProps){var prevLocation=history.createLocation(prevProps.to);if(!history.locationsAreEqual(prevLocation,_extends({},location,{key:prevLocation.key}))){method(location);}},to:to});});}{Redirect.propTypes={push:PropTypes.bool,from:PropTypes.string,to:PropTypes.oneOfType([PropTypes.string,PropTypes.object]).isRequired};}var cache$1={};var cacheLimit$1=10000;var cacheCount$1=0;function compilePath$1(path,options){var cacheKey=""+options.end+options.strict+options.sensitive;var pathCache=cache$1[cacheKey]||(cache$1[cacheKey]={});if(pathCache[path])return pathCache[path];var keys=[];var regexp=pathToRegexp(path,keys,options);var result={regexp:regexp,keys:keys};if(cacheCount$1<cacheLimit$1){pathCache[path]=result;cacheCount$1++;}return result;}/**
	 * Public API for matching a URL pathname to a path.
	 */function matchPath(pathname,options){if(options===void 0){options={};}if(typeof options==="string"||Array.isArray(options)){options={path:options};}var _options=options,path=_options.path,_options$exact=_options.exact,exact=_options$exact===void 0?false:_options$exact,_options$strict=_options.strict,strict=_options$strict===void 0?false:_options$strict,_options$sensitive=_options.sensitive,sensitive=_options$sensitive===void 0?false:_options$sensitive;var paths=[].concat(path);return paths.reduce(function(matched,path){if(!path&&path!=="")return null;if(matched)return matched;var _compilePath=compilePath$1(path,{end:exact,strict:strict,sensitive:sensitive}),regexp=_compilePath.regexp,keys=_compilePath.keys;var match=regexp.exec(pathname);if(!match)return null;var url=match[0],values=match.slice(1);var isExact=pathname===url;if(exact&&!isExact)return null;return{path:path,// the path used to match
	url:path==="/"&&url===""?"/":url,// the matched portion of the URL
	isExact:isExact,// whether or not we matched exactly
	params:keys.reduce(function(memo,key,index){memo[key.name]=values[index];return memo;},{})};},null);}function isEmptyChildren(children){return React.Children.count(children)===0;}function evalChildrenDev(children,props,path){var value=children(props);warning(value!==undefined,"You returned `undefined` from the `children` function of "+("<Route"+(path?" path=\""+path+"\"":"")+">, but you ")+"should have returned a React element or `null`");return value||null;}/**
	 * The public API for matching a single path and rendering.
	 */var Route=/*#__PURE__*/function(_React$Component){_inheritsLoose(Route,_React$Component);function Route(){return _React$Component.apply(this,arguments)||this;}var _proto=Route.prototype;_proto.render=function render(){var _this=this;return React.createElement(context.Consumer,null,function(context$1){!context$1?invariant(false,"You should not use <Route> outside a <Router>"):void 0;var location=_this.props.location||context$1.location;var match=_this.props.computedMatch?_this.props.computedMatch// <Switch> already computed the match for us
	:_this.props.path?matchPath(location.pathname,_this.props):context$1.match;var props=_extends({},context$1,{location:location,match:match});var _this$props=_this.props,children=_this$props.children,component=_this$props.component,render=_this$props.render;// Preact uses an empty array as children by
	// default, so use null if that's the case.
	if(Array.isArray(children)&&children.length===0){children=null;}return React.createElement(context.Provider,{value:props},props.match?children?typeof children==="function"?evalChildrenDev(children,props,_this.props.path):children:component?React.createElement(component,props):render?render(props):null:typeof children==="function"?evalChildrenDev(children,props,_this.props.path):null);});};return Route;}(React.Component);{Route.propTypes={children:PropTypes.oneOfType([PropTypes.func,PropTypes.node]),component:function component(props,propName){if(props[propName]&&!reactIs.isValidElementType(props[propName])){return new Error("Invalid prop 'component' supplied to 'Route': the prop is not a valid React component");}},exact:PropTypes.bool,location:PropTypes.object,path:PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),render:PropTypes.func,sensitive:PropTypes.bool,strict:PropTypes.bool};Route.prototype.componentDidMount=function(){warning(!(this.props.children&&!isEmptyChildren(this.props.children)&&this.props.component),"You should not use <Route component> and <Route children> in the same route; <Route component> will be ignored");warning(!(this.props.children&&!isEmptyChildren(this.props.children)&&this.props.render),"You should not use <Route render> and <Route children> in the same route; <Route render> will be ignored");warning(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored");};Route.prototype.componentDidUpdate=function(prevProps){warning(!(this.props.location&&!prevProps.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.');warning(!(!this.props.location&&prevProps.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.');};}function addLeadingSlash(path){return path.charAt(0)==="/"?path:"/"+path;}function addBasename(basename,location){if(!basename)return location;return _extends({},location,{pathname:addLeadingSlash(basename)+location.pathname});}function stripBasename(basename,location){if(!basename)return location;var base=addLeadingSlash(basename);if(location.pathname.indexOf(base)!==0)return location;return _extends({},location,{pathname:location.pathname.substr(base.length)});}function createURL(location){return typeof location==="string"?location:history.createPath(location);}function staticHandler(methodName){return function(){invariant(false,"You cannot %s with <StaticRouter>",methodName);};}function noop(){}/**
	 * The public top-level API for a "static" <Router>, so-called because it
	 * can't actually change the current location. Instead, it just records
	 * location changes in a context object. Useful mainly in testing and
	 * server-rendering scenarios.
	 */var StaticRouter=/*#__PURE__*/function(_React$Component){_inheritsLoose(StaticRouter,_React$Component);function StaticRouter(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this;_this.handlePush=function(location){return _this.navigateTo(location,"PUSH");};_this.handleReplace=function(location){return _this.navigateTo(location,"REPLACE");};_this.handleListen=function(){return noop;};_this.handleBlock=function(){return noop;};return _this;}var _proto=StaticRouter.prototype;_proto.navigateTo=function navigateTo(location,action){var _this$props=this.props,_this$props$basename=_this$props.basename,basename=_this$props$basename===void 0?"":_this$props$basename,_this$props$context=_this$props.context,context=_this$props$context===void 0?{}:_this$props$context;context.action=action;context.location=addBasename(basename,history.createLocation(location));context.url=createURL(context.location);};_proto.render=function render(){var _this$props2=this.props,_this$props2$basename=_this$props2.basename,basename=_this$props2$basename===void 0?"":_this$props2$basename,_this$props2$context=_this$props2.context,context=_this$props2$context===void 0?{}:_this$props2$context,_this$props2$location=_this$props2.location,location=_this$props2$location===void 0?"/":_this$props2$location,rest=_objectWithoutPropertiesLoose(_this$props2,["basename","context","location"]);var history$1={createHref:function createHref(path){return addLeadingSlash(basename+createURL(path));},action:"POP",location:stripBasename(basename,history.createLocation(location)),push:this.handlePush,replace:this.handleReplace,go:staticHandler("go"),goBack:staticHandler("goBack"),goForward:staticHandler("goForward"),listen:this.handleListen,block:this.handleBlock};return React.createElement(Router,_extends({},rest,{history:history$1,staticContext:context}));};return StaticRouter;}(React.Component);{StaticRouter.propTypes={basename:PropTypes.string,context:PropTypes.object,location:PropTypes.oneOfType([PropTypes.string,PropTypes.object])};StaticRouter.prototype.componentDidMount=function(){warning(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, "+"use `import { Router }` instead of `import { StaticRouter as Router }`.");};}/**
	 * The public API for rendering the first <Route> that matches.
	 */var Switch=/*#__PURE__*/function(_React$Component){_inheritsLoose(Switch,_React$Component);function Switch(){return _React$Component.apply(this,arguments)||this;}var _proto=Switch.prototype;_proto.render=function render(){var _this=this;return React.createElement(context.Consumer,null,function(context){!context?invariant(false,"You should not use <Switch> outside a <Router>"):void 0;var location=_this.props.location||context.location;var element,match;// We use React.Children.forEach instead of React.Children.toArray().find()
	// here because toArray adds keys to all child elements and we do not want
	// to trigger an unmount/remount for two <Route>s that render the same
	// component at different URLs.
	React.Children.forEach(_this.props.children,function(child){if(match==null&&React.isValidElement(child)){element=child;var path=child.props.path||child.props.from;match=path?matchPath(location.pathname,_extends({},child.props,{path:path})):context.match;}});return match?React.cloneElement(element,{location:location,computedMatch:match}):null;});};return Switch;}(React.Component);{Switch.propTypes={children:PropTypes.node,location:PropTypes.object};Switch.prototype.componentDidUpdate=function(prevProps){warning(!(this.props.location&&!prevProps.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.');warning(!(!this.props.location&&prevProps.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.');};}/**
	 * A public higher-order component to access the imperative API
	 */function withRouter(Component){var displayName="withRouter("+(Component.displayName||Component.name)+")";var C=function C(props){var wrappedComponentRef=props.wrappedComponentRef,remainingProps=_objectWithoutPropertiesLoose(props,["wrappedComponentRef"]);return React.createElement(context.Consumer,null,function(context){!context?invariant(false,"You should not use <"+displayName+" /> outside a <Router>"):void 0;return React.createElement(Component,_extends({},remainingProps,context,{ref:wrappedComponentRef}));});};C.displayName=displayName;C.WrappedComponent=Component;{C.propTypes={wrappedComponentRef:PropTypes.oneOfType([PropTypes.string,PropTypes.func,PropTypes.object])};}return hoistStatics(C,Component);}var useContext=React.useContext;function useHistory(){{!(typeof useContext==="function")?invariant(false,"You must use React >= 16.8 in order to use useHistory()"):void 0;}return useContext(context).history;}function useLocation(){{!(typeof useContext==="function")?invariant(false,"You must use React >= 16.8 in order to use useLocation()"):void 0;}return useContext(context).location;}function useParams(){{!(typeof useContext==="function")?invariant(false,"You must use React >= 16.8 in order to use useParams()"):void 0;}var match=useContext(context).match;return match?match.params:{};}function useRouteMatch(path){{!(typeof useContext==="function")?invariant(false,"You must use React >= 16.8 in order to use useRouteMatch()"):void 0;}return path?matchPath(useLocation().pathname,path):useContext(context).match;}{if(typeof window!=="undefined"){var global=window;var key="__react_router_build__";var buildNames={cjs:"CommonJS",esm:"ES modules",umd:"UMD"};if(global[key]&&global[key]!=="cjs"){var initialBuildName=buildNames[global[key]];var secondaryBuildName=buildNames["cjs"];// TODO: Add link to article that explains in detail how to avoid
	// loading 2 different builds.
	throw new Error("You are loading the "+secondaryBuildName+" build of React Router "+("on a page that is already running the "+initialBuildName+" ")+"build, so things won't work right.");}global[key]="cjs";}}exports.MemoryRouter=MemoryRouter;exports.Prompt=Prompt;exports.Redirect=Redirect;exports.Route=Route;exports.Router=Router;exports.StaticRouter=StaticRouter;exports.Switch=Switch;exports.__RouterContext=context;exports.generatePath=generatePath;exports.matchPath=matchPath;exports.useHistory=useHistory;exports.useLocation=useLocation;exports.useParams=useParams;exports.useRouteMatch=useRouteMatch;exports.withRouter=withRouter;//# sourceMappingURL=react-router.js.map

/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */if(process.env.NODE_ENV!=='production'){var ReactIs=__webpack_require__(12);// By explicitly using `prop-types` you are opting into new development behavior.
	// http://fb.me/prop-types-in-prod
	var throwOnDirectAccess=true;module.exports=__webpack_require__(44)(ReactIs.isElement,throwOnDirectAccess);}else{// By explicitly using `prop-types` you are opting into new production behavior.
	// http://fb.me/prop-types-in-prod
	module.exports=__webpack_require__(47)();}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var ReactIs=__webpack_require__(12);var assign=__webpack_require__(16);var ReactPropTypesSecret=__webpack_require__(45);var checkPropTypes=__webpack_require__(46);var has=Function.call.bind(Object.prototype.hasOwnProperty);var printWarning=function printWarning(){};if(process.env.NODE_ENV!=='production'){printWarning=function printWarning(text){var message='Warning: '+text;if(typeof console!=='undefined'){console.error(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};}function emptyFunctionThatReturnsNull(){return null;}module.exports=function(isValidElement,throwOnDirectAccess){/* global Symbol */var ITERATOR_SYMBOL=typeof Symbol==='function'&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL='@@iterator';// Before Symbol spec.
	/**
	   * Returns the iterator method function contained on the iterable object.
	   *
	   * Be sure to invoke the function with the iterable as context:
	   *
	   *     var iteratorFn = getIteratorFn(myIterable);
	   *     if (iteratorFn) {
	   *       var iterator = iteratorFn.call(myIterable);
	   *       ...
	   *     }
	   *
	   * @param {?object} maybeIterable
	   * @return {?function}
	   */function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==='function'){return iteratorFn;}}/**
	   * Collection of methods that allow declaration and validation of props that are
	   * supplied to React components. Example usage:
	   *
	   *   var Props = require('ReactPropTypes');
	   *   var MyArticle = React.createClass({
	   *     propTypes: {
	   *       // An optional string prop named "description".
	   *       description: Props.string,
	   *
	   *       // A required enum prop named "category".
	   *       category: Props.oneOf(['News','Photos']).isRequired,
	   *
	   *       // A prop named "dialog" that requires an instance of Dialog.
	   *       dialog: Props.instanceOf(Dialog).isRequired
	   *     },
	   *     render: function() { ... }
	   *   });
	   *
	   * A more formal specification of how these methods are used:
	   *
	   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)
	   *   decl := ReactPropTypes.{type}(.isRequired)?
	   *
	   * Each and every declaration produces a function with the same signature. This
	   * allows the creation of custom validation functions. For example:
	   *
	   *  var MyLink = React.createClass({
	   *    propTypes: {
	   *      // An optional string or URI prop named "href".
	   *      href: function(props, propName, componentName) {
	   *        var propValue = props[propName];
	   *        if (propValue != null && typeof propValue !== 'string' &&
	   *            !(propValue instanceof URI)) {
	   *          return new Error(
	   *            'Expected a string or an URI for ' + propName + ' in ' +
	   *            componentName
	   *          );
	   *        }
	   *      }
	   *    },
	   *    render: function() {...}
	   *  });
	   *
	   * @internal
	   */var ANONYMOUS='<<anonymous>>';// Important!
	// Keep this list in sync with production version in `./factoryWithThrowingShims.js`.
	var ReactPropTypes={array:createPrimitiveTypeChecker('array'),bool:createPrimitiveTypeChecker('boolean'),func:createPrimitiveTypeChecker('function'),number:createPrimitiveTypeChecker('number'),object:createPrimitiveTypeChecker('object'),string:createPrimitiveTypeChecker('string'),symbol:createPrimitiveTypeChecker('symbol'),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),elementType:createElementTypeTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};/**
	   * inlined Object.is polyfill to avoid requiring consumers ship their own
	   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
	   *//*eslint-disable no-self-compare*/function is(x,y){// SameValue algorithm
	if(x===y){// Steps 1-5, 7-10
	// Steps 6.b-6.e: +0 != -0
	return x!==0||1/x===1/y;}else{// Step 6.a: NaN == NaN
	return x!==x&&y!==y;}}/*eslint-enable no-self-compare*//**
	   * We use an Error-like object for backward compatibility as people may call
	   * PropTypes directly and inspect their output. However, we don't use real
	   * Errors anymore. We don't inspect their stack anyway, and creating them
	   * is prohibitively expensive if they are created too often, such as what
	   * happens in oneOfType() for any type before the one that matched.
	   */function PropTypeError(message){this.message=message;this.stack='';}// Make `instanceof Error` still work for returned errors.
	PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=='production'){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0;}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){// New behavior only for users of `prop-types` package
	var err=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. '+'Use `PropTypes.checkPropTypes()` to call them. '+'Read more at http://fb.me/use-check-prop-types');err.name='Invariant Violation';throw err;}else if(process.env.NODE_ENV!=='production'&&typeof console!=='undefined'){// Old behavior for people using React.PropTypes
	var cacheKey=componentName+':'+propName;if(!manualPropTypeCallCache[cacheKey]&&// Avoid spamming the console because they are often not actionable except for lib authors
	manualPropTypeWarningCount<3){printWarning('You are manually calling a React.PropTypes validation '+'function for the `'+propFullName+'` prop on `'+componentName+'`. This is deprecated '+'and will throw in the standalone `prop-types` package. '+'You may be seeing this warning due to a third-party PropTypes '+'library. See https://fb.me/react-warning-dont-call-proptypes '+'for details.');manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++;}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError('The '+location+' `'+propFullName+'` is marked as required '+('in `'+componentName+'`, but its value is `null`.'));}return new PropTypeError('The '+location+' `'+propFullName+'` is marked as required in '+('`'+componentName+'`, but its value is `undefined`.'));}return null;}else{return validate(props,propName,componentName,location,propFullName);}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType;}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){// `propValue` being instance of, say, date/regexp, pass the 'object'
	// check, but we can offer a more precise error message here rather than
	// 'of type `object`'.
	var preciseType=getPreciseType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+preciseType+'` supplied to `'+componentName+'`, expected ')+('`'+expectedType+'`.'));}return null;}return createChainableTypeChecker(validate);}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunctionThatReturnsNull);}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=='function'){return new PropTypeError('Property `'+propFullName+'` of component `'+componentName+'` has invalid PropType notation inside arrayOf.');}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected an array.'));}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+'['+i+']',ReactPropTypesSecret);if(error instanceof Error){return error;}}return null;}return createChainableTypeChecker(validate);}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected a single ReactElement.'));}return null;}return createChainableTypeChecker(validate);}function createElementTypeTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactIs.isValidElementType(propValue)){var propType=getPropType(propValue);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected a single ReactElement type.'));}return null;}return createChainableTypeChecker(validate);}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+actualClassName+'` supplied to `'+componentName+'`, expected ')+('instance of `'+expectedClassName+'`.'));}return null;}return createChainableTypeChecker(validate);}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){if(process.env.NODE_ENV!=='production'){if(arguments.length>1){printWarning('Invalid arguments supplied to oneOf, expected an array, got '+arguments.length+' arguments. '+'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');}else{printWarning('Invalid argument supplied to oneOf, expected an array.');}}return emptyFunctionThatReturnsNull;}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null;}}var valuesString=JSON.stringify(expectedValues,function replacer(key,value){var type=getPreciseType(value);if(type==='symbol'){return String(value);}return value;});return new PropTypeError('Invalid '+location+' `'+propFullName+'` of value `'+String(propValue)+'` '+('supplied to `'+componentName+'`, expected one of '+valuesString+'.'));}return createChainableTypeChecker(validate);}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=='function'){return new PropTypeError('Property `'+propFullName+'` of component `'+componentName+'` has invalid PropType notation inside objectOf.');}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type '+('`'+propType+'` supplied to `'+componentName+'`, expected an object.'));}for(var key in propValue){if(has(propValue,key)){var error=typeChecker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error instanceof Error){return error;}}}return null;}return createChainableTypeChecker(validate);}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=='production'?printWarning('Invalid argument supplied to oneOfType, expected an instance of array.'):void 0;return emptyFunctionThatReturnsNull;}for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(typeof checker!=='function'){printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but '+'received '+getPostfixForTypeWarning(checker)+' at index '+i+'.');return emptyFunctionThatReturnsNull;}}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null;}}return new PropTypeError('Invalid '+location+' `'+propFullName+'` supplied to '+('`'+componentName+'`.'));}return createChainableTypeChecker(validate);}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError('Invalid '+location+' `'+propFullName+'` supplied to '+('`'+componentName+'`, expected a ReactNode.'));}return null;}return createChainableTypeChecker(validate);}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type `'+propType+'` '+('supplied to `'+componentName+'`, expected `object`.'));}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue;}var error=checker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error){return error;}}return null;}return createChainableTypeChecker(validate);}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=='object'){return new PropTypeError('Invalid '+location+' `'+propFullName+'` of type `'+propType+'` '+('supplied to `'+componentName+'`, expected `object`.'));}// We need to check all keys in case some are required but missing from
	// props.
	var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker){return new PropTypeError('Invalid '+location+' `'+propFullName+'` key `'+key+'` supplied to `'+componentName+'`.'+'\nBad object: '+JSON.stringify(props[propName],null,'  ')+'\nValid keys: '+JSON.stringify(Object.keys(shapeTypes),null,'  '));}var error=checker(propValue,key,componentName,location,propFullName+'.'+key,ReactPropTypesSecret);if(error){return error;}}return null;}return createChainableTypeChecker(validate);}function isNode(propValue){switch(typeof propValue==='undefined'?'undefined':_typeof(propValue)){case'number':case'string':case'undefined':return true;case'boolean':return!propValue;case'object':if(Array.isArray(propValue)){return propValue.every(isNode);}if(propValue===null||isValidElement(propValue)){return true;}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false;}}}else{// Iterator will provide entry [k,v] tuples rather than values.
	while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false;}}}}}else{return false;}return true;default:return false;}}function isSymbol(propType,propValue){// Native Symbol.
	if(propType==='symbol'){return true;}// falsy value can't be a Symbol
	if(!propValue){return false;}// 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'
	if(propValue['@@toStringTag']==='Symbol'){return true;}// Fallback for non-spec compliant Symbols which are polyfilled.
	if(typeof Symbol==='function'&&propValue instanceof Symbol){return true;}return false;}// Equivalent of `typeof` but with special handling for array and regexp.
	function getPropType(propValue){var propType=typeof propValue==='undefined'?'undefined':_typeof(propValue);if(Array.isArray(propValue)){return'array';}if(propValue instanceof RegExp){// Old webkits (at least until Android 4.0) return 'function' rather than
	// 'object' for typeof a RegExp. We'll normalize this here so that /bla/
	// passes PropTypes.object.
	return'object';}if(isSymbol(propType,propValue)){return'symbol';}return propType;}// This handles more types than `getPropType`. Only used for error messages.
	// See `createPrimitiveTypeChecker`.
	function getPreciseType(propValue){if(typeof propValue==='undefined'||propValue===null){return''+propValue;}var propType=getPropType(propValue);if(propType==='object'){if(propValue instanceof Date){return'date';}else if(propValue instanceof RegExp){return'regexp';}}return propType;}// Returns a string that is postfixed to a warning about an invalid type.
	// For example, "undefined" or "of type array"
	function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case'array':case'object':return'an '+type;case'boolean':case'date':case'regexp':return'a '+type;default:return type;}}// Returns class name of the object, if any.
	function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS;}return propValue.constructor.name;}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.resetWarningCache=checkPropTypes.resetWarningCache;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes;};
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 45 */
/***/ (function(module, exports) {

	/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var ReactPropTypesSecret='SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';module.exports=ReactPropTypesSecret;

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var printWarning=function printWarning(){};if(process.env.NODE_ENV!=='production'){var ReactPropTypesSecret=__webpack_require__(45);var loggedTypeFailures={};var has=Function.call.bind(Object.prototype.hasOwnProperty);printWarning=function printWarning(text){var message='Warning: '+text;if(typeof console!=='undefined'){console.error(message);}try{// --- Welcome to debugging React ---
	// This error was thrown as a convenience so that you can use this stack
	// to find the callsite that caused this warning to fire.
	throw new Error(message);}catch(x){}};}/**
	 * Assert that the values match with the type specs.
	 * Error messages are memorized and will only be shown once.
	 *
	 * @param {object} typeSpecs Map of name to a ReactPropType
	 * @param {object} values Runtime values that need to be type-checked
	 * @param {string} location e.g. "prop", "context", "child context"
	 * @param {string} componentName Name of the component for error messages.
	 * @param {?Function} getStack Returns the component stack.
	 * @private
	 */function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=='production'){for(var typeSpecName in typeSpecs){if(has(typeSpecs,typeSpecName)){var error;// Prop type validation may throw. In case they do, we don't want to
	// fail the render phase where it didn't fail before. So we log it.
	// After these have been cleaned up, we'll let them throw.
	try{// This is intentionally an invariant that gets caught. It's the same
	// behavior as without this statement except with a better message.
	if(typeof typeSpecs[typeSpecName]!=='function'){var err=Error((componentName||'React class')+': '+location+' type `'+typeSpecName+'` is invalid; '+'it must be a function, usually from the `prop-types` package, but received `'+_typeof(typeSpecs[typeSpecName])+'`.');err.name='Invariant Violation';throw err;}error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret);}catch(ex){error=ex;}if(error&&!(error instanceof Error)){printWarning((componentName||'React class')+': type specification of '+location+' `'+typeSpecName+'` is invalid; the type checker '+'function must return `null` or an `Error` but returned a '+(typeof error==='undefined'?'undefined':_typeof(error))+'. '+'You may have forgotten to pass an argument to the type checker '+'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and '+'shape all require an argument).');}if(error instanceof Error&&!(error.message in loggedTypeFailures)){// Only monitor this failure once because there tends to be a lot of the
	// same error.
	loggedTypeFailures[error.message]=true;var stack=getStack?getStack():'';printWarning('Failed '+location+' type: '+error.message+(stack!=null?stack:''));}}}}}/**
	 * Resets warning cache when testing.
	 *
	 * @private
	 */checkPropTypes.resetWarningCache=function(){if(process.env.NODE_ENV!=='production'){loggedTypeFailures={};}};module.exports=checkPropTypes;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

	/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */'use strict';var ReactPropTypesSecret=__webpack_require__(45);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){// It is still safe when called from React.
	return;}var err=new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. '+'Use PropTypes.checkPropTypes() to call them. '+'Read more at http://fb.me/use-check-prop-types');err.name='Invariant Violation';throw err;};shim.isRequired=shim;function getShim(){return shim;};// Important!
	// Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.
	var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes;};

/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _interopDefault(ex){return ex&&(typeof ex==='undefined'?'undefined':_typeof(ex))==='object'&&'default'in ex?ex['default']:ex;}var reactRouter=__webpack_require__(8);var React=_interopDefault(__webpack_require__(10));var history=__webpack_require__(20);var PropTypes=_interopDefault(__webpack_require__(43));var warning=_interopDefault(__webpack_require__(28));var invariant=_interopDefault(__webpack_require__(29));function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}/**
	 * The public API for a <Router> that uses HTML5 history.
	 */var BrowserRouter=/*#__PURE__*/function(_React$Component){_inheritsLoose(BrowserRouter,_React$Component);function BrowserRouter(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this;_this.history=history.createBrowserHistory(_this.props);return _this;}var _proto=BrowserRouter.prototype;_proto.render=function render(){return React.createElement(reactRouter.Router,{history:this.history,children:this.props.children});};return BrowserRouter;}(React.Component);{BrowserRouter.propTypes={basename:PropTypes.string,children:PropTypes.node,forceRefresh:PropTypes.bool,getUserConfirmation:PropTypes.func,keyLength:PropTypes.number};BrowserRouter.prototype.componentDidMount=function(){warning(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, "+"use `import { Router }` instead of `import { BrowserRouter as Router }`.");};}/**
	 * The public API for a <Router> that uses window.location.hash.
	 */var HashRouter=/*#__PURE__*/function(_React$Component){_inheritsLoose(HashRouter,_React$Component);function HashRouter(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this;_this.history=history.createHashHistory(_this.props);return _this;}var _proto=HashRouter.prototype;_proto.render=function render(){return React.createElement(reactRouter.Router,{history:this.history,children:this.props.children});};return HashRouter;}(React.Component);{HashRouter.propTypes={basename:PropTypes.string,children:PropTypes.node,getUserConfirmation:PropTypes.func,hashType:PropTypes.oneOf(["hashbang","noslash","slash"])};HashRouter.prototype.componentDidMount=function(){warning(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, "+"use `import { Router }` instead of `import { HashRouter as Router }`.");};}var resolveToLocation=function resolveToLocation(to,currentLocation){return typeof to==="function"?to(currentLocation):to;};var normalizeToLocation=function normalizeToLocation(to,currentLocation){return typeof to==="string"?history.createLocation(to,null,null,currentLocation):to;};var forwardRefShim=function forwardRefShim(C){return C;};var forwardRef=React.forwardRef;if(typeof forwardRef==="undefined"){forwardRef=forwardRefShim;}function isModifiedEvent(event){return!!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey);}var LinkAnchor=forwardRef(function(_ref,forwardedRef){var innerRef=_ref.innerRef,navigate=_ref.navigate,_onClick=_ref.onClick,rest=_objectWithoutPropertiesLoose(_ref,["innerRef","navigate","onClick"]);var target=rest.target;var props=_extends({},rest,{onClick:function onClick(event){try{if(_onClick)_onClick(event);}catch(ex){event.preventDefault();throw ex;}if(!event.defaultPrevented&&// onClick prevented default
	event.button===0&&(// ignore everything but left clicks
	!target||target==="_self")&&// let browser handle "target=_blank" etc.
	!isModifiedEvent(event)// ignore clicks with modifier keys
	){event.preventDefault();navigate();}}});// React 15 compat
	if(forwardRefShim!==forwardRef){props.ref=forwardedRef||innerRef;}else{props.ref=innerRef;}return React.createElement("a",props);});{LinkAnchor.displayName="LinkAnchor";}/**
	 * The public API for rendering a history-aware <a>.
	 */var Link=forwardRef(function(_ref2,forwardedRef){var _ref2$component=_ref2.component,component=_ref2$component===void 0?LinkAnchor:_ref2$component,replace=_ref2.replace,to=_ref2.to,innerRef=_ref2.innerRef,rest=_objectWithoutPropertiesLoose(_ref2,["component","replace","to","innerRef"]);return React.createElement(reactRouter.__RouterContext.Consumer,null,function(context){!context?invariant(false,"You should not use <Link> outside a <Router>"):void 0;var history=context.history;var location=normalizeToLocation(resolveToLocation(to,context.location),context.location);var href=location?history.createHref(location):"";var props=_extends({},rest,{href:href,navigate:function navigate(){var location=resolveToLocation(to,context.location);var method=replace?history.replace:history.push;method(location);}});// React 15 compat
	if(forwardRefShim!==forwardRef){props.ref=forwardedRef||innerRef;}else{props.innerRef=innerRef;}return React.createElement(component,props);});});{var toType=PropTypes.oneOfType([PropTypes.string,PropTypes.object,PropTypes.func]);var refType=PropTypes.oneOfType([PropTypes.string,PropTypes.func,PropTypes.shape({current:PropTypes.any})]);Link.displayName="Link";Link.propTypes={innerRef:refType,onClick:PropTypes.func,replace:PropTypes.bool,target:PropTypes.string,to:toType.isRequired};}var forwardRefShim$1=function forwardRefShim(C){return C;};var forwardRef$1=React.forwardRef;if(typeof forwardRef$1==="undefined"){forwardRef$1=forwardRefShim$1;}function joinClassnames(){for(var _len=arguments.length,classnames=new Array(_len),_key=0;_key<_len;_key++){classnames[_key]=arguments[_key];}return classnames.filter(function(i){return i;}).join(" ");}/**
	 * A <Link> wrapper that knows if it's "active" or not.
	 */var NavLink=forwardRef$1(function(_ref,forwardedRef){var _ref$ariaCurrent=_ref["aria-current"],ariaCurrent=_ref$ariaCurrent===void 0?"page":_ref$ariaCurrent,_ref$activeClassName=_ref.activeClassName,activeClassName=_ref$activeClassName===void 0?"active":_ref$activeClassName,activeStyle=_ref.activeStyle,classNameProp=_ref.className,exact=_ref.exact,isActiveProp=_ref.isActive,locationProp=_ref.location,strict=_ref.strict,styleProp=_ref.style,to=_ref.to,innerRef=_ref.innerRef,rest=_objectWithoutPropertiesLoose(_ref,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return React.createElement(reactRouter.__RouterContext.Consumer,null,function(context){!context?invariant(false,"You should not use <NavLink> outside a <Router>"):void 0;var currentLocation=locationProp||context.location;var toLocation=normalizeToLocation(resolveToLocation(to,currentLocation),currentLocation);var path=toLocation.pathname;// Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202
	var escapedPath=path&&path.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");var match=escapedPath?reactRouter.matchPath(currentLocation.pathname,{path:escapedPath,exact:exact,strict:strict}):null;var isActive=!!(isActiveProp?isActiveProp(match,currentLocation):match);var className=isActive?joinClassnames(classNameProp,activeClassName):classNameProp;var style=isActive?_extends({},styleProp,{},activeStyle):styleProp;var props=_extends({"aria-current":isActive&&ariaCurrent||null,className:className,style:style,to:toLocation},rest);// React 15 compat
	if(forwardRefShim$1!==forwardRef$1){props.ref=forwardedRef||innerRef;}else{props.innerRef=innerRef;}return React.createElement(Link,props);});});{NavLink.displayName="NavLink";var ariaCurrentType=PropTypes.oneOf(["page","step","location","date","time","true"]);NavLink.propTypes=_extends({},Link.propTypes,{"aria-current":ariaCurrentType,activeClassName:PropTypes.string,activeStyle:PropTypes.object,className:PropTypes.string,exact:PropTypes.bool,isActive:PropTypes.func,location:PropTypes.object,strict:PropTypes.bool,style:PropTypes.object});}Object.keys(reactRouter).forEach(function(k){if(k!=='default')Object.defineProperty(exports,k,{enumerable:true,get:function get(){return reactRouter[k];}});});exports.BrowserRouter=BrowserRouter;exports.HashRouter=HashRouter;exports.Link=Link;exports.NavLink=NavLink;//# sourceMappingURL=react-router-dom.js.map

/***/ }),
/* 49 */,
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var DocContext = __webpack_require__(1);

	var PropTypes = __webpack_require__(33);

	var _require = __webpack_require__(5),
	    withRouter = _require.withRouter;

	var fetchData = __webpack_require__(51);

	var React = __webpack_require__(10),
	    ToolbarContainer = __webpack_require__(78),
	    BtnStart = __webpack_require__(80),
	    BtnLogin = __webpack_require__(83),
	    BtnEdit = __webpack_require__(84),
	    BtnInfo = __webpack_require__(85),
	    StartMenu = __webpack_require__(86),
	    SelectRekv = __webpack_require__(90),
	    BtnAccount = __webpack_require__(167);

	var style = __webpack_require__(168);

	var MenuToolBar = function (_React$Component) {
	    _inherits(MenuToolBar, _React$Component);

	    function MenuToolBar(props) {
	        _classCallCheck(this, MenuToolBar);

	        var _this = _possibleConstructorReturn(this, (MenuToolBar.__proto__ || Object.getPrototypeOf(MenuToolBar)).call(this, props));

	        _this.state = {
	            logedIn: true,
	            startMenuValue: 'parentid',
	            showStartMenu: false,
	            isOpenRekvPage: false,
	            rekvId: props.rekvId ? props.rekvId : 0
	        };

	        _this.btnStartClick = _this.btnStartClick.bind(_this);
	        _this.btnLoginClick = _this.btnLoginClick.bind(_this);
	        _this.renderStartMenu = _this.renderStartMenu.bind(_this);
	        _this.startMenuClickHandler = _this.startMenuClickHandler.bind(_this);
	        _this.handleChange = _this.handleChange.bind(_this);
	        _this.btnAccountClick = _this.btnAccountClick.bind(_this);
	        _this.btnEditRekvClick = _this.btnEditRekvClick.bind(_this);

	        return _this;
	    }

	    _createClass(MenuToolBar, [{
	        key: 'render',
	        value: function render() {
	            var isEditMode = this.props.edited,
	                toolbarParams = {
	                btnStart: {
	                    show: this.props.params['btnStart'].show || false,
	                    disabled: isEditMode
	                },
	                btnLogin: {
	                    show: true,
	                    disabled: false
	                },
	                btnAccount: {
	                    show: this.state.logedIn || false,
	                    disabled: false
	                },
	                btnInfo: {
	                    show: true,
	                    disabled: false
	                }
	            };

	            var userAccessList = [];

	            if ('userAccessList' in DocContext.userData) {
	                userAccessList = DocContext.userData.userAccessList.map(function (row) {
	                    var rowObject = JSON.parse(row);
	                    return { id: rowObject.id, kood: '', name: rowObject.nimetus };
	                });

	                // сортировка
	                userAccessList = userAccessList.sort(function (a, b) {
	                    return a.name.localeCompare(b.name, 'en', { sensitivity: 'base' });
	                });
	            }

	            var rekvId = this.state.rekvId,
	                asutus = userAccessList.find(function (row) {
	                return row.id == rekvId;
	            }).name;
	            return React.createElement(
	                'div',
	                { style: style['container'] },
	                React.createElement(
	                    'p',
	                    { style: style['pageName'] },
	                    ' ',
	                    DocContext.pageName ? DocContext.pageName : 'Laste register',
	                    ' '
	                ),
	                React.createElement(
	                    ToolbarContainer,
	                    {
	                        ref: 'menuToolbarContainer',
	                        position: 'left' },
	                    React.createElement(BtnStart, { ref: 'btnStart',
	                        onClick: this.btnStartClick,
	                        show: toolbarParams['btnStart'].show,
	                        disabled: toolbarParams['btnStart'].disabled
	                    }),
	                    React.createElement(SelectRekv, { name: 'rekvId',
	                        libs: 'rekv',
	                        style: style['selectStyle'],
	                        data: userAccessList,
	                        readOnly: false,
	                        value: rekvId,
	                        defaultValue: asutus,
	                        collId: 'id',
	                        ref: 'rekvId',
	                        onChange: this.handleChange }),
	                    React.createElement(BtnEdit, {
	                        ref: 'btnEditRekv',
	                        value: 'Muuda',
	                        onClick: this.btnEditRekvClick
	                    }),
	                    React.createElement(BtnAccount, { ref: 'btnAccount',
	                        value: DocContext.userData ? DocContext.userData.userName : '',
	                        onClick: this.btnAccountClick,
	                        show: toolbarParams['btnAccount'].show,
	                        disabled: toolbarParams['btnAccount'].disabled }),
	                    React.createElement(BtnLogin, { ref: 'btnLogin',
	                        value: this.state.logedIn ? 'Välju' : 'Sisse',
	                        onClick: this.btnLoginClick,
	                        show: toolbarParams['btnLogin'].show,
	                        disabled: toolbarParams['btnLogin'].disabled }),
	                    React.createElement(BtnInfo, { ref: 'btnInfo',
	                        value: 'Juhend',
	                        show: toolbarParams['btnInfo'].show })
	                ),
	                this.renderStartMenu()
	            );
	        }
	    }, {
	        key: 'renderStartMenu',
	        value: function renderStartMenu() {
	            var component = null;
	            var data = [];
	            /*
	                    data = DocContext.menu;
	            */
	            if (this.state.showStartMenu) {
	                component = React.createElement(StartMenu, { ref: 'startMenu',
	                    value: this.state.startMenuValue,
	                    data: data,
	                    clickHandler: this.startMenuClickHandler });
	            }
	            return component;
	        }
	    }, {
	        key: 'btnStartClick',
	        value: function btnStartClick() {
	            // обработчик для кнопки Start

	            this.setState({ showStartMenu: !this.state.showStartMenu });
	        }

	        /**
	         * получит от стартого меню данные, спрячет меню
	         */

	    }, {
	        key: 'startMenuClickHandler',
	        value: function startMenuClickHandler(value) {
	            this.setState({ showStartMenu: false });

	            var docType = DocContext['menu'].find(function (row) {
	                return row.kood === value;
	            });
	            if (docType) {
	                DocContext.pageName = docType.name;
	            }

	            if (this.props.history) {
	                return this.props.history.push({
	                    pathname: '/' + DocContext.module + '/' + value,
	                    state: { module: DocContext.module }

	                });
	            } else {
	                document.location.href = '/' + DocContext.module + '/' + value;
	            }
	        }
	    }, {
	        key: 'btnLoginClick',
	        value: function btnLoginClick() {
	            var URL = '/logout';
	            this.setState({ logedIn: false });

	            try {
	                var userId = DocContext.userData.userId;
	                var params = {
	                    userId: userId, module: DocContext.module,
	                    uuid: this.state.logedIn ? DocContext.userData.uuid : null
	                };

	                fetchData.fetchDataPost(URL, params).then(function () {
	                    DocContext.userData = null;
	                });
	            } catch (e) {
	                console.error(e);
	            }
	            document.location.href = '/login';
	        }
	    }, {
	        key: 'btnAccountClick',
	        value: function btnAccountClick() {
	            return this.props.history.push({
	                pathname: '/' + DocContext.module + '/userid/' + DocContext.userData.userId,
	                state: { module: DocContext.module }
	            });
	        }
	    }, {
	        key: 'btnEditRekvClick',
	        value: function btnEditRekvClick() {
	            return this.props.history.push({
	                pathname: '/' + DocContext.module + '/rekv/' + DocContext.userData.asutusId,
	                state: { module: DocContext.module }
	            });
	        }
	    }, {
	        key: 'handleChange',
	        value: function handleChange(inputName, inputValue) {
	            var _this2 = this;

	            var URL = '/newApi/changeAsutus';
	            var rekvId = inputValue; // choose asutusId

	            if (!this.state.logedIn) {
	                return;
	            }

	            // отправить пост запрос
	            try {
	                var localUrl = URL + '/' + rekvId;
	                var userId = this.state.logedIn ? DocContext.userData.userId : null;
	                var uuid = this.state.logedIn ? DocContext.userData.uuid : null;

	                var params = {
	                    userId: userId,
	                    module: DocContext.module,
	                    docTypeId: DocContext.docTypeId,
	                    uuid: uuid
	                };

	                this.setState({ rekvId: rekvId });

	                fetchData.fetchDataPost(localUrl, params).then(function (response) {
	                    DocContext.userData = Object.assign(DocContext.userData, response.config.data);

	                    // redirect to main
	                    _this2.props.history.push({
	                        pathname: '/lapsed/'
	                    });
	                    document.location.reload();
	                });
	            } catch (e) {
	                console.error(e);
	            }
	            // получить и сохрать данные пользователя
	            // обновить регистр документов - перейти на главную страницу
	        }
	    }]);

	    return MenuToolBar;
	}(React.Component);

	/*
	MenuToolBar
	    .propTypes = {
	    edited: PropTypes.bool,
	    params: PropTypes.object.isRequired,
	    logedIn: PropTypes.bool
	};


	MenuToolBar
	    .defaultProps = {
	    edited: false,
	    logedIn: false,
	    params: {
	        btnStart: {
	            show: true
	        }
	    }
	};
	*/

	module.exports = withRouter(MenuToolBar);

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var axios=__webpack_require__(52);axios.defaults.baseURL='/';var isOk=false;module.exports={fetchDataGet:function fetchDataGet(url){return axios.get(url).then(function(res){return res;}).catch(function(error){console.error('fetchData status, error',error.response.status,error);return{result:'error',status:error.response.status};});},fetchDataPost:function fetchDataPost(url,params){return axios.post(url,params).catch(function(error){console.error('fetchData error',error.response.status,error);return{result:'error',status:error.response.status};});},fetchDataPut:function fetchDataPut(url,params){return axios.put(url,params).catch(function(error){console.error('fetchData error',error.response.status,error);return{result:'error',status:error.response.status};});}};

/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';module.exports=__webpack_require__(53);

/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);var bind=__webpack_require__(55);var Axios=__webpack_require__(57);var mergeConfig=__webpack_require__(74);var defaults=__webpack_require__(63);/**
	 * Create an instance of Axios
	 *
	 * @param {Object} defaultConfig The default config for the instance
	 * @return {Axios} A new instance of Axios
	 */function createInstance(defaultConfig){var context=new Axios(defaultConfig);var instance=bind(Axios.prototype.request,context);// Copy axios.prototype to instance
	utils.extend(instance,Axios.prototype,context);// Copy context to instance
	utils.extend(instance,context);return instance;}// Create the default instance to be exported
	var axios=createInstance(defaults);// Expose Axios class to allow class inheritance
	axios.Axios=Axios;// Factory for creating new instances
	axios.create=function create(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig));};// Expose Cancel & CancelToken
	axios.Cancel=__webpack_require__(75);axios.CancelToken=__webpack_require__(76);axios.isCancel=__webpack_require__(62);// Expose all/spread
	axios.all=function all(promises){return Promise.all(promises);};axios.spread=__webpack_require__(77);module.exports=axios;// Allow use of default import syntax in TypeScript
	module.exports.default=axios;

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var bind=__webpack_require__(55);var isBuffer=__webpack_require__(56);/*global toString:true*/// utils is a library of generic helper functions non-specific to axios
	var toString=Object.prototype.toString;/**
	 * Determine if a value is an Array
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is an Array, otherwise false
	 */function isArray(val){return toString.call(val)==='[object Array]';}/**
	 * Determine if a value is an ArrayBuffer
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is an ArrayBuffer, otherwise false
	 */function isArrayBuffer(val){return toString.call(val)==='[object ArrayBuffer]';}/**
	 * Determine if a value is a FormData
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is an FormData, otherwise false
	 */function isFormData(val){return typeof FormData!=='undefined'&&val instanceof FormData;}/**
	 * Determine if a value is a view on an ArrayBuffer
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false
	 */function isArrayBufferView(val){var result;if(typeof ArrayBuffer!=='undefined'&&ArrayBuffer.isView){result=ArrayBuffer.isView(val);}else{result=val&&val.buffer&&val.buffer instanceof ArrayBuffer;}return result;}/**
	 * Determine if a value is a String
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a String, otherwise false
	 */function isString(val){return typeof val==='string';}/**
	 * Determine if a value is a Number
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a Number, otherwise false
	 */function isNumber(val){return typeof val==='number';}/**
	 * Determine if a value is undefined
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if the value is undefined, otherwise false
	 */function isUndefined(val){return typeof val==='undefined';}/**
	 * Determine if a value is an Object
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is an Object, otherwise false
	 */function isObject(val){return val!==null&&(typeof val==='undefined'?'undefined':_typeof(val))==='object';}/**
	 * Determine if a value is a Date
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a Date, otherwise false
	 */function isDate(val){return toString.call(val)==='[object Date]';}/**
	 * Determine if a value is a File
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a File, otherwise false
	 */function isFile(val){return toString.call(val)==='[object File]';}/**
	 * Determine if a value is a Blob
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a Blob, otherwise false
	 */function isBlob(val){return toString.call(val)==='[object Blob]';}/**
	 * Determine if a value is a Function
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a Function, otherwise false
	 */function isFunction(val){return toString.call(val)==='[object Function]';}/**
	 * Determine if a value is a Stream
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a Stream, otherwise false
	 */function isStream(val){return isObject(val)&&isFunction(val.pipe);}/**
	 * Determine if a value is a URLSearchParams object
	 *
	 * @param {Object} val The value to test
	 * @returns {boolean} True if value is a URLSearchParams object, otherwise false
	 */function isURLSearchParams(val){return typeof URLSearchParams!=='undefined'&&val instanceof URLSearchParams;}/**
	 * Trim excess whitespace off the beginning and end of a string
	 *
	 * @param {String} str The String to trim
	 * @returns {String} The String freed of excess whitespace
	 */function trim(str){return str.replace(/^\s*/,'').replace(/\s*$/,'');}/**
	 * Determine if we're running in a standard browser environment
	 *
	 * This allows axios to run in a web worker, and react-native.
	 * Both environments support XMLHttpRequest, but not fully standard globals.
	 *
	 * web workers:
	 *  typeof window -> undefined
	 *  typeof document -> undefined
	 *
	 * react-native:
	 *  navigator.product -> 'ReactNative'
	 * nativescript
	 *  navigator.product -> 'NativeScript' or 'NS'
	 */function isStandardBrowserEnv(){if(typeof navigator!=='undefined'&&(navigator.product==='ReactNative'||navigator.product==='NativeScript'||navigator.product==='NS')){return false;}return typeof window!=='undefined'&&typeof document!=='undefined';}/**
	 * Iterate over an Array or an Object invoking a function for each item.
	 *
	 * If `obj` is an Array callback will be called passing
	 * the value, index, and complete array for each item.
	 *
	 * If 'obj' is an Object callback will be called passing
	 * the value, key, and complete object for each property.
	 *
	 * @param {Object|Array} obj The object to iterate
	 * @param {Function} fn The callback to invoke for each item
	 */function forEach(obj,fn){// Don't bother if no value provided
	if(obj===null||typeof obj==='undefined'){return;}// Force an array if not already something iterable
	if((typeof obj==='undefined'?'undefined':_typeof(obj))!=='object'){/*eslint no-param-reassign:0*/obj=[obj];}if(isArray(obj)){// Iterate over array values
	for(var i=0,l=obj.length;i<l;i++){fn.call(null,obj[i],i,obj);}}else{// Iterate over object keys
	for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){fn.call(null,obj[key],key,obj);}}}}/**
	 * Accepts varargs expecting each argument to be an object, then
	 * immutably merges the properties of each object and returns result.
	 *
	 * When multiple objects contain the same key the later object in
	 * the arguments list will take precedence.
	 *
	 * Example:
	 *
	 * ```js
	 * var result = merge({foo: 123}, {foo: 456});
	 * console.log(result.foo); // outputs 456
	 * ```
	 *
	 * @param {Object} obj1 Object to merge
	 * @returns {Object} Result of all merge properties
	 */function merge()/* obj1, obj2, obj3, ... */{var result={};function assignValue(val,key){if(_typeof(result[key])==='object'&&(typeof val==='undefined'?'undefined':_typeof(val))==='object'){result[key]=merge(result[key],val);}else{result[key]=val;}}for(var i=0,l=arguments.length;i<l;i++){forEach(arguments[i],assignValue);}return result;}/**
	 * Function equal to merge with the difference being that no reference
	 * to original objects is kept.
	 *
	 * @see merge
	 * @param {Object} obj1 Object to merge
	 * @returns {Object} Result of all merge properties
	 */function deepMerge()/* obj1, obj2, obj3, ... */{var result={};function assignValue(val,key){if(_typeof(result[key])==='object'&&(typeof val==='undefined'?'undefined':_typeof(val))==='object'){result[key]=deepMerge(result[key],val);}else if((typeof val==='undefined'?'undefined':_typeof(val))==='object'){result[key]=deepMerge({},val);}else{result[key]=val;}}for(var i=0,l=arguments.length;i<l;i++){forEach(arguments[i],assignValue);}return result;}/**
	 * Extends object a by mutably adding to it the properties of object b.
	 *
	 * @param {Object} a The object to be extended
	 * @param {Object} b The object to copy properties from
	 * @param {Object} thisArg The object to bind function to
	 * @return {Object} The resulting value of object a
	 */function extend(a,b,thisArg){forEach(b,function assignValue(val,key){if(thisArg&&typeof val==='function'){a[key]=bind(val,thisArg);}else{a[key]=val;}});return a;}module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,deepMerge:deepMerge,extend:extend,trim:trim};

/***/ }),
/* 55 */
/***/ (function(module, exports) {

	'use strict';module.exports=function bind(fn,thisArg){return function wrap(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}return fn.apply(thisArg,args);};};

/***/ }),
/* 56 */
/***/ (function(module, exports) {

	'use strict';/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */module.exports=function isBuffer(obj){return obj!=null&&obj.constructor!=null&&typeof obj.constructor.isBuffer==='function'&&obj.constructor.isBuffer(obj);};

/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);var buildURL=__webpack_require__(58);var InterceptorManager=__webpack_require__(59);var dispatchRequest=__webpack_require__(60);var mergeConfig=__webpack_require__(74);/**
	 * Create a new instance of Axios
	 *
	 * @param {Object} instanceConfig The default config for the instance
	 */function Axios(instanceConfig){this.defaults=instanceConfig;this.interceptors={request:new InterceptorManager(),response:new InterceptorManager()};}/**
	 * Dispatch a request
	 *
	 * @param {Object} config The config specific for this request (merged with this.defaults)
	 */Axios.prototype.request=function request(config){/*eslint no-param-reassign:0*/// Allow for axios('example/url'[, config]) a la fetch API
	if(typeof config==='string'){config=arguments[1]||{};config.url=arguments[0];}else{config=config||{};}config=mergeConfig(this.defaults,config);config.method=config.method?config.method.toLowerCase():'get';// Hook up interceptors middleware
	var chain=[dispatchRequest,undefined];var promise=Promise.resolve(config);this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected);});this.interceptors.response.forEach(function pushResponseInterceptors(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected);});while(chain.length){promise=promise.then(chain.shift(),chain.shift());}return promise;};Axios.prototype.getUri=function getUri(config){config=mergeConfig(this.defaults,config);return buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,'');};// Provide aliases for supported request methods
	utils.forEach(['delete','get','head','options'],function forEachMethodNoData(method){/*eslint func-names:0*/Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}));};});utils.forEach(['post','put','patch'],function forEachMethodWithData(method){/*eslint func-names:0*/Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}));};});module.exports=Axios;

/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);function encode(val){return encodeURIComponent(val).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%20/g,'+').replace(/%5B/gi,'[').replace(/%5D/gi,']');}/**
	 * Build a URL by appending params to the end
	 *
	 * @param {string} url The base of the url (e.g., http://www.google.com)
	 * @param {object} [params] The params to be appended
	 * @returns {string} The formatted url
	 */module.exports=function buildURL(url,params,paramsSerializer){/*eslint no-param-reassign:0*/if(!params){return url;}var serializedParams;if(paramsSerializer){serializedParams=paramsSerializer(params);}else if(utils.isURLSearchParams(params)){serializedParams=params.toString();}else{var parts=[];utils.forEach(params,function serialize(val,key){if(val===null||typeof val==='undefined'){return;}if(utils.isArray(val)){key=key+'[]';}else{val=[val];}utils.forEach(val,function parseValue(v){if(utils.isDate(v)){v=v.toISOString();}else if(utils.isObject(v)){v=JSON.stringify(v);}parts.push(encode(key)+'='+encode(v));});});serializedParams=parts.join('&');}if(serializedParams){var hashmarkIndex=url.indexOf('#');if(hashmarkIndex!==-1){url=url.slice(0,hashmarkIndex);}url+=(url.indexOf('?')===-1?'?':'&')+serializedParams;}return url;};

/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);function InterceptorManager(){this.handlers=[];}/**
	 * Add a new interceptor to the stack
	 *
	 * @param {Function} fulfilled The function to handle `then` for a `Promise`
	 * @param {Function} rejected The function to handle `reject` for a `Promise`
	 *
	 * @return {Number} An ID used to remove interceptor later
	 */InterceptorManager.prototype.use=function use(fulfilled,rejected){this.handlers.push({fulfilled:fulfilled,rejected:rejected});return this.handlers.length-1;};/**
	 * Remove an interceptor from the stack
	 *
	 * @param {Number} id The ID that was returned by `use`
	 */InterceptorManager.prototype.eject=function eject(id){if(this.handlers[id]){this.handlers[id]=null;}};/**
	 * Iterate over all the registered interceptors
	 *
	 * This method is particularly useful for skipping over any
	 * interceptors that may have become `null` calling `eject`.
	 *
	 * @param {Function} fn The function to call for each interceptor
	 */InterceptorManager.prototype.forEach=function forEach(fn){utils.forEach(this.handlers,function forEachHandler(h){if(h!==null){fn(h);}});};module.exports=InterceptorManager;

/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);var transformData=__webpack_require__(61);var isCancel=__webpack_require__(62);var defaults=__webpack_require__(63);var isAbsoluteURL=__webpack_require__(72);var combineURLs=__webpack_require__(73);/**
	 * Throws a `Cancel` if cancellation has been requested.
	 */function throwIfCancellationRequested(config){if(config.cancelToken){config.cancelToken.throwIfRequested();}}/**
	 * Dispatch a request to the server using the configured adapter.
	 *
	 * @param {object} config The config that is to be used for the request
	 * @returns {Promise} The Promise to be fulfilled
	 */module.exports=function dispatchRequest(config){throwIfCancellationRequested(config);// Support baseURL config
	if(config.baseURL&&!isAbsoluteURL(config.url)){config.url=combineURLs(config.baseURL,config.url);}// Ensure headers exist
	config.headers=config.headers||{};// Transform request data
	config.data=transformData(config.data,config.headers,config.transformRequest);// Flatten headers
	config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers||{});utils.forEach(['delete','get','head','post','put','patch','common'],function cleanHeaderConfig(method){delete config.headers[method];});var adapter=config.adapter||defaults.adapter;return adapter(config).then(function onAdapterResolution(response){throwIfCancellationRequested(config);// Transform response data
	response.data=transformData(response.data,response.headers,config.transformResponse);return response;},function onAdapterRejection(reason){if(!isCancel(reason)){throwIfCancellationRequested(config);// Transform response data
	if(reason&&reason.response){reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse);}}return Promise.reject(reason);});};

/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);/**
	 * Transform the data for a request or a response
	 *
	 * @param {Object|String} data The data to be transformed
	 * @param {Array} headers The headers for the request or response
	 * @param {Array|Function} fns A single function or Array of functions
	 * @returns {*} The resulting transformed data
	 */module.exports=function transformData(data,headers,fns){/*eslint no-param-reassign:0*/utils.forEach(fns,function transform(fn){data=fn(data,headers);});return data;};

/***/ }),
/* 62 */
/***/ (function(module, exports) {

	'use strict';module.exports=function isCancel(value){return!!(value&&value.__CANCEL__);};

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {'use strict';var utils=__webpack_require__(54);var normalizeHeaderName=__webpack_require__(64);var DEFAULT_CONTENT_TYPE={'Content-Type':'application/x-www-form-urlencoded'};function setContentTypeIfUnset(headers,value){if(!utils.isUndefined(headers)&&utils.isUndefined(headers['Content-Type'])){headers['Content-Type']=value;}}function getDefaultAdapter(){var adapter;// Only Node.JS has a process variable that is of [[Class]] process
	if(typeof process!=='undefined'&&Object.prototype.toString.call(process)==='[object process]'){// For node use HTTP adapter
	adapter=__webpack_require__(65);}else if(typeof XMLHttpRequest!=='undefined'){// For browsers use XHR adapter
	adapter=__webpack_require__(65);}return adapter;}var defaults={adapter:getDefaultAdapter(),transformRequest:[function transformRequest(data,headers){normalizeHeaderName(headers,'Accept');normalizeHeaderName(headers,'Content-Type');if(utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)){return data;}if(utils.isArrayBufferView(data)){return data.buffer;}if(utils.isURLSearchParams(data)){setContentTypeIfUnset(headers,'application/x-www-form-urlencoded;charset=utf-8');return data.toString();}if(utils.isObject(data)){setContentTypeIfUnset(headers,'application/json;charset=utf-8');return JSON.stringify(data);}return data;}],transformResponse:[function transformResponse(data){/*eslint no-param-reassign:0*/if(typeof data==='string'){try{data=JSON.parse(data);}catch(e){/* Ignore */}}return data;}],/**
	   * A timeout in milliseconds to abort a request. If set to 0 (default) a
	   * timeout is not created.
	   */timeout:0,xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',maxContentLength:-1,validateStatus:function validateStatus(status){return status>=200&&status<300;}};defaults.headers={common:{'Accept':'application/json, text/plain, */*'}};utils.forEach(['delete','get','head'],function forEachMethodNoData(method){defaults.headers[method]={};});utils.forEach(['post','put','patch'],function forEachMethodWithData(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE);});module.exports=defaults;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);module.exports=function normalizeHeaderName(headers,normalizedName){utils.forEach(headers,function processHeader(value,name){if(name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()){headers[normalizedName]=value;delete headers[name];}});};

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);var settle=__webpack_require__(66);var buildURL=__webpack_require__(58);var parseHeaders=__webpack_require__(69);var isURLSameOrigin=__webpack_require__(70);var createError=__webpack_require__(67);module.exports=function xhrAdapter(config){return new Promise(function dispatchXhrRequest(resolve,reject){var requestData=config.data;var requestHeaders=config.headers;if(utils.isFormData(requestData)){delete requestHeaders['Content-Type'];// Let the browser set it
	}var request=new XMLHttpRequest();// HTTP basic authentication
	if(config.auth){var username=config.auth.username||'';var password=config.auth.password||'';requestHeaders.Authorization='Basic '+btoa(username+':'+password);}request.open(config.method.toUpperCase(),buildURL(config.url,config.params,config.paramsSerializer),true);// Set the request timeout in MS
	request.timeout=config.timeout;// Listen for ready state
	request.onreadystatechange=function handleLoad(){if(!request||request.readyState!==4){return;}// The request errored out and we didn't get a response, this will be
	// handled by onerror instead
	// With one exception: request that using file: protocol, most browsers
	// will return status as 0 even though it's a successful request
	if(request.status===0&&!(request.responseURL&&request.responseURL.indexOf('file:')===0)){return;}// Prepare the response
	var responseHeaders='getAllResponseHeaders'in request?parseHeaders(request.getAllResponseHeaders()):null;var responseData=!config.responseType||config.responseType==='text'?request.responseText:request.response;var response={data:responseData,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response);// Clean up request
	request=null;};// Handle browser request cancellation (as opposed to a manual cancellation)
	request.onabort=function handleAbort(){if(!request){return;}reject(createError('Request aborted',config,'ECONNABORTED',request));// Clean up request
	request=null;};// Handle low level network errors
	request.onerror=function handleError(){// Real errors are hidden from us by the browser
	// onerror should only fire if it's a network error
	reject(createError('Network Error',config,null,request));// Clean up request
	request=null;};// Handle timeout
	request.ontimeout=function handleTimeout(){reject(createError('timeout of '+config.timeout+'ms exceeded',config,'ECONNABORTED',request));// Clean up request
	request=null;};// Add xsrf header
	// This is only done if running in a standard browser environment.
	// Specifically not if we're in a web worker, or react-native.
	if(utils.isStandardBrowserEnv()){var cookies=__webpack_require__(71);// Add xsrf header
	var xsrfValue=(config.withCredentials||isURLSameOrigin(config.url))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):undefined;if(xsrfValue){requestHeaders[config.xsrfHeaderName]=xsrfValue;}}// Add headers to the request
	if('setRequestHeader'in request){utils.forEach(requestHeaders,function setRequestHeader(val,key){if(typeof requestData==='undefined'&&key.toLowerCase()==='content-type'){// Remove Content-Type if data is undefined
	delete requestHeaders[key];}else{// Otherwise add header to the request
	request.setRequestHeader(key,val);}});}// Add withCredentials to request if needed
	if(config.withCredentials){request.withCredentials=true;}// Add responseType to request if needed
	if(config.responseType){try{request.responseType=config.responseType;}catch(e){// Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.
	// But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.
	if(config.responseType!=='json'){throw e;}}}// Handle progress if needed
	if(typeof config.onDownloadProgress==='function'){request.addEventListener('progress',config.onDownloadProgress);}// Not all browsers support upload events
	if(typeof config.onUploadProgress==='function'&&request.upload){request.upload.addEventListener('progress',config.onUploadProgress);}if(config.cancelToken){// Handle cancellation
	config.cancelToken.promise.then(function onCanceled(cancel){if(!request){return;}request.abort();reject(cancel);// Clean up request
	request=null;});}if(requestData===undefined){requestData=null;}// Send the request
	request.send(requestData);});};

/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var createError=__webpack_require__(67);/**
	 * Resolve or reject a Promise based on response status.
	 *
	 * @param {Function} resolve A function that resolves the promise.
	 * @param {Function} reject A function that rejects the promise.
	 * @param {object} response The response.
	 */module.exports=function settle(resolve,reject,response){var validateStatus=response.config.validateStatus;if(!validateStatus||validateStatus(response.status)){resolve(response);}else{reject(createError('Request failed with status code '+response.status,response.config,null,response.request,response));}};

/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var enhanceError=__webpack_require__(68);/**
	 * Create an Error with the specified message, config, error code, request and response.
	 *
	 * @param {string} message The error message.
	 * @param {Object} config The config.
	 * @param {string} [code] The error code (for example, 'ECONNABORTED').
	 * @param {Object} [request] The request.
	 * @param {Object} [response] The response.
	 * @returns {Error} The created error.
	 */module.exports=function createError(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response);};

/***/ }),
/* 68 */
/***/ (function(module, exports) {

	'use strict';/**
	 * Update an Error with the specified config, error code, and response.
	 *
	 * @param {Error} error The error to update.
	 * @param {Object} config The config.
	 * @param {string} [code] The error code (for example, 'ECONNABORTED').
	 * @param {Object} [request] The request.
	 * @param {Object} [response] The response.
	 * @returns {Error} The error.
	 */module.exports=function enhanceError(error,config,code,request,response){error.config=config;if(code){error.code=code;}error.request=request;error.response=response;error.isAxiosError=true;error.toJSON=function(){return{// Standard
	message:this.message,name:this.name,// Microsoft
	description:this.description,number:this.number,// Mozilla
	fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,// Axios
	config:this.config,code:this.code};};return error;};

/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);// Headers whose duplicates are ignored by node
	// c.f. https://nodejs.org/api/http.html#http_message_headers
	var ignoreDuplicateOf=['age','authorization','content-length','content-type','etag','expires','from','host','if-modified-since','if-unmodified-since','last-modified','location','max-forwards','proxy-authorization','referer','retry-after','user-agent'];/**
	 * Parse headers into an object
	 *
	 * ```
	 * Date: Wed, 27 Aug 2014 08:58:49 GMT
	 * Content-Type: application/json
	 * Connection: keep-alive
	 * Transfer-Encoding: chunked
	 * ```
	 *
	 * @param {String} headers Headers needing to be parsed
	 * @returns {Object} Headers parsed into an object
	 */module.exports=function parseHeaders(headers){var parsed={};var key;var val;var i;if(!headers){return parsed;}utils.forEach(headers.split('\n'),function parser(line){i=line.indexOf(':');key=utils.trim(line.substr(0,i)).toLowerCase();val=utils.trim(line.substr(i+1));if(key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0){return;}if(key==='set-cookie'){parsed[key]=(parsed[key]?parsed[key]:[]).concat([val]);}else{parsed[key]=parsed[key]?parsed[key]+', '+val:val;}}});return parsed;};

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);module.exports=utils.isStandardBrowserEnv()?// Standard browser envs have full support of the APIs needed to test
	// whether the request URL is of the same origin as current location.
	function standardBrowserEnv(){var msie=/(msie|trident)/i.test(navigator.userAgent);var urlParsingNode=document.createElement('a');var originURL;/**
	    * Parse a URL to discover it's components
	    *
	    * @param {String} url The URL to be parsed
	    * @returns {Object}
	    */function resolveURL(url){var href=url;if(msie){// IE needs attribute set twice to normalize properties
	urlParsingNode.setAttribute('href',href);href=urlParsingNode.href;}urlParsingNode.setAttribute('href',href);// urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils
	return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,''):'',host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,''):'',hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,''):'',hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:urlParsingNode.pathname.charAt(0)==='/'?urlParsingNode.pathname:'/'+urlParsingNode.pathname};}originURL=resolveURL(window.location.href);/**
	    * Determine if a URL shares the same origin as the current location
	    *
	    * @param {String} requestURL The URL to test
	    * @returns {boolean} True if URL shares the same origin, otherwise false
	    */return function isURLSameOrigin(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host;};}():// Non standard browser envs (web workers, react-native) lack needed support.
	function nonStandardBrowserEnv(){return function isURLSameOrigin(){return true;};}();

/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);module.exports=utils.isStandardBrowserEnv()?// Standard browser envs support document.cookie
	function standardBrowserEnv(){return{write:function write(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+'='+encodeURIComponent(value));if(utils.isNumber(expires)){cookie.push('expires='+new Date(expires).toGMTString());}if(utils.isString(path)){cookie.push('path='+path);}if(utils.isString(domain)){cookie.push('domain='+domain);}if(secure===true){cookie.push('secure');}document.cookie=cookie.join('; ');},read:function read(name){var match=document.cookie.match(new RegExp('(^|;\\s*)('+name+')=([^;]*)'));return match?decodeURIComponent(match[3]):null;},remove:function remove(name){this.write(name,'',Date.now()-86400000);}};}():// Non standard browser env (web workers, react-native) lack needed support.
	function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null;},remove:function remove(){}};}();

/***/ }),
/* 72 */
/***/ (function(module, exports) {

	'use strict';/**
	 * Determines whether the specified URL is absolute
	 *
	 * @param {string} url The URL to test
	 * @returns {boolean} True if the specified URL is absolute, otherwise false
	 */module.exports=function isAbsoluteURL(url){// A URL is considered absolute if it begins with "<scheme>://" or "//" (protocol-relative URL).
	// RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed
	// by any combination of letters, digits, plus, period, or hyphen.
	return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);};

/***/ }),
/* 73 */
/***/ (function(module, exports) {

	'use strict';/**
	 * Creates a new URL by combining the specified URLs
	 *
	 * @param {string} baseURL The base URL
	 * @param {string} relativeURL The relative URL
	 * @returns {string} The combined URL
	 */module.exports=function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,'')+'/'+relativeURL.replace(/^\/+/,''):baseURL;};

/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var utils=__webpack_require__(54);/**
	 * Config-specific merge-function which creates a new config-object
	 * by merging two configuration objects together.
	 *
	 * @param {Object} config1
	 * @param {Object} config2
	 * @returns {Object} New object resulting from merging config2 to config1
	 */module.exports=function mergeConfig(config1,config2){// eslint-disable-next-line no-param-reassign
	config2=config2||{};var config={};utils.forEach(['url','method','params','data'],function valueFromConfig2(prop){if(typeof config2[prop]!=='undefined'){config[prop]=config2[prop];}});utils.forEach(['headers','auth','proxy'],function mergeDeepProperties(prop){if(utils.isObject(config2[prop])){config[prop]=utils.deepMerge(config1[prop],config2[prop]);}else if(typeof config2[prop]!=='undefined'){config[prop]=config2[prop];}else if(utils.isObject(config1[prop])){config[prop]=utils.deepMerge(config1[prop]);}else if(typeof config1[prop]!=='undefined'){config[prop]=config1[prop];}});utils.forEach(['baseURL','transformRequest','transformResponse','paramsSerializer','timeout','withCredentials','adapter','responseType','xsrfCookieName','xsrfHeaderName','onUploadProgress','onDownloadProgress','maxContentLength','validateStatus','maxRedirects','httpAgent','httpsAgent','cancelToken','socketPath'],function defaultToConfig2(prop){if(typeof config2[prop]!=='undefined'){config[prop]=config2[prop];}else if(typeof config1[prop]!=='undefined'){config[prop]=config1[prop];}});return config;};

/***/ }),
/* 75 */
/***/ (function(module, exports) {

	'use strict';/**
	 * A `Cancel` is an object that is thrown when an operation is canceled.
	 *
	 * @class
	 * @param {string=} message The message.
	 */function Cancel(message){this.message=message;}Cancel.prototype.toString=function toString(){return'Cancel'+(this.message?': '+this.message:'');};Cancel.prototype.__CANCEL__=true;module.exports=Cancel;

/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var Cancel=__webpack_require__(75);/**
	 * A `CancelToken` is an object that can be used to request cancellation of an operation.
	 *
	 * @class
	 * @param {Function} executor The executor function.
	 */function CancelToken(executor){if(typeof executor!=='function'){throw new TypeError('executor must be a function.');}var resolvePromise;this.promise=new Promise(function promiseExecutor(resolve){resolvePromise=resolve;});var token=this;executor(function cancel(message){if(token.reason){// Cancellation has already been requested
	return;}token.reason=new Cancel(message);resolvePromise(token.reason);});}/**
	 * Throws a `Cancel` if cancellation has been requested.
	 */CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason){throw this.reason;}};/**
	 * Returns an object that contains a new `CancelToken` and a function that, when called,
	 * cancels the `CancelToken`.
	 */CancelToken.source=function source(){var cancel;var token=new CancelToken(function executor(c){cancel=c;});return{token:token,cancel:cancel};};module.exports=CancelToken;

/***/ }),
/* 77 */
/***/ (function(module, exports) {

	'use strict';/**
	 * Syntactic sugar for invoking a function and expanding an array for arguments.
	 *
	 * Common use case would be to use `Function.prototype.apply`.
	 *
	 *  ```js
	 *  function f(x, y, z) {}
	 *  var args = [1, 2, 3];
	 *  f.apply(null, args);
	 *  ```
	 *
	 * With `spread` this example can be re-written.
	 *
	 *  ```js
	 *  spread(function(x, y, z) {})([1, 2, 3]);
	 *  ```
	 *
	 * @param {Function} callback
	 * @returns {Function}
	 */module.exports=function spread(callback){return function wrap(arr){return callback.apply(null,arr);};};

/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var styles = __webpack_require__(79),
	    React = __webpack_require__(10);

	var ToolBarContainer = function (_React$Component) {
	    _inherits(ToolBarContainer, _React$Component);

	    function ToolBarContainer(props) {
	        _classCallCheck(this, ToolBarContainer);

	        return _possibleConstructorReturn(this, (ToolBarContainer.__proto__ || Object.getPrototypeOf(ToolBarContainer)).call(this, props));
	    }

	    _createClass(ToolBarContainer, [{
	        key: 'render',
	        value: function render() {
	            var style = Object.assign({}, styles.toolBarContainerStyle, styles[this.props.position]);
	            return React.createElement(
	                'div',
	                { id: 'toolBarContainer',
	                    ref: 'toolBarContainer',
	                    style: style },
	                this.props.children
	            );
	        }
	    }]);

	    return ToolBarContainer;
	}(React.Component);

	ToolBarContainer.propTypes = {
	    position: PropTypes.string
	};

	ToolBarContainer.defaultProps = {
	    position: 'right'
	};

	module.exports = ToolBarContainer;

/***/ }),
/* 79 */
/***/ (function(module, exports) {

	'use strict';module.exports={toolBarContainerStyle:{display:'flex',width:'100%',height:'Auto',marginBottom:'5px',marginHeight:'5px',borderRadius:'5px'},right:{justifyContent:'flex-end'},left:{justifyContent:'flex-start'}};

/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'start';

	var ButtonRegisterStart = function (_React$PureComponent) {
	    _inherits(ButtonRegisterStart, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterStart(props) {
	        _classCallCheck(this, ButtonRegisterStart);

	        return _possibleConstructorReturn(this, (ButtonRegisterStart.__proto__ || Object.getPrototypeOf(ButtonRegisterStart)).call(this, props));
	    }

	    _createClass(ButtonRegisterStart, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick('start');
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    value: '',
	                    ref: 'btnStart',
	                    style: styles.button,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterStart;
	}(React.PureComponent);

	ButtonRegisterStart.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonRegisterStart;

/***/ }),
/* 81 */
/***/ (function(module, exports) {

	'use strict';module.exports={button:{background:'white',margin:'5px 2px',borderRadius:'5px',height:'30px',display:'flex',border:'1px solid gray'},buttonAccount:{width:'50%'},buttonLogin:{width:'50%'},buttonEdit:{display:'flex'},icons:{add:'/images/icons/add.png',edit:'/images/icons/edit.png',delete:'/images/icons/delete.png',filter:'/images/icons/filter.png',print:'/images/icons/print.png',ok:'/images/icons/ok.png',cancel:'/images/icons/cancel.png',save:'/images/icons/save.png',execute:'/images/icons/execute.png',start:'/images/icons/start.png',login:'/images/icons/login.png',account:'/images/icons/account.png',rekv:'/images/icons/rekv.png',info:'/images/icons/info.png',settings:'/images/icons/settings.png',mail:'/images/icons/mail.png',select:'/images/icons/select.png',refresh:'/images/icons/refresh.png',attachment:'/images/icons/attachment.png'}};

/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var styles = __webpack_require__(81);

	var Button = function (_React$PureComponent) {
	    _inherits(Button, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function Button(props) {
	        _classCallCheck(this, Button);

	        var _this = _possibleConstructorReturn(this, (Button.__proto__ || Object.getPrototypeOf(Button)).call(this, props));

	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.state = {
	            disabled: _this.props.disabled
	        };
	        return _this;
	    }

	    // will update state if props changed


	    _createClass(Button, [{
	        key: 'handleClick',
	        value: function handleClick(event) {
	            switch (event.type) {
	                case 'click':
	                    this.props.onClick(this.props.value);
	                    break;
	                case 'dblclick':
	                    this.props.onClick(this.props.value);
	                    break;
	                default:
	                    console.log('unhandled', event.type);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            // visibility
	            var visibility = this.props.show ? 'initial' : 'hidden';

	            var propStyle = 'style' in this.props ? this.props.style : {},
	                style = Object.assign({}, styles.button, propStyle, { visibility: visibility });

	            return React.createElement(
	                'button',
	                {
	                    disabled: this.state.disabled,
	                    ref: 'button',
	                    style: style,
	                    onDoubleClick: this.handleClick,
	                    onClick: this.handleClick },
	                this.props.children,
	                this.props.value
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.disabled !== prevState.disabled) {
	                return { disabled: nextProps.disabled };
	            } else return null;
	        }
	    }]);

	    return Button;
	}(React.PureComponent);

	Button.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    value: PropTypes.string.isRequired,
	    style: PropTypes.object
	};

	Button.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = Button;

/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'login';

	var ButtonLogin = function (_React$PureComponent) {
	    _inherits(ButtonLogin, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonLogin(props) {
	        _classCallCheck(this, ButtonLogin);

	        var _this = _possibleConstructorReturn(this, (ButtonLogin.__proto__ || Object.getPrototypeOf(ButtonLogin)).call(this, props));

	        _this.state = {
	            value: props.value || 'Sisse'
	        };

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(ButtonLogin, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick('login');
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            var value = this.state.value;
	            var buttonStyle = Object.assign({}, styles.button, styles.buttonLogin);

	            return React.createElement(
	                Button,
	                {
	                    value: value,
	                    ref: 'btnLogin',
	                    style: buttonStyle,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value) {
	                return { value: nextProps.value };
	            } else return null;
	        }
	    }]);

	    return ButtonLogin;
	}(React.PureComponent);

	ButtonLogin.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    value: PropTypes.string
	};

	ButtonLogin.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Välju'
	};

	module.exports = ButtonLogin;

/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'edit';

	var ButtonRegisterEdit = function (_React$PureComponent) {
	    _inherits(ButtonRegisterEdit, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterEdit(props) {
	        _classCallCheck(this, ButtonRegisterEdit);

	        var _this = _possibleConstructorReturn(this, (ButtonRegisterEdit.__proto__ || Object.getPrototypeOf(ButtonRegisterEdit)).call(this, props));

	        _this.state = {
	            disabled: _this.props.disabled
	        };
	        _this.handleClick = _this.handleClick.bind(_this);
	        return _this;
	    }

	    _createClass(ButtonRegisterEdit, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick(this.props.value);
	        }

	        // will update state if props changed

	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            var btnStyle = Object.assign({}, styles.buttonEdit, this.props.style ? this.props.style : {});

	            return React.createElement(
	                Button,
	                {
	                    value: this.props.value,
	                    ref: 'btnEdit',
	                    style: btnStyle,
	                    show: this.props.show,
	                    disabled: this.state.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.disabled !== prevState.disabled) {
	                return { disabled: nextProps.disabled };
	            } else return null;
	        }
	    }]);

	    return ButtonRegisterEdit;
	}(React.PureComponent);

	/*
	ButtonRegisterEdit.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    disabled: PropTypes.bool
	}
	*/

	ButtonRegisterEdit.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Edit'
	};

	module.exports = ButtonRegisterEdit;

/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'info';

	var DocContext = __webpack_require__(1);

	var ButtonInfo = function (_React$Component) {
	    _inherits(ButtonInfo, _React$Component);

	    // кнопка создания документа в регистрах
	    function ButtonInfo(props) {
	        _classCallCheck(this, ButtonInfo);

	        var _this = _possibleConstructorReturn(this, (ButtonInfo.__proto__ || Object.getPrototypeOf(ButtonInfo)).call(this, props));

	        _this.handleClick = _this.handleClick.bind(_this);
	        return _this;
	    }

	    /**
	     * обработчик события клик, откроет модальное окно
	     * @param e
	     */


	    _createClass(ButtonInfo, [{
	        key: 'handleClick',
	        value: function handleClick() {
	            var docTypeId = this.props.docTypeId ? this.props.docTypeId : DocContext.docTypeId;
	            var url = '/help/' + docTypeId;
	            window.open('' + url);
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    Button,
	                    {
	                        ref: 'btnInfo',
	                        value: this.props.value,
	                        show: this.props.show,
	                        disabled: this.props.disabled,
	                        onClick: this.handleClick },
	                    React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	                )
	            );
	        }
	    }]);

	    return ButtonInfo;
	}(React.Component);

	/*
	ButtonRegisterPrint.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonInfo.defaultProps = {
	    disabled: false,
	    show: true,
	    value: ''
	};

	module.exports = ButtonInfo;

/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10);

	var styles = __webpack_require__(87),
	    _fetchData = __webpack_require__(51),
	    TreeList = __webpack_require__(88);

	var DocContext = __webpack_require__(1);

	var URL = '/newApi/startMenu';

	var StartMenu = function (_React$PureComponent) {
	    _inherits(StartMenu, _React$PureComponent);

	    function StartMenu(props) {
	        _classCallCheck(this, StartMenu);

	        var _this = _possibleConstructorReturn(this, (StartMenu.__proto__ || Object.getPrototypeOf(StartMenu)).call(this, props));

	        _this.state = {
	            value: props.value
	        };

	        _this.treeData = props.data;
	        _this.clickHandler = _this.clickHandler.bind(_this);
	        _this.fetchData = _this.fetchData.bind(_this);
	        return _this;
	    }

	    /**
	     * пишем делаем запрос по итогу загрузки
	     */


	    _createClass(StartMenu, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (!this.treeData.length) {
	                //делаем запрос на получение данных
	                this.fetchData(this.props);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {

	            return React.createElement(
	                'div',
	                { style: styles.container },
	                React.createElement(TreeList, { ref: 'treeList',
	                    style: styles.ul,
	                    data: this.treeData,
	                    bindDataField: 'kood',
	                    value: this.state.value,
	                    onClickAction: this.clickHandler
	                })
	            );
	        }
	    }, {
	        key: 'clickHandler',
	        value: function clickHandler(action, value) {
	            if (this.props.clickHandler) {
	                return this.props.clickHandler(value);
	            }
	        }

	        /**
	         * Выполнит запросы
	         */

	    }, {
	        key: 'fetchData',
	        value: function fetchData(props) {
	            var _this2 = this;

	            var url = URL + ('/' + DocContext.module);
	            var params = { userId: DocContext.userData.userId, uuid: DocContext.userData.uuid };

	            try {
	                // will check in cache
	                if (!DocContext['menu'] || DocContext['menu'].length === 0) {
	                    _fetchData.fetchDataPost(url, params).then(function (response) {
	                        if (response.status && response.status == 401) {
	                            console.error('Error 401, redirect');
	                            document.location = '/login';
	                        }
	                        if (response) {

	                            _this2.treeData = response.data.data;
	                            // запомним содержимое
	                            DocContext.menu = _this2.treeData;
	                            _this2.forceUpdate();
	                        }
	                    }).catch(function (error) {
	                        console.error('received error-> ', error);
	                        if (error) {
	                            document.location = '/login';
	                        }
	                    });
	                } else {
	                    this.treeData = DocContext['menu'];
	                    this.forceUpdate();
	                }
	            } catch (e) {
	                console.error(e);
	            }
	        }
	    }]);

	    return StartMenu;
	}(React.PureComponent);

	StartMenu.propTypes = {
	    data: PropTypes.array
	};

	StartMenu.defaultProps = {
	    data: []
	};

	module.exports = StartMenu;

/***/ }),
/* 87 */
/***/ (function(module, exports) {

	'use strict';module.exports={container:{width:'auto',minHeight:'350px',position:'absolute',left:'20px',overflow:'auto',zIndex:'999999'},ul:{overflow:'auto'}};

/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(89);

	var Tree = function (_React$PureComponent) {
	    _inherits(Tree, _React$PureComponent);

	    function Tree(props) {
	        _classCallCheck(this, Tree);

	        var _this = _possibleConstructorReturn(this, (Tree.__proto__ || Object.getPrototypeOf(Tree)).call(this, props));

	        _this.state = {
	            index: _this.getIndex(props.value),
	            value: props.value,
	            hover: false,
	            parentId: 'document'
	        };
	        _this.handleLiClick = _this.handleLiClick.bind(_this);
	        _this.toggleHover = _this.toggleHover.bind(_this);
	        _this.getTree = _this.getTree.bind(_this);
	        return _this;
	    }

	    _createClass(Tree, [{
	        key: 'componentDidUpdate',
	        value: function componentDidUpdate(nextProps) {
	            this.getIndex(nextProps.value);
	            this.setState({ index: this.getIndex(nextProps.value), value: nextProps.value });
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            if (!this.props.data.length) {
	                return null;
	            }
	            return React.createElement(
	                'div',
	                { ref: 'tree' },
	                this.getTree('0')
	            );
	        }

	        /**
	         * Обработчик для клика
	         * @param selectedIndex
	         * @param selectedId
	         * @param isNode
	         */

	    }, {
	        key: 'handleLiClick',
	        value: function handleLiClick(selectedIndex, selectedId, isNode) {
	            if (!isNode && !isNaN(selectedId)) {
	                // не нода, а документ
	                var data = this.props.data.filter(function (row) {
	                    if (row.id === selectedId) {
	                        return row;
	                    }
	                }),
	                    value = data[0][this.props.bindDataField];

	                this.setState({
	                    index: selectedIndex,
	                    value: value
	                });

	                if (this.props.onClickAction) {
	                    this.props.onClickAction(this.props.name + 'Change', value);
	                }
	            } else {
	                //isNode
	                if (selectedId !== '0' && selectedId !== 'Lapsed') {
	                    this.setState({ parentId: selectedId });
	                }
	            }
	        }

	        /**
	         * вернет данные для ноды = parentId
	         * @param parentId
	         */

	    }, {
	        key: 'getChildren',
	        value: function getChildren(parentId) {
	            return this.props.data.filter(function (row) {
	                if (row.parentid == parentId) {
	                    return row;
	                }
	            });
	        }

	        /**
	         * Построет дерево для ноды = parentId
	         * @param parentId
	         * @returns {XML}
	         */

	    }, {
	        key: 'getTree',
	        value: function getTree(parentId) {
	            var _this2 = this;

	            var data = this.getChildren(parentId),
	                value = this.state.value;

	            var linkStyle = void 0;
	            if (this.state.hover) {
	                linkStyle = { backgroundColor: 'red' };
	            } else {
	                linkStyle = { backgroundColor: 'blue' };
	            }

	            var style = Object.assign({}, styles.ul, this.props.style ? this.props.style : {});

	            return React.createElement(
	                'ul',
	                {
	                    style: style,
	                    ref: 'tree-ul' },
	                data.map(function (subRow, index) {
	                    var style = Object.assign({}, styles.li, value === subRow[_this2.props.bindDataField] && !subRow.is_node ? styles.focused : {}),
	                        refId = 'li-' + index + Math.random();

	                    var is_hidden = false;

	                    if (!subRow.is_node && _this2.state.parentId !== subRow.parentid) {
	                        is_hidden = true;
	                    }

	                    return React.createElement(
	                        'li',
	                        {
	                            className: subRow.is_node ? 'node' : 'menu',
	                            style: style,
	                            onClick: _this2.handleLiClick.bind(_this2, index, subRow.id, subRow.is_node),
	                            key: refId,
	                            value: subRow.id,
	                            hidden: is_hidden,
	                            ref: refId },
	                        subRow.is_node ? _this2.state.parentId == subRow.id ? '-' : '+' : null,
	                        React.createElement('img', { ref: 'image', src: styles.icons[subRow.kood.toLowerCase()] }),
	                        subRow.name,
	                        _this2.getTree(subRow.id)
	                    );
	                })
	            );
	        }
	    }, {
	        key: 'toggleHover',
	        value: function toggleHover() {
	            this.setState({ hover: !this.state.hover });
	        }

	        /**
	         * Вернет индекс строки где заданное поле имеет значение value
	         * @param value
	         * @returns {number}
	         */

	    }, {
	        key: 'getIndex',
	        value: function getIndex(value) {
	            var treeIndex = 0;
	            // we got value, we should find index and initilize idx field
	            for (var i = 0; i++; i < this.props.data[0].length) {
	                if (this.props.data[0].data[i][this.props.bindDataField] === value) {
	                    // found
	                    return i;
	                }
	            }
	            return treeIndex;
	        }
	    }]);

	    return Tree;
	}(React.PureComponent);

	Tree.propTypes = {
	    value: PropTypes.string,
	    data: PropTypes.array,
	    bindDataField: PropTypes.string.isRequired
	};

	Tree.defaultProps = {
	    data: [{
	        id: 0,
	        parentId: 0,
	        name: '',
	        kood: '',
	        selected: false
	    }],
	    value: null,
	    bindDataField: 'id'
	};

	module.exports = Tree;

/***/ }),
/* 89 */
/***/ (function(module, exports) {

	'use strict';module.exports={ul:{backgroundColor:'white',//        marginRight: '20px',
	paddingLeft:'15px',display:'table-row-group',width:'auto'},li:{//        backgroundColor: 'white',
	marginRight:'20px',margin:'10px 10px'},icons:{_laps:'/images/icons/laps.png',_vanem:'/images/icons/vanem.png',settings:'/images/icons/settings.png',_rekv:'/images/icons/rekv.png',aruanne:'/images/icons/reports.png',_lapse_kaart:'/images/icons/services.png',library:'/images/icons/libraries.png',_asutused:'/images/icons/contacts.png',_nomenclature:'/images/icons/nomenclature.png',_lapse_grupp:'/images/icons/groups.png',_lapse_taabel:'/images/icons/journal.png',_tunnus:'/images/icons/atribute.png',document:'/images/icons/documents.png',_arv:'/images/icons/bill.png',_sorder:'/images/icons/sorder.png',_smk:'/images/icons/smk.png'}};

/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var radium = __webpack_require__(91);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(166);

	var Index = function (_React$PureComponent) {
	    _inherits(Index, _React$PureComponent);

	    function Index(props) {
	        _classCallCheck(this, Index);

	        var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

	        _this.state = {
	            value: props.value ? props.value : 0 /* здесь по значению ИД */
	            , readOnly: props.readOnly,
	            disabled: props.disabled,
	            fieldValue: props.defaultValue ? props.defaultValue : '' /*здесь по значени поля collId */
	            , btnDelete: props.btnDelete /* если истину, то рисуем рядом кнопку для очистки значения*/
	        };

	        _this.onChange = _this.onChange.bind(_this);

	        return _this;
	    }

	    /**
	     * привяжет к значеню поля
	     * @param data - коллекция
	     * @param collId - поле
	     * @param value - значение
	     */


	    _createClass(Index, [{
	        key: 'findFieldValue',
	        value: function findFieldValue(data, collId, value) {
	            var _this2 = this;

	            // надо привязать данные
	            data.forEach(function (row) {
	                if (row[collId] == value) {
	                    _this2.setState({ value: row[collId], fieldValue: row[collId] });
	                }
	            }, this);
	        }

	        /**
	         *
	         * @param collId
	         * @param rowId
	         * @returns {*}
	         */

	    }, {
	        key: 'getValueById',
	        value: function getValueById(collId, rowId) {
	            var _this3 = this;

	            // вернет значения поля по выбранному ИД

	            var fieldValue = void 0,
	                data = this.props.data;

	            data.forEach(function (row) {
	                if (row[collId] == rowId) {
	                    fieldValue = row[collId];
	                    _this3.setState({ fieldValue: fieldValue });
	                }
	            }, this);

	            return fieldValue;
	        }

	        // will update state if props changed

	    }, {
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (this.props.collId && this.props.collId !== 'id') {
	                // ищем ИД по значению поля
	                this.findFieldValue(this.props.data, this.props.collId, this.props.value);
	            }
	        }
	    }, {
	        key: 'onChange',
	        value: function onChange(e) {
	            var fieldValue = e.target.value;

	            if (fieldValue == '') {
	                fieldValue = null;
	            }

	            if (this.props.collId) {
	                // найдем по ид значение поля в collId
	                fieldValue = this.getValueById(this.props.collId, fieldValue);
	            }
	            // сохраним ид как value
	            this.setState({ value: e.target.value, fieldValue: fieldValue });

	            if (this.props.onChange) {
	                // смотрим к чему привязан селект и отдаим его наверх
	                this.props.onChange(this.props.name, fieldValue); // в случае если задан обработчик на верхнем уровне, отдадим обработку туда
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var inputReadOnly = this.state.readOnly || false,
	                inputDefaultValue = this.props.defaultValue ? this.props.defaultValue : this.props.value || ''; // Дадим дефолтное значение для виджета, чтоб покать его сразу, до подгрузки библиотеки

	            if (!this.state.value) {
	                // добавим пустую строку в массив

	                // проверим наличие пустой строки в массиве
	                var emptyObj = this.props.data.filter(function (obj) {
	                    if (obj.id === 0) {
	                        return obj;
	                    }
	                });
	            }

	            var selectStyle = Object.assign({}, styles.select, inputReadOnly ? styles.hide : {}, inputReadOnly ? styles.readOnly : {});

	            return React.createElement(
	                'select',
	                { ref: 'select',
	                    style: selectStyle,
	                    value: this.state.value || 0,
	                    id: this.props.name,
	                    onChange: this.onChange },
	                this.prepaireDataOptions()
	            );
	        }

	        /**
	         * Подготовит датасет для селекта
	         * @returns {*}
	         */

	    }, {
	        key: 'prepaireDataOptions',
	        value: function prepaireDataOptions() {
	            var _this4 = this;

	            var options = void 0;
	            var data = this.props.data.length ? this.props.data : [];

	            //        data.unshift({id:0, kood:'', name:''});
	            if (data.length) {

	                options = data.map(function (item, index) {
	                    var key = 'option-' + index;
	                    var separator = ' ';
	                    var rowValue = (item.kood ? item.kood : '') + ' ' + separator + ' ' + item.name;
	                    return React.createElement(
	                        'option',
	                        {
	                            value: _this4.props.data.length ? item[_this4.props.collId] : 0,
	                            key: key,
	                            ref: key },
	                        ' ',
	                        rowValue
	                    );
	                }, this);
	            } else {
	                options = React.createElement('option', { value: 0, key: Math.random() });
	            }
	            return options;
	        }

	        /**
	         * установит фокус на элементы
	         */

	    }, {
	        key: 'focus',
	        value: function focus() {
	            this.refs['select'].focus();
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {

	            if (nextProps.value !== prevState.value) {
	                return { value: nextProps.value };
	            } else return null;
	        }
	    }]);

	    return Index;
	}(React.PureComponent);

	Index.propTypes = {
	    data: PropTypes.arrayOf(PropTypes.shape({
	        id: PropTypes.number,
	        kood: PropTypes.string,
	        nimetus: PropTypes.string
	    })),
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    btnDelete: PropTypes.bool,
	    libs: PropTypes.string,
	    collId: PropTypes.string.isRequired,
	    title: PropTypes.string,
	    placeholder: PropTypes.string,
	    defaultValue: PropTypes.string
	};

	Index.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    valid: true,
	    btnDelete: false,
	    collId: 'id',
	    title: '',
	    defaultValue: '',
	    data: [{ id: 0, kood: '', nimetus: '' }]
	};

	module.exports = radium(Index);

/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';module.exports=__webpack_require__(92).default;module.exports.default=module.exports;

/***/ }),
/* 92 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Plugins",{enumerable:true,get:function get(){return _plugins["default"];}});Object.defineProperty(exports,"Style",{enumerable:true,get:function get(){return _style["default"];}});Object.defineProperty(exports,"StyleRoot",{enumerable:true,get:function get(){return _styleRoot["default"];}});Object.defineProperty(exports,"getState",{enumerable:true,get:function get(){return _getState["default"];}});Object.defineProperty(exports,"keyframes",{enumerable:true,get:function get(){return _keyframes["default"];}});exports["default"]=void 0;var _enhancer=_interopRequireDefault(__webpack_require__(93));var _plugins=_interopRequireDefault(__webpack_require__(150));var _style=_interopRequireDefault(__webpack_require__(162));var _styleRoot=_interopRequireDefault(__webpack_require__(163));var _getState=_interopRequireDefault(__webpack_require__(144));var _keyframes=_interopRequireDefault(__webpack_require__(165));var _resolveStyles=_interopRequireDefault(__webpack_require__(94));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function Radium(ComposedComponent){return(0,_enhancer["default"])(ComposedComponent);}// Legacy object support.
	//
	// Normally it would be disfavored to attach these to the `Radium` object
	// because it defeats tree-shaking, using instead the ESM exports. But,
	// the `Radium` `Enhancer` uses **all** of these, so there's no extra "cost"
	// to them being explicitly on the `Radium` object.
	Radium.Plugins=_plugins["default"];Radium.Style=_style["default"];Radium.StyleRoot=_styleRoot["default"];Radium.getState=_getState["default"];Radium.keyframes=_keyframes["default"];if(process.env.NODE_ENV!=='production'){Radium.TestMode={clearState:_resolveStyles["default"].__clearStateForTests,disable:_resolveStyles["default"].__setTestMode.bind(null,false),enable:_resolveStyles["default"].__setTestMode.bind(null,true)};}var _default=Radium;// ESM re-exports
	exports["default"]=_default;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=enhanceWithRadium;var _react=_interopRequireWildcard(__webpack_require__(10));var _propTypes=_interopRequireDefault(__webpack_require__(33));var _hoistNonReactStatics=_interopRequireDefault(__webpack_require__(41));var _resolveStyles2=_interopRequireDefault(__webpack_require__(94));var _getRadiumStyleState=_interopRequireDefault(__webpack_require__(147));var _context=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}newObj["default"]=obj;return newObj;}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var KEYS_TO_IGNORE_WHEN_COPYING_PROPERTIES=['arguments','callee','caller','length','name','prototype','type'];var RADIUM_PROTO;var RADIUM_METHODS;function copyProperties(source,target){Object.getOwnPropertyNames(source).forEach(function(key){if(KEYS_TO_IGNORE_WHEN_COPYING_PROPERTIES.indexOf(key)<0&&!target.hasOwnProperty(key)){var descriptor=Object.getOwnPropertyDescriptor(source,key);descriptor&&Object.defineProperty(target,key,descriptor);}});}// Handle scenarios of:
	// - Inherit from `React.Component` in any fashion
	//   See: https://github.com/FormidableLabs/radium/issues/738
	// - There's an explicit `render` field defined
	function isStateless(component){var proto=component.prototype||{};return!component.isReactComponent&&!proto.isReactComponent&&!component.render&&!proto.render;}// Check if value is a real ES class in Native / Node code.
	// See: https://stackoverflow.com/a/30760236
	function isNativeClass(component){return typeof component==='function'&&/^\s*class\s+/.test(component.toString());}// Handle es7 arrow functions on React class method names by detecting
	// and transfering the instance method to original class prototype.
	// (Using a copy of the class).
	// See: https://github.com/FormidableLabs/radium/issues/738
	function copyArrowFuncs(enhancedSelf,ComposedComponent){RADIUM_METHODS.forEach(function(name){var thisDesc=Object.getOwnPropertyDescriptor(enhancedSelf,name);var thisMethod=(thisDesc||{}).value;// Only care if have instance method.
	if(!thisMethod){return;}var radiumDesc=Object.getOwnPropertyDescriptor(RADIUM_PROTO,name);var radiumProtoMethod=(radiumDesc||{}).value;var superProtoMethod=ComposedComponent.prototype[name];// Allow transfer when:
	// 1. have an instance method
	// 2. the super class prototype doesn't have any method
	// 3. it is not already the radium prototype's
	if(!superProtoMethod&&thisMethod!==radiumProtoMethod){// Transfer dynamic render component to Component prototype (copy).
	thisDesc&&Object.defineProperty(ComposedComponent.prototype,name,thisDesc);// Remove instance property, leaving us to have a contrived
	// inheritance chain of (1) radium, (2) superclass.
	delete enhancedSelf[name];}});}function trimRadiumState(enhancer){if(enhancer._extraRadiumStateKeys&&enhancer._extraRadiumStateKeys.length>0){var trimmedRadiumState=enhancer._extraRadiumStateKeys.reduce(function(state,key){// eslint-disable-next-line no-unused-vars
	var extraStateKey=state[key],remainingState=_objectWithoutProperties(state,[key].map(_toPropertyKey));return remainingState;},(0,_getRadiumStyleState["default"])(enhancer));enhancer._lastRadiumState=trimmedRadiumState;enhancer.setState({_radiumStyleState:trimmedRadiumState});}}function cleanUpEnhancer(enhancer){var _radiumMouseUpListener=enhancer._radiumMouseUpListener,_radiumMediaQueryListenersByQuery=enhancer._radiumMediaQueryListenersByQuery;enhancer._radiumIsMounted=false;if(_radiumMouseUpListener){_radiumMouseUpListener.remove();}if(_radiumMediaQueryListenersByQuery){Object.keys(_radiumMediaQueryListenersByQuery).forEach(function(query){_radiumMediaQueryListenersByQuery[query].remove();},enhancer);}}function resolveConfig(propConfig,contextConfig,hocConfig){var config=propConfig||contextConfig||hocConfig;if(hocConfig&&config!==hocConfig){config=_objectSpread({},hocConfig,config);}return config;}function renderRadiumComponent(enhancer,renderedElement,resolvedConfig,propConfig){var _resolveStyles=(0,_resolveStyles2["default"])(enhancer,renderedElement,resolvedConfig),extraStateKeyMap=_resolveStyles.extraStateKeyMap,element=_resolveStyles.element;enhancer._extraRadiumStateKeys=Object.keys(extraStateKeyMap);if(propConfig){return _react["default"].createElement(_context.RadiumConfigContext.Provider,{value:propConfig},element);}return element;}function createEnhancedFunctionComponent(origComponent,config){var RadiumEnhancer=_react["default"].forwardRef(function(props,ref){var radiumConfig=props.radiumConfig,otherProps=_objectWithoutProperties(props,["radiumConfig"]);var radiumConfigContext=(0,_react.useContext)(_context.RadiumConfigContext);var styleKeeperContext=(0,_react.useContext)(_context.StyleKeeperContext);var _useState=(0,_react.useState)({}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var enhancerApi=(0,_react.useRef)({state:state,setState:setState,_radiumMediaQueryListenersByQuery:undefined,_radiumMouseUpListener:undefined,_radiumIsMounted:true,_lastRadiumState:undefined,_extraRadiumStateKeys:undefined,_radiumStyleKeeper:styleKeeperContext}).current;// result of useRef is never recreated and is designed to be mutable
	// we need to make sure the latest state is attached to it
	enhancerApi.state=state;(0,_react.useEffect)(function(){return function(){cleanUpEnhancer(enhancerApi);};},[enhancerApi]);var hasExtraStateKeys=enhancerApi._extraRadiumStateKeys&&enhancerApi._extraRadiumStateKeys.length>0;(0,_react.useEffect)(function(){trimRadiumState(enhancerApi);},[hasExtraStateKeys,enhancerApi]);var renderedElement=origComponent(otherProps,ref);var currentConfig=resolveConfig(radiumConfig,radiumConfigContext,config);return renderRadiumComponent(enhancerApi,renderedElement,currentConfig,radiumConfig);});RadiumEnhancer._isRadiumEnhanced=true;RadiumEnhancer.defaultProps=origComponent.defaultProps;return(0,_hoistNonReactStatics["default"])(RadiumEnhancer,origComponent);}function createEnhancedClassComponent(origComponent,ComposedComponent,config){var RadiumEnhancer=/*#__PURE__*/function(_ComposedComponent){_inherits(RadiumEnhancer,_ComposedComponent);// need to attempt to assign to this.state in case
	// super component is setting state on construction,
	// otherwise class properties reinitialize to undefined
	// need to assign the following methods to this.xxx as
	// tests attempt to set this on the original component
	function RadiumEnhancer(){var _this;_classCallCheck(this,RadiumEnhancer);_this=_possibleConstructorReturn(this,_getPrototypeOf(RadiumEnhancer).apply(this,arguments));_this.state=_this.state||{};_this._radiumStyleKeeper=_this.props.styleKeeperContext;_this._radiumMediaQueryListenersByQuery=_this._radiumMediaQueryListenersByQuery;_this._radiumMouseUpListener=_this._radiumMouseUpListener;_this._radiumIsMounted=true;_this._lastRadiumState=void 0;_this._extraRadiumStateKeys=void 0;_this.state._radiumStyleState={};var self=_assertThisInitialized(_this);// Handle es7 arrow functions on React class method
	copyArrowFuncs(self,ComposedComponent);return _this;}_createClass(RadiumEnhancer,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState,snapshot){if(_get(_getPrototypeOf(RadiumEnhancer.prototype),"componentDidUpdate",this)){_get(_getPrototypeOf(RadiumEnhancer.prototype),"componentDidUpdate",this).call(this,prevProps,prevState,snapshot);}trimRadiumState(this);}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(_get(_getPrototypeOf(RadiumEnhancer.prototype),"componentWillUnmount",this)){_get(_getPrototypeOf(RadiumEnhancer.prototype),"componentWillUnmount",this).call(this);}cleanUpEnhancer(this);}},{key:"render",value:function render(){var renderedElement=_get(_getPrototypeOf(RadiumEnhancer.prototype),"render",this).call(this);var currentConfig=resolveConfig(this.props.radiumConfig,this.props.radiumConfigContext,config);return renderRadiumComponent(this,renderedElement,currentConfig,this.props.radiumConfig);}}]);return RadiumEnhancer;}(ComposedComponent);// Lazy infer the method names of the Enhancer.
	RadiumEnhancer._isRadiumEnhanced=true;RADIUM_PROTO=RadiumEnhancer.prototype;RADIUM_METHODS=Object.getOwnPropertyNames(RADIUM_PROTO).filter(function(n){return n!=='constructor'&&typeof RADIUM_PROTO[n]==='function';});// Class inheritance uses Object.create and because of __proto__ issues
	// with IE <10 any static properties of the superclass aren't inherited and
	// so need to be manually populated.
	// See http://babeljs.io/docs/advanced/caveats/#classes-10-and-below-
	copyProperties(origComponent,RadiumEnhancer);if(process.env.NODE_ENV!=='production'){// This also fixes React Hot Loader by exposing the original components top
	// level prototype methods on the Radium enhanced prototype as discussed in
	// https://github.com/FormidableLabs/radium/issues/219.
	copyProperties(ComposedComponent.prototype,RadiumEnhancer.prototype);}// add Radium propTypes to enhanced component's propTypes
	if(RadiumEnhancer.propTypes&&RadiumEnhancer.propTypes.style){RadiumEnhancer.propTypes=_objectSpread({},RadiumEnhancer.propTypes,{style:_propTypes["default"].oneOfType([_propTypes["default"].array,_propTypes["default"].object])});}// copy display name to enhanced component
	RadiumEnhancer.displayName=origComponent.displayName||origComponent.name||'Component';return(0,_context.withRadiumContexts)(RadiumEnhancer);}function createComposedFromNativeClass(ComposedComponent){ComposedComponent=function(OrigComponent){function NewComponent(){// Use Reflect.construct to simulate 'new'
	var obj=Reflect.construct(OrigComponent,arguments,this.constructor);return obj;}// $FlowFixMe
	Reflect.setPrototypeOf(NewComponent.prototype,OrigComponent.prototype);// $FlowFixMe
	Reflect.setPrototypeOf(NewComponent,OrigComponent);return NewComponent;}(ComposedComponent);return ComposedComponent;}var ReactForwardRefSymbol=(0,_react.forwardRef)(function(){return null;}).$$typeof;function enhanceWithRadium(configOrComposedComponent){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(ReactForwardRefSymbol&&configOrComposedComponent.$$typeof===ReactForwardRefSymbol){return createEnhancedFunctionComponent(configOrComposedComponent.render,config);}if(typeof configOrComposedComponent!=='function'){return createFactoryFromConfig(config,configOrComposedComponent);}var origComponent=configOrComposedComponent;// Handle stateless components
	if(isStateless(origComponent)){return createEnhancedFunctionComponent(origComponent,config);}var _ComposedComponent2=origComponent;// Radium is transpiled in npm, so it isn't really using es6 classes at
	// runtime.  However, the user of Radium might be.  In this case we have
	// to maintain forward compatibility with native es classes.
	if(isNativeClass(_ComposedComponent2)){_ComposedComponent2=createComposedFromNativeClass(_ComposedComponent2);}// Shallow copy composed if still original (we may mutate later).
	if(_ComposedComponent2===origComponent){_ComposedComponent2=/*#__PURE__*/function(_ComposedComponent3){_inherits(ComposedComponent,_ComposedComponent3);function ComposedComponent(){_classCallCheck(this,ComposedComponent);return _possibleConstructorReturn(this,_getPrototypeOf(ComposedComponent).apply(this,arguments));}return ComposedComponent;}(_ComposedComponent2);}return createEnhancedClassComponent(origComponent,_ComposedComponent2,config);}function createFactoryFromConfig(config,configOrComposedComponent){var newConfig=_objectSpread({},config,configOrComposedComponent);return function(configOrComponent){return enhanceWithRadium(configOrComponent,newConfig);};}
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _appendImportantToEachValue=_interopRequireDefault(__webpack_require__(95));var _cssRuleSetToString=_interopRequireDefault(__webpack_require__(98));var _getState=_interopRequireDefault(__webpack_require__(144));var _getStateKey=_interopRequireDefault(__webpack_require__(146));var _cleanStateKey=_interopRequireDefault(__webpack_require__(145));var _getRadiumStyleState=_interopRequireDefault(__webpack_require__(147));var _hash=_interopRequireDefault(__webpack_require__(148));var _mergeStyles=__webpack_require__(149);var _plugins=_interopRequireDefault(__webpack_require__(150));var _exenv=_interopRequireDefault(__webpack_require__(112));var _react=_interopRequireDefault(__webpack_require__(10));var _styleKeeper=_interopRequireDefault(__webpack_require__(160));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}var DEFAULT_CONFIG={plugins:[_plugins["default"].mergeStyleArray,_plugins["default"].checkProps,_plugins["default"].resolveMediaQueries,_plugins["default"].resolveInteractionStyles,_plugins["default"].keyframes,_plugins["default"].visited,_plugins["default"].removeNestedStyles,_plugins["default"].prefix,_plugins["default"].checkProps]};// Gross
	var globalState={};// Only for use by tests
	var __isTestModeEnabled=false;// Declare early for recursive helpers.
	var _resolveStyles5=null;var _shouldResolveStyles=function _shouldResolveStyles(component){return component.type&&!component.type._isRadiumEnhanced;};var _resolveChildren=function _resolveChildren(_ref){var children=_ref.children,component=_ref.component,config=_ref.config,existingKeyMap=_ref.existingKeyMap,extraStateKeyMap=_ref.extraStateKeyMap;if(!children){return children;}var childrenType=_typeof(children);if(childrenType==='string'||childrenType==='number'){// Don't do anything with a single primitive child
	return children;}if(childrenType==='function'){// Wrap the function, resolving styles on the result
	return function(){var result=children.apply(this,arguments);if(_react["default"].isValidElement(result)){var _key=(0,_getStateKey["default"])(result);delete extraStateKeyMap[_key];var _resolveStyles=_resolveStyles5(component,result,config,existingKeyMap,true,extraStateKeyMap),element=_resolveStyles.element;return element;}return result;};}if(_react["default"].Children.count(children)===1&&children.type){// If a React Element is an only child, don't wrap it in an array for
	// React.Children.map() for React.Children.only() compatibility.
	var onlyChild=_react["default"].Children.only(children);var _key2=(0,_getStateKey["default"])(onlyChild);delete extraStateKeyMap[_key2];var _resolveStyles2=_resolveStyles5(component,onlyChild,config,existingKeyMap,true,extraStateKeyMap),element=_resolveStyles2.element;return element;}return _react["default"].Children.map(children,function(child){if(_react["default"].isValidElement(child)){var _key3=(0,_getStateKey["default"])(child);delete extraStateKeyMap[_key3];var _resolveStyles3=_resolveStyles5(component,child,config,existingKeyMap,true,extraStateKeyMap),_element=_resolveStyles3.element;return _element;}return child;});};// Recurse over props, just like children
	var _resolveProps=function _resolveProps(_ref2){var component=_ref2.component,config=_ref2.config,existingKeyMap=_ref2.existingKeyMap,props=_ref2.props,extraStateKeyMap=_ref2.extraStateKeyMap;var newProps=props;Object.keys(props).forEach(function(prop){// We already recurse over children above
	if(prop==='children'){return;}var propValue=props[prop];if(_react["default"].isValidElement(propValue)){var _key4=(0,_getStateKey["default"])(propValue);delete extraStateKeyMap[_key4];newProps=_objectSpread({},newProps);var _resolveStyles4=_resolveStyles5(component,propValue,config,existingKeyMap,true,extraStateKeyMap),element=_resolveStyles4.element;newProps[prop]=element;}});return newProps;};var _buildGetKey=function _buildGetKey(_ref3){var componentName=_ref3.componentName,existingKeyMap=_ref3.existingKeyMap,renderedElement=_ref3.renderedElement;// We need a unique key to correlate state changes due to user interaction
	// with the rendered element, so we know to apply the proper interactive
	// styles.
	var originalKey=(0,_getStateKey["default"])(renderedElement);var key=(0,_cleanStateKey["default"])(originalKey);var alreadyGotKey=false;var getKey=function getKey(){if(alreadyGotKey){return key;}alreadyGotKey=true;if(existingKeyMap[key]){var elementName;if(typeof renderedElement.type==='string'){elementName=renderedElement.type;}else if(renderedElement.type.constructor){elementName=renderedElement.type.constructor.displayName||renderedElement.type.constructor.name;}throw new Error('Radium requires each element with interactive styles to have a unique '+'key, set using either the ref or key prop. '+(originalKey?'Key "'+originalKey+'" is a duplicate.':'Multiple elements have no key specified.')+' '+'Component: "'+componentName+'". '+(elementName?'Element: "'+elementName+'".':''));}existingKeyMap[key]=true;return key;};return getKey;};var _setStyleState=function _setStyleState(component,key,stateKey,value){if(!component._radiumIsMounted){return;}var existing=(0,_getRadiumStyleState["default"])(component);var state={_radiumStyleState:_objectSpread({},existing)};state._radiumStyleState[key]=_objectSpread({},state._radiumStyleState[key]);state._radiumStyleState[key][stateKey]=value;component._lastRadiumState=state._radiumStyleState;component.setState(state);};var _runPlugins=function _runPlugins(_ref4){var component=_ref4.component,config=_ref4.config,existingKeyMap=_ref4.existingKeyMap,props=_ref4.props,renderedElement=_ref4.renderedElement;// Don't run plugins if renderedElement is not a simple ReactDOMElement or has
	// no style.
	if(!_react["default"].isValidElement(renderedElement)||typeof renderedElement.type!=='string'||!props.style){return props;}var newProps=props;var plugins=config.plugins||DEFAULT_CONFIG.plugins;var componentName=component.constructor.displayName||component.constructor.name;var getKey=_buildGetKey({renderedElement:renderedElement,existingKeyMap:existingKeyMap,componentName:componentName});var getComponentField=function getComponentField(key){return component[key];};var getGlobalState=function getGlobalState(key){return globalState[key];};var componentGetState=function componentGetState(stateKey,elementKey){return(0,_getState["default"])(component.state,elementKey||getKey(),stateKey);};var setState=function setState(stateKey,value,elementKey){return _setStyleState(component,elementKey||getKey(),stateKey,value);};var addCSS=function addCSS(css){var styleKeeper=component._radiumStyleKeeper;if(!styleKeeper){if(__isTestModeEnabled){return{remove:function remove(){}};}throw new Error('To use plugins requiring `addCSS` (e.g. keyframes, media queries), '+'please wrap your application in the StyleRoot component. Component '+'name: `'+componentName+'`.');}return styleKeeper.addCSS(css);};var newStyle=props.style;plugins.forEach(function(plugin){var result=plugin({ExecutionEnvironment:_exenv["default"],addCSS:addCSS,appendImportantToEachValue:_appendImportantToEachValue["default"],componentName:componentName,config:config,cssRuleSetToString:_cssRuleSetToString["default"],getComponentField:getComponentField,getGlobalState:getGlobalState,getState:componentGetState,hash:_hash["default"],mergeStyles:_mergeStyles.mergeStyles,props:newProps,setState:setState,isNestedStyle:_mergeStyles.isNestedStyle,style:newStyle})||{};newStyle=result.style||newStyle;newProps=result.props&&Object.keys(result.props).length?_objectSpread({},newProps,result.props):newProps;var newComponentFields=result.componentFields||{};Object.keys(newComponentFields).forEach(function(fieldName){component[fieldName]=newComponentFields[fieldName];});var newGlobalState=result.globalState||{};Object.keys(newGlobalState).forEach(function(key){globalState[key]=newGlobalState[key];});});if(newStyle!==props.style){newProps=_objectSpread({},newProps,{style:newStyle});}return newProps;};// Wrapper around React.cloneElement. To avoid processing the same element
	// twice, whenever we clone an element add a special prop to make sure we don't
	// process this element again.
	var _cloneElement=function _cloneElement(renderedElement,newProps,newChildren){// Only add flag if this is a normal DOM element
	if(typeof renderedElement.type==='string'){newProps=_objectSpread({},newProps,{'data-radium':true});}return _react["default"].cloneElement(renderedElement,newProps,newChildren);};//
	// The nucleus of Radium. resolveStyles is called on the rendered elements
	// before they are returned in render. It iterates over the elements and
	// children, rewriting props to add event handlers required to capture user
	// interactions (e.g. mouse over). It also replaces the style prop because it
	// adds in the various interaction styles (e.g. :hover).
	//
	/* eslint-disable max-params */_resolveStyles5=function resolveStyles(component,renderedElement){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:DEFAULT_CONFIG;var existingKeyMap=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var shouldCheckBeforeResolve=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var extraStateKeyMap=arguments.length>5?arguments[5]:undefined;// The extraStateKeyMap is for determining which keys should be erased from
	// the state (i.e. which child components are unmounted and should no longer
	// have a style state).
	if(!extraStateKeyMap){var state=(0,_getRadiumStyleState["default"])(component);extraStateKeyMap=Object.keys(state).reduce(function(acc,key){// 'main' is the auto-generated key when there is only one element with
	// interactive styles and if a custom key is not assigned. Because of
	// this, it is impossible to know which child is 'main', so we won't
	// count this key when generating our extraStateKeyMap.
	if(key!=='main'){acc[key]=true;}return acc;},{});}if(Array.isArray(renderedElement)&&!renderedElement.props){var elements=renderedElement.map(function(element){// element is in-use, so remove from the extraStateKeyMap
	if(extraStateKeyMap){var _key5=(0,_getStateKey["default"])(element);delete extraStateKeyMap[_key5];}// this element is an array of elements,
	// so return an array of elements with resolved styles
	return _resolveStyles5(component,element,config,existingKeyMap,shouldCheckBeforeResolve,extraStateKeyMap).element;});return{extraStateKeyMap:extraStateKeyMap,element:elements};}// ReactElement
	if(!renderedElement||// Bail if we've already processed this element. This ensures that only the
	// owner of an element processes that element, since the owner's render
	// function will be called first (which will always be the case, since you
	// can't know what else to render until you render the parent component).
	renderedElement.props&&renderedElement.props['data-radium']||// Bail if this element is a radium enhanced element, because if it is,
	// then it will take care of resolving its own styles.
	shouldCheckBeforeResolve&&!_shouldResolveStyles(renderedElement)){return{extraStateKeyMap:extraStateKeyMap,element:renderedElement};}var children=renderedElement.props.children;var newChildren=_resolveChildren({children:children,component:component,config:config,existingKeyMap:existingKeyMap,extraStateKeyMap:extraStateKeyMap});var newProps=_resolveProps({component:component,config:config,existingKeyMap:existingKeyMap,extraStateKeyMap:extraStateKeyMap,props:renderedElement.props});newProps=_runPlugins({component:component,config:config,existingKeyMap:existingKeyMap,props:newProps,renderedElement:renderedElement});// If nothing changed, don't bother cloning the element. Might be a bit
	// wasteful, as we add the sentinel to stop double-processing when we clone.
	// Assume benign double-processing is better than unneeded cloning.
	if(newChildren===children&&newProps===renderedElement.props){return{extraStateKeyMap:extraStateKeyMap,element:renderedElement};}var element=_cloneElement(renderedElement,newProps!==renderedElement.props?newProps:{},newChildren);return{extraStateKeyMap:extraStateKeyMap,element:element};};/* eslint-enable max-params */// Only for use by tests
	if(process.env.NODE_ENV!=='production'){_resolveStyles5.__clearStateForTests=function(){globalState={};};_resolveStyles5.__setTestMode=function(isEnabled){__isTestModeEnabled=isEnabled;};}var _default=_resolveStyles5;exports["default"]=_default;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=appendImportantToEachValue;var _appendPxIfNeeded=_interopRequireDefault(__webpack_require__(96));var _mapObject=_interopRequireDefault(__webpack_require__(97));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function appendImportantToEachValue(style){return(0,_mapObject["default"])(style,function(result,key){return(0,_appendPxIfNeeded["default"])(key,style[key])+' !important';});}

/***/ }),
/* 96 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=appendPxIfNeeded;// Copied from https://github.com/facebook/react/blob/
	// b87aabdfe1b7461e7331abb3601d9e6bb27544bc/
	// packages/react-dom/src/shared/CSSProperty.js
	var isUnitlessNumber={animationIterationCount:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,columns:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridArea:true,gridRow:true,gridRowEnd:true,gridRowSpan:true,gridRowStart:true,gridColumn:true,gridColumnEnd:true,gridColumnSpan:true,gridColumnStart:true,fontWeight:true,lineClamp:true,lineHeight:true,opacity:true,order:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,// SVG-related properties
	fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function appendPxIfNeeded(propertyName,value){var needsPxSuffix=!isUnitlessNumber[propertyName]&&typeof value==='number'&&value!==0;return needsPxSuffix?value+'px':value;}

/***/ }),
/* 97 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=mapObject;function mapObject(object,mapper){return Object.keys(object).reduce(function(result,key){result[key]=mapper(object[key],key);return result;},{});}

/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=cssRuleSetToString;var _appendPxIfNeeded=_interopRequireDefault(__webpack_require__(96));var _camelCasePropsToDashCase=_interopRequireDefault(__webpack_require__(99));var _mapObject=_interopRequireDefault(__webpack_require__(97));var _prefixer=__webpack_require__(100);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function createMarkupForStyles(style){return Object.keys(style).map(function(property){return property+': '+style[property]+';';}).join('\n');}function cssRuleSetToString(selector,rules,userAgent){if(!rules){return'';}var rulesWithPx=(0,_mapObject["default"])(rules,function(value,key){return(0,_appendPxIfNeeded["default"])(key,value);});var prefixedRules=(0,_prefixer.getPrefixedStyle)(rulesWithPx,userAgent);var cssPrefixedRules=(0,_camelCasePropsToDashCase["default"])(prefixedRules);var serializedRules=createMarkupForStyles(cssPrefixedRules);return selector+'{'+serializedRules+'}';}

/***/ }),
/* 99 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=exports.camelCaseToDashCase=void 0;var _camelCaseRegex=/([a-z])?([A-Z])/g;var _camelCaseReplacer=function _camelCaseReplacer(match,p1,p2){return(p1||'')+'-'+p2.toLowerCase();};var camelCaseToDashCase=function camelCaseToDashCase(s){return s.replace(_camelCaseRegex,_camelCaseReplacer);};exports.camelCaseToDashCase=camelCaseToDashCase;var camelCasePropsToDashCase=function camelCasePropsToDashCase(prefixedStyle){// Since prefix is expected to work on inline style objects, we must
	// translate the keys to dash case for rendering to CSS.
	return Object.keys(prefixedStyle).reduce(function(result,key){var dashCaseKey=camelCaseToDashCase(key);// Fix IE vendor prefix
	if(/^ms-/.test(dashCaseKey)){dashCaseKey="-".concat(dashCaseKey);}result[dashCaseKey]=prefixedStyle[key];return result;},{});};var _default=camelCasePropsToDashCase;exports["default"]=_default;

/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global, process) {"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports.getPrefixedKeyframes=getPrefixedKeyframes;exports.getPrefixedStyle=getPrefixedStyle;var _createPrefixer=_interopRequireDefault(__webpack_require__(101));var _createPrefixer2=_interopRequireDefault(__webpack_require__(107));var _exenv=_interopRequireDefault(__webpack_require__(112));var _static=_interopRequireDefault(__webpack_require__(114));var _dynamic=_interopRequireDefault(__webpack_require__(130));var _camelCasePropsToDashCase=__webpack_require__(99);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}var prefixAll=(0,_createPrefixer["default"])(_static["default"]);var InlineStylePrefixer=(0,_createPrefixer2["default"])(_dynamic["default"],prefixAll);function transformValues(style){return Object.keys(style).reduce(function(newStyle,key){var value=style[key];if(Array.isArray(value)){value=value.join(';'+key+':');}else if(value&&_typeof(value)==='object'&&typeof value.toString==='function'){value=value.toString();}newStyle[key]=value;return newStyle;},{});}// Flatten prefixed values that are arrays to strings.
	//
	// We get prefixed styles back in the form of:
	// - `display: "flex"` OR
	// - `display: "-webkit-flex"` OR
	// - `display: [/* ... */, "-webkit-flex", "flex"]
	//
	// The last form is problematic for eventual use in the browser and server
	// render. More confusingly, we have to do **different** things on the
	// browser and server (noted inline below).
	//
	// https://github.com/FormidableLabs/radium/issues/958
	function flattenStyleValues(style){return Object.keys(style).reduce(function(newStyle,key){var val=style[key];if(Array.isArray(val)){if(_exenv["default"].canUseDOM){// For the **browser**, when faced with multiple values, we just take
	// the **last** one, which is the original passed in value before
	// prefixing. This _should_ work, because `inline-style-prefixer`
	// we're just passing through what would happen without ISP.
	val=val[val.length-1].toString();}else{// For the **server**, we just concatenate things together and convert
	// the style object values into a hacked-up string of like `display:
	// "-webkit-flex;display:flex"` that will SSR render correctly to like
	// `"display:-webkit-flex;display:flex"` but would otherwise be
	// totally invalid values.
	// We convert keys to dash-case only for the serialize values and
	// leave the real key camel-cased so it's as expected to React and
	// other parts of the processing chain.
	val=val.join(";".concat((0,_camelCasePropsToDashCase.camelCaseToDashCase)(key),":"));}}newStyle[key]=val;return newStyle;},{});}var _hasWarnedAboutUserAgent=false;var _lastUserAgent;var _cachedPrefixer;function getPrefixer(userAgent){var actualUserAgent=userAgent||global&&global.navigator&&global.navigator.userAgent;if(process.env.NODE_ENV!=='production'){if(!actualUserAgent&&!_hasWarnedAboutUserAgent){/* eslint-disable no-console */console.warn('Radium: userAgent should be supplied for server-side rendering. See '+'https://github.com/FormidableLabs/radium/tree/master/docs/api#radium '+'for more information.');/* eslint-enable no-console */_hasWarnedAboutUserAgent=true;}}if(process.env.NODE_ENV==='test'||!_cachedPrefixer||actualUserAgent!==_lastUserAgent){if(actualUserAgent==='all'){_cachedPrefixer={prefix:prefixAll,prefixedKeyframes:'keyframes'};}else{_cachedPrefixer=new InlineStylePrefixer({userAgent:actualUserAgent});}_lastUserAgent=actualUserAgent;}return _cachedPrefixer;}function getPrefixedKeyframes(userAgent){return getPrefixer(userAgent).prefixedKeyframes||'keyframes';}// Returns a new style object with vendor prefixes added to property names and
	// values.
	function getPrefixedStyle(style,userAgent){var styleWithFallbacks=transformValues(style);var prefixer=getPrefixer(userAgent);var prefixedStyle=prefixer.prefix(styleWithFallbacks);var flattenedStyle=flattenStyleValues(prefixedStyle);return flattenedStyle;}
	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(6)))

/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=createPrefixer;var _prefixProperty=__webpack_require__(102);var _prefixProperty2=_interopRequireDefault(_prefixProperty);var _prefixValue=__webpack_require__(104);var _prefixValue2=_interopRequireDefault(_prefixValue);var _addNewValuesOnly=__webpack_require__(105);var _addNewValuesOnly2=_interopRequireDefault(_addNewValuesOnly);var _isObject=__webpack_require__(106);var _isObject2=_interopRequireDefault(_isObject);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function createPrefixer(_ref){var prefixMap=_ref.prefixMap,plugins=_ref.plugins;function prefixAll(style){for(var property in style){var value=style[property];// handle nested objects
	if((0,_isObject2.default)(value)){style[property]=prefixAll(value);// handle array values
	}else if(Array.isArray(value)){var combinedValue=[];for(var i=0,len=value.length;i<len;++i){var processedValue=(0,_prefixValue2.default)(plugins,property,value[i],style,prefixMap);(0,_addNewValuesOnly2.default)(combinedValue,processedValue||value[i]);}// only modify the value if it was touched
	// by any plugin to prevent unnecessary mutations
	if(combinedValue.length>0){style[property]=combinedValue;}}else{var _processedValue=(0,_prefixValue2.default)(plugins,property,value,style,prefixMap);// only modify the value if it was touched
	// by any plugin to prevent unnecessary mutations
	if(_processedValue){style[property]=_processedValue;}style=(0,_prefixProperty2.default)(prefixMap,property,style);}}return style;}return prefixAll;}module.exports=exports['default'];

/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=prefixProperty;var _capitalizeString=__webpack_require__(103);var _capitalizeString2=_interopRequireDefault(_capitalizeString);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function prefixProperty(prefixProperties,property,style){if(prefixProperties.hasOwnProperty(property)){var newStyle={};var requiredPrefixes=prefixProperties[property];var capitalizedProperty=(0,_capitalizeString2.default)(property);var keys=Object.keys(style);for(var i=0;i<keys.length;i++){var styleProperty=keys[i];if(styleProperty===property){for(var j=0;j<requiredPrefixes.length;j++){newStyle[requiredPrefixes[j]+capitalizedProperty]=style[property];}}newStyle[styleProperty]=style[styleProperty];}return newStyle;}return style;}module.exports=exports['default'];

/***/ }),
/* 103 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=capitalizeString;function capitalizeString(str){return str.charAt(0).toUpperCase()+str.slice(1);}module.exports=exports["default"];

/***/ }),
/* 104 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=prefixValue;function prefixValue(plugins,property,value,style,metaData){for(var i=0,len=plugins.length;i<len;++i){var processedValue=plugins[i](property,value,style,metaData);// we can stop processing if a value is returned
	// as all plugin criteria are unique
	if(processedValue){return processedValue;}}}module.exports=exports["default"];

/***/ }),
/* 105 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=addNewValuesOnly;function addIfNew(list,value){if(list.indexOf(value)===-1){list.push(value);}}function addNewValuesOnly(list,values){if(Array.isArray(values)){for(var i=0,len=values.length;i<len;++i){addIfNew(list,values[i]);}}else{addIfNew(list,values);}}module.exports=exports["default"];

/***/ }),
/* 106 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=isObject;function isObject(value){return value instanceof Object&&!Array.isArray(value);}module.exports=exports["default"];

/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();exports.default=createPrefixer;var _getBrowserInformation=__webpack_require__(108);var _getBrowserInformation2=_interopRequireDefault(_getBrowserInformation);var _getPrefixedKeyframes=__webpack_require__(111);var _getPrefixedKeyframes2=_interopRequireDefault(_getPrefixedKeyframes);var _capitalizeString=__webpack_require__(103);var _capitalizeString2=_interopRequireDefault(_capitalizeString);var _addNewValuesOnly=__webpack_require__(105);var _addNewValuesOnly2=_interopRequireDefault(_addNewValuesOnly);var _isObject=__webpack_require__(106);var _isObject2=_interopRequireDefault(_isObject);var _prefixValue=__webpack_require__(104);var _prefixValue2=_interopRequireDefault(_prefixValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function createPrefixer(_ref){var prefixMap=_ref.prefixMap,plugins=_ref.plugins;var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(style){return style;};return function(){/**
	     * Instantiante a new prefixer
	     * @param {string} userAgent - userAgent to gather prefix information according to caniuse.com
	     * @param {string} keepUnprefixed - keeps unprefixed properties and values
	     */function Prefixer(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Prefixer);var defaultUserAgent=typeof navigator!=='undefined'?navigator.userAgent:undefined;this._userAgent=options.userAgent||defaultUserAgent;this._keepUnprefixed=options.keepUnprefixed||false;if(this._userAgent){this._browserInfo=(0,_getBrowserInformation2.default)(this._userAgent);}// Checks if the userAgent was resolved correctly
	if(this._browserInfo&&this._browserInfo.cssPrefix){this.prefixedKeyframes=(0,_getPrefixedKeyframes2.default)(this._browserInfo.browserName,this._browserInfo.browserVersion,this._browserInfo.cssPrefix);}else{this._useFallback=true;return false;}var prefixData=this._browserInfo.browserName&&prefixMap[this._browserInfo.browserName];if(prefixData){this._requiresPrefix={};for(var property in prefixData){if(prefixData[property]>=this._browserInfo.browserVersion){this._requiresPrefix[property]=true;}}this._hasPropsRequiringPrefix=Object.keys(this._requiresPrefix).length>0;}else{this._useFallback=true;}this._metaData={browserVersion:this._browserInfo.browserVersion,browserName:this._browserInfo.browserName,cssPrefix:this._browserInfo.cssPrefix,jsPrefix:this._browserInfo.jsPrefix,keepUnprefixed:this._keepUnprefixed,requiresPrefix:this._requiresPrefix};}_createClass(Prefixer,[{key:'prefix',value:function prefix(style){// use static prefixer as fallback if userAgent can not be resolved
	if(this._useFallback){return fallback(style);}// only add prefixes if needed
	if(!this._hasPropsRequiringPrefix){return style;}return this._prefixStyle(style);}},{key:'_prefixStyle',value:function _prefixStyle(style){for(var property in style){var value=style[property];// handle nested objects
	if((0,_isObject2.default)(value)){style[property]=this.prefix(value);// handle array values
	}else if(Array.isArray(value)){var combinedValue=[];for(var i=0,len=value.length;i<len;++i){var processedValue=(0,_prefixValue2.default)(plugins,property,value[i],style,this._metaData);(0,_addNewValuesOnly2.default)(combinedValue,processedValue||value[i]);}// only modify the value if it was touched
	// by any plugin to prevent unnecessary mutations
	if(combinedValue.length>0){style[property]=combinedValue;}}else{var _processedValue=(0,_prefixValue2.default)(plugins,property,value,style,this._metaData);// only modify the value if it was touched
	// by any plugin to prevent unnecessary mutations
	if(_processedValue){style[property]=_processedValue;}// add prefixes to properties
	if(this._requiresPrefix.hasOwnProperty(property)){style[this._browserInfo.jsPrefix+(0,_capitalizeString2.default)(property)]=value;if(!this._keepUnprefixed){delete style[property];}}}}return style;}/**
	       * Returns a prefixed version of the style object using all vendor prefixes
	       * @param {Object} styles - Style object that gets prefixed properties added
	       * @returns {Object} - Style object with prefixed properties and values
	       */}],[{key:'prefixAll',value:function prefixAll(styles){return fallback(styles);}}]);return Prefixer;}();}module.exports=exports['default'];

/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=getBrowserInformation;var _bowser=__webpack_require__(109);var _bowser2=_interopRequireDefault(_bowser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var prefixByBrowser={chrome:'Webkit',safari:'Webkit',ios:'Webkit',android:'Webkit',phantom:'Webkit',opera:'Webkit',webos:'Webkit',blackberry:'Webkit',bada:'Webkit',tizen:'Webkit',chromium:'Webkit',vivaldi:'Webkit',firefox:'Moz',seamoney:'Moz',sailfish:'Moz',msie:'ms',msedge:'ms'};var browserByCanIuseAlias={chrome:'chrome',chromium:'chrome',safari:'safari',firfox:'firefox',msedge:'edge',opera:'opera',vivaldi:'opera',msie:'ie'};function getBrowserName(browserInfo){if(browserInfo.firefox){return'firefox';}if(browserInfo.mobile||browserInfo.tablet){if(browserInfo.ios){return'ios_saf';}else if(browserInfo.android){return'android';}else if(browserInfo.opera){return'op_mini';}}for(var browser in browserByCanIuseAlias){if(browserInfo.hasOwnProperty(browser)){return browserByCanIuseAlias[browser];}}}/**
	 * Uses bowser to get default browser browserInformation such as version and name
	 * Evaluates bowser browserInfo and adds vendorPrefix browserInformation
	 * @param {string} userAgent - userAgent that gets evaluated
	 */function getBrowserInformation(userAgent){var browserInfo=_bowser2.default._detect(userAgent);if(browserInfo.yandexbrowser){browserInfo=_bowser2.default._detect(userAgent.replace(/YaBrowser\/[0-9.]*/,''));}for(var browser in prefixByBrowser){if(browserInfo.hasOwnProperty(browser)){var prefix=prefixByBrowser[browser];browserInfo.jsPrefix=prefix;browserInfo.cssPrefix='-'+prefix.toLowerCase()+'-';break;}}browserInfo.browserName=getBrowserName(browserInfo);// For cordova IOS 8 the version is missing, set truncated osversion to prevent NaN
	if(browserInfo.version){browserInfo.browserVersion=parseFloat(browserInfo.version);}else{browserInfo.browserVersion=parseInt(parseFloat(browserInfo.osversion),10);}browserInfo.osVersion=parseFloat(browserInfo.osversion);// iOS forces all browsers to use Safari under the hood
	// as the Safari version seems to match the iOS version
	// we just explicitely use the osversion instead
	// https://github.com/rofrischmann/inline-style-prefixer/issues/72
	if(browserInfo.browserName==='ios_saf'&&browserInfo.browserVersion>browserInfo.osVersion){browserInfo.browserVersion=browserInfo.osVersion;}// seperate native android chrome
	// https://github.com/rofrischmann/inline-style-prefixer/issues/45
	if(browserInfo.browserName==='android'&&browserInfo.chrome&&browserInfo.browserVersion>37){browserInfo.browserName='and_chr';}// For android < 4.4 we want to check the osversion
	// not the chrome version, see issue #26
	// https://github.com/rofrischmann/inline-style-prefixer/issues/26
	if(browserInfo.browserName==='android'&&browserInfo.osVersion<5){browserInfo.browserVersion=browserInfo.osVersion;}// Samsung browser are basically build on Chrome > 44
	// https://github.com/rofrischmann/inline-style-prefixer/issues/102
	if(browserInfo.browserName==='android'&&browserInfo.samsungBrowser){browserInfo.browserName='and_chr';browserInfo.browserVersion=44;}return browserInfo;}module.exports=exports['default'];

/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';/*!
	 * Bowser - a browser detector
	 * https://github.com/ded/bowser
	 * MIT License | (c) Dustin Diaz 2015
	 */!function(root,name,definition){if(typeof module!='undefined'&&module.exports)module.exports=definition();else if(true)__webpack_require__(110)(name,definition);else root[name]=definition();}(undefined,'bowser',function(){/**
	    * See useragents.js for examples of navigator.userAgent
	    */var t=true;function detect(ua){function getFirstMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[1]||'';}function getSecondMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[2]||'';}var iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),likeAndroid=/like android/i.test(ua),android=!likeAndroid&&/android/i.test(ua),nexusMobile=/nexus\s*[0-6]\s*/i.test(ua),nexusTablet=!nexusMobile&&/nexus\s*[0-9]+/i.test(ua),chromeos=/CrOS/.test(ua),silk=/silk/i.test(ua),sailfish=/sailfish/i.test(ua),tizen=/tizen/i.test(ua),webos=/(web|hpw)os/i.test(ua),windowsphone=/windows phone/i.test(ua),samsungBrowser=/SamsungBrowser/i.test(ua),windows=!windowsphone&&/windows/i.test(ua),mac=!iosdevice&&!silk&&/macintosh/i.test(ua),linux=!android&&!sailfish&&!tizen&&!webos&&/linux/i.test(ua),edgeVersion=getSecondMatch(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua)&&!/tablet pc/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),xbox=/xbox/i.test(ua),result;if(/opera/i.test(ua)){//  an old Opera
	result={name:'Opera',opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)};}else if(/opr\/|opios/i.test(ua)){// a new Opera
	result={name:'Opera',opera:t,version:getFirstMatch(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||versionIdentifier};}else if(/SamsungBrowser/i.test(ua)){result={name:'Samsung Internet for Android',samsungBrowser:t,version:versionIdentifier||getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)};}else if(/coast/i.test(ua)){result={name:'Opera Coast',coast:t,version:versionIdentifier||getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)};}else if(/yabrowser/i.test(ua)){result={name:'Yandex Browser',yandexbrowser:t,version:versionIdentifier||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};}else if(/ucbrowser/i.test(ua)){result={name:'UC Browser',ucbrowser:t,version:getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)};}else if(/mxios/i.test(ua)){result={name:'Maxthon',maxthon:t,version:getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)};}else if(/epiphany/i.test(ua)){result={name:'Epiphany',epiphany:t,version:getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)};}else if(/puffin/i.test(ua)){result={name:'Puffin',puffin:t,version:getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)};}else if(/sleipnir/i.test(ua)){result={name:'Sleipnir',sleipnir:t,version:getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)};}else if(/k-meleon/i.test(ua)){result={name:'K-Meleon',kMeleon:t,version:getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)};}else if(windowsphone){result={name:'Windows Phone',osname:'Windows Phone',windowsphone:t};if(edgeVersion){result.msedge=t;result.version=edgeVersion;}else{result.msie=t;result.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i);}}else if(/msie|trident/i.test(ua)){result={name:'Internet Explorer',msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)};}else if(chromeos){result={name:'Chrome',osname:'Chrome OS',chromeos:t,chromeBook:t,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};}else if(/edg([ea]|ios)/i.test(ua)){result={name:'Microsoft Edge',msedge:t,version:edgeVersion};}else if(/vivaldi/i.test(ua)){result={name:'Vivaldi',vivaldi:t,version:getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i)||versionIdentifier};}else if(sailfish){result={name:'Sailfish',osname:'Sailfish OS',sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};}else if(/seamonkey\//i.test(ua)){result={name:'SeaMonkey',seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)};}else if(/firefox|iceweasel|fxios/i.test(ua)){result={name:'Firefox',firefox:t,version:getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)){result.firefoxos=t;result.osname='Firefox OS';}}else if(silk){result={name:'Amazon Silk',silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)};}else if(/phantom/i.test(ua)){result={name:'PhantomJS',phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)};}else if(/slimerjs/i.test(ua)){result={name:'SlimerJS',slimer:t,version:getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)};}else if(/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua)){result={name:'BlackBerry',osname:'BlackBerry OS',blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};}else if(webos){result={name:'WebOS',osname:'WebOS',webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(ua)&&(result.touchpad=t);}else if(/bada/i.test(ua)){result={name:'Bada',osname:'Bada',bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)};}else if(tizen){result={name:'Tizen',osname:'Tizen',tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier};}else if(/qupzilla/i.test(ua)){result={name:'QupZilla',qupzilla:t,version:getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||versionIdentifier};}else if(/chromium/i.test(ua)){result={name:'Chromium',chromium:t,version:getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||versionIdentifier};}else if(/chrome|crios|crmo/i.test(ua)){result={name:'Chrome',chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};}else if(android){result={name:'Android',version:versionIdentifier};}else if(/safari|applewebkit/i.test(ua)){result={name:'Safari',safari:t};if(versionIdentifier){result.version=versionIdentifier;}}else if(iosdevice){result={name:iosdevice=='iphone'?'iPhone':iosdevice=='ipad'?'iPad':'iPod'// WTF: version is not part of user agent in web apps
	};if(versionIdentifier){result.version=versionIdentifier;}}else if(/googlebot/i.test(ua)){result={name:'Googlebot',googlebot:t,version:getFirstMatch(/googlebot\/(\d+(\.\d+))/i)||versionIdentifier};}else{result={name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)};}// set webkit or gecko flag for browsers based on these engines
	if(!result.msedge&&/(apple)?webkit/i.test(ua)){if(/(apple)?webkit\/537\.36/i.test(ua)){result.name=result.name||"Blink";result.blink=t;}else{result.name=result.name||"Webkit";result.webkit=t;}if(!result.version&&versionIdentifier){result.version=versionIdentifier;}}else if(!result.opera&&/gecko\//i.test(ua)){result.name=result.name||"Gecko";result.gecko=t;result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i);}// set OS flags for platforms that have multiple browsers
	if(!result.windowsphone&&(android||result.silk)){result.android=t;result.osname='Android';}else if(!result.windowsphone&&iosdevice){result[iosdevice]=t;result.ios=t;result.osname='iOS';}else if(mac){result.mac=t;result.osname='macOS';}else if(xbox){result.xbox=t;result.osname='Xbox';}else if(windows){result.windows=t;result.osname='Windows';}else if(linux){result.linux=t;result.osname='Linux';}function getWindowsVersion(s){switch(s){case'NT':return'NT';case'XP':return'XP';case'NT 5.0':return'2000';case'NT 5.1':return'XP';case'NT 5.2':return'2003';case'NT 6.0':return'Vista';case'NT 6.1':return'7';case'NT 6.2':return'8';case'NT 6.3':return'8.1';case'NT 10.0':return'10';default:return undefined;}}// OS version extraction
	var osVersion='';if(result.windows){osVersion=getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i));}else if(result.windowsphone){osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);}else if(result.mac){osVersion=getFirstMatch(/Mac OS X (\d+([_\.\s]\d+)*)/i);osVersion=osVersion.replace(/[_\s]/g,'.');}else if(iosdevice){osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);osVersion=osVersion.replace(/[_\s]/g,'.');}else if(android){osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i);}else if(result.webos){osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);}else if(result.blackberry){osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i);}else if(result.bada){osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i);}else if(result.tizen){osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i);}if(osVersion){result.osversion=osVersion;}// device type extraction
	var osMajorVersion=!result.windows&&osVersion.split('.')[0];if(tablet||nexusTablet||iosdevice=='ipad'||android&&(osMajorVersion==3||osMajorVersion>=4&&!mobile)||result.silk){result.tablet=t;}else if(mobile||iosdevice=='iphone'||iosdevice=='ipod'||android||nexusMobile||result.blackberry||result.webos||result.bada){result.mobile=t;}// Graded Browser Support
	// http://developer.yahoo.com/yui/articles/gbs
	if(result.msedge||result.msie&&result.version>=10||result.yandexbrowser&&result.version>=15||result.vivaldi&&result.version>=1.0||result.chrome&&result.version>=20||result.samsungBrowser&&result.version>=4||result.firefox&&result.version>=20.0||result.safari&&result.version>=6||result.opera&&result.version>=10.0||result.ios&&result.osversion&&result.osversion.split(".")[0]>=6||result.blackberry&&result.version>=10.1||result.chromium&&result.version>=20){result.a=t;}else if(result.msie&&result.version<10||result.chrome&&result.version<20||result.firefox&&result.version<20.0||result.safari&&result.version<6||result.opera&&result.version<10.0||result.ios&&result.osversion&&result.osversion.split(".")[0]<6||result.chromium&&result.version<20){result.c=t;}else result.x=t;return result;}var bowser=detect(typeof navigator!=='undefined'?navigator.userAgent||'':'');bowser.test=function(browserList){for(var i=0;i<browserList.length;++i){var browserItem=browserList[i];if(typeof browserItem==='string'){if(browserItem in bowser){return true;}}}return false;};/**
	   * Get version precisions count
	   *
	   * @example
	   *   getVersionPrecision("1.10.3") // 3
	   *
	   * @param  {string} version
	   * @return {number}
	   */function getVersionPrecision(version){return version.split(".").length;}/**
	   * Array::map polyfill
	   *
	   * @param  {Array} arr
	   * @param  {Function} iterator
	   * @return {Array}
	   */function map(arr,iterator){var result=[],i;if(Array.prototype.map){return Array.prototype.map.call(arr,iterator);}for(i=0;i<arr.length;i++){result.push(iterator(arr[i]));}return result;}/**
	   * Calculate browser version weight
	   *
	   * @example
	   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1
	   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1
	   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0
	   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1
	   *
	   * @param  {Array<String>} versions versions to compare
	   * @return {Number} comparison result
	   */function compareVersions(versions){// 1) get common precision for both versions, for example for "10.0" and "9" it should be 2
	var precision=Math.max(getVersionPrecision(versions[0]),getVersionPrecision(versions[1]));var chunks=map(versions,function(version){var delta=precision-getVersionPrecision(version);// 2) "9" -> "9.0" (for precision = 2)
	version=version+new Array(delta+1).join(".0");// 3) "9.0" -> ["000000000"", "000000009"]
	return map(version.split("."),function(chunk){return new Array(20-chunk.length).join("0")+chunk;}).reverse();});// iterate in reverse order by reversed chunks array
	while(--precision>=0){// 4) compare: "000000009" > "000000010" = false (but "9" > "10" = true)
	if(chunks[0][precision]>chunks[1][precision]){return 1;}else if(chunks[0][precision]===chunks[1][precision]){if(precision===0){// all version chunks are same
	return 0;}}else{return-1;}}}/**
	   * Check if browser is unsupported
	   *
	   * @example
	   *   bowser.isUnsupportedBrowser({
	   *     msie: "10",
	   *     firefox: "23",
	   *     chrome: "29",
	   *     safari: "5.1",
	   *     opera: "16",
	   *     phantom: "534"
	   *   });
	   *
	   * @param  {Object}  minVersions map of minimal version to browser
	   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map
	   * @param  {String}  [ua] user agent string
	   * @return {Boolean}
	   */function isUnsupportedBrowser(minVersions,strictMode,ua){var _bowser=bowser;// make strictMode param optional with ua param usage
	if(typeof strictMode==='string'){ua=strictMode;strictMode=void 0;}if(strictMode===void 0){strictMode=false;}if(ua){_bowser=detect(ua);}var version=""+_bowser.version;for(var browser in minVersions){if(minVersions.hasOwnProperty(browser)){if(_bowser[browser]){if(typeof minVersions[browser]!=='string'){throw new Error('Browser version in the minVersion map should be a string: '+browser+': '+String(minVersions));}// browser version and min supported version.
	return compareVersions([version,minVersions[browser]])<0;}}}return strictMode;// not found
	}/**
	   * Check if browser is supported
	   *
	   * @param  {Object} minVersions map of minimal version to browser
	   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map
	   * @param  {String}  [ua] user agent string
	   * @return {Boolean}
	   */function check(minVersions,strictMode,ua){return!isUnsupportedBrowser(minVersions,strictMode,ua);}bowser.isUnsupportedBrowser=isUnsupportedBrowser;bowser.compareVersions=compareVersions;bowser.check=check;/*
	   * Set our detect method to the main bowser object so we can
	   * reuse it to test other user agents.
	   * This is needed to implement future tests.
	   */bowser._detect=detect;/*
	   * Set our detect public method to the main bowser object
	   * This is needed to implement bowser in server side
	   */bowser.detect=detect;return bowser;});

/***/ }),
/* 110 */
/***/ (function(module, exports) {

	module.exports = function() { throw new Error("define cannot be used indirect"); };


/***/ }),
/* 111 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=getPrefixedKeyframes;function getPrefixedKeyframes(browserName,browserVersion,cssPrefix){var prefixedKeyframes='keyframes';if(browserName==='chrome'&&browserVersion<43||(browserName==='safari'||browserName==='ios_saf')&&browserVersion<9||browserName==='opera'&&browserVersion<30||browserName==='android'&&browserVersion<=4.4||browserName==='and_uc'){return cssPrefix+prefixedKeyframes;}return prefixedKeyframes;}module.exports=exports['default'];

/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_RESULT__;'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/*!
	  Copyright (c) 2015 Jed Watson.
	  Based on code that is Copyright 2013-2015, Facebook, Inc.
	  All rights reserved.
	*//* global define */(function(){'use strict';var canUseDOM=!!(typeof window!=='undefined'&&window.document&&window.document.createElement);var ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:typeof Worker!=='undefined',canUseEventListeners:canUseDOM&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM&&!!window.screen};if("function"==='function'&&_typeof(__webpack_require__(113))==='object'&&__webpack_require__(113)){!(__WEBPACK_AMD_DEFINE_RESULT__ = function(){return ExecutionEnvironment;}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof module!=='undefined'&&module.exports){module.exports=ExecutionEnvironment;}else{window.ExecutionEnvironment=ExecutionEnvironment;}})();

/***/ }),
/* 113 */
/***/ (function(module, exports) {

	/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;

	/* WEBPACK VAR INJECTION */}.call(exports, {}))

/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _calc=_interopRequireDefault(__webpack_require__(115));var _crossFade=_interopRequireDefault(__webpack_require__(117));var _cursor=_interopRequireDefault(__webpack_require__(118));var _filter=_interopRequireDefault(__webpack_require__(119));var _flex=_interopRequireDefault(__webpack_require__(120));var _flexboxIE=_interopRequireDefault(__webpack_require__(121));var _flexboxOld=_interopRequireDefault(__webpack_require__(122));var _gradient=_interopRequireDefault(__webpack_require__(123));var _imageSet=_interopRequireDefault(__webpack_require__(124));var _position=_interopRequireDefault(__webpack_require__(125));var _sizing=_interopRequireDefault(__webpack_require__(126));var _transition=_interopRequireDefault(__webpack_require__(127));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var w=['Webkit'];var m=['Moz'];var ms=['ms'];var wm=['Webkit','Moz'];var wms=['Webkit','ms'];var wmms=['Webkit','Moz','ms'];var _default={plugins:[_calc["default"],_crossFade["default"],_cursor["default"],_filter["default"],_flex["default"],_flexboxIE["default"],_flexboxOld["default"],_gradient["default"],_imageSet["default"],_position["default"],_sizing["default"],_transition["default"]],prefixMap:{transform:wms,transformOrigin:wms,transformOriginX:wms,transformOriginY:wms,backfaceVisibility:w,perspective:w,perspectiveOrigin:w,transformStyle:w,transformOriginZ:w,animation:w,animationDelay:w,animationDirection:w,animationFillMode:w,animationDuration:w,animationIterationCount:w,animationName:w,animationPlayState:w,animationTimingFunction:w,appearance:wm,userSelect:wmms,fontKerning:w,textEmphasisPosition:w,textEmphasis:w,textEmphasisStyle:w,textEmphasisColor:w,boxDecorationBreak:w,clipPath:w,maskImage:w,maskMode:w,maskRepeat:w,maskPosition:w,maskClip:w,maskOrigin:w,maskSize:w,maskComposite:w,mask:w,maskBorderSource:w,maskBorderMode:w,maskBorderSlice:w,maskBorderWidth:w,maskBorderOutset:w,maskBorderRepeat:w,maskBorder:w,maskType:w,textDecorationStyle:wm,textDecorationSkip:wm,textDecorationLine:wm,textDecorationColor:wm,filter:w,fontFeatureSettings:wm,breakAfter:wmms,breakBefore:wmms,breakInside:wmms,columnCount:wm,columnFill:wm,columnGap:wm,columnRule:wm,columnRuleColor:wm,columnRuleStyle:wm,columnRuleWidth:wm,columns:wm,columnSpan:wm,columnWidth:wm,writingMode:wms,flex:wms,flexBasis:w,flexDirection:wms,flexGrow:w,flexFlow:wms,flexShrink:w,flexWrap:wms,alignContent:w,alignItems:w,alignSelf:w,justifyContent:w,order:w,transitionDelay:w,transitionDuration:w,transitionProperty:w,transitionTimingFunction:w,backdropFilter:w,scrollSnapType:wms,scrollSnapPointsX:wms,scrollSnapPointsY:wms,scrollSnapDestination:wms,scrollSnapCoordinate:wms,shapeImageThreshold:w,shapeImageMargin:w,shapeImageOutside:w,hyphens:wmms,flowInto:wms,flowFrom:wms,regionFragment:wms,boxSizing:m,textAlignLast:m,tabSize:m,wrapFlow:ms,wrapThrough:ms,wrapMargin:ms,touchAction:ms,gridTemplateColumns:ms,gridTemplateRows:ms,gridTemplateAreas:ms,gridTemplate:ms,gridAutoColumns:ms,gridAutoRows:ms,gridAutoFlow:ms,grid:ms,gridRowStart:ms,gridColumnStart:ms,gridRowEnd:ms,gridRow:ms,gridColumn:ms,gridColumnEnd:ms,gridColumnGap:ms,gridRowGap:ms,gridArea:ms,gridGap:ms,textSizeAdjust:wms,borderImage:w,borderImageOutset:w,borderImageRepeat:w,borderImageSlice:w,borderImageSource:w,borderImageWidth:w}};exports["default"]=_default;

/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=calc;var _isPrefixedValue=__webpack_require__(116);var _isPrefixedValue2=_interopRequireDefault(_isPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var prefixes=['-webkit-','-moz-',''];function calc(property,value){if(typeof value==='string'&&!(0,_isPrefixedValue2.default)(value)&&value.indexOf('calc(')>-1){return prefixes.map(function(prefix){return value.replace(/calc\(/g,prefix+'calc(');});}}module.exports=exports['default'];

/***/ }),
/* 116 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=isPrefixedValue;var regex=/-webkit-|-moz-|-ms-/;function isPrefixedValue(value){return typeof value==='string'&&regex.test(value);}module.exports=exports['default'];

/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=crossFade;var _isPrefixedValue=__webpack_require__(116);var _isPrefixedValue2=_interopRequireDefault(_isPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}// http://caniuse.com/#search=cross-fade
	var prefixes=['-webkit-',''];function crossFade(property,value){if(typeof value==='string'&&!(0,_isPrefixedValue2.default)(value)&&value.indexOf('cross-fade(')>-1){return prefixes.map(function(prefix){return value.replace(/cross-fade\(/g,prefix+'cross-fade(');});}}module.exports=exports['default'];

/***/ }),
/* 118 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=cursor;var prefixes=['-webkit-','-moz-',''];var values={'zoom-in':true,'zoom-out':true,grab:true,grabbing:true};function cursor(property,value){if(property==='cursor'&&values.hasOwnProperty(value)){return prefixes.map(function(prefix){return prefix+value;});}}module.exports=exports['default'];

/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=filter;var _isPrefixedValue=__webpack_require__(116);var _isPrefixedValue2=_interopRequireDefault(_isPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}// http://caniuse.com/#feat=css-filter-function
	var prefixes=['-webkit-',''];function filter(property,value){if(typeof value==='string'&&!(0,_isPrefixedValue2.default)(value)&&value.indexOf('filter(')>-1){return prefixes.map(function(prefix){return value.replace(/filter\(/g,prefix+'filter(');});}}module.exports=exports['default'];

/***/ }),
/* 120 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=flex;var values={flex:['-webkit-box','-moz-box','-ms-flexbox','-webkit-flex','flex'],'inline-flex':['-webkit-inline-box','-moz-inline-box','-ms-inline-flexbox','-webkit-inline-flex','inline-flex']};function flex(property,value){if(property==='display'&&values.hasOwnProperty(value)){return values[value];}}module.exports=exports['default'];

/***/ }),
/* 121 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=flexboxIE;var alternativeValues={'space-around':'distribute','space-between':'justify','flex-start':'start','flex-end':'end'};var alternativeProps={alignContent:'msFlexLinePack',alignSelf:'msFlexItemAlign',alignItems:'msFlexAlign',justifyContent:'msFlexPack',order:'msFlexOrder',flexGrow:'msFlexPositive',flexShrink:'msFlexNegative',flexBasis:'msFlexPreferredSize'};function flexboxIE(property,value,style){if(alternativeProps.hasOwnProperty(property)){style[alternativeProps[property]]=alternativeValues[value]||value;}}module.exports=exports['default'];

/***/ }),
/* 122 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=flexboxOld;var alternativeValues={'space-around':'justify','space-between':'justify','flex-start':'start','flex-end':'end','wrap-reverse':'multiple',wrap:'multiple',flex:'box','inline-flex':'inline-box'};var alternativeProps={alignItems:'WebkitBoxAlign',justifyContent:'WebkitBoxPack',flexWrap:'WebkitBoxLines',flexGrow:'WebkitBoxFlex'};function flexboxOld(property,value,style){if(property==='flexDirection'&&typeof value==='string'){if(value.indexOf('column')>-1){style.WebkitBoxOrient='vertical';}else{style.WebkitBoxOrient='horizontal';}if(value.indexOf('reverse')>-1){style.WebkitBoxDirection='reverse';}else{style.WebkitBoxDirection='normal';}}if(alternativeProps.hasOwnProperty(property)){style[alternativeProps[property]]=alternativeValues[value]||value;}}module.exports=exports['default'];

/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=gradient;var _isPrefixedValue=__webpack_require__(116);var _isPrefixedValue2=_interopRequireDefault(_isPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var prefixes=['-webkit-','-moz-',''];var values=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;function gradient(property,value){if(typeof value==='string'&&!(0,_isPrefixedValue2.default)(value)&&values.test(value)){return prefixes.map(function(prefix){return value.replace(values,function(grad){return prefix+grad;});});}}module.exports=exports['default'];

/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=imageSet;var _isPrefixedValue=__webpack_require__(116);var _isPrefixedValue2=_interopRequireDefault(_isPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}// http://caniuse.com/#feat=css-image-set
	var prefixes=['-webkit-',''];function imageSet(property,value){if(typeof value==='string'&&!(0,_isPrefixedValue2.default)(value)&&value.indexOf('image-set(')>-1){return prefixes.map(function(prefix){return value.replace(/image-set\(/g,prefix+'image-set(');});}}module.exports=exports['default'];

/***/ }),
/* 125 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=position;function position(property,value){if(property==='position'&&value==='sticky'){return['-webkit-sticky','sticky'];}}module.exports=exports['default'];

/***/ }),
/* 126 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=sizing;var prefixes=['-webkit-','-moz-',''];var properties={maxHeight:true,maxWidth:true,width:true,height:true,columnWidth:true,minWidth:true,minHeight:true};var values={'min-content':true,'max-content':true,'fill-available':true,'fit-content':true,'contain-floats':true};function sizing(property,value){if(properties.hasOwnProperty(property)&&values.hasOwnProperty(value)){return prefixes.map(function(prefix){return prefix+value;});}}module.exports=exports['default'];

/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=transition;var _hyphenateProperty=__webpack_require__(128);var _hyphenateProperty2=_interopRequireDefault(_hyphenateProperty);var _isPrefixedValue=__webpack_require__(116);var _isPrefixedValue2=_interopRequireDefault(_isPrefixedValue);var _capitalizeString=__webpack_require__(103);var _capitalizeString2=_interopRequireDefault(_capitalizeString);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var properties={transition:true,transitionProperty:true,WebkitTransition:true,WebkitTransitionProperty:true,MozTransition:true,MozTransitionProperty:true};var prefixMapping={Webkit:'-webkit-',Moz:'-moz-',ms:'-ms-'};function prefixValue(value,propertyPrefixMap){if((0,_isPrefixedValue2.default)(value)){return value;}// only split multi values, not cubic beziers
	var multipleValues=value.split(/,(?![^()]*(?:\([^()]*\))?\))/g);for(var i=0,len=multipleValues.length;i<len;++i){var singleValue=multipleValues[i];var values=[singleValue];for(var property in propertyPrefixMap){var dashCaseProperty=(0,_hyphenateProperty2.default)(property);if(singleValue.indexOf(dashCaseProperty)>-1&&dashCaseProperty!=='order'){var prefixes=propertyPrefixMap[property];for(var j=0,pLen=prefixes.length;j<pLen;++j){// join all prefixes and create a new value
	values.unshift(singleValue.replace(dashCaseProperty,prefixMapping[prefixes[j]]+dashCaseProperty));}}}multipleValues[i]=values.join(',');}return multipleValues.join(',');}function transition(property,value,style,propertyPrefixMap){// also check for already prefixed transitions
	if(typeof value==='string'&&properties.hasOwnProperty(property)){var outputValue=prefixValue(value,propertyPrefixMap);// if the property is already prefixed
	var webkitOutput=outputValue.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(val){return!/-moz-|-ms-/.test(val);}).join(',');if(property.indexOf('Webkit')>-1){return webkitOutput;}var mozOutput=outputValue.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(val){return!/-webkit-|-ms-/.test(val);}).join(',');if(property.indexOf('Moz')>-1){return mozOutput;}style['Webkit'+(0,_capitalizeString2.default)(property)]=webkitOutput;style['Moz'+(0,_capitalizeString2.default)(property)]=mozOutput;return outputValue;}}module.exports=exports['default'];

/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=hyphenateProperty;var _hyphenateStyleName=__webpack_require__(129);var _hyphenateStyleName2=_interopRequireDefault(_hyphenateStyleName);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function hyphenateProperty(property){return(0,_hyphenateStyleName2.default)(property);}module.exports=exports['default'];

/***/ }),
/* 129 */
/***/ (function(module, exports) {

	'use strict';var uppercasePattern=/[A-Z]/g;var msPattern=/^ms-/;var cache={};function hyphenateStyleName(string){return string in cache?cache[string]:cache[string]=string.replace(uppercasePattern,'-$&').toLowerCase().replace(msPattern,'-ms-');}module.exports=hyphenateStyleName;

/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _calc=_interopRequireDefault(__webpack_require__(131));var _crossFade=_interopRequireDefault(__webpack_require__(133));var _cursor=_interopRequireDefault(__webpack_require__(134));var _filter=_interopRequireDefault(__webpack_require__(135));var _flex=_interopRequireDefault(__webpack_require__(136));var _flexboxIE=_interopRequireDefault(__webpack_require__(137));var _flexboxOld=_interopRequireDefault(__webpack_require__(138));var _gradient=_interopRequireDefault(__webpack_require__(139));var _imageSet=_interopRequireDefault(__webpack_require__(140));var _position=_interopRequireDefault(__webpack_require__(141));var _sizing=_interopRequireDefault(__webpack_require__(142));var _transition=_interopRequireDefault(__webpack_require__(143));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var _default={plugins:[_calc["default"],_crossFade["default"],_cursor["default"],_filter["default"],_flex["default"],_flexboxIE["default"],_flexboxOld["default"],_gradient["default"],_imageSet["default"],_position["default"],_sizing["default"],_transition["default"]],prefixMap:{chrome:{transform:35,transformOrigin:35,transformOriginX:35,transformOriginY:35,backfaceVisibility:35,perspective:35,perspectiveOrigin:35,transformStyle:35,transformOriginZ:35,animation:42,animationDelay:42,animationDirection:42,animationFillMode:42,animationDuration:42,animationIterationCount:42,animationName:42,animationPlayState:42,animationTimingFunction:42,appearance:66,userSelect:53,fontKerning:32,textEmphasisPosition:66,textEmphasis:66,textEmphasisStyle:66,textEmphasisColor:66,boxDecorationBreak:66,clipPath:54,maskImage:66,maskMode:66,maskRepeat:66,maskPosition:66,maskClip:66,maskOrigin:66,maskSize:66,maskComposite:66,mask:66,maskBorderSource:66,maskBorderMode:66,maskBorderSlice:66,maskBorderWidth:66,maskBorderOutset:66,maskBorderRepeat:66,maskBorder:66,maskType:66,textDecorationStyle:56,textDecorationSkip:56,textDecorationLine:56,textDecorationColor:56,filter:52,fontFeatureSettings:47,breakAfter:49,breakBefore:49,breakInside:49,columnCount:49,columnFill:49,columnGap:49,columnRule:49,columnRuleColor:49,columnRuleStyle:49,columnRuleWidth:49,columns:49,columnSpan:49,columnWidth:49,writingMode:47},safari:{flex:8,flexBasis:8,flexDirection:8,flexGrow:8,flexFlow:8,flexShrink:8,flexWrap:8,alignContent:8,alignItems:8,alignSelf:8,justifyContent:8,order:8,transition:6,transitionDelay:6,transitionDuration:6,transitionProperty:6,transitionTimingFunction:6,transform:8,transformOrigin:8,transformOriginX:8,transformOriginY:8,backfaceVisibility:8,perspective:8,perspectiveOrigin:8,transformStyle:8,transformOriginZ:8,animation:8,animationDelay:8,animationDirection:8,animationFillMode:8,animationDuration:8,animationIterationCount:8,animationName:8,animationPlayState:8,animationTimingFunction:8,appearance:11,userSelect:11,backdropFilter:11,fontKerning:9,scrollSnapType:10.1,scrollSnapPointsX:10.1,scrollSnapPointsY:10.1,scrollSnapDestination:10.1,scrollSnapCoordinate:10.1,textEmphasisPosition:7,textEmphasis:7,textEmphasisStyle:7,textEmphasisColor:7,boxDecorationBreak:11,clipPath:11,maskImage:11,maskMode:11,maskRepeat:11,maskPosition:11,maskClip:11,maskOrigin:11,maskSize:11,maskComposite:11,mask:11,maskBorderSource:11,maskBorderMode:11,maskBorderSlice:11,maskBorderWidth:11,maskBorderOutset:11,maskBorderRepeat:11,maskBorder:11,maskType:11,textDecorationStyle:11,textDecorationSkip:11,textDecorationLine:11,textDecorationColor:11,shapeImageThreshold:10,shapeImageMargin:10,shapeImageOutside:10,filter:9,hyphens:11,flowInto:11,flowFrom:11,breakBefore:8,breakAfter:8,breakInside:8,regionFragment:11,columnCount:8,columnFill:8,columnGap:8,columnRule:8,columnRuleColor:8,columnRuleStyle:8,columnRuleWidth:8,columns:8,columnSpan:8,columnWidth:8,writingMode:10.1},firefox:{appearance:60,userSelect:60,boxSizing:28,textAlignLast:48,textDecorationStyle:35,textDecorationSkip:35,textDecorationLine:35,textDecorationColor:35,tabSize:60,hyphens:42,fontFeatureSettings:33,breakAfter:51,breakBefore:51,breakInside:51,columnCount:51,columnFill:51,columnGap:51,columnRule:51,columnRuleColor:51,columnRuleStyle:51,columnRuleWidth:51,columns:51,columnSpan:51,columnWidth:51},opera:{flex:16,flexBasis:16,flexDirection:16,flexGrow:16,flexFlow:16,flexShrink:16,flexWrap:16,alignContent:16,alignItems:16,alignSelf:16,justifyContent:16,order:16,transform:22,transformOrigin:22,transformOriginX:22,transformOriginY:22,backfaceVisibility:22,perspective:22,perspectiveOrigin:22,transformStyle:22,transformOriginZ:22,animation:29,animationDelay:29,animationDirection:29,animationFillMode:29,animationDuration:29,animationIterationCount:29,animationName:29,animationPlayState:29,animationTimingFunction:29,appearance:50,userSelect:40,fontKerning:19,textEmphasisPosition:50,textEmphasis:50,textEmphasisStyle:50,textEmphasisColor:50,boxDecorationBreak:50,clipPath:41,maskImage:50,maskMode:50,maskRepeat:50,maskPosition:50,maskClip:50,maskOrigin:50,maskSize:50,maskComposite:50,mask:50,maskBorderSource:50,maskBorderMode:50,maskBorderSlice:50,maskBorderWidth:50,maskBorderOutset:50,maskBorderRepeat:50,maskBorder:50,maskType:50,textDecorationStyle:43,textDecorationSkip:43,textDecorationLine:43,textDecorationColor:43,filter:39,fontFeatureSettings:34,breakAfter:36,breakBefore:36,breakInside:36,columnCount:36,columnFill:36,columnGap:36,columnRule:36,columnRuleColor:36,columnRuleStyle:36,columnRuleWidth:36,columns:36,columnSpan:36,columnWidth:36,writingMode:34},ie:{flex:10,flexDirection:10,flexFlow:10,flexWrap:10,transform:9,transformOrigin:9,transformOriginX:9,transformOriginY:9,userSelect:11,wrapFlow:11,wrapThrough:11,wrapMargin:11,scrollSnapType:11,scrollSnapPointsX:11,scrollSnapPointsY:11,scrollSnapDestination:11,scrollSnapCoordinate:11,touchAction:10,hyphens:11,flowInto:11,flowFrom:11,breakBefore:11,breakAfter:11,breakInside:11,regionFragment:11,gridTemplateColumns:11,gridTemplateRows:11,gridTemplateAreas:11,gridTemplate:11,gridAutoColumns:11,gridAutoRows:11,gridAutoFlow:11,grid:11,gridRowStart:11,gridColumnStart:11,gridRowEnd:11,gridRow:11,gridColumn:11,gridColumnEnd:11,gridColumnGap:11,gridRowGap:11,gridArea:11,gridGap:11,textSizeAdjust:11,writingMode:11},edge:{userSelect:17,wrapFlow:17,wrapThrough:17,wrapMargin:17,scrollSnapType:17,scrollSnapPointsX:17,scrollSnapPointsY:17,scrollSnapDestination:17,scrollSnapCoordinate:17,hyphens:17,flowInto:17,flowFrom:17,breakBefore:17,breakAfter:17,breakInside:17,regionFragment:17,gridTemplateColumns:15,gridTemplateRows:15,gridTemplateAreas:15,gridTemplate:15,gridAutoColumns:15,gridAutoRows:15,gridAutoFlow:15,grid:15,gridRowStart:15,gridColumnStart:15,gridRowEnd:15,gridRow:15,gridColumn:15,gridColumnEnd:15,gridColumnGap:15,gridRowGap:15,gridArea:15,gridGap:15},ios_saf:{flex:8.1,flexBasis:8.1,flexDirection:8.1,flexGrow:8.1,flexFlow:8.1,flexShrink:8.1,flexWrap:8.1,alignContent:8.1,alignItems:8.1,alignSelf:8.1,justifyContent:8.1,order:8.1,transition:6,transitionDelay:6,transitionDuration:6,transitionProperty:6,transitionTimingFunction:6,transform:8.1,transformOrigin:8.1,transformOriginX:8.1,transformOriginY:8.1,backfaceVisibility:8.1,perspective:8.1,perspectiveOrigin:8.1,transformStyle:8.1,transformOriginZ:8.1,animation:8.1,animationDelay:8.1,animationDirection:8.1,animationFillMode:8.1,animationDuration:8.1,animationIterationCount:8.1,animationName:8.1,animationPlayState:8.1,animationTimingFunction:8.1,appearance:11,userSelect:11,backdropFilter:11,fontKerning:11,scrollSnapType:10.3,scrollSnapPointsX:10.3,scrollSnapPointsY:10.3,scrollSnapDestination:10.3,scrollSnapCoordinate:10.3,boxDecorationBreak:11,clipPath:11,maskImage:11,maskMode:11,maskRepeat:11,maskPosition:11,maskClip:11,maskOrigin:11,maskSize:11,maskComposite:11,mask:11,maskBorderSource:11,maskBorderMode:11,maskBorderSlice:11,maskBorderWidth:11,maskBorderOutset:11,maskBorderRepeat:11,maskBorder:11,maskType:11,textSizeAdjust:11,textDecorationStyle:11,textDecorationSkip:11,textDecorationLine:11,textDecorationColor:11,shapeImageThreshold:10,shapeImageMargin:10,shapeImageOutside:10,filter:9,hyphens:11,flowInto:11,flowFrom:11,breakBefore:8.1,breakAfter:8.1,breakInside:8.1,regionFragment:11,columnCount:8.1,columnFill:8.1,columnGap:8.1,columnRule:8.1,columnRuleColor:8.1,columnRuleStyle:8.1,columnRuleWidth:8.1,columns:8.1,columnSpan:8.1,columnWidth:8.1,writingMode:10.3},android:{borderImage:4.2,borderImageOutset:4.2,borderImageRepeat:4.2,borderImageSlice:4.2,borderImageSource:4.2,borderImageWidth:4.2,flex:4.2,flexBasis:4.2,flexDirection:4.2,flexGrow:4.2,flexFlow:4.2,flexShrink:4.2,flexWrap:4.2,alignContent:4.2,alignItems:4.2,alignSelf:4.2,justifyContent:4.2,order:4.2,transition:4.2,transitionDelay:4.2,transitionDuration:4.2,transitionProperty:4.2,transitionTimingFunction:4.2,transform:4.4,transformOrigin:4.4,transformOriginX:4.4,transformOriginY:4.4,backfaceVisibility:4.4,perspective:4.4,perspectiveOrigin:4.4,transformStyle:4.4,transformOriginZ:4.4,animation:4.4,animationDelay:4.4,animationDirection:4.4,animationFillMode:4.4,animationDuration:4.4,animationIterationCount:4.4,animationName:4.4,animationPlayState:4.4,animationTimingFunction:4.4,appearance:62,userSelect:4.4,fontKerning:4.4,textEmphasisPosition:62,textEmphasis:62,textEmphasisStyle:62,textEmphasisColor:62,boxDecorationBreak:62,clipPath:4.4,maskImage:62,maskMode:62,maskRepeat:62,maskPosition:62,maskClip:62,maskOrigin:62,maskSize:62,maskComposite:62,mask:62,maskBorderSource:62,maskBorderMode:62,maskBorderSlice:62,maskBorderWidth:62,maskBorderOutset:62,maskBorderRepeat:62,maskBorder:62,maskType:62,filter:4.4,fontFeatureSettings:4.4,breakAfter:4.4,breakBefore:4.4,breakInside:4.4,columnCount:4.4,columnFill:4.4,columnGap:4.4,columnRule:4.4,columnRuleColor:4.4,columnRuleStyle:4.4,columnRuleWidth:4.4,columns:4.4,columnSpan:4.4,columnWidth:4.4,writingMode:4.4},and_chr:{appearance:62,textEmphasisPosition:62,textEmphasis:62,textEmphasisStyle:62,textEmphasisColor:62,boxDecorationBreak:62,maskImage:62,maskMode:62,maskRepeat:62,maskPosition:62,maskClip:62,maskOrigin:62,maskSize:62,maskComposite:62,mask:62,maskBorderSource:62,maskBorderMode:62,maskBorderSlice:62,maskBorderWidth:62,maskBorderOutset:62,maskBorderRepeat:62,maskBorder:62,maskType:62},and_uc:{flex:11.4,flexBasis:11.4,flexDirection:11.4,flexGrow:11.4,flexFlow:11.4,flexShrink:11.4,flexWrap:11.4,alignContent:11.4,alignItems:11.4,alignSelf:11.4,justifyContent:11.4,order:11.4,transform:11.4,transformOrigin:11.4,transformOriginX:11.4,transformOriginY:11.4,backfaceVisibility:11.4,perspective:11.4,perspectiveOrigin:11.4,transformStyle:11.4,transformOriginZ:11.4,animation:11.4,animationDelay:11.4,animationDirection:11.4,animationFillMode:11.4,animationDuration:11.4,animationIterationCount:11.4,animationName:11.4,animationPlayState:11.4,animationTimingFunction:11.4,appearance:11.4,userSelect:11.4,textEmphasisPosition:11.4,textEmphasis:11.4,textEmphasisStyle:11.4,textEmphasisColor:11.4,clipPath:11.4,maskImage:11.4,maskMode:11.4,maskRepeat:11.4,maskPosition:11.4,maskClip:11.4,maskOrigin:11.4,maskSize:11.4,maskComposite:11.4,mask:11.4,maskBorderSource:11.4,maskBorderMode:11.4,maskBorderSlice:11.4,maskBorderWidth:11.4,maskBorderOutset:11.4,maskBorderRepeat:11.4,maskBorder:11.4,maskType:11.4,textSizeAdjust:11.4,filter:11.4,hyphens:11.4,fontFeatureSettings:11.4,breakAfter:11.4,breakBefore:11.4,breakInside:11.4,columnCount:11.4,columnFill:11.4,columnGap:11.4,columnRule:11.4,columnRuleColor:11.4,columnRuleStyle:11.4,columnRuleWidth:11.4,columns:11.4,columnSpan:11.4,columnWidth:11.4,writingMode:11.4},op_mini:{}}};exports["default"]=_default;

/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=calc;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function calc(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(typeof value==='string'&&value.indexOf('calc(')>-1&&(browserName==='firefox'&&browserVersion<15||browserName==='chrome'&&browserVersion<25||browserName==='safari'&&browserVersion<6.1||browserName==='ios_saf'&&browserVersion<7)){return(0,_getPrefixedValue2.default)(value.replace(/calc\(/g,cssPrefix+'calc('),value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 132 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getPrefixedValue;function getPrefixedValue(prefixedValue,value,keepUnprefixed){if(keepUnprefixed){return[prefixedValue,value];}return prefixedValue;}module.exports=exports["default"];

/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=crossFade;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function crossFade(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(typeof value==='string'&&value.indexOf('cross-fade(')>-1&&(browserName==='chrome'||browserName==='opera'||browserName==='and_chr'||(browserName==='ios_saf'||browserName==='safari')&&browserVersion<10)){return(0,_getPrefixedValue2.default)(value.replace(/cross-fade\(/g,cssPrefix+'cross-fade('),value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 134 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=cursor;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var grabValues={grab:true,grabbing:true};var zoomValues={'zoom-in':true,'zoom-out':true};function cursor(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;// adds prefixes for firefox, chrome, safari, and opera regardless of
	// version until a reliable browser support info can be found
	// see: https://github.com/rofrischmann/inline-style-prefixer/issues/79
	if(property==='cursor'&&grabValues[value]&&(browserName==='firefox'||browserName==='chrome'||browserName==='safari'||browserName==='opera')){return(0,_getPrefixedValue2.default)(cssPrefix+value,value,keepUnprefixed);}if(property==='cursor'&&zoomValues[value]&&(browserName==='firefox'&&browserVersion<24||browserName==='chrome'&&browserVersion<37||browserName==='safari'&&browserVersion<9||browserName==='opera'&&browserVersion<24)){return(0,_getPrefixedValue2.default)(cssPrefix+value,value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=filter;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function filter(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(typeof value==='string'&&value.indexOf('filter(')>-1&&(browserName==='ios_saf'||browserName==='safari'&&browserVersion<9.1)){return(0,_getPrefixedValue2.default)(value.replace(/filter\(/g,cssPrefix+'filter('),value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=flex;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var values={flex:true,'inline-flex':true};function flex(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(property==='display'&&values[value]&&(browserName==='chrome'&&browserVersion<29&&browserVersion>20||(browserName==='safari'||browserName==='ios_saf')&&browserVersion<9&&browserVersion>6||browserName==='opera'&&(browserVersion===15||browserVersion===16))){return(0,_getPrefixedValue2.default)(cssPrefix+value,value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=flexboxIE;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var alternativeValues={'space-around':'distribute','space-between':'justify','flex-start':'start','flex-end':'end',flex:'flexbox','inline-flex':'inline-flexbox'};var alternativeProps={alignContent:'msFlexLinePack',alignSelf:'msFlexItemAlign',alignItems:'msFlexAlign',justifyContent:'msFlexPack',order:'msFlexOrder',flexGrow:'msFlexPositive',flexShrink:'msFlexNegative',flexBasis:'msFlexPreferredSize'};function flexboxIE(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed,requiresPrefix=_ref.requiresPrefix;if((alternativeProps.hasOwnProperty(property)||property==='display'&&typeof value==='string'&&value.indexOf('flex')>-1)&&(browserName==='ie_mob'||browserName==='ie')&&browserVersion===10){delete requiresPrefix[property];if(!keepUnprefixed&&!Array.isArray(style[property])){delete style[property];}if(property==='display'&&alternativeValues.hasOwnProperty(value)){return(0,_getPrefixedValue2.default)(cssPrefix+alternativeValues[value],value,keepUnprefixed);}if(alternativeProps.hasOwnProperty(property)){style[alternativeProps[property]]=alternativeValues[value]||value;}}}module.exports=exports['default'];

/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=flexboxOld;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var alternativeValues={'space-around':'justify','space-between':'justify','flex-start':'start','flex-end':'end','wrap-reverse':'multiple',wrap:'multiple',flex:'box','inline-flex':'inline-box'};var alternativeProps={alignItems:'WebkitBoxAlign',justifyContent:'WebkitBoxPack',flexWrap:'WebkitBoxLines',flexGrow:'WebkitBoxFlex'};var otherProps=['alignContent','alignSelf','order','flexGrow','flexShrink','flexBasis','flexDirection'];var properties=Object.keys(alternativeProps).concat(otherProps);function flexboxOld(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed,requiresPrefix=_ref.requiresPrefix;if((properties.indexOf(property)>-1||property==='display'&&typeof value==='string'&&value.indexOf('flex')>-1)&&(browserName==='firefox'&&browserVersion<22||browserName==='chrome'&&browserVersion<21||(browserName==='safari'||browserName==='ios_saf')&&browserVersion<=6.1||browserName==='android'&&browserVersion<4.4||browserName==='and_uc')){delete requiresPrefix[property];if(!keepUnprefixed&&!Array.isArray(style[property])){delete style[property];}if(property==='flexDirection'&&typeof value==='string'){if(value.indexOf('column')>-1){style.WebkitBoxOrient='vertical';}else{style.WebkitBoxOrient='horizontal';}if(value.indexOf('reverse')>-1){style.WebkitBoxDirection='reverse';}else{style.WebkitBoxDirection='normal';}}if(property==='display'&&alternativeValues.hasOwnProperty(value)){return(0,_getPrefixedValue2.default)(cssPrefix+alternativeValues[value],value,keepUnprefixed);}if(alternativeProps.hasOwnProperty(property)){style[alternativeProps[property]]=alternativeValues[value]||value;}}}module.exports=exports['default'];

/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=gradient;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var values=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;function gradient(property,value,style,_ref){var browserName=_ref.browserName,browserVersion=_ref.browserVersion,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(typeof value==='string'&&values.test(value)&&(browserName==='firefox'&&browserVersion<16||browserName==='chrome'&&browserVersion<26||(browserName==='safari'||browserName==='ios_saf')&&browserVersion<7||(browserName==='opera'||browserName==='op_mini')&&browserVersion<12.1||browserName==='android'&&browserVersion<4.4||browserName==='and_uc')){return(0,_getPrefixedValue2.default)(value.replace(values,function(grad){return cssPrefix+grad;}),value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=imageSet;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function imageSet(property,value,style,_ref){var browserName=_ref.browserName,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(typeof value==='string'&&value.indexOf('image-set(')>-1&&(browserName==='chrome'||browserName==='opera'||browserName==='and_chr'||browserName==='and_uc'||browserName==='ios_saf'||browserName==='safari')){return(0,_getPrefixedValue2.default)(value.replace(/image-set\(/g,cssPrefix+'image-set('),value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 141 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=position;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function position(property,value,style,_ref){var browserName=_ref.browserName,cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;if(property==='position'&&value==='sticky'&&(browserName==='safari'||browserName==='ios_saf')){return(0,_getPrefixedValue2.default)(cssPrefix+value,value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=sizing;var _getPrefixedValue=__webpack_require__(132);var _getPrefixedValue2=_interopRequireDefault(_getPrefixedValue);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var properties={maxHeight:true,maxWidth:true,width:true,height:true,columnWidth:true,minWidth:true,minHeight:true};var values={'min-content':true,'max-content':true,'fill-available':true,'fit-content':true,'contain-floats':true// TODO: chrome & opera support it
	};function sizing(property,value,style,_ref){var cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed;// This might change in the future
	// Keep an eye on it
	if(properties.hasOwnProperty(property)&&values.hasOwnProperty(value)){return(0,_getPrefixedValue2.default)(cssPrefix+value,value,keepUnprefixed);}}module.exports=exports['default'];

/***/ }),
/* 143 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=transition;var _hyphenateProperty=__webpack_require__(128);var _hyphenateProperty2=_interopRequireDefault(_hyphenateProperty);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var properties={transition:true,transitionProperty:true,WebkitTransition:true,WebkitTransitionProperty:true,MozTransition:true,MozTransitionProperty:true};var requiresPrefixDashCased=void 0;function transition(property,value,style,_ref){var cssPrefix=_ref.cssPrefix,keepUnprefixed=_ref.keepUnprefixed,requiresPrefix=_ref.requiresPrefix;if(typeof value==='string'&&properties.hasOwnProperty(property)){// memoize the prefix array for later use
	if(!requiresPrefixDashCased){requiresPrefixDashCased=Object.keys(requiresPrefix).map(function(prop){return(0,_hyphenateProperty2.default)(prop);});}// only split multi values, not cubic beziers
	var multipleValues=value.split(/,(?![^()]*(?:\([^()]*\))?\))/g);requiresPrefixDashCased.forEach(function(prop){multipleValues.forEach(function(val,index){if(val.indexOf(prop)>-1&&prop!=='order'){multipleValues[index]=val.replace(prop,cssPrefix+prop)+(keepUnprefixed?','+val:'');}});});return multipleValues.join(',');}}module.exports=exports['default'];

/***/ }),
/* 144 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _cleanStateKey=_interopRequireDefault(__webpack_require__(145));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var getState=function getState(state,elementKey,value){var key=(0,_cleanStateKey["default"])(elementKey);return!!state&&!!state._radiumStyleState&&!!state._radiumStyleState[key]&&state._radiumStyleState[key][value];};var _default=getState;exports["default"]=_default;

/***/ }),
/* 145 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;/* flow */var cleanStateKey=function cleanStateKey(key){return key===null||typeof key==='undefined'?'main':key.toString();};var _default=cleanStateKey;exports["default"]=_default;

/***/ }),
/* 146 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var getStateKey=function getStateKey(renderedElement){return typeof renderedElement.ref==='string'?renderedElement.ref:renderedElement.key;};var _default=getStateKey;exports["default"]=_default;

/***/ }),
/* 147 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var getRadiumStyleState=function getRadiumStyleState(component){return component._lastRadiumState||component.state&&component.state._radiumStyleState||{};};var _default=getRadiumStyleState;exports["default"]=_default;

/***/ }),
/* 148 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=hash;// a simple djb2 hash based on hash-string:
	// https://github.com/MatthewBarker/hash-string/blob/master/source/hash-string.js
	// returns a hex-encoded hash
	function hash(text){if(!text){return'';}var hashValue=5381;var index=text.length-1;while(index){hashValue=hashValue*33^text.charCodeAt(index);index-=1;}return(hashValue>>>0).toString(16);}

/***/ }),
/* 149 */
/***/ (function(module, exports) {

	"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports.isNestedStyle=isNestedStyle;exports.mergeStyles=mergeStyles;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}function isNestedStyle(value){// Don't merge objects overriding toString, since they should be converted
	// to string values.
	return value&&value.constructor===Object&&value.toString===Object.prototype.toString;}// Merge style objects. Deep merge plain object values.
	function mergeStyles(styles){var result={};styles.forEach(function(style){if(!style||_typeof(style)!=='object'){return;}if(Array.isArray(style)){style=mergeStyles(style);}Object.keys(style).forEach(function(key){// Simple case, nothing nested
	if(!isNestedStyle(style[key])||!isNestedStyle(result[key])){result[key]=style[key];return;}// If nested media, don't merge the nested styles, append a space to the
	// end (benign when converted to CSS). This way we don't end up merging
	// media queries that appear later in the chain with those that appear
	// earlier.
	if(key.indexOf('@media')===0){var newKey=key;// eslint-disable-next-line no-constant-condition
	while(true){newKey+=' ';if(!result[newKey]){result[newKey]=style[key];return;}}}// Merge all other nested styles recursively
	result[key]=mergeStyles([result[key],style[key]]);});});return result;}

/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _checkPropsPlugin=_interopRequireDefault(__webpack_require__(151));var _keyframesPlugin=_interopRequireDefault(__webpack_require__(152));var _mergeStyleArrayPlugin=_interopRequireDefault(__webpack_require__(153));var _prefixPlugin=_interopRequireDefault(__webpack_require__(154));var _removeNestedStylesPlugin=_interopRequireDefault(__webpack_require__(155));var _resolveInteractionStylesPlugin=_interopRequireDefault(__webpack_require__(156));var _resolveMediaQueriesPlugin=_interopRequireDefault(__webpack_require__(158));var _visitedPlugin=_interopRequireDefault(__webpack_require__(159));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}/* eslint-disable block-scoped-const */var _default={checkProps:_checkPropsPlugin["default"],keyframes:_keyframesPlugin["default"],mergeStyleArray:_mergeStyleArrayPlugin["default"],prefix:_prefixPlugin["default"],removeNestedStyles:_removeNestedStylesPlugin["default"],resolveInteractionStyles:_resolveInteractionStylesPlugin["default"],resolveMediaQueries:_resolveMediaQueriesPlugin["default"],visited:_visitedPlugin["default"]};exports["default"]=_default;

/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(process) {"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}var _checkProps=function checkProps(){};if(process.env.NODE_ENV!=='production'){// Warn if you use longhand and shorthand properties in the same style
	// object.
	// https://developer.mozilla.org/en-US/docs/Web/CSS/Shorthand_properties
	var shorthandPropertyExpansions={background:['backgroundAttachment','backgroundBlendMode','backgroundClip','backgroundColor','backgroundImage','backgroundOrigin','backgroundPosition','backgroundPositionX','backgroundPositionY','backgroundRepeat','backgroundRepeatX','backgroundRepeatY','backgroundSize'],border:['borderBottom','borderBottomColor','borderBottomStyle','borderBottomWidth','borderColor','borderLeft','borderLeftColor','borderLeftStyle','borderLeftWidth','borderRight','borderRightColor','borderRightStyle','borderRightWidth','borderStyle','borderTop','borderTopColor','borderTopStyle','borderTopWidth','borderWidth'],borderImage:['borderImageOutset','borderImageRepeat','borderImageSlice','borderImageSource','borderImageWidth'],borderRadius:['borderBottomLeftRadius','borderBottomRightRadius','borderTopLeftRadius','borderTopRightRadius'],font:['fontFamily','fontKerning','fontSize','fontStretch','fontStyle','fontVariant','fontVariantLigatures','fontWeight','lineHeight'],listStyle:['listStyleImage','listStylePosition','listStyleType'],margin:['marginBottom','marginLeft','marginRight','marginTop'],padding:['paddingBottom','paddingLeft','paddingRight','paddingTop'],transition:['transitionDelay','transitionDuration','transitionProperty','transitionTimingFunction']};_checkProps=function checkProps(config){var componentName=config.componentName,style=config.style;if(_typeof(style)!=='object'||!style){return;}var styleKeys=Object.keys(style);styleKeys.forEach(function(styleKey){if(Array.isArray(shorthandPropertyExpansions[styleKey])&&shorthandPropertyExpansions[styleKey].some(function(sp){return styleKeys.indexOf(sp)!==-1;})){if(process.env.NODE_ENV!=='production'){/* eslint-disable no-console */console.warn('Radium: property "'+styleKey+'" in style object',style,': do not mix longhand and '+'shorthand properties in the same style object. Check the render '+'method of '+componentName+'.','See https://github.com/FormidableLabs/radium/issues/95 for more '+'information.');/* eslint-enable no-console */}}});styleKeys.forEach(function(k){return _checkProps(_objectSpread({},config,{style:style[k]}));});return;};}var _default=_checkProps;exports["default"]=_default;
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))

/***/ }),
/* 152 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=keyframesPlugin;function keyframesPlugin(_ref){var addCSS=_ref.addCSS,config=_ref.config,style=_ref.style;var processKeyframeStyle=function processKeyframeStyle(value){var keyframesValue=value;var _keyframesValue$__pro=keyframesValue.__process(config.userAgent),animationName=_keyframesValue$__pro.animationName,css=_keyframesValue$__pro.css;addCSS(css);return animationName;};var newStyle=Object.keys(style).reduce(function(newStyleInProgress,key){var value=style[key];var isKeyframeArray=Array.isArray(value);if(key==='animationName'&&value&&(value.__radiumKeyframes||isKeyframeArray)){if(isKeyframeArray){value=value.map(processKeyframeStyle).join(', ');}else{value=processKeyframeStyle(value);}}newStyleInProgress[key]=value;return newStyleInProgress;},{});return{style:newStyle};}

/***/ }),
/* 153 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;// Convenient syntax for multiple styles: `style={[style1, style2, etc]}`
	// Ignores non-objects, so you can do `this.state.isCool && styles.cool`.
	var mergeStyleArrayPlugin=function mergeStyleArrayPlugin(_ref){var style=_ref.style,mergeStyles=_ref.mergeStyles;// eslint-disable-line no-shadow
	var newStyle=Array.isArray(style)?mergeStyles(style):style;return{style:newStyle};};var _default=mergeStyleArrayPlugin;exports["default"]=_default;

/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=prefixPlugin;var _prefixer=__webpack_require__(100);function prefixPlugin(_ref){var config=_ref.config,style=_ref.style;var newStyle=(0,_prefixer.getPrefixedStyle)(style,config.userAgent);return{style:newStyle};}

/***/ }),
/* 155 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=removeNestedStyles;function removeNestedStyles(_ref){var isNestedStyle=_ref.isNestedStyle,style=_ref.style;// eslint-disable-line no-shadow
	var newStyle=Object.keys(style).reduce(function(newStyleInProgress,key){var value=style[key];if(!isNestedStyle(value)){newStyleInProgress[key]=value;}return newStyleInProgress;},{});return{style:newStyle};}

/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _mouseUpListener=_interopRequireDefault(__webpack_require__(157));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var _isInteractiveStyleField=function _isInteractiveStyleField(styleFieldName){return styleFieldName===':hover'||styleFieldName===':active'||styleFieldName===':focus';};var resolveInteractionStyles=function resolveInteractionStyles(config){var ExecutionEnvironment=config.ExecutionEnvironment,getComponentField=config.getComponentField,getState=config.getState,mergeStyles=config.mergeStyles,props=config.props,setState=config.setState,style=config.style;var newComponentFields={};var newProps={};// Only add handlers if necessary
	if(style[':hover']){// Always call the existing handler if one is already defined.
	// This code, and the very similar ones below, could be abstracted a bit
	// more, but it hurts readability IMO.
	var existingOnMouseEnter=props.onMouseEnter;newProps.onMouseEnter=function(e){existingOnMouseEnter&&existingOnMouseEnter(e);setState(':hover',true);};var existingOnMouseLeave=props.onMouseLeave;newProps.onMouseLeave=function(e){existingOnMouseLeave&&existingOnMouseLeave(e);setState(':hover',false);};}if(style[':active']){var existingOnMouseDown=props.onMouseDown;newProps.onMouseDown=function(e){existingOnMouseDown&&existingOnMouseDown(e);newComponentFields._lastMouseDown=Date.now();setState(':active','viamousedown');};var existingOnKeyDown=props.onKeyDown;newProps.onKeyDown=function(e){existingOnKeyDown&&existingOnKeyDown(e);if(e.key===' '||e.key==='Enter'){setState(':active','viakeydown');}};var existingOnKeyUp=props.onKeyUp;newProps.onKeyUp=function(e){existingOnKeyUp&&existingOnKeyUp(e);if(e.key===' '||e.key==='Enter'){setState(':active',false);}};}if(style[':focus']){var existingOnFocus=props.onFocus;newProps.onFocus=function(e){existingOnFocus&&existingOnFocus(e);setState(':focus',true);};var existingOnBlur=props.onBlur;newProps.onBlur=function(e){existingOnBlur&&existingOnBlur(e);setState(':focus',false);};}if(style[':active']&&!getComponentField('_radiumMouseUpListener')&&ExecutionEnvironment.canUseEventListeners){newComponentFields._radiumMouseUpListener=_mouseUpListener["default"].subscribe(function(){Object.keys(getComponentField('state')._radiumStyleState).forEach(function(key){if(getState(':active',key)==='viamousedown'){setState(':active',false,key);}});});}// Merge the styles in the order they were defined
	var interactionStyles=props.disabled?[style[':disabled']]:Object.keys(style).filter(function(name){return _isInteractiveStyleField(name)&&getState(name);}).map(function(name){return style[name];});var newStyle=mergeStyles([style].concat(interactionStyles));// Remove interactive styles
	newStyle=Object.keys(newStyle).reduce(function(styleWithoutInteractions,name){if(!_isInteractiveStyleField(name)&&name!==':disabled'){styleWithoutInteractions[name]=newStyle[name];}return styleWithoutInteractions;},{});return{componentFields:newComponentFields,props:newProps,style:newStyle};};var _default=resolveInteractionStyles;exports["default"]=_default;

/***/ }),
/* 157 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _callbacks=[];var _mouseUpListenerIsActive=false;function _handleMouseUp(){_callbacks.forEach(function(callback){callback();});}var subscribe=function subscribe(callback){if(_callbacks.indexOf(callback)===-1){_callbacks.push(callback);}if(!_mouseUpListenerIsActive){window.addEventListener('mouseup',_handleMouseUp);_mouseUpListenerIsActive=true;}return{remove:function remove(){var index=_callbacks.indexOf(callback);_callbacks.splice(index,1);if(_callbacks.length===0&&_mouseUpListenerIsActive){window.removeEventListener('mouseup',_handleMouseUp);_mouseUpListenerIsActive=false;}}};};var _default={subscribe:subscribe,__triggerForTests:_handleMouseUp};exports["default"]=_default;

/***/ }),
/* 158 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=resolveMediaQueries;function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var _windowMatchMedia;function _getWindowMatchMedia(ExecutionEnvironment){if(_windowMatchMedia===undefined){_windowMatchMedia=!!ExecutionEnvironment.canUseDOM&&!!window&&!!window.matchMedia&&function(mediaQueryString){return window.matchMedia(mediaQueryString);}||null;}return _windowMatchMedia;}function _filterObject(obj,predicate){return Object.keys(obj).filter(function(key){return predicate(obj[key],key);}).reduce(function(result,key){result[key]=obj[key];return result;},{});}function _removeMediaQueries(style){return Object.keys(style).reduce(function(styleWithoutMedia,key){if(key.indexOf('@media')!==0){styleWithoutMedia[key]=style[key];}return styleWithoutMedia;},{});}function _topLevelRulesToCSS(_ref){var addCSS=_ref.addCSS,appendImportantToEachValue=_ref.appendImportantToEachValue,cssRuleSetToString=_ref.cssRuleSetToString,hash=_ref.hash,isNestedStyle=_ref.isNestedStyle,style=_ref.style,userAgent=_ref.userAgent;var className='';Object.keys(style).filter(function(name){return name.indexOf('@media')===0;}).map(function(query){var topLevelRules=appendImportantToEachValue(_filterObject(style[query],function(value){return!isNestedStyle(value);}));if(!Object.keys(topLevelRules).length){return;}var ruleCSS=cssRuleSetToString('',topLevelRules,userAgent);// CSS classes cannot start with a number
	var mediaQueryClassName='rmq-'+hash(query+ruleCSS);var css=query+'{ .'+mediaQueryClassName+ruleCSS+'}';addCSS(css);className+=(className?' ':'')+mediaQueryClassName;});return className;}function _subscribeToMediaQuery(_ref2){var listener=_ref2.listener,listenersByQuery=_ref2.listenersByQuery,matchMedia=_ref2.matchMedia,mediaQueryListsByQuery=_ref2.mediaQueryListsByQuery,query=_ref2.query;query=query.replace('@media ','');var mql=mediaQueryListsByQuery[query];if(!mql&&matchMedia){mediaQueryListsByQuery[query]=mql=matchMedia(query);}if(!listenersByQuery||!listenersByQuery[query]){mql.addListener(listener);listenersByQuery[query]={remove:function remove(){mql.removeListener(listener);}};}return mql;}function resolveMediaQueries(_ref3){var ExecutionEnvironment=_ref3.ExecutionEnvironment,addCSS=_ref3.addCSS,appendImportantToEachValue=_ref3.appendImportantToEachValue,config=_ref3.config,cssRuleSetToString=_ref3.cssRuleSetToString,getComponentField=_ref3.getComponentField,getGlobalState=_ref3.getGlobalState,hash=_ref3.hash,isNestedStyle=_ref3.isNestedStyle,mergeStyles=_ref3.mergeStyles,props=_ref3.props,setState=_ref3.setState,style=_ref3.style;// eslint-disable-line no-shadow
	var newStyle=_removeMediaQueries(style);var mediaQueryClassNames=_topLevelRulesToCSS({addCSS:addCSS,appendImportantToEachValue:appendImportantToEachValue,cssRuleSetToString:cssRuleSetToString,hash:hash,isNestedStyle:isNestedStyle,style:style,userAgent:config.userAgent});var newProps=mediaQueryClassNames?{className:mediaQueryClassNames+(props.className?' '+props.className:'')}:null;var matchMedia=config.matchMedia||_getWindowMatchMedia(ExecutionEnvironment);if(!matchMedia){return{props:newProps,style:newStyle};}var listenersByQuery=_objectSpread({},getComponentField('_radiumMediaQueryListenersByQuery'));var mediaQueryListsByQuery=getGlobalState('mediaQueryListsByQuery')||{};Object.keys(style).filter(function(name){return name.indexOf('@media')===0;}).map(function(query){var nestedRules=_filterObject(style[query],isNestedStyle);if(!Object.keys(nestedRules).length){return;}var mql=_subscribeToMediaQuery({listener:function listener(){return setState(query,mql.matches,'_all');},listenersByQuery:listenersByQuery,matchMedia:matchMedia,mediaQueryListsByQuery:mediaQueryListsByQuery,query:query});// Apply media query states
	if(mql.matches){newStyle=mergeStyles([newStyle,nestedRules]);}});return{componentFields:{_radiumMediaQueryListenersByQuery:listenersByQuery},globalState:{mediaQueryListsByQuery:mediaQueryListsByQuery},props:newProps,style:newStyle};}

/***/ }),
/* 159 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=visited;function visited(_ref){var addCSS=_ref.addCSS,appendImportantToEachValue=_ref.appendImportantToEachValue,config=_ref.config,cssRuleSetToString=_ref.cssRuleSetToString,hash=_ref.hash,props=_ref.props,style=_ref.style;// eslint-disable-line no-shadow
	var className=props.className;var newStyle=Object.keys(style).reduce(function(newStyleInProgress,key){var value=style[key];if(key===':visited'){value=appendImportantToEachValue(value);var ruleCSS=cssRuleSetToString('',value,config.userAgent);var visitedClassName='rad-'+hash(ruleCSS);var css='.'+visitedClassName+':visited'+ruleCSS;addCSS(css);className=(className?className+' ':'')+visitedClassName;}else{newStyleInProgress[key]=value;}return newStyleInProgress;},{});return{props:className===props.className?null:{className:className},style:newStyle};}

/***/ }),
/* 160 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var StyleKeeper=/*#__PURE__*/function(){function StyleKeeper(userAgent){_classCallCheck(this,StyleKeeper);this._userAgent=void 0;this._listeners=void 0;this._cssSet=void 0;this._userAgent=userAgent;this._listeners=[];this._cssSet={};}_createClass(StyleKeeper,[{key:"subscribe",value:function subscribe(listener){var _this=this;if(this._listeners.indexOf(listener)===-1){this._listeners.push(listener);}return{// Must be fat arrow to capture `this`
	remove:function remove(){var listenerIndex=_this._listeners.indexOf(listener);if(listenerIndex>-1){_this._listeners.splice(listenerIndex,1);}}};}},{key:"addCSS",value:function addCSS(css){var _this2=this;if(!this._cssSet[css]){this._cssSet[css]=true;this._emitChange();}return{// Must be fat arrow to capture `this`
	remove:function remove(){delete _this2._cssSet[css];_this2._emitChange();}};}},{key:"getCSS",value:function getCSS(){return Object.keys(this._cssSet).join('\n');}},{key:"_emitChange",value:function _emitChange(){this._listeners.forEach(function(listener){return listener();});}}]);return StyleKeeper;}();exports["default"]=StyleKeeper;

/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.withRadiumContexts=withRadiumContexts;exports.RadiumConfigContext=exports.StyleKeeperContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(10));var _hoistNonReactStatics=_interopRequireDefault(__webpack_require__(41));var _styleKeeper=_interopRequireDefault(__webpack_require__(160));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}newObj["default"]=obj;return newObj;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}var StyleKeeperContext=_react["default"].createContext(undefined);exports.StyleKeeperContext=StyleKeeperContext;var RadiumConfigContext=_react["default"].createContext(undefined);exports.RadiumConfigContext=RadiumConfigContext;function withRadiumContexts(WrappedComponent){var WithRadiumContexts=_react["default"].forwardRef(function(props,ref){var radiumConfigContext=(0,_react.useContext)(RadiumConfigContext);var styleKeeperContext=(0,_react.useContext)(StyleKeeperContext);return _react["default"].createElement(WrappedComponent,_extends({ref:ref},props,{radiumConfigContext:radiumConfigContext,styleKeeperContext:styleKeeperContext}));});WithRadiumContexts.displayName="withRadiumContexts(".concat(WrappedComponent.displayName||WrappedComponent.name||'Component',")");return(0,_hoistNonReactStatics["default"])(WithRadiumContexts,WrappedComponent);}

/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _cssRuleSetToString=_interopRequireDefault(__webpack_require__(98));var _react=_interopRequireWildcard(__webpack_require__(10));var _propTypes=_interopRequireDefault(__webpack_require__(33));var _context=__webpack_require__(161);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}newObj["default"]=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}var Style=/*#__PURE__*/function(_PureComponent){_inherits(Style,_PureComponent);function Style(){_classCallCheck(this,Style);return _possibleConstructorReturn(this,_getPrototypeOf(Style).apply(this,arguments));}_createClass(Style,[{key:"_buildStyles",value:function _buildStyles(styles){var _this=this;var userAgent=this.props.radiumConfig&&this.props.radiumConfig.userAgent||this.props.radiumConfigContext&&this.props.radiumConfigContext.userAgent;var scopeSelector=this.props.scopeSelector;var rootRules=Object.keys(styles).reduce(function(accumulator,selector){if(_typeof(styles[selector])!=='object'){accumulator[selector]=styles[selector];}return accumulator;},{});var rootStyles=Object.keys(rootRules).length?(0,_cssRuleSetToString["default"])(scopeSelector||'',rootRules,userAgent):'';return rootStyles+Object.keys(styles).reduce(function(accumulator,selector){var rules=styles[selector];if(selector==='mediaQueries'){accumulator+=_this._buildMediaQueryString(rules);}else if(_typeof(styles[selector])==='object'){var completeSelector=scopeSelector?selector.split(',').map(function(part){return scopeSelector+' '+part.trim();}).join(','):selector;accumulator+=(0,_cssRuleSetToString["default"])(completeSelector,rules,userAgent);}return accumulator;},'');}},{key:"_buildMediaQueryString",value:function _buildMediaQueryString(stylesByMediaQuery){var _this2=this;var mediaQueryString='';Object.keys(stylesByMediaQuery).forEach(function(query){mediaQueryString+='@media '+query+'{'+_this2._buildStyles(stylesByMediaQuery[query])+'}';});return mediaQueryString;}},{key:"render",value:function render(){if(!this.props.rules){return null;}var styles=this._buildStyles(this.props.rules);return _react["default"].createElement("style",{dangerouslySetInnerHTML:{__html:styles}});}}]);return Style;}(_react.PureComponent);Style.propTypes={radiumConfig:_propTypes["default"].object,rules:_propTypes["default"].object,scopeSelector:_propTypes["default"].string};Style.defaultProps={scopeSelector:''};var _default=(0,_context.withRadiumContexts)(Style);exports["default"]=_default;

/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _react=_interopRequireWildcard(__webpack_require__(10));var _enhancer=_interopRequireDefault(__webpack_require__(93));var _styleKeeper=_interopRequireDefault(__webpack_require__(160));var _styleSheet=_interopRequireDefault(__webpack_require__(164));var _context=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}newObj["default"]=obj;return newObj;}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function getStyleKeeper(configProp,configContext){var userAgent=configProp&&configProp.userAgent||configContext&&configContext.userAgent;return new _styleKeeper["default"](userAgent);}var StyleRootInner=(0,_enhancer["default"])(function(_ref){var children=_ref.children,otherProps=_objectWithoutProperties(_ref,["children"]);return _react["default"].createElement("div",otherProps,children,_react["default"].createElement(_styleSheet["default"],null));});var StyleRoot=function StyleRoot(props){/* eslint-disable no-unused-vars */// Pass down all props except config to the rendered div.
	/* eslint-enable no-unused-vars */var radiumConfig=props.radiumConfig;var configContext=(0,_react.useContext)(_context.RadiumConfigContext);var styleKeeper=(0,_react.useRef)(getStyleKeeper(radiumConfig,configContext));return _react["default"].createElement(_context.StyleKeeperContext.Provider,{value:styleKeeper.current},_react["default"].createElement(StyleRootInner,props));};var _default=StyleRoot;exports["default"]=_default;

/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _react=_interopRequireWildcard(__webpack_require__(10));var _styleKeeper=_interopRequireDefault(__webpack_require__(160));var _context=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}}newObj["default"]=obj;return newObj;}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}var StyleSheet=/*#__PURE__*/function(_Component){_inherits(StyleSheet,_Component);// eslint-disable-next-line react/sort-comp
	function StyleSheet(){var _this;_classCallCheck(this,StyleSheet);_this=_possibleConstructorReturn(this,_getPrototypeOf(StyleSheet).apply(this,arguments));_this.styleKeeper=void 0;_this._subscription=void 0;_this._root=void 0;_this._css=void 0;_this._onChange=function(){var nextCSS=_this.styleKeeper.getCSS();if(nextCSS!==_this._css){if(_this._root){_this._root.innerHTML=nextCSS;}else{throw new Error('No root style object found, even after StyleSheet mount.');}_this._css=nextCSS;}};if(!_this.props.styleKeeperContext){throw new Error('StyleRoot is required to use StyleSheet');}_this.styleKeeper=_this.props.styleKeeperContext;_this._css=_this.styleKeeper.getCSS();return _this;}_createClass(StyleSheet,[{key:"componentDidMount",value:function componentDidMount(){this._subscription=this.styleKeeper.subscribe(this._onChange);this._onChange();}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return false;}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this._subscription){this._subscription.remove();}}},{key:"render",value:function render(){var _this2=this;return _react["default"].createElement("style",{dangerouslySetInnerHTML:{__html:this._css},ref:function ref(c){_this2._root=c;}});}}]);return StyleSheet;}(_react.Component);var _default=(0,_context.withRadiumContexts)(StyleSheet);exports["default"]=_default;

/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=keyframes;var _cssRuleSetToString=_interopRequireDefault(__webpack_require__(98));var _hash=_interopRequireDefault(__webpack_require__(148));var _prefixer=__webpack_require__(100);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function keyframes(keyframeRules,name){return{__radiumKeyframes:true,__process:function __process(userAgent){var keyframesPrefixed=(0,_prefixer.getPrefixedKeyframes)(userAgent);var rules=Object.keys(keyframeRules).map(function(percentage){return(0,_cssRuleSetToString["default"])(percentage,keyframeRules[percentage],userAgent);}).join('\n');var animationName=(name?name+'-':'')+'radium-animation-'+(0,_hash["default"])(rules);var css='@'+keyframesPrefixed+' '+animationName+' {\n'+rules+'\n}\n';return{css:css,animationName:animationName};}};}

/***/ }),
/* 166 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{margin:'5px',display:'flex',width:'95%'},hide:{display:'none'},select:{width:'70%',margin:'5px',borderRadius:'5px',':focus':{backgroundColor:'lightpink'}},readOnly:{backgroundColor:'#F3EFEF'},label:{width:'30%',margin:'5px'},button:{width:'5%'}};

/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'account';

	var ButtonAccount = function (_React$PureComponent) {
	    _inherits(ButtonAccount, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonAccount(props) {
	        _classCallCheck(this, ButtonAccount);

	        var _this = _possibleConstructorReturn(this, (ButtonAccount.__proto__ || Object.getPrototypeOf(ButtonAccount)).call(this, props));

	        _this.state = {
	            value: props.value
	        };

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(ButtonAccount, [{
	        key: 'handleClick',
	        value: function handleClick() {
	            return this.props.onClick('account');
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            var value = this.state.value;
	            var buttonStyle = Object.assign({}, styles.button, styles.buttonAccount);
	            return React.createElement(
	                Button,
	                {
	                    value: value,
	                    ref: 'btnAccount',
	                    style: buttonStyle,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value) {
	                return { value: nextProps.value };
	            } else return null;
	        }
	    }]);

	    return ButtonAccount;
	}(React.PureComponent);

	ButtonAccount.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    value: PropTypes.string
	};

	ButtonAccount.defaultProps = {
	    disabled: false,
	    show: true,
	    value: ''
	};

	module.exports = ButtonAccount;

/***/ }),
/* 168 */
/***/ (function(module, exports) {

	'use strict';module.exports={container:{margin:'10px 0'},selectStyle:{margin:'5px',display:'flex',width:'95%'},pageName:{fontWeight:'bold',fontSize:'x-large'}};

/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var React = __webpack_require__(10);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    InputNumber = __webpack_require__(219),
	    Select = __webpack_require__(213),
	    TextArea = __webpack_require__(224),
	    DataGrid = __webpack_require__(189),
	    relatedDocuments = __webpack_require__(227),
	    ModalPage = __webpack_require__(184),
	    styles = __webpack_require__(228);

	var LIBRARIES = ['asutused', 'kontod', 'tunnus', 'project'];

	var Journal = function (_React$PureComponent) {
	    _inherits(Journal, _React$PureComponent);

	    function Journal(props) {
	        _classCallCheck(this, Journal);

	        var _this = _possibleConstructorReturn(this, (Journal.__proto__ || Object.getPrototypeOf(Journal)).call(this, props));

	        _this.state = {
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            loadedData: false
	        };

	        _this.pages = [{ pageName: 'Journal' }];
	        _this.createGridRow = _this.createGridRow.bind(_this);
	        _this.recalcDocSumma = _this.recalcDocSumma.bind(_this);

	        _this.renderer = _this.renderer.bind(_this);
	        _this.gridValidateFields = _this.gridValidateFields.bind(_this);

	        return _this;
	    }

	    _createClass(Journal, [{
	        key: 'render',
	        value: function render() {
	            var initData = this.props.initData ? this.props.initData : {};
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                history: this.props.history ? this.props.history : null,
	                docTypeId: 'JOURNAL',
	                initData: initData,
	                libs: LIBRARIES,
	                pages: this.pages,
	                renderer: this.renderer,
	                createGridRow: this.createGridRow,
	                gridValidator: this.gridValidateFields,
	                recalcDoc: this.recalcDocSumma,
	                focusElement: 'input-number'
	            });
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            var bpm = self.docData && self.docData.bpm ? self.docData.bpm : [],
	                isEditeMode = self.state.edited,
	                gridData = self.docData.gridData,
	                gridColumns = self.docData.gridConfig;

	            var gridRowValidator = this.gridValidateFields();

	            // формируем зависимости
	            if (self.docData.relations) {
	                relatedDocuments(self);
	            }

	            var doc = this.refs['document'];
	            var libs = doc ? doc.libs : {};
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(InputText, {
	                            title: 'Number',
	                            name: 'number',
	                            value: String(self.docData.number) || '',
	                            ref: 'input-number',
	                            readOnly: true }),
	                        React.createElement(InputDate, { title: 'Kuup\xE4ev ',
	                            name: 'kpv',
	                            value: self.docData.kpv,
	                            ref: 'input-kpv',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode }),
	                        React.createElement(Select, { title: 'Partner',
	                            name: 'asutusid',
	                            libs: 'asutused',
	                            data: self.libs['asutused'],
	                            value: self.docData.asutusid || '',
	                            collId: 'id',
	                            defaultValue: self.docData.asutus,
	                            onChange: self.handleInputChange,
	                            ref: 'select-asutusid',
	                            readOnly: !isEditeMode }),
	                        React.createElement(InputText, {
	                            title: 'Dokument ',
	                            name: 'dok',
	                            value: self.docData.dok || '',
	                            ref: 'input-dok',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(TextArea, { title: 'Selgitus',
	                            name: 'selg',
	                            ref: 'textarea-selg',
	                            value: self.docData.selg || '',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.gridContainer },
	                            React.createElement(DataGrid, { source: 'details',
	                                gridData: gridData,
	                                gridColumns: gridColumns,
	                                handleGridRow: this.handleGridRow,
	                                readOnly: !isEditeMode,
	                                showToolBar: isEditeMode,
	                                handleGridBtnClick: self.handleGridBtnClick,
	                                style: styles.grid.headerTable,
	                                ref: 'data-grid' })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(InputNumber, {
	                            title: 'Summa: ',
	                            name: 'summa',
	                            ref: 'input-summa',
	                            value: Number(self.docData.summa || 0),
	                            disabled: true,
	                            width: styles.summa.width,
	                            pattern: '^[0-9]+(\\.[0-9]{1,4})?$' })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(TextArea, { title: 'M\xE4rkused',
	                            name: 'muud',
	                            ref: 'textarea-muud',
	                            value: self.docData.muud || '',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    ),
	                    self.state.gridRowEdit ? this.createGridRow(self) : null
	                )
	            );
	        }

	        /**
	         * Создаст и вернет компонент сроки грида
	         * @returns {XML}
	         */

	    }, {
	        key: 'createGridRow',
	        value: function createGridRow(self) {
	            var row = self.gridRowData,
	                validateMessage = '',
	                // self.state.warning
	            buttonOkReadOnly = validateMessage.length > 0 || !self.state.checked,
	                modalObjects = ['btnOk', 'btnCancel'];

	            if (buttonOkReadOnly) {
	                // уберем кнопку Ок
	                modalObjects.splice(0, 1);
	            }

	            if (!row) return React.createElement('div', null);

	            return React.createElement(
	                'div',
	                { className: '.modalPage' },
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalObjects: modalObjects,
	                        ref: 'modalpage-grid-row',
	                        show: true,
	                        modalPageBtnClick: self.modalPageClick,
	                        modalPageName: 'Rea lisamine / parandamine' },
	                    React.createElement(
	                        'div',
	                        { ref: 'grid-row-container' },
	                        self.state.gridWarning.length ? React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'span',
	                                null,
	                                self.state.gridWarning
	                            )
	                        ) : null,
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Deebet',
	                                name: 'deebet',
	                                libs: 'kontod',
	                                data: self.libs['kontod'],
	                                readOnly: false,
	                                value: row.deebet,
	                                ref: 'deebet',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Kreedit',
	                                name: 'kreedit',
	                                data: self.libs['kontod'],
	                                readOnly: false,
	                                value: row.kreedit,
	                                ref: 'kreedit',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(InputNumber, { title: 'Summa: ',
	                                name: 'summa',
	                                value: Number(row.summa) || 0,
	                                disabled: false,
	                                bindData: false,
	                                ref: 'summa',
	                                width: 'auto',
	                                onChange: self.handleGridRowInput })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Tunnus',
	                                name: 'tunnus',
	                                libs: 'tunnus',
	                                data: self.libs['tunnus'],
	                                readOnly: false,
	                                value: row.tunnus,
	                                ref: 'tunnus',
	                                placeholder: 'Tunnus',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Project',
	                                name: 'proj',
	                                libs: 'project',
	                                data: self.libs['project'],
	                                readOnly: false,
	                                value: row.proj,
	                                ref: 'proj',
	                                placeholder: 'Projekt',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        null,
	                        React.createElement(
	                            'span',
	                            null,
	                            validateMessage
	                        )
	                    )
	                )
	            );
	        }

	        /**
	         * валидатор для строки грида
	         * @param gridRowData строка грида
	         * @returns {string}
	         */

	    }, {
	        key: 'gridValidateFields',
	        value: function gridValidateFields() {
	            var warning = '';
	            var doc = this.refs['document'];
	            if (doc && doc.gridRowData) {

	                // только после проверки формы на валидность
	                if (doc.gridRowData && !doc.gridRowData['deebet']) warning = warning + ' Дебет';
	                if (!doc.gridRowData['kreedit']) warning = warning + ' Кредит';
	                if (!doc.gridRowData['summa']) warning = warning + ' Сумма';

	                this.recalcDocSumma('summa');
	            }
	            return warning;
	        }

	        /**
	         * Перерасчет итоговых сумм
	         * @returns {*}
	         */

	    }, {
	        key: 'recalcDocSumma',
	        value: function recalcDocSumma(field) {
	            var docData = this.refs['document'].docData;

	            docData[field] = 0;

	            if (docData.gridData && docData.gridData.length) {
	                docData.gridData.forEach(function (row) {
	                    docData[field] += Number(row[field]);
	                });
	            }
	        }
	    }]);

	    return Journal;
	}(React.PureComponent);

	Journal.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Journal.defaultProps = {
	    initData: {},
	    userData: {}
	};

	module.exports = Journal;

/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var React = __webpack_require__(10);
	var _fetchData = __webpack_require__(51);
	var DocContext = __webpack_require__(1);
	var Menu = __webpack_require__(50);
	var DocRights = __webpack_require__(171);
	var checkRights = __webpack_require__(172);
	var LIBS_URL = __webpack_require__(173).LIBS.POST_LOAD_LIBS_URL;
	var URL = __webpack_require__(173).DOCS.POST_LOAD_DOCS_URL;

	var Form = __webpack_require__(174),
	    ToolbarContainer = __webpack_require__(78),
	    DocToolBar = __webpack_require__(178),
	    ModalPage = __webpack_require__(184),
	    ModalReport = __webpack_require__(222),
	    styles = __webpack_require__(226);

	/**
	 * Класс реализует базовый документ .
	 */

	var DocumentTemplate = function (_React$Component) {
	    _inherits(DocumentTemplate, _React$Component);

	    function DocumentTemplate(props) {
	        _classCallCheck(this, DocumentTemplate);

	        var _this = _possibleConstructorReturn(this, (DocumentTemplate.__proto__ || Object.getPrototypeOf(DocumentTemplate)).call(this, props));

	        _this.libs = {};
	        _this.state = {
	            docId: _this.props.docId, //если Id документа не передан, то создаем новый док
	            edited: _this.props.docId === 0,
	            reloadData: !Object.keys(props.initData).length,
	            gridRowEdit: false,
	            gridRowEvent: null,
	            warning: '',
	            warningStyle: '',
	            gridWarning: '',
	            checked: true,
	            loadedLibs: false,
	            libParams: {},
	            logs: [],
	            isDisableSave: props.isDisableSave,
	            docData: {},
	            isReport: false,
	            txtReport: []
	        };

	        _this.docData = Object.keys(props.initData).length ? props.initData : { id: props.docId };
	        _this.backup = {};
	        _this.requiredFields = [];
	        _this.serverValidation = [];
	        _this.bpm = [];
	        _this.pages = props.pages;
	        _this.loadingLibs = {};

	        _this._bind('btnAddClick', 'btnEditClick', 'btnLogoutClick', 'validation', 'handleInputChange', 'prepareParamsForToolbar', 'btnDeleteClick', 'btnPrintClick', 'btnEmailClick', 'btnPdfClick', 'btnSaveClick', 'btnCancelClick', 'btnTaskClick', 'fetchData', 'createLibs', 'loadLibs', 'hasLibInCache', 'addRow', 'editRow', 'handleGridBtnClick', 'handleGridRowInput', 'handleGridRow', 'validateGridRow', 'modalPageClick', 'handleGridRowChange', 'handlePageClick', 'modalPageBtnClick', 'btnLogsClick', 'handleGridCellClick', 'setDocumentName', 'modalReportePageBtnClick');

	        _this.gridRowData = {}; //будем хранить строку грида

	        return _this;
	    }

	    _createClass(DocumentTemplate, [{
	        key: 'componentDidUpdate',
	        value: function componentDidUpdate() {
	            // сохраним последнее значение дока этого типа
	            if (this.state.docId) {
	                DocContext[this.props.docTypeId.toLowerCase()] = this.state.docId;
	            }
	        }

	        /**
	         * пишем исходные данные в хранилище, регистрируем обработчики событий
	         */

	    }, {
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            // сохраним в контексте тип документа, с которым мы работает
	            DocContext.docTypeId = this.props.docTypeId;

	            if (this.state.reloadData) {
	                //делаем запрос на получение данных
	                this.fetchData();
	            }

	            this.libs = this.createLibs(); //создаст объект для хранения справочников
	            if (this.props.focusElement) {
	                var focusElement = this.refs[this.props.focusElement];
	                if (focusElement) {
	                    focusElement.focus();
	                }
	            }

	            // задать имя реристра на страницу
	            this.setDocumentName();
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var isInEditMode = this.state.edited;

	            if (this.props.libs.length && !this.state.loadedLibs) {
	                var kpv = new Date().toISOString().slice(0, 10);
	                if (this.docData && this.docData.kpv) {
	                    kpv = this.docData.kpv;
	                }
	                // грузим справочники
	                this.loadLibs(null, kpv);
	            }

	            var warningStyle = styles[this.state.warningType] ? styles[this.state.warningType] : null;

	            var dialogString = this.serverValidation.length > 0 ? 'Dokument ' + this.serverValidation[0].name + ' = ' + this.serverValidation[0].value + ' juba olemas. Kas j\xE4tka?' : '';
	            var btnParams = {
	                btnStart: {
	                    show: true
	                },
	                btnLogin: {
	                    show: true,
	                    disabled: false
	                },
	                btnAccount: {
	                    show: true,
	                    disabled: false
	                }

	            };

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(Menu, { params: btnParams,
	                    ref: 'menu',
	                    history: this.props.history,
	                    rekvId: DocContext.userData ? DocContext.userData.asutusId : 0,
	                    module: this.props.module }),
	                this.renderDocToolBar(),
	                React.createElement(
	                    Form,
	                    { pages: this.pages,
	                        ref: 'form',
	                        handlePageClick: this.handlePageClick,
	                        disabled: isInEditMode },
	                    React.createElement(
	                        ToolbarContainer,
	                        { ref: 'toolbar-container' },
	                        React.createElement(
	                            'div',
	                            { className: 'doc-toolbar-warning', style: warningStyle },
	                            this.state.warning ? React.createElement(
	                                'span',
	                                null,
	                                this.state.warning
	                            ) : null
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.doc },
	                        this.props.renderer ? this.props.renderer(this) : null
	                    )
	                ),
	                React.createElement(
	                    ModalPage,
	                    {
	                        show: this.serverValidation.length > 0,
	                        modalPageName: 'Kontrol',
	                        modalObjects: ['btnOk', 'btnCancel'],
	                        modalPageBtnClick: this.modalPageBtnClick.bind(this) },
	                    React.createElement(
	                        'div',
	                        { ref: 'container' },
	                        React.createElement('img', { ref: 'image', src: styles.modalValidate.iconImage }),
	                        React.createElement(
	                            'span',
	                            null,
	                            ' ',
	                            dialogString,
	                            ' '
	                        )
	                    )
	                ),
	                React.createElement(ModalReport, {
	                    show: this.state.isReport,
	                    report: this.state.txtReport,
	                    modalPageBtnClick: this.modalReportePageBtnClick })
	            );
	        }

	        /**
	         * Обработчик для кнопки Добавить
	         */

	    }, {
	        key: 'btnAddClick',
	        value: function btnAddClick() {
	            var _this2 = this;

	            //бекап данных
	            this.makeBackup();

	            if (this.props.history) {
	                this.props.history.push('/' + this.props.module + '/' + this.props.docTypeId + '/0');
	            }

	            this.setState({ docId: 0, edited: true }, function () {
	                _this2.fetchData().then(function () {
	                    _this2.forceUpdate();
	                });
	            });

	            if (this.props.focusElement && this.refs[this.props.focusElement]) {
	                this.refs[this.props.focusElement].focus();
	            }
	        }

	        /**
	         * Обработчик для кнопки редактировать
	         */

	    }, {
	        key: 'btnEditClick',
	        value: function btnEditClick() {
	            //в режим редактирования
	            this.setState({ edited: true, reloadData: true });
	            //бекап данных
	            this.makeBackup();

	            if (this.props.focusElement && this.refs[this.props.focusElement]) {
	                this.refs[this.props.focusElement].focus();
	            }
	        }
	    }, {
	        key: 'btnDeleteClick',
	        value: function btnDeleteClick() {
	            console.log('btnDeleteClick');
	        }
	    }, {
	        key: 'btnPrintClick',
	        value: function btnPrintClick() {
	            var url = '/print/' + this.props.docTypeId + '/' + DocContext.userData.uuid + '/' + this.state.docId;
	            window.open('' + url);
	        }
	    }, {
	        key: 'btnPdfClick',
	        value: function btnPdfClick() {
	            var url = '/pdf/' + this.props.docTypeId + '/' + DocContext.userData.uuid + '/' + this.state.docId;
	            window.open('' + url);
	        }

	        /**
	         * обработчик для кнопки отправки почты
	         */

	    }, {
	        key: 'btnEmailClick',
	        value: function btnEmailClick() {
	            var _this3 = this;

	            // если документ тип счет или извещение, то отправим напрямую, иначе переадрисуем на письмо
	            if (this.props.docTypeId.toLowerCase() == 'arv' || this.props.docTypeId.toLowerCase() == 'teatis') {
	                this.fetchData('Post', '/email').then(function (response) {
	                    if (response.status === 200) {
	                        _this3.setState({
	                            reloadData: false,
	                            warning: 'Email saadetud edukalt',
	                            warningType: 'ok'
	                        });
	                    } else {
	                        var errorMessage = response.error_message ? response.error_message : '';
	                        _this3.setState({
	                            reloadData: false,
	                            warning: 'Tekkis viga ' + errorMessage,
	                            warningType: 'error'
	                        });
	                    }
	                });
	            } else {
	                // сохраним параметры для формирования вложения в контексте
	                DocContext['email-params'] = {
	                    docId: this.state.docId,
	                    docTypeId: this.props.docTypeId,
	                    queryType: 'id' // ид - документ, where -
	                };

	                this.props.history.push('/' + this.props.module + '/e-mail/0');
	            }
	        }

	        /**
	         * Обработчик для кнопки сохранить
	         */

	    }, {
	        key: 'btnSaveClick',
	        value: function btnSaveClick() {
	            var _this4 = this;

	            if (this.props.docTypeId !== 'PAEVA_TAABEL') {
	                this.setState({
	                    edited: false,
	                    warning: 'Salvestan...',
	                    warningType: 'notValid'
	                });
	            }

	            this.fetchData('Put').then(function (response) {
	                if (!response) return false;
	                //call to save
	                _this4.docData = response.data[0];

	                _this4.setState({
	                    reloadData: false,
	                    warning: 'Salvestatud edukalt',
	                    warningType: 'ok',
	                    edited: false,
	                    docId: _this4.docData.id ? _this4.docData.id : 0
	                }, function () {
	                    var docTypeId = _this4.props.docTypeId,
	                        docId = _this4.docData.id;

	                    // сохраним в контексте последние изменения
	                    DocContext[docTypeId] = _this4.docData.id;

	                    //если было создание нового докмента и этот док был карта ребенка, то сделаем переадрессацию на добавление услуг

	                    // обновим справочник
	                    if (DocContext.libs && DocContext.libs[docTypeId.toLowerCase()]) {
	                        _this4.loadLibs(docTypeId.toLowerCase());
	                    }
	                    // если есть в кеше , то читим
	                    var lib = docTypeId.toLowerCase();

	                    if (DocContext.libs && DocContext.libs[lib] && DocContext.libs[lib].length > 0) {
	                        DocContext.libs[lib] = [];
	                    }

	                    if (docTypeId.toUpperCase() === 'LAPS' && _this4.props.docId === 0) {
	                        // делаем редайрект на карту услуг
	                        docTypeId = 'LAPSE_KAART';
	                        docId = 0;
	                    }

	                    if (_this4.props.reload) {
	                        // reload / redirect
	                        setTimeout(function () {
	                            var current = '/' + (_this4.props.module ? _this4.props.module : 'lapsed') + '/' + docTypeId + '/' + docId;
	                            _this4.props.history.replace('/reload');
	                            setTimeout(function () {
	                                _this4.props.history.replace(current);
	                            });
	                        }, 2000);
	                    }
	                });
	            });
	        }

	        /**
	         * Обработчик события клика дял кнопки Отказ от сохранения
	         */

	    }, {
	        key: 'btnCancelClick',
	        value: function btnCancelClick() {
	            //востановим прежнее состояние
	            if (this.state.docId) {
	                this.restoreFromBackup();
	            } else {
	                this.props.history.goBack();
	            }
	            //режим редактирования
	            this.setState({ edited: false, warning: '', warningType: null });
	        }

	        /**
	         *
	         */

	    }, {
	        key: 'btnTaskClick',
	        value: function btnTaskClick(taskName, kpv, gruppId, tekst, kogus) {
	            var _this5 = this;

	            var task = this.bpm.find(function (task) {
	                return task.name === taskName;
	            });
	            if (!task) {
	                this.setState({
	                    warning: 'Viga, task ' + taskName + ' ei leidnud',
	                    warningType: 'error'

	                });
	                return;
	            }

	            var api = '/newApi/task/' + task.task;

	            this.setState({ warning: 'Töötan...', warningType: 'notValid' });

	            this.fetchData('Post', api, kpv || gruppId || tekst || kogus ? {
	                seisuga: kpv,
	                gruppId: gruppId,
	                viitenumber: tekst,
	                kogus: kogus
	            } : null).then(function (response) {
	                var dataRow = response.result;
	                var dataMessage = response.data.error_message ? response.data.error_message : '';

	                var docId = dataRow.docId;
	                var docTypeId = dataRow.docTypeId ? dataRow.docTypeId : null;

	                if (docId && docTypeId) {
	                    _this5.setState({
	                        warning: 'Edukalt ' + dataMessage,
	                        warningType: 'ok'
	                    }, function () {

	                        setTimeout(function () {
	                            // koostatud uus dok, teeme reload
	                            var current = '/' + _this5.props.module + '/' + _this5.props.docTypeId + '/' + _this5.state.docId;
	                            if (task.task == 'KoostaTagasimakse' || task.task == 'KoostaUlekanneMakse') {

	                                // осуществит переход на карточку контр-агента
	                                _this5.props.history.push('/lapsed/' + docTypeId + '/' + docId);
	                            } else {
	                                _this5.props.history.replace('/reload');
	                                setTimeout(function () {
	                                    _this5.props.history.replace(current);
	                                });
	                            }
	                        }, 2000);
	                    });
	                } else if (dataMessage) {
	                    _this5.setState({
	                        warning: 'Viga, ' + dataMessage,
	                        warningType: 'error'
	                    });
	                }
	            });
	        }

	        /**
	         * Выполнит запрос и покажет логи
	         */

	    }, {
	        key: 'btnLogsClick',
	        value: function btnLogsClick() {
	            var _this6 = this;

	            var api = '/newApi/logs/';

	            this.fetchData('Post', api).then(function (response) {
	                var dataRows = response.data;
	                _this6.setState({ showLogs: true, logs: dataRows });
	            });
	        }

	        /**
	         * Сделает копию текущего состояния данных
	         */

	    }, {
	        key: 'makeBackup',
	        value: function makeBackup() {
	            this.backup = JSON.stringify(this.docData);
	        }

	        /**
	         * востановить текущее состояние из копии
	         */

	    }, {
	        key: 'restoreFromBackup',
	        value: function restoreFromBackup() {
	            this.docData = JSON.parse(this.backup);
	        }

	        /**
	         * Обработчик для инпутов.
	         * @param inputName
	         * @param inputValue
	         * @returns {boolean}
	         */

	    }, {
	        key: 'handleInputChange',
	        value: function handleInputChange(inputName, inputValue) {
	            // обработчик изменений
	            // изменения допустимы только в режиме редактирования
	            if (!this.state.edited) {
	                console.error('not in edite mode');
	                return false;
	            }

	            this.docData[inputName] = inputValue;
	            if (this.props.handleInputChange) {
	                this.props.handleInputChange(inputName, inputValue);
	            }
	            this.validation();
	            this.forceUpdate();
	        }

	        /**
	         * обработчика грида
	         * @param gridData
	         */

	    }, {
	        key: 'handleGridCellClick',
	        value: function handleGridCellClick(action, docId, idx, columnId, value) {
	            if (this.docData && this.docData.gridData) {
	                this.docData.gridData[idx][columnId] = value;
	                this.setState({ docData: this.docData });

	                // если есть триггер, вызовем его
	                if (this.props.trigger) {
	                    this.props.trigger(this, idx, columnId, value);
	                }
	            }
	            this.validation();
	        }

	        /**
	         * вызовет метод валидации данных справочника (кода) и вернет результат проверки
	         * @returns {string}
	         */

	    }, {
	        key: 'validation',
	        value: function validation() {
	            var _this7 = this;

	            if (!this.state.edited) return '';

	            var warning = '',
	                notRequiredFields = [],
	                // пишем в массив поля с отсутствующими данными
	            expressionFields = [],
	                // пишем выражение
	            notMinMaxRule = [];

	            if (this.requiredFields) {

	                this.requiredFields.forEach(function (field) {
	                    if (field.name && field.name in _this7.docData) {
	                        var value = _this7.docData[field.name];

	                        if (!value && field.type !== 'B') {
	                            notRequiredFields.push(field.name);
	                        } else {
	                            if (field.serverValidation) {
	                                // send paring to server to validate

	                                _this7.fetchData('Post', '/newApi/validate/' + field.serverValidation + '/' + value).then(function (response) {
	                                    if (response.data.data.length) {

	                                        var docId = response.data.data[0].id;
	                                        var _warning = _this7.state.warning;

	                                        if (docId && docId !== _this7.state.docId) {
	                                            //переадресовка
	                                            _this7.serverValidation.push({
	                                                name: field.name,
	                                                value: value,
	                                                result: docId
	                                            });

	                                            _warning = _warning + (value + ' (' + field.name + ') juba olemas');

	                                            //svae in state
	                                            _this7.setState({
	                                                warning: _warning,
	                                                warningType: 'notValid'
	                                            });
	                                            _this7.forceUpdate();
	                                        }
	                                    }
	                                });
	                            }
	                        }
	                        // проверка на мин . макс значения

	                        // || value && value > props.max
	                        var checkValue = false;

	                        switch (field.type) {
	                            case 'D':
	                                var controlledValueD = Date.parse(value);
	                                if (field.min && controlledValueD < field.min && field.max && controlledValueD > field.max) {
	                                    checkValue = true;
	                                }
	                                break;
	                            case 'N':
	                                var controlledValueN = Number(value);

	                                if (field.min && controlledValueN === 0 || field.min && controlledValueN < field.min && field.max && controlledValueN > field.max) {
	                                    checkValue = true;
	                                }
	                                break;
	                        }
	                        if (checkValue) {
	                            notMinMaxRule.push(field.name);
	                        }

	                        // проверка на выражение
	                        if (field.expression) {
	                            var data = _this7.docData;
	                            var expression = field.expression;
	                            var result = eval(field.expression);
	                            if (!result) {
	                                expressionFields.push(field.name);
	                            }
	                        }
	                    }

	                    if (field.trigger) {
	                        field.trigger();
	                    }
	                });

	                if (notRequiredFields.length > 0) {
	                    warning = warning + ' puudub vajalikud andmed (' + notRequiredFields.join(', ') + ') ';
	                }

	                if (notMinMaxRule.length > 0) {
	                    warning = warning ? warning : '' + ' min/max on vale(' + notMinMaxRule.join(', ') + ') ';
	                }

	                if (expressionFields.length > 0) {
	                    warning = warning ? warning : '' + ' vale andmed (' + expressionFields.join(', ') + ') ';
	                }

	                this.setState({
	                    warning: warning,
	                    warningType: warning.length ? 'notValid' : null
	                });
	            }

	            return warning; // вернем извещение об итогах валидации
	        }

	        /**
	         * Вернет компонет - панель инструментов документа
	         * @returns {XML}
	         */

	    }, {
	        key: 'renderDocToolBar',
	        value: function renderDocToolBar() {
	            var toolbar = this.prepareParamsForToolbar();
	            return React.createElement(
	                ToolbarContainer,
	                { ref: 'toolbarContainer' },
	                React.createElement(DocToolBar, { ref: 'doc-toolbar',
	                    docTypeId: this.props.docTypeId,
	                    bpm: this.bpm ? this.bpm : [],
	                    logs: this.state.logs,
	                    docId: this.state.docId,
	                    edited: this.state.edited,
	                    docStatus: this.docData.doc_status,
	                    validator: this.validation,
	                    btnAddClick: this.btnAddClick,
	                    btnEditClick: this.btnEditClick,
	                    btnCancelClick: this.btnCancelClick,
	                    btnPrintClick: this.btnPrintClick,
	                    btnEmailClick: this.btnEmailClick,
	                    btnSaveClick: this.btnSaveClick,
	                    btnLogsClick: this.btnLogsClick,
	                    btnTaskClick: this.btnTaskClick,
	                    toolbarParams: toolbar
	                })
	            );
	        }

	        /**
	         *  читаем данные со стора, формируем параметры для кнопок управления, и туда их отдаем
	         * @returns {{btnAdd: {show: boolean, disabled: boolean}, btnEdit: {show: boolean, disabled: boolean}, btnDelete: {show: boolean, disabled: boolean}, btnPrint: {show: boolean, disabled: boolean}}}
	         */

	    }, {
	        key: 'prepareParamsForToolbar',
	        value: function prepareParamsForToolbar() {
	            var docRights = DocRights[this.props.docTypeId] ? DocRights[this.props.docTypeId] : [];
	            var userRoles = DocContext.userData ? DocContext.userData.roles : [];

	            return {
	                btnAdd: {
	                    show: checkRights(userRoles, docRights, 'add'),
	                    disabled: false
	                },
	                btnEdit: {
	                    show: checkRights(userRoles, docRights, 'edit'),
	                    disabled: false
	                },
	                btnSave: {
	                    show: this.state.edited,
	                    disabled: this.state.isDisableSave
	                },
	                btnDelete: {
	                    show: checkRights(userRoles, docRights, 'delete'),
	                    disabled: false
	                },
	                btnPrint: {
	                    show: checkRights(userRoles, docRights, 'print'),
	                    disabled: false
	                },
	                btnStart: {
	                    show: true
	                },
	                btnLogin: {
	                    show: true,
	                    disabled: false
	                },
	                btnAccount: {
	                    show: true,
	                    disabled: false
	                },
	                btnRekv: {
	                    show: true,
	                    disabled: false
	                }

	            };
	        }

	        /**
	         * Выполнит запросы
	         */

	    }, {
	        key: 'fetchData',
	        value: function fetchData(protocol, api, api_params) {
	            var _this8 = this;

	            var url = api ? api : URL + '/' + this.props.docTypeId + '/' + this.state.docId;
	            var method = 'fetchDataPost';
	            var params = {
	                docTypeId: this.props.docTypeId ? this.props.docTypeId : DocContext.docTypeId,
	                module: this.props.module ? this.props.module : DocContext.module,
	                userId: DocContext.userData.userId,
	                uuid: DocContext.userData.uuid,
	                docId: this.state.docId,
	                context: DocContext[api] ? DocContext[api] : null
	            };

	            if (protocol) {
	                //request call not default
	                method = 'fetchData' + protocol;
	                params = Object.assign({}, params, this.docData, api_params ? api_params : {});
	            }

	            return new Promise(function (resolved, rejected) {
	                _fetchData[method](url, params).then(function (response) {
	                    if (response.status && response.status === 401) {
	                        document.location = '/login';
	                    }

	                    if (response.data) {

	                        //execute select calls
	                        if (response.data.action && response.data.action === 'select') {
	                            _this8.docData = response.data.data[0];

	                            // will store required fields info
	                            if (response.data.data[0].requiredFields) {
	                                _this8.requiredFields = response.data.data[0].requiredFields;
	                            }

	                            // will store bpm info
	                            if (response.data.data[0].bpm) {
	                                var docRights = DocRights[_this8.props.docTypeId] ? DocRights[_this8.props.docTypeId] : [];
	                                var userRoles = DocContext.userData ? DocContext.userData.roles : [];

	                                // только доступные таски должны попасть в список
	                                _this8.bpm = response.data.data[0].bpm.filter(function (task) {
	                                    return checkRights(userRoles, docRights, task.task);
	                                });
	                            }

	                            //should return data and called for reload
	                            _this8.setState({ reloadData: false, warning: '', warningType: null });
	                            resolved(response.data.data[0]);
	                        }

	                        if (response.data.action && response.data.action === 'save' && response.data.result.error_code) {

	                            var error_teatis = response.data.result && response.data.result.error_message ? response.data.result.error_message : '';
	                            // error in save
	                            _this8.setState({
	                                warning: 'Tekkis viga: salvestamine eba\xF5nnestus ' + error_teatis,
	                                warningType: 'error',
	                                txtReport: response.data,
	                                isReport: !!(response.data.data && response.data.data.length)
	                            });

	                            return rejected();
	                        }

	                        return resolved(response.data);
	                    } else {
	                        console.error('Fetch viga ', response, params);
	                        _this8.setState({
	                            warning: 'Tekkis viga ' + (response.data.error_message ? response.data.error_message : ''),
	                            warningType: 'error'
	                        });
	                        return rejected();
	                    }
	                }).catch(function (e) {
	                    console.error('catched fetch error ' + e);
	                    _this8.setState({
	                        warning: 'Tekkis viga ' + e,
	                        warningType: 'error'
	                    });

	                    return rejected();
	                });
	            });
	        }

	        /**
	         * Обеспечит загрузку данных для библиотек
	         * libName - код справочника
	         * kpv - дата, по умолчанию сегодня
	         */

	    }, {
	        key: 'loadLibs',
	        value: function loadLibs(libName, kpv) {
	            var _this9 = this;

	            var libsCount = libName ? 1 : this.props.libs.length;

	            var libsToLoad = libName ? [libName] : Object.keys(this.libs);
	            // start loading
	            if (!this.loadingLibs[libName]) {
	                this.loadingLibs[libName] = true;
	            } else {
	                // уже идет загрузка
	                return;
	            }

	            libsToLoad.forEach(function (lib) {

	                var hasSqlWhere = lib in _this9.state.libParams;

	                new Date().toISOString().slice(0, 10); //ajutiselt

	                var params = Object.assign({
	                    module: _this9.props.module,
	                    userId: DocContext.userData.id,
	                    uuid: DocContext.userData.uuid
	                }, hasSqlWhere ? {
	                    sql: _this9.state.libParams[lib],
	                    kpv: kpv ? kpv : new Date().toISOString().slice(0, 10)
	                } : {});

	                // проверим наличие данных в кеше, если нет, то грузим
	                if (!!_this9.state.libParams[lib] || !_this9.hasLibInCache(lib)) {
	                    _fetchData.fetchDataPost(LIBS_URL + '/' + lib, params).then(function (response) {
	                        if (response && 'data' in response) {
	                            _this9.libs[lib] = response.data.result.result.data;

	                            // save lib in cache
	                            DocContext.libs[lib] = _this9.libs[lib];

	                            libsCount--;
	                            // отметка что справочник загружен
	                            _this9.loadingLibs[lib] = false;

	                            if (!libsCount && !_this9.state.loadedLibs) {
	                                //all libs loaded;
	                                _this9.setState({
	                                    loadedLibs: true,
	                                    warning: 'Kõik püsiandmed laaditud õnnestus',
	                                    warningType: 'ok'
	                                });
	                            }
	                        }
	                    }).catch(function (error) {
	                        console.error('loadLibs error', error);
	                    });
	                } else {
	                    // берем данные из кеша
	                    _this9.libs[lib] = DocContext.libs[lib].filter(function (row) {
	                        var kpv = _this9.docData.valid ? _this9.docData.valid : new Date().toISOString().slice(0, 10);
	                        kpv = _this9.docData.kpv ? _this9.docData.kpv : kpv;
	                        // есди в справочнике есть дата и она не пустая
	                        if (!row.valid || new Date(kpv) <= new Date(row.valid)) {
	                            return row;
	                        }
	                    });
	                    _this9.loadingLibs[lib] = false;

	                    libsCount--;

	                    if (!libsCount && !_this9.state.loadedLibs) {
	                        //all libs loaded;
	                        _this9.setState({
	                            loadedLibs: true,
	                            warning: 'Kõik püsiandmed laaditud õnnestus',
	                            warningType: 'ok'
	                        });
	                    }
	                }

	                if (libsCount <= 1 && !_this9.state.loadedLibs) {
	                    //all libs loaded;
	                    _this9.setState({
	                        loadedLibs: true,
	                        warning: 'Kõik püsiandmed laaditud õnnestus',
	                        warningType: 'ok'
	                    });
	                }
	            });
	        }

	        /**
	         * проверит наличии в кеше данных и если нет, то вернет false
	         * @param lib
	         * @returns {boolean}
	         */

	    }, {
	        key: 'hasLibInCache',
	        value: function hasLibInCache(lib) {
	            if (!DocContext.libs) {
	                DocContext.libs = {};
	            }
	            return !DocContext.libs[lib] || DocContext.libs[lib].length === 0 ? false : true;
	        }

	        /**
	         * вернет объект библиотек документа
	         * @returns {{}}
	         */

	    }, {
	        key: 'createLibs',
	        value: function createLibs() {
	            var _this10 = this;

	            var libs = {};
	            var libParams = {};
	            this.props.libs.forEach(function (lib) {
	                if ((typeof lib === 'undefined' ? 'undefined' : _typeof(lib)) == 'object') {
	                    //object
	                    libs[lib.id] = [];
	                    libParams[lib.id] = lib.filter;
	                } else {
	                    libs[lib] = [];
	                }
	            });
	            this.setState({ libParams: libParams }, function () {
	                return _this10.loadLibs();
	            });
	            return libs;
	        }

	        /**
	         * Если есть в пропсах метод создания строки грида, вызовет его
	         */

	    }, {
	        key: 'createGridRow',
	        value: function createGridRow() {
	            var gridRow = void 0;
	            if (this.props.createGridRow) {
	                gridRow = this.props.createGridRow(this);
	            }
	            return gridRow;
	        }

	        /**
	         * Обработчик события клика на вкладку страницы
	         * @param page
	         */

	    }, {
	        key: 'handlePageClick',
	        value: function handlePageClick(page) {
	            var _this11 = this;

	            if (page.handlePageClick) {
	                page.handlePageClick(page.docTypeId);
	            } else if (page.docId) {
	                var current = '/' + DocContext.module + '/' + page.docTypeId + '/' + page.docId;
	                this.props.history.replace('/reload');
	                setTimeout(function () {
	                    _this11.props.history.replace(current);
	                });
	            }
	        }

	        /**
	         * обработчик событий для панели инструментов грида
	         */

	    }, {
	        key: 'handleGridBtnClick',
	        value: function handleGridBtnClick(btnName, activeRow, id, docTypeId) {

	            if (this.props.handleGridBtnClick) {
	                // если есть обработчик, то отдаем туда, иначе вызываем метод на редактирование строки
	                this.props.handleGridBtnClick(btnName, activeRow, id, docTypeId);
	            } else {
	                switch (btnName.toLowerCase()) {
	                    case 'add':
	                        this.addRow();
	                        break;
	                    case 'lisa':
	                        this.addRow();
	                        break;
	                    case 'edit':
	                        this.editRow();
	                        break;
	                    case 'muuda':
	                        this.editRow();
	                        break;
	                    case 'delete':
	                        this.deleteRow();
	                        break;
	                    case 'kustuta':
	                        this.deleteRow();
	                        break;
	                    default:
	                        console.log('Vigane click . ', btnName.toLowerCase());

	                }
	            }
	        }

	        /**
	         *  управление модальным окном
	         * @param gridEvent
	         */

	    }, {
	        key: 'handleGridRow',
	        value: function handleGridRow(gridEvent) {
	            this.setState({ gridRowEdit: true, gridRowEvent: gridEvent });
	        }

	        /**
	         * добавит в состояние новую строку
	         */

	    }, {
	        key: 'addRow',
	        value: function addRow() {
	            //если не задан конфиг грида, то вернет фальш
	            if (!this.docData.gridConfig.length) {
	                return;
	            }

	            var gridColumns = this.docData.gridConfig,
	                newRow = {};

	            //создадим объект - строку грида
	            for (var i = 0; i < gridColumns.length; i++) {
	                var field = gridColumns[i].id;
	                newRow[field] = '';
	            }

	            newRow.id = 'NEW' + Math.random(); // генерим новое ид

	            this.gridRowData = newRow;

	            // откроем модальное окно для редактирования
	            this.setState({ gridRowEdit: true, gridRowEvent: 'add' });
	        }

	        /**
	         * откроет активную строку для редактирования
	         */

	    }, {
	        key: 'editRow',
	        value: function editRow() {
	            this.gridRowData = this.docData.gridData[this.refs['data-grid'].state.activeRow];

	            // откроем модальное окно для редактирования
	            this.setState({ gridRowEdit: true, gridRowEvent: 'edit' });
	        }

	        /**
	         * удалит активную строку
	         */

	    }, {
	        key: 'deleteRow',
	        value: function deleteRow() {
	            this.docData.gridData.splice(this.refs['data-grid'].state.activeRow, 1);

	            // перерасчет итогов
	            if (this.props.recalcDoc) {
	                this.props.recalcDoc();
	            }

	            this.validation();

	            // изменим состояние
	            this.forceUpdate();
	        }

	        /**
	         * Обработчик для строк грида
	         * @param name
	         * @param value
	         */

	    }, {
	        key: 'handleGridRowInput',
	        value: function handleGridRowInput(name, value) {
	            var rea = this.docData.gridConfig.filter(function (row) {
	                if (row.id === name) {
	                    return row;
	                }
	            });

	            var columnType = rea.length && rea[0].type ? rea[0].type : 'text';

	            switch (columnType) {
	                case 'text':
	                    this.gridRowData[name] = String(value);
	                    break;
	                case 'number':
	                    this.gridRowData[name] = Number(value);
	                    break;
	                default:
	                    this.gridRowData[name] = value;
	            }
	            this.forceUpdate();
	            this.validateGridRow();
	        }

	        /**
	         * отслеживаем изменения данных на форме
	         * @param name
	         * @param value
	         */

	    }, {
	        key: 'handleGridRowChange',
	        value: function handleGridRowChange(name, value) {
	            this.gridRowData[name] = value;
	            this.forceUpdate();
	            this.validateGridRow();
	        }

	        /**
	         * will check values on the form and return string with warning
	         */

	    }, {
	        key: 'validateGridRow',
	        value: function validateGridRow() {
	            var warning = '';

	            if (this.props.gridValidator) {
	                warning = this.props.gridValidator(this.gridRowData);
	            }

	            if (warning.length > 2) {
	                // есть проблемы
	                warning = 'Отсутсвуют данные:' + warning;
	            }

	            this.setState({ checked: true, gridWarning: warning });
	        }

	        /**
	         * отработаем Ok из модального окна
	         * @param btnEvent
	         * @param data
	         */

	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(btnEvent, data) {
	            var _this12 = this;

	            var showModal = false;
	            if (btnEvent === 'Ok') {
	                // ищем по ид строку в данных грида, если нет, то добавим строку
	                if (!this.docData.gridData.length || !this.docData.gridData.some(function (row) {
	                    return row.id === _this12.gridRowData.id;
	                })) {
	                    // вставка новой строки
	                    this.docData.gridData.splice(0, 0, this.gridRowData);
	                } else {
	                    this.docData.gridData = this.docData.gridData.map(function (row) {
	                        if (row.id === _this12.gridRowData.id) {
	                            // нашли, замещаем
	                            return _this12.gridRowData;
	                        } else {
	                            return row;
	                        }
	                    });
	                }

	                showModal = !!this.state.warning;
	            }

	            if (this.props.recalcDoc) {
	                this.props.recalcDoc();
	            }
	            this.setState({ gridRowEdit: showModal });
	            return showModal;
	        }
	    }, {
	        key: '_bind',
	        value: function _bind() {
	            var _this13 = this;

	            for (var _len = arguments.length, methods = Array(_len), _key = 0; _key < _len; _key++) {
	                methods[_key] = arguments[_key];
	            }

	            methods.forEach(function (method) {
	                if (_this13[method]) {
	                    _this13[method] = _this13[method].bind(_this13);
	                }
	            });
	        }

	        /**
	         * обработчик для кнопки модального окна
	         * @param btnEvent
	         */

	    }, {
	        key: 'modalPageBtnClick',
	        value: function modalPageBtnClick(btnEvent) {
	            var _this14 = this;

	            //получим значение
	            var docId = this.serverValidation[0].result;

	            // обнулим итог валидации
	            this.serverValidation = [];

	            if (btnEvent === 'Ok') {
	                // редайрект
	                // koostatud uus dok,
	                this.props.history.push('/' + this.props.module + '/' + this.props.docTypeId + '/' + docId);

	                var current = '/' + this.props.module + '/' + this.props.docTypeId + '/' + docId;
	                this.props.history.replace('/reload');
	                setTimeout(function () {
	                    _this14.props.history.replace(current);
	                });
	            } else {
	                this.forceUpdate();
	            }
	        }

	        //поиск названия регистра

	    }, {
	        key: 'setDocumentName',
	        value: function setDocumentName() {
	            var _this15 = this;

	            var docType = DocContext['menu'].find(function (row) {
	                return row.kood === _this15.props.docTypeId;
	            });
	            if (docType) {
	                DocContext.pageName = docType.name;
	            }
	        }

	        /**
	         * уберет окно с отчетом
	         */

	    }, {
	        key: 'modalReportePageBtnClick',
	        value: function modalReportePageBtnClick(event) {
	            var isReport = event && event == 'Ok' ? false : true;
	            this.setState({ isReport: isReport });
	        }
	    }]);

	    return DocumentTemplate;
	}(React.Component);

	DocumentTemplate.propTypes = {
	    initData: PropTypes.object, //Содержание документа
	    requiredFields: PropTypes.array, // обязательные поля
	    edited: PropTypes.bool, //режим редактирования
	    docTypeId: PropTypes.string.isRequired, //тип документа
	    docId: PropTypes.number.isRequired, //id документа
	    libs: PropTypes.array, //список библиотек
	    renderer: PropTypes.func, //частные компонеты документа
	    recalcDoc: PropTypes.func, //перерасчет сумм документа
	    focusElement: PropTypes.string //елемент на который будет отдан фокус при редактировании
	};

	DocumentTemplate.defaultProps = {
	    initData: [],
	    docId: 0,
	    edited: false,
	    requiredFields: [],
	    pages: [],
	    libs: [],
	    isDisableSave: false,
	    isGridDataSave: false,
	    reload: false
	};

	module.exports = DocumentTemplate;

/***/ }),
/* 171 */
/***/ (function(module, exports) {

	'use strict';module.exports={ARV:{select:['kasutaja','arvestaja','vaatleja','peakasutaja'],add:['kasutaja','peakasutaja'],edit:['kasutaja','peakasutaja'],delete:['kasutaja','peakasutaja']},SMK:{select:['kasutaja','arvestaja','vaatleja','peakasutaja'],add:['kasutaja','peakasutaja'],edit:['kasutaja','peakasutaja'],delete:['kasutaja','peakasutaja'],import:['admin']},PANK_VV:{select:['kasutaja','arvestaja','vaatleja','peakasutaja'],add:['kasutaja','peakasutaja','arvestaja'],edit:['kasutaja','peakasutaja','arvestaja'],delete:['kasutaja','peakasutaja','arvestaja']},VMK:{select:['kasutaja','arvestaja','vaatleja','peakasutaja'],add:['kasutaja','peakasutaja'],edit:['kasutaja','peakasutaja'],delete:['kasutaja','peakasutaja']},VORDER:{select:['kasutaja','arvestaja','vaatleja','peakasutaja'],add:['kasutaja','peakasutaja'],edit:['kasutaja','peakasutaja'],delete:['kasutaja','peakasutaja']},SORDER:{select:['kasutaja','arvestaja','vaatleja','peakasutaja'],add:['kasutaja','peakasutaja'],edit:['kasutaja','peakasutaja'],delete:['kasutaja','peakasutaja']},KONTOD:{select:['kasutaja','vaatleja','peakasutaja'],add:['peakasutaja'],edit:['peakasutaja'],delete:['peakasutaja']},TUNNUS:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja']},//nomenclature
	NOMENCLATURE:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja'],import:['admin']},ASUTUSED:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja','arvestaja'],edit:['kasutaja','arvestaja'],delete:['kasutaja']},PROJECT:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja']},ARTIKKEL:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja']},ALLIKAS:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja']},TEGEV:{select:['kasutaja','vaatleja','peakasutaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja']},//asutuse_liik
	ASUTUSE_LIIK:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja']},//koolituse_liik
	KOOLITUSE_LIIK:{select:['arvestaja'],add:['kasutaja'],edit:['kasutaja'],delete:['kasutaja']},//koolituse_tyyp
	KOOLITUSE_TYYP:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja']},TEATIS:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja']},LAPS:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja'],koostaArve:['kasutaja'],koostaEttemaksuArved:['kasutaja'],koostaEttemaksuArve:['kasutaja'],arvestaTaabel:['arvestaja'],importLapsed:['admin'],importViitenr:['admin']},VANEM:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja'],importVanemad:['admin'],importVanemateRegister:['admin'],importLepingud:['admin']},LAPSE_KAART:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja'],importTeenused:['admin'],muudaEttemaksuPeriod:['arvestaja'],muudaTeenusteTahtaeg:['arvestaja']},LAPSE_TAABEL:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja'],importTaabel:['admin']},PAEVA_TAABEL:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja'],arvestaPaevaTaabel:['arvestaja']},LAPSE_GRUPP:{select:['arvestaja'],add:['arvestaja'],edit:['arvestaja'],delete:['arvestaja'],uuendaHinnad:['arvestaja'],importGroups:['admin'],arvestaKondTaabel:['arvestaja']}};

/***/ }),
/* 172 */
/***/ (function(module, exports) {

	'use strict';// will check rights for action
	var checkRights=function checkRights(userRoles,docRights,action){var is_accepted=false;if(docRights&&docRights[action]){docRights[action].forEach(function(role){// raamatupidajad
	is_accepted=userRoles&&userRoles.is_kasutaja&&role=='kasutaja'?true:is_accepted;if(!is_accepted){is_accepted=userRoles&&userRoles.is_peakasutaja&&role=='peakasutaja'?true:is_accepted;}// arvestajad
	if(!is_accepted){is_accepted=userRoles&&userRoles.is_arvestaja&&role=='arvestaja'?true:is_accepted;}// adminid
	if(!is_accepted){is_accepted=userRoles&&userRoles.is_admin&&role=='admin'?true:is_accepted;}});}else{// если нет ограничений
	is_accepted=true;}return is_accepted;};module.exports=checkRights;

/***/ }),
/* 173 */
/***/ (function(module, exports) {

	'use strict';module.exports={RECORDS_LIMIT:1000,// таски
	events:{LAPS:[{name:'Tabeli koostamine',method:'arvestaTaabel',docTypeId:'lapse_taabel'},{name:'Arvete koostamine',method:'koostaArved',docTypeId:'arv'},{name:'Ettemaksuarve koostamine',method:'koostaEttemaksuArved',docTypeId:'arv'}]},// логи
	logs:{gridConfig:[{id:"kasutaja",name:"Kasutaja",width:"20%",show:true},{id:"koostatud",name:"Koostatud",width:"15%"},{id:"muudatud",name:"Muudatud",width:"15%"},{id:"prinditud",name:"Prinditud",width:"15%"},{id:"email",name:"Meilitud",width:"15%"},{id:"earve",name:"e-Arve",width:"15%"},{id:"kustutatud",name:"Kustutatud",width:"15%"}]},// отчет об исполнении
	tulemused:{gridConfig:[{id:"id",name:"id",width:"5%",show:false},{id:'kas_vigane',name:'Staatus',width:'5%',show:true,yesBackgroundColor:'red',noBackgroundColor:'green'},{id:"result",name:"Tulemused",width:"10%",show:false},{id:"error_message",name:"Teatis",width:"70%",show:true},{id:"viitenr",name:"Viitenumber",width:"15%",show:true}]},// счета
	ARV:{LIB_OBJS:[{id:'kontod',filter:''},{id:'dokProps',filter:'where kood = \'ARV\''},{id:'users',filter:''},{id:'tunnus',filter:''},{id:'project',filter:''},{id:'artikkel',filter:''},{id:'allikas',filter:''},{id:'tegev',filter:''},{id:'aa',filter:''},{id:'nomenclature',filter:'where dok = \'ARV\''},{id:'lapse_grupp',filter:''}]},NOMENCLATURE:{LIBRARIES:[{id:'kontod',filter:''},{id:'tunnus',filter:''},{id:'project',filter:''},{id:'document',filter:'where kood::TEXT in (\'ARV\',\'VMK\',\'SMK\')'},{id:'artikkel',filter:''},{id:'allikas',filter:''},{id:'tegev',filter:''},{id:'koolituse_liik',filter:''}],TAXIES:[{id:1,kood:null,name:'-%'},{id:2,kood:'0',name:'0%'},{id:3,kood:'5',name:'5%'},{id:4,kood:'10',name:'10%'},{id:5,kood:'18',name:'18%'},{id:6,kood:'20',name:'20%'}],UHIK:[{id:1,kood:'muud',name:'Muud'},{id:2,kood:'tk',name:'Tükk'},{id:3,kood:'päev',name:'Päev'},{id:4,kood:'kuu',name:'Kuu'},{id:5,kood:'aasta',name:'Aasta'}],ALGORITMID:[{id:1,kood:'päev',name:'Päev'},{id:2,kood:'konstantne',name:'Konstantne'},{id:3,kood:'külastamine',name:'Külastamine'}],TYYP:[{id:2,kood:'SOODUSTUS',name:' '}]},REKV:{LIB_OBJS:[{id:'kontod',filter:''},{id:'asutuse_liik',filter:''}]},LAPSE_GRUPP:{LIBRARIES:[{id:'nomenclature',filter:'where dok = \'ARV\''},{id:'koolituse_tyyp',filter:''}]},LAPSED_KAART:{LIBRARIES:[{id:'tunnus',filter:''},{id:'nomenclature',filter:'where dok = \'ARV\''},{id:'lapse_grupp',filter:''}]},// нода для справочников
	LIBS:{POST_LOAD_LIBS_URL:'/newApi/loadLibs'},// нода для документов
	DOCS:{POST_LOAD_DOCS_URL:'/newApi/document'}};

/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    PageLabel = __webpack_require__(175),
	    styles = __webpack_require__(177);

	var Form = function (_React$PureComponent) {
	    _inherits(Form, _React$PureComponent);

	    function Form(props) {
	        _classCallCheck(this, Form);

	        var _this = _possibleConstructorReturn(this, (Form.__proto__ || Object.getPrototypeOf(Form)).call(this, props));

	        _this.handlePageClick = _this.handlePageClick.bind(_this);

	        return _this;
	    }

	    /**
	     * Обработчик клика вкладки
	     * @param page
	     */


	    _createClass(Form, [{
	        key: 'handlePageClick',
	        value: function handlePageClick(page) {

	            if (this.props.handlePageClick) {
	                this.props.handlePageClick(page);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            var pages = this.props.pages;
	            return React.createElement(
	                'div',
	                null,
	                pages.length ? pages.map(function (page, idx) {
	                    return React.createElement(PageLabel, {
	                        key: idx,
	                        active: idx == 0 ? true : false,
	                        handlePageClick: _this2.handlePageClick,
	                        page: page,
	                        disabled: _this2.props.disabled,
	                        ref: 'page-' + idx });
	                }) : null,
	                React.createElement(
	                    'div',
	                    { style: styles.page },
	                    this.props.children
	                )
	            );
	        }
	    }]);

	    return Form;
	}(React.PureComponent);

	Form.propTypes = {
	    pages: PropTypes.array.isRequired,
	    handlePageClick: PropTypes.func,
	    disabled: PropTypes.bool
	};

	Form.defaultProps = {
	    disabled: false.valueOf(),
	    pages: []
	};

	module.exports = Form;

/***/ }),
/* 175 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(176);

	var PageLabel = function (_React$PureComponent) {
	    _inherits(PageLabel, _React$PureComponent);

	    function PageLabel(props) {
	        _classCallCheck(this, PageLabel);

	        var _this = _possibleConstructorReturn(this, (PageLabel.__proto__ || Object.getPrototypeOf(PageLabel)).call(this, props));

	        _this.state = {
	            disabled: props.disabled
	        };

	        _this.handleClick = _this.handleClick.bind(_this);

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(PageLabel, [{
	        key: 'handleClick',
	        value: function handleClick() {
	            // обработчик на событие клик, подгружаем связанный документ

	            if (this.state.disabled) {
	                return;
	            }

	            var page = this.props.page;

	            if (this.props.handlePageClick) {
	                this.props.handlePageClick(page);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var page = this.props.page,
	                style = Object.assign({}, styles.pageLabel, this.props.active ? { backgroundColor: 'white' } : {});

	            return React.createElement(
	                'label',
	                { style: style,
	                    disabled: this.state.disabled,
	                    ref: 'pageLabel',
	                    onClick: this.handleClick },
	                page.pageName
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.disabled !== prevState.disabled) {
	                return { disabled: nextProps.disabled };
	            } else return null;
	        }
	    }]);

	    return PageLabel;
	}(React.PureComponent);

	PageLabel.propTypes = {
	    handlePageClick: PropTypes.func,
	    page: PropTypes.object.isRequired,
	    disabled: PropTypes.bool,
	    active: PropTypes.bool
	};

	PageLabel.defaultProps = {
	    disabled: false,
	    active: true
	};

	module.exports = PageLabel;

/***/ }),
/* 176 */
/***/ (function(module, exports) {

	'use strict';module.exports={pageLabel:{border:'1px solid lightGrey',borderRadius:'3px',borderBottom:'1px solid white',margin:'5px',marginLeft:'-7px',padding:'2px 10px 2px 10px'}};

/***/ }),
/* 177 */
/***/ (function(module, exports) {

	'use strict';module.exports={page:{/*
	        border:'1px solid black',
	*/borderRadius:'3px'},icons:{add:'images/icons/add.png',edit:'images/icons/edit.png',delete:'images/icons/delete.png',filter:'images/icons/filter.png',print:'images/icons/print.png',ok:'images/icons/ok.png',cancel:'images/icons/cancel.png'}};

/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	//const {withRouter} = require('react-router-dom');

	var React = __webpack_require__(10),
	    ToolbarContainer = __webpack_require__(78),
	    BtnAdd = __webpack_require__(179),
	    BtnEdit = __webpack_require__(84),
	    BtnSave = __webpack_require__(180),
	    BtnCancel = __webpack_require__(181),
	    BtnPrint = __webpack_require__(182),
	    BtnEmail = __webpack_require__(183),
	    BtnPdf = __webpack_require__(186),
	    BtnLogs = __webpack_require__(187),
	    TaskWidget = __webpack_require__(210);

	var DocToolBar = function (_React$PureComponent) {
	    _inherits(DocToolBar, _React$PureComponent);

	    function DocToolBar(props) {
	        _classCallCheck(this, DocToolBar);

	        var _this = _possibleConstructorReturn(this, (DocToolBar.__proto__ || Object.getPrototypeOf(DocToolBar)).call(this, props));

	        _this.btnEditClick = _this.btnEditClick.bind(_this);
	        _this.btnAddClick = _this.btnAddClick.bind(_this);
	        _this.btnSaveClick = _this.btnSaveClick.bind(_this);
	        _this.btnCancelClick = _this.btnCancelClick.bind(_this);
	        _this.btnPrintClick = _this.btnPrintClick.bind(_this);
	        _this.btnPdfClick = _this.btnPdfClick.bind(_this);
	        _this.btnEmailClick = _this.btnEmailClick.bind(_this);
	        _this.btnLogsClick = _this.btnLogsClick.bind(_this);
	        _this.handleButtonTask = _this.handleButtonTask.bind(_this);
	        _this.handleSelectTask = _this.handleSelectTask.bind(_this);

	        _this.docId = null;

	        if (props.docId) {
	            _this.docId = props.docId;
	        }
	        _this.state = {
	            docStatus: props.docStatus
	        };
	        return _this;
	    }

	    _createClass(DocToolBar, [{
	        key: 'render',
	        value: function render() {
	            var isEditMode = this.props.edited,
	                isDocDisabled = this.state.docStatus === 2,
	                docId = this.docId;

	            // кнопки режима редактирования должны пропасть если редактирование и показывать если разрешено
	            var kas_add = this.props.toolbarParams ? this.props.toolbarParams['btnAdd'].show : true;
	            if (kas_add && isEditMode) {
	                kas_add = false;
	            }
	            var kas_edit = this.props.toolbarParams ? this.props.toolbarParams['btnAdd'].show : true;
	            if (kas_edit && isEditMode) {
	                kas_edit = false;
	            }

	            var toolbarParams = {
	                btnAdd: {
	                    show: kas_add,
	                    disabled: isEditMode
	                },
	                btnEdit: {
	                    show: kas_edit,
	                    disabled: isDocDisabled
	                },
	                btnPrint: {
	                    show: true,
	                    disabled: false
	                },
	                btnEmail: {
	                    show: true,
	                    disabled: false
	                },
	                btnSave: {
	                    show: isEditMode && !isDocDisabled,
	                    disabled: this.props.toolbarParams && this.props.toolbarParams['btnSave'] ? this.props.toolbarParams['btnSave'].disabled : false
	                },
	                btnCancel: {
	                    show: isEditMode && docId !== 0,
	                    disabled: false
	                }
	            };

	            return React.createElement(
	                ToolbarContainer,
	                { ref: 'toolbarContainer' },
	                React.createElement(BtnAdd, { ref: 'btnAdd',
	                    onClick: this.btnAddClick,
	                    show: toolbarParams['btnAdd'].show,
	                    disabled: toolbarParams['btnAdd'].disabled }),
	                React.createElement(BtnEdit, { ref: 'btnEdit',
	                    value: 'Muuda',
	                    onClick: this.btnEditClick,
	                    show: toolbarParams['btnEdit'].show,
	                    disabled: toolbarParams['btnEdit'].disabled }),
	                React.createElement(BtnSave, { ref: 'btnSave',
	                    value: 'Salvesta',
	                    onClick: this.btnSaveClick,
	                    show: toolbarParams['btnSave'].show,
	                    disabled: toolbarParams['btnSave'].disabled }),
	                React.createElement(BtnCancel, { ref: 'btnCancel',
	                    value: 'Tühista',
	                    onClick: this.btnCancelClick,
	                    show: toolbarParams['btnCancel'].show,
	                    disabled: toolbarParams['btnCancel'].disabled }),
	                React.createElement(BtnPrint, { ref: 'btnPrint',
	                    value: 'Trükk',
	                    onClick: this.btnPrintClick,
	                    show: toolbarParams['btnPrint'].show,
	                    disabled: toolbarParams['btnPrint'].disabled }),
	                React.createElement(BtnEmail, { ref: 'btnEmail',
	                    docTypeId: this.props.docTypeId,
	                    onClick: this.btnEmailClick,
	                    show: toolbarParams['btnEmail'].show,
	                    disabled: toolbarParams['btnEmail'].disabled }),
	                React.createElement(BtnLogs, { ref: 'btnLogs',
	                    data: this.props.logs,
	                    onClick: this.btnLogsClick,
	                    show: !isEditMode }),
	                this.props.bpm.length && !isDocDisabled && !isEditMode ? React.createElement(TaskWidget, { ref: 'taskWidget',
	                    taskList: this.props.bpm,
	                    handleSelectTask: this.handleSelectTask,
	                    handleButtonTask: this.handleButtonTask
	                }) : null
	            );
	        }

	        /**
	         * Вызовет метод перехода на новый документ
	         */

	    }, {
	        key: 'btnAddClick',
	        value: function btnAddClick() {
	            if (this.props.btnAddClick) {
	                this.props.btnAddClick();
	            } else {
	                console.error('method add not exists in props');
	            }
	        }

	        /**
	         * обработчик для кнопки Edit
	         */

	    }, {
	        key: 'btnEditClick',
	        value: function btnEditClick() {
	            // переводим документ в режим редактирования, сохранен = false
	            if (!this.props.docStatus || this.props.docStatus < 2) {
	                //this.docId
	                if (this.props.history) {
	                    return this.props.history.push('/raama/' + value);
	                }

	                if (this.props.btnEditClick) {
	                    this.props.btnEditClick();
	                } else {
	                    console.error('method edit not exists in props');
	                }
	            }
	        }
	    }, {
	        key: 'btnPrintClick',
	        value: function btnPrintClick() {
	            if (this.props.btnPrintClick) {
	                this.props.btnPrintClick();
	            }
	        }
	    }, {
	        key: 'btnPdfClick',
	        value: function btnPdfClick() {
	            if (this.props.btnPdfClick) {
	                this.props.btnPdfClick();
	            }
	        }

	        /**
	         * обработчик для кнопки email
	         */

	    }, {
	        key: 'btnEmailClick',
	        value: function btnEmailClick() {
	            if (this.props.btnEmailClick) {
	                this.props.btnEmailClick();
	            }
	        }

	        /**
	         * обработчик для кнопки Save
	         */

	    }, {
	        key: 'btnSaveClick',
	        value: function btnSaveClick() {
	            // валидатор
	            var validationMessage = this.props.validator ? this.props.validator() : '',
	                isValid = this.props.validator ? !validationMessage : true;

	            if (isValid) {
	                // если прошли валидацию, то сохранеям
	                if (this.props.btnSaveClick) {
	                    this.props.btnSaveClick();
	                } else {
	                    console.error('method save not exists in props');
	                }
	            } else {
	                console.log('Document is not valid', isValid);
	            }
	        }

	        /**
	         * Обработчик для события клика для кнопки Отказ
	         */

	    }, {
	        key: 'btnCancelClick',
	        value: function btnCancelClick() {
	            if (this.props.btnCancelClick) {
	                this.props.btnCancelClick();
	            } else {
	                console.error('method cancel not exists in props');
	            }
	        }
	    }, {
	        key: 'btnLogsClick',
	        value: function btnLogsClick() {
	            if (this.props.btnLogsClick) {
	                this.props.btnLogsClick();
	            }
	        }
	    }, {
	        key: 'handleButtonTask',
	        value: function handleButtonTask(taskName, kpv, gruppId, tekst, kogus) {
	            // ишем таску
	            var task = this.props.bpm.find(function (row) {
	                return row.name === taskName;
	            });

	            if (task) {
	                // метод вызывается при выборе задачи
	                return this.props.btnTaskClick(task.name, kpv, gruppId, tekst, kogus);
	            }
	        }
	    }, {
	        key: 'handleSelectTask',
	        value: function handleSelectTask(e) {
	            // метод вызывается при выборе задачи
	            var taskValue = e.target.value;
	            if (this.props.btnTaskClick) {
	                return this.props.btnTaskClick(taskValue);
	            }
	        }
	    }]);

	    return DocToolBar;
	}(React.PureComponent);

	DocToolBar.propTypes = {
	    bpm: PropTypes.array,
	    edited: PropTypes.bool,
	    docStatus: PropTypes.number,
	    validator: PropTypes.func
	};

	DocToolBar.defaultProps = {
	    bpm: [],
	    edited: false,
	    docStatus: 0
	};

	//module.exports = withRouter(DocToolBar);
	module.exports = DocToolBar;

/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'add';

	var ButtonRegisterAdd = function (_React$PureComponent) {
	    _inherits(ButtonRegisterAdd, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterAdd(props) {
	        _classCallCheck(this, ButtonRegisterAdd);

	        return _possibleConstructorReturn(this, (ButtonRegisterAdd.__proto__ || Object.getPrototypeOf(ButtonRegisterAdd)).call(this, props));
	    }

	    _createClass(ButtonRegisterAdd, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick('add');
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    value: 'Lisa',
	                    ref: 'btnAdd',
	                    style: styles.button,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterAdd;
	}(React.PureComponent);

	/*
	ButtonRegisterAdd.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonRegisterAdd.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonRegisterAdd;

/***/ }),
/* 180 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'save';

	var ButtonRegisterSave = function (_React$PureComponent) {
	    _inherits(ButtonRegisterSave, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterSave(props) {
	        _classCallCheck(this, ButtonRegisterSave);

	        var _this = _possibleConstructorReturn(this, (ButtonRegisterSave.__proto__ || Object.getPrototypeOf(ButtonRegisterSave)).call(this, props));

	        _this.state = {
	            disabled: props.disabled
	        };
	        return _this;
	    }

	    _createClass(ButtonRegisterSave, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            // дисейблим кнопку
	            if (!this.state.disabled) {
	                this.setState({ disabled: true });
	                return this.props.onClick();
	            }
	        }
	    }, {
	        key: 'componentDidUpdate',
	        value: function componentDidUpdate(nextProps) {
	            this.setState({ disabled: nextProps.disabled });
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnSave',
	                    value: 'Save',
	                    show: this.props.show,
	                    disabled: this.state.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterSave;
	}(React.PureComponent);

	ButtonRegisterSave.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    disabled: PropTypes.bool
	};

	ButtonRegisterSave.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonRegisterSave;

/***/ }),
/* 181 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'cancel';

	var ButtonRegisterCancel = function (_React$PureComponent) {
	    _inherits(ButtonRegisterCancel, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterCancel(props) {
	        _classCallCheck(this, ButtonRegisterCancel);

	        var _this = _possibleConstructorReturn(this, (ButtonRegisterCancel.__proto__ || Object.getPrototypeOf(ButtonRegisterCancel)).call(this, props));

	        _this.state = {
	            disabled: props.disabled
	        };
	        return _this;
	    }

	    _createClass(ButtonRegisterCancel, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick();
	        }
	    }, {
	        key: 'componentDidUpdate',
	        value: function componentDidUpdate(nextProps) {
	            this.setState({ disabled: nextProps.disabled });
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnCancel',
	                    value: 'Cancel',
	                    show: this.props.show,
	                    disabled: this.state.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterCancel;
	}(React.PureComponent);

	ButtonRegisterCancel.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    disabled: PropTypes.bool
	};

	ButtonRegisterCancel.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonRegisterCancel;

/***/ }),
/* 182 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'print';

	var ButtonRegisterPrint = function (_React$PureComponent) {
	    _inherits(ButtonRegisterPrint, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterPrint(props) {
	        _classCallCheck(this, ButtonRegisterPrint);

	        return _possibleConstructorReturn(this, (ButtonRegisterPrint.__proto__ || Object.getPrototypeOf(ButtonRegisterPrint)).call(this, props));
	    }

	    _createClass(ButtonRegisterPrint, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick(this.props.value);
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnPrint',
	                    value: this.props.value,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterPrint;
	}(React.PureComponent);

	/*
	ButtonRegisterPrint.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonRegisterPrint.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Print'
	};

	module.exports = ButtonRegisterPrint;

/***/ }),
/* 183 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ModalPage = __webpack_require__(184),
	    ICON = 'mail';

	var ButtonRegisterEmail = function (_React$Component) {
	    _inherits(ButtonRegisterEmail, _React$Component);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterEmail(props) {
	        _classCallCheck(this, ButtonRegisterEmail);

	        var _this = _possibleConstructorReturn(this, (ButtonRegisterEmail.__proto__ || Object.getPrototypeOf(ButtonRegisterEmail)).call(this, props));

	        _this.state = {
	            showModal: false
	        };
	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        return _this;
	    }

	    /**
	     * обработчик события клик, откроет модальное окно
	     * @param e
	     */


	    _createClass(ButtonRegisterEmail, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            // если требуется предварительно ихвещение, то открываем модальное окно, иначе вызываем метод из пропсов
	            if (this.props.docTypeId.toLowerCase() === 'arv' || this.props.docTypeId.toLowerCase() === 'teatis') {
	                this.setState({ showModal: true });
	            } else {
	                this.modalPageClick('Ok');
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    Button,
	                    {
	                        ref: 'btnEmail',
	                        value: this.props.value,
	                        show: this.props.show,
	                        disabled: this.props.disabled,
	                        onClick: function onClick(e) {
	                            return _this2.handleClick(e);
	                        } },
	                    React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	                ),
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalPageBtnClick: this.modalPageClick,
	                        modalPageName: '' + this.props.value,
	                        show: this.state.showModal,
	                        modalObjects: ['btnOk', 'btnCancel']
	                    },
	                    'Kas saada email ?'
	                )
	            );
	        }

	        /**
	         * обработчик на событие клика на кнопки можального окна
	         * @param btnEvent
	         */

	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(btnEvent) {
	            if (btnEvent === 'Ok') {
	                this.props.onClick(this.props.value);
	            }
	            this.setState({ showModal: false });
	        }
	    }]);

	    return ButtonRegisterEmail;
	}(React.Component);

	/*
	ButtonRegisterPrint.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonRegisterEmail.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Email',
	    docTypeId: ''
	};

	module.exports = ButtonRegisterEmail;

/***/ }),
/* 184 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    Button = __webpack_require__(82),
	    buttonStyles = __webpack_require__(81),
	    styles = __webpack_require__(185);

	var ModalPage = function (_React$PureComponent) {
	    _inherits(ModalPage, _React$PureComponent);

	    function ModalPage(props) {
	        _classCallCheck(this, ModalPage);

	        var _this = _possibleConstructorReturn(this, (ModalPage.__proto__ || Object.getPrototypeOf(ModalPage)).call(this, props));

	        _this.handleBtnClick.bind(_this);
	        _this.changeVisibilityModalPage.bind(_this);
	        _this.state = {
	            show: _this.props.show
	        };
	        _this.onKeyUp = _this.onKeyUp.bind(_this);
	        return _this;
	    }

	    _createClass(ModalPage, [{
	        key: 'changeVisibilityModalPage',
	        value: function changeVisibilityModalPage() {
	            this.setState({ show: !this.state.show });
	        }

	        // will update state if props changed

	    }, {
	        key: 'handleBtnClick',
	        value: function handleBtnClick(btnEvent) {
	            // закрываем окно и если передан обработчик, отдаем туда данные

	            this.changeVisibilityModalPage();
	            if (this.props.modalPageBtnClick) {
	                var show = this.props.modalPageBtnClick(btnEvent);
	            }
	        }

	        /**
	         * перехватит сыбтия нажатия кнопки и вызовет дефолтные методы
	         * @param e
	         */

	    }, {
	        key: 'onKeyUp',
	        value: function onKeyUp(e) {
	            switch (e.key) {
	                case 'Enter':
	                    if (this.refs['btnOk']) {
	                        this.handleBtnClick('Ok');
	                    }
	                    break;
	                case 'Escape':
	                    if (this.refs['btnCancel']) {
	                        this.handleBtnClick('Cancel');
	                    }
	                    break;
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            // если передан атрибу modalObjects = ['btnOk','btnCancel']
	            var hideBtnOk = this.props.modalObjects.indexOf('btnOk') == -1 ? false : true,
	                // управление кнопкой Ок
	            hideBtnCancel = this.props.modalObjects.indexOf('btnCancel') == -1 ? false : true,
	                // управление кнопкой Cancel
	            displayModal = this.state.show ? 'flex' : 'none',
	                pagePosition = this.props.position,
	                containerStyle = Object.assign({}, styles.container, { display: displayModal }, { justifyContent: pagePosition }),
	                buttonOkStyle = Object.assign({}, styles.modalPageButtons, styles.defaultButton);

	            var Style = Object.assign({}, styles.modalPage, this.props.styles ? this.props.styles : {});

	            return React.createElement(
	                'div',
	                {
	                    ref: 'container',
	                    style: containerStyle,
	                    onKeyUp: this.onKeyUp
	                },
	                React.createElement(
	                    'div',
	                    { style: Style, ref: 'modalPageContainer' },
	                    React.createElement(
	                        'div',
	                        { style: styles.header, ref: 'modalPageHeader' },
	                        React.createElement(
	                            'span',
	                            { ref: 'headerName', style: styles.headerName },
	                            ' ',
	                            this.props.modalPageName,
	                            ' '
	                        ),
	                        React.createElement(Button, { style: styles.buttonClose, ref: 'btnClose',
	                            onClick: this.changeVisibilityModalPage.bind(this), value: 'x' })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.modalPageContent, ref: 'modalPageContent' },
	                        this.props.children
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.modalFooter, ref: 'modalPageButtons' },
	                        hideBtnOk ? React.createElement(
	                            Button,
	                            {
	                                ref: 'btnOk',
	                                value: 'Ok',
	                                style: buttonOkStyle,
	                                width: 'width' in styles.modalPageButtons ? styles.modalPageButtons.width : null,
	                                height: 'height' in styles.modalPageButtons ? styles.modalPageButtons.height : null,
	                                onClick: this.handleBtnClick.bind(this, 'Ok'),
	                                id: 'btnOk' },
	                            React.createElement('img', { ref: 'image', src: buttonStyles.icons['ok'] })
	                        ) : null,
	                        React.createElement('div', { style: styles.buttonsSeparator }),
	                        hideBtnCancel ? React.createElement(
	                            Button,
	                            {
	                                ref: 'btnCancel',
	                                value: 'Cancel',
	                                style: styles.modalPageButtons,
	                                width: 'width' in styles.modalPageButtons ? styles.modalPageButtons.width : null,
	                                height: 'height' in styles.modalPageButtons ? styles.modalPageButtons.height : null,
	                                onClick: this.handleBtnClick.bind(this, 'Cancel'),
	                                className: 'modalPageButtons',
	                                id: 'btnCancel' },
	                            React.createElement('img', { ref: 'image', src: buttonStyles.icons['cancel'] })
	                        ) : null
	                    )
	                )
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.show !== prevState.show) {
	                return { show: nextProps.show };
	            } else return null;
	        }
	    }]);

	    return ModalPage;
	}(React.PureComponent);

	/*
	ModalPage.propTypes = {
	    modalPageName: PropTypes.string.isRequired,
	    modalPageBtnClick: PropTypes.func.isRequired,
	    show: PropTypes.bool,
	    position: PropTypes.oneOf(['center', 'flex-start', 'flex-end']),
	}
	*/

	ModalPage.defaultProps = {
	    modalPageName: 'defaulName',
	    modalObjects: ['btnOk', 'btnCancel'],
	    position: 'center',
	    show: false
	};

	module.exports = ModalPage;

/***/ }),
/* 185 */
/***/ (function(module, exports) {

	'use strict';module.exports={container:{position:'fixed',top:'0',left:0,right:0,bottom:0,backgroundColor:'rgba(255, 255, 255, 0.25)',display:'flex',justifyContent:'center'},modalPage:{position:'relative',border:'1px solid black',background:'white',margin:'8px',borderRadius:'4px',outline:'none',display:'flex',flexDirection:'column',alignSelf:'center',height:'auto',maxHeight:'95%',overflow:'auto',zIndex:1},modalPageContent:{padding:'10px',margin:'10px'},header:{height:'30px',width:'100%',border:'1px solid darkgray',background:'lightgray',display:'flex',justifyContent:'space-between'},headerName:{color:'white',alignSelf:'center',marginLeft:'10px'},modalFooter:{alignSelf:'center',display:'flex',marginBotton:'10px'},modalPageButtons:{height:'30px',width:'100px',marginBottom:'10px'},buttonsSeparator:{width:'10px'},buttonClose:{borderRadius:'50%',backgroundColor:'lightgray',border:'none',fontWeight:'900',margin:'0px 0px'},left:{right:'auto',left:'0'},right:{left:'auto',right:'0'},defaultButton:{backgroundColor:'lightBlue'}};

/***/ }),
/* 186 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'attachment';

	var ButtonPdf = function (_React$PureComponent) {
	    _inherits(ButtonPdf, _React$PureComponent);

	    // кнопка вызова файла влодения в формате PDF
	    function ButtonPdf(props) {
	        _classCallCheck(this, ButtonPdf);

	        return _possibleConstructorReturn(this, (ButtonPdf.__proto__ || Object.getPrototypeOf(ButtonPdf)).call(this, props));
	    }

	    _createClass(ButtonPdf, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            if (this.props.onClick()) {
	                return this.props.onClick();
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnGetPdf',
	                    value: this.props.value ? this.props.value : 'PDF',
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonPdf;
	}(React.PureComponent);

	ButtonPdf.defaultProps = {
	    disabled: false,
	    show: true
	};
	module.exports = ButtonPdf;

/***/ }),
/* 187 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(188),
	    DataGrid = __webpack_require__(189),
	    Button = __webpack_require__(82),
	    BtnInfo = __webpack_require__(85),
	    ModalPage = __webpack_require__(184);

	var GRID_CONFIG = __webpack_require__(173).logs.gridConfig;

	var ShowLogs = function (_React$PureComponent) {
	    _inherits(ShowLogs, _React$PureComponent);

	    function ShowLogs(props) {
	        _classCallCheck(this, ShowLogs);

	        var _this = _possibleConstructorReturn(this, (ShowLogs.__proto__ || Object.getPrototypeOf(ShowLogs)).call(this, props));

	        _this.state = {
	            show: !!_this.props.data.length
	        };

	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        return _this;
	    }

	    _createClass(ShowLogs, [{
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return this.state.show ? this.modalPage() : React.createElement(
	                Button,
	                {
	                    ref: 'btnLogs',
	                    value: 'Loggid',
	                    show: this.props.show,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.button.icon })
	            );
	        }
	    }, {
	        key: 'handleClick',
	        value: function handleClick() {
	            this.props.onClick();
	            this.setState({
	                show: true
	            });
	        }
	    }, {
	        key: 'modalPage',
	        value: function modalPage() {
	            var modalObjects = ['btnOk'];

	            return React.createElement(
	                ModalPage,
	                {
	                    modalObjects: modalObjects,
	                    ref: 'modalpage-grid',
	                    show: true,
	                    modalPageBtnClick: this.modalPageClick,
	                    modalPageName: 'Loggid' },
	                React.createElement(
	                    'div',
	                    { style: styles.btnInfo },
	                    React.createElement(BtnInfo, { ref: 'btnInfo',
	                        value: '',
	                        docTypeId: 'logid',
	                        show: true })
	                ),
	                React.createElement(
	                    'div',
	                    { ref: 'grid-row-container' },
	                    React.createElement(DataGrid, { gridData: this.props.data.data,
	                        gridColumns: GRID_CONFIG,
	                        showToolBar: false,
	                        ref: 'data-grid' })
	                )
	            );
	        }
	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(event) {
	            if (event === 'Ok') {

	                // показать новое значение
	                this.setState({ show: false });
	            }
	        }
	    }]);

	    return ShowLogs;
	}(React.PureComponent);

	ShowLogs.propTypes = {
	    show: PropTypes.bool
	};

	ShowLogs.defaultProps = {
	    show: true
	};

	module.exports = ShowLogs;

/***/ }),
/* 188 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{margin:'5px',display:'flex',width:'95%'},button:{icon:'/images/icons/info.png',width:'10%'},btnInfo:{display:'flex',flexDirection:'row-reverse'}};

/***/ }),
/* 189 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    ToolbarContainer = __webpack_require__(78),
	    GridButtonAdd = __webpack_require__(179),
	    GridButtonEdit = __webpack_require__(84),
	    GridButtonDelete = __webpack_require__(190),
	    ModalPageDelete = __webpack_require__(191),
	    InputCheckBox = __webpack_require__(193),
	    keydown = __webpack_require__(195);

	//const    KEYS = [38, 40]; // мониторим только стрелки вверх и внизх
	var styles = __webpack_require__(209);

	var isExists = function isExists(object, prop) {
	    var result = false;
	    if (object && prop in object) {
	        result = true;
	    }
	    return result;
	};

	//@keydown @todo

	var DataGrid = function (_React$Component) {
	    _inherits(DataGrid, _React$Component);

	    function DataGrid(props) {
	        _classCallCheck(this, DataGrid);

	        var _this = _possibleConstructorReturn(this, (DataGrid.__proto__ || Object.getPrototypeOf(DataGrid)).call(this, props));

	        _this.state = {
	            activeRow: 0,
	            activeColumn: '',
	            isDelete: false,
	            sort: {
	                name: null,
	                direction: null
	            },
	            value: _this.props.value ? _this.props.value : 0,
	            gridData: props.gridData,
	            subtotals: props.subtotals ? props.subtotals : [],
	            isSelect: _this.props.isSelect
	        };

	        _this.handleGridHeaderClick = _this.handleGridHeaderClick.bind(_this);
	        _this.handleCellDblClick = _this.handleCellDblClick.bind(_this);
	        _this.handleKeyDown = _this.handleKeyDown.bind(_this);
	        _this.prepareTableRow = _this.prepareTableRow.bind(_this);
	        _this.handleGridBtnClick = _this.handleGridBtnClick.bind(_this);
	        _this.getGridRowIndexById = _this.getGridRowIndexById.bind(_this);
	        _this.prepareTableFooter = _this.prepareTableFooter.bind(_this);
	        _this.getSum = _this.getSum.bind(_this);
	        _this.grid = [];

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(DataGrid, [{
	        key: 'render',
	        value: function render() {
	            var tableHeaderStyle = Object.assign({}, styles.headerTable ? styles.headerTable : {}, this.props.style);
	            var tableMainStyle = Object.assign({}, styles.mainTable ? styles.mainTable : {}, this.props.style);

	            var toolbarParams = Object.assign({

	                btnAdd: {
	                    show: true,
	                    disabled: false
	                },
	                btnEdit: {
	                    show: true,
	                    disabled: false
	                },
	                btnDelete: {
	                    show: true,
	                    disabled: false
	                },
	                btnPrint: {
	                    show: true,
	                    disabled: false
	                }
	            }, this.props.toolbarParams ? this.props.toolbarParams : {});

	            // примем в зачет переданные стили
	            styles = _extends({}, styles, this.props.style);
	            return React.createElement(
	                'div',
	                { style: styles.main },
	                this.props.showToolBar ? React.createElement(
	                    ToolbarContainer,
	                    {
	                        ref: 'grid-toolbar-container',
	                        position: 'left' },
	                    React.createElement(GridButtonAdd, {
	                        show: toolbarParams.btnAdd.show,
	                        onClick: this.handleGridBtnClick,
	                        value: 'Lisa',
	                        ref: 'grid-button-add' }),
	                    React.createElement(GridButtonEdit, {
	                        show: toolbarParams.btnEdit.show,
	                        onClick: this.handleGridBtnClick,
	                        value: 'Muuda',
	                        ref: 'grid-button-edit' }),
	                    React.createElement(GridButtonDelete, {
	                        show: toolbarParams.btnDelete.show,
	                        onClick: this.handleGridBtnClick,
	                        value: 'Kustuta',
	                        ref: 'grid-button-delete' })
	                ) : null,
	                React.createElement(
	                    'div',
	                    { style: styles.header },
	                    React.createElement(
	                        'table',
	                        { ref: 'dataGridTable', style: tableHeaderStyle, onKeyPress: this.handleKeyDown },
	                        React.createElement(
	                            'tbody',
	                            null,
	                            React.createElement(
	                                'tr',
	                                null,
	                                this.prepareTableHeader()
	                            )
	                        )
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.wrapper },
	                    React.createElement(
	                        'table',
	                        { style: tableMainStyle, tabIndex: '1', onKeyDown: this.handleKeyDown,
	                            onKeyPress: this.handleKeyDown },
	                        React.createElement(
	                            'tbody',
	                            null,
	                            React.createElement(
	                                'tr',
	                                { style: { visibility: 'collapse' } },
	                                this.prepareTableHeader(true)
	                            ),
	                            this.prepareTableRow(),
	                            this.props.subtotals && this.props.subtotals.length ? React.createElement(
	                                'tr',
	                                null,
	                                this.prepareTableFooter()
	                            ) : null
	                        )
	                    )
	                ),
	                React.createElement(ModalPageDelete, {
	                    show: this.state.isDelete,
	                    modalPageBtnClick: this.modalDeletePageBtnClick.bind(this) })
	            );
	        } // render


	    }, {
	        key: 'modalDeletePageBtnClick',
	        value: function modalDeletePageBtnClick(btnEvent) {
	            //close modalpage
	            this.setState({ isDelete: false });

	            if (btnEvent === 'Ok' && this.props.handleGridBtnClick) {
	                this.props.handleGridBtnClick('delete', this.state.activeRow, this.state.gridData.length ? this.state.gridData[this.state.activeRow].id : 0, this.props.docTypeId ? this.props.docTypeId : '');
	            }
	        }

	        /**
	         * обработчика сабытия клика по кнопки панели грида
	         * @param btnName
	         * @returns {*}
	         */

	    }, {
	        key: 'handleGridBtnClick',
	        value: function handleGridBtnClick(btnName) {

	            var activeRow = this.state.activeRow;

	            var id = this.state.gridData.length ? this.state.gridData[activeRow].id : 0;

	            var docTypeId = this.props.docTypeId ? this.props.docTypeId : '';

	            if ((btnName === 'delete' || btnName === 'Kustuta') && !this.state.isDelete) {
	                // should open modal page and ask confirmation
	                return this.setState({ isDelete: true });
	            }

	            if (this.props.handleGridBtnClick) {
	                this.props.handleGridBtnClick(btnName, activeRow, id, docTypeId);
	            }
	        }

	        /**
	         * ищем индех в массиве данных
	         */

	    }, {
	        key: 'getGridRowIndexById',
	        value: function getGridRowIndexById() {
	            var _this2 = this;

	            var index = 0;

	            if (this.state.value) {
	                index = this.state.gridData.findIndex(function (row) {
	                    return row.id === _this2.state.value;
	                });
	                index = index > -1 ? index : 0;
	            }
	            return index;
	        }

	        /**
	         * отрабатывает событи клика по ячейке
	         * @param idx
	         */

	    }, {
	        key: 'handleCellClick',
	        value: function handleCellClick(idx, columnId) {
	            var _this3 = this;

	            if (this.state.gridData.length > 0) {
	                var action = this.props.onChangeAction || null;

	                var docId = this.state.gridData[idx].id;
	                var gridData = _extends({}, this.state.gridData);

	                // Отработает клик по колонки селект для выбора массива записей
	                if (this.state.isSelect && columnId == 'select') {
	                    // уже выбран, надо исключить
	                    gridData[idx].select = !gridData[idx].select;
	                }

	                // если поле не отмечено как readOnly то сл. действие не должно происходить
	                if (columnId) {
	                    var column = this.props.gridColumns.filter(function (row) {
	                        return row.id == columnId;
	                    });
	                    if (column && column.length && !column[0].readOnly && this.props.isForUpdate && gridData[idx][columnId] !== null && gridData[idx][columnId] !== undefined) {

	                        // value changed
	                        gridData[idx][columnId] = !gridData[idx][columnId];
	                    }
	                }

	                this.setState({
	                    gridData: gridData,
	                    activeRow: idx,
	                    value: docId
	                }, function () {
	                    var value = _this3.state.gridData[idx][columnId];
	                    if (_this3.props.onClick) {
	                        _this3.props.onClick(action, docId, idx, columnId, value);
	                    }
	                });
	            }
	        }

	        /**
	         * обработчик для двойного клика по ячейке
	         * @param idx
	         */

	    }, {
	        key: 'handleCellDblClick',
	        value: function handleCellDblClick(idx) {
	            // отметим активную строку и вызовен обработчик события dblClick
	            this.handleCellClick(idx, null);
	            if (this.props.onDblClick) {
	                this.props.onDblClick();
	            }
	        }

	        /**
	         * Отработает клик по заголовку грида (сортировка)
	         * @param name - наименование колонки
	         */

	    }, {
	        key: 'handleGridHeaderClick',
	        value: function handleGridHeaderClick(name) {
	            if (name === 'select' || name === 'row_id') {
	                // виртуальная колонка
	                // меняем значение выбрано на наоборот

	                if (this.state.gridData.length > 0 && name === 'select') {
	                    var data = this.state.gridData;
	                    data.forEach(function (row) {
	                        row.select = !row.select;
	                    });
	                    this.setState({ gridData: data });
	                }
	                return;
	            }

	            var sort = this.state.sort;
	            if (sort.name === name) {
	                sort.direction = sort.direction === 'asc' ? 'desc' : 'asc';
	            } else {
	                sort = {
	                    name: name,
	                    direction: 'asc'
	                };
	            }

	            var sortBy = [{ column: sort.name, direction: sort.direction }];

	            this.setState({
	                activeColumn: name,
	                sort: sort
	            });

	            if (this.props.onHeaderClick) {
	                this.props.onHeaderClick(sortBy);
	            }
	        }

	        /**
	         * Обработчик на событие - нажитие стрелки вниз
	         * @param e
	         */

	    }, {
	        key: 'handleKeyDown',
	        value: function handleKeyDown(e) {
	            // реакция на клавиатуру
	            var rowIndex = this.state.activeRow;
	            switch (e.which) {
	                case 40:
	                    // вниз, увеличим активную строку на + 1
	                    rowIndex++;

	                    if (this.state.gridData.length < rowIndex) {
	                        // вернем прежнее значение
	                        rowIndex = this.state.activeRow;
	                    }
	                    break;
	                case 38:
	                    // вниз, увеличим активную строку на - 1
	                    rowIndex--;
	                    rowIndex = rowIndex < 0 ? 0 : rowIndex;
	                    break;
	            }
	            this.setState({
	                activeRow: rowIndex
	            });
	        }

	        /**
	         * Готовит строку для грида
	         */

	    }, {
	        key: 'prepareTableRow',
	        value: function prepareTableRow() {
	            var _this4 = this;

	            var activeRow = this.getGridRowIndexById();

	            return this.state.gridData.map(function (row, rowIndex) {
	                var objectIndex = 'tr-' + rowIndex;

	                var gridColumns = _this4.props.gridColumns.map(function (row) {
	                    if (row.id === 'select' && _this4.props.isSelect) {
	                        row.show = true;
	                    }

	                    return row;
	                });

	                return React.createElement(
	                    'tr',
	                    {
	                        ref: objectIndex,
	                        onClick: _this4.handleCellClick.bind(_this4, rowIndex, null),
	                        onDoubleClick: _this4.handleCellDblClick.bind(_this4, rowIndex),
	                        onKeyDown: _this4.handleKeyDown.bind(_this4),
	                        style: Object.assign({}, styles.tr, activeRow === rowIndex ? styles.focused : {}),
	                        key: objectIndex },
	                    gridColumns.map(function (column, columnIndex) {
	                        // назначим символы для отображения логических данных
	                        var boolValueYes = column.boolSumbolYes ? column.boolSumbolYes : styles.boolSumbol['yes'].value || null;
	                        var boolValueNo = column.boolSumbolNo ? column.boolSumbolNo : styles.boolSumbol['no'].value || null;
	                        var boolValueNull = column.boolSumbolNull ? column.boolSumbolNull : styles.boolSumbol['null'] ? styles.boolSumbol['null'].value : null;

	                        // приведем значение value к заданому типу для параметра hideEmptyValue
	                        var fixedValue = column.type && column.type == "integer" ? Number(row[column.id]) : row[column.id];

	                        var cellIndex = 'td-' + rowIndex + '-' + columnIndex;

	                        var display = isExists(column, 'show') ? column.show : true,
	                            width = isExists(column, 'width') ? column.width : '100%',
	                            style = Object.assign({}, styles.td, !display ? { display: 'none' } : {}, { width: width });

	                        // проверим на заданный цвет
	                        if (styles.boolColour && column.type && column.type === 'boolean') {

	                            style = Object.assign(style, { backgroundColor: !!row[column.id] ? styles.boolColour.yes : styles.boolColour.no }, { color: !!row[column.id] ? styles.boolSumbol['yes'].color : styles.boolSumbol['no'].color });
	                        }

	                        // если задан фон в конфиге грида
	                        if (column.yesBackgroundColor && (!!row[column.id] || row[column.id] == 'Viga')) {
	                            style = _extends({}, style, { backgroundColor: column.yesBackgroundColor });
	                        }

	                        // Ок, Viga для  рапорта об исполнениее
	                        if (column.noBackgroundColor && (!row[column.id] || row[column.id] == 'Ok')) {
	                            style = _extends({}, style, { backgroundColor: column.noBackgroundColor });
	                        }

	                        if (column.nullBackgroundColor && row[column.id] == null) {
	                            style = _extends({}, style, { backgroundColor: column.nullBackgroundColor });
	                        }
	                        // цвет, при значении NULL
	                        if (styles.td && styles.td.nullColour && row[column.id] == null) {
	                            style = Object.assign(style, { backgroundColor: styles.td.nullColour });
	                        }

	                        // кастомное обработка стилей на клетку
	                        if (_this4.props.custom_styling) {
	                            var customeStyle = _this4.props.custom_styling(column, row);
	                            style = _extends({}, style, customeStyle);
	                        }

	                        // оберем для конкретного поля параметр hideEmptyValue

	                        var isHideEmptyValue = column.hideEmptyValue ? column.hideEmptyValue : false;

	                        if (column.hideEmptyValue && row['nom_id'] && row['nom_id'] == 999999999) {
	                            isHideEmptyValue = false;
	                        }

	                        return React.createElement(
	                            'td',
	                            { style: style,
	                                ref: cellIndex,
	                                key: cellIndex,
	                                align: column.type && column.type === 'boolean' ? 'center' : 'left',
	                                onClick: _this4.handleCellClick.bind(_this4, rowIndex, column.id)
	                            },
	                            column.type && column.type === 'boolean' ? React.createElement(
	                                'span',
	                                null,
	                                !!row[column.id] ? boolValueYes : row[column.id] == null ? boolValueNull : boolValueNo
	                            ) : isHideEmptyValue && !fixedValue ? null : row[column.id]
	                        );
	                    })
	                );
	            }, this);
	        }

	        /**
	         * Готовит компонент итоговая строка грида
	         * @param isHidden - колонка будет скрыта
	         */

	    }, {
	        key: 'prepareTableFooter',
	        value: function prepareTableFooter(isHidden) {
	            var _this5 = this;

	            return this.props.gridColumns.map(function (column, index) {
	                var headerIndex = 'td-' + index;

	                var headerStyle = 'td';

	                var display = isExists(column, 'show') ? column.show : true,
	                    width = isExists(column, 'width') ? column.width : '100%',
	                    style = Object.assign({}, styles[headerStyle], !display ? { display: 'none' } : {}, { width: width });

	                var subIndex = _this5.props.subtotals.indexOf(column.id);
	                var total = void 0;
	                if (subIndex > -1) {
	                    total = _this5.getSum(column.id, column.type && column.type == 'integer' ? 0 : 2);
	                }

	                // установить видимость
	                return React.createElement(
	                    'td',
	                    {
	                        style: style,
	                        ref: headerIndex,
	                        key: headerIndex
	                    },
	                    React.createElement(
	                        'span',
	                        null,
	                        total
	                    )
	                );
	            }, this);
	        }

	        /**
	         * Готовит компонент заголовок грида
	         * @param isHidden - колонка будет скрыта
	         */

	    }, {
	        key: 'prepareTableHeader',
	        value: function prepareTableHeader(isHidden) {
	            var _this6 = this;

	            // если есть опция выбор, то добавим в массив колонку с полем ticked
	            var gridColumns = this.props.gridColumns.map(function (row) {
	                if (row.id === 'select') {
	                    row.show = _this6.props.isSelect;
	                }
	                return row;
	            });

	            return gridColumns.map(function (column, index) {
	                var headerIndex = 'th-' + index + column.id;

	                var headerStyle = isHidden ? 'thHidden' : 'th';

	                // проверка на стиль заголовка, на фонт
	                var fontColor = {
	                    color: column.showBold && styles[headerStyle].boldColor ? styles[headerStyle].boldColor : styles[headerStyle].color
	                };

	                var display = isExists(column, 'show') ? column.show : true,
	                    width = isExists(column, 'width') ? column.width : '100%',
	                    style = Object.assign({}, styles[headerStyle], !display ? { display: 'none' } : {}, { width: width }, fontColor),
	                    activeColumn = _this6.state.activeColumn,
	                    iconType = _this6.state.sort.direction,
	                    imageStyleAsc = Object.assign({}, styles.image, activeColumn === column.id && iconType === 'asc' ? {} : { display: 'none' }),
	                    imageStyleDesc = Object.assign({}, styles.image, activeColumn === column.id && iconType === 'desc' ? {} : { display: 'none' });

	                // установить видимость
	                return React.createElement(
	                    'th',
	                    {
	                        style: style,
	                        ref: headerIndex,
	                        key: headerIndex,
	                        onClick: _this6.handleGridHeaderClick.bind(_this6, column.id) },
	                    React.createElement(
	                        'span',
	                        null,
	                        column.name
	                    ),
	                    isHidden ? React.createElement('img', { ref: 'imageAsc', style: imageStyleAsc, src: styles.icons['asc'], alt: 'asc' }) : null,
	                    isHidden ? React.createElement('img', { ref: 'imageDesc', style: imageStyleDesc, src: styles.icons['desc'], alt: 'desc' }) : null
	                );
	            }, this);
	        }

	        /**
	         * расчет итогов
	         * @param columnField
	         * @param dec
	         * @returns {string}
	         */

	    }, {
	        key: 'getSum',
	        value: function getSum(columnField, dec) {
	            var total = 0;
	            var summa = 0;
	            if (this.state.gridData.length) {
	                this.state.gridData.forEach(function (row) {
	                    summa = row[columnField] && !isNaN(row[columnField]) ? Number(row[columnField]) : row[columnField] ? 1 : 0;
	                    total = total + Number(summa);
	                });
	            }

	            return total.toFixed(dec ? dec : 0);
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            return nextProps;
	            if (JSON.stringify(nextProps.gridData) !== JSON.stringify(prevState.gridData) || JSON.stringify(nextProps.gridColumns) !== JSON.stringify(prevState.gridColumns) || nextProps.gridData.length !== prevState.gridData.length || nextProps.isSelect !== prevState.isSelect) {
	                return { gridData: nextProps.gridData };
	            } else return null;
	        }
	    }]);

	    return DataGrid;
	}(React.Component);

	DataGrid.propTypes = {
	    gridColumns: PropTypes.arrayOf(PropTypes.shape({
	        id: PropTypes.string.isRequired,
	        name: PropTypes.string.isRequired,
	        width: PropTypes.string,
	        show: PropTypes.bool,
	        type: PropTypes.oneOf(['text', 'number', 'integer', 'date', 'string', 'select', 'boolean'])
	    })).isRequired,
	    gridData: PropTypes.array.isRequired,
	    onChangeAction: PropTypes.string,
	    onClick: PropTypes.func,
	    onDblClick: PropTypes.func,
	    onHeaderClick: PropTypes.func,
	    custom_styling: PropTypes.func,
	    activeRow: PropTypes.number,
	    handleGridCellClick: PropTypes.func,
	    showToolBar: PropTypes.bool,
	    subtotals: PropTypes.array
	};

	DataGrid.defaultProps = {
	    gridColumns: [],
	    gridData: [],
	    style: {},
	    showToolBar: false,
	    isForUpdate: false,
	    custom_styling: null,
	    subtotals: []
	};

	module.exports = DataGrid;

/***/ }),
/* 190 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'delete';

	var ButtonRegisterDelete = function (_React$PureComponent) {
	    _inherits(ButtonRegisterDelete, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterDelete(props) {
	        _classCallCheck(this, ButtonRegisterDelete);

	        return _possibleConstructorReturn(this, (ButtonRegisterDelete.__proto__ || Object.getPrototypeOf(ButtonRegisterDelete)).call(this, props));
	    }

	    _createClass(ButtonRegisterDelete, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick('delete');
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    value: 'Kustuta',
	                    ref: 'btnDelete',
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterDelete;
	}(React.PureComponent);

	/*
	ButtonRegisterDelete.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonRegisterDelete.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonRegisterDelete;

/***/ }),
/* 191 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    ModalPage = __webpack_require__(184),
	    styles = __webpack_require__(192);

	var ModalPageDelete = function (_React$PureComponent) {
	    _inherits(ModalPageDelete, _React$PureComponent);

	    function ModalPageDelete(props) {
	        _classCallCheck(this, ModalPageDelete);

	        var _this = _possibleConstructorReturn(this, (ModalPageDelete.__proto__ || Object.getPrototypeOf(ModalPageDelete)).call(this, props));

	        _this.state = {
	            show: _this.props.show
	        };
	        return _this;
	    }

	    // will update state if props changed


	    _createClass(ModalPageDelete, [{
	        key: 'render',
	        value: function render() {
	            var modalObjects = ['btnOk', 'btnCancel'];

	            return React.createElement(
	                ModalPage,
	                { ref: 'modalPage',
	                    modalPageBtnClick: this.props.modalPageBtnClick,
	                    show: this.state.show,
	                    modalPageName: 'Delete document' },
	                React.createElement(
	                    'div',
	                    { ref: 'container' },
	                    React.createElement('img', { ref: 'image', src: styles.icon }),
	                    React.createElement(
	                        'span',
	                        { ref: 'message' },
	                        ' Kas kustuta dokument ? '
	                    )
	                )
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.show !== prevState.show) {
	                return { show: nextProps.show };
	            } else return null;
	        }
	    }]);

	    return ModalPageDelete;
	}(React.PureComponent);
	/*
	ModalPageDelete.propTypes = {
	    modalPageBtnClick: PropTypes.func.isRequired
	}
	*/


	module.exports = ModalPageDelete;

/***/ }),
/* 192 */
/***/ (function(module, exports) {

	'use strict';module.exports={icon:'/images/icons/delete.png'};

/***/ }),
/* 193 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var radium = __webpack_require__(91);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(194);

	var Input = function (_React$PureComponent) {
	    _inherits(Input, _React$PureComponent);

	    function Input(props) {
	        _classCallCheck(this, Input);

	        var _this = _possibleConstructorReturn(this, (Input.__proto__ || Object.getPrototypeOf(Input)).call(this, props));

	        _this.state = {
	            value: Boolean(props.value),
	            readOnly: props.readOnly,
	            disabled: props.disabled
	        };
	        _this.onChange = _this.onChange.bind(_this);
	        return _this;
	    }

	    // will update state if props changed


	    _createClass(Input, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            this.refs['checkbox'].checked = this.state.value;
	        }
	    }, {
	        key: 'onChange',
	        value: function onChange(e) {
	            var value = e.target.checked;

	            this.setState({ value: value });

	            if (!this.state.readOnly && this.props.onChange) {
	                this.props.onChange(this.props.name, value);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var inputStyle = Object.assign({}, styles.input, this.props.width ? { width: this.props.width } : {}, this.state.readOnly ? styles.readOnly : {});

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'label',
	                    { style: styles.label, htmlFor: this.props.name, ref: 'label' },
	                    this.props.title
	                ),
	                React.createElement('input', { type: 'checkbox',
	                    id: this.props.name,
	                    ref: 'checkbox',
	                    style: inputStyle,
	                    name: this.props.name,
	                    value: this.state.value,
	                    checked: this.state.value,
	                    readOnly: this.state.readOnly,
	                    onChange: this.onChange,
	                    disabled: this.state.readOnly
	                })
	            );
	        }

	        /**
	         * установит фокус на элементы
	         */

	    }, {
	        key: 'focus',
	        value: function focus() {
	            this.refs['checkbox'].focus();
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value || nextProps.readOnly !== prevState.readOnly) {
	                return { value: nextProps.value, readOnly: nextProps.readOnly };
	            } else return null;
	        }
	    }]);

	    return Input;
	}(React.PureComponent);

	Input.propTypes = {
	    name: PropTypes.string.isRequired,
	    value: PropTypes.bool,
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    title: PropTypes.string
	};

	Input.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    value: false,
	    title: ''
	};

	module.exports = radium(Input);

/***/ }),
/* 194 */
/***/ (function(module, exports) {

	'use strict';module.exports={input:{':focus':{backgroundColor:'lightpink'}},readOnly:{backgroundColor:'#F3EFEF'},wrapper:{margin:'5px',display:'flex',width:'95%'},label:{width:'30%',margin:'5px'}};

/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.ALL_PRINTABLE_KEYS=exports.ALL_KEYS=exports.Keys=exports.setBinding=exports.keydownScoped=exports.default=undefined;var _decorators=__webpack_require__(196);Object.defineProperty(exports,'default',{enumerable:true,get:function get(){return _interopRequireDefault(_decorators).default;}});Object.defineProperty(exports,'keydownScoped',{enumerable:true,get:function get(){return _decorators.keydownScoped;}});var _store=__webpack_require__(198);Object.defineProperty(exports,'setBinding',{enumerable:true,get:function get(){return _store.setBinding;}});var _keys=__webpack_require__(200);Object.defineProperty(exports,'Keys',{enumerable:true,get:function get(){return _interopRequireDefault(_keys).default;}});Object.defineProperty(exports,'ALL_KEYS',{enumerable:true,get:function get(){return _keys.ALL_KEYS;}});Object.defineProperty(exports,'ALL_PRINTABLE_KEYS',{enumerable:true,get:function get(){return _keys.ALL_PRINTABLE_KEYS;}});__webpack_require__(208);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

/***/ }),
/* 196 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});exports.keydownScoped=undefined;var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};/**
	                                                                                                                                                                                                                                                                               * @module decorators
	                                                                                                                                                                                                                                                                               *
	                                                                                                                                                                                                                                                                               */var _class_decorator=__webpack_require__(197);var _class_decorator2=_interopRequireDefault(_class_decorator);var _method_decorator=__webpack_require__(206);var _method_decorator2=_interopRequireDefault(_method_decorator);var _method_decorator_scoped=__webpack_require__(207);var _method_decorator_scoped2=_interopRequireDefault(_method_decorator_scoped);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/**
	 * noopDecorator
	 *
	 * @access private
	 * @return {undefined} Returns `undefined` so that the original undecorated instance/method is used
	 */function noopDecorator(){return undefined;}/**
	 * _decorator
	 *
	 * @access private
	 * @param {Function} methodFn The method wrapper to delegate to, based on whether user has specified a scoped decorator or not
	 * @param {Array} ...args Remainder of arguments passed in
	 * @return {Function} The decorated class or method
	 */function _decorator(methodFn){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}// check the first argument to see if it's a user-supplied keycode or array
	// of keycodes, or if it's the wrapped class or method
	var testArg=args[0];var isArray=Array.isArray(testArg);// if the test argument is not an object or function, it is user-supplied
	// keycodes. else there are no arguments and it's just the wrapped class
	if(isArray||~['string','number','symbol'].indexOf(typeof testArg==='undefined'?'undefined':_typeof(testArg))){var keys=isArray?testArg:args;// return the decorator function, which on the next call will look for
	// the presence of a method name to determine if this is a wrapped method
	// or component
	return function(target,methodName,descriptor){return methodName?methodFn({target:target,descriptor:descriptor,keys:keys}):(0,_class_decorator2.default)(target,keys);};}else{var WrappedComponent=args[0];var methodName=args[1];// method decorators without keycode (which) arguments are not allowed.
	if(WrappedComponent&&!methodName){return _class_decorator2.default.apply(undefined,args);}else{console.warn(methodName+': Method decorators must have keycode arguments, so the decorator for this method will not do anything');return noopDecorator;}}}/**
	 * keydownScoped
	 *
	 * Method decorator that will look for changes to its targeted component's
	 * `keydown` props to decide when to trigger, rather than responding directly
	 * to keydown events. This lets you specify a @keydown decorated class higher
	 * up in the view hierarchy for larger scoping of keydown events, or for
	 * programmatically sending keydown events as props into the components in order
	 * to trigger decorated methods with matching keys.
	 *
	 * @access public
	 * @param {Array} ...args  All (or no) arguments passed in from decoration
	 * @return {Function} The decorated class or method
	 */function keydownScoped(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return _decorator.apply(undefined,[_method_decorator_scoped2.default].concat(args));}/**
	 * keydown
	 *
	 * The main decorator and default export, handles both classes and methods.
	 *
	 * @access public
	 * @param {Array} ...args  All (or no) arguments passed in from decoration
	 * @return {Function} The decorated class or method
	 */function keydown(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}return _decorator.apply(undefined,[_method_decorator2.default].concat(args));}exports.default=keydown;exports.keydownScoped=keydownScoped;

/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=__webpack_require__(10);var _react2=_interopRequireDefault(_react);var _store=__webpack_require__(198);var store=_interopRequireWildcard(_store);var _event_handlers=__webpack_require__(203);var _keys=__webpack_require__(200);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/**
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module componentWrapper
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *//**
	 * componentWrapper
	 *
	 * @access public
	 * @param {object} WrappedComponent React component class to be wrapped
	 * @param {array} [keys] The key(s) bound to the class
	 * @return {object} The higher-order function that wraps the decorated class
	 */function componentWrapper(WrappedComponent){var keys=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_keys.ALL_KEYS;var KeyBoardHelper=function(_React$Component){_inherits(KeyBoardHelper,_React$Component);function KeyBoardHelper(props){_classCallCheck(this,KeyBoardHelper);var _this=_possibleConstructorReturn(this,(KeyBoardHelper.__proto__||Object.getPrototypeOf(KeyBoardHelper)).call(this,props));_this.state={event:null};return _this;}_createClass(KeyBoardHelper,[{key:'componentDidMount',value:function componentDidMount(){(0,_event_handlers.onMount)(this);}},{key:'componentWillUnmount',value:function componentWillUnmount(){(0,_event_handlers.onUnmount)(this);}},{key:'handleKeyDown',value:function handleKeyDown(event){var _this2=this;// to simulate a keypress, set the event and then clear it in the callback
	this.setState({event:event},function(){return _this2.setState({event:null});});}},{key:'render',value:function render(){return _react2.default.createElement(WrappedComponent,_extends({},this.props,{keydown:this.state}));}}]);return KeyBoardHelper;}(_react2.default.Component);store.setBinding({keys:[].concat(keys),fn:KeyBoardHelper.prototype.handleKeyDown,target:KeyBoardHelper.prototype});return KeyBoardHelper;}exports.default=componentWrapper;

/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports._resetStore=_resetStore;exports.activate=activate;exports.deleteInstance=deleteInstance;exports.findBindingForEvent=findBindingForEvent;exports.getBinding=getBinding;exports.getInstances=getInstances;exports.isEmpty=isEmpty;exports.setBinding=setBinding;var _match_keys=__webpack_require__(199);var _match_keys2=_interopRequireDefault(_match_keys);var _parse_keys=__webpack_require__(201);var _parse_keys2=_interopRequireDefault(_parse_keys);var _uuid=__webpack_require__(202);var _uuid2=_interopRequireDefault(_uuid);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}/**
	                                                                                                                                                                                                     * @module store
	                                                                                                                                                                                                     *
	                                                                                                                                                                                                     *//**
	 * private
	 *
	 */// dict for class prototypes => bindings
	var _handlers=new Map();// all mounted instances that have keybindings
	var _instances=new Set();// for testing
	function _resetStore(){_handlers.clear();_instances.clear();}/**
	 * activate
	 *
	 * @access public
	 * @param {object} instance Instantiated class that extended React.Component, to be focused to receive keydown events
	 */function activate(instances){var instancesArray=[].concat(instances);// if no components were found as ancestors of the event target,
	// effectively deactivate keydown handling by capping the set of instances
	// with `null`.
	if(!instancesArray.length){_instances.add(null);}else{_instances.delete(null);// deleting and then adding the instance(s) has the effect of sorting the set
	// according to instance activation (ascending)
	instancesArray.forEach(function(instance){_instances.delete(instance);_instances.add(instance);});}};/**
	 * deleteInstance
	 *
	 * @access public
	 * @param {object} target Instantiated class that extended React.Component
	 * @return {boolean} The value set.has( target ) would have returned prior to deletion
	 */function deleteInstance(target){_instances.delete(target);};function findBindingForEvent(event){if(!_instances.has(null)){var keyMatchesEvent=function keyMatchesEvent(keySet){return(0,_match_keys2.default)({keySet:keySet,event:event});};// loop through instances in reverse activation order so that most
	// recently activated instance gets first dibs on event
	var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=[].concat(_toConsumableArray(_instances)).reverse()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var instance=_step.value;var bindings=getBinding(instance.constructor.prototype);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=bindings[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2),keySets=_step2$value[0],fn=_step2$value[1];if(keySets.some(keyMatchesEvent)){// return when matching keybinding is found - i.e. only one
	// keybound component can respond to a given key code. to get around this,
	// scope a common ancestor component class with @keydown and use
	// @keydownScoped to bind the duplicate keys in your child components
	// (or just inspect nextProps.keydown.event).
	return{fn:fn,instance:instance};}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}}return null;};/**
	 * getBinding
	 *
	 * @access public
	 * @param {object} target Class used as key in dict of key bindings
	 * @return {object} The object containing bindings for the given class
	 */function getBinding(_ref){var __reactKeydownUUID=_ref.__reactKeydownUUID;return _handlers.get(__reactKeydownUUID);};/**
	 * getInstances
	 *
	 * @access public
	 * @return {set} All stored instances (all mounted component instances with keybindings)
	 */function getInstances(){return _instances;};/**
	 * isEmpty
	 *
	 * @access public
	 * @return {number} Size of the set of all stored instances
	 */function isEmpty(){return!_instances.size;};/**
	 * setBinding
	 *
	 * @access public
	 * @param {object} args All arguments necessary to set the binding
	 * @param {array} args.keys Key codes that should trigger the fn
	 * @param {function} args.fn The callback to be triggered when given keys are pressed
	 * @param {object} args.target The decorated class
	 */function setBinding(_ref2){var keys=_ref2.keys,fn=_ref2.fn,target=_ref2.target;var keySets=(0,_parse_keys2.default)(keys);var __reactKeydownUUID=target.__reactKeydownUUID;if(!__reactKeydownUUID){target.__reactKeydownUUID=(0,_uuid2.default)();_handlers.set(target.__reactKeydownUUID,new Map([[keySets,fn]]));}else{_handlers.get(__reactKeydownUUID).set(keySets,fn);}};

/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _keys=__webpack_require__(200);var PRINTABLE_CHARACTERS='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ~!@#$%^&*()-_+=[]\\{}|;\':",./<>?£';var modKeys=Object.keys(_keys.modifiers);function matchKeys(_ref){var keySet=_ref.keySet,event=_ref.event;var key=keySet.key,_keySet$modifiers=keySet.modifiers,modifiers=_keySet$modifiers===undefined?[]:_keySet$modifiers;var keysMatch=void 0;keysMatch=key===_keys.ALL_KEYS;if(key===_keys.ALL_PRINTABLE_KEYS){if(event.key){// Modern browsers implement `key`, so if `key` is length 1, we have a match. e.g. 'a' for the
	// a key, or '2' for the 2 key. All other non-printable characters have names, e.g. 'Enter' or 'Backspace'.
	keysMatch=event.key.length===1;}else{// For browsers that do no support `event.key`, we test against a list of characters
	var pressedChar=String.fromCharCode(event.charCode);keysMatch=PRINTABLE_CHARACTERS.indexOf(pressedChar)>=0;}}if(key===event.which){var evtModKeys=modKeys.filter(function(modKey){return event[modKey+'Key'];}).sort();keysMatch=modifiers.length===evtModKeys.length&&modifiers.every(function(modKey,index){return evtModKeys[index]===modKey;});}return keysMatch;}exports.default=matchKeys;

/***/ }),
/* 200 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});// TODO: Need better, more complete, and more methodical key definitions
	var Keys={backspace:8,del:46,delete:46,tab:9,enter:13,'return':13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,';':186,'=':187,',':188,'-':189,'.':190,'/':191,'`':192,'[':219,'\\':220,']':221};// Add uppercase versions of keys above for backwards compatibility
	Object.keys(Keys).forEach(function(key){return Keys[key.toUpperCase()]=Keys[key];});'0123456789'.split('').forEach(function(num,index){return Keys[num]=index+48;});'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').forEach(function(letter,index){Keys[letter]=index+65;Keys[letter.toLowerCase()]=index+65;});// fn keys
	[1,2,3,4,5,6,7,8,9,10,11,12].forEach(function(item,index){return Keys['f'+index]=111+index;});var modifiers=exports.modifiers={control:'ctrl',ctrl:'ctrl',shift:'shift',meta:'meta',cmd:'meta',command:'meta',option:'alt',alt:'alt'};var ALL_KEYS=exports.ALL_KEYS=Symbol('ALL_KEYS');var ALL_PRINTABLE_KEYS=exports.ALL_PRINTABLE_KEYS=Symbol('ALL_PRINTABLE_KEYS');exports.default=Keys;

/***/ }),
/* 201 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _keys=__webpack_require__(200);var _keys2=_interopRequireDefault(_keys);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function parseKeys(keysArray){return keysArray.map(function(key){var keySet={key:key};if(typeof key==='string'){var keyString=key.toLowerCase().trim();var matches=keyString.split(/\s?\+\s?/);keySet=matches.length===1?{key:_keys2.default[keyString]}:{key:_keys2.default[matches.pop()],modifiers:matches.map(function(modKey){return _keys.modifiers[modKey];}).sort()};}return keySet;});}exports.default=parseKeys;

/***/ }),
/* 202 */
/***/ (function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=uuid;// Counter being incremented. JS is single-threaded, so it'll Just Work™.
	var __counter=1;/**
	 * Returns a process-wide unique identifier.
	 */function uuid(){return"uid-"+__counter++;}

/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.onUnmount=exports.onMount=undefined;exports._onClick=_onClick;exports._onKeyDown=_onKeyDown;exports._shouldConsider=_shouldConsider;var _dom_helpers=__webpack_require__(204);var _dom_helpers2=_interopRequireDefault(_dom_helpers);var _listeners=__webpack_require__(205);var _listeners2=_interopRequireDefault(_listeners);var _store=__webpack_require__(198);var store=_interopRequireWildcard(_store);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}/* eslint-disable no-use-before-define *//**
	 * @module eventHandlers
	 *
	 *//**
	 * private
	 *
	 *//**
	 * _onClick
	 *
	 * @access private
	 * @param {object} event The click event object
	 * @param {object} event.target The DOM node from the click event
	 */function _onClick(_ref){var target=_ref.target;store.activate([].concat(_toConsumableArray(store.getInstances())).reduce(_dom_helpers2.default.findContainerNodes(target),[]).sort(_dom_helpers2.default.sortByDOMPosition).map(function(item){return item.instance;}));}/**
	 * _onKeyDown: The keydown event callback
	 *
	 * @access private
	 * @param {object} event The keydown event object
	 * @param {number} event.which The key code (which) received from the keydown event
	 */function _onKeyDown(event){var forceConsider=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(forceConsider||_shouldConsider(event)){var _ref2=store.findBindingForEvent(event)||{},fn=_ref2.fn,instance=_ref2.instance;if(fn){fn.call(instance,event);return true;}}return false;}/**
	 * _shouldConsider: Conditions for proceeding with key event handling
	 *
	 * @access private
	 * @param {object} event The keydown event object
	 * @param {object} event.target The node origin of the event
	 * @return {boolean} Whether to continue procesing the keydown event
	 */function _shouldConsider(_ref3){var ctrlKey=_ref3.ctrlKey,target=_ref3.target;return ctrlKey||!~['INPUT','SELECT','TEXTAREA'].indexOf(target.tagName)&&(!target.getAttribute||target.getAttribute('role')!=='textbox');}/**
	 * public
	 *
	 *//**
	 * onMount
	 *
	 * @access public
	 */function onMount(instance){store.activate(instance);_listeners2.default.bindKeys(_onKeyDown);_listeners2.default.bindClicks(_onClick);_dom_helpers2.default.bindFocusables(instance,store.activate);}/**
	 * onUnmount
	 *
	 * @access public
	 */function onUnmount(instance){store.deleteInstance(instance);if(store.isEmpty()){_listeners2.default.unbindClicks(_onClick);_listeners2.default.unbindKeys(_onKeyDown);}}exports.onMount=onMount;exports.onUnmount=onUnmount;

/***/ }),
/* 204 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _reactDom=__webpack_require__(4);var _reactDom2=_interopRequireDefault(_reactDom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var focusableSelector='a[href], button, input, object, select, textarea, [tabindex]';/**
	 * bindFocusables: Find any focusable child elements of the component instance and
	 * add an onFocus handler to focus our keydown handlers on the parent component
	 * when user keys applies focus to the element.
	 *
	 * NOTE: One limitation of this right now is that if you tab out of the
	 * component, _focusedInstance will still be set until next click or mount or
	 * controlled focus.
	 *
	 * @access public
	 * @param {object} instance The key-bound component instance
	 * @param {callback} activateOnFocus The fn to fire when element is focused
	 *//**
	 * @module domHelpers
	 *
	 */function bindFocusables(instance,activateOnFocus){if(document.querySelectorAll){try{var node=_reactDom2.default.findDOMNode(instance);if(node){var focusables=node.querySelectorAll(focusableSelector);if(focusables.length){var onFocus=function onFocus(element){var onFocusPrev=element.onfocus;return function(event){activateOnFocus(instance);if(onFocusPrev)onFocusPrev.call(element,event);};};Array.prototype.slice.call(focusables).forEach(function(element){return element.onfocus=onFocus(element);});}}}catch(error){// noop, mostly suppressing error here https://github.com/glortho/react-keydown/issues/76
	}}}/**
	 * findContainerNodes: Called by our click handler to find instances with nodes
	 * that are equal to or that contain the click target. Any that pass this test
	 * will be recipients of the next keydown event.
	 *
	 * @access public
	 * @param {object} target The click event.target DOM element
	 * @return {function} Reducer function
	 */function findContainerNodes(target){return function(memo,instance){try{var node=_reactDom2.default.findDOMNode(instance);if(node&&(node===target||node.contains(target))){memo.push({instance:instance,node:node});}}finally{return memo;}};}/**
	 * sortByDOMPosition: Called by our click handler to sort a list of instances
	 * according to least -> most nested. This is so that if multiple keybound
	 * instances have nodes that are ancestors of the click target, they will be
	 * sorted to let the instance closest to the click target get first dibs on the
	 * next key down event.
	 */function sortByDOMPosition(a,b){return a.node.compareDocumentPosition(b.node)===10?1:-1;}exports.default={bindFocusables:bindFocusables,findContainerNodes:findContainerNodes,sortByDOMPosition:sortByDOMPosition};

/***/ }),
/* 205 */
/***/ (function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});/**
	 * @module Listeners
	 *
	 */// flag for whether click listener has been bound to document
	var _clicksBound=false;// flag for whether keydown listener has been bound to document
	var _keysBound=false;var Listeners={/**
	   * _bindKeys
	   *
	   * @access public
	   */bindKeys:function bindKeys(callback){if(!_keysBound){document.addEventListener('keydown',callback);_keysBound=true;}},/**
	   * unbindKeys
	   *
	   * @access public
	   */unbindKeys:function unbindKeys(callback){if(_keysBound){document.removeEventListener('keydown',callback);_keysBound=false;}},/**
	   * bindClicks
	   *
	   * @access public
	   */bindClicks:function bindClicks(callback){if(!_clicksBound){document.addEventListener('click',callback,true);_clicksBound=true;}},/**
	   * unbindClicks
	   *
	   * @access public
	   */unbindClicks:function unbindClicks(callback){if(_clicksBound){document.removeEventListener('click',callback,true);_clicksBound=false;}}};exports.default=Listeners;

/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof2(obj);}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof2(obj);};/**
	                                                                                                                                                                                                                                                                               * @module methodWrapper
	                                                                                                                                                                                                                                                                               *
	                                                                                                                                                                                                                                                                               */var _store=__webpack_require__(198);var store=_interopRequireWildcard(_store);var _event_handlers=__webpack_require__(203);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}/**
	 * _isReactKeyDown
	 *
	 * @access private
	 * @param {object} event The possibly synthetic event passed as an argument with
	 * the method invocation.
	 * @return {boolean}
	 */function _isReactKeyDown(event){return event&&(typeof event==='undefined'?'undefined':_typeof(event))==='object'&&event.nativeEvent instanceof window.KeyboardEvent&&event.type==='keydown';}/**
	 * methodWrapper
	 *
	 * @access public
	 * @param {object} args All arguments necessary for wrapping method
	 * @param {object} args.target The decorated class
	 * @param {object} args.descriptor Method descriptor
	 * @param {array} args.keys The array of keys bound to the given method
	 * @return {object} The method descriptor
	 */function methodWrapper(_ref){var target=_ref.target,descriptor=_ref.descriptor,keys=_ref.keys;var fn=descriptor.value;// if we haven't already created a binding for this class (via another
	// decorated method), wrap these lifecycle methods.
	if(!store.getBinding(target)){var componentDidMount=target.componentDidMount,componentWillUnmount=target.componentWillUnmount;target.componentDidMount=function(){(0,_event_handlers.onMount)(this);if(componentDidMount)return componentDidMount.call(this);};target.componentWillUnmount=function(){(0,_event_handlers.onUnmount)(this);if(componentWillUnmount)return componentWillUnmount.call(this);};}// add this binding of keys and method to the target's bindings
	store.setBinding({keys:keys,target:target,fn:fn});descriptor.value=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var maybeEvent=args[0];if(_isReactKeyDown(maybeEvent)){// proxy method in order to use @keydown as filter for keydown events coming
	// from an actual onKeyDown binding (as identified by react's addition of
	// 'nativeEvent' + type === 'keydown')
	if(!maybeEvent.ctrlKey){// we already whitelist shortcuts with ctrl modifiers so if we were to
	// fire it again here the method would trigger twice. see https://github.com/glortho/react-keydown/issues/38
	return(0,_event_handlers._onKeyDown)(maybeEvent,true);}}else if(!maybeEvent||!(maybeEvent instanceof window.KeyboardEvent)||maybeEvent.type!=='keydown'){// if our first argument is a keydown event it is being handled by our
	// binding system. if it's anything else, just pass through.
	return fn.call.apply(fn,[this].concat(args));}};return descriptor;}exports.default=methodWrapper;

/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _match_keys=__webpack_require__(199);var _match_keys2=_interopRequireDefault(_match_keys);var _parse_keys=__webpack_require__(201);var _parse_keys2=_interopRequireDefault(_parse_keys);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/**
	 * methodWrapperScoped
	 *
	 * @access public
	 * @param {object} args All args necessary for decorating the method
	 * @param {object} args.target The decorated method's class object
	 * @param {object} args.descriptor The method's descriptor object
	 * @param {array} args.keys The key codes bound to the decorated method
	 * @return {object} The method's descriptor object
	 *//**
	 * @module methodWrapperScoped
	 *
	 */function methodWrapperScoped(_ref){var target=_ref.target,descriptor=_ref.descriptor,keys=_ref.keys;var componentWillReceiveProps=target.componentWillReceiveProps;var fn=descriptor.value;if(!keys){console.warn(fn+': keydownScoped requires one or more keys');}else{/**
	     * _shouldTrigger
	     *
	     * @access private
	     * @param {object} thisProps Exsting props from the wrapped component
	     * @param {object} thisProps.keydown The namespaced state from the higher-order
	     * component (class_decorator)
	     * @param {object} nextProps The incoming props from the wrapped component
	     * @param {object} nextProps.keydown The namescaped state from the higher-order
	     * component (class_decorator)
	     * @param {array} keys The keys bound to the decorated method
	     * @return {boolean} Whether all tests have passed
	     */var _shouldTrigger=function _shouldTrigger(keydownThis,keydownNext){if(!(keydownNext&&keydownNext.event&&!keydownThis.event))return false;return keySets.some(function(keySet){return(0,_match_keys2.default)({keySet:keySet,event:keydownNext.event});});};// wrap the component's lifecycle method to intercept key codes coming down
	// from the wrapped/scoped component up the view hierarchy. if new keydown
	// event has arrived and the key codes match what was specified in the
	// decorator, call the wrapped method.
	var keySets=(0,_parse_keys2.default)(keys);target.componentWillReceiveProps=function(nextProps){var keydownNext=nextProps.keydown;var keydownThis=this.props.keydown;if(_shouldTrigger(keydownThis,keydownNext)){return fn.call(this,keydownNext.event);}for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}if(componentWillReceiveProps)return componentWillReceiveProps.call.apply(componentWillReceiveProps,[this,nextProps].concat(args));};}return descriptor;}exports.default=methodWrapperScoped;

/***/ }),
/* 208 */
/***/ (function(module, exports) {

	'use strict';// Production steps of ECMA-262, Edition 6, 22.1.2.1
	// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from
	if(!Array.from){Array.from=function(){var toStr=Object.prototype.toString;var isCallable=function isCallable(fn){return typeof fn==='function'||toStr.call(fn)==='[object Function]';};var toInteger=function toInteger(value){var number=Number(value);if(isNaN(number)){return 0;}if(number===0||!isFinite(number)){return number;}return(number>0?1:-1)*Math.floor(Math.abs(number));};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function toLength(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger);};// The length property of the from method is 1.
	return function from(arrayLike/*, mapFn, thisArg */){// 1. Let C be the this value.
	var C=this;// 2. Let items be ToObject(arrayLike).
	var items=Object(arrayLike);// 3. ReturnIfAbrupt(items).
	if(arrayLike==null){throw new TypeError("Array.from requires an array-like object - not null or undefined");}// 4. If mapfn is undefined, then let mapping be false.
	var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=='undefined'){// 5. else
	// 5. a If IsCallable(mapfn) is false, throw a TypeError exception.
	if(!isCallable(mapFn)){throw new TypeError('Array.from: when provided, the second argument must be a function');}// 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.
	if(arguments.length>2){T=arguments[2];}}// 10. Let lenValue be Get(items, "length").
	// 11. Let len be ToLength(lenValue).
	var len=toLength(items.length);// 13. If IsConstructor(C) is true, then
	// 13. a. Let A be the result of calling the [[Construct]] internal method 
	// of C with an argument list containing the single item len.
	// 14. a. Else, Let A be ArrayCreate(len).
	var A=isCallable(C)?Object(new C(len)):new Array(len);// 16. Let k be 0.
	var k=0;// 17. Repeat, while k < len… (also steps a - h)
	var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==='undefined'?mapFn(kValue,k):mapFn.call(T,kValue,k);}else{A[k]=kValue;}k+=1;}// 18. Let putStatus be Put(A, "length", len, true).
	A.length=len;// 20. Return A.
	return A;};}();}

/***/ }),
/* 209 */
/***/ (function(module, exports) {

	'use strict';module.exports={mainTable:{tableLayout:'fixed',width:'-webkit-calc(100% + 16px)',borderCollapse:'collapse',marginBottom:'20px'},headerTable:{tableLayout:'fixed',width:'100%',borderCollapse:'collapse'},footerTable:{tableLayout:'fixed',width:'100%',borderCollapse:'collapse'},th:{borderBottom:'1px solid black',backgroundColor:'grey',height:'30px',border:'1px solid lightgray',display:'table-cell',color:'black',boldColor:'red'},thHidden:{borderBottom:'1px solid black',backgroundColor:'grey',height:'1px',border:'1px solid lightgray',display:'table-cell'},tr:{backgroundColor:'white'},focused:{backgroundColor:'lightblue'},td:{border:'1px solid lightgray',display:'table-cell',paddingLeft:'5px'},icons:{asc:'/images/icons/sort-alpha-asc.png',desc:'/images/icons/sort-alpha-desc.png'},image:{margin:'1px'},wrapper:{height:'inherit',overflow:'auto',minHeight:'100px'},main:{height:'inherit'},header:{overflow:'hidden'},boolSumbol:{yes:{value:'\u2714',color:'green'},no:{//value: '\u2716',
	color:null},null:{value:'-',color:null}},boolColour:{yes:null,no:null}};

/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var getNow = __webpack_require__(211);
	var React = __webpack_require__(10),
	    Button = __webpack_require__(212),
	    ButtonOpen = __webpack_require__(82),
	    Select = __webpack_require__(213),
	    InputDate = __webpack_require__(215),
	    InputText = __webpack_require__(217),
	    InputNumber = __webpack_require__(219),
	    ModalPage = __webpack_require__(184),
	    styles = __webpack_require__(221);
	var DocContext = __webpack_require__(1);

	var TaskWidget = function (_React$PureComponent) {
	    _inherits(TaskWidget, _React$PureComponent);

	    function TaskWidget(props) {
	        _classCallCheck(this, TaskWidget);

	        var _this = _possibleConstructorReturn(this, (TaskWidget.__proto__ || Object.getPrototypeOf(TaskWidget)).call(this, props));

	        _this.state = {
	            taskList: props.taskList || [],
	            actualTask: props.taskList[0].name,
	            showList: false,
	            showModal: false,
	            showDate: true,
	            titleDate: null,
	            showViitenumber: false,
	            titleViitenumber: null,
	            showYksus: props.kasShowYksus,
	            titleYksus: null,
	            showKogus: props.kasShowKogus,
	            titleKogus: null,
	            viitenumber: null,
	            yksus: 0,
	            kogus: DocContext.mkJaak ? DocContext.mkJaak : 0,
	            seisuga: getNow()
	        };
	        _this.handleSelectTask = _this.handleSelectTask.bind(_this);
	        _this.handleButtonTask = _this.handleButtonTask.bind(_this);
	        _this.handleButtonOpenClick = _this.handleButtonOpenClick.bind(_this);
	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        _this.handleInputChange = _this.handleInputChange.bind(_this);
	        return _this;
	    }

	    _createClass(TaskWidget, [{
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            if (!this.state.taskList) return React.createElement('div', null);

	            var tasks = this.state.taskList.map(function (task, index) {
	                return { id: index++, name: ' ', kood: task.name };
	            });

	            var taskId = tasks.findIndex(function (task) {
	                return task.name == _this2.state.actualTask;
	            });

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'div',
	                    null,
	                    React.createElement(
	                        'div',
	                        { style: styles.wrapper },
	                        React.createElement(Button, {
	                            ref: 'buttonTask',
	                            onClick: this.handleButtonTask,
	                            value: this.state.actualTask
	                        }),
	                        React.createElement(ButtonOpen, {
	                            ref: 'buttonOpenList',
	                            onClick: this.handleButtonOpenClick,
	                            value: 'v' })
	                    ),
	                    this.state.showList ? React.createElement(Select, { name: 'name',
	                        style: styles.select,
	                        data: tasks,
	                        collId: 'kood',
	                        value: this.state.actualTask || '',
	                        defaultValue: this.state.actualTask,
	                        ref: 'select-name',
	                        onChange: this.handleSelectTask,
	                        readOnly: false }) : null,
	                    this.state.showModal ? React.createElement(
	                        ModalPage,
	                        {
	                            modalPageBtnClick: this.modalPageClick,
	                            modalPageName: 'Tegevus',
	                            show: true,
	                            modalObjects: ['btnOk', 'btnCancel']
	                        },
	                        'Kas k\xE4ivata ' + this.state.actualTask + ' ?',
	                        this.state.showDate ? React.createElement(InputDate, { title: this.state.titleDate ? this.state.titleDate : 'Seisuga ',
	                            name: 'seisuga',
	                            value: this.state.seisuga,
	                            ref: 'input-kpv',
	                            readOnly: false,
	                            onChange: this.handleInputChange }) : null,
	                        this.state.showYksus ? React.createElement(Select, { title: this.state.titleYksus ? this.state.titleYksus : "Üksus:",
	                            name: 'yksus',
	                            libs: 'lapse_grupp',
	                            data: DocContext.libs.lapse_grupp ? DocContext.libs.lapse_grupp : [],
	                            ref: 'select-lapse_grupp',
	                            collId: 'id',
	                            onChange: this.handleInputChange,
	                            value: this.state.yksus || 0,
	                            disabled: false,
	                            readOnly: false
	                        }) : null,
	                        this.state.showViitenumber ? React.createElement(InputText, {
	                            title: this.state.titleViitenumber ? this.state.titleViitenumber : "Viitenumber:",
	                            name: 'viitenumber',
	                            ref: 'input-viitenumber',
	                            onChange: this.handleInputChange,
	                            value: this.state.viitenumber,
	                            readOnly: false
	                        }) : null,
	                        this.state.showKogus ? React.createElement(InputNumber, { title: this.state.titleKogus ? this.state.titleKogus : 'Väärtus',
	                            name: 'kogus',
	                            value: Number(this.state.kogus),
	                            ref: 'input-kogus',
	                            readOnly: false,
	                            max: DocContext.mkJaak ? DocContext.mkJaak : 999999999,
	                            onChange: this.handleInputChange }) : null
	                    ) : null
	                )
	            );
	        }
	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(btnEvent) {
	            this.setState({ showModal: false });
	            if (btnEvent === 'Ok') {
	                this.props.handleButtonTask(this.state.actualTask, this.state.seisuga, this.state.yksus, this.state.viitenumber, this.state.kogus);
	            }
	        }
	    }, {
	        key: 'handleButtonOpenClick',
	        value: function handleButtonOpenClick() {
	            var isShow = !this.state.showList;
	            this.setState({ showList: isShow });
	        }
	    }, {
	        key: 'handleSelectTask',
	        value: function handleSelectTask(name, value) {
	            var isShow = !this.state.showList;
	            var task = this.state.taskList.find(function (task) {
	                return task.name == value;
	            });
	            var isShowDate = task && task.hasOwnProperty('hideDate') ? !task.hideDate : true;
	            var showYksus = task && task.hasOwnProperty('showYksus') ? task.showYksus : false;
	            var showViitenumber = task && task.hasOwnProperty('showViitenumber') ? task.showViitenumber : false;
	            var showKogus = task && task.hasOwnProperty('showKogus') ? task.showKogus : false;

	            this.setState({
	                showList: isShow,
	                actualTask: value,
	                showDate: isShowDate,
	                titleDate: task.titleDate ? task.titleDate : null,
	                showYksus: showYksus,
	                showViitenumber: showViitenumber,
	                titleViitenumber: task.titleViitenumber ? task.titleViitenumber : null,
	                showKogus: showKogus,
	                titleKogus: task.titleKogus ? task.titleKogus : null
	            });
	        }
	    }, {
	        key: 'handleButtonTask',
	        value: function handleButtonTask() {
	            var _this3 = this;

	            var showYksus = this.state.showYksus;
	            var showViitenumber = this.state.showViitenumber;
	            var showKogus = this.state.showKogus;
	            var task = this.state.taskList.find(function (task) {
	                return task.name == _this3.state.actualTask;
	            });
	            var isShowDate = task && task.hasOwnProperty('hideDate') ? !task.hideDate : true;
	            var isShowViitenumber = task && task.hasOwnProperty('showViitenumber') ? task.showViitenumber : false;
	            var isShowKogus = task && task.hasOwnProperty('showKogus') ? task.showKogus : false;

	            showYksus = task && task.hasOwnProperty('showYksus') ? task.showYksus : false;

	            this.setState({
	                showModal: true,
	                showYksus: showYksus,
	                showDate: isShowDate,
	                showKogus: isShowKogus,
	                showViitenumber: isShowViitenumber
	            });
	        }

	        //will save value

	    }, {
	        key: 'handleInputChange',
	        value: function handleInputChange(name, value) {
	            var stateValue = {
	                seisuga: this.state.seisuga,
	                yksus: this.state.yksus,
	                viitenumber: this.state.viitenumber,
	                kogus: this.state.kogus
	            };
	            stateValue[name] = value;
	            this.setState(stateValue);
	        }
	    }]);

	    return TaskWidget;
	}(React.PureComponent);

	TaskWidget.propTypes = {
	    taskList: PropTypes.array,
	    handleButtonTask: PropTypes.func.isRequired,
	    handleSelectTask: PropTypes.func.isRequired,
	    kasShowYksus: PropTypes.bool,
	    kasShowKogus: PropTypes.bool,
	    kasShowViitenumber: PropTypes.bool
	};

	TaskWidget.defaultProps = {
	    taskList: [],
	    kasShowYksus: false,
	    kasShowKogus: false,
	    kasShowViitenumber: false
	};
	module.exports = TaskWidget;

/***/ }),
/* 211 */
/***/ (function(module, exports) {

	"use strict";// will return date in format 'YYYY-MM-DD'
	module.exports=function(){var now=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();return now.toISOString().substring(0,10);};

/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'execute';

	var ButtonRegisterExecute = function (_React$PureComponent) {
	    _inherits(ButtonRegisterExecute, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterExecute(props) {
	        _classCallCheck(this, ButtonRegisterExecute);

	        var _this = _possibleConstructorReturn(this, (ButtonRegisterExecute.__proto__ || Object.getPrototypeOf(ButtonRegisterExecute)).call(this, props));

	        _this.handleClick = _this.handleClick.bind(_this);
	        return _this;
	    }

	    _createClass(ButtonRegisterExecute, [{
	        key: 'handleClick',
	        value: function handleClick() {
	            if (this.props.onClick) {
	                this.props.onClick();
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnExecute',
	                    value: this.props.value,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: this.handleClick },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterExecute;
	}(React.PureComponent);

	ButtonRegisterExecute.propTypes = {
	    onClick: PropTypes.func.isRequired,
	    value: PropTypes.string.isRequired
	};

	ButtonRegisterExecute.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonRegisterExecute;

/***/ }),
/* 213 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var radium = __webpack_require__(91);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(214);

	var Select = function (_React$PureComponent) {
	    _inherits(Select, _React$PureComponent);

	    function Select(props) {
	        _classCallCheck(this, Select);

	        var _this = _possibleConstructorReturn(this, (Select.__proto__ || Object.getPrototypeOf(Select)).call(this, props));

	        _this.state = {
	            data: props.data,
	            value: 0 /* здесь по значению ИД */
	            , readOnly: props.readOnly,
	            disabled: props.disabled,
	            fieldValue: props.value /*здесь по значени поля collId */
	            , btnDelete: props.btnDelete /* если истину, то рисуем рядом кнопку для очистки значения*/
	        };

	        _this.onChange = _this.onChange.bind(_this);
	        _this.btnDelClick = _this.btnDelClick.bind(_this);
	        _this.getValueById = _this.getValueById.bind(_this);

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(Select, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (this.props.collId && this.props.collId !== 'id') {
	                // ищем ИД по значению поля
	                this.getValueById(this.state.data, this.props.collId, this.state.value);
	            }
	        }
	    }, {
	        key: 'onChange',
	        value: function onChange(e) {
	            var fieldValue = e.target.value;

	            if (fieldValue === '') {
	                fieldValue = null;
	            }

	            if (this.props.collId && this.props.collId !== 'id') {
	                // найдем по ид значение поля в collId
	                fieldValue = this.getValueById(this.state.data, this.props.collId, fieldValue);
	            }
	            // сохраним ид как value
	            this.setState({ fieldValue: fieldValue, value: e.target.value });

	            if (this.props.onChange) {
	                // смотрим к чему привязан селект и отдаим его наверх
	                this.props.onChange(this.props.name, fieldValue); // в случае если задан обработчик на верхнем уровне, отдадим обработку туда
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var selectStyle = Object.assign({}, styles.select, this.props.style ? this.props.style : {});

	            return React.createElement(
	                'div',
	                { style: styles.wrapper, ref: 'wrapper' },
	                this.props.title ? React.createElement(
	                    'label',
	                    { ref: 'label', style: styles.label,
	                        htmlFor: this.props.name },
	                    this.props.title
	                ) : null,
	                React.createElement(
	                    'select',
	                    { ref: 'select',
	                        style: selectStyle,
	                        value: this.state.value || 0,
	                        id: this.props.name,
	                        disabled: this.state.readOnly,
	                        size: this.props.size ? this.props.size : 0,
	                        onChange: this.onChange },
	                    this.prepaireDataOptions()
	                )
	            );
	        }

	        /**
	         *
	         * @param collId
	         * @param rowId
	         * @returns {*}
	         */

	    }, {
	        key: 'getValueById',
	        value: function getValueById(data, collId, rowId) {
	            // вернет значения поля по выбранному ИД
	            var fieldValue = 0;
	            var foundRow = data.find(function (row) {
	                return row[collId] === rowId;
	            });
	            if (foundRow) {
	                fieldValue = foundRow[collId];
	            }

	            return fieldValue;
	        }
	    }, {
	        key: 'btnDelClick',
	        value: function btnDelClick(event) {
	            // по вызову кнопку удалить, обнуляет значение
	            this.setState({ value: '' });
	            this.onChange(event);
	        }

	        /**
	         * Подготовит датасет для селекта
	         * @returns {*}
	         */

	    }, {
	        key: 'prepaireDataOptions',
	        value: function prepaireDataOptions() {
	            var _this2 = this;

	            var options = void 0;
	            var data = this.state.data.length ? this.state.data : [];

	            if (data.length) {
	                if (!this.state.value && !data.find(function (row) {
	                    return row.id === 0;
	                })) {
	                    // will add empty row
	                    data.unshift({ id: 0, kood: '', nimetus: '' });
	                }

	                options = data.map(function (item, index) {
	                    var key = 'option-' + index;
	                    var separator = ' ';
	                    var rowValue = (item.kood ? item.kood : '') + ' ' + separator + ' ' + (item.name ? item.name : item.nimetus);
	                    return React.createElement(
	                        'option',
	                        { value: item[_this2.props.collId], key: key,
	                            ref: key },
	                        ' ',
	                        rowValue,
	                        ' '
	                    );
	                }, this);
	            } else {
	                options = React.createElement('option', { value: 0, key: Math.random() });
	            }
	            return options;
	        }

	        /**
	         * установит фокус на элементы
	         */

	    }, {
	        key: 'focus',
	        value: function focus() {
	            this.refs['select'].focus();
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value || nextProps.readOnly !== prevState.readOnly || JSON.stringify(nextProps.data) !== JSON.stringify(prevState.data)) {
	                return { value: nextProps.value, readOnly: nextProps.readOnly, data: nextProps.data };
	            } else return null;
	        }
	    }]);

	    return Select;
	}(React.PureComponent);

	Select.propTypes = {
	    data: PropTypes.arrayOf(PropTypes.shape({
	        id: PropTypes.number,
	        kood: PropTypes.string,
	        nimetus: PropTypes.string
	    })),
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    btnDelete: PropTypes.bool,
	    collId: PropTypes.string.isRequired,
	    title: PropTypes.string,
	    placeholder: PropTypes.string,
	    defaultValue: PropTypes.string
	};

	Select.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    valid: true,
	    btnDelete: false,
	    collId: 'id',
	    title: '',
	    defaultValue: '',
	    data: [{ id: 0, kood: '', nimetus: '' }]
	};

	module.exports = radium(Select);

/***/ }),
/* 214 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{margin:'5px',display:'flex',width:'95%'},input:{width:'70%',margin:'5px 2px',borderRadius:'5px'},a:{width:'70%',marginLeft:'5px',borderRadius:'5px'},hide:{display:'none'},select:{width:'70%',height:'30px',margin:'5px 2px',borderRadius:'5px',':focus':{backgroundColor:'lightpink'},opacity:1},readOnly:{backgroundColor:'#F3EFEF'},label:{width:'30%',margin:'5px'},button:{width:'5%'}};

/***/ }),
/* 215 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var radium = __webpack_require__(91);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(216);

	var currentDate = new Date().toLocaleDateString();

	var InputDate = function (_React$PureComponent) {
	    _inherits(InputDate, _React$PureComponent);

	    function InputDate(props) {
	        _classCallCheck(this, InputDate);

	        var _this = _possibleConstructorReturn(this, (InputDate.__proto__ || Object.getPrototypeOf(InputDate)).call(this, props));

	        _this.state = {
	            value: props.value || '',
	            readOnly: props.readOnly
	        };
	        _this.onChange = _this.onChange.bind(_this);
	        return _this;
	    }

	    /**
	     * установит фокус на элементы
	     */


	    _createClass(InputDate, [{
	        key: 'focus',
	        value: function focus() {
	            this.refs['input'].focus();
	        }

	        // will update state if props changed

	    }, {
	        key: 'onChange',
	        value: function onChange(e) {
	            var fieldValue = e.target.value,
	                validation = this.validate(fieldValue);

	            if (fieldValue == null) {
	                // если значение нул, то пусть будет nul
	                validation = true;
	            }

	            if (validation) {
	                this.setState({ value: fieldValue });

	                if (this.props.onChange) {
	                    // если задан обработчик, вернем его
	                    this.props.onChange(this.props.name, fieldValue);
	                }
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var inputPlaceHolder = this.props.placeholder || this.props.title,
	                inputStyle = Object.assign({}, styles.input, this.props.width ? { width: this.props.width } : {}, this.state.readOnly ? styles.readOnly : {}, this.props.styles ? this.props.styles : {});

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'label',
	                    { style: styles.label, htmlFor: this.props.name, ref: 'label' },
	                    this.props.title
	                ),
	                React.createElement('input', { type: 'date',
	                    style: inputStyle,
	                    name: this.props.name,
	                    ref: 'input',
	                    value: this.state.value || '',
	                    readOnly: this.state.readOnly,
	                    title: this.props.title,
	                    placeholder: inputPlaceHolder,
	                    min: this.props.min,
	                    max: this.props.max,
	                    onChange: this.onChange,
	                    disabled: this.props.disabled
	                })
	            );
	        }
	    }, {
	        key: 'validate',
	        value: function validate(value) {
	            var result = true;

	            // проверка на мин , мах
	            if (this.props.min && this.props.max && value) {
	                var dateValue = new Date(value);
	                result = dateValue > this.props.min && dateValue < this.props.max;
	            }

	            return result;
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value || nextProps.readOnly !== prevState.readOnly) {
	                return { value: nextProps.value, readOnly: nextProps.readOnly };
	            } else return null;
	        }
	    }]);

	    return InputDate;
	}(React.PureComponent);

	InputDate.propTypes = {
	    name: PropTypes.string.isRequired,
	    value: PropTypes.string,
	    min: PropTypes.string,
	    max: PropTypes.string,
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    valid: PropTypes.bool,
	    pattern: PropTypes.string,
	    width: PropTypes.string,
	    title: PropTypes.string,
	    placeholder: PropTypes.string
	};

	InputDate.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    valid: true,
	    value: String(currentDate),
	    title: ''
	};

	module.exports = radium(InputDate);

/***/ }),
/* 216 */
/***/ (function(module, exports) {

	'use strict';module.exports={input:{width:'70%',borderRadius:'3px',margin:'5px 2px',':focus':{backgroundColor:'lightpink'},border:'1px solid gray',height:'30px'},focused:{backgroundColor:'lightblue'},readOnly:{backgroundColor:'#F3EFEF'},wrapper:{margin:'5px',display:'flex',width:'95%'},label:{width:'30%',margin:'5px'}};

/***/ }),
/* 217 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var radium = __webpack_require__(91);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(218);

	var Input = function (_React$PureComponent) {
	    _inherits(Input, _React$PureComponent);

	    function Input(props) {
	        _classCallCheck(this, Input);

	        var _this = _possibleConstructorReturn(this, (Input.__proto__ || Object.getPrototypeOf(Input)).call(this, props));

	        _this.state = {
	            value: props.value || '',
	            readOnly: props.readOnly,
	            disabled: props.disabled,
	            valid: props.valid
	        };
	        _this.onChange = _this.onChange.bind(_this);
	        return _this;
	    }

	    // will update state if props changed


	    _createClass(Input, [{
	        key: 'onChange',
	        value: function onChange(e) {
	            var fieldValue = e.target.value;
	            this.setState({ value: fieldValue });

	            if (this.props.onChange) {
	                this.props.onChange(this.props.name, fieldValue);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var inputPlaceHolder = this.props.placeholder || this.props.title,
	                inputStyle = Object.assign({}, styles.input, this.props.width ? { width: this.props.width } : {}, this.props.style ? this.props.style : {}, this.state.readOnly ? styles.readOnly : {});

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'label',
	                    { style: styles.label, htmlFor: this.props.name, ref: 'label' },
	                    this.props.title
	                ),
	                React.createElement('input', { type: 'text',
	                    id: this.props.name,
	                    ref: 'input',
	                    style: inputStyle,
	                    name: this.props.name,
	                    value: this.state.value,
	                    readOnly: this.state.readOnly,
	                    title: this.props.title,
	                    pattern: this.props.pattern,
	                    placeholder: inputPlaceHolder,
	                    onChange: this.onChange,
	                    maxLength: this.props.maxLength,
	                    disabled: this.props.disabled
	                })
	            );
	        }

	        /**
	         * установит фокус на элементы
	         */

	    }, {
	        key: 'focus',
	        value: function focus() {
	            this.refs['input'].focus();
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value || nextProps.readOnly !== prevState.readOnly) {
	                return { value: nextProps.value, readOnly: nextProps.readOnly };
	            } else return null;
	        }
	    }]);

	    return Input;
	}(React.PureComponent);

	Input.propTypes = {
	    name: PropTypes.string.isRequired,
	    value: PropTypes.string,
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    valid: PropTypes.bool,
	    placeholder: PropTypes.string,
	    pattern: PropTypes.string,
	    title: PropTypes.string
	};

	Input.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    valid: true,
	    value: '',
	    title: ''
	};

	module.exports = radium(Input);

/***/ }),
/* 218 */
/***/ (function(module, exports) {

	'use strict';module.exports={input:{width:'70%',margin:'5px 2px',borderRadius:'3px',':focus':{backgroundColor:'lightpink'},border:'1px solid gray',height:'30px'},readOnly:{backgroundColor:'#F3EFEF'},wrapper:{margin:'5px',display:'flex',width:'95%'},label:{width:'30%',margin:'5px'}};

/***/ }),
/* 219 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10),
	    styles = __webpack_require__(220);
	var radium = __webpack_require__(91);

	var PropTypes = __webpack_require__(33);

	var Input = function (_React$PureComponent) {
	    _inherits(Input, _React$PureComponent);

	    function Input(props) {
	        _classCallCheck(this, Input);

	        var _this = _possibleConstructorReturn(this, (Input.__proto__ || Object.getPrototypeOf(Input)).call(this, props));

	        _this.state = {
	            value: props.value,
	            readOnly: props.readOnly,
	            disabled: props.disabled,
	            valid: props.valid
	        };
	        _this.onChange = _this.onChange.bind(_this);
	        return _this;
	    }

	    // will update state if props changed


	    _createClass(Input, [{
	        key: 'onChange',
	        value: function onChange(e) {
	            var fieldValue = e.target.value;
	            this.setState({ value: fieldValue });

	            if (this.props.onChange) {
	                this.props.onChange(this.props.name, fieldValue);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var inputPlaceHolder = this.props.placeholder || this.props.name,
	                inputStyle = Object.assign({}, styles.input, this.props.style ? this.props.style : {}, this.props.width ? { width: this.props.width } : {}, this.state.readOnly ? styles.readOnly : {}),
	                inputMinValue = this.props.min,
	                inputMaxValue = this.props.max;
	            //
	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'label',
	                    { style: styles.label, htmlFor: this.props.name, ref: 'label' },
	                    this.props.title
	                ),
	                React.createElement('input', { type: this.props.type ? this.props.type : 'number',
	                    id: this.props.name,
	                    ref: 'input',
	                    style: inputStyle,
	                    name: this.props.name,
	                    value: this.state.value,
	                    readOnly: this.state.readOnly,
	                    title: this.props.title,
	                    placeholder: inputPlaceHolder,
	                    onChange: this.onChange,
	                    min: inputMinValue,
	                    max: inputMaxValue,
	                    step: '0.01',
	                    pattern: '\\d+(\\.\\d{2})?',
	                    disabled: this.props.disabled
	                })
	            );
	        }

	        /**
	         * установит фокус на элементы
	         */

	    }, {
	        key: 'focus',
	        value: function focus() {
	            this.refs['input'].focus();
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value || nextProps.readOnly !== prevState.readOnly) {
	                return { value: nextProps.value, readOnly: nextProps.readOnly };
	            } else return null;
	        }
	    }]);

	    return Input;
	}(React.PureComponent);

	Input.propTypes = {
	    name: PropTypes.string.isRequired,
	    value: PropTypes.number,
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    valid: PropTypes.bool,
	    placeholder: PropTypes.string,
	    pattern: PropTypes.string,
	    title: PropTypes.string,
	    min: PropTypes.number,
	    max: PropTypes.number
	};

	Input.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    valid: true,
	    min: -999999999,
	    max: 999999999
	};

	module.exports = radium(Input);

/***/ }),
/* 220 */
/***/ (function(module, exports) {

	'use strict';module.exports={input:{width:'70%',margin:'5px 2px',borderRadius:'3px',':focus':{backgroundColor:'lightpink'},border:'1px solid gray',height:'30px'},focused:{backgroundColor:'lightblue'},readOnly:{backgroundColor:'#F3EFEF'},wrapper:{margin:'5px',display:'flex',width:'95%'},label:{width:'30%',margin:'5px'}};

/***/ }),
/* 221 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{display:'inline-flex'},buttomOpen:{display:'flex'},select:{width:'auto',position:'absolute',height:'30px'}};

/***/ }),
/* 222 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    ModalPage = __webpack_require__(184),
	    styles = __webpack_require__(223);

	var TextArea = __webpack_require__(224);
	var DataGrid = __webpack_require__(189);

	var ModalPageInfo = function (_React$PureComponent) {
	    _inherits(ModalPageInfo, _React$PureComponent);

	    function ModalPageInfo(props) {
	        _classCallCheck(this, ModalPageInfo);

	        var _this = _possibleConstructorReturn(this, (ModalPageInfo.__proto__ || Object.getPrototypeOf(ModalPageInfo)).call(this, props));

	        _this.state = {
	            show: _this.props.show
	        };

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(ModalPageInfo, [{
	        key: 'render',
	        value: function render() {
	            var GRID_CONFIG = __webpack_require__(173).tulemused.gridConfig;

	            var systemMessage = this.props.systemMessage ? this.props.systemMessage : '',
	                data = this.props.report ? this.props.report : '',
	                modalObjects = ['btnOk'];

	            var report = this.loeTulemused(data);

	            return React.createElement(
	                ModalPage,
	                { ref: 'modalPage',
	                    style: styles.modalPage,
	                    show: this.props.show,
	                    modalPageBtnClick: this.props.modalPageBtnClick,
	                    modalPageName: 'T\xF6\xF6\xFClesanne report',
	                    modalObjects: modalObjects
	                },
	                React.createElement(
	                    'div',
	                    { ref: 'container' },
	                    React.createElement('img', { ref: 'image', src: styles.icon }),
	                    React.createElement(
	                        'span',
	                        null,
	                        ' ',
	                        systemMessage,
	                        ' '
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(TextArea, { title: 'Report',
	                            style: styles.tulemus,
	                            name: 'report',
	                            ref: 'textarea-report',
	                            value: report.kokkuVotte,
	                            readOnly: true })
	                    ),
	                    React.createElement(
	                        'div',
	                        { ref: 'grid-row-container' },
	                        React.createElement(DataGrid, {
	                            gridData: report.data,
	                            gridColumns: GRID_CONFIG,
	                            showToolBar: false,
	                            ref: 'data-grid' })
	                    )
	                )
	            );
	        }
	    }, {
	        key: 'loeTulemused',
	        value: function loeTulemused(data) {
	            var report = {
	                kokkuVotte: '',
	                data: []
	            };

	            var errors = 0;
	            // если один обьект
	            if (data && data.data && _typeof(data.data) == 'object' && !data.data.length) {
	                report.data.push({
	                    id: 1,
	                    result: data.result && !data.error_code ? 'Ok' : 'Viga',
	                    kas_vigane: data.kas_vigane ? 'Viga' : 'Ok',
	                    error_code: data.error_code,
	                    error_message: data.error_message,
	                    viitenr: data.viitenr ? data.viitenr : null
	                });
	                if (!data.result) {
	                    errors++;
	                }
	            }

	            if (data && data.data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) == 'object' && data.data.length) {
	                data.data.map(function (row, index) {
	                    report.data.push({
	                        id: row.id ? row.id : index,
	                        kas_vigane: row.kas_vigane ? 'Viga' : 'Ok',
	                        result: row.result && !row.error_code ? 'Ok' : 'Viga',
	                        error_code: row.error_code,
	                        error_message: row.error_message,
	                        viitenr: row.viitenr ? row.viitenr : null
	                    });
	                    if (!row.result) {
	                        errors++;
	                    }
	                });
	            }

	            report.kokkuVotte = 'Vead kokku ' + errors + ', Read kokku: ' + report.data.length + ', \xD5nnestus: ' + (report.data.length - errors);
	            return report;
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.show !== prevState.show) {
	                return { show: nextProps.show };
	            } else return null;
	        }
	    }]);

	    return ModalPageInfo;
	}(React.PureComponent);

	ModalPageInfo.propTypes = {
	    systemMessage: PropTypes.string,
	    modalPageBtnClick: PropTypes.func
	};

	module.exports = ModalPageInfo;

/***/ }),
/* 223 */
/***/ (function(module, exports) {

	'use strict';module.exports={icon:'/images/icons/info.png',modalPage:{height:'75%'},tulemus:{height:'2em'}};

/***/ }),
/* 224 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10),
	    styles = __webpack_require__(225);
	var radium = __webpack_require__(91);

	var PropTypes = __webpack_require__(33);

	var Input = function (_React$PureComponent) {
	    _inherits(Input, _React$PureComponent);

	    function Input(props) {
	        _classCallCheck(this, Input);

	        var _this = _possibleConstructorReturn(this, (Input.__proto__ || Object.getPrototypeOf(Input)).call(this, props));

	        _this.state = {
	            value: props.value || '',
	            readOnly: true,
	            disabled: props.disabled || true
	        };

	        _this.onChange = _this.onChange.bind(_this);

	        return _this;
	    }

	    _createClass(Input, [{
	        key: 'onChange',
	        value: function onChange(e) {
	            var fieldValue = e.target.value;

	            this.setState({ value: fieldValue });
	            if (this.props.onChange) {
	                this.props.onChange(this.props.name, fieldValue);
	            }
	        }

	        // will update state if props changed

	    }, {
	        key: 'render',
	        value: function render() {
	            var inputPlaceHolder = this.props.placeholder || this.props.title,
	                inputStyle = Object.assign({}, styles.input, this.props.width ? { width: this.props.width } : {}, this.state.readOnly ? styles.readOnly : {}, this.props.style ? this.props.style : {});

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'label',
	                    { htmlFor: this.props.name, ref: 'label',
	                        style: styles.label },
	                    React.createElement(
	                        'span',
	                        null,
	                        this.props.title
	                    )
	                ),
	                React.createElement('textarea', {
	                    style: inputStyle,
	                    ref: 'input',
	                    id: this.props.name,
	                    name: this.props.name,
	                    value: this.state.value || '',
	                    readOnly: this.props.readOnly,
	                    title: this.props.title,
	                    placeholder: inputPlaceHolder,
	                    onChange: this.onChange,
	                    disabled: this.props.disabled
	                })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value || nextProps.readOnly !== prevState.readOnly) {
	                return { value: nextProps.value, readOnly: nextProps.readOnly };
	            } else return null;
	        }
	    }]);

	    return Input;
	}(React.PureComponent);

	Input.propTypes = {
	    name: PropTypes.string.isRequired,
	    value: PropTypes.string,
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    valid: PropTypes.bool,
	    placeholder: PropTypes.string,
	    title: PropTypes.string
	};

	Input.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    valid: true,
	    title: '',
	    value: ''
	};

	module.exports = radium(Input);

/***/ }),
/* 225 */
/***/ (function(module, exports) {

	'use strict';module.exports={input:{width:'100%',borderRadius:'3px',overflow:'scroll',height:'fit-content',':focus':{backgroundColor:'lightpink'},border:'1px solid gray'},focused:{backgroundColor:'lightblue'},readOnly:{backgroundColor:'#F3EFEF'},wrapper:{margin:'5px',display:'flex',width:'98%',flexDirection:'column'},label:{margin:'5px'}};

/***/ }),
/* 226 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	                border: '1px solid blue'
	        */},docColumn:{display:'flex',flexDirection:'column',/*
	                border: '1px solid yellow',
	        */width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	                border: '1px solid brown'
	        */},ok:{backgroundColor:'lightgreen',width:'100%',textAlign:'right'},error:{backgroundColor:'lightcoral',width:'100%',textAlign:'right'},notValid:{backgroundColor:'yellow',width:'100%',textAlign:'right'},modalValidate:{iconImage:'/images/icons/info.png'}};

/***/ }),
/* 227 */
/***/ (function(module, exports) {

	'use strict';

	var relatedDocuments = function relatedDocuments(self) {
	    // формируем зависимости
	    var pages = self.pages;
	    var relatedDocuments = self.docData.relations ? self.docData.relations : [];
	    if (self.pages && self.pages.length && (!self.docData.id || self.docData.id === 0)) {
	        // создаем новый док
	        pages = [self.pages[0]];
	        relatedDocuments = [];
	    }

	    if (relatedDocuments.length > 0) {
	        relatedDocuments.forEach(function (doc) {
	            if (doc.id) {
	                // проверим на уникальность списка документов
	                var isExists = pages.find(function (page) {
	                    if (!page.docId) {
	                        return false;
	                    } else {
	                        return page.docId == doc.id && page.docTypeId == doc.doc_type;
	                    }
	                });

	                if (!isExists) {
	                    // в массиве нет, добавим ссылку на документ
	                    pages.push({ docTypeId: doc.doc_type, docId: doc.id,
	                        pageName: doc.name + (doc.number ? ' nr:' + doc.number : ' id:' + doc.id) });
	                }
	            }
	        });
	    }
	    self.pages = pages;
	};

	module.exports = relatedDocuments;

/***/ }),
/* 228 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	        border: '1px solid blue'
	*/},docColumn:{display:'flex',flexDirection:'column',/*
	        border: '1px solid yellow',
	*/width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	        border: '1px solid brown'
	*/},gridRow:{border:'1px solid black',backgroundColor:'white',position:'relative',margin:'10% 30% 10% 30%',width:'auto',opacity:'1',top:'100px'},grid:{mainTable:{width:'100%'},headerTable:{width:'100%'},gridContainer:{width:'100%'}},summa:{width:'auto'}};

/***/ }),
/* 229 */,
/* 230 */,
/* 231 */,
/* 232 */,
/* 233 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var React = __webpack_require__(10);
	var _fetchData = __webpack_require__(51);
	var DocContext = __webpack_require__(1);
	var Menu = __webpack_require__(50);
	var DocRights = __webpack_require__(171);
	var checkRights = __webpack_require__(172);
	var createEmptyFilterData = __webpack_require__(3);
	var prepareSqlWhereFromFilter = __webpack_require__(234);
	var Const = __webpack_require__(173);
	var Liimit = Const.RECORDS_LIMIT;
	var prepareData = __webpack_require__(235);

	var DataGrid = __webpack_require__(189),
	    StartMenu = __webpack_require__(86),
	    BtnAdd = __webpack_require__(179),
	    BtnEdit = __webpack_require__(84),
	    BtnDelete = __webpack_require__(190),
	    BtnPrint = __webpack_require__(182),
	    BtnPdf = __webpack_require__(186),
	    BtnFilter = __webpack_require__(237),
	    BtnSelect = __webpack_require__(238),
	    BtnEmail = __webpack_require__(183),
	    BtnRefresh = __webpack_require__(239),
	    ToolbarContainer = __webpack_require__(78),
	    GridFilter = __webpack_require__(240),
	    ModalPage = __webpack_require__(184),
	    InputText = __webpack_require__(217),
	    ModalPageDelete = __webpack_require__(191),
	    ModalReport = __webpack_require__(222),
	    styles = __webpack_require__(242);

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Documents = function (_React$Component) {
	    _inherits(Documents, _React$Component);

	    function Documents(props) {
	        _classCallCheck(this, Documents);

	        var _this = _possibleConstructorReturn(this, (Documents.__proto__ || Object.getPrototypeOf(Documents)).call(this, props));

	        _this.gridData = [];
	        _this.gridConfig = DocContext.gridConfig ? DocContext.gridConfig[props.docTypeId] : [];
	        _this.filterData = DocContext.filter && DocContext.filter[props.docTypeId] ? DocContext.filter[props.docTypeId] : [];

	        if (props.initData && props.initData.result) {
	            _this.gridData = props.initData.result.data || [];
	            _this.gridConfig = !_this.gridConfig.length ? props.initData.gridConfig : _this.gridConfig;
	            _this.subtotals = props.initData.subtotals || [];
	        } else if (props.initData && props.initData.gridData) {

	            _this.gridData = props.initData.gridData || [];
	            _this.gridConfig = !_this.gridConfig.length ? props.initData.gridConfig : _this.gridConfig;
	            _this.subtotals = [];
	        }

	        _this.docTypeId = props.docTypeId;

	        _this.state = {
	            value: _this.gridData.length ? _this.gridData[0].id : 0,
	            sortBy: {},
	            sqlWhere: '',
	            getFilter: false,
	            isDelete: false,
	            hasStartMenuVisible: false, // will show start menu
	            startMenuValue: 'parentid',
	            warning: '', // строка извещений
	            warningType: '',
	            limit: Liimit, // default limit for query,
	            isEmptyFilter: false, // если true то обнулит данные фильтра при перегрузке данных
	            showSelectFields: false, //will open or close column in grid to select rows
	            isReport: false, // показ модального окна при проверке использования
	            txtReport: [] // данные использования
	        };

	        _this._bind('btnAddClick', 'clickHandler', 'btnEditClick', 'dblClickHandler', 'headerClickHandler', 'headerClickHandler', 'btnFilterClick', 'btnSelectClick', 'btnRefreshClick', 'modalPageBtnClick', 'modalDeletePageBtnClick', 'filterDataHandler', 'renderFilterToolbar', 'btnStartClickHanler', 'renderStartMenu', 'startMenuClickHandler', 'fetchData', 'handleInputChange', 'btnEmailClick', 'setRegisterName', 'modalReportePageBtnClick');

	        return _this;
	    }

	    /**
	     * пишем делаем запрос по итогу загрузки
	     */


	    _createClass(Documents, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            var _this2 = this;

	            if (!DocContext.filter) {
	                DocContext.filter = {};
	            }

	            // will save current docTypeid
	            DocContext['docTypeId'] = this.docTypeId;

	            var reload = false; // if reload === true then it will call to reload

	            if (this.props.initData && this.props.initData.docTypeId && this.props.initData.docTypeId.toUpperCase() !== this.docTypeId.toUpperCase()) {
	                reload = true;
	            }

	            // дефолтные значения
	            if (!DocContext.filter[this.docTypeId] && DocContext.gridConfig[this.docTypeId]) {
	                var config = DocContext.gridConfig[this.docTypeId];
	                var filter = prepareData(config, this.docTypeId);

	                // ищем дефолтные значения
	                config.forEach(function (row) {
	                    if (row.default) {
	                        var value = void 0;
	                        try {
	                            value = eval(row.default);
	                        } catch (e) {
	                            console.error('No default value');
	                        }

	                        if (value) {
	                            // ищем и присваеваем значение
	                            var idx = filter.findIndex(function (data) {
	                                return data.id == row.id;
	                            });
	                            if (idx) {
	                                filter[idx].value = value;
	                            }
	                        }
	                    }
	                });

	                if (filter.length) {
	                    DocContext.filter[this.docTypeId] = filter;
	                }
	            }

	            // проверим сохраненный фильтр для этого типа
	            if (DocContext.filter[this.docTypeId] && DocContext.filter[this.docTypeId].length > 0) {
	                this.filterData = DocContext.filter[this.docTypeId];
	                reload = true;
	            }

	            if (reload || !this.props.initData || !this.gridData.length || !this.props.initData.docTypeId) {

	                // проверим на фильтр
	                var sqlWhere = prepareSqlWhereFromFilter(this.filterData, this.docTypeId);

	                //делаем запрос на получение данных
	                this.setState({ sqlWhere: sqlWhere }, function () {
	                    _this2.fetchData('selectDocs');
	                });
	            }

	            // if lastDocId available, will point it as selected
	            if (DocContext[this.docTypeId.toLowerCase()]) {
	                var docId = DocContext[this.docTypeId.toLowerCase()];
	                this.setState({ value: docId });
	            }

	            // задать имя реристра на страницу
	            this.setRegisterName();
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _style = Object.assign({}, styles, this.props.style ? this.props.style : {});
	            var warningStyle = this.state.warningType && styles[this.state.warningType] ? styles[this.state.warningType] : null;
	            var btnParams = {
	                btnStart: {
	                    show: true
	                },
	                btnLogin: {
	                    show: true,
	                    disabled: false
	                },
	                btnAccount: {
	                    show: true,
	                    disabled: false
	                }

	            };
	            return React.createElement(
	                'div',
	                { style: _style.doc },
	                React.createElement(Menu, { params: btnParams,
	                    ref: 'menu',
	                    history: this.props.history,
	                    rekvId: DocContext.userData ? DocContext.userData.asutusId : 0,
	                    module: this.props.module }),
	                React.createElement(
	                    'div',
	                    { style: _style.docRow },
	                    this.props.render(this)
	                ),
	                this.renderFilterToolbar(),
	                this.renderDocToolBar(),
	                this.state.warning ? React.createElement(
	                    ToolbarContainer,
	                    { ref: 'toolbar-container' },
	                    React.createElement(
	                        'div',
	                        { style: warningStyle },
	                        React.createElement(
	                            'span',
	                            null,
	                            this.state.warning
	                        )
	                    )
	                ) : null,
	                React.createElement(
	                    'div',
	                    { style: _style.gridContainer },
	                    React.createElement(DataGrid, { ref: 'dataGrid',
	                        style: _style.grid.mainTable,
	                        gridData: this.gridData,
	                        gridColumns: this.gridConfig,
	                        subtotals: this.subtotals,
	                        onClick: this.clickHandler,
	                        onDblClick: this.dblClickHandler,
	                        onHeaderClick: this.headerClickHandler,
	                        custom_styling: this.props.custom_styling ? this.props.custom_styling : null,
	                        isSelect: this.state.showSelectFields,
	                        value: this.state.value }),
	                    this.state.getFilter ? React.createElement(
	                        ModalPage,
	                        { ref: 'modalpageFilter',
	                            modalPageBtnClick: this.modalPageBtnClick,
	                            modalPageName: 'Filter',
	                            show: true },
	                        React.createElement(GridFilter, { ref: 'gridFilter',
	                            focusElement: this.gridConfig[1].id,
	                            docTypeId: this.docTypeId,
	                            handler: this.filterDataHandler,
	                            gridConfig: this.gridConfig,
	                            data: this.filterData })
	                    ) : null,
	                    React.createElement(ModalPageDelete, {
	                        show: this.state.isDelete,
	                        modalPageBtnClick: this.modalDeletePageBtnClick.bind(this) }),
	                    React.createElement(ModalReport, {
	                        show: this.state.isReport,
	                        report: this.state.txtReport,
	                        modalPageBtnClick: this.modalReportePageBtnClick })
	                )
	            );
	        }

	        //поиск названия регистра

	    }, {
	        key: 'setRegisterName',
	        value: function setRegisterName() {
	            var _this3 = this;

	            var docType = DocContext['menu'].find(function (row) {
	                return row.kood === _this3.props.docTypeId;
	            });
	            if (docType) {
	                DocContext.pageName = docType.name;
	            }
	        }

	        // обработчик изменений в инпут (лимит)

	    }, {
	        key: 'handleInputChange',
	        value: function handleInputChange(name, value) {
	            this.setState({ limit: !value || value > Liimit ? Liimit : value });
	        }

	        /**
	         * вызовер подгрузку данных с параметром сортировки
	         * @param sortBy
	         */

	    }, {
	        key: 'headerClickHandler',
	        value: function headerClickHandler(sortBy) {
	            var _this4 = this;

	            if (sortBy[0].column == 'select') {
	                return;
	            }
	            // ихем тип поля, если указан
	            var row = this.gridConfig.find(function (row) {
	                return row.id == sortBy[0].column;
	            });
	            if (row && row.type) {
	                Object.assign(sortBy[0], { type: row.type });
	            }
	            this.setState({ sortBy: sortBy }, function () {
	                return _this4.fetchData('selectDocs');
	            });
	        }

	        /**
	         * Обработчик двойного клика
	         */

	    }, {
	        key: 'dblClickHandler',
	        value: function dblClickHandler() {
	            this.btnEditClick();
	        }

	        /**
	         * обработчик для грида
	         * @param action
	         * @param docId
	         * @param idx
	         */

	    }, {
	        key: 'clickHandler',
	        value: function clickHandler(action, docId, idx) {
	            if (docId && typeof docId === 'number') {
	                this.setState({ value: docId });
	            }
	        }

	        /**
	         * откроет модальное окно с полями для фильтрации
	         */

	    }, {
	        key: 'btnFilterClick',
	        value: function btnFilterClick() {
	            if (!this.filterData.length) {
	                this.filterData = createEmptyFilterData(this.gridConfig, this.filterData, this.docTypeId);
	            }
	            this.setState({ getFilter: true });
	        }

	        /**
	         * выполнит запрос и обновит данные грида
	         */

	    }, {
	        key: 'btnRefreshClick',
	        value: function btnRefreshClick() {
	            var _this5 = this;

	            this.fetchData('selectDocs').then(function () {
	                _this5.setState({ warning: 'Edukalt', warningType: 'ok' });
	            });
	        }

	        /**
	         * Обработчик для кнопки Add
	         */

	    }, {
	        key: 'btnAddClick',
	        value: function btnAddClick() {
	            if (this.props.btnAddClick) {
	                // кастомный обработчик события
	                this.props.btnAddClick(this.state.value);
	            } else {
	                return this.props.history.push({
	                    pathname: '/' + this.props.module + '/' + this.docTypeId + '/0',
	                    state: { module: this.props.module }
	                });
	            }
	        }

	        /**
	         * Обработчик для кнопки Edit
	         */

	    }, {
	        key: 'btnEditClick',
	        value: function btnEditClick() {
	            if (this.props.btnEditClick) {
	                // кастомный обработчик события
	                this.props.btnEditClick(this.state.value);
	            } else {
	                return this.props.history.push({
	                    pathname: '/' + this.props.module + '/' + this.docTypeId + '/' + this.state.value,
	                    state: { module: this.props.module }
	                });
	            }
	        }

	        /**
	         * Обработчик для кнопки Delete
	         */

	    }, {
	        key: 'btnDeleteClick',
	        value: function btnDeleteClick() {
	            this.setState({ isDelete: true });
	        }

	        /**
	         * Обработчик для кнопки Print
	         */

	    }, {
	        key: 'btnPrintClick',
	        value: function btnPrintClick() {
	            var sqlWhere = this.state.sqlWhere;
	            var url = void 0;
	            var params = encodeURIComponent('' + sqlWhere);
	            var filterData = this.filterData.filter(function (row) {
	                return !!row.value;
	            });
	            var filter = encodeURIComponent('' + JSON.stringify(filterData));
	            if (this.filterData.length) {
	                url = '/print/' + this.docTypeId + '/' + DocContext.userData.uuid + '/' + filter;
	            } else {
	                url = '/print/' + this.docTypeId + '/' + DocContext.userData.uuid + '/0';
	            }
	            window.open(url + '/' + params);
	        }

	        /**
	         * Обработчик для кнопки Pdf
	         */

	    }, {
	        key: 'btnPdfClick',
	        value: function btnPdfClick() {
	            var sqlWhere = this.state.sqlWhere;
	            var url = void 0;
	            var params = encodeURIComponent('' + sqlWhere);
	            var filter = encodeURIComponent('' + JSON.stringify(this.filterData));

	            if (this.filterData.length) {
	                url = '/pdf/' + this.docTypeId + '/' + DocContext.userData.uuid + '/' + filter;
	            } else {
	                url = '/pdf/' + this.docTypeId + '/' + DocContext.userData.uuid + '/0';
	            }
	            window.open(url + '/' + params);
	        }

	        /**
	         * обработчик для кнопки фильтрации
	         * @param btnEvent
	         */

	    }, {
	        key: 'modalPageBtnClick',
	        value: function modalPageBtnClick(btnEvent) {
	            var _this6 = this;

	            var filterString = ''; // строка фильтра

	            if (btnEvent === 'Ok') {
	                // собираем данные

	                filterString = prepareSqlWhereFromFilter(this.filterData, this.docTypeId);
	            } else {
	                // чистим строку фильтрации и массив фильтров
	                filterString = '';
	                this.filterData.forEach(function (row) {
	                    row.value = null;
	                    if (row.start) {
	                        row.start = null;
	                    }
	                    if (row.end) {
	                        row.end = null;
	                    }
	                });
	            }

	            this.setState({
	                getFilter: false,
	                sqlWhere: filterString,
	                isEmptyFilter: !filterString
	            }, function () {
	                return _this6.fetchData('selectDocs');
	            });
	        }

	        /**
	         * обработчик для кнопки фильтрации
	         * @param btnEvent
	         */

	    }, {
	        key: 'modalDeletePageBtnClick',
	        value: function modalDeletePageBtnClick(btnEvent) {
	            var _this7 = this;

	            this.setState({ isDelete: false });
	            if (btnEvent === 'Ok') {
	                // delete document
	                this.setState({ warning: 'Töötan...', warningType: 'notValid' });
	                this.fetchData('delete').catch(function (err) {
	                    console.error('error in fetch-> ', err);
	                }).then(function (data) {
	                    if (data.error_message) {
	                        console.error('data.error_message', data);
	                        _this7.setState({ warning: 'Tekkis viga: ' + data.error_message, warningType: 'error' });
	                        if (data.status && data.status == 401) {
	                            setTimeout(function () {
	                                document.location = '/login';
	                            }, 1000);
	                        }
	                    } else {
	                        _this7.fetchData('selectDocs');
	                        // если есть в кеше , то чиcтим
	                        var lib = _this7.docTypeId.toLowerCase();
	                        if (DocContext.libs[lib] && DocContext.libs[lib].length > 0) {
	                            DocContext.libs[lib] = [];
	                        }
	                    }
	                });
	            }
	        }

	        /**
	         * обработчик для фильтра грида
	         * @param data
	         */

	    }, {
	        key: 'filterDataHandler',
	        value: function filterDataHandler(data) {
	            this.filterData = data;

	            // создади обьект = держатель состояния фильтра
	            if (!DocContext.filter) {
	                DocContext.filter = {};
	            }

	            if (!DocContext.filter[this.docTypeId]) {
	                DocContext.filter[this.docTypeId] = [];
	            }

	            if (data && data.length > 0 && this.props.history.location) {
	                DocContext.filter[this.docTypeId] = this.filterData;
	            }
	        }

	        /**
	         * Обработчик для кнопки старт меню
	         */

	    }, {
	        key: 'btnStartClickHanler',
	        value: function btnStartClickHanler() {
	            this.setState({ hasStartMenuVisible: true });
	        }

	        /**
	         * получит от стартого меню данные, спрячет меню
	         */

	    }, {
	        key: 'startMenuClickHandler',
	        value: function startMenuClickHandler(value) {
	            this.setState({ hasStartMenuVisible: false });
	            return this.props.history.push({
	                pathname: '/' + this.props.module + '/' + value,
	                state: { module: this.props.module }
	            });
	        }
	    }, {
	        key: 'btnSelectClick',
	        value: function btnSelectClick() {
	            this.setState({ showSelectFields: !this.state.showSelectFields });
	        }

	        /**
	         * Вернет компонет с данными строки фильтрации
	         * @returns {XML}
	         */

	    }, {
	        key: 'renderFilterToolbar',
	        value: function renderFilterToolbar() {
	            var filter = this.getFilterString();
	            var component = void 0;

	            if (filter) {
	                component = React.createElement(
	                    ToolbarContainer,
	                    { ref: 'filterToolbarContainer', position: 'left' },
	                    React.createElement(
	                        'span',
	                        null,
	                        ' Filter: ',
	                        this.getFilterString()
	                    )
	                );
	            }

	            return component;
	        }

	        /**
	         * преобразует данные фильтра в строку чтоб показать ее
	         * @returns {string}
	         */

	    }, {
	        key: 'getFilterString',
	        value: function getFilterString() {
	            var string = '';

	            this.filterData.map(function (row) {
	                var kas_sisaldab = row.sqlNo && row.sqlNo == 0 ? '<>' : '=';
	                if (row.start) {
	                    string = string + ' ' + row.name + '>=' + row.start + ',' + row.name + '<=' + row.end + ';';
	                } else {
	                    if (row.value) {
	                        string = string + row.name + ':' + kas_sisaldab + ' ' + row.value + '; ';
	                    }
	                }
	            });
	            return string;
	        }

	        /**
	         * Вернет компонет - панель инструментов документа
	         * @returns {XML}
	         */

	    }, {
	        key: 'renderDocToolBar',
	        value: function renderDocToolBar() {
	            var filter = this.getFilterString();

	            var toolbarParams = this.prepareParamsForToolbar(); //параметры для кнопок управления, взависимости от активной строки
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(InputText, { ref: 'input-limit',
	                        title: 'Limiit:',
	                        name: 'limit',
	                        style: styles.limit,
	                        value: String(this.state.limit) || Liimit,
	                        readOnly: false,
	                        onChange: this.handleInputChange }),
	                    React.createElement(
	                        ToolbarContainer,
	                        { ref: 'toolbarContainer' },
	                        React.createElement(BtnAdd, { onClick: this.btnAddClick,
	                            show: toolbarParams['btnAdd'].show,
	                            disable: toolbarParams['btnAdd'].disabled }),
	                        React.createElement(BtnEdit, { onClick: this.btnEditClick,
	                            value: 'Muuda',
	                            show: toolbarParams['btnEdit'].show,
	                            disable: toolbarParams['btnEdit'].disabled }),
	                        React.createElement(BtnDelete, { onClick: this.btnDeleteClick.bind(this),
	                            show: toolbarParams['btnDelete'].show,
	                            disable: toolbarParams['btnDelete'].disabled }),
	                        React.createElement(BtnPrint, { onClick: this.btnPrintClick.bind(this),
	                            show: toolbarParams['btnPrint'].show,
	                            value: 'Trükk',
	                            disable: toolbarParams['btnPrint'].disabled }),
	                        React.createElement(BtnPdf, { onClick: this.btnPdfClick.bind(this),
	                            show: toolbarParams['btnPdf'].show,
	                            value: 'PDF',
	                            disable: toolbarParams['btnPdf'].disabled }),
	                        React.createElement(BtnEmail, { onClick: this.btnEmailClick.bind(this),
	                            show: toolbarParams['btnEmail'].show,
	                            value: 'Email',
	                            docTypeId: this.docTypeId,
	                            disable: toolbarParams['btnEmail'].disabled }),
	                        React.createElement(BtnFilter, { onClick: this.btnFilterClick }),
	                        React.createElement(BtnRefresh, { onClick: this.btnRefreshClick }),
	                        React.createElement(BtnSelect, {
	                            show: toolbarParams['btnSelect'].show,
	                            value: 'Valida',
	                            onClick: this.btnSelectClick,
	                            ref: 'grid-button-select' })
	                    )
	                )
	            );
	        }

	        /**
	         * Откроет стартовое меню
	         * @returns {*}
	         */

	    }, {
	        key: 'renderStartMenu',
	        value: function renderStartMenu() {
	            var component = void 0;
	            if (this.state.hasStartMenuVisible) {
	                component = React.createElement(StartMenu, { ref: 'startMenu',
	                    value: this.state.startMenuValue,
	                    clickHandler: this.startMenuClickHandler });
	            }
	            return component;
	        }

	        /**
	         *  читаем данные со стора, формируем параметры для кнопок управления, и туда их отдаем
	         * @returns {{btnAdd: {show: boolean, disabled: boolean}, btnEdit: {show: boolean, disabled: boolean}, btnDelete: {show: boolean, disabled: boolean}, btnPrint: {show: boolean, disabled: boolean}}}
	         */

	    }, {
	        key: 'prepareParamsForToolbar',
	        value: function prepareParamsForToolbar() {
	            var docRights = DocRights[this.docTypeId] ? DocRights[this.docTypeId] : {};
	            var userRoles = DocContext.userData ? DocContext.userData.roles : [];

	            var toolbarProps = {
	                add: this.props.toolbarProps ? !!this.props.toolbarProps.add : checkRights(userRoles, docRights, 'add'),
	                edit: this.props.toolbarProps ? !!this.props.toolbarProps.edit : checkRights(userRoles, docRights, 'edit'),
	                delete: this.props.toolbarProps ? !!this.props.toolbarProps.delete : checkRights(userRoles, docRights, 'delete'),
	                print: this.props.toolbarProps ? !!this.props.toolbarProps.print : checkRights(userRoles, docRights, 'print'),
	                pdf: this.props.toolbarProps ? !!this.props.toolbarProps.pdf : true,
	                email: this.props.toolbarProps ? !!this.props.toolbarProps.email : true,
	                start: this.props.toolbarProps ? !!this.props.toolbarProps.start : true
	            };

	            return Object.assign({
	                btnAdd: {
	                    show: toolbarProps['add'],
	                    disabled: false
	                },
	                btnEdit: {
	                    show: toolbarProps['edit'],
	                    disabled: !this.state.value
	                },
	                btnDelete: {
	                    show: toolbarProps['delete'],
	                    disabled: !this.state.value
	                },
	                btnPrint: {
	                    show: toolbarProps['print'],
	                    disabled: false
	                },
	                btnPdf: {
	                    show: toolbarProps['pdf'],
	                    disabled: false
	                },
	                btnEmail: {
	                    show: toolbarProps['email'],
	                    disabled: false
	                },
	                btnStart: {
	                    show: toolbarProps['start']
	                },
	                btnLogin: {
	                    show: true,
	                    disabled: false
	                },
	                btnAccount: {
	                    show: true,
	                    disabled: false
	                },
	                btnSelect: {
	                    show: this.gridConfig && this.gridConfig.length ? !!this.gridConfig.find(function (row) {
	                        return row.id === 'select';
	                    }) : false,
	                    disabled: false
	                }
	            }, this.props.toolbarParams ? this.props.toolbarParams : {});
	        }

	        /**
	         * Выполнит запросы
	         */

	    }, {
	        key: 'fetchData',
	        value: function fetchData(method, additionalData) {
	            var _this8 = this;

	            var URL = '/newApi';
	            var sqlWhere = this.state.sqlWhere;
	            switch (method) {
	                case 'delete':
	                    URL = '/newApi/delete';
	                    break;
	                case 'print':
	                    URL = '/print/' + this.docTypeId;
	                    break;
	                case 'selectDocs':
	                    URL = '/newApi';
	                    break;
	                default:
	                    URL = '/' + method;
	            }
	            // ставим статус
	            this.setState({ warning: 'Töötan...', warningType: 'notValid' });

	            var params = {
	                parameter: this.docTypeId, // параметры
	                docTypeId: this.docTypeId, // для согласования с документом
	                sortBy: this.state.sortBy, // сортировка
	                limit: this.state.limit, // row limit in query
	                docId: this.state.value,
	                method: method,
	                sqlWhere: sqlWhere, // динамический фильтр грида
	                filterData: this.filterData,
	                lastDocId: null,
	                module: this.props.module,
	                userId: DocContext.userData.userId,
	                uuid: DocContext.userData.uuid,
	                data: additionalData
	            };

	            return new Promise(function (resolved, rejected) {

	                _fetchData['fetchDataPost'](URL, params).then(function (response) {
	                    if (response.status && response.status === 401) {
	                        document.location = '/login';
	                    }

	                    // error handling
	                    if (response.status !== 200) {
	                        _this8.setState({ warning: '' + response.error_message, warningType: 'error' });

	                        return {
	                            result: null,
	                            status: response.status,
	                            error_message: 'error ' + (response.data && response.data.error_message ? 'response.data.error_message' : response.error_message)
	                        };
	                    }

	                    if (method === 'selectDocs') {
	                        _this8.gridData = response.data.result.data;

	                        if (response.data) {

	                            // если задан триггер, вызовем его
	                            if (_this8.props.trigger_select) {
	                                _this8.props.trigger_select(_this8);
	                            }
	                        }
	                        _this8.setState({ warning: 'Edukalt', warningType: 'ok' });
	                    } else if (method == 'delete' && response.data && response.data.result && response.data.result.error_code) {
	                        // проверка перед удалением
	                        var error = 'Tekkis viga: kustutamine eba\xF5nnestus';
	                        _this8.setState({
	                            warning: error,
	                            warningType: 'error',
	                            txtReport: response.data,
	                            isReport: !!(response.data.data && response.data.data.length)
	                        });
	                        return rejected(error);
	                    }
	                    resolved(response.data);
	                }).catch(function (error) {
	                    console.error('fetch error', error);
	                    // Something happened in setting up the request that triggered an Error
	                    _this8.setState({
	                        warning: 'Tekkis viga ' + error,
	                        warningType: 'error'
	                    });
	                    return rejected(error);
	                });
	            });
	        }

	        /**
	         * обработчик для кнопки отправки почты
	         */

	    }, {
	        key: 'btnEmailClick',
	        value: function btnEmailClick() {
	            // сохраним параметры для формирования вложения в контексте
	            DocContext['email-params'] = {
	                docId: this.state.docId,
	                docTypeId: this.docTypeId,
	                queryType: 'sqlWhere', // ид - документ
	                sqlWhere: this.state.sqlWhere,
	                filterData: this.filterData
	            };

	            this.props.history.push('/' + this.props.module + '/e-mail/0');
	        }

	        /**
	         * уберет окно с отчетом
	         */

	    }, {
	        key: 'modalReportePageBtnClick',
	        value: function modalReportePageBtnClick(event) {
	            var isReport = event && event == 'Ok' ? false : true;
	            this.setState({ isReport: isReport });
	        }
	    }, {
	        key: '_bind',
	        value: function _bind() {
	            var _this9 = this;

	            for (var _len = arguments.length, methods = Array(_len), _key = 0; _key < _len; _key++) {
	                methods[_key] = arguments[_key];
	            }

	            methods.forEach(function (method) {
	                return _this9[method] = _this9[method].bind(_this9);
	            });
	        }
	    }]);

	    return Documents;
	}(React.Component);

	Documents.propTypes = {
	    initData: PropTypes.shape({
	        result: PropTypes.object,
	        gridConfig: PropTypes.array
	    }),
	    docTypeId: PropTypes.string.isRequired
	};

	Documents.defaultProps = {
	    module: 'lapsed'
	};

	module.exports = Documents;

/***/ }),
/* 234 */
/***/ (function(module, exports) {

	'use strict';/**
	 * создаст строку - фильтр из параметров
	 * @param filterData
	 * @param docTypeId
	 * @returns {string}
	 */var prepareSqlWhereFromFilter=function prepareSqlWhereFromFilter(filterData,docTypeId){var filterString='';// строка фильтра
	var kas_sisaldab='';filterData.forEach(function(row){if(row.value){filterString=filterString+(filterString.length>0?" and ":" where ");kas_sisaldab=row.sqlNo&&Number(row.sqlNo)==0?'NOT':'';switch(row.type){case'text':var prepairedParameter=row.value.split(',').map(function(str){return'\''+str.trim()+'\'';}).join(',');// если параметры раздедены, то множественный параметр
	if(row.value.match(/,/)){filterString=filterString+' '+row.id+' '+kas_sisaldab+'  in ('+prepairedParameter+')';}else{if(docTypeId=='KUU_TAABEL'){filterString=filterString+'  upper('+row.id+') '+kas_sisaldab+' like upper(\'%'+row.value.trim()+'%\')';}else{// обработка некорректной кодировки
	filterString=filterString+'  upper('+row.id+') '+kas_sisaldab+' like upper(\'%'+row.value.trim()+'%\')';}}break;case'string':filterString=filterString+'  upper('+row.id+') '+kas_sisaldab+' like upper(\'%'+row.value.trim()+'%\')';break;case'date':if('start'in row&&row.start){filterString=filterString+' format_date('+row.id+'::text)  >=  format_date(\''+row.start+'\'::text) and (format_date('+row.id+'::text)  <=  format_date(\''+row.end+'\'::text) or '+row.end+' is null)';}else if(row.id=='valid'){// для этого поля ставим фильтр на контект действует до
	filterString=filterString+' (format_date('+row.id+'::text)  >=  format_date(\''+row.value+'\'::text) or '+row.id+' is null)';}else{filterString=filterString+row.id+(kas_sisaldab&&kas_sisaldab=='NOT'?"<>":"=")+"'"+row.value+"'";}break;case'number':if('start'in row&&row.start){filterString=filterString+' '+row.id+'::numeric  >=  '+row.start+' and ('+row.id+'::numeric  <=  '+row.end+' or '+row.end+' is null)';}else{filterString=filterString+row.id+"::numeric  "+(kas_sisaldab&&kas_sisaldab=='NOT'?"<>":"=")+row.value;}break;case'integer':if('start'in row&&row.start){filterString=filterString+' '+row.id+'  >=  '+row.start+' and ('+row.id+'  <=  '+row.end+' or '+row.end+' is null)';}else{filterString=filterString+row.id+"::integer  "+(kas_sisaldab&&kas_sisaldab=='NOT'?"<>":"=")+row.value;}break;}}});return filterString;};module.exports=prepareSqlWhereFromFilter;

/***/ }),
/* 235 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';var DocContext=__webpack_require__(1);var getDefaulDate=__webpack_require__(236);/**
	 * вернет дефолтные значения взависимости от типа
	 * @param row
	 */var getDefaultValues=function getDefaultValues(row){var returnValue={start:null,end:null,value:null};if(!!row.interval&&!row.start&&!row.end){switch(row.type){case'date':returnValue.start=getDefaulDate().start;returnValue.end=getDefaulDate().end;break;default:returnValue.start=null;returnValue.end;}}return returnValue;};function prepareFilterData(gridConfig,docTypeId){var data=[];if(!DocContext.filter){DocContext.filter={};}if(!DocContext.filter[docTypeId]){DocContext.filter[docTypeId]=[];}// проверим, если фильтр уже сохранен, то вернем уже ранее сохжанный массив
	if(docTypeId&&DocContext.filter[docTypeId].length>0){data=DocContext.filter[docTypeId];}else{gridConfig.map(function(row){var field={id:row.id,value:row.value?row.value:null,name:row.id,sqlNo:1,type:row.type?row.type:'text',interval:!!row.interval,start:row.value?row.value:null,end:row.value?row.value:null};if(row.interval){field[row.id+'_start']=row.value?row.value:null;field[row.id+'_end']=row.value?row.value:null;}data.push(field);});}return data;}module.exports=prepareFilterData;

/***/ }),
/* 236 */
/***/ (function(module, exports) {

	'use strict';/**
	 * добавит ноль в месяц или день по необходимости
	 * @param value
	 * @returns {string}
	 */var getTwoDigits=function getTwoDigits(value){return value<10?'0'+value:value;};/**
	 * вернет дефолтные значения взависимости от типа
	 * @param row
	 */var getDefaultDate=function getDefaultDate(period){var returnValue={start:null,end:null,value:null};Date.prototype.daysInMonth=function(){return 33-new Date(this.getFullYear(),this.getMonth(),33).getDate();};var today=new Date();var currentMonth=getTwoDigits(today.getMonth()+1);var currentYear=getTwoDigits(today.getFullYear());var startMonth=currentYear+'-'+currentMonth+'-01';var daysInMonth=getTwoDigits(today.daysInMonth());var finishMonth=currentYear+'-'+currentMonth+'-'+daysInMonth;switch(period){case'KUU':returnValue.start=startMonth;returnValue.end=finishMonth;break;case'AASTA':returnValue.start=currentYear+'-01-01';returnValue.end=currentYear+'-12-31';default:returnValue.start=null;returnValue.end=null;}return returnValue;};module.exports=getDefaultDate;

/***/ }),
/* 237 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'filter';

	var ButtonRegisterFilter = function (_React$PureComponent) {
	    _inherits(ButtonRegisterFilter, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterFilter(props) {
	        _classCallCheck(this, ButtonRegisterFilter);

	        return _possibleConstructorReturn(this, (ButtonRegisterFilter.__proto__ || Object.getPrototypeOf(ButtonRegisterFilter)).call(this, props));
	    }

	    _createClass(ButtonRegisterFilter, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick();
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnFilter',
	                    value: 'Filter',
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRegisterFilter;
	}(React.PureComponent);

	/*
	ButtonRegisterFilter.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonRegisterFilter.defaultProps = {
	    disabled: false,
	    show: true
	};
	module.exports = ButtonRegisterFilter;

/***/ }),
/* 238 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'select';

	var ButtonSelect = function (_React$PureComponent) {
	    _inherits(ButtonSelect, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonSelect(props) {
	        _classCallCheck(this, ButtonSelect);

	        return _possibleConstructorReturn(this, (ButtonSelect.__proto__ || Object.getPrototypeOf(ButtonSelect)).call(this, props));
	    }

	    _createClass(ButtonSelect, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick('select');
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            var value = this.props.value ? this.props.value : 'Valida';
	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnSelect',
	                    value: value,
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonSelect;
	}(React.PureComponent);

	/*
	ButtonRegisterPrint.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonSelect.defaultProps = {
	    disabled: false,
	    show: true
	};

	module.exports = ButtonSelect;

/***/ }),
/* 239 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'refresh';

	var ButtonRefresh = function (_React$PureComponent) {
	    _inherits(ButtonRefresh, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRefresh(props) {
	        _classCallCheck(this, ButtonRefresh);

	        return _possibleConstructorReturn(this, (ButtonRefresh.__proto__ || Object.getPrototypeOf(ButtonRefresh)).call(this, props));
	    }

	    _createClass(ButtonRefresh, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick();
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnRefresh',
	                    value: 'Uuenda',
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonRefresh;
	}(React.PureComponent);

	ButtonRefresh.defaultProps = {
	    disabled: false,
	    show: true
	};
	module.exports = ButtonRefresh;

/***/ }),
/* 240 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var DocContext = __webpack_require__(1);
	var prepareData = __webpack_require__(235);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(241);

	var GridFilter = function (_React$PureComponent) {
	    _inherits(GridFilter, _React$PureComponent);

	    function GridFilter(props) {
	        _classCallCheck(this, GridFilter);

	        var _this = _possibleConstructorReturn(this, (GridFilter.__proto__ || Object.getPrototypeOf(GridFilter)).call(this, props));

	        _this.state = {
	            gridConfig: props.gridConfig, // grid config
	            data: props.data
	        };

	        _this.handleChange = _this.handleChange.bind(_this);
	        _this.prepareFilterFields = _this.prepareFilterFields.bind(_this);
	        _this.returnInterval = _this.returnInterval.bind(_this);
	        _this.returnTextComponent = _this.returnTextComponent.bind(_this);
	        _this.handleSelectChange = _this.handleSelectChange.bind(_this);
	        return _this;
	    }

	    /**
	     * Обработчик на изменения инпутов
	     */


	    _createClass(GridFilter, [{
	        key: 'handleChange',
	        value: function handleChange(e) {
	            this.saveFilterContent(e.target.name, e.target.value, null);
	            this.forceUpdate();
	        }

	        /**
	         * Обработчик на изменения выбора селекта
	         */

	    }, {
	        key: 'handleSelectChange',
	        value: function handleSelectChange(e) {
	            this.saveFilterContent(e.target.name, null, e.target.value);
	            this.forceUpdate();
	        }

	        /**
	         * сохранит значение фильтра
	         * @param name
	         * @param value
	         * @param sqlNo - исключение на фильтр
	         */

	    }, {
	        key: 'saveFilterContent',
	        value: function saveFilterContent(name, value, sqlNo) {
	            var data = this.props.data;

	            // проверим на наличие полей для фильтрации
	            if (!data.length) {
	                data = prepareData(this.props.gridConfig, this.props.docTypeId);
	            } else {
	                data = this.props.data;
	            }

	            var kas_sisaldab = 1;
	            // ищем значение sqlNo
	            if (DocContext.filter[this.props.docTypeId]) {
	                var idx = DocContext.filter[this.props.docTypeId].findIndex(function (row) {
	                    return row.id === name;
	                });
	                if (idx >= 0) {
	                    kas_sisaldab = DocContext.filter[this.props.docTypeId][idx].sqlNo;
	                }
	            }

	            // сохраним значение фильтра

	            data = data.map(function (row) {
	                if (row.id === name) {

	                    row.value = !sqlNo ? value : row.value;
	                    row.sqlNo = value ? kas_sisaldab : sqlNo;
	                }
	                return row;
	            });

	            var index = void 0,
	                isIntervalStart = !!name.match(/_start/),
	                isIntervalEnd = !!name.match(/_end/);
	            var fieldName = name;

	            // надо найти элемент массива с данными для этого компонента
	            for (var i = 0; i < data.length; i++) {

	                isIntervalStart = !!name.match(/_start/);
	                isIntervalEnd = !!name.match(/_end/);

	                if (isIntervalStart) {
	                    // will replace start from firldName
	                    fieldName = name.replace(/_start/i, '');
	                }

	                if (isIntervalEnd) {
	                    // will replace end from firldName
	                    fieldName = name.replace(/_end/i, '');
	                }

	                if (data[i].id === fieldName) {
	                    index = i;
	                    break;
	                }
	            }

	            if (index > -1) {
	                if (isIntervalStart) {
	                    data[index].start = value;
	                    data[index][fieldName + '_start'] = value;
	                    data[index].value = value;
	                }
	                if (isIntervalEnd) {
	                    data[index].end = value;
	                    data[index][fieldName + '_end'] = value;
	                    data[index].value = value;
	                }
	                data[index].sqlNo = sqlNo ? sqlNo : 1;
	            }

	            // сохраним фильтр
	            DocContext.filter[this.props.docTypeId] = data;

	            if (this.props.handler) {
	                this.props.handler(data);
	            }
	        }
	    }, {
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            var data = prepareData(this.props.gridConfig, this.props.docTypeId);
	            if (this.props.handler) {
	                this.props.handler(data);
	            }

	            // если указан элемент , то установим на него фокус
	            if (this.props.focusElement) {
	                var focusElement = this.refs[this.props.focusElement];
	                if (focusElement) {
	                    focusElement.focus();
	                }
	            }
	        }

	        // will update state if props changed

	    }, {
	        key: 'render',
	        value: function render() {
	            // создаст из полей грида компоненты для формирования условий фильтрации
	            return React.createElement(
	                'div',
	                { style: styles.fieldset },
	                this.prepareFilterFields()
	            );
	        }
	    }, {
	        key: 'prepareFilterFields',
	        value: function prepareFilterFields() {
	            var _this2 = this;

	            // только поля, которые отмечаны как show:true или явно ка указаны и те, у котоых нету hideFilter
	            var filterFields = this.props.gridConfig.filter(function (field) {
	                if (field.id !== 'id' && !field.hideFilter && (!field.filter || field.filter == 'show')) {
	                    return field;
	                }
	            });

	            return filterFields.map(function (row, index) {

	                return React.createElement(
	                    'div',
	                    { style: styles.formWidget, key: 'fieldSet-' + row.id },
	                    React.createElement(
	                        'div',
	                        { style: styles.formWidgetLabel },
	                        React.createElement(
	                            'span',
	                            null,
	                            row.name
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.formWidgetInput },
	                        row.interval ? _this2.returnInterval(row) : _this2.returnTextComponent(row)
	                    )
	                );
	            });
	        }
	    }, {
	        key: 'returnTextComponent',
	        value: function returnTextComponent(row) {
	            var data = this.props.data;

	            // проверим на наличие полей для фильтрации
	            if (!data.length) {
	                data = prepareData(this.props.gridConfig, this.props.docTypeId);
	            }

	            var componentType = row.type ? row.type : 'text';

	            // ишем дефолтное значение
	            var value = row.value ? row.value : '';
	            var kas_sisaldab = 1;

	            // ищем инициализированное значение
	            var obj = data.find(function (dataRow) {
	                return dataRow.id == row.id;
	            });

	            if (obj && 'value' in obj) {
	                if (!obj.value && value) {
	                    // есть дефолтное значение
	                    value = data[index][row.id].value;
	                }
	                value = obj.value ? obj.value : value;
	                kas_sisaldab = obj.sqlNo ? obj.sqlNo : 1;
	            }

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(
	                    'select',
	                    { style: styles.select,
	                        value: kas_sisaldab || 1,
	                        name: row.id,
	                        disabled: !value,
	                        id: 'sqlNo',
	                        onChange: this.handleSelectChange },
	                    React.createElement(
	                        'option',
	                        { value: 1 },
	                        'SISALDAB'
	                    ),
	                    React.createElement(
	                        'option',
	                        { value: 0 },
	                        'EI SISALDA'
	                    )
	                ),
	                React.createElement('input', { style: styles.input,
	                    type: componentType,
	                    title: row.name,
	                    name: row.id,
	                    placeholder: row.toolTip ? row.toolTip : row.name,
	                    ref: row.id,
	                    value: value || '',
	                    onChange: this.handleChange,
	                    defaultValue: this.props.data[row.id] })
	            );
	        }

	        /**
	         * вернет два инпута, где будут хранится значения для сначала и конца диапазона
	         * @param row
	         */

	    }, {
	        key: 'returnInterval',
	        value: function returnInterval(row) {
	            if (row && row.interval && !('start' in row)) {
	                var value = row.value ? row.value : null;
	                row = _extends({}, row, { start: value }, { end: value });
	            }

	            var data = this.props.data;
	            var obj = data.find(function (dataRow) {
	                return dataRow.id == row.id;
	            });

	            if (!obj) {
	                return null;
	            }

	            var valueStart = row.interval ? obj['start'] : obj.value;
	            var valueEnd = row.interval ? obj['end'] : obj.value;

	            var componentType = row.type ? row.type : 'text';
	            if (valueStart && valueEnd) {
	                // сохраним значение
	                this.saveFilterContent(row.name, valueStart);
	                this.saveFilterContent(row.name, valueEnd);
	            }

	            return React.createElement(
	                'div',
	                { style: styles.interval },
	                React.createElement('input', { style: styles.input,
	                    type: componentType,
	                    title: row.name,
	                    name: row.id + '_start',
	                    placeholder: row.name,
	                    ref: row.id + '_start',
	                    value: valueStart || '',
	                    onChange: this.handleChange,
	                    defaultValue: this.props.data[row.id]
	                }),
	                React.createElement(
	                    'span',
	                    null,
	                    '-'
	                ),
	                React.createElement('input', { style: styles.input,
	                    type: componentType,
	                    title: row.name,
	                    name: row.id + '_end',
	                    placeholder: row.name,
	                    ref: row.id + '_end',
	                    value: valueEnd || '',
	                    onChange: this.handleChange,
	                    defaultValue: this.props.data[row.id]
	                })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {

	            if (JSON.stringify(nextProps.gridConfig) !== JSON.stringify(prevState.gridConfig) || JSON.stringify(nextProps.data) !== JSON.stringify(prevState.data) || prevState.data.length === 0 || prevState.data.length !== nextProps.data.length) {
	                return { gridConfig: nextProps.gridConfig, data: nextProps.data };
	            } else return null;
	        }
	    }]);

	    return GridFilter;
	}(React.PureComponent);

	GridFilter.propTypes = {
	    gridConfig: PropTypes.array.isRequired,
	    data: PropTypes.array.isRequired
	};

	module.exports = GridFilter;

/***/ }),
/* 241 */
/***/ (function(module, exports) {

	'use strict';var _select;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}module.exports={formWidget:{marginBottom:'5px',display:'flex',flexDirection:'row'},formWidgetLabel:{display:'flex',justifyContent:'flex-end',width:'40%',marginRight:'10px'},formWidgetInput:{width:'100%',borderRadius:'2px',padding:'3px',border:'0px'},input:{borderRadius:'2px',padding:'5px',display:'inline-block'},select:(_select={borderRadius:'2px',padding:'5px',display:'inline-block',width:'auto'},_defineProperty(_select,'display','flex'),_defineProperty(_select,'marginRight','5px'),_select),wrapper:{margin:'5px',display:'flex',width:'95%'},fieldSet:{borderRadius:'2px',margin:'10px'},ui:{borderRadius:'2px',padding:'5px',display:'inline-block'},interval:{display:'inline-flex'}};

/***/ }),
/* 242 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row wrap'/*
	                border: '1px solid blue'
	        */},docColumn:{display:'flex',flexDirection:'column',/*
	                border: '1px solid yellow',
	        */width:'50%'},doc:{position:'relative',height:'100%',display:'flex',flexDirection:'column'/*
	                border: '1px solid brown'
	        */},gridContainer:{display:'flex',flexFlow:'row wrap',height:'95%'},grid:{mainTable:{tableLayout:'fixed',position:'relative',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'},minHeight:'200px',marginBottom:'20px'},headerTable:{tableLayout:'fixed'}},limit:{width:'20%',margin:'5px 2px'},ok:{backgroundColor:'lightgreen',width:'100%',textAlign:'right'},error:{backgroundColor:'lightcoral',width:'100%',textAlign:'right'},notValid:{backgroundColor:'yellow',width:'100%',textAlign:'right'},total:{width:'auto'}};

/***/ }),
/* 243 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);
	var getNow = __webpack_require__(211);

	var ModalPage = __webpack_require__(184);

	var styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    InputDate = __webpack_require__(215),
	    InputNumber = __webpack_require__(219),
	    ICON = 'execute';

	var ButtonTask = function (_React$PureComponent) {
	    _inherits(ButtonTask, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonTask(props) {
	        _classCallCheck(this, ButtonTask);

	        var _this = _possibleConstructorReturn(this, (ButtonTask.__proto__ || Object.getPrototypeOf(ButtonTask)).call(this, props));

	        _this.state = {
	            showModal: false,
	            seisuga: getNow(),
	            kogus: 0,
	            kas_kond: false
	        };
	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        _this.handleInputChange = _this.handleInputChange.bind(_this);
	        return _this;
	    }

	    _createClass(ButtonTask, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            this.setState({ showModal: true });
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var value = this.props.value ? this.props.value : 'Täitmine';
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    Button,
	                    {
	                        show: true,
	                        value: value,
	                        ref: 'btnTask' || this.props.ref,
	                        style: styles.button,
	                        disabled: false,
	                        onClick: this.handleClick },
	                    React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	                ),
	                this.state.showModal ? React.createElement(
	                    ModalPage,
	                    {
	                        modalPageBtnClick: this.modalPageClick,
	                        modalPageName: value,
	                        show: true,
	                        modalObjects: ['btnOk', 'btnCancel']
	                    },
	                    'Kas k\xE4ivata "' + value + '" ?',
	                    this.props.showDate ? React.createElement(InputDate, { title: 'Seisuga ',
	                        name: 'kpv',
	                        value: this.state.seisuga,
	                        ref: 'input-kpv',
	                        readOnly: false,
	                        onChange: this.handleInputChange }) : null,
	                    this.props.showKogus ? React.createElement(InputNumber, { title: this.props.title ? this.props.title : 'Väärtus',
	                        name: 'kogus',
	                        value: Number(this.state.kogus),
	                        ref: 'input-kogus',
	                        readOnly: false,
	                        onChange: this.handleInputChange }) : null
	                ) : null
	            );
	        }
	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(btnEvent) {
	            this.setState({ showModal: false });
	            if (btnEvent === 'Ok') {
	                this.props.onClick(this.props.value, this.props.showKogus ? this.state.kogus : this.state.seisuga, this.state.kas_kond);
	            }
	        }

	        //will save value

	    }, {
	        key: 'handleInputChange',
	        value: function handleInputChange(name, value) {
	            switch (name) {
	                case 'kpv':
	                    this.setState({ seisuga: value });
	                    break;
	                case 'kogus':
	                    this.setState({ kogus: value });
	                    break;
	                case 'kas_kond':
	                    this.setState({ kas_kond: value });
	                    break;

	            }
	        }
	    }]);

	    return ButtonTask;
	}(React.PureComponent);

	ButtonTask.defaultProps = {
	    disabled: false,
	    show: true,
	    showDate: true,
	    showKogus: false,
	    showKond: false
	};

	module.exports = ButtonTask;

/***/ }),
/* 244 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var fetchData = __webpack_require__(51);
	var DocContext = __webpack_require__(1);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(245),
	    Button = __webpack_require__(82),
	    ModalPage = __webpack_require__(184);
	var ModalReport = __webpack_require__(222);

	var UploadButton = function (_React$PureComponent) {
	    _inherits(UploadButton, _React$PureComponent);

	    function UploadButton(props) {
	        _classCallCheck(this, UploadButton);

	        var _this = _possibleConstructorReturn(this, (UploadButton.__proto__ || Object.getPrototypeOf(UploadButton)).call(this, props));

	        _this.state = {
	            show: false, //модальное окно закрыто
	            selectedFile: null,
	            response: null,
	            loading: false,
	            isReport: false,
	            txtReport: []

	        };

	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        _this.onChangeHandler = _this.onChangeHandler.bind(_this);
	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.fecthData = _this.fecthData.bind(_this);
	        _this.modalReportePageBtnClick = _this.modalReportePageBtnClick.bind(_this);
	        return _this;
	    }

	    _createClass(UploadButton, [{
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return this.state.show ? this.modalPage() : React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    Button,
	                    {
	                        ref: 'btnUpload',
	                        value: this.props.value ? this.props.value : 'Import',
	                        show: true,
	                        onClick: function onClick(e) {
	                            return _this2.handleClick(e);
	                        } },
	                    React.createElement('img', { ref: 'image', src: styles.button.icon })
	                ),
	                React.createElement(ModalReport, {
	                    show: this.state.isReport,
	                    report: this.state.txtReport,
	                    modalPageBtnClick: this.modalReportePageBtnClick })
	            );
	        }
	    }, {
	        key: 'handleClick',
	        value: function handleClick() {
	            this.setState({
	                show: true
	            });
	        }
	    }, {
	        key: 'modalPage',
	        value: function modalPage() {
	            var modalObjects = this.state.loading ? ['btnCancel'] : ['btnOk', 'btnCancel'];
	            var mimeTypes = this.props.mimeTypes ? this.props.mimeTypes : ".csv, .xml";

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalObjects: modalObjects,
	                        ref: 'modalpage-upload',
	                        show: true,
	                        modalPageBtnClick: this.modalPageClick,
	                        modalPageName: 'Import' },
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement('input', { type: 'file',
	                            name: 'file',
	                            onChange: this.onChangeHandler,
	                            accept: mimeTypes })
	                    ),
	                    React.createElement(
	                        'div',
	                        null,
	                        this.state.response ? React.createElement(
	                            'span',
	                            null,
	                            this.state.response
	                        ) : null
	                    )
	                )
	            );
	        }
	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(event) {
	            var _this3 = this;

	            if (event === 'Ok') {
	                // показать новое значение

	                //upload
	                if (this.state.selectedFile) {
	                    this.setState({ loading: true });
	                    // fetch
	                    this.fecthData().then(function (response) {
	                        // show response
	                        var l_message = '';
	                        if (response.data && response.data.error_message) {
	                            l_message = response.data.error_message;
	                            if (_this3.props.onClick) {
	                                _this3.props.onClick(response.data);
	                            }

	                            // выведем на экран отчет
	                            _this3.setState({
	                                show: false,
	                                loading: false,
	                                isReport: true,
	                                txtReport: response.data && response.data.data ? response.data.data : []
	                            });
	                        } else {

	                            // отчета нет, только информация
	                            l_message = response.data;
	                            _this3.setState({ response: l_message }, function () {

	                                // close modal
	                                setTimeout(function () {
	                                    _this3.setState({ response: null, show: false, loading: false });
	                                }, 1000);
	                            });
	                        }
	                    });
	                } else {
	                    this.setState({ response: null, show: false, loading: false });
	                }

	                if (this.props.onClick) {
	                    // выполним кастомный метод обработчика события
	                    this.props.onClick();
	                }
	            } else {
	                this.setState({ response: null, show: false, loading: false });
	            }
	        }
	    }, {
	        key: 'onChangeHandler',
	        value: function onChangeHandler(event) {
	            this.setState({ selectedFile: event.target.files[0] });
	        }
	    }, {
	        key: 'fecthData',
	        value: function fecthData() {
	            var params = {
	                parameter: this.props.docTypeId, // параметры
	                uuid: DocContext.userData.uuid
	            };
	            var data = new FormData();
	            data.append('file', this.state.selectedFile);
	            data.append('uuid', DocContext.userData.uuid);
	            data.append('docTypeId', this.props.docTypeId);

	            return fetchData.fetchDataPost('/newApi/upload/', data);
	        }

	        /**
	         * уберет окно с отчетом
	         */

	    }, {
	        key: 'modalReportePageBtnClick',
	        value: function modalReportePageBtnClick(event) {
	            var isReport = event && event == 'Ok' ? false : true;
	            this.setState({ isReport: isReport });
	        }
	    }]);

	    return UploadButton;
	}(React.PureComponent);

	UploadButton.propTypes = {
	    show: PropTypes.bool
	};

	UploadButton.defaultProps = {
	    show: false
	};

	module.exports = UploadButton;

/***/ }),
/* 245 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{margin:'5px',display:'flex',width:'95%'},button:{icon:'/images/icons/import.png',width:'10%'}};

/***/ }),
/* 246 */,
/* 247 */,
/* 248 */,
/* 249 */,
/* 250 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var DocContext = __webpack_require__(1);

	var PropTypes = __webpack_require__(33);
	var fetchData = __webpack_require__(51);
	var POST_LOAD_LIBS_URL = __webpack_require__(173).LIBS.POST_LOAD_LIBS_URL;

	var React = __webpack_require__(10),
	    styles = __webpack_require__(251),
	    DataGrid = __webpack_require__(189),
	    Button = __webpack_require__(82),
	    InputText = __webpack_require__(217),
	    ModalPage = __webpack_require__(184);

	var SelectData = function (_React$PureComponent) {
	    _inherits(SelectData, _React$PureComponent);

	    function SelectData(props) {
	        _classCallCheck(this, SelectData);

	        var _this = _possibleConstructorReturn(this, (SelectData.__proto__ || Object.getPrototypeOf(SelectData)).call(this, props));

	        _this.state = {
	            value: props.value, /* возвращаемое значение, например id*/
	            fieldValue: props.defaultValue, /*видимое значение, например kood или name по указанному в collId */
	            readOnly: props.readOnly,
	            disabled: props.disabled,
	            edited: props.edited,
	            gridData: [],
	            gridConfig: props.config,
	            gridActiveRow: 0,
	            show: _this.props.show,
	            limit: '10'
	        };
	        _this.handleInputChange = _this.handleInputChange.bind(_this);
	        _this.handleGridClick = _this.handleGridClick.bind(_this);
	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        _this.loadLibs = _this.loadLibs.bind(_this);
	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.handleGridBtnClick = _this.handleGridBtnClick.bind(_this);
	        return _this;
	    }

	    _createClass(SelectData, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (this.state.value) {
	                this.loadLibs('');
	            }
	        }
	    }, {
	        key: 'componentDidUpdate',
	        value: function componentDidUpdate(prevProps, prevState) {
	            if (this.state.value && prevState.value !== this.state.value && !this.state.fieldValue) {
	                this.loadLibs();
	            }
	        }

	        // will update state if props changed

	    }, {
	        key: 'render',
	        value: function render() {
	            var isEditeMode = !this.state.readOnly,
	                btnStyle = Object.assign({}, styles.button, { display: isEditeMode ? 'inline' : 'none' });

	            var isReadOnly = this.props.readOnly;
	            if (this.state.show) {
	                isReadOnly = false;
	            }

	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(InputText, { ref: 'inputName',
	                    title: this.props.title,
	                    name: this.props.name,
	                    value: this.state.fieldValue || '',
	                    readOnly: isReadOnly,
	                    onChange: this.handleInputChange }),
	                React.createElement(Button, { value: 'v',
	                    ref: 'btnShow',
	                    style: btnStyle,
	                    onClick: this.handleClick }),
	                this.state.show ? this.modalPage() : null
	            );
	        }
	    }, {
	        key: 'handleClick',
	        value: function handleClick() {
	            this.setState({
	                show: true
	            });
	        }
	    }, {
	        key: 'modalPage',
	        value: function modalPage() {
	            var modalObjects = ['btnOk', 'btnCancel'];
	            var limitInputStyle = styles.limitInput;

	            var toolbarParams = {
	                btnAdd: {
	                    show: true,
	                    disabled: false
	                },
	                btnEdit: {
	                    show: true,
	                    disabled: false
	                },
	                btnDelete: {
	                    show: false,
	                    disabled: false
	                },
	                btnPrint: {
	                    show: false,
	                    disabled: false
	                }
	            };
	            return React.createElement(
	                ModalPage,
	                {
	                    modalObjects: modalObjects,
	                    ref: 'modalpage-grid',
	                    show: true,
	                    modalPageBtnClick: this.modalPageClick,
	                    modalPageName: 'Vali rea' },
	                React.createElement(
	                    'div',
	                    { ref: 'grid-row-container' },
	                    React.createElement(InputText, { ref: 'input-filter',
	                        title: 'Otsingu parametrid:',
	                        name: 'gridFilter',
	                        value: this.state.fieldValue || '',
	                        readOnly: this.props.readOnly || !this.state.show,
	                        onChange: this.handleInputChange }),
	                    React.createElement(DataGrid, { gridData: this.state.gridData,
	                        gridColumns: this.state.gridConfig,
	                        onClick: this.handleGridClick,
	                        handleGridBtnClick: this.handleGridBtnClick,
	                        showToolBar: true,
	                        toolbarParams: toolbarParams,
	                        ref: 'data-grid' }),
	                    React.createElement(InputText, { ref: 'input-limit',
	                        title: 'Limiit:',
	                        width: limitInputStyle,
	                        name: 'limit',
	                        value: this.state.limit || '10',
	                        readOnly: false,
	                        onChange: this.handleInputChange })
	                )
	            );
	        }

	        // обработчик события измения значения в текстовом (поисковом) поле

	    }, {
	        key: 'handleInputChange',
	        value: function handleInputChange(name, value) {
	            var _this2 = this;

	            if (this.props.readOnly) {
	                console.error('readonly ');
	                return;
	            }

	            if (name === 'gridFilter') {
	                // обновим стейт
	                this.setState({ value: 0, fieldValue: value, show: true }, function () {
	                    if (value.length) {
	                        //выполним запрос
	                        setTimeout(function () {
	                            _this2.loadLibs(value);
	                        }, 100);
	                    }
	                });
	            } else {

	                this.setState({ value: 0, fieldValue: value, show: false }, function () {
	                    if (value.length) {
	                        //выполним запрос
	                        setTimeout(function () {
	                            _this2.loadLibs(value);
	                        }, 500);
	                    }
	                });
	            }

	            if (name === 'limit') {
	                this.setState({ limit: value });
	            }
	        }
	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(event) {
	            if (event === 'Ok') {
	                // надо найти активную строку

	                var boundField = this.props.boundToGrid ? this.props.boundToGrid : 'name',
	                    //grid filed name
	                boundToData = this.props.boundToData ? this.props.boundToData : false,
	                    //InputDefaultValue
	                boundFieldData = this.props.name; //inputName = fieldname

	                var activeRow = this.state.gridActiveRow,
	                    value = this.state.gridData[activeRow]['id'],
	                    fieldValue = this.state.gridData[activeRow][boundField];
	                // получить данные полей и установить состояние для виджета

	                // показать новое значение
	                this.setState({ value: value, fieldValue: fieldValue, show: false });

	                // вернуть значение наверх

	                if (this.props.onChange) {
	                    this.props.onChange(boundFieldData, value);

	                    // text value of input
	                    if (boundToData) {
	                        this.props.onChange(boundToData, fieldValue);
	                    }

	                    //если привязано другое поле
	                    if (this.props.collName) {
	                        this.props.onChange(this.props.collName, fieldValue);
	                    }
	                }
	            } else {
	                // востанавливаем старые значения из пропсов, заврывыаем окно
	                this.setState({
	                    value: this.props.value,
	                    fieldValue: this.props.defaultValue, show: false
	                });
	            }
	        }
	    }, {
	        key: 'handleGridClick',
	        value: function handleGridClick(event, value, activeRow) {
	            this.setState({ gridActiveRow: activeRow, value: value });
	        }
	    }, {
	        key: 'loadLibs',
	        value: function loadLibs(fieldValue, kpv) {
	            var _this3 = this;

	            var lib = this.props.libName;
	            var sqlWhere = '';
	            var limit = this.state.limit ? this.state.limit : 100;
	            var isSeachById = this.state.value && !fieldValue;

	            if (this.props.sqlFields && this.props.sqlFields.length && fieldValue && fieldValue.length > 0) {
	                this.props.sqlFields.forEach(function (field) {
	                    var isOr = sqlWhere.length > 0 ? ' or ' : '';
	                    sqlWhere = sqlWhere.concat(' ' + isOr + ' encode(' + field + '::bytea, \'escape\') ilike \'%' + fieldValue.trim() + '%\'');
	                });
	            }

	            if (isSeachById) {
	                // will seach by id
	                sqlWhere = 'id = ' + this.state.value;
	            }

	            sqlWhere = 'where ' + sqlWhere;

	            var libParams = Object.assign({ uuid: DocContext.userData.uuid }, sqlWhere.length ? {
	                sql: sqlWhere,
	                limit: limit,
	                kpv: kpv ? kpv : new Date().toISOString().slice(0, 10)
	            } : {});

	            if (sqlWhere.length > 0) {
	                fetchData.fetchDataPost(POST_LOAD_LIBS_URL + '/' + lib, libParams).then(function (response) {
	                    var gridData = [],
	                        gridConfig = [];

	                    if (response && 'data' in response) {
	                        gridData = response.data.result.result.data;
	                        gridConfig = response.data.result.result.gridConfig;
	                    }

	                    if (gridData && gridData.length > 0) {
	                        if (isSeachById && !_this3.state.show) {
	                            // только одна запись. Грид не нужен
	                            _this3.setState({
	                                fieldValue: gridData[0][_this3.props.boundToGrid],
	                                value: gridData[0]['id'],
	                                gridData: gridData,
	                                gridConfig: gridConfig
	                            });
	                        } else {
	                            _this3.setState({ gridData: gridData, gridConfig: gridConfig, show: true });
	                        }
	                    }
	                }).catch(function (error) {
	                    console.error('loadLibs error', error);
	                });
	            }
	        }
	    }, {
	        key: 'handleGridBtnClick',
	        value: function handleGridBtnClick(btnName, activeRow, id, docTypeId) {
	            // закрываем модальное окно поиска и переходим на новую запись справочника
	            this.setState({ show: false });
	            var docId = this.state.gridData[activeRow]['id'];
	            switch (btnName) {
	                case "Muuda":
	                    this.props.history.push('/' + DocContext.module + '/' + this.props.libName + '/' + docId);
	                    break;
	                case "edit":
	                    this.props.history.push('/' + DocContext.module + '/' + this.props.libName + '/' + docId);
	                    break;
	                case "add":
	                    this.props.history.push('/' + DocContext.module + '/' + this.props.libName + '/0');
	                    break;
	                default:
	                    console.log('Vigane click');
	            }
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value) {
	                return { value: nextProps.value };
	            } else return null;
	        }
	    }]);

	    return SelectData;
	}(React.PureComponent);

	SelectData.propTypes = {
	    readOnly: PropTypes.bool,
	    disabled: PropTypes.bool,
	    collId: PropTypes.string,
	    title: PropTypes.string,
	    placeholder: PropTypes.string,
	    name: PropTypes.string.isRequired,
	    show: PropTypes.bool
	};

	SelectData.defaultProps = {
	    readOnly: false,
	    disabled: false,
	    btnDelete: false,
	    value: 0,
	    collId: 'id',
	    title: '',
	    show: false
	};

	module.exports = SelectData;

/***/ }),
/* 251 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{margin:'5px',display:'flex',width:'95%'},input:{width:'75%',marginLeft:'15px',borderRadius:'3px',height:'30px'},hide:{display:'none'},select:{width:'60%',marginLeft:'15px'},readOnly:{backgroundColor:'#F3EFEF'},label:{width:'40%',margin:'5px'},button:{width:'10%'},limitInput:{width:'10%'}};

/***/ }),
/* 252 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var styles = __webpack_require__(253);
	var Loading = function Loading(props) {
	    return React.createElement(
	        'div',
	        { style: styles.window },
	        React.createElement(
	            'label',
	            { style: styles.label },
	            props.label
	        )
	    );
	};

	module.exports = Loading;

/***/ }),
/* 253 */
/***/ (function(module, exports) {

	'use strict';module.exports={label:{width:'auto'},window:{display:'flex',justifyContent:'center',alignItems:'center'}};

/***/ }),
/* 254 */,
/* 255 */,
/* 256 */
/***/ (function(module, exports) {

	"use strict";// will calculate sum of some field
	var getSum=function getSum(data,columnField){var total=0;if(data&&data.length&&data[0][columnField]){data.forEach(function(row){return total=total+Number(row[columnField]);});}return total.toFixed(2);};module.exports=getSum;

/***/ }),
/* 257 */,
/* 258 */,
/* 259 */,
/* 260 */,
/* 261 */,
/* 262 */,
/* 263 */,
/* 264 */,
/* 265 */,
/* 266 */,
/* 267 */,
/* 268 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var DocumentRegister = __webpack_require__(233);
	var ToolbarContainer = __webpack_require__(78);
	var BtnSettings = __webpack_require__(269);
	var BtnPrint = __webpack_require__(182);
	var BtnEmail = __webpack_require__(183);
	var BtnEarve = __webpack_require__(270);
	var InputNumber = __webpack_require__(219);
	var BtnArvesta = __webpack_require__(243);

	var getSum = __webpack_require__(256);

	var styles = __webpack_require__(271);

	var DOC_TYPE_ID = 'ARV';
	var DocContext = __webpack_require__(1);
	var EVENTS = [{ name: 'Häälestamine', method: null, docTypeId: null }, { name: 'Trükk kõik valitud arved', method: null, docTypeId: null }, { name: 'Email kõik valitud arved', method: null, docTypeId: null }, { name: 'Saada E-Arved (Omniva) kõik valitud arved', method: null, docTypeId: null }, { name: 'Saama XML e-arved kõik valitud arved', method: null, docTypeId: null }, { name: 'Saama XML e-arved (SEB) kõik valitud arved', method: null, docTypeId: null }, { name: 'Saama XML e-arved (SWED) kõik valitud arved', method: null, docTypeId: null }, { name: 'Nõuete mahakanne', method: null, docTypeId: null }];

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Documents = function (_React$PureComponent) {
	    _inherits(Documents, _React$PureComponent);

	    function Documents(props) {
	        _classCallCheck(this, Documents);

	        var _this = _possibleConstructorReturn(this, (Documents.__proto__ || Object.getPrototypeOf(Documents)).call(this, props));

	        _this.onClickHandler = _this.onClickHandler.bind(_this);
	        _this.renderer = _this.renderer.bind(_this);
	        _this.state = {
	            summa: 0,
	            jaak: 0,
	            read: 0
	        };

	        return _this;
	    }

	    _createClass(Documents, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(DocumentRegister, { initData: this.props.initData,
	                    history: this.props.history ? this.props.history : null,
	                    module: this.props.module,
	                    ref: 'register',
	                    docTypeId: DOC_TYPE_ID,
	                    style: styles,
	                    render: this.renderer }),
	                React.createElement(InputNumber, { title: 'Read kokku:',
	                    name: 'read_kokku',
	                    style: styles.total,
	                    ref: 'input-read',
	                    value: Number(this.state.read) || 0,
	                    disabled: true }),
	                React.createElement(InputNumber, { title: 'Summa kokku:',
	                    name: 'summa_kokku',
	                    style: styles.total,
	                    ref: 'input-summa',
	                    value: Number(this.state.summa).toFixed(2) || 0,
	                    disabled: true }),
	                React.createElement(InputNumber, { title: 'J\xE4\xE4k kokku:',
	                    name: 'jaak_kokku',
	                    style: styles.total,
	                    ref: 'input-jaak',
	                    value: Number(this.state.jaak).toFixed(2) || 0,
	                    disabled: true })
	            );
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            var summa = self.gridData ? getSum(self.gridData, 'summa') : 0;
	            var jaak = self.gridData ? getSum(self.gridData, 'jaak') : 0;
	            if (summa) {
	                this.setState({ summa: summa, read: self.gridData.length, jaak: jaak });
	            }

	            return React.createElement(
	                ToolbarContainer,
	                null,
	                React.createElement(BtnEarve, {
	                    onClick: this.onClickHandler,
	                    docTypeId: DOC_TYPE_ID,
	                    phrase: 'Kas laadida XML (SWED) fail?',
	                    ref: 'btnEarveSwedXML',
	                    value: EVENTS[6].name
	                }),
	                React.createElement(BtnEarve, {
	                    onClick: this.onClickHandler,
	                    docTypeId: DOC_TYPE_ID,
	                    phrase: 'Kas laadida XML (SEB) fail?',
	                    ref: 'btnEarveSebXML',
	                    value: EVENTS[5].name
	                }),
	                React.createElement(BtnEarve, {
	                    onClick: this.onClickHandler,
	                    docTypeId: DOC_TYPE_ID,
	                    phrase: 'Kas laadida XML fail?',
	                    ref: 'btnEarveXML',
	                    value: EVENTS[4].name
	                }),
	                React.createElement(BtnEarve, {
	                    onClick: this.onClickHandler,
	                    docTypeId: DOC_TYPE_ID,
	                    ref: 'btnEarveOmniva',
	                    value: EVENTS[3].name
	                }),
	                React.createElement(BtnEmail, {
	                    onClick: this.onClickHandler,
	                    docTypeId: DOC_TYPE_ID,
	                    ref: 'btnEmail',
	                    value: EVENTS[2].name
	                }),
	                React.createElement(BtnPrint, {
	                    onClick: this.onClickHandler,
	                    docTypeId: DOC_TYPE_ID,
	                    ref: 'btnPrint',
	                    value: EVENTS[1].name
	                }),
	                React.createElement(BtnArvesta, {
	                    value: EVENTS[7].name,
	                    onClick: this.onClickHandler,
	                    ref: 'btn-' + EVENTS[7].name,
	                    key: 'key-' + EVENTS[7].name
	                }),
	                React.createElement(BtnSettings, {
	                    history: self.props.history ? self.props.history : null,
	                    docTypeId: DOC_TYPE_ID,
	                    onClick: this.onClickHandler,
	                    ref: 'btnSettings',
	                    value: EVENTS[0].name
	                })
	            );
	        }

	        //handler для события клик на кнопках панели

	    }, {
	        key: 'onClickHandler',
	        value: function onClickHandler(event, seisuga) {
	            var _this2 = this;

	            var ids = new Set(); // сюда пишем ид счетом, которые под обработку

	            var Doc = this.refs['register'];

	            switch (event) {
	                case EVENTS[0].name:
	                    //делаем редайрект на конфигурацию
	                    this.props.history.push('/' + this.props.module + '/config/' + DocContext.userData.asutusId);
	                    break;
	                case EVENTS[1].name:
	                    // Print

	                    // будет выведено на печать выбранные и только для печати счета
	                    Doc.gridData.forEach(function (row) {
	                        if (row.select && row.kas_paberil) {
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });
	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (ids.length > 0) {
	                        Doc.setState({
	                            warning: 'Leidsin ' + ids.length + ' arveid printimiseks', // строка извещений
	                            warningType: 'ok'
	                        });

	                        var url = '/multiple_print/' + DOC_TYPE_ID + '/' + DocContext.userData.uuid + '/' + ids;
	                        window.open('' + url);
	                    } else {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    }

	                    break;
	                case EVENTS[2].name:
	                    //emails

	                    // будет отправлено на почту  выбранные и только для эл.почты счета
	                    Doc.gridData.forEach(function (row) {
	                        if (row.select && row.kas_email) {
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });

	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (!ids.length) {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    } else {
	                        // отправляем запрос на выполнение

	                        Doc.fetchData('email', ids).then(function (data) {
	                            if (data.result) {
	                                Doc.setState({ warning: 'Kokku saadetud arveid emailga: ' + data.result, warningType: 'ok' });
	                            } else {
	                                console.error('email error', data);
	                                Doc.setState({ warning: 'Tekkis viga: ' + data.error_message, warningType: 'error' });
	                            }
	                        }).catch(function (error) {
	                            console.error('email error', error);
	                            Doc.setState({ warning: 'Tekkis viga: ' + error, warningType: 'error' });
	                        });
	                    }

	                    break;

	                case EVENTS[3].name:
	                    //e-arved

	                    // будет отправлено на почту  выбранные и только для эл.почты счета
	                    Doc.gridData.forEach(function (row) {
	                        if (row.select && row.kas_earved) {
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });
	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (!ids.length) {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    } else {
	                        // отправляем запрос на выполнение

	                        Doc.fetchData('e-arved', ids).then(function (data) {
	                            if (data && 'result' in data) {
	                                Doc.setState({ warning: 'Kokku saadetud arveid  : ' + data.result, warningType: 'ok' });
	                            } else {
	                                var error_message =  true ? data.error_message : '';
	                                Doc.setState({ warning: '' + error_message, warningType: 'error' });
	                            }
	                        }).catch(function (err) {
	                            var error_message =  true ? err.TypeError : '';
	                            Doc.setState({ warning: '' + error_message, warningType: 'error' });
	                        });
	                    }

	                    break;
	                case EVENTS[4].name:
	                    //e-arved (XML)

	                    // будет отправлено на почту  выбранные и только для эл.почты счета
	                    Doc.gridData.forEach(function (row) {
	                        if (row.select && row.kas_earved && Number(row.summa) > 0) {
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });
	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (!ids.length) {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    } else {
	                        // отправляем запрос на выполнение
	                        Doc.setState({
	                            warning: 'Leidsin ' + ids.length + ' arveid', // строка извещений
	                            warningType: 'ok'
	                        });

	                        var _url = '/e-arved/' + DocContext.userData.uuid + '/' + ids;
	                        window.open('' + _url);
	                    }

	                    break;
	                case EVENTS[5].name:
	                    //e-arved SEB (XML)

	                    // будет сформирован файл для отправки в банк СЕБ
	                    Doc.gridData.forEach(function (row) {
	                        if (row.kas_earved && row.pank && row.pank == 'SEB' && row.select && Number(row.summa) > 0) {
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });
	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (!ids.length) {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    } else {
	                        // отправляем запрос на выполнение
	                        Doc.setState({
	                            warning: 'Leidsin ' + ids.length + ' arveid', // строка извещений
	                            warningType: 'ok'
	                        });

	                        var _url2 = '/e-arved/seb/' + DocContext.userData.uuid + '/' + ids;
	                        window.open('' + _url2);
	                    }
	                    break;
	                case EVENTS[6].name:
	                    //e-arved Swed (XML)

	                    // будет сформирован файл для отправки в банк SWED
	                    Doc.gridData.forEach(function (row) {
	                        if (row.kas_earved && row.select && row.pank && row.pank == 'SWED' && Number(row.summa) > 0) {
	                            // && row.kas_swed
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });
	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (!ids.length) {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    } else {
	                        // отправляем запрос на выполнение
	                        Doc.setState({
	                            warning: 'Leidsin ' + ids.length + ' arveid', // строка извещений
	                            warningType: 'ok'
	                        });

	                        var _url3 = '/e-arved/swed/' + DocContext.userData.uuid + '/' + ids;
	                        window.open('' + _url3);
	                    }
	                    break;
	                case EVENTS[7].name:
	                    //списание маловероятных
	                    var message = '';
	                    // будет сформирован файл для отправки в банк SWED
	                    Doc.gridData.forEach(function (row) {
	                        if (row.ebatoenaolised == 'Jah' && Number(row.jaak) > 0) {
	                            // && row.kas_swed
	                            // выбрано для печати
	                            ids.add(row.id);
	                        }
	                    });
	                    // конвертация в массив
	                    ids = Array.from(ids);

	                    if (!ids.length) {
	                        Doc.setState({
	                            warning: 'Mitte ühtegi arve leidnum', // строка извещений
	                            warningType: 'notValid'
	                        });
	                    } else {
	                        Doc.fetchData('calc/ebatoenaolised', { docs: ids, seisuga: seisuga }).then(function (data) {
	                            if (data.result) {
	                                message = 'task saadetud t\xE4itmisele';
	                                Doc.setState({ warning: '' + message, warningType: 'ok' });

	                                var tulemused = data.data.result.tulemused;
	                                // открываем отчет
	                                _this2.setState({ isReport: true, txtReport: tulemused });
	                            } else {
	                                if (data.error_message) {
	                                    Doc.setState({ warning: 'Tekkis viga: ' + data.error_message, warningType: 'error' });
	                                } else {
	                                    Doc.setState({
	                                        warning: 'Kokku arvestatud : ' + data.result + ', ' + message,
	                                        warningType: 'notValid'
	                                    });
	                                }
	                            }
	                        });
	                    }
	                    break;

	            }
	        }
	    }]);

	    return Documents;
	}(React.PureComponent);

	module.exports = Documents;

/***/ }),
/* 269 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'settings';

	var ButtonSettings = function (_React$PureComponent) {
	    _inherits(ButtonSettings, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonSettings(props) {
	        _classCallCheck(this, ButtonSettings);

	        var _this = _possibleConstructorReturn(this, (ButtonSettings.__proto__ || Object.getPrototypeOf(ButtonSettings)).call(this, props));

	        _this.handleClick = _this.handleClick.bind(_this);
	        return _this;
	    }

	    _createClass(ButtonSettings, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            return this.props.onClick(this.props.value);
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                Button,
	                {
	                    value: this.props.value,
	                    ref: 'btnSettings',
	                    style: styles.button,
	                    disabled: false,
	                    onClick: this.handleClick },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonSettings;
	}(React.PureComponent);

	ButtonSettings.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Settings'
	};

	module.exports = ButtonSettings;

/***/ }),
/* 270 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ModalPage = __webpack_require__(184),
	    ICON = 'mail';

	var ButtonRegisterEmail = function (_React$PureComponent) {
	    _inherits(ButtonRegisterEmail, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonRegisterEmail(props) {
	        _classCallCheck(this, ButtonRegisterEmail);

	        var _this = _possibleConstructorReturn(this, (ButtonRegisterEmail.__proto__ || Object.getPrototypeOf(ButtonRegisterEmail)).call(this, props));

	        _this.state = {
	            showModal: false
	        };
	        _this.modalPageClick = _this.modalPageClick.bind(_this);
	        return _this;
	    }

	    /**
	     * обработчик события клик, откроет модальное окно
	     * @param e
	     */


	    _createClass(ButtonRegisterEmail, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            this.setState({ showModal: true });
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            var phrase = this.props.phrase ? this.props.phrase : 'Kas saada E-Arve ?';

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    Button,
	                    {
	                        ref: 'btnEmail',
	                        value: this.props.value,
	                        show: this.props.show,
	                        disabled: this.props.disabled,
	                        onClick: function onClick(e) {
	                            return _this2.handleClick(e);
	                        } },
	                    React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	                ),
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalPageBtnClick: this.modalPageClick,
	                        modalPageName: '' + this.props.value,
	                        show: this.state.showModal,
	                        modalObjects: ['btnOk', 'btnCancel']
	                    },
	                    phrase
	                )
	            );
	        }

	        /**
	         * обработчик на событие клика на кнопки можального окна
	         * @param btnEvent
	         */

	    }, {
	        key: 'modalPageClick',
	        value: function modalPageClick(btnEvent) {
	            if (btnEvent === 'Ok') {
	                this.props.onClick(this.props.value);
	            }
	            this.setState({ showModal: false });
	        }
	    }]);

	    return ButtonRegisterEmail;
	}(React.PureComponent);

	/*
	ButtonRegisterPrint.propTypes = {
	    onClick: PropTypes.func.isRequired
	}
	*/

	ButtonRegisterEmail.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Email'
	};

	module.exports = ButtonRegisterEmail;

/***/ }),
/* 271 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}},doc:{height:'100%'},total:{width:'auto'}};

/***/ }),
/* 272 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var React = __webpack_require__(10);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    InputNumber = __webpack_require__(219),
	    Select = __webpack_require__(213),
	    SelectData = __webpack_require__(250),
	    TextArea = __webpack_require__(224),
	    DataGrid = __webpack_require__(189),
	    relatedDocuments = __webpack_require__(227),
	    ModalPage = __webpack_require__(184),
	    ButtonEdit = __webpack_require__(84),
	    styles = __webpack_require__(273);
	var Round = __webpack_require__(274);
	var Loading = __webpack_require__(252);

	var DocContext = __webpack_require__(1);
	var LIB_OBJS = __webpack_require__(173).ARV.LIB_OBJS;

	var Arve = function (_React$PureComponent) {
	    _inherits(Arve, _React$PureComponent);

	    function Arve(props) {
	        _classCallCheck(this, Arve);

	        var _this = _possibleConstructorReturn(this, (Arve.__proto__ || Object.getPrototypeOf(Arve)).call(this, props));

	        _this.state = {
	            loadedData: false,
	            module: props.module ? props.module : DocContext.module,
	            lapsId: null,
	            docId: props.docId ? props.docId : Number(props.match.params.docId)
	        };

	        _this.createGridRow = _this.createGridRow.bind(_this);
	        _this.recalcDocSumma = _this.recalcDocSumma.bind(_this);

	        _this.renderer = _this.renderer.bind(_this);
	        _this.gridValidateFields = _this.gridValidateFields.bind(_this);
	        _this.btnEditAsutusClick = _this.btnEditAsutusClick.bind(_this);
	        _this.btnEditLapsClick = _this.btnEditLapsClick.bind(_this);
	        _this.pages = [{ pageName: 'Arve', docTypeId: 'ARV' }];

	        return _this;
	    }

	    _createClass(Arve, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (this.props.history && this.props.history.location.state) {
	                var lapsId = this.props.history.location.state.lapsId;
	                var _module = this.props.history.location.state.module ? this.props.history.location.state.module : 'lapsed';
	                this.setState({ lapsId: lapsId, module: _module });
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                history: this.props.history,
	                docTypeId: 'ARV',
	                module: this.state.module,
	                initData: this.props.initData ? this.props.initData : {},
	                reload: true,
	                libs: LIB_OBJS,
	                pages: this.pages,
	                renderer: this.renderer,
	                createGridRow: this.createGridRow,
	                gridValidator: this.gridValidateFields,
	                recalcDoc: this.recalcDocSumma,
	                focusElement: 'input-number'
	            });
	        }

	        /**
	         *Вернет кастомные компоненты документа
	         */

	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            if (!self || !self.docData || !self.docData.kpv) {
	                return React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(Loading, { label: 'Laadimine...' })
	                );
	            }

	            var isEditMode = self.state.edited,
	                gridData = self.docData.gridData,
	                gridColumns = self.docData.gridConfig,
	                gridArvTasuData = self.docData.queryArvTasu,
	                gridTasudColumns = self.docData.gridTasudConfig;

	            // формируем зависимости
	            if (self.docData.relations) {
	                relatedDocuments(self);
	            }

	            // если задан параметр lapsid то сохраним его в документе
	            if (this.state.lapsId && !self.docData.lapsid) {
	                self.docData.lapsid = this.state.lapsId;
	            }

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { ref: 'input-number',
	                                title: 'Number',
	                                name: 'number',
	                                value: self.docData.number || '',
	                                readOnly: !isEditMode,
	                                onChange: self.handleInputChange }),
	                            React.createElement(InputDate, { title: 'Kuup\xE4ev ',
	                                name: 'kpv',
	                                value: self.docData.kpv,
	                                ref: 'input-kpv',
	                                readOnly: !isEditMode,
	                                onChange: self.handleInputChange }),
	                            React.createElement(InputDate, { title: 'T\xE4htaeg ',
	                                name: 'tahtaeg',
	                                value: self.docData.tahtaeg,
	                                ref: 'input-tahtaeg',
	                                readOnly: !isEditMode,
	                                onChange: self.handleInputChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Konteerimine:',
	                                name: 'doklausid',
	                                libs: 'dokProps',
	                                data: self.libs['dokProps'],
	                                readOnly: !isEditMode,
	                                value: self.docData.doklausid,
	                                collId: 'id',
	                                ref: 'dokprop-doklausid',
	                                placeholder: 'Konteerimine',
	                                onChange: self.handleInputChange }),
	                            React.createElement(InputText, { ref: 'input-lausend',
	                                title: 'Lausend nr.:',
	                                name: 'laus_nr',
	                                value: String(self.docData.laus_nr) || '',
	                                disable: true,
	                                readOnly: false
	                            })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(SelectData, { title: 'Maksja:',
	                                name: 'asutusid',
	                                libName: 'asutused',
	                                sqlFields: ['nimetus', 'regkood'],
	                                data: [],
	                                value: self.docData.asutusid || 0,
	                                defaultValue: self.docData.asutus,
	                                boundToGrid: 'nimetus',
	                                boundToData: 'asutus',
	                                ref: 'select-asutusid',
	                                btnDelete: false,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditMode })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(ButtonEdit, {
	                                ref: 'btnEdit',
	                                value: 'Muuda',
	                                onClick: this.btnEditAsutusClick,
	                                show: !isEditMode,
	                                style: styles.btnEdit,
	                                disabled: false
	                            })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(SelectData, { title: 'Lapse nimi:',
	                                name: 'lapsid',
	                                libName: 'laps',
	                                sqlFields: ['nimi', 'isikukood'],
	                                data: [],
	                                value: self.docData.lapsid || 0,
	                                defaultValue: self.docData.lapse_nimi,
	                                boundToGrid: 'nimi',
	                                boundToData: 'nimi',
	                                ref: 'select-lapsid',
	                                btnDelete: false,
	                                userData: self.userData,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditMode })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(ButtonEdit, {
	                                ref: 'btnEdit',
	                                value: 'Muuda',
	                                onClick: this.btnEditLapsClick,
	                                show: !isEditMode,
	                                style: styles.btnEdit,
	                                disabled: false
	                            })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { title: 'Lisa ',
	                                name: 'lisa',
	                                value: self.docData.lisa || '',
	                                ref: 'input-lisa',
	                                readOnly: !isEditMode,
	                                onChange: self.handleInputChange }),
	                            React.createElement(InputText, { title: 'Viitenumber',
	                                name: 'viitenr',
	                                value: self.docData.viitenr || '',
	                                ref: 'input-viitenumber',
	                                readOnly: true,
	                                disable: true,
	                                onChange: self.handleInputChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Arveldus arve ',
	                                name: 'aa_id',
	                                libs: 'aa',
	                                value: self.docData.aa,
	                                data: self.libs['aa'],
	                                defaultValue: String(self.docData.aa) || '',
	                                onChange: self.handleInputChange,
	                                collId: 'kood',
	                                ref: 'select-aa',
	                                readOnly: !isEditMode })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(TextArea, { title: 'M\xE4rkused',
	                            name: 'muud',
	                            ref: 'textarea-muud',
	                            onChange: self.handleInputChange,
	                            value: self.docData.muud || '',
	                            readOnly: !isEditMode })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(DataGrid, { source: 'details',
	                            gridData: gridData,
	                            gridColumns: gridColumns,
	                            showToolBar: isEditMode,
	                            handleGridRow: this.handleGridRow,
	                            handleGridBtnClick: self.handleGridBtnClick,
	                            readOnly: !isEditMode,
	                            style: styles.grid.headerTable,
	                            ref: 'data-grid' })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(InputNumber, { title: 'Summa ',
	                            name: 'summa',
	                            ref: 'input-summa',
	                            value: Number(self.docData.summa) || 0,
	                            disabled: true,
	                            style: styles.summa
	                        }),
	                        React.createElement(InputNumber, { title: 'K\xE4ibemaks ',
	                            name: 'kbm',
	                            ref: 'input-kbm',
	                            disabled: true,
	                            style: styles.summa,
	                            value: Number(self.docData.kbm) || 0
	                        }),
	                        React.createElement(InputNumber, { title: 'J\xE4\xE4k:',
	                            type: 'currency',
	                            name: 'jaak',
	                            ref: 'input-jaak',
	                            disabled: true,
	                            style: styles.summa,
	                            value: Number(self.docData.jaak) || 0
	                        })
	                    ),
	                    self.state.gridRowEdit ? this.createGridRow(self) : null,
	                    React.createElement('br', null),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'label',
	                            { ref: 'label' },
	                            'Tasud'
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(DataGrid, { source: 'tasud',
	                            gridData: gridArvTasuData,
	                            gridColumns: gridTasudColumns,
	                            showToolBar: false,
	                            handleGridBtnClick: self.handleGridBtnClick,
	                            docTypeId: 'smk',
	                            readOnly: true,
	                            style: styles.grid.headerTable,
	                            ref: 'tasud-data-grid' })
	                    )
	                )
	            );
	        }

	        /**
	         * Создаст компонет строки грида
	         * @returns {XML}
	         */

	    }, {
	        key: 'createGridRow',
	        value: function createGridRow(self) {

	            var row = self.gridRowData ? self.gridRowData : {},
	                validateMessage = '',
	                // self.state.warning
	            buttonOkReadOnly = validateMessage.length > 0 || !self.state.checked,
	                modalObjects = ['btnOk', 'btnCancel'];

	            if (buttonOkReadOnly) {
	                // уберем кнопку Ок
	                modalObjects.splice(0, 1);
	            }

	            if (!row) return React.createElement('div', null);

	            return React.createElement(
	                'div',
	                { className: '.modalPage' },
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalObjects: modalObjects,
	                        ref: 'modalpage-grid-row',
	                        show: true,
	                        modalPageBtnClick: self.modalPageClick,
	                        modalPageName: 'Rea lisamine / parandamine' },
	                    React.createElement(
	                        'div',
	                        { ref: 'grid-row-container' },
	                        self.state.gridWarning.length ? React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'span',
	                                null,
	                                self.state.gridWarning
	                            )
	                        ) : null,
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: '\xDCksus:',
	                                    name: 'yksus',
	                                    libs: 'lapse_grupp',
	                                    data: self.libs['lapse_grupp'],
	                                    value: row.yksus || '',
	                                    defaultValue: row.yksys || '',
	                                    ref: 'select-lapse_grupp',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange,
	                                    readOnly: false
	                                })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Teenus',
	                                    name: 'nomid',
	                                    libs: 'nomenclature',
	                                    data: self.libs['nomenclature'],
	                                    readOnly: false,
	                                    value: row.nomid,
	                                    collId: 'id',
	                                    ref: 'nomid',
	                                    placeholder: 'Teenuse kood',
	                                    onChange: self.handleGridRowChange })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(InputNumber, { title: 'Kogus ',
	                                    name: 'kogus',
	                                    value: Number(row.kogus ? row.kogus : 0),
	                                    readOnly: false,
	                                    disabled: false,
	                                    bindData: false,
	                                    ref: 'kogus',
	                                    pattern: '[0-9]{10}',
	                                    onChange: self.handleGridRowInput })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(InputNumber, { title: 'Soodustus ',
	                                    name: 'soodustus',
	                                    value: Number(row.soodustus ? row.soodustus : 0),
	                                    readOnly: false,
	                                    disabled: false,
	                                    bindData: false,
	                                    ref: 'hind',
	                                    pattern: '[0-9]{10}',
	                                    onChange: self.handleGridRowInput })
	                            ),
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(InputNumber, { title: 'Hind ',
	                                    name: 'hind',
	                                    value: Number(row.hind ? row.hind : 0),
	                                    readOnly: false,
	                                    disabled: false,
	                                    bindData: false,
	                                    ref: 'hind',
	                                    pattern: '[0-9]{10}',
	                                    onChange: self.handleGridRowInput })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(InputNumber, { title: 'Kbm-ta: ',
	                                    name: 'kbmta',
	                                    value: Number(row.summa ? row.summa - row.kbm : 0),
	                                    disabled: true,
	                                    bindData: false,
	                                    ref: 'kbmta',
	                                    pattern: '[0-9]{10}',
	                                    onChange: self.handleGridRowChange })
	                            ),
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(InputNumber, { title: 'Kbm: ',
	                                    name: 'kbm',
	                                    value: Number(row.kbm ? row.kbm : 0),
	                                    disabled: true,
	                                    bindData: false,
	                                    ref: 'kbm',
	                                    pattern: '[0-9]{10}',
	                                    onBlur: self.handleGridRowInput })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(InputNumber, { title: 'Summa: ',
	                                    name: 'Summa',
	                                    value: Number(row.summa ? row.summa : 0),
	                                    disabled: true,
	                                    bindData: false,
	                                    ref: 'summa',
	                                    pattern: '[0-9]{10}',
	                                    onChange: self.handleGridRowInput })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Korr. konto',
	                                    name: 'konto',
	                                    data: self.libs['kontod'],
	                                    value: row.konto || '',
	                                    ref: 'konto',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange })
	                            ),
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Tunnus:',
	                                    name: 'tunnus',
	                                    data: self.libs['tunnus'],
	                                    value: row.tunnus || '',
	                                    ref: 'tunnus',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Tegevus:',
	                                    name: 'kood1',
	                                    data: self.libs['tegev'],
	                                    value: row.kood1 || '',
	                                    ref: 'kood1',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange })
	                            ),
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Project:',
	                                    name: 'proj',
	                                    data: self.libs['project'],
	                                    value: row.proj || '',
	                                    ref: 'project',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Allikas',
	                                    name: 'kood2',
	                                    data: self.libs['allikas'],
	                                    value: row.kood2 || '',
	                                    ref: 'kood2',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'div',
	                                { style: styles.docColumn },
	                                React.createElement(Select, { title: 'Eelarve',
	                                    name: 'kood5',
	                                    data: self.libs['artikkel'],
	                                    value: row.kood5 || '',
	                                    ref: 'kood5',
	                                    collId: 'kood',
	                                    onChange: self.handleGridRowChange })
	                            )
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(TextArea, { title: 'M\xE4rkused',
	                                name: 'muud',
	                                ref: 'gridrow-textarea-muud',
	                                onChange: self.handleGridRowChange,
	                                value: row.muud || '' })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        null,
	                        React.createElement(
	                            'span',
	                            null,
	                            validateMessage
	                        )
	                    )
	                )
	            );
	        }

	        /**
	         * валидатор для строки грида
	         * @returns {string}
	         */

	    }, {
	        key: 'gridValidateFields',
	        value: function gridValidateFields() {
	            var warning = '';
	            var doc = this.refs['document'];
	            if (doc && doc.gridRowData) {

	                // только после проверки формы на валидность
	                if (doc.gridRowData && !doc.gridRowData['nomid']) warning = warning + ' Код операции';
	                if (!doc.gridRowData['kogus']) warning = warning + ' Количество';
	                if (!doc.gridRowData['summa']) warning = warning + ' Сумма';

	                this.recalcRowSumm();
	                this.recalcDocSumma('summa');
	            }
	            return warning;
	        }

	        /**
	         * перерасчет суммы строки и расчет налога
	         */

	    }, {
	        key: 'recalcRowSumm',
	        value: function recalcRowSumm() {
	            var doc = this.refs['document'];

	            if (!Object.keys(doc.gridRowData).length) {
	                return;
	            }
	            //подставим наименование услогу

	            var vat = 0;
	            var nomHind = 0;
	            if (doc.gridRowData['nomid']) {
	                var nomDataName = doc.libs['nomenclature'].find(function (lib) {
	                    return Number(lib.id) === Number(doc.gridRowData['nomid']);
	                });

	                if (nomDataName) {
	                    doc.gridRowData['hind'] = nomDataName.hind && !doc.gridRowData['hind'] ? nomDataName.hind : doc.gridRowData['hind'];
	                    vat = nomDataName.vat ? Number(nomDataName.vat) / 100 : 0;
	                    nomHind = nomDataName.hind;
	                    doc.gridRowData['kood'] = nomDataName.kood ? nomDataName.kood : null;
	                    doc.gridRowData['nimetus'] = nomDataName.nimetus ? nomDataName.nimetus : null;
	                    doc.gridRowData['uhik'] = nomDataName.uhik ? nomDataName.uhik : null;
	                    doc.gridRowData['konto'] = nomDataName.konto ? nomDataName.konto : null;
	                    doc.gridRowData['tunnus'] = nomDataName.tunnus ? nomDataName.tunnus : null;
	                    doc.gridRowData['proj'] = nomDataName.proj ? nomDataName.proj : null;
	                    doc.gridRowData['kood1'] = nomDataName.tegev ? nomDataName.tegev : null;
	                    doc.gridRowData['kood2'] = nomDataName.allikas ? nomDataName.allikas : null;
	                    doc.gridRowData['kood5'] = nomDataName.artikkel ? nomDataName.artikkel : null;
	                }
	            }

	            doc.gridRowData['kogus'] = Number(doc.gridRowData.kogus);
	            doc.gridRowData['soodustus'] = doc.gridRowData['soodustus'] ? Number(doc.gridRowData.soodustus) : 0;
	            doc.gridRowData['hind'] = nomHind && doc.gridRowData['soodustus'] ? Number(nomHind) - doc.gridRowData['soodustus'] : Number(doc.gridRowData.hind);
	            doc.gridRowData['kbmta'] = Round(Number(doc.gridRowData['kogus']) * Number(doc.gridRowData['hind']));
	            doc.gridRowData['kbm'] = Round(Number(doc.gridRowData['kbmta']) * vat);
	            doc.gridRowData['summa'] = Round(Number(doc.gridRowData['kbmta']) + Number(doc.gridRowData['kbm']));
	        }

	        /**
	         * Перерасчет итоговых сумм документа
	         */

	    }, {
	        key: 'recalcDocSumma',
	        value: function recalcDocSumma() {
	            var doc = this.refs['document'];

	            doc.docData['summa'] = 0;
	            doc.docData['kbm'] = 0;
	            doc.docData.gridData.forEach(function (row) {
	                doc.docData['summa'] = Number(doc.docData['summa']) + Number(row['summa']);
	                doc.docData['kbm'] = Number(doc.docData['kbm']) + Number(row['kbm']);
	            });
	            doc.docData['summa'] = Round(doc.docData['summa']);
	            doc.docData['kbm'] = Round(doc.docData['kbm']);
	        }

	        // обработчик события клиска на кнопке редактирования контр-агента

	    }, {
	        key: 'btnEditAsutusClick',
	        value: function btnEditAsutusClick() {
	            var docAsutusId = this.refs['document'].docData.asutusid;

	            // осуществит переход на карточку контр-агента
	            this.props.history.push('/' + this.state.module + '/asutused/' + docAsutusId);
	        }

	        //обработчик события по клику кнопки Редактирование ребенка

	    }, {
	        key: 'btnEditLapsClick',
	        value: function btnEditLapsClick() {
	            var docLapsId = this.refs['document'].docData.lapsid;
	            if (docLapsId) {
	                // осуществит переход на карточку контр-агента
	                this.props.history.push('/' + this.state.module + '/laps/' + docLapsId);
	            }
	        }
	    }]);

	    return Arve;
	}(React.PureComponent);

	Arve.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Arve.defaultProps = {
	    params: { docId: 0 },
	    initData: {},
	    userData: {}
	};

	module.exports = Arve;

/***/ }),
/* 273 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	        border: '1px solid blue'
	*/},docColumn:{display:'flex',flexDirection:'column',/*
	        border: '1px solid yellow',
	*/width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	        border: '1px solid brown'
	*/},summa:{width:'auto'},grid:{mainTable:{width:'100%'},headerTable:{width:'100%'},gridContainer:{width:'100%'}},gridRow:{/*
	        border: '1px solid black',
	*/backgroundColor:'white',position:'relative',margin:'10% 30% 10% 30%',width:'auto',opacity:'1',top:'100px'},btnEdit:{width:'min-content'}};

/***/ }),
/* 274 */
/***/ (function(module, exports) {

	"use strict";var roundToTwo=function roundToTwo(num){return+(Math.round(num+"e+2")+"e-2");};module.exports=roundToTwo;

/***/ }),
/* 275 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var DocumentRegister = __webpack_require__(233);
	var styles = __webpack_require__(276);
	var DOC_TYPE_ID = 'SMK';
	var ButtonUpload = __webpack_require__(244);
	var BtnLogs = __webpack_require__(277);
	var ToolbarContainer = __webpack_require__(78);
	var InputNumber = __webpack_require__(219);

	var getSum = __webpack_require__(256);

	var checkRights = __webpack_require__(172);
	var DocContext = __webpack_require__(1);

	var DocRights = __webpack_require__(171);

	/**
	 * Класс реализует документ приходного платежного ордера.
	 */

	var Documents = function (_React$PureComponent) {
	    _inherits(Documents, _React$PureComponent);

	    function Documents(props) {
	        _classCallCheck(this, Documents);

	        var _this = _possibleConstructorReturn(this, (Documents.__proto__ || Object.getPrototypeOf(Documents)).call(this, props));

	        _this.renderer = _this.renderer.bind(_this);
	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.state = {
	            summa: 0,
	            read: 0,
	            isReport: false,
	            txtReport: []

	        };
	        return _this;
	    }

	    _createClass(Documents, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(DocumentRegister, { initData: this.props.initData,
	                    history: this.props.history ? this.props.history : null,
	                    module: this.props.module,
	                    ref: 'register',
	                    docTypeId: DOC_TYPE_ID,
	                    style: styles,
	                    render: this.renderer }),
	                React.createElement(InputNumber, { title: 'Read kokku:',
	                    name: 'read_kokku',
	                    style: styles.total,
	                    ref: 'input-read',
	                    value: Number(this.state.read) || 0,
	                    disabled: true }),
	                React.createElement(InputNumber, { title: 'Summa kokku:',
	                    name: 'summa_kokku',
	                    style: styles.total,
	                    ref: 'input-summa',
	                    value: Number(this.state.summa).toFixed(2) || 0,
	                    disabled: true })
	            );
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            if (!self) {
	                return null;
	            }

	            var docRights = DocRights[DOC_TYPE_ID] ? DocRights[DOC_TYPE_ID] : [];
	            var userRoles = DocContext.userData ? DocContext.userData.roles : [];

	            var deebet = self.gridData && self.gridData.length ? self.gridData[0].deebet_total : 0;
	            this.setState({ summa: deebet, read: self.gridData.length });

	            return React.createElement(
	                ToolbarContainer,
	                null,
	                checkRights(userRoles, docRights, 'import') ? React.createElement(ButtonUpload, {
	                    ref: 'btnUpload',
	                    docTypeId: DOC_TYPE_ID,
	                    onClick: this.handleClick,
	                    show: true,
	                    mimeTypes: '.csv,.xml'
	                }) : null,
	                React.createElement(BtnLogs, {
	                    history: self.props.history ? self.props.history : null,
	                    ref: 'btnLogs',
	                    value: 'Panga VV logid'
	                })
	            );
	        }

	        /**
	         * кастомный обработчик события клик на кнопку импорта
	         */

	    }, {
	        key: 'handleClick',
	        value: function handleClick() {

	            //обновим данные
	            var Doc = this.refs['register'];

	            setTimeout(function () {
	                Doc.fetchData('selectDocs');
	            }, 1000);
	        }
	    }]);

	    return Documents;
	}(React.PureComponent);

	module.exports = Documents;

/***/ }),
/* 276 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}},doc:{height:'100%'},total:{width:'auto'}};

/***/ }),
/* 277 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);
	var DocContext = __webpack_require__(1);

	var styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'info';

	var ButtonLogs = function (_React$PureComponent) {
	    _inherits(ButtonLogs, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonLogs(props) {
	        _classCallCheck(this, ButtonLogs);

	        var _this = _possibleConstructorReturn(this, (ButtonLogs.__proto__ || Object.getPrototypeOf(ButtonLogs)).call(this, props));

	        _this.state = {
	            value: props.value || 'Logid'
	        };

	        return _this;
	    }

	    // will update state if props changed


	    _createClass(ButtonLogs, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            if (this.props.onClick) {
	                return this.props.onClick('logid');
	            } else {
	                // register name
	                var docType = DocContext['menu'].find(function (row) {
	                    return row.kood.toUpperCase() === 'pank_vv'.toUpperCase();
	                });

	                if (!docType) {
	                    DocContext.pageName = docType ? docType.name : 'Panga väljavõtte';
	                }

	                //redirect
	                this.props.history.push({ pathname: '/' + DocContext.module + '/pank_vv', state: { module: DocContext.module } });
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    value: this.state.value,
	                    ref: 'btnLogid',
	                    style: styles.button,
	                    show: this.props.show ? this.props.show : true,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value) {
	                return { value: nextProps.value };
	            } else return null;
	        }
	    }]);

	    return ButtonLogs;
	}(React.PureComponent);

	ButtonLogs.propTypes = {
	    value: PropTypes.string
	};

	ButtonLogs.defaultProps = {
	    disabled: false,
	    show: true,
	    value: 'Logid'
	};

	module.exports = ButtonLogs;

/***/ }),
/* 278 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    InputNumber = __webpack_require__(219),
	    Select = __webpack_require__(213),
	    SelectData = __webpack_require__(250),
	    TextArea = __webpack_require__(224),
	    DataGrid = __webpack_require__(189),
	    DokProp = __webpack_require__(279),
	    relatedDocuments = __webpack_require__(227),
	    ModalPage = __webpack_require__(184),
	    Loading = __webpack_require__(252),
	    ButtonUuendaLib = __webpack_require__(281),
	    styles = __webpack_require__(282);

	var DOC_TYPE_ID = 'SMK';
	var DocContext = __webpack_require__(1);

	var LIBRARIES = [{ id: 'kontod', filter: '' }, { id: 'dokProps', filter: 'WHERE kood = \'SMK\'' }, { id: 'users', filter: '' }, { id: 'tunnus', filter: '' }, { id: 'project', filter: '' }, { id: 'nomenclature', filter: 'where dok in (\'MK\',\'SMK\')' }, { id: 'asutused', filter: 'where id in (select asutusid from lapsed.vanemad)' }, { id: 'vanem', filter: '' }, { id: 'aa', filter: '' }];

	var Smk = function (_React$PureComponent) {
	    _inherits(Smk, _React$PureComponent);

	    function Smk(props) {
	        _classCallCheck(this, Smk);

	        var _this = _possibleConstructorReturn(this, (Smk.__proto__ || Object.getPrototypeOf(Smk)).call(this, props));

	        _this.state = {
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            loadedData: false,
	            lapsId: null,
	            module: _this.props.module,
	            isAskToCreateFromArv: true, // если указан счет, а док.ид = 0 , то можно создпть ордер по счету
	            getSMK: false,
	            arvId: 0,
	            kas_aa_kasitsi: false
	        };

	        _this.createGridRow = _this.createGridRow.bind(_this);
	        _this.recalcDocSumma = _this.recalcDocSumma.bind(_this);
	        _this.recalcRowSumm = _this.recalcRowSumm.bind(_this);

	        _this.renderer = _this.renderer.bind(_this);
	        _this.gridValidateFields = _this.gridValidateFields.bind(_this);
	        _this.modalPageBtnClick = _this.modalPageBtnClick.bind(_this);

	        _this.pages = [{ pageName: 'Sissemakse korraldus', docTypeId: 'SMK' }];
	        return _this;
	    }

	    _createClass(Smk, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (this.props.history && this.props.history.location.state) {
	                var lapsId = this.props.history.location.state.lapsId;
	                var _module = this.props.history.location.state.module ? this.props.history.location.state.module : 'lapsed';
	                this.setState({ lapsId: lapsId, module: _module });
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                docTypeId: DOC_TYPE_ID,
	                history: this.props.history,
	                module: this.state.module,
	                initData: this.props.initData,
	                reload: true,
	                libs: LIBRARIES,
	                pages: this.pages,
	                renderer: this.renderer,
	                createGridRow: this.createGridRow,
	                gridValidator: this.gridValidateFields,
	                recalcDoc: this.recalcDocSumma,
	                focusElement: 'input-number'

	            });
	        }

	        /**
	         * Вернет кастомные компоненты документа
	         * @returns {XML}
	         */

	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            if (!self || !self.docData || !self.docData.kpv) {
	                return React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(Loading, { label: 'Laadimine...' })
	                );
	            }

	            var isEditeMode = self.state.edited;

	            // формируем зависимости
	            if (self.docData.relations) {
	                relatedDocuments(self);
	            }

	            var isNewDoc = !self.docData.id || self.docData.id === 0;
	            if ((!self.docData.id || self.docData.id === 0) && self.docData.arvid && this.state.isAskToCreateFromArv) {
	                this.setState({ getSMK: true, isAskToCreateFromArv: false, arvId: self.docData.arvid });
	            }

	            // queryArvTasu
	            var gridArvData = self.docData.queryArvTasu,
	                gridArvColumns = self.docData.gridArvConfig;

	            if (self.docData.jaak) {
	                DocContext.mkJaak = self.docData.jaak;
	            }

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    'div',
	                    { className: 'div-doc' },
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { title: 'Number',
	                                name: 'number',
	                                value: String(self.docData.number || ''),
	                                ref: 'input-number',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputDate, { title: 'Kuup\xE4ev ',
	                                name: 'kpv',
	                                value: self.docData.kpv || '01-07-2020',
	                                ref: 'input-kpv',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(Select, { title: 'Arveldus arve',
	                                name: 'aa_id',
	                                libs: 'aa',
	                                value: Number(self.docData.aa_id) || 0,
	                                data: self.libs['aa'],
	                                defaultValue: String(self.docData.pank) || '',
	                                onChange: self.handleInputChange,
	                                ref: 'select-aaId',
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputDate, { title: 'Maksep\xE4ev ',
	                                name: 'maksepaev',
	                                value: self.docData.maksepaev || '',
	                                ref: 'input-maksepaev',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputText, { title: 'Viitenumber ',
	                                name: 'viitenr',
	                                value: self.docData.viitenr || '',
	                                ref: 'input-viitenr',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(DokProp, { title: 'Konteerimine: ',
	                                name: 'doklausid',
	                                data: self.libs['dokProps'],
	                                dokTypeId: 'SMK',
	                                value: Number(self.docData.doklausid) || 0,
	                                defaultValue: self.docData.dokprop || '',
	                                history: this.props.history,
	                                ref: 'dokprop',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(TextArea, { title: 'Selgitus',
	                            name: 'selg',
	                            ref: 'textarea-selg',
	                            value: self.docData.selg || '',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(DataGrid, { source: 'details',
	                            gridData: self.docData.gridData,
	                            gridColumns: self.docData.gridConfig,
	                            showToolBar: isEditeMode,
	                            handleGridRow: self.handleGridRow,
	                            handleGridBtnClick: self.handleGridBtnClick,
	                            readOnly: !isEditeMode,
	                            style: styles.grid.headerTable,
	                            ref: 'data-grid' })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { title: 'Kokku: ',
	                                name: 'summa',
	                                ref: 'input-summa',
	                                value: String(self.docData.summa) || '0.00',
	                                width: 'auto',
	                                disabled: true })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { title: 'M\xE4\xE4ramata summa: ',
	                                name: 'mk_jaak',
	                                ref: 'input-jaak',
	                                value: String(self.docData.jaak) || '0.00',
	                                width: 'auto',
	                                disabled: true })
	                        )
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'M\xE4rkused',
	                        name: 'muud',
	                        ref: 'textarea-muud',
	                        value: self.docData.muud || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode })
	                ),
	                self.state.gridRowEdit ? this.createGridRow(self) : null,
	                React.createElement(
	                    ModalPage,
	                    { ref: 'modalpageCreateOrder',
	                        modalPageBtnClick: this.modalPageBtnClick,
	                        modalPageName: 'Kas koosta SMK',
	                        show: this.state.getSMK },
	                    'Kas koosta SMK?'
	                ),
	                React.createElement('br', null),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(
	                        'label',
	                        { ref: 'label' },
	                        'Arved'
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(DataGrid, { source: 'arved',
	                        gridData: gridArvData,
	                        gridColumns: gridArvColumns,
	                        showToolBar: false,
	                        handleGridBtnClick: self.handleGridBtnClick,
	                        docTypeId: 'arv',
	                        readOnly: true,
	                        style: styles.grid.headerTable,
	                        ref: 'arved-data-grid' })
	                )
	            );
	        }

	        /**
	         * will create SMK
	         */

	    }, {
	        key: 'modalPageBtnClick',
	        value: function modalPageBtnClick(btnEvent) {
	            var _this2 = this;

	            this.setState({ getSMK: false });
	            if (btnEvent === 'Ok') {
	                var Doc = this.refs['document'];
	                var api = '/calc/koostaMK';

	                var params = {
	                    docTypeId: DOC_TYPE_ID,
	                    module: this.props.module ? this.props.module : DocContext.module,
	                    userId: DocContext.userData.userId,
	                    uuid: DocContext.userData.uuid,
	                    docs: [Number(this.state.arvId)],
	                    seisuga: Doc.docData && Doc.docData.kpv ? Doc.docData.kpv : null,
	                    context: DocContext[api] ? DocContext[api] : null,
	                    taskName: 'koostaMK'
	                };

	                Doc.fetchData('Post', api, { data: params }).then(function (response) {
	                    if (response && response.error_message) {
	                        Doc.setState({
	                            warning: 'viga: ' + response.error_message,
	                            warningType: 'error'
	                        });
	                    } else {
	                        if (response && response.result) {
	                            var newDocId = response.data && response.data && response.data.result && response.data.result.doc_id ? response.data.result.doc_id : 0;
	                            Doc.setState({
	                                warning: 'Edukalt, suunatan ...',
	                                warningType: 'ok'
	                            });

	                            // переходим на созданнй док
	                            if (newDocId) {
	                                setTimeout(function () {
	                                    var current = '/' + (_this2.props.module ? _this2.props.module : DocContext.module) + '/smk/' + newDocId;
	                                    _this2.props.history.replace('/reload');
	                                    setTimeout(function () {
	                                        _this2.props.history.replace(current);
	                                    });
	                                }, 2000);
	                            }
	                        } else {
	                            Doc.setState({
	                                warning: 'Tekkis viga',
	                                warningType: 'error'
	                            });
	                        }
	                    }
	                }).catch(function (error) {
	                    console.error('api call error', error);
	                    Doc.setState({
	                        warning: 'Viga ' + error,
	                        warningType: 'error'
	                    });
	                });
	            }
	        }

	        /**
	         * формирует объекты модального окна редактирования строки грида
	         * @returns {XML}
	         */

	    }, {
	        key: 'createGridRow',
	        value: function createGridRow(self) {
	            var row = self.gridRowData ? self.gridRowData : {},
	                validateMessage = '',
	                // self.state.warning
	            buttonOkReadOnly = validateMessage.length > 0 || !self.state.checked,
	                modalObjects = ['btnOk', 'btnCancel'];

	            if (buttonOkReadOnly) {
	                // уберем кнопку Ок
	                modalObjects.splice(0, 1);
	            }

	            if (!row) return React.createElement('div', null);

	            // наложить фильтр на список плательщиков, если указан витенумбер
	            var data = self.libs['asutused'];
	            if (self.docData.viitenr && self.libs['vanem'] && self.libs['vanem'].length && self.libs['asutused'] && self.libs['asutused'].length) {

	                // найти родителя
	                var vanem = self.libs['vanem'].filter(function (row) {
	                    return row.viitenr === self.docData.viitenr;
	                });

	                if (vanem && vanem.length) {
	                    // нашли родителя, ставим фильтр
	                    data = data.filter(function (row) {
	                        return !!vanem.find(function (kiri) {
	                            return kiri.id === row.id;
	                        });
	                    });
	                }
	            }

	            // сортировка по ид коду
	            data = data.sort(function (a, b) {
	                return a.kood.localeCompare(b.kood, 'en', { sensitivity: 'base' });
	            });

	            return React.createElement(
	                'div',
	                { className: '.modalPage' },
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalObjects: modalObjects,
	                        ref: 'modalpage-grid-row',
	                        show: true,
	                        modalPageBtnClick: self.modalPageClick,
	                        modalPageName: 'Rea lisamine / parandamine' },
	                    React.createElement(
	                        'div',
	                        { ref: 'grid-row-container' },
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Operatsioon',
	                                name: 'nomid',
	                                data: self.libs['nomenclature'],
	                                value: row.nomid || 0,
	                                collId: 'id',
	                                defaultValue: row.kood || '',
	                                ref: 'nomid',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Partner',
	                                name: 'asutusid',
	                                data: data,
	                                value: row.asutusid,
	                                defaultValue: row.asutus || '',
	                                collId: 'id',
	                                ref: 'asutusid',
	                                onChange: self.handleGridRowChange }),
	                            React.createElement(ButtonUuendaLib, {
	                                self: self,
	                                lib: 'asutused'
	                            })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(InputText, { title: 'Arveldus arve: ',
	                                name: 'aa',
	                                value: row.aa || '',
	                                bindData: false,
	                                ref: 'aa',
	                                onChange: self.handleGridRowInput })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(InputNumber, { title: 'Summa: ',
	                                name: 'summa',
	                                value: Number(row.summa),
	                                bindData: false,
	                                ref: 'summa',
	                                onChange: self.handleGridRowInput })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Korr. konto',
	                                name: 'konto',
	                                libs: 'kontod',
	                                data: self.libs['kontod'],
	                                value: row.konto,
	                                ref: 'konto',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Tunnus:',
	                                name: 'tunnus',
	                                libs: 'tunnus',
	                                data: self.libs['tunnus'],
	                                value: row.tunnus,
	                                ref: 'tunnus',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Project:',
	                                name: 'proj',
	                                libs: 'project',
	                                data: self.libs['project'],
	                                value: row.proj,
	                                ref: 'project',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        null,
	                        React.createElement(
	                            'span',
	                            null,
	                            validateMessage
	                        )
	                    )
	                )
	            );
	        }

	        /**
	         * перерасчет итоговой суммы документа
	         */

	    }, {
	        key: 'recalcDocSumma',
	        value: function recalcDocSumma() {
	            var doc = this.refs['document'];
	            doc.docData['summa'] = 0;
	            doc.docData.gridData.forEach(function (row) {
	                doc.docData['summa'] += Number(row['summa']);
	            });
	        }

	        /**
	         * подставит код операции
	         */

	    }, {
	        key: 'recalcRowSumm',
	        value: function recalcRowSumm() {
	            var doc = this.refs['document'];

	            if (!Object.keys(doc.gridRowData).length) {
	                return;
	            }

	            //подставим наименование услогу

	            if (doc.gridRowData['nomid']) {
	                var nomDataName = doc.libs['nomenclature'].find(function (lib) {
	                    return lib.id === Number(doc.gridRowData['nomid']);
	                });

	                if (nomDataName) {
	                    doc.gridRowData['kood'] = nomDataName.kood;
	                    doc.gridRowData['nimetus'] = nomDataName.nimetus;
	                }
	            }

	            //подставим наименование
	            if (doc.gridRowData['asutusid']) {

	                var asutusDataName = doc.libs['asutused'].find(function (lib) {
	                    return lib.id === Number(doc.gridRowData['asutusid']);
	                });

	                if (asutusDataName) {
	                    doc.gridRowData['asutus'] = asutusDataName.nimetus;

	                    if (!doc.gridRowData['aa']) {
	                        doc.gridRowData['aa'] = asutusDataName.pank;
	                    }
	                }
	            }
	        }

	        /**
	         * валидатор для строки грида
	         * @returns {string}
	         */

	    }, {
	        key: 'gridValidateFields',
	        value: function gridValidateFields() {
	            var warning = '';
	            var doc = this.refs['document'];
	            if (doc && doc.gridRowData) {

	                // только после проверки формы на валидность
	                if (doc.gridRowData && !doc.gridRowData['nomid']) warning = warning + ' Код операции';
	                if (!doc.gridRowData['summa']) warning = warning + ' Сумма';
	                if (!doc.gridRowData['asutusid']) warning = warning + ' Платильщик';

	                this.recalcRowSumm();
	                this.recalcDocSumma('summa');
	            }
	            return warning;
	        }
	    }]);

	    return Smk;
	}(React.PureComponent);

	Smk.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Smk.defaultProps = {
	    initData: {},
	    userData: {}
	};

	module.exports = Smk;

/***/ }),
/* 279 */
/***/ (function(module, exports, __webpack_require__) {

	// виджет, объединяющий селект и текст. в тексте отражаютмя данные, связанные с селектом
	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);
	var Select = __webpack_require__(213);
	var ButtonEdit = __webpack_require__(84);
	var ButtonAdd = __webpack_require__(179);
	var Text = __webpack_require__(224);
	var DocContext = __webpack_require__(1);
	var styles = __webpack_require__(280);

	var React = __webpack_require__(10);

	var SelectTextWidget = function (_React$PureComponent) {
	    _inherits(SelectTextWidget, _React$PureComponent);

	    function SelectTextWidget(props) {
	        _classCallCheck(this, SelectTextWidget);

	        var _this = _possibleConstructorReturn(this, (SelectTextWidget.__proto__ || Object.getPrototypeOf(SelectTextWidget)).call(this, props));

	        _this.state = {
	            value: props.value ? props.value : null,
	            description: '', // пойдет в текстовую область
	            libData: props.data
	        };
	        _this.handleSelectOnChange = _this.handleSelectOnChange.bind(_this);
	        _this.handleClick = _this.handleClick.bind(_this);
	        return _this;
	    }

	    // will update state if props changed


	    _createClass(SelectTextWidget, [{
	        key: 'handleSelectOnChange',
	        value: function handleSelectOnChange(name, value) {
	            var _this2 = this;

	            // отработаем событие и поменяем состояние

	            this.setState({ value: value }, function () {
	                _this2.props.onChange(_this2.props.name, value);
	            });
	        }

	        /**
	         *     кастомный обработчик собютия клик
	         */

	    }, {
	        key: 'handleClick',
	        value: function handleClick(event) {
	            // делаем редайрект на страницц справочника
	            if (event === 'edit' || event === 'Muuda') {
	                this.props.history.push({
	                    pathname: '/' + DocContext.module + '/dokprops/' + this.state.value,
	                    state: { dokPropId: DocContext.docTypeId, type: 'text' }
	                });
	            } else if (event === 'add' || event === 'Lisa') {
	                this.props.history.push({
	                    pathname: '/' + DocContext.module + '/dokprops/0',
	                    state: { dokPropId: DocContext.docTypeId, type: 'text' }
	                });
	            }
	        }

	        /**
	         * Метод ищет в справочнике описание
	         * @param libData
	         * @returns {string}
	         */

	    }, {
	        key: 'getDescriptionBySelectValue',
	        value: function getDescriptionBySelectValue(libData) {
	            var _this3 = this;

	            // найдем в справочнике описание и установим его состояние
	            var libRow = libData.filter(function (lib) {

	                if (lib.id === _this3.props.value) {
	                    return lib;
	                }
	            }),
	                selg = '',
	                selgObject = libRow.length ? libRow[0].details : '';

	            for (var property in selgObject) {
	                if (selgObject.hasOwnProperty(property)) {
	                    // интересуют только "собственные" свойства объекта
	                    selg = selg + property + ':' + selgObject[property];
	                }
	            }
	            return selg;
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                'div',
	                { style: styles.wrapper },
	                React.createElement(Select, { className: this.props.className,
	                    ref: 'select',
	                    title: this.props.title,
	                    name: this.props.name,
	                    data: this.props.data,
	                    collId: 'id',
	                    value: this.state.value || '',
	                    defaultValue: this.props.defaultValue || '',
	                    placeholder: this.props.placeholder || this.props.title,
	                    readOnly: this.props.readOnly,
	                    onChange: this.handleSelectOnChange
	                }),
	                this.state.value ? React.createElement(ButtonEdit, {
	                    value: 'Muuda',
	                    show: this.props.readOnly,
	                    onClick: this.handleClick
	                }) : React.createElement(ButtonAdd, {
	                    value: 'Lisa',
	                    show: this.props.readOnly,
	                    onClick: this.handleClick })
	            );
	        }
	    }], [{
	        key: 'getDerivedStateFromProps',
	        value: function getDerivedStateFromProps(nextProps, prevState) {
	            if (nextProps.value !== prevState.value) {
	                return { value: nextProps.value };
	            } else return null;
	        }
	    }]);

	    return SelectTextWidget;
	}(React.PureComponent);

	SelectTextWidget.propTypes = {
	    value: PropTypes.number,
	    name: PropTypes.string.isRequired,
	    title: PropTypes.string,
	    libs: PropTypes.string,
	    defaultValue: PropTypes.string,
	    readOnly: PropTypes.bool,
	    placeholder: PropTypes.string
	};

	SelectTextWidget.defaultProps = {
	    readOnly: false,
	    title: ''
	};

	module.exports = SelectTextWidget;

/***/ }),
/* 280 */
/***/ (function(module, exports) {

	'use strict';module.exports={wrapper:{margin:'5px',display:'flex',width:'95%'},input:{width:'70%',marginLeft:'5px',borderRadius:'5px'},a:{width:'70%',marginLeft:'5px',borderRadius:'5px'},hide:{display:'none'},select:{width:'70%',heigth:'100%',marginLeft:'5px',borderRadius:'5px',':focus':{backgroundColor:'lightpink'}},readOnly:{backgroundColor:'#F3EFEF'},label:{width:'30%',margin:'5px'},button:{width:'5%'}};

/***/ }),
/* 281 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var PropTypes = __webpack_require__(33);

	var React = __webpack_require__(10),
	    styles = __webpack_require__(81),
	    Button = __webpack_require__(82),
	    ICON = 'refresh';

	var ButtonUuendaLib = function (_React$PureComponent) {
	    _inherits(ButtonUuendaLib, _React$PureComponent);

	    // кнопка создания документа в регистрах
	    function ButtonUuendaLib(props) {
	        _classCallCheck(this, ButtonUuendaLib);

	        return _possibleConstructorReturn(this, (ButtonUuendaLib.__proto__ || Object.getPrototypeOf(ButtonUuendaLib)).call(this, props));
	    }

	    _createClass(ButtonUuendaLib, [{
	        key: 'handleClick',
	        value: function handleClick(e) {
	            // если передан обработчик, вернем его
	            if (this.props.onClick) {
	                return this.props.onClick();
	            }

	            // если передан документ, вызовем метод обновления библиотеки
	            if (this.props.self && this.props.self.loadLibs && this.props.lib) {
	                var self = this.props.self;
	                self.loadLibs(this.props.lib);
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            var _this2 = this;

	            return React.createElement(
	                Button,
	                {
	                    ref: 'btnUuenda',
	                    show: this.props.show,
	                    disabled: this.props.disabled,
	                    onClick: function onClick(e) {
	                        return _this2.handleClick(e);
	                    } },
	                React.createElement('img', { ref: 'image', src: styles.icons[ICON] })
	            );
	        }
	    }]);

	    return ButtonUuendaLib;
	}(React.PureComponent);

	ButtonUuendaLib.defaultProps = {
	    disabled: false,
	    show: true
	};
	module.exports = ButtonUuendaLib;

/***/ }),
/* 282 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	        border: '1px solid blue'
	*/},docColumn:{display:'flex',flexDirection:'column',/*
	        border: '1px solid yellow',
	*/width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	        border: '1px solid brown'
	*/},gridRow:{border:'1px solid black',backgroundColor:'white',position:'relative',margin:'10% 30% 10% 30%',width:'auto',opacity:'1',top:'100px'},docToolbarWarning:{float:'left',backgroundColor:'red',margin:'10px'},grid:{mainTable:{width:'100%'},headerTable:{width:'100%'},gridContainer:{width:'100%'}}};

/***/ }),
/* 283 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var DocumentRegister = __webpack_require__(233);
	var InputNumber = __webpack_require__(219);

	var getSum = __webpack_require__(256);
	var styles = __webpack_require__(284);
	var DocContext = __webpack_require__(1);

	var ToolbarContainer = __webpack_require__(78);
	var BtnSepa = __webpack_require__(270);
	var DOC_TYPE_ID = 'VMK';

	/**
	 * Класс реализует документ приходного платежного ордера.
	 */

	var Documents = function (_React$PureComponent) {
	    _inherits(Documents, _React$PureComponent);

	    function Documents(props) {
	        _classCallCheck(this, Documents);

	        var _this = _possibleConstructorReturn(this, (Documents.__proto__ || Object.getPrototypeOf(Documents)).call(this, props));

	        _this.onClickHandler = _this.onClickHandler.bind(_this);
	        _this.renderer = _this.renderer.bind(_this);
	        _this.state = {
	            summa: 0,
	            read: 0
	        };

	        return _this;
	    }

	    _createClass(Documents, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(DocumentRegister, { initData: this.props.initData,
	                    ref: 'register',
	                    history: this.props.history ? this.props.history : null,
	                    docTypeId: DOC_TYPE_ID,
	                    module: this.props.module,
	                    style: styles,
	                    render: this.renderer }),
	                React.createElement(InputNumber, { title: 'Read kokku:',
	                    name: 'read_kokku',
	                    style: styles.total,
	                    ref: 'input-read',
	                    value: Number(this.state.read) || 0,
	                    disabled: true }),
	                React.createElement(InputNumber, { title: 'Summa kokku:',
	                    name: 'summa_kokku',
	                    style: styles.total,
	                    ref: 'input-summa',
	                    value: Number(this.state.summa).toFixed(2) || 0,
	                    disabled: true })
	            );
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            var summa = self.gridData ? getSum(self.gridData, 'kreedit') : 0;
	            if (summa) {
	                this.setState({ summa: summa, read: self.gridData.length });
	            }

	            return React.createElement(
	                ToolbarContainer,
	                null,
	                React.createElement(BtnSepa, {
	                    onClick: this.onClickHandler,
	                    phrase: 'Kas laadida XML fail?',
	                    ref: 'btnSepaXML',
	                    value: 'Saama XML (SEPA) kõik valitud maksed'
	                })
	            );
	        }

	        //handler для события клик на кнопках панели

	    }, {
	        key: 'onClickHandler',
	        value: function onClickHandler(event) {
	            var ids = new Set(); // сюда пишем ид счетом, которые под обработку

	            var Doc = this.refs['register'];
	            // будет отправлено на почту  выбранные и только для эл.почты счета
	            Doc.gridData.forEach(function (row) {
	                // выбрано для печати
	                ids.add(row.id);
	            });

	            // конвертация в массив
	            ids = Array.from(ids);

	            if (!ids.length) {
	                Doc.setState({
	                    warning: 'Mitte ühtegi makse leidnum', // строка извещений
	                    warningType: 'notValid'
	                });
	            } else {
	                // отправляем запрос на выполнение
	                Doc.setState({
	                    warning: 'Leidsin ' + ids.length + ' maksed', // строка извещений
	                    warningType: 'ok'
	                });

	                var url = '/sepa/' + DocContext.userData.uuid + '/' + ids;
	                window.open('' + url);
	            }
	        }
	    }]);

	    return Documents;
	}(React.PureComponent);

	module.exports = Documents;

/***/ }),
/* 284 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}},doc:{height:'100%'},total:{width:'auto'}};

/***/ }),
/* 285 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    InputNumber = __webpack_require__(219),
	    Select = __webpack_require__(213),
	    SelectData = __webpack_require__(250),
	    ButtonEdit = __webpack_require__(84),
	    TextArea = __webpack_require__(224),
	    DataGrid = __webpack_require__(189),
	    DokProp = __webpack_require__(279),
	    relatedDocuments = __webpack_require__(227),
	    ModalPage = __webpack_require__(184),
	    Loading = __webpack_require__(252),
	    ButtonUuendaLib = __webpack_require__(281),
	    styles = __webpack_require__(286);

	var LIBRARIES = [{ id: 'kontod', filter: '' }, { id: 'dokProps', filter: 'where kood = \'VMK\'' }, { id: 'users', filter: '' }, { id: 'tunnus', filter: '' }, { id: 'project', filter: '' }, { id: 'artikkel', filter: '' }, { id: 'allikas', filter: '' }, { id: 'tegev', filter: '' }, { id: 'aa', filter: '' }, { id: 'asutused', filter: 'where id in (select asutusid from lapsed.vanemad)' }, { id: 'vanem', filter: '' }, { id: 'nomenclature', filter: 'where dok in (\'VMK\',\'MK\')' }];

	var Vmk = function (_React$Component) {
	    _inherits(Vmk, _React$Component);

	    function Vmk(props) {
	        _classCallCheck(this, Vmk);

	        var _this = _possibleConstructorReturn(this, (Vmk.__proto__ || Object.getPrototypeOf(Vmk)).call(this, props));

	        _this.state = {
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            loadedData: false,
	            module: _this.props.module

	        };

	        _this.createGridRow = _this.createGridRow.bind(_this);
	        _this.recalcDocSumma = _this.recalcDocSumma.bind(_this);
	        _this.recalcRowSumm = _this.recalcRowSumm.bind(_this);

	        _this.renderer = _this.renderer.bind(_this);
	        _this.gridValidateFields = _this.gridValidateFields.bind(_this);

	        _this.pages = [{ pageName: 'Väljamakse korraldus', docTypeId: 'SMK' }];
	        return _this;
	    }

	    _createClass(Vmk, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                docTypeId: 'VMK',
	                module: 'lapsed',
	                reload: true,
	                history: this.props.history,
	                initData: this.props.initData,
	                libs: LIBRARIES,
	                pages: this.pages,
	                renderer: this.renderer,
	                createGridRow: this.createGridRow,
	                gridValidator: this.gridValidateFields,
	                recalcDoc: this.recalcDocSumma,
	                focusElement: 'input-number'
	            });
	        }

	        /**
	         * Вернет кастомные компоненты документа
	         * @returns {XML}
	         */

	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            var isEditeMode = self.state.edited;

	            if (!self || !self.docData || !self.docData.kpv) {
	                return React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(Loading, { label: 'Laadimine...' })
	                );
	            }

	            // формируем зависимости
	            if (self.docData.relations) {
	                relatedDocuments(self);
	            }

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    'div',
	                    { className: 'div-doc' },
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { title: 'Number',
	                                name: 'number',
	                                value: String(self.docData.number) || '',
	                                ref: 'input-number',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputDate, { title: 'Kuup\xE4ev ',
	                                name: 'kpv',
	                                value: self.docData.kpv,
	                                ref: 'input-kpv',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(Select, { title: 'Arveldus arve',
	                                name: 'aa_id',
	                                libs: 'aa',
	                                value: Number(self.docData.aa_id) || 0,
	                                data: self.libs['aa'],
	                                defaultValue: String(self.docData.pank) || self.libs['aa'],
	                                collId: 'id',
	                                onChange: self.handleInputChange,
	                                ref: 'select-aaId',
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputText, { title: 'Arve nr.',
	                                name: 'arvnr',
	                                value: self.docData.arvnr || '',
	                                ref: 'input-arvnr',
	                                onChange: self.handleInputChange,
	                                readOnly: true }),
	                            React.createElement(InputDate, { title: 'Maksep\xE4ev ',
	                                name: 'maksepaev',
	                                value: self.docData.maksepaev,
	                                ref: 'input-maksepaev',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputText, { title: 'Viitenumber ',
	                                name: 'viitenr',
	                                value: self.docData.viitenr || '',
	                                ref: 'input-viitenr',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(DokProp, { title: 'Konteerimine: ',
	                                name: 'doklausid',
	                                data: self.libs['dokProps'],
	                                dokTypeId: 'VMK',
	                                value: Number(self.docData.doklausid) || 0,
	                                defaultValue: self.docData.dokprop || '',
	                                history: this.props.history,
	                                ref: 'dokprop',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(SelectData, { title: 'Lapse nimi:',
	                                name: 'lapsid',
	                                libName: 'laps',
	                                sqlFields: ['nimi', 'isikukood'],
	                                data: [],
	                                value: self.docData.lapsid || 0,
	                                defaultValue: self.docData.lapse_nimi,
	                                boundToGrid: 'nimi',
	                                boundToData: 'nimi',
	                                ref: 'select-lapsid',
	                                btnDelete: false,
	                                userData: self.userData,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(ButtonEdit, {
	                                ref: 'btnEdit',
	                                value: 'Muuda',
	                                onClick: this.btnEditLapsClick,
	                                show: !isEditeMode,
	                                style: styles.btnEdit,
	                                disabled: false
	                            })
	                        )
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    {
	                        style: styles.docRow },
	                    React.createElement(TextArea, {
	                        title: 'Selgitus',
	                        name: 'selg',
	                        ref: 'textarea-selg',
	                        value: self.docData.selg || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode
	                    })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(DataGrid, { source: 'details',
	                        gridData: self.docData.gridData,
	                        gridColumns: self.docData.gridConfig,
	                        showToolBar: isEditeMode,
	                        handleGridRow: self.handleGridRow,
	                        handleGridBtnClick: self.handleGridBtnClick,
	                        readOnly: !isEditeMode,
	                        style: styles.grid.headerTable,
	                        ref: 'data-grid' })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(InputText, { title: 'Kokku: ',
	                        name: 'summa',
	                        ref: 'input-summa',
	                        value: String(self.docData.summa) || '0.00',
	                        width: 'auto',
	                        disabled: true })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'M\xE4rkused',
	                        name: 'muud',
	                        ref: 'textarea-muud',
	                        value: self.docData.muud || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode })
	                ),
	                self.state.gridRowEdit ? this.createGridRow(self) : null
	            );
	        }

	        /**
	         * формирует объекты модального окна редактирования строки грида
	         * @returns {XML}
	         */

	    }, {
	        key: 'createGridRow',
	        value: function createGridRow(self) {
	            var row = self.gridRowData ? self.gridRowData : {},
	                validateMessage = '',
	                // self.state.warning
	            buttonOkReadOnly = validateMessage.length > 0 || !self.state.checked,
	                modalObjects = ['btnOk', 'btnCancel'];

	            if (buttonOkReadOnly) {
	                // уберем кнопку Ок
	                modalObjects.splice(0, 1);
	            }

	            if (!row) return React.createElement('div', null);

	            var nomData = self.libs['nomenclature'].filter(function (row) {
	                if (row.dok === 'MK' || row.dok === 'VMK') {
	                    return row;
	                }
	            });

	            // наложить фильтр на список плательщиков, если указан витенумбер
	            var data = self.libs['asutused'];
	            if (self.docData.viitenr && self.libs['vanem'] && self.libs['vanem'].length && self.libs['asutused'] && self.libs['asutused'].length) {

	                // найти родителя
	                var vanem = self.libs['vanem'].filter(function (row) {
	                    return row.viitenr === self.docData.viitenr;
	                });

	                if (vanem && vanem.length) {
	                    // нашли родителя, ставим фильтр
	                    data = data.filter(function (row) {
	                        return !!vanem.find(function (kiri) {
	                            return kiri.id === row.id;
	                        });
	                    });
	                }
	            }

	            // сортировка по ид коду
	            data = data.sort(function (a, b) {
	                return a.kood.localeCompare(b.kood, 'en', { sensitivity: 'base' });
	            });

	            return React.createElement(
	                'div',
	                { className: '.modalPage' },
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalObjects: modalObjects,
	                        ref: 'modalpage-grid-row',
	                        show: true,
	                        modalPageBtnClick: self.modalPageClick,
	                        modalPageName: 'Rea lisamine / parandamine' },
	                    React.createElement(
	                        'div',
	                        { ref: 'grid-row-container' },
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Operatsioon',
	                                name: 'nomid',
	                                data: nomData,
	                                value: row.nomid || 0,
	                                collId: 'id',
	                                defaultValue: row.kood || '',
	                                ref: 'nomid',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Partner',
	                                name: 'asutusid',
	                                data: data,
	                                value: row.asutusid,
	                                defaultValue: row.asutus || '',
	                                collId: 'id',
	                                ref: 'asutusid',
	                                onChange: self.handleGridRowChange }),
	                            React.createElement(ButtonUuendaLib, {
	                                self: self,
	                                lib: 'asutused'
	                            })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(InputText, { title: 'Arveldus arve: ',
	                                name: 'aa',
	                                value: row.aa || '',
	                                bindData: false,
	                                ref: 'aa',
	                                onChange: self.handleGridRowInput })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(InputNumber, { title: 'Summa: ',
	                                name: 'summa',
	                                value: Number(row.summa),
	                                bindData: false,
	                                ref: 'summa',
	                                onChange: self.handleGridRowInput })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Korr. konto',
	                                name: 'konto',
	                                libs: 'kontod',
	                                data: self.libs['kontod'],
	                                value: row.konto,
	                                ref: 'konto',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Tunnus:',
	                                name: 'tunnus',
	                                libs: 'tunnus',
	                                data: self.libs['tunnus'],
	                                value: row.tunnus,
	                                ref: 'tunnus',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Project:',
	                                name: 'proj',
	                                libs: 'project',
	                                data: self.libs['project'],
	                                value: row.proj,
	                                ref: 'project',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        null,
	                        React.createElement(
	                            'span',
	                            null,
	                            validateMessage
	                        )
	                    )
	                )
	            );
	        }

	        /**
	         * перерасчет итоговой суммы документа
	         */

	    }, {
	        key: 'recalcDocSumma',
	        value: function recalcDocSumma() {
	            var doc = this.refs['document'];
	            doc.docData['summa'] = 0;
	            doc.docData.gridData.forEach(function (row) {
	                doc.docData['summa'] += Number(row['summa']);
	            });
	        }

	        /**
	         * подставит код операции
	         */

	    }, {
	        key: 'recalcRowSumm',
	        value: function recalcRowSumm() {
	            var doc = this.refs['document'];

	            if (!Object.keys(doc.gridRowData).length) {
	                return;
	            }

	            //подставим наименование услогу

	            if (doc.gridRowData['nomid']) {
	                var nomDataName = doc.libs['nomenclature'].find(function (lib) {
	                    return lib.id === Number(doc.gridRowData['nomid']);
	                });

	                if (nomDataName) {
	                    doc.gridRowData['kood'] = nomDataName.kood;
	                    doc.gridRowData['nimetus'] = nomDataName.nimetus;
	                }
	            }

	            //подставим наименование
	            if (doc.gridRowData['asutusid']) {

	                var asutusDataName = doc.libs['asutused'].find(function (lib) {
	                    return lib.id === Number(doc.gridRowData['asutusid']);
	                });

	                if (asutusDataName) {
	                    doc.gridRowData['asutus'] = asutusDataName.nimetus;
	                    // если не указан расч. счет и есть в карточке, то копируем
	                    if (!doc.gridRowData['aa'] && asutusDataName.pank) {
	                        doc.gridRowData['aa'] = asutusDataName.pank;
	                    }
	                }
	            }
	        }

	        /**
	         * валидатор для строки грида
	         * @returns {string}
	         */

	    }, {
	        key: 'gridValidateFields',
	        value: function gridValidateFields() {
	            var warning = '';
	            var doc = this.refs['document'];
	            if (doc && doc.gridRowData) {

	                // только после проверки формы на валидность
	                if (doc.gridRowData && !doc.gridRowData['nomid']) warning = warning + ' Код операции';
	                if (!doc.gridRowData['summa']) warning = warning + ' Сумма';
	                if (!doc.gridRowData['asutusid']) warning = warning + ' Платильщик';

	                this.recalcRowSumm();
	                this.recalcDocSumma('summa');
	            }
	            return warning;
	        }
	    }]);

	    return Vmk;
	}(React.Component);

	Vmk.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Vmk.defaultProps = {
	    initData: {},
	    userData: {}
	};

	module.exports = Vmk;

/***/ }),
/* 286 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	                border: '1px solid blue'
	        */},docColumn:{display:'flex',flexDirection:'column',/*
	                border: '1px solid yellow',
	        */width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	                border: '1px solid brown'
	        */},gridRow:{border:'1px solid black',backgroundColor:'white',position:'relative',margin:'10% 30% 10% 30%',width:'auto',opacity:'1',top:'100px'},docToolbarWarning:{float:'left',backgroundColor:'red',margin:'10px'},grid:{mainTable:{width:'100%'},headerTable:{width:'100%'},gridContainer:{width:'100%'}},btnEdit:{width:'min-content'}};

/***/ }),
/* 287 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var DocumentRegister = __webpack_require__(233);
	var InputNumber = __webpack_require__(219);
	var getSum = __webpack_require__(256);

	var styles = __webpack_require__(288);
	var DOC_TYPE_ID = 'SORDER';

	var DocContext = __webpack_require__(1);

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Documents = function (_React$PureComponent) {
	    _inherits(Documents, _React$PureComponent);

	    function Documents(props) {
	        _classCallCheck(this, Documents);

	        var _this = _possibleConstructorReturn(this, (Documents.__proto__ || Object.getPrototypeOf(Documents)).call(this, props));

	        _this.renderer = _this.renderer.bind(_this);

	        _this.state = {
	            summa: 0,
	            read: 0
	        };

	        return _this;
	    }

	    _createClass(Documents, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(
	                'div',
	                null,
	                React.createElement(DocumentRegister, { initData: this.props.initData,
	                    history: this.props.history ? this.props.history : null,
	                    module: this.props.module,
	                    ref: 'register',
	                    docTypeId: DOC_TYPE_ID,
	                    style: styles,
	                    render: this.renderer }),
	                React.createElement(InputNumber, { title: 'Read kokku:',
	                    name: 'read_kokku',
	                    style: styles.total,
	                    ref: 'input-read',
	                    value: Number(this.state.read) || 0,
	                    disabled: true }),
	                React.createElement(InputNumber, { title: 'Summa kokku:',
	                    name: 'summa_kokku',
	                    style: styles.total,
	                    ref: 'input-summa',
	                    value: Number(this.state.summa).toFixed(2) || 0,
	                    disabled: true })
	            );
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            var summa = self.gridData ? getSum(self.gridData, 'summa') : 0;
	            if (summa) {
	                this.setState({ summa: summa, read: self.gridData.length });
	            }

	            return null;
	        }
	    }]);

	    return Documents;
	}(React.PureComponent);

	module.exports = Documents;

/***/ }),
/* 288 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}},doc:{height:'100%'},total:{width:'auto'}};

/***/ }),
/* 289 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    InputNumber = __webpack_require__(219),
	    Select = __webpack_require__(213),
	    SelectData = __webpack_require__(250),
	    ButtonEdit = __webpack_require__(84),
	    TextArea = __webpack_require__(224),
	    DataGrid = __webpack_require__(189),
	    DokProp = __webpack_require__(279),
	    relatedDocuments = __webpack_require__(227),
	    ModalPage = __webpack_require__(184),
	    styles = __webpack_require__(290);

	var DOC_TYPE_ID = 'SORDER';
	var DocContext = __webpack_require__(1);

	var LIBRARIES = [{ id: 'kontod', filter: '' }, { id: 'dokProps', filter: '' }, { id: 'tunnus', filter: '' }, { id: 'project', filter: '' }, { id: 'nomenclature', filter: 'where dok = \'SORDER\'' }, { id: 'kassa', filter: '' }];

	var Sorder = function (_React$PureComponent) {
	    _inherits(Sorder, _React$PureComponent);

	    function Sorder(props) {
	        _classCallCheck(this, Sorder);

	        var _this = _possibleConstructorReturn(this, (Sorder.__proto__ || Object.getPrototypeOf(Sorder)).call(this, props));

	        _this.state = {
	            loadedData: false,
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            lapsId: null,
	            module: 'lapsed',
	            isAskToCreateFromArv: true, // если указан счет, а док.ид = 0 , то можно создпть ордер по счету
	            getSMK: false,
	            arvId: 0

	        };
	        _this.createGridRow = _this.createGridRow.bind(_this);
	        _this.recalcDocSumma = _this.recalcDocSumma.bind(_this);
	        _this.recalcRowSumm = _this.recalcRowSumm.bind(_this);

	        _this.renderer = _this.renderer.bind(_this);
	        _this.gridValidateFields = _this.gridValidateFields.bind(_this);
	        _this.modalPageBtnClick = _this.modalPageBtnClick.bind(_this);

	        _this.pages = [{ pageName: 'Sissetuliku kassaorder', docTypeId: 'SORDER' }];

	        return _this;
	    }

	    _createClass(Sorder, [{
	        key: 'componentDidMount',
	        value: function componentDidMount() {
	            if (this.props.history && this.props.history.location.state) {
	                var lapsId = this.props.history.location.state.lapsId;
	                var _module = this.props.history.location.state.module ? this.props.history.location.state.module : 'lapsed';
	                this.setState({ lapsId: lapsId, module: _module });
	            }
	        }
	    }, {
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                docTypeId: DOC_TYPE_ID,
	                history: this.props.history,
	                initData: this.props.initData,
	                module: this.state.module,
	                reload: true,
	                libs: LIBRARIES,
	                pages: this.pages,
	                renderer: this.renderer,
	                createGridRow: this.createGridRow,
	                gridValidator: this.gridValidateFields,
	                recalcDoc: this.recalcDocSumma,
	                focusElement: 'input-number'
	            });
	        }

	        /**
	         * Вернет кастомные компоненты документа
	         * @returns {XML}
	         */

	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            var bpm = self.docData && self.docData.bpm ? self.docData.bpm : [],
	                isEditeMode = self.state.edited;

	            // формируем зависимости
	            if (self.docData.relations) {
	                relatedDocuments(self);
	            }

	            var isNewDoc = !self.docData.id || self.docData.id == 0;
	            if ((!self.docData.id || self.docData.id == 0) && self.docData.arvid && this.state.isAskToCreateFromArv) {
	                this.setState({ getSMK: true, isAskToCreateFromArv: false, arvId: self.docData.arvid });
	            }

	            return React.createElement(
	                'div',
	                { style: styles.doc },
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(InputText, { title: 'Number:',
	                            name: 'number',
	                            value: String(self.docData.number) || '',
	                            ref: 'input-number',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(DokProp, { title: 'Konteerimine: ',
	                            name: 'doklausid',
	                            libs: 'dokProps',
	                            value: self.docData.doklausid,
	                            defaultValue: self.docData.dokprop || '',
	                            ref: 'dokprop',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(InputDate, { title: 'Kuup\xE4ev:',
	                            name: 'kpv',
	                            value: self.docData.kpv,
	                            ref: 'input-kpv',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode }),
	                        React.createElement(Select, { title: 'Kassa:',
	                            name: 'kassa_id',
	                            libs: 'kassa',
	                            value: self.docData.kassa_id,
	                            data: self.libs['kassa'],
	                            defaultValue: String(self.docData.kassa) || '',
	                            ref: 'select-kassaId',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(SelectData, { title: 'Raha saaja:',
	                            name: 'asutusid',
	                            libName: 'asutused',
	                            sqlFields: ['nimetus', 'regkood'],
	                            data: [],
	                            value: self.docData.asutusid || 0,
	                            defaultValue: self.docData.asutus,
	                            boundToGrid: 'nimetus',
	                            boundToData: 'asutus',
	                            ref: 'select-asutusid',
	                            btnDelete: false,
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(ButtonEdit, {
	                            ref: 'btnEdit',
	                            value: 'Muuda',
	                            onClick: this.btnEditAsutusClick,
	                            show: !isEditeMode,
	                            style: styles.btnEdit,
	                            disabled: false
	                        })
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        !isNewDoc ? React.createElement(InputText, { title: 'Arve nr.',
	                            name: '_arvnr',
	                            value: self.docData.arvnr || '',
	                            ref: 'input-arvnr',
	                            show: !isNewDoc,
	                            onChange: self.handleInputChange,
	                            readOnly: true }) : null,
	                        isNewDoc ? React.createElement(SelectData, { title: 'Arve nr.',
	                            name: 'arvid',
	                            libName: 'arv',
	                            sqlFields: ['number', 'kpv', 'asutus'],
	                            data: [],
	                            value: self.docData.arvid || '',
	                            ref: 'select-arve',
	                            btnDelete: false,
	                            userData: self.userData,
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode }) : null,
	                        React.createElement(InputText, { title: 'Dokument:',
	                            name: 'dokument',
	                            value: self.docData.dokument || '',
	                            ref: 'input-dokument',
	                            onChange: self.handleInputChange,
	                            readOnly: !isEditeMode })
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Nimi',
	                        name: 'nimi',
	                        ref: 'textarea-nimi',
	                        value: self.docData.nimi || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Aadress:',
	                        name: 'aadress',
	                        ref: 'textarea-aadress',
	                        value: self.docData.aadress || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Alus:',
	                        name: 'alus',
	                        ref: 'textarea-alus',
	                        value: self.docData.alus || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(DataGrid, { source: 'details',
	                        gridData: self.docData.gridData,
	                        gridColumns: self.docData.gridConfig,
	                        showToolBar: isEditeMode,
	                        handleGridRow: self.handleGridRow,
	                        handleGridBtnClick: self.handleGridBtnClick,
	                        readOnly: !isEditeMode,
	                        style: styles.grid.headerTable,
	                        ref: 'data-grid' })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(InputNumber, { title: 'Summa: ',
	                        name: 'summa',
	                        ref: 'input-summa',
	                        value: Number(self.docData.summa) || 0,
	                        width: 'auto',
	                        disabled: true
	                    })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'M\xE4rkused:',
	                        name: 'muud',
	                        ref: 'textarea-muud',
	                        value: self.docData.muud || '',
	                        onChange: self.handleInputChange,
	                        readOnly: !isEditeMode })
	                ),
	                self.state.gridRowEdit ? this.createGridRow(self) : null,
	                React.createElement(
	                    ModalPage,
	                    { ref: 'modalpageCreateOrder',
	                        modalPageBtnClick: this.modalPageBtnClick,
	                        modalPageName: 'Kas koosta SMK',
	                        show: this.state.getSMK },
	                    'Kas koosta kassaorder?'
	                )
	            );
	        }

	        /**
	         * will create SORDER
	         */

	    }, {
	        key: 'modalPageBtnClick',
	        value: function modalPageBtnClick(btnEvent) {
	            var _this2 = this;

	            this.setState({ getSMK: false });
	            if (btnEvent === 'Ok') {
	                var Doc = this.refs['document'];
	                var api = '/calc/koostaSorder';

	                var params = {
	                    docTypeId: DOC_TYPE_ID,
	                    module: this.props.module ? this.props.module : DocContext.module,
	                    userId: DocContext.userData.userId,
	                    uuid: DocContext.userData.uuid,
	                    docs: [Number(this.state.arvId)],
	                    seisuga: Doc.docData && Doc.docData.kpv ? Doc.docData.kpv : null,
	                    context: DocContext[api] ? DocContext[api] : null,
	                    taskName: 'koostaSorder'
	                };

	                Doc.fetchData('Post', api, { data: params }).then(function (response) {
	                    if (response && response.error_message) {
	                        Doc.setState({
	                            warning: 'viga: ' + response.error_message,
	                            warningType: 'error'
	                        });
	                    } else {
	                        if (response && response.result) {
	                            var newDocId = response.data && response.data && response.data.result && response.data.result.doc_id ? response.data.result.doc_id : 0;
	                            Doc.setState({
	                                warning: 'Edukalt, suunatan ...',
	                                warningType: 'ok'
	                            });

	                            // переходим на созданнй док
	                            if (newDocId) {
	                                setTimeout(function () {
	                                    var current = '/' + (_this2.props.module ? _this2.props.module : DocContext.module) + '/' + DOC_TYPE_ID + '/' + newDocId;
	                                    _this2.props.history.replace('/reload');
	                                    setTimeout(function () {
	                                        _this2.props.history.replace(current);
	                                    });
	                                }, 2000);
	                            }
	                        } else {
	                            Doc.setState({
	                                warning: 'Tekkis viga',
	                                warningType: 'error'
	                            });
	                        }
	                    }
	                }).catch(function (error) {
	                    console.error('api call error', error);
	                    Doc.setState({
	                        warning: 'Viga ' + error,
	                        warningType: 'error'
	                    });
	                });
	            }
	        }

	        /**
	         * валидатор для строки грида
	         * @param gridRowData строка грида
	         * @returns {string}
	         */

	    }, {
	        key: 'gridValidateFields',
	        value: function gridValidateFields() {
	            var warning = '';
	            var doc = this.refs['document'];
	            if (doc && doc.gridRowData) {

	                // только после проверки формы на валидность
	                if (doc.gridRowData && !doc.gridRowData['nomid']) warning = warning + ' Код операции';
	                if (!doc.gridRowData['summa']) warning = warning + ' Сумма';

	                this.recalcRowSumm();
	                this.recalcDocSumma('summa');
	            }
	            return warning;
	        }

	        /**
	         * подставит код операции
	         */

	    }, {
	        key: 'recalcRowSumm',
	        value: function recalcRowSumm() {
	            var doc = this.refs['document'];

	            if (!Object.keys(doc.gridRowData).length) {
	                return;
	            }

	            //подставим наименование услогу

	            var nomDataName = doc.libs['nomenclature'].filter(function (lib) {
	                if (lib.id === doc.gridRowData['nomid']) return lib;
	            });

	            if (doc.gridRowData['nomid']) {
	                doc.gridRowData['kood'] = nomDataName[0].kood;
	                doc.gridRowData['nimetus'] = nomDataName[0].name;
	            }
	        }

	        /**
	         * Перерасчет сумм документа
	         */

	    }, {
	        key: 'recalcDocSumma',
	        value: function recalcDocSumma() {
	            var doc = this.refs['document'];
	            doc.docData['summa'] = 0;
	            doc.docData.gridData.forEach(function (row) {
	                doc.docData['summa'] += Number(row['summa']);
	            });
	        }

	        /**
	         * формирует объекты модального окна редактирования строки грида
	         * @returns {XML}
	         */

	    }, {
	        key: 'createGridRow',
	        value: function createGridRow(self) {
	            var row = self.gridRowData ? self.gridRowData : {},
	                validateMessage = '',
	                // self.state.warning
	            buttonOkReadOnly = validateMessage.length > 0 || !self.state.checked,
	                modalObjects = ['btnOk', 'btnCancel'];

	            if (buttonOkReadOnly) {
	                // уберем кнопку Ок
	                modalObjects.splice(0, 1);
	            }

	            if (!row) return React.createElement('div', null);

	            return React.createElement(
	                'div',
	                { className: '.modalPage' },
	                React.createElement(
	                    ModalPage,
	                    {
	                        modalObjects: modalObjects,
	                        ref: 'modalpage-grid-row',
	                        show: true,
	                        modalPageBtnClick: self.modalPageClick,
	                        modalPageName: 'Rea lisamine / parandamine' },
	                    React.createElement(
	                        'div',
	                        { ref: 'grid-row-container' },
	                        self.state.gridWarning.length ? React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(
	                                'span',
	                                null,
	                                self.state.gridWarning
	                            )
	                        ) : null,
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Teenus',
	                                name: 'nomid',
	                                libs: 'nomenclature',
	                                data: self.libs['nomenclature'],
	                                value: row.nomid || 0,
	                                defaultValue: row.kood || '',
	                                ref: 'nomid',
	                                placeholder: 'Teenuse kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(InputNumber, { title: 'Summa: ',
	                                name: 'summa',
	                                value: Number(row.summa) || 0,
	                                bindData: false,
	                                ref: 'summa',
	                                onChange: self.handleGridRowInput })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Korr. konto',
	                                name: 'konto',
	                                libs: 'kontod',
	                                data: self.libs['kontod'],
	                                value: row.konto || '',
	                                ref: 'konto',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Tunnus:',
	                                name: 'tunnus',
	                                libs: 'tunnus',
	                                data: self.libs['tunnus'],
	                                value: row.tunnus || '',
	                                ref: 'tunnus',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docRow },
	                            React.createElement(Select, { title: 'Project:',
	                                name: 'proj',
	                                libs: 'project',
	                                data: self.libs['project'],
	                                value: row.proj || '',
	                                ref: 'project',
	                                collId: 'kood',
	                                onChange: self.handleGridRowChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        null,
	                        React.createElement(
	                            'span',
	                            null,
	                            validateMessage
	                        )
	                    )
	                )
	            );
	        }
	    }]);

	    return Sorder;
	}(React.PureComponent);

	Sorder.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Sorder.defaultProps = {
	    initData: {},
	    userData: {}
	};

	module.exports = Sorder;

/***/ }),
/* 290 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	        border: '1px solid blue'
	*/},docColumn:{display:'flex',flexDirection:'column',/*
	        border: '1px solid yellow',
	*/width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	        border: '1px solid brown'
	*/},gridRow:{border:'1px solid black',backgroundColor:'white',position:'relative',margin:'10% 30% 10% 30%',width:'auto',opacity:'1',top:'100px'},docToolbarWarning:{float:'left',backgroundColor:'red',margin:'10px'},grid:{mainTable:{width:'100%'},headerTable:{width:'100%'},gridContainer:{width:'100%'}},btnEdit:{width:'min-content'}};

/***/ }),
/* 291 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var Documents = __webpack_require__(233);
	var ButtonUpload = __webpack_require__(244);
	var ToolbarContainer = __webpack_require__(78);

	var styles = __webpack_require__(292);
	var DOC_TYPE_ID = 'NOMENCLATURE';

	var DocRights = __webpack_require__(171);
	var checkRights = __webpack_require__(172);
	var DocContext = __webpack_require__(1);
	var docRights = DocRights[DOC_TYPE_ID] ? DocRights[DOC_TYPE_ID] : [];

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Nomenclatures = function (_React$PureComponent) {
	    _inherits(Nomenclatures, _React$PureComponent);

	    function Nomenclatures(props) {
	        _classCallCheck(this, Nomenclatures);

	        var _this = _possibleConstructorReturn(this, (Nomenclatures.__proto__ || Object.getPrototypeOf(Nomenclatures)).call(this, props));

	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.renderer = _this.renderer.bind(_this);
	        return _this;
	    }

	    _createClass(Nomenclatures, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(Documents, { initData: this.props.initData,
	                history: this.props.history ? this.props.history : null,
	                ref: 'register',
	                module: this.props.module,
	                docTypeId: DOC_TYPE_ID,
	                style: styles,
	                render: this.renderer });
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer() {
	            var userRoles = DocContext.userData ? DocContext.userData.roles : [];

	            return React.createElement(
	                ToolbarContainer,
	                null,
	                checkRights(userRoles, docRights, 'import') ? React.createElement(ButtonUpload, {
	                    ref: 'btnUpload',
	                    docTypeId: DOC_TYPE_ID,
	                    onClick: this.handleClick,
	                    show: true,
	                    mimeTypes: '.csv'
	                }) : null
	            );
	        }

	        /**
	         * кастомный обработчик события клик на кнопку импорта
	         */

	    }, {
	        key: 'handleClick',
	        value: function handleClick(result) {

	            //обновим данные
	            var Doc = this.refs['register'];
	            if (!Doc) {
	                return null;
	            }
	            if (result) {
	                Doc.setState({ warning: 'Edukalt:  ' + result + ': ', warningType: 'ok' });
	                setTimeout(function () {
	                    Doc.fetchData('selectDocs');
	                }, 10000);
	            }
	        }
	    }]);

	    return Nomenclatures;
	}(React.PureComponent);

	module.exports = Nomenclatures;

/***/ }),
/* 292 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}}};

/***/ }),
/* 293 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    Select = __webpack_require__(213),
	    TextArea = __webpack_require__(224),
	    InputNumber = __webpack_require__(219),
	    CheckBox = __webpack_require__(193),
	    styles = __webpack_require__(294);

	var _require$NOMENCLATURE = __webpack_require__(173).NOMENCLATURE,
	    LIBRARIES = _require$NOMENCLATURE.LIBRARIES,
	    TAXIES = _require$NOMENCLATURE.TAXIES,
	    UHIK = _require$NOMENCLATURE.UHIK,
	    TYYP = _require$NOMENCLATURE.TYYP,
	    ALGORITMID = _require$NOMENCLATURE.ALGORITMID;

	var Nomenclature = function (_React$PureComponent) {
	    _inherits(Nomenclature, _React$PureComponent);

	    function Nomenclature(props) {
	        _classCallCheck(this, Nomenclature);

	        var _this = _possibleConstructorReturn(this, (Nomenclature.__proto__ || Object.getPrototypeOf(Nomenclature)).call(this, props));

	        _this.state = {
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            loadedData: false
	        };
	        _this.renderer = _this.renderer.bind(_this);
	        return _this;
	    }

	    _createClass(Nomenclature, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                docTypeId: 'NOMENCLATURE',
	                module: this.props.module,
	                initData: this.props.initData,
	                history: this.props.history,
	                userData: this.props.userData,
	                libs: LIBRARIES,
	                renderer: this.renderer,
	                focusElement: 'input-kood'
	            });
	        }

	        /**
	         * Метод вернет кастомный компонент
	         * @param self инстенс базавого документа
	         * @returns {*}
	         */

	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            if (!self.docData) {
	                return null;
	            }

	            var isEditeMode = self.state.edited;

	            return React.createElement(
	                'div',
	                null,
	                React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputText, { title: 'Kood ',
	                                name: 'kood',
	                                ref: 'input-kood',
	                                value: self.docData.kood,
	                                onChange: self.handleInputChange }),
	                            React.createElement(InputText, { title: 'Nimetus ',
	                                name: 'nimetus',
	                                ref: 'input-nimetus',
	                                value: self.docData.nimetus,
	                                onChange: self.handleInputChange }),
	                            React.createElement(InputText, { title: 'L\xFChike nimetus ',
	                                name: 'luno',
	                                ref: 'input-luno',
	                                value: self.docData.luno || '',
	                                onChange: self.handleInputChange }),
	                            React.createElement(Select, { title: 'Dokument:',
	                                name: 'dok',
	                                data: self.libs['document'],
	                                value: self.docData.dok || '',
	                                ref: 'select-dok',
	                                collId: 'kood',
	                                btnDelete: isEditeMode,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(Select, { title: 'Maksum\xE4\xE4r:',
	                                name: 'vat',
	                                data: TAXIES,
	                                collId: 'kood',
	                                value: self.docData.vat || '',
	                                defaultValue: self.docData.vat,
	                                ref: 'select-vat',
	                                btnDelete: isEditeMode,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            React.createElement(InputNumber, { title: 'Hind: ',
	                                name: 'hind',
	                                ref: 'input-hind',
	                                value: Number(self.docData.hind || null),
	                                readOnly: !isEditeMode,
	                                onChange: self.handleInputChange }),
	                            React.createElement(Select, { title: 'M\xF5tt\xFChik:',
	                                name: 'uhik',
	                                data: UHIK,
	                                collId: 'kood',
	                                value: self.docData.uhik || '',
	                                defaultValue: self.docData.uhik,
	                                ref: 'select-uhik',
	                                btnDelete: isEditeMode,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }),
	                            self.docData.dok == 'ARV' ? React.createElement(Select, { title: 'Hinna algoritm:',
	                                name: 'algoritm',
	                                data: ALGORITMID,
	                                collId: 'kood',
	                                value: self.docData.algoritm || '',
	                                defaultValue: self.docData.algoritm,
	                                ref: 'select-algoritm',
	                                btnDelete: isEditeMode,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }) : null,
	                            self.docData.dok == 'ARV' ? React.createElement(Select, { title: 'Koolituse liigid:',
	                                name: 'oppe_tyyp',
	                                data: self.libs['koolituse_liik'],
	                                collId: 'kood',
	                                value: self.docData.oppe_tyyp || '',
	                                defaultValue: self.docData.oppe_tyyp,
	                                ref: 'select-oppe_tyyp',
	                                btnDelete: isEditeMode,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }) : null,
	                            self.docData.dok == 'ARV' ? React.createElement(Select, { title: 'T\xFC\xFCp:',
	                                name: 'tyyp',
	                                data: TYYP,
	                                collId: 'kood',
	                                value: self.docData.tyyp || '',
	                                defaultValue: self.docData.tyyp,
	                                ref: 'select-tyyp',
	                                btnDelete: isEditeMode,
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode }) : null
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Korr.konto:',
	                                name: 'konto',
	                                libs: 'kontod',
	                                data: self.libs['kontod'],
	                                readOnly: !isEditeMode,
	                                value: self.docData['konto'] || '',
	                                ref: 'select_konto',
	                                collId: 'kood',
	                                onChange: self.handleInputChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Tunnus:',
	                                name: 'tunnus',
	                                libs: 'tunnus',
	                                data: self.libs['tunnus'],
	                                readOnly: !isEditeMode,
	                                value: self.docData['tunnus'] || '',
	                                ref: 'select_tunnus',
	                                collId: 'kood',
	                                onChange: self.handleInputChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Tegevus:',
	                                name: 'tegev',
	                                data: self.libs['tegev'],
	                                value: self.docData['tegev'] || '',
	                                ref: 'tegev',
	                                readOnly: !isEditeMode,
	                                collId: 'kood',
	                                onChange: self.handleInputChange })
	                        ),
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Projekt:',
	                                name: 'projekt',
	                                libs: 'project',
	                                data: self.libs['project'],
	                                readOnly: !isEditeMode,
	                                value: self.docData['projekt'] || '',
	                                ref: 'select_projekt',
	                                collId: 'kood',
	                                onChange: self.handleInputChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Allikas:',
	                                name: 'allikas',
	                                data: self.libs['allikas'],
	                                value: self.docData['allikas'] || '',
	                                ref: 'allikas',
	                                readOnly: !isEditeMode,
	                                collId: 'kood',
	                                onChange: self.handleInputChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(Select, { title: 'Artikkel:',
	                                name: 'artikkel',
	                                data: self.libs['artikkel'],
	                                value: self.docData['artikkel'] || '',
	                                ref: 'artikkel',
	                                readOnly: !isEditeMode,
	                                collId: 'kood',
	                                onChange: self.handleInputChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(CheckBox, { title: 'Kas INF3?',
	                                name: 'kas_inf3',
	                                value: Boolean(self.docData.kas_inf3),
	                                ref: 'checkbox_kas_inf3',
	                                onChange: self.handleInputChange,
	                                readOnly: !isEditeMode
	                            })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(
	                            'div',
	                            { style: styles.docColumn },
	                            React.createElement(InputDate, { title: 'Kehtiv kuni:',
	                                name: 'valid',
	                                value: self.docData.valid,
	                                ref: 'input-valid',
	                                readOnly: !isEditeMode,
	                                onChange: self.handleInputChange })
	                        )
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(TextArea, { title: 'Muud',
	                            name: 'muud',
	                            ref: 'textarea-muud',
	                            onChange: self.handleInputChange,
	                            value: self.docData.muud || '',
	                            readOnly: !isEditeMode })
	                    )
	                )
	            );
	        }
	    }]);

	    return Nomenclature;
	}(React.PureComponent);

	Nomenclature.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Nomenclature.defaultProps = {
	    initData: {},
	    userData: {}
	};

	module.exports = Nomenclature;

/***/ }),
/* 294 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	        border: '1px solid blue'
	*/},docColumn:{display:'flex',flexDirection:'column',/*
	        border: '1px solid yellow',
	*/width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	        border: '1px solid brown'
	*/}};

/***/ }),
/* 295 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var Documents = __webpack_require__(233);
	var styles = __webpack_require__(296);
	var DOC_TYPE_ID = 'TUNNUS';

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Tunnused = function (_React$PureComponent) {
	    _inherits(Tunnused, _React$PureComponent);

	    function Tunnused(props) {
	        _classCallCheck(this, Tunnused);

	        return _possibleConstructorReturn(this, (Tunnused.__proto__ || Object.getPrototypeOf(Tunnused)).call(this, props));
	    }

	    _createClass(Tunnused, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(Documents, { initData: this.props.initData,
	                history: this.props.history ? this.props.history : null,
	                module: this.props.module,
	                ref: 'register',
	                docTypeId: DOC_TYPE_ID,
	                style: styles,
	                render: this.renderer });
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer() {
	            return null;
	        }
	    }]);

	    return Tunnused;
	}(React.PureComponent);

	module.exports = Tunnused;

/***/ }),
/* 296 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}}};

/***/ }),
/* 297 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    InputDate = __webpack_require__(215),
	    TextArea = __webpack_require__(224),
	    Loading = __webpack_require__(252);

	var styles = __webpack_require__(298);

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Tunnus = function (_React$PureComponent) {
	    _inherits(Tunnus, _React$PureComponent);

	    function Tunnus(props) {
	        _classCallCheck(this, Tunnus);

	        var _this = _possibleConstructorReturn(this, (Tunnus.__proto__ || Object.getPrototypeOf(Tunnus)).call(this, props));

	        _this.state = {
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            loadedData: false
	        };
	        _this.renderer = _this.renderer.bind(_this);
	        return _this;
	    }

	    _createClass(Tunnus, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                docTypeId: 'TUNNUS',
	                module: this.props.module,
	                initData: this.props.initData,
	                userData: this.props.userData,
	                renderer: this.renderer,
	                focusElement: 'input-kood',
	                history: this.props.history

	            });
	        }

	        /**
	         * Метод вернет кастомный компонент
	         * @param self
	         * @returns {*}
	         */

	    }, {
	        key: 'renderer',
	        value: function renderer(self) {
	            if (!self.docData) {
	                // не загружены данные
	                return React.createElement(
	                    'div',
	                    { style: styles.doc },
	                    React.createElement(Loading, { label: 'Laadimine...' })
	                );
	            }

	            return React.createElement(
	                'div',
	                { style: styles.doc },
	                React.createElement(
	                    'div',
	                    { style: styles.docColumn },
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(InputText, { title: 'Kood ',
	                            name: 'kood',
	                            ref: 'input-kood',
	                            readOnly: !self.state.edited,
	                            value: self.docData.kood || '',
	                            onChange: self.handleInputChange })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(InputText, { title: 'Nimetus ',
	                            name: 'nimetus',
	                            ref: 'input-nimetus',
	                            readOnly: !self.state.edited,
	                            value: self.docData.nimetus || '',
	                            onChange: self.handleInputChange })
	                    ),
	                    React.createElement(
	                        'div',
	                        { style: styles.docRow },
	                        React.createElement(InputDate, { title: 'Kehtiv kuni:',
	                            name: 'valid',
	                            value: self.docData.valid,
	                            ref: 'input-valid',
	                            readOnly: !self.state.edited,
	                            onChange: self.handleInputChange })
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Muud',
	                        name: 'muud',
	                        ref: 'textarea-muud',
	                        onChange: self.handleInputChange,
	                        value: self.docData.muud || '',
	                        readOnly: !self.state.edited })
	                )
	            );
	        }
	    }]);

	    return Tunnus;
	}(React.PureComponent);

	Tunnus.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object
	};

	Tunnus.defaultProps = {
	    initData: {}
	};

	module.exports = Tunnus;

/***/ }),
/* 298 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'},docColumn:{display:'flex',flexDirection:'column',width:'50%'},doc:{display:'flex',flexDirection:'column'}};

/***/ }),
/* 299 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var Documents = __webpack_require__(233);
	var styles = __webpack_require__(300);
	//const gridConfig = require('./../../../models/libs/libraries/asutused').grid.gridConfiguration;

	var DOC_TYPE_ID = 'ASUTUSED';
	var ButtonUpload = __webpack_require__(244);
	var ToolbarContainer = __webpack_require__(78);

	/**
	 * Класс реализует документ справочника признаков.
	 */

	var Asutused = function (_React$PureComponent) {
	    _inherits(Asutused, _React$PureComponent);

	    function Asutused(props) {
	        _classCallCheck(this, Asutused);

	        var _this = _possibleConstructorReturn(this, (Asutused.__proto__ || Object.getPrototypeOf(Asutused)).call(this, props));

	        _this.handleClick = _this.handleClick.bind(_this);
	        _this.renderer = _this.renderer.bind(_this);

	        return _this;
	    }

	    _createClass(Asutused, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(Documents, { history: this.props.history ? this.props.history : null,
	                module: this.props.module,
	                ref: 'register',
	                docTypeId: DOC_TYPE_ID,
	                style: styles,
	                render: this.renderer });
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer() {
	            return React.createElement(
	                ToolbarContainer,
	                null,
	                React.createElement(ButtonUpload, {
	                    ref: 'btnUpload',
	                    docTypeId: DOC_TYPE_ID,
	                    onClick: this.handleClick,
	                    show: true,
	                    mimeTypes: '.csv'
	                })
	            );
	        }

	        /**
	         * кастомный обработчик события клик на кнопку импорта
	         */

	    }, {
	        key: 'handleClick',
	        value: function handleClick(result) {

	            //обновим данные
	            var Doc = this.refs['register'];
	            if (!Doc) {
	                return null;
	            }
	            if (result) {
	                Doc.setState({ warning: 'Edukalt:  ' + result + ': ', warningType: 'ok' });
	                setTimeout(function () {
	                    Doc.fetchData('selectDocs');
	                }, 10000);
	            }
	        }
	    }]);

	    return Asutused;
	}(React.PureComponent);

	module.exports = Asutused;

/***/ }),
/* 300 */
/***/ (function(module, exports) {

	'use strict';module.exports={grid:{mainTable:{width:'100%',td:{border:'1px solid lightGrey',display:'table-cell',paddingLeft:'5px'}},headerTable:{width:'100%'},gridContainer:{width:'100%'}}};

/***/ }),
/* 301 */
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

	function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

	var React = __webpack_require__(10);
	var PropTypes = __webpack_require__(33);

	var DocContext = __webpack_require__(1);

	var DocumentTemplate = __webpack_require__(170),
	    InputText = __webpack_require__(217),
	    TextArea = __webpack_require__(224),
	    styles = __webpack_require__(302);

	var Asutused = function (_React$PureComponent) {
	    _inherits(Asutused, _React$PureComponent);

	    function Asutused(props) {
	        _classCallCheck(this, Asutused);

	        var _this = _possibleConstructorReturn(this, (Asutused.__proto__ || Object.getPrototypeOf(Asutused)).call(this, props));

	        _this.state = {
	            docId: props.docId ? props.docId : Number(props.match.params.docId),
	            loadedData: false
	        };

	        _this.renderer = _this.renderer.bind(_this);
	        return _this;
	    }

	    _createClass(Asutused, [{
	        key: 'render',
	        value: function render() {
	            return React.createElement(DocumentTemplate, { docId: this.state.docId,
	                ref: 'document',
	                history: this.props.history,
	                module: DocContext.module,
	                docTypeId: 'ASUTUSED',
	                initData: this.props.initData,
	                renderer: this.renderer,
	                focusElement: 'input-regkood'

	            });
	        }
	    }, {
	        key: 'renderer',
	        value: function renderer(self) {

	            var isEditeMode = self.state.edited;

	            return React.createElement(
	                'div',
	                { style: styles.doc },
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(
	                        'div',
	                        { style: styles.docColumn },
	                        React.createElement(InputText, { title: 'Reg.kood ',
	                            name: 'regkood',
	                            ref: 'input-regkood',
	                            readOnly: !isEditeMode,
	                            value: self.docData.regkood || '',
	                            onChange: self.handleInputChange }),
	                        React.createElement(InputText, { title: 'Nimetus ',
	                            name: 'nimetus',
	                            ref: 'input-nimetus',
	                            readOnly: !isEditeMode,
	                            value: self.docData.nimetus || '',
	                            onChange: self.handleInputChange }),
	                        React.createElement(InputText, { title: 'Om.vorm',
	                            name: 'omvorm',
	                            ref: 'input-omvorm',
	                            readOnly: !isEditeMode,
	                            value: self.docData.omvorm || '',
	                            onChange: self.handleInputChange }),
	                        React.createElement(InputText, { title: 'Arveldus arve:',
	                            name: 'aa',
	                            ref: 'input-aa',
	                            readOnly: !isEditeMode,
	                            value: self.docData.aa || '',
	                            onChange: self.handleInputChange })
	                    )
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Aadress',
	                        name: 'aadress',
	                        ref: 'textarea-aadress',
	                        onChange: self.handleInputChange,
	                        value: self.docData.aadress || '',
	                        readOnly: !isEditeMode })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Kontakt',
	                        name: 'kontakt',
	                        ref: 'textarea-kontakt',
	                        onChange: self.handleInputChange,
	                        value: self.docData.kontakt || '',
	                        readOnly: !isEditeMode })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(InputText, { title: 'Telefon',
	                        name: 'tel',
	                        ref: 'input-tel',
	                        value: self.docData.tel || '',
	                        readOnly: !isEditeMode,
	                        onChange: self.handleInputChange })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(InputText, { title: 'Email',
	                        name: 'email',
	                        ref: 'input-email',
	                        value: self.docData.email || '',
	                        readOnly: !isEditeMode,
	                        onChange: self.handleInputChange })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'Muud',
	                        name: 'muud',
	                        ref: 'textarea-muud',
	                        onChange: self.handleInputChange,
	                        value: self.docData.muud || '',
	                        readOnly: !isEditeMode })
	                ),
	                React.createElement(
	                    'div',
	                    { style: styles.docRow },
	                    React.createElement(TextArea, { title: 'M\xE4rkused',
	                        name: 'mark',
	                        ref: 'textarea-mark',
	                        onChange: self.handleInputChange,
	                        value: self.docData.mark || '',
	                        readOnly: !isEditeMode })
	                )
	            );
	        }
	    }]);

	    return Asutused;
	}(React.PureComponent);

	Asutused.propTypes = {
	    docId: PropTypes.number,
	    initData: PropTypes.object,
	    userData: PropTypes.object
	};

	Asutused.defaultProps = {
	    initData: {},
	    userData: {}
	};

	module.exports = Asutused;

/***/ }),
/* 302 */
/***/ (function(module, exports) {

	'use strict';module.exports={docRow:{display:'flex',flexDirection:'row'/*
	        border: '1px solid blue'
	*/},docColumn:{display:'flex',flexDirection:'column',/*
	        border: '1px solid yellow',
	*/width:'50%'},doc:{display:'flex',flexDirection:'column'/*
	        border: '1px solid brown'
	*/}};

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDU0NzQxOTNjNmNjODdlYmEyNjhjIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvYy1jb250ZXh0LmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbGlicy9jcmVhdGVFbXB0eUZpbHRlckRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9janMvcmVhY3Qtcm91dGVyLWRvbS5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvY2pzL3JlYWN0LXJvdXRlci5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvfi9wcm9wLXR5cGVzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtaXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1pcy9janMvcmVhY3QtaXMucHJvZHVjdGlvbi5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1pcy9janMvcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXIvfi9wcm9wLXR5cGVzL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzIiwid2VicGFjazovLy8uL34vb2JqZWN0LWFzc2lnbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9+L3Byb3AtdHlwZXMvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL34vcHJvcC10eXBlcy9jaGVja1Byb3BUeXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9+L3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzIiwid2VicGFjazovLy8uL34vaGlzdG9yeS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvY2pzL2hpc3RvcnkubWluLmpzIiwid2VicGFjazovLy8uL34vcmVzb2x2ZS1wYXRobmFtZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3Jlc29sdmUtcGF0aG5hbWUvY2pzL3Jlc29sdmUtcGF0aG5hbWUubWluLmpzIiwid2VicGFjazovLy8uL34vcmVzb2x2ZS1wYXRobmFtZS9janMvcmVzb2x2ZS1wYXRobmFtZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZhbHVlLWVxdWFsL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdmFsdWUtZXF1YWwvY2pzL3ZhbHVlLWVxdWFsLm1pbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZhbHVlLWVxdWFsL2Nqcy92YWx1ZS1lcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3Rpbnktd2FybmluZy9kaXN0L3Rpbnktd2FybmluZy5janMuanMiLCJ3ZWJwYWNrOi8vLy4vfi90aW55LWludmFyaWFudC9kaXN0L3RpbnktaW52YXJpYW50LmNqcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2hpc3RvcnkvY2pzL2hpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9taW5pLWNyZWF0ZS1yZWFjdC1jb250ZXh0L2Rpc3QvY2pzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlLmpzIiwid2VicGFjazovLy8uL34vcHJvcC10eXBlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcm9wLXR5cGVzL2xpYi9SZWFjdFByb3BUeXBlc1NlY3JldC5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb3AtdHlwZXMvY2hlY2tQcm9wVHlwZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcm9wLXR5cGVzL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2d1ZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci9+L3BhdGgtdG8tcmVnZXhwL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL34vaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzL2Rpc3QvaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MuY2pzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyL2Nqcy9yZWFjdC1yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL34vcHJvcC10eXBlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXJvdXRlci1kb20vfi9wcm9wLXR5cGVzL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9+L3Byb3AtdHlwZXMvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qtcm91dGVyLWRvbS9+L3Byb3AtdHlwZXMvY2hlY2tQcm9wVHlwZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL34vcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1yb3V0ZXItZG9tL2Nqcy9yZWFjdC1yb3V0ZXItZG9tLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvbWVudS10b29sYmFyL21lbnUtdG9vbGJhci5qc3giLCJ3ZWJwYWNrOi8vLy4vbGlicy9mZXRjaERhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9heGlvcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9+L2lzLWJ1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy90b29sYmFyLWNvbnRhaW5lci90b29sYmFyLWNvbnRhaW5lci5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy90b29sYmFyLWNvbnRhaW5lci90b29sYmFyLWNvbnRhaW5lci1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXN0YXJ0L2J1dHRvbi1yZWdpc3Rlci1zdGFydC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXIuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1sb2dpbi9idXR0b24tbG9naW4uanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1lZGl0L2J1dHRvbi1yZWdpc3Rlci1lZGl0LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24taW5mby9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9zdGFydC1tZW51L3N0YXJ0LW1lbnUuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvc3RhcnQtbWVudS9zdGFydC1tZW51LnN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL3RyZWUvdHJlZS5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy90cmVlL3RyZWUtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvc2VsZWN0LXJla3YvaW5kZXguanN4Iiwid2VicGFjazovLy8uL34vcmFkaXVtL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvZW5oYW5jZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3Jlc29sdmUtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9hcHBlbmQtaW1wb3J0YW50LXRvLWVhY2gtdmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL2FwcGVuZC1weC1pZi1uZWVkZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL21hcC1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL2Nzcy1ydWxlLXNldC10by1zdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL2NhbWVsLWNhc2UtcHJvcHMtdG8tZGFzaC1jYXNlLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9wcmVmaXhlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvY3JlYXRlUHJlZml4ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvcHJlZml4UHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvY2FwaXRhbGl6ZVN0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci91dGlscy9wcmVmaXhWYWx1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci91dGlscy9hZGROZXdWYWx1ZXNPbmx5LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3V0aWxzL2lzT2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvY3JlYXRlUHJlZml4ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvZ2V0QnJvd3NlckluZm9ybWF0aW9uLmpzIiwid2VicGFjazovLy8uL34vYm93c2VyL3NyYy9ib3dzZXIuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvZ2V0UHJlZml4ZWRLZXlmcmFtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9leGVudi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3ByZWZpeC1kYXRhL3N0YXRpYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9jYWxjLmpzIiwid2VicGFjazovLy8uL34vY3NzLWluLWpzLXV0aWxzL2xpYi9pc1ByZWZpeGVkVmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvY3Jvc3NGYWRlLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL2N1cnNvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvZmxleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9mbGV4Ym94SUUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvZmxleGJveE9sZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9ncmFkaWVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9pbWFnZVNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9wb3NpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9zaXppbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvdHJhbnNpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2Nzcy1pbi1qcy11dGlscy9saWIvaHlwaGVuYXRlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9oeXBoZW5hdGUtc3R5bGUtbmFtZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvcHJlZml4LWRhdGEvZHluYW1pYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvY2FsYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci91dGlscy9nZXRQcmVmaXhlZFZhbHVlLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9jcm9zc0ZhZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2N1cnNvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9mbGV4LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9mbGV4Ym94SUUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2ZsZXhib3hPbGQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2dyYWRpZW50LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9pbWFnZVNldC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvcG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL3NpemluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvdHJhbnNpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvZ2V0LXN0YXRlLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9jbGVhbi1zdGF0ZS1rZXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL2dldC1zdGF0ZS1rZXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL2dldC1yYWRpdW0tc3R5bGUtc3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL2hhc2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL21lcmdlLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9jaGVjay1wcm9wcy1wbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3BsdWdpbnMva2V5ZnJhbWVzLXBsdWdpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9tZXJnZS1zdHlsZS1hcnJheS1wbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3BsdWdpbnMvcHJlZml4LXBsdWdpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9yZW1vdmUtbmVzdGVkLXN0eWxlcy1wbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3BsdWdpbnMvcmVzb2x2ZS1pbnRlcmFjdGlvbi1zdHlsZXMtcGx1Z2luLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9wbHVnaW5zL21vdXNlLXVwLWxpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9wbHVnaW5zL3Jlc29sdmUtbWVkaWEtcXVlcmllcy1wbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3BsdWdpbnMvdmlzaXRlZC1wbHVnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYWRpdW0vbGliL3N0eWxlLWtlZXBlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvY29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvY29tcG9uZW50cy9zdHlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JhZGl1bS9saWIvY29tcG9uZW50cy9zdHlsZS1yb290LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9jb21wb25lbnRzL3N0eWxlLXNoZWV0LmpzIiwid2VicGFjazovLy8uL34vcmFkaXVtL2xpYi9rZXlmcmFtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3QtcmVrdi9zZWxlY3Qtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1hY2NvdW50L2J1dHRvbi1hY2NvdW50LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL21lbnUtdG9vbGJhci9tZW51LXRvb2xiYXIuc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvam91cm5hbC9kb2N1bWVudC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9kb2N1bWVudFRlbXBsYXRlL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9jb25maWcvZG9jX3JpZ2h0cy5qcyIsIndlYnBhY2s6Ly8vLi9saWJzL2NoZWNrUmlnaHRzLmpzIiwid2VicGFjazovLy8uL2NvbmZpZy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9mb3JtL2Zvcm0uanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvcGFnZS1sYWJlbC9wYWdlLWxhYmVsLmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL3BhZ2UtbGFiZWwvcGFnZS1sYWJlbC1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9mb3JtL2Zvcm0tc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvZG9jLXRvb2xiYXIvZG9jLXRvb2xiYXIuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1hZGQvYnV0dG9uLXJlZ2lzdGVyLWFkZC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXNhdmUvYnV0dG9uLXJlZ2lzdGVyLXNhdmUuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1jYW5jZWwvYnV0dG9uLXJlZ2lzdGVyLWNhbmNlbC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXByaW50L2J1dHRvbi1yZWdpc3Rlci1wcmludC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLWVtYWlsL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXBkZi9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9zaG93LWxvZ3MvaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvc2hvdy1sb2dzL3N0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2RhdGEtZ3JpZC9kYXRhLWdyaWQuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1kZWxldGUvYnV0dG9uLXJlZ2lzdGVyLWRlbGV0ZS5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLWRlbGV0ZS9tb2RhbFBhZ2UtZGVsZXRlLmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbHBhZ2UtZGVsZXRlL21vZGFscGFnZS1kZWxldGUtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtY2hlY2tib3gvaW5wdXQtY2hlY2tib3guanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtY2hlY2tib3gvc3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qta2V5ZG93bi9kaXN0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qta2V5ZG93bi9kaXN0L2RlY29yYXRvcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvZGVjb3JhdG9ycy9jbGFzc19kZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3Qvc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL21hdGNoX2tleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL2tleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL3BhcnNlX2tleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL3V1aWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvZXZlbnRfaGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL2RvbV9oZWxwZXJzLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qta2V5ZG93bi9kaXN0L2xpYi9saXN0ZW5lcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvZGVjb3JhdG9ycy9tZXRob2RfZGVjb3JhdG9yLmpzIiwid2VicGFjazovLy8uL34vcmVhY3Qta2V5ZG93bi9kaXN0L2RlY29yYXRvcnMvbWV0aG9kX2RlY29yYXRvcl9zY29wZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL2FycmF5LmZyb20uanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9kYXRhLWdyaWQvZGF0YS1ncmlkLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL3Rhc2std2lkZ2V0L3Rhc2std2lkZ2V0LmpzeCIsIndlYnBhY2s6Ly8vLi9saWJzL2dldE5vdy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZXhlY3V0ZS9idXR0b24tcmVnaXN0ZXItZXhlY3V0ZS5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3Qvc2VsZWN0LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL3NlbGVjdC9zZWxlY3Qtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtZGF0ZS9pbnB1dC1kYXRlLmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LWRhdGUvaW5wdXQtZGF0ZS1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9pbnB1dC10ZXh0L2lucHV0LXRleHQuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtdGV4dC9pbnB1dC10ZXh0LXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LW51bWJlci9pbnB1dC1udW1iZXIuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy90YXNrLXdpZGdldC90YXNrLXdpZGdldC1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLXJlcG9ydC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLXJlcG9ydC9zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL3RleHQtYXJlYS90ZXh0LWFyZWEtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3MvZG9jdW1lbnRUZW1wbGF0ZS9kb2N1bWVudC1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvbWl4aW4vcmVsYXRlZERvY3VtZW50cy5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9qb3VybmFsL2RvY3VtZW50L2pvdXJuYWwtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3MvZG9jdW1lbnRzL2RvY3VtZW50cy5qc3giLCJ3ZWJwYWNrOi8vLy4vbGlicy9wcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyLmpzIiwid2VicGFjazovLy8uL2xpYnMvcHJlcGFpcmVGaWx0ZXJEYXRhLmpzIiwid2VicGFjazovLy8uL2xpYnMvZ2V0RGVmYXVsdERhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWZpbHRlci9idXR0b24tcmVnaXN0ZXItZmlsdGVyLmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tc2VsZWN0L2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVmcmVzaC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9kYXRhLWdyaWQvZ3JpZC1maWx0ZXIvZ3JpZC1maWx0ZXIuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvZGF0YS1ncmlkL2dyaWQtZmlsdGVyL2dyaWQtZmlsdGVyLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL2RvY3VtZW50cy9kb2N1bWVudHMtc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi10YXNrL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL3VwbG9hZF9idXR0b24vaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvdXBsb2FkX2J1dHRvbi9zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9sb2FkaW5nL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2xvYWRpbmcvc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2xpYnMvZ2V0U3VtLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3MvYXJ2L2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tc2V0dGluZ3MvaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1lYXJ2ZS9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9hcnYvYXJ2LXJlZ2lzdGVyLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL2Fydi9kb2N1bWVudC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9hcnYvZG9jdW1lbnQvYXJ2ZS5zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbGlicy9yb3VuZF90b18yLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvc21rL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3Ntay9zbWstcmVnaXN0ZXItc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbl9sb2dzL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3Ntay9kb2N1bWVudC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9kb2Nwcm9wL2RvY3Byb3AuanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2NvbXBvbmVudHMvZG9jcHJvcC9zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXV1ZW5kYS1saWIvaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvc21rL2RvY3VtZW50L3Ntay1zdHlsZS5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3Ztay9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy92bWsvdm1rLXJlZ2lzdGVyLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3Ztay9kb2N1bWVudC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy92bWsvZG9jdW1lbnQvdm1rLXN0eWxlLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvc29yZGVyL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3NvcmRlci9zb3JkZXItcmVnaXN0ZXItc3R5bGVzLmpzIiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvc29yZGVyL2RvY3VtZW50L2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3NvcmRlci9kb2N1bWVudC9zb3JkZXItc3R5bGUuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9ub21lbmNsYXR1cmUvaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvbm9tZW5jbGF0dXJlL25vbWVuY2xhdHVyZS1yZWdpc3Rlci1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9ub21lbmNsYXR1cmUvZG9jdW1lbnQvaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3Mvbm9tZW5jbGF0dXJlL2RvY3VtZW50L25vbWVuY2xhdHVyZS1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy90dW5udXMvaW5kZXguanN4Iiwid2VicGFjazovLy8uL2Zyb250ZW5kL2RvY3MvdHVubnVzL3R1bm51c2VkLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL3R1bm51cy9kb2N1bWVudC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy90dW5udXMvZG9jdW1lbnQvdHVubnVzLXN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL2FzdXR1c2VkL2luZGV4LmpzeCIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9kb2NzL2FzdXR1c2VkL2FzdXR1cy1yZWdpc3Rlci1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9hc3V0dXNlZC9kb2N1bWVudC9pbmRleC5qc3giLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvZG9jcy9hc3V0dXNlZC9kb2N1bWVudC9hc3V0dXNlZC5zdHlsZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXTtcbiBcdHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSA9IGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGNodW5rSWRzLCBtb3JlTW9kdWxlcykge1xuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIGNhbGxiYWNrcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pXG4gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oY2h1bmtJZHMsIG1vcmVNb2R1bGVzKTtcbiBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbiBcdFx0XHRjYWxsYmFja3Muc2hpZnQoKS5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuIFx0XHRpZihtb3JlTW9kdWxlc1swXSkge1xuIFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbMF0gPSAwO1xuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4gXHQvLyBBcnJheSBtZWFucyBcImxvYWRpbmdcIiwgYXJyYXkgY29udGFpbnMgY2FsbGJhY2tzXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQyOjBcbiBcdH07XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4gXHRcdC8vIFwiMFwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApXG4gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gYW4gYXJyYXkgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXS5wdXNoKGNhbGxiYWNrKTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW2NhbGxiYWNrXTtcbiBcdFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gXHRcdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiBcdFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArICh7XCIwXCI6XCJsYXBzZWRcIixcIjFcIjpcInJhYW1hXCJ9W2NodW5rSWRdfHxjaHVua0lkKSArIFwiLmpzXCI7XG4gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDU0NzQxOTNjNmNjODdlYmEyNjhjIiwiJ3VzZSBzdHJpY3QnO3ZhciBjcmVhdGVFbXB0eUZpbHRlckRhdGE9cmVxdWlyZSgnLi8uLi9saWJzL2NyZWF0ZUVtcHR5RmlsdGVyRGF0YScpO3ZhciBEb2NDb250ZXh0PXtmaWx0ZXI6e30sbGliczp7fSxtZW51OltdLGRvY1R5cGVJZDonTEFQUycsaW5pdEZpbHRlcjpmdW5jdGlvbiBpbml0RmlsdGVyKGRvY1R5cGVJZCl7LyoqXHJcbiAgICAgICAgICog0LzQtdGC0L7QtCDRgdC+0LfQtNCw0YHRgiDQv9GD0YHRgtC+0Lkg0YTQuNC70YzRgtGAINC/0L4g0L/QtdGA0LXQtNCw0L3QvdC+0Lkg0LrQvtC90YTQuNCz0YPRgNCw0YbQuNC4XHJcbiAgICAgICAgICovaWYoIWRvY1R5cGVJZCl7ZG9jVHlwZUlkPXVuZGVmaW5lZC5kb2NUeXBlSWQ7Ly8g0L/RgNC+0LLQtdGA0LjQvCDQvdCw0LvQuNGH0LjQtSDQutC+0L3RhNC40LPRg9GA0LDRhtC40LkuINC10YHQu9C4INC90LXRgiwg0YLQviDQstC10YDQvdC10Lwg0L/Rg9GB0YLQvtC5INC80LDRgdGB0LjQslxuaWYoIURvY0NvbnRleHQuZ3JpZENvbmZpZ3x8IURvY0NvbnRleHQuZ3JpZENvbmZpZ1tkb2NUeXBlSWRdLmxlbmd0aCl7RG9jQ29udGV4dC5maWx0ZXJbZG9jVHlwZUlkXT1bXTt9ZWxzZXtEb2NDb250ZXh0LmZpbHRlcltkb2NUeXBlSWRdPWNyZWF0ZUVtcHR5RmlsdGVyRGF0YShEb2NDb250ZXh0LmdyaWRDb25maWdbZG9jVHlwZUlkXSxbXSxkb2NUeXBlSWQpO319fX07bW9kdWxlLmV4cG9ydD1Eb2NDb250ZXh0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jLWNvbnRleHQuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlKXtpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCl7bW9kdWxlLmRlcHJlY2F0ZT1mdW5jdGlvbigpe307bW9kdWxlLnBhdGhzPVtdOy8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxubW9kdWxlLmNoaWxkcmVuPVtdO21vZHVsZS53ZWJwYWNrUG9seWZpbGw9MTt9cmV0dXJuIG1vZHVsZTt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIERvY0NvbnRleHQ9cmVxdWlyZSgnLi8uLi9mcm9udGVuZC9kb2MtY29udGV4dCcpOy8qKlxyXG4gKiDRgdC+0LfQtNCw0YHRgiDQvNCw0YHRgdC40LIg0LTQu9GPINGB0L7Qt9C00LDQvdC40Y8g0YTQuNC70YzRgtGA0LBcclxuICovZnVuY3Rpb24gY3JlYXRlRW1wdHlGaWx0ZXJEYXRhKGdyaWRDb25maWcsZmlsdGVyRGF0YSxkb2NUeXBlSWQpe2ZpbHRlckRhdGE9Z3JpZENvbmZpZy5tYXAoZnVuY3Rpb24ocm93KXsvLyBwcm9wcy5kYXRhINC/0YPRgdGC0L7QtSwg0YHQvtC30LTQsNC10LxcbnZhciB2YWx1ZT1yb3cudmFsdWU/cm93LnZhbHVlOm51bGw7aWYocm93LmRlZmF1bHQpe3ZhciBkZWZhdWx0VmFsdWU9Z2V0RGVmYXVsdERhdGVzKHJvdy5kZWZhdWx0KTt2YWx1ZT1kZWZhdWx0VmFsdWUuc3RhcnQ7aWYocm93LmludGVydmFsKXtyb3cuc3RhcnQ9ZGVmYXVsdFZhbHVlLnN0YXJ0O3Jvd1tyb3cuaWQrJ19zdGFydCddPWRlZmF1bHRWYWx1ZS5zdGFydDtyb3cuZW5kPWRlZmF1bHRWYWx1ZS5lbmQ7cm93W3Jvdy5pZCsnX2VuZCddPWRlZmF1bHRWYWx1ZS5lbmQ7fX1pZighcm93LnR5cGUpe3Jvdy50eXBlPSd0ZXh0Jzt9cm93LnZhbHVlPXZhbHVlO3JldHVybiByb3c7fSk7RG9jQ29udGV4dC5maWx0ZXJbZG9jVHlwZUlkXT1maWx0ZXJEYXRhO3JldHVybiBmaWx0ZXJEYXRhO31tb2R1bGUuZXhwb3J0cz1jcmVhdGVFbXB0eUZpbHRlckRhdGE7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9saWJzL2NyZWF0ZUVtcHR5RmlsdGVyRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtpZihwcm9jZXNzLmVudi5OT0RFX0VOVj09PVwicHJvZHVjdGlvblwiKXttb2R1bGUuZXhwb3J0cz1yZXF1aXJlKFwiLi9janMvcmVhY3Qtcm91dGVyLWRvbS5taW4uanNcIik7fWVsc2V7bW9kdWxlLmV4cG9ydHM9cmVxdWlyZShcIi4vY2pzL3JlYWN0LXJvdXRlci1kb20uanNcIik7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzPW1vZHVsZS5leHBvcnRzPXt9Oy8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxudmFyIGNhY2hlZFNldFRpbWVvdXQ7dmFyIGNhY2hlZENsZWFyVGltZW91dDtmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCl7dGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7fWZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKXt0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO30oZnVuY3Rpb24oKXt0cnl7aWYodHlwZW9mIHNldFRpbWVvdXQ9PT0nZnVuY3Rpb24nKXtjYWNoZWRTZXRUaW1lb3V0PXNldFRpbWVvdXQ7fWVsc2V7Y2FjaGVkU2V0VGltZW91dD1kZWZhdWx0U2V0VGltb3V0O319Y2F0Y2goZSl7Y2FjaGVkU2V0VGltZW91dD1kZWZhdWx0U2V0VGltb3V0O310cnl7aWYodHlwZW9mIGNsZWFyVGltZW91dD09PSdmdW5jdGlvbicpe2NhY2hlZENsZWFyVGltZW91dD1jbGVhclRpbWVvdXQ7fWVsc2V7Y2FjaGVkQ2xlYXJUaW1lb3V0PWRlZmF1bHRDbGVhclRpbWVvdXQ7fX1jYXRjaChlKXtjYWNoZWRDbGVhclRpbWVvdXQ9ZGVmYXVsdENsZWFyVGltZW91dDt9fSkoKTtmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bil7aWYoY2FjaGVkU2V0VGltZW91dD09PXNldFRpbWVvdXQpey8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xucmV0dXJuIHNldFRpbWVvdXQoZnVuLDApO30vLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuaWYoKGNhY2hlZFNldFRpbWVvdXQ9PT1kZWZhdWx0U2V0VGltb3V0fHwhY2FjaGVkU2V0VGltZW91dCkmJnNldFRpbWVvdXQpe2NhY2hlZFNldFRpbWVvdXQ9c2V0VGltZW91dDtyZXR1cm4gc2V0VGltZW91dChmdW4sMCk7fXRyeXsvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5yZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sMCk7fWNhdGNoKGUpe3RyeXsvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbnJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCxmdW4sMCk7fWNhdGNoKGUpey8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5yZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsZnVuLDApO319fWZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpe2lmKGNhY2hlZENsZWFyVGltZW91dD09PWNsZWFyVGltZW91dCl7Ly9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5yZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7fS8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbmlmKChjYWNoZWRDbGVhclRpbWVvdXQ9PT1kZWZhdWx0Q2xlYXJUaW1lb3V0fHwhY2FjaGVkQ2xlYXJUaW1lb3V0KSYmY2xlYXJUaW1lb3V0KXtjYWNoZWRDbGVhclRpbWVvdXQ9Y2xlYXJUaW1lb3V0O3JldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTt9dHJ5ey8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbnJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTt9Y2F0Y2goZSl7dHJ5ey8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbnJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLG1hcmtlcik7fWNhdGNoKGUpey8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxucmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsbWFya2VyKTt9fX12YXIgcXVldWU9W107dmFyIGRyYWluaW5nPWZhbHNlO3ZhciBjdXJyZW50UXVldWU7dmFyIHF1ZXVlSW5kZXg9LTE7ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCl7aWYoIWRyYWluaW5nfHwhY3VycmVudFF1ZXVlKXtyZXR1cm47fWRyYWluaW5nPWZhbHNlO2lmKGN1cnJlbnRRdWV1ZS5sZW5ndGgpe3F1ZXVlPWN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO31lbHNle3F1ZXVlSW5kZXg9LTE7fWlmKHF1ZXVlLmxlbmd0aCl7ZHJhaW5RdWV1ZSgpO319ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpe2lmKGRyYWluaW5nKXtyZXR1cm47fXZhciB0aW1lb3V0PXJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtkcmFpbmluZz10cnVlO3ZhciBsZW49cXVldWUubGVuZ3RoO3doaWxlKGxlbil7Y3VycmVudFF1ZXVlPXF1ZXVlO3F1ZXVlPVtdO3doaWxlKCsrcXVldWVJbmRleDxsZW4pe2lmKGN1cnJlbnRRdWV1ZSl7Y3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO319cXVldWVJbmRleD0tMTtsZW49cXVldWUubGVuZ3RoO31jdXJyZW50UXVldWU9bnVsbDtkcmFpbmluZz1mYWxzZTtydW5DbGVhclRpbWVvdXQodGltZW91dCk7fXByb2Nlc3MubmV4dFRpY2s9ZnVuY3Rpb24oZnVuKXt2YXIgYXJncz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe2FyZ3NbaS0xXT1hcmd1bWVudHNbaV07fX1xdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1bixhcmdzKSk7aWYocXVldWUubGVuZ3RoPT09MSYmIWRyYWluaW5nKXtydW5UaW1lb3V0KGRyYWluUXVldWUpO319Oy8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLGFycmF5KXt0aGlzLmZ1bj1mdW47dGhpcy5hcnJheT1hcnJheTt9SXRlbS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KTt9O3Byb2Nlc3MudGl0bGU9J2Jyb3dzZXInO3Byb2Nlc3MuYnJvd3Nlcj10cnVlO3Byb2Nlc3MuZW52PXt9O3Byb2Nlc3MuYXJndj1bXTtwcm9jZXNzLnZlcnNpb249Jyc7Ly8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnM9e307ZnVuY3Rpb24gbm9vcCgpe31wcm9jZXNzLm9uPW5vb3A7cHJvY2Vzcy5hZGRMaXN0ZW5lcj1ub29wO3Byb2Nlc3Mub25jZT1ub29wO3Byb2Nlc3Mub2ZmPW5vb3A7cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcj1ub29wO3Byb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzPW5vb3A7cHJvY2Vzcy5lbWl0PW5vb3A7cHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXI9bm9vcDtwcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXI9bm9vcDtwcm9jZXNzLmxpc3RlbmVycz1mdW5jdGlvbihuYW1lKXtyZXR1cm5bXTt9O3Byb2Nlc3MuYmluZGluZz1mdW5jdGlvbihuYW1lKXt0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7fTtwcm9jZXNzLmN3ZD1mdW5jdGlvbigpe3JldHVybicvJzt9O3Byb2Nlc3MuY2hkaXI9ZnVuY3Rpb24oZGlyKXt0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO307cHJvY2Vzcy51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjt2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307ZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0KGUpe3JldHVybiBlJiZcIm9iamVjdFwiPT0odHlwZW9mIGU9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZihlKSkmJlwiZGVmYXVsdFwiaW4gZT9lLmRlZmF1bHQ6ZTt9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHJlYWN0Um91dGVyPXJlcXVpcmUoXCJyZWFjdC1yb3V0ZXJcIiksUmVhY3Q9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSksaGlzdG9yeT1yZXF1aXJlKFwiaGlzdG9yeVwiKTtyZXF1aXJlKFwicHJvcC10eXBlc1wiKSxyZXF1aXJlKFwidGlueS13YXJuaW5nXCIpO3ZhciBpbnZhcmlhbnQ9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoXCJ0aW55LWludmFyaWFudFwiKSk7ZnVuY3Rpb24gX2V4dGVuZHMoKXtyZXR1cm4oX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIHQ9YXJndW1lbnRzW3JdO2Zvcih2YXIgbyBpbiB0KXtPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSk7fX1yZXR1cm4gZTt9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fWZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKGUscil7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksKGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUpLl9fcHJvdG9fXz1yO31mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShlLHIpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIHQsbyxuPXt9LGE9T2JqZWN0LmtleXMoZSk7Zm9yKG89MDtvPGEubGVuZ3RoO28rKyl7dD1hW29dLDA8PXIuaW5kZXhPZih0KXx8KG5bdF09ZVt0XSk7fXJldHVybiBuO312YXIgQnJvd3NlclJvdXRlcj1mdW5jdGlvbihuKXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBlLHI9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShyKSxvPTA7bzxyO28rKyl7dFtvXT1hcmd1bWVudHNbb107fXJldHVybihlPW4uY2FsbC5hcHBseShuLFt0aGlzXS5jb25jYXQodCkpfHx0aGlzKS5oaXN0b3J5PWhpc3RvcnkuY3JlYXRlQnJvd3Nlckhpc3RvcnkoZS5wcm9wcyksZTt9cmV0dXJuIF9pbmhlcml0c0xvb3NlKGUsbiksZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQocmVhY3RSb3V0ZXIuUm91dGVyLHtoaXN0b3J5OnRoaXMuaGlzdG9yeSxjaGlsZHJlbjp0aGlzLnByb3BzLmNoaWxkcmVufSk7fSxlO30oUmVhY3QuQ29tcG9uZW50KSxIYXNoUm91dGVyPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGUoKXtmb3IodmFyIGUscj1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KHIpLG89MDtvPHI7bysrKXt0W29dPWFyZ3VtZW50c1tvXTt9cmV0dXJuKGU9bi5jYWxsLmFwcGx5KG4sW3RoaXNdLmNvbmNhdCh0KSl8fHRoaXMpLmhpc3Rvcnk9aGlzdG9yeS5jcmVhdGVIYXNoSGlzdG9yeShlLnByb3BzKSxlO31yZXR1cm4gX2luaGVyaXRzTG9vc2UoZSxuKSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChyZWFjdFJvdXRlci5Sb3V0ZXIse2hpc3Rvcnk6dGhpcy5oaXN0b3J5LGNoaWxkcmVuOnRoaXMucHJvcHMuY2hpbGRyZW59KTt9LGU7fShSZWFjdC5Db21wb25lbnQpLHJlc29sdmVUb0xvY2F0aW9uPWZ1bmN0aW9uIHJlc29sdmVUb0xvY2F0aW9uKGUscil7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lKHIpOmU7fSxub3JtYWxpemVUb0xvY2F0aW9uPWZ1bmN0aW9uIG5vcm1hbGl6ZVRvTG9jYXRpb24oZSxyKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9oaXN0b3J5LmNyZWF0ZUxvY2F0aW9uKGUsbnVsbCxudWxsLHIpOmU7fSxmb3J3YXJkUmVmU2hpbT1mdW5jdGlvbiBmb3J3YXJkUmVmU2hpbShlKXtyZXR1cm4gZTt9LGZvcndhcmRSZWY9UmVhY3QuZm9yd2FyZFJlZjtmdW5jdGlvbiBpc01vZGlmaWVkRXZlbnQoZSl7cmV0dXJuISEoZS5tZXRhS2V5fHxlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLnNoaWZ0S2V5KTt9dm9pZCAwPT09Zm9yd2FyZFJlZiYmKGZvcndhcmRSZWY9Zm9yd2FyZFJlZlNoaW0pO3ZhciBMaW5rQW5jaG9yPWZvcndhcmRSZWYoZnVuY3Rpb24oZSxyKXt2YXIgdD1lLmlubmVyUmVmLG89ZS5uYXZpZ2F0ZSxuPWUub25DbGljayxhPV9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKGUsW1wiaW5uZXJSZWZcIixcIm5hdmlnYXRlXCIsXCJvbkNsaWNrXCJdKSxpPWEudGFyZ2V0LGM9X2V4dGVuZHMoe30sYSx7b25DbGljazpmdW5jdGlvbiBvbkNsaWNrKHIpe3RyeXtuJiZuKHIpO31jYXRjaChlKXt0aHJvdyByLnByZXZlbnREZWZhdWx0KCksZTt9ci5kZWZhdWx0UHJldmVudGVkfHwwIT09ci5idXR0b258fGkmJlwiX3NlbGZcIiE9PWl8fGlzTW9kaWZpZWRFdmVudChyKXx8KHIucHJldmVudERlZmF1bHQoKSxvKCkpO319KTtyZXR1cm4gYy5yZWY9Zm9yd2FyZFJlZlNoaW0hPT1mb3J3YXJkUmVmJiZyfHx0LFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJhXCIsYyk7fSksTGluaz1mb3J3YXJkUmVmKGZ1bmN0aW9uKGUsYSl7dmFyIHI9ZS5jb21wb25lbnQsaT12b2lkIDA9PT1yP0xpbmtBbmNob3I6cixjPWUucmVwbGFjZSxmPWUudG8sdT1lLmlubmVyUmVmLHM9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoZSxbXCJjb21wb25lbnRcIixcInJlcGxhY2VcIixcInRvXCIsXCJpbm5lclJlZlwiXSk7cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQocmVhY3RSb3V0ZXIuX19Sb3V0ZXJDb250ZXh0LkNvbnN1bWVyLG51bGwsZnVuY3Rpb24ocil7cnx8aW52YXJpYW50KCExKTt2YXIgdD1yLmhpc3RvcnksZT1ub3JtYWxpemVUb0xvY2F0aW9uKHJlc29sdmVUb0xvY2F0aW9uKGYsci5sb2NhdGlvbiksci5sb2NhdGlvbiksbz1lP3QuY3JlYXRlSHJlZihlKTpcIlwiLG49X2V4dGVuZHMoe30scyx7aHJlZjpvLG5hdmlnYXRlOmZ1bmN0aW9uIG5hdmlnYXRlKCl7dmFyIGU9cmVzb2x2ZVRvTG9jYXRpb24oZixyLmxvY2F0aW9uKTsoYz90LnJlcGxhY2U6dC5wdXNoKShlKTt9fSk7cmV0dXJuIGZvcndhcmRSZWZTaGltIT09Zm9yd2FyZFJlZj9uLnJlZj1hfHx1Om4uaW5uZXJSZWY9dSxSZWFjdC5jcmVhdGVFbGVtZW50KGksbik7fSk7fSksZm9yd2FyZFJlZlNoaW0kMT1mdW5jdGlvbiBmb3J3YXJkUmVmU2hpbSQxKGUpe3JldHVybiBlO30sZm9yd2FyZFJlZiQxPVJlYWN0LmZvcndhcmRSZWY7ZnVuY3Rpb24gam9pbkNsYXNzbmFtZXMoKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheShlKSx0PTA7dDxlO3QrKyl7clt0XT1hcmd1bWVudHNbdF07fXJldHVybiByLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZTt9KS5qb2luKFwiIFwiKTt9dm9pZCAwPT09Zm9yd2FyZFJlZiQxJiYoZm9yd2FyZFJlZiQxPWZvcndhcmRSZWZTaGltJDEpO3ZhciBOYXZMaW5rPWZvcndhcmRSZWYkMShmdW5jdGlvbihlLHMpe3ZhciByPWVbXCJhcmlhLWN1cnJlbnRcIl0sbD12b2lkIDA9PT1yP1wicGFnZVwiOnIsdD1lLmFjdGl2ZUNsYXNzTmFtZSxwPXZvaWQgMD09PXQ/XCJhY3RpdmVcIjp0LGg9ZS5hY3RpdmVTdHlsZSxSPWUuY2xhc3NOYW1lLGQ9ZS5leGFjdCx2PWUuaXNBY3RpdmUseT1lLmxvY2F0aW9uLG09ZS5zdHJpY3Qsdz1lLnN0eWxlLF89ZS50byxMPWUuaW5uZXJSZWYseD1fb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShlLFtcImFyaWEtY3VycmVudFwiLFwiYWN0aXZlQ2xhc3NOYW1lXCIsXCJhY3RpdmVTdHlsZVwiLFwiY2xhc3NOYW1lXCIsXCJleGFjdFwiLFwiaXNBY3RpdmVcIixcImxvY2F0aW9uXCIsXCJzdHJpY3RcIixcInN0eWxlXCIsXCJ0b1wiLFwiaW5uZXJSZWZcIl0pO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KHJlYWN0Um91dGVyLl9fUm91dGVyQ29udGV4dC5Db25zdW1lcixudWxsLGZ1bmN0aW9uKGUpe2V8fGludmFyaWFudCghMSk7dmFyIHI9eXx8ZS5sb2NhdGlvbix0PW5vcm1hbGl6ZVRvTG9jYXRpb24ocmVzb2x2ZVRvTG9jYXRpb24oXyxyKSxyKSxvPXQucGF0aG5hbWUsbj1vJiZvLnJlcGxhY2UoLyhbLisqPz1eIToke30oKVtcXF18L1xcXFxdKS9nLFwiXFxcXCQxXCIpLGE9bj9yZWFjdFJvdXRlci5tYXRjaFBhdGgoci5wYXRobmFtZSx7cGF0aDpuLGV4YWN0OmQsc3RyaWN0Om19KTpudWxsLGk9ISEodj92KGEscik6YSksYz1pP2pvaW5DbGFzc25hbWVzKFIscCk6UixmPWk/X2V4dGVuZHMoe30sdyx7fSxoKTp3LHU9X2V4dGVuZHMoe1wiYXJpYS1jdXJyZW50XCI6aSYmbHx8bnVsbCxjbGFzc05hbWU6YyxzdHlsZTpmLHRvOnR9LHgpO3JldHVybiBmb3J3YXJkUmVmU2hpbSQxIT09Zm9yd2FyZFJlZiQxP3UucmVmPXN8fEw6dS5pbm5lclJlZj1MLFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGluayx1KTt9KTt9KTtPYmplY3Qua2V5cyhyZWFjdFJvdXRlcikuZm9yRWFjaChmdW5jdGlvbihlKXtcImRlZmF1bHRcIiE9PWUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLGUse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiByZWFjdFJvdXRlcltlXTt9fSk7fSksZXhwb3J0cy5Ccm93c2VyUm91dGVyPUJyb3dzZXJSb3V0ZXIsZXhwb3J0cy5IYXNoUm91dGVyPUhhc2hSb3V0ZXIsZXhwb3J0cy5MaW5rPUxpbmssZXhwb3J0cy5OYXZMaW5rPU5hdkxpbms7Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3Qtcm91dGVyLWRvbS5taW4uanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vY2pzL3JlYWN0LXJvdXRlci1kb20ubWluLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WPT09XCJwcm9kdWN0aW9uXCIpe21vZHVsZS5leHBvcnRzPXJlcXVpcmUoXCIuL2Nqcy9yZWFjdC1yb3V0ZXIubWluLmpzXCIpO31lbHNle21vZHVsZS5leHBvcnRzPXJlcXVpcmUoXCIuL2Nqcy9yZWFjdC1yb3V0ZXIuanNcIik7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCh0KXtyZXR1cm4gdCYmXCJvYmplY3RcIj09KHR5cGVvZiB0PT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YodCkpJiZcImRlZmF1bHRcImluIHQ/dC5kZWZhdWx0OnQ7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBSZWFjdD1faW50ZXJvcERlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKTtyZXF1aXJlKFwicHJvcC10eXBlc1wiKTt2YXIgaGlzdG9yeT1yZXF1aXJlKFwiaGlzdG9yeVwiKTtyZXF1aXJlKFwidGlueS13YXJuaW5nXCIpO3ZhciBjcmVhdGVDb250ZXh0PV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKFwibWluaS1jcmVhdGUtcmVhY3QtY29udGV4dFwiKSksaW52YXJpYW50PV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKFwidGlueS1pbnZhcmlhbnRcIikpLHBhdGhUb1JlZ2V4cD1faW50ZXJvcERlZmF1bHQocmVxdWlyZShcInBhdGgtdG8tcmVnZXhwXCIpKTtyZXF1aXJlKFwicmVhY3QtaXNcIik7dmFyIGhvaXN0U3RhdGljcz1faW50ZXJvcERlZmF1bHQocmVxdWlyZShcImhvaXN0LW5vbi1yZWFjdC1zdGF0aWNzXCIpKTtmdW5jdGlvbiBfZXh0ZW5kcygpe3JldHVybihfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciBvIGluIG4pe09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLG8pJiYodFtvXT1uW29dKTt9fXJldHVybiB0O30pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZnVuY3Rpb24gX2luaGVyaXRzTG9vc2UodCxlKXt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlKSwodC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCkuX19wcm90b19fPWU7fWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHQsZSl7aWYobnVsbD09dClyZXR1cm57fTt2YXIgbixvLHI9e30sYT1PYmplY3Qua2V5cyh0KTtmb3Iobz0wO288YS5sZW5ndGg7bysrKXtuPWFbb10sMDw9ZS5pbmRleE9mKG4pfHwocltuXT10W25dKTt9cmV0dXJuIHI7fXZhciBjcmVhdGVOYW1lZENvbnRleHQ9ZnVuY3Rpb24gY3JlYXRlTmFtZWRDb250ZXh0KHQpe3ZhciBlPWNyZWF0ZUNvbnRleHQoKTtyZXR1cm4gZS5kaXNwbGF5TmFtZT10LGU7fSxjb250ZXh0PWNyZWF0ZU5hbWVkQ29udGV4dChcIlJvdXRlclwiKSxSb3V0ZXI9ZnVuY3Rpb24obil7ZnVuY3Rpb24gdCh0KXt2YXIgZTtyZXR1cm4oZT1uLmNhbGwodGhpcyx0KXx8dGhpcykuc3RhdGU9e2xvY2F0aW9uOnQuaGlzdG9yeS5sb2NhdGlvbn0sZS5faXNNb3VudGVkPSExLGUuX3BlbmRpbmdMb2NhdGlvbj1udWxsLHQuc3RhdGljQ29udGV4dHx8KGUudW5saXN0ZW49dC5oaXN0b3J5Lmxpc3RlbihmdW5jdGlvbih0KXtlLl9pc01vdW50ZWQ/ZS5zZXRTdGF0ZSh7bG9jYXRpb246dH0pOmUuX3BlbmRpbmdMb2NhdGlvbj10O30pKSxlO31faW5oZXJpdHNMb29zZSh0LG4pLHQuY29tcHV0ZVJvb3RNYXRjaD1mdW5jdGlvbih0KXtyZXR1cm57cGF0aDpcIi9cIix1cmw6XCIvXCIscGFyYW1zOnt9LGlzRXhhY3Q6XCIvXCI9PT10fTt9O3ZhciBlPXQucHJvdG90eXBlO3JldHVybiBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7dGhpcy5faXNNb3VudGVkPSEwLHRoaXMuX3BlbmRpbmdMb2NhdGlvbiYmdGhpcy5zZXRTdGF0ZSh7bG9jYXRpb246dGhpcy5fcGVuZGluZ0xvY2F0aW9ufSk7fSxlLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7dGhpcy51bmxpc3RlbiYmdGhpcy51bmxpc3RlbigpO30sZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LlByb3ZpZGVyLHtjaGlsZHJlbjp0aGlzLnByb3BzLmNoaWxkcmVufHxudWxsLHZhbHVlOntoaXN0b3J5OnRoaXMucHJvcHMuaGlzdG9yeSxsb2NhdGlvbjp0aGlzLnN0YXRlLmxvY2F0aW9uLG1hdGNoOnQuY29tcHV0ZVJvb3RNYXRjaCh0aGlzLnN0YXRlLmxvY2F0aW9uLnBhdGhuYW1lKSxzdGF0aWNDb250ZXh0OnRoaXMucHJvcHMuc3RhdGljQ29udGV4dH19KTt9LHQ7fShSZWFjdC5Db21wb25lbnQpLE1lbW9yeVJvdXRlcj1mdW5jdGlvbihyKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0LGU9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShlKSxvPTA7bzxlO28rKyl7bltvXT1hcmd1bWVudHNbb107fXJldHVybih0PXIuY2FsbC5hcHBseShyLFt0aGlzXS5jb25jYXQobikpfHx0aGlzKS5oaXN0b3J5PWhpc3RvcnkuY3JlYXRlTWVtb3J5SGlzdG9yeSh0LnByb3BzKSx0O31yZXR1cm4gX2luaGVyaXRzTG9vc2UodCxyKSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXIse2hpc3Rvcnk6dGhpcy5oaXN0b3J5LGNoaWxkcmVuOnRoaXMucHJvcHMuY2hpbGRyZW59KTt9LHQ7fShSZWFjdC5Db21wb25lbnQpLExpZmVjeWNsZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO31faW5oZXJpdHNMb29zZShlLHQpO3ZhciBuPWUucHJvdG90eXBlO3JldHVybiBuLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7dGhpcy5wcm9wcy5vbk1vdW50JiZ0aGlzLnByb3BzLm9uTW91bnQuY2FsbCh0aGlzLHRoaXMpO30sbi5jb21wb25lbnREaWRVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5wcm9wcy5vblVwZGF0ZSYmdGhpcy5wcm9wcy5vblVwZGF0ZS5jYWxsKHRoaXMsdGhpcyx0KTt9LG4uY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24oKXt0aGlzLnByb3BzLm9uVW5tb3VudCYmdGhpcy5wcm9wcy5vblVubW91bnQuY2FsbCh0aGlzLHRoaXMpO30sbi5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbDt9LGU7fShSZWFjdC5Db21wb25lbnQpO2Z1bmN0aW9uIFByb21wdCh0KXt2YXIgbz10Lm1lc3NhZ2UsZT10LndoZW4scj12b2lkIDA9PT1lfHxlO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbnRleHQuQ29uc3VtZXIsbnVsbCxmdW5jdGlvbih0KXtpZih0fHxpbnZhcmlhbnQoITEpLCFyfHx0LnN0YXRpY0NvbnRleHQpcmV0dXJuIG51bGw7dmFyIG49dC5oaXN0b3J5LmJsb2NrO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KExpZmVjeWNsZSx7b25Nb3VudDpmdW5jdGlvbiBvbk1vdW50KHQpe3QucmVsZWFzZT1uKG8pO30sb25VcGRhdGU6ZnVuY3Rpb24gb25VcGRhdGUodCxlKXtlLm1lc3NhZ2UhPT1vJiYodC5yZWxlYXNlKCksdC5yZWxlYXNlPW4obykpO30sb25Vbm1vdW50OmZ1bmN0aW9uIG9uVW5tb3VudCh0KXt0LnJlbGVhc2UoKTt9LG1lc3NhZ2U6b30pO30pO312YXIgY2FjaGU9e30sY2FjaGVMaW1pdD0xZTQsY2FjaGVDb3VudD0wO2Z1bmN0aW9uIGNvbXBpbGVQYXRoKHQpe2lmKGNhY2hlW3RdKXJldHVybiBjYWNoZVt0XTt2YXIgZT1wYXRoVG9SZWdleHAuY29tcGlsZSh0KTtyZXR1cm4gY2FjaGVDb3VudDxjYWNoZUxpbWl0JiYoY2FjaGVbdF09ZSxjYWNoZUNvdW50KyspLGU7fWZ1bmN0aW9uIGdlbmVyYXRlUGF0aCh0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1cIi9cIiksdm9pZCAwPT09ZSYmKGU9e30pLFwiL1wiPT09dD90OmNvbXBpbGVQYXRoKHQpKGUse3ByZXR0eTohMH0pO31mdW5jdGlvbiBSZWRpcmVjdCh0KXt2YXIgYT10LmNvbXB1dGVkTWF0Y2gsaT10LnRvLGU9dC5wdXNoLGM9dm9pZCAwIT09ZSYmZTtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LkNvbnN1bWVyLG51bGwsZnVuY3Rpb24odCl7dHx8aW52YXJpYW50KCExKTt2YXIgZT10Lmhpc3Rvcnksbj10LnN0YXRpY0NvbnRleHQsbz1jP2UucHVzaDplLnJlcGxhY2Uscj1oaXN0b3J5LmNyZWF0ZUxvY2F0aW9uKGE/XCJzdHJpbmdcIj09dHlwZW9mIGk/Z2VuZXJhdGVQYXRoKGksYS5wYXJhbXMpOl9leHRlbmRzKHt9LGkse3BhdGhuYW1lOmdlbmVyYXRlUGF0aChpLnBhdGhuYW1lLGEucGFyYW1zKX0pOmkpO3JldHVybiBuPyhvKHIpLG51bGwpOlJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlmZWN5Y2xlLHtvbk1vdW50OmZ1bmN0aW9uIG9uTW91bnQoKXtvKHIpO30sb25VcGRhdGU6ZnVuY3Rpb24gb25VcGRhdGUodCxlKXt2YXIgbj1oaXN0b3J5LmNyZWF0ZUxvY2F0aW9uKGUudG8pO2hpc3RvcnkubG9jYXRpb25zQXJlRXF1YWwobixfZXh0ZW5kcyh7fSxyLHtrZXk6bi5rZXl9KSl8fG8ocik7fSx0bzppfSk7fSk7fXZhciBjYWNoZSQxPXt9LGNhY2hlTGltaXQkMT0xZTQsY2FjaGVDb3VudCQxPTA7ZnVuY3Rpb24gY29tcGlsZVBhdGgkMSh0LGUpe3ZhciBuPVwiXCIrZS5lbmQrZS5zdHJpY3QrZS5zZW5zaXRpdmUsbz1jYWNoZSQxW25dfHwoY2FjaGUkMVtuXT17fSk7aWYob1t0XSlyZXR1cm4gb1t0XTt2YXIgcj1bXSxhPXtyZWdleHA6cGF0aFRvUmVnZXhwKHQscixlKSxrZXlzOnJ9O3JldHVybiBjYWNoZUNvdW50JDE8Y2FjaGVMaW1pdCQxJiYob1t0XT1hLGNhY2hlQ291bnQkMSsrKSxhO31mdW5jdGlvbiBtYXRjaFBhdGgodSx0KXt2b2lkIDA9PT10JiYodD17fSksXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiFBcnJheS5pc0FycmF5KHQpfHwodD17cGF0aDp0fSk7dmFyIGU9dCxuPWUucGF0aCxvPWUuZXhhY3QscD12b2lkIDAhPT1vJiZvLHI9ZS5zdHJpY3QsaD12b2lkIDAhPT1yJiZyLGE9ZS5zZW5zaXRpdmUsbD12b2lkIDAhPT1hJiZhO3JldHVybltdLmNvbmNhdChuKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtpZighZSYmXCJcIiE9PWUpcmV0dXJuIG51bGw7aWYodClyZXR1cm4gdDt2YXIgbj1jb21waWxlUGF0aCQxKGUse2VuZDpwLHN0cmljdDpoLHNlbnNpdGl2ZTpsfSksbz1uLnJlZ2V4cCxyPW4ua2V5cyxhPW8uZXhlYyh1KTtpZighYSlyZXR1cm4gbnVsbDt2YXIgaT1hWzBdLGM9YS5zbGljZSgxKSxzPXU9PT1pO3JldHVybiBwJiYhcz9udWxsOntwYXRoOmUsdXJsOlwiL1wiPT09ZSYmXCJcIj09PWk/XCIvXCI6aSxpc0V4YWN0OnMscGFyYW1zOnIucmVkdWNlKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtlLm5hbWVdPWNbbl0sdDt9LHt9KX07fSxudWxsKTt9dmFyIFJvdXRlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7fXJldHVybiBfaW5oZXJpdHNMb29zZShlLHQpLGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBjPXRoaXM7cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29udGV4dC5Db25zdW1lcixudWxsLGZ1bmN0aW9uKHQpe3R8fGludmFyaWFudCghMSk7dmFyIGU9Yy5wcm9wcy5sb2NhdGlvbnx8dC5sb2NhdGlvbixuPV9leHRlbmRzKHt9LHQse2xvY2F0aW9uOmUsbWF0Y2g6Yy5wcm9wcy5jb21wdXRlZE1hdGNoP2MucHJvcHMuY29tcHV0ZWRNYXRjaDpjLnByb3BzLnBhdGg/bWF0Y2hQYXRoKGUucGF0aG5hbWUsYy5wcm9wcyk6dC5tYXRjaH0pLG89Yy5wcm9wcyxyPW8uY2hpbGRyZW4sYT1vLmNvbXBvbmVudCxpPW8ucmVuZGVyO3JldHVybiBBcnJheS5pc0FycmF5KHIpJiYwPT09ci5sZW5ndGgmJihyPW51bGwpLFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29udGV4dC5Qcm92aWRlcix7dmFsdWU6bn0sbi5tYXRjaD9yP1wiZnVuY3Rpb25cIj09dHlwZW9mIHI/cihuKTpyOmE/UmVhY3QuY3JlYXRlRWxlbWVudChhLG4pOmk/aShuKTpudWxsOlwiZnVuY3Rpb25cIj09dHlwZW9mIHI/cihuKTpudWxsKTt9KTt9LGU7fShSZWFjdC5Db21wb25lbnQpO2Z1bmN0aW9uIGFkZExlYWRpbmdTbGFzaCh0KXtyZXR1cm5cIi9cIj09PXQuY2hhckF0KDApP3Q6XCIvXCIrdDt9ZnVuY3Rpb24gYWRkQmFzZW5hbWUodCxlKXtyZXR1cm4gdD9fZXh0ZW5kcyh7fSxlLHtwYXRobmFtZTphZGRMZWFkaW5nU2xhc2godCkrZS5wYXRobmFtZX0pOmU7fWZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUodCxlKXtpZighdClyZXR1cm4gZTt2YXIgbj1hZGRMZWFkaW5nU2xhc2godCk7cmV0dXJuIDAhPT1lLnBhdGhuYW1lLmluZGV4T2Yobik/ZTpfZXh0ZW5kcyh7fSxlLHtwYXRobmFtZTplLnBhdGhuYW1lLnN1YnN0cihuLmxlbmd0aCl9KTt9ZnVuY3Rpb24gY3JlYXRlVVJMKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6aGlzdG9yeS5jcmVhdGVQYXRoKHQpO31mdW5jdGlvbiBzdGF0aWNIYW5kbGVyKHQpe3JldHVybiBmdW5jdGlvbigpe2ludmFyaWFudCghMSk7fTt9ZnVuY3Rpb24gbm9vcCgpe312YXIgU3RhdGljUm91dGVyPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIHQoKXtmb3IodmFyIGUsdD1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KHQpLG89MDtvPHQ7bysrKXtuW29dPWFyZ3VtZW50c1tvXTt9cmV0dXJuKGU9ci5jYWxsLmFwcGx5KHIsW3RoaXNdLmNvbmNhdChuKSl8fHRoaXMpLmhhbmRsZVB1c2g9ZnVuY3Rpb24odCl7cmV0dXJuIGUubmF2aWdhdGVUbyh0LFwiUFVTSFwiKTt9LGUuaGFuZGxlUmVwbGFjZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5uYXZpZ2F0ZVRvKHQsXCJSRVBMQUNFXCIpO30sZS5oYW5kbGVMaXN0ZW49ZnVuY3Rpb24oKXtyZXR1cm4gbm9vcDt9LGUuaGFuZGxlQmxvY2s9ZnVuY3Rpb24oKXtyZXR1cm4gbm9vcDt9LGU7fV9pbmhlcml0c0xvb3NlKHQscik7dmFyIGU9dC5wcm90b3R5cGU7cmV0dXJuIGUubmF2aWdhdGVUbz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucHJvcHMsbz1uLmJhc2VuYW1lLHI9dm9pZCAwPT09bz9cIlwiOm8sYT1uLmNvbnRleHQsaT12b2lkIDA9PT1hP3t9OmE7aS5hY3Rpb249ZSxpLmxvY2F0aW9uPWFkZEJhc2VuYW1lKHIsaGlzdG9yeS5jcmVhdGVMb2NhdGlvbih0KSksaS51cmw9Y3JlYXRlVVJMKGkubG9jYXRpb24pO30sZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnByb3BzLGU9dC5iYXNlbmFtZSxuPXZvaWQgMD09PWU/XCJcIjplLG89dC5jb250ZXh0LHI9dm9pZCAwPT09bz97fTpvLGE9dC5sb2NhdGlvbixpPXZvaWQgMD09PWE/XCIvXCI6YSxjPV9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHQsW1wiYmFzZW5hbWVcIixcImNvbnRleHRcIixcImxvY2F0aW9uXCJdKSxzPXtjcmVhdGVIcmVmOmZ1bmN0aW9uIGNyZWF0ZUhyZWYodCl7cmV0dXJuIGFkZExlYWRpbmdTbGFzaChuK2NyZWF0ZVVSTCh0KSk7fSxhY3Rpb246XCJQT1BcIixsb2NhdGlvbjpzdHJpcEJhc2VuYW1lKG4saGlzdG9yeS5jcmVhdGVMb2NhdGlvbihpKSkscHVzaDp0aGlzLmhhbmRsZVB1c2gscmVwbGFjZTp0aGlzLmhhbmRsZVJlcGxhY2UsZ286c3RhdGljSGFuZGxlcigpLGdvQmFjazpzdGF0aWNIYW5kbGVyKCksZ29Gb3J3YXJkOnN0YXRpY0hhbmRsZXIoKSxsaXN0ZW46dGhpcy5oYW5kbGVMaXN0ZW4sYmxvY2s6dGhpcy5oYW5kbGVCbG9ja307cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGVyLF9leHRlbmRzKHt9LGMse2hpc3Rvcnk6cyxzdGF0aWNDb250ZXh0OnJ9KSk7fSx0O30oUmVhY3QuQ29tcG9uZW50KSxTd2l0Y2g9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpczt9cmV0dXJuIF9pbmhlcml0c0xvb3NlKGUsdCksZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LkNvbnN1bWVyLG51bGwsZnVuY3Rpb24obil7bnx8aW52YXJpYW50KCExKTt2YXIgbyxyLGE9dC5wcm9wcy5sb2NhdGlvbnx8bi5sb2NhdGlvbjtyZXR1cm4gUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaCh0LnByb3BzLmNoaWxkcmVuLGZ1bmN0aW9uKHQpe2lmKG51bGw9PXImJlJlYWN0LmlzVmFsaWRFbGVtZW50KHQpKXt2YXIgZT0obz10KS5wcm9wcy5wYXRofHx0LnByb3BzLmZyb207cj1lP21hdGNoUGF0aChhLnBhdGhuYW1lLF9leHRlbmRzKHt9LHQucHJvcHMse3BhdGg6ZX0pKTpuLm1hdGNoO319KSxyP1JlYWN0LmNsb25lRWxlbWVudChvLHtsb2NhdGlvbjphLGNvbXB1dGVkTWF0Y2g6cn0pOm51bGw7fSk7fSxlO30oUmVhY3QuQ29tcG9uZW50KTtmdW5jdGlvbiB3aXRoUm91dGVyKG8pe2Z1bmN0aW9uIHQodCl7dmFyIGU9dC53cmFwcGVkQ29tcG9uZW50UmVmLG49X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UodCxbXCJ3cmFwcGVkQ29tcG9uZW50UmVmXCJdKTtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LkNvbnN1bWVyLG51bGwsZnVuY3Rpb24odCl7cmV0dXJuIHR8fGludmFyaWFudCghMSksUmVhY3QuY3JlYXRlRWxlbWVudChvLF9leHRlbmRzKHt9LG4sdCx7cmVmOmV9KSk7fSk7fXZhciBlPVwid2l0aFJvdXRlcihcIisoby5kaXNwbGF5TmFtZXx8by5uYW1lKStcIilcIjtyZXR1cm4gdC5kaXNwbGF5TmFtZT1lLHQuV3JhcHBlZENvbXBvbmVudD1vLGhvaXN0U3RhdGljcyh0LG8pO312YXIgdXNlQ29udGV4dD1SZWFjdC51c2VDb250ZXh0O2Z1bmN0aW9uIHVzZUhpc3RvcnkoKXtyZXR1cm4gdXNlQ29udGV4dChjb250ZXh0KS5oaXN0b3J5O31mdW5jdGlvbiB1c2VMb2NhdGlvbigpe3JldHVybiB1c2VDb250ZXh0KGNvbnRleHQpLmxvY2F0aW9uO31mdW5jdGlvbiB1c2VQYXJhbXMoKXt2YXIgdD11c2VDb250ZXh0KGNvbnRleHQpLm1hdGNoO3JldHVybiB0P3QucGFyYW1zOnt9O31mdW5jdGlvbiB1c2VSb3V0ZU1hdGNoKHQpe3JldHVybiB0P21hdGNoUGF0aCh1c2VMb2NhdGlvbigpLnBhdGhuYW1lLHQpOnVzZUNvbnRleHQoY29udGV4dCkubWF0Y2g7fWV4cG9ydHMuTWVtb3J5Um91dGVyPU1lbW9yeVJvdXRlcixleHBvcnRzLlByb21wdD1Qcm9tcHQsZXhwb3J0cy5SZWRpcmVjdD1SZWRpcmVjdCxleHBvcnRzLlJvdXRlPVJvdXRlLGV4cG9ydHMuUm91dGVyPVJvdXRlcixleHBvcnRzLlN0YXRpY1JvdXRlcj1TdGF0aWNSb3V0ZXIsZXhwb3J0cy5Td2l0Y2g9U3dpdGNoLGV4cG9ydHMuX19Sb3V0ZXJDb250ZXh0PWNvbnRleHQsZXhwb3J0cy5nZW5lcmF0ZVBhdGg9Z2VuZXJhdGVQYXRoLGV4cG9ydHMubWF0Y2hQYXRoPW1hdGNoUGF0aCxleHBvcnRzLnVzZUhpc3Rvcnk9dXNlSGlzdG9yeSxleHBvcnRzLnVzZUxvY2F0aW9uPXVzZUxvY2F0aW9uLGV4cG9ydHMudXNlUGFyYW1zPXVzZVBhcmFtcyxleHBvcnRzLnVzZVJvdXRlTWF0Y2g9dXNlUm91dGVNYXRjaCxleHBvcnRzLndpdGhSb3V0ZXI9d2l0aFJvdXRlcjsvLyMgc291cmNlTWFwcGluZ1VSTD1yZWFjdC1yb3V0ZXIubWluLmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvY2pzL3JlYWN0LXJvdXRlci5taW4uanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnOy8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9pZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7dmFyIFJlYWN0SXM9cmVxdWlyZSgncmVhY3QtaXMnKTsvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBkZXZlbG9wbWVudCBiZWhhdmlvci5cbi8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2RcbnZhciB0aHJvd09uRGlyZWN0QWNjZXNzPXRydWU7bW9kdWxlLmV4cG9ydHM9cmVxdWlyZSgnLi9mYWN0b3J5V2l0aFR5cGVDaGVja2VycycpKFJlYWN0SXMuaXNFbGVtZW50LHRocm93T25EaXJlY3RBY2Nlc3MpO31lbHNley8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IHByb2R1Y3Rpb24gYmVoYXZpb3IuXG4vLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kXG5tb2R1bGUuZXhwb3J0cz1yZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcycpKCk7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvfi9wcm9wLXR5cGVzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlY9PT0ncHJvZHVjdGlvbicpe21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vY2pzL3JlYWN0LWlzLnByb2R1Y3Rpb24ubWluLmpzJyk7fWVsc2V7bW9kdWxlLmV4cG9ydHM9cmVxdWlyZSgnLi9janMvcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanMnKTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWlzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIvKiogQGxpY2Vuc2UgUmVhY3QgdjE2LjkuMFxuICogcmVhY3QtaXMucHJvZHVjdGlvbi5taW4uanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqLyd1c2Ugc3RyaWN0Jzt2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGI9XCJmdW5jdGlvblwiPT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLmZvcixjPWI/U3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIik6NjAxMDMsZD1iP1N5bWJvbC5mb3IoXCJyZWFjdC5wb3J0YWxcIik6NjAxMDYsZT1iP1N5bWJvbC5mb3IoXCJyZWFjdC5mcmFnbWVudFwiKTo2MDEwNyxmPWI/U3ltYm9sLmZvcihcInJlYWN0LnN0cmljdF9tb2RlXCIpOjYwMTA4LGc9Yj9TeW1ib2wuZm9yKFwicmVhY3QucHJvZmlsZXJcIik6NjAxMTQsaD1iP1N5bWJvbC5mb3IoXCJyZWFjdC5wcm92aWRlclwiKTo2MDEwOSxrPWI/U3ltYm9sLmZvcihcInJlYWN0LmNvbnRleHRcIik6NjAxMTAsbD1iP1N5bWJvbC5mb3IoXCJyZWFjdC5hc3luY19tb2RlXCIpOjYwMTExLG09Yj9TeW1ib2wuZm9yKFwicmVhY3QuY29uY3VycmVudF9tb2RlXCIpOjYwMTExLG49Yj9TeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIik6NjAxMTIscD1iP1N5bWJvbC5mb3IoXCJyZWFjdC5zdXNwZW5zZVwiKTo2MDExMyxxPWI/U3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlX2xpc3RcIik6NjAxMjAscj1iP1N5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpOjYwMTE1LHQ9Yj9TeW1ib2wuZm9yKFwicmVhY3QubGF6eVwiKTo2MDExNix2PWI/U3ltYm9sLmZvcihcInJlYWN0LmZ1bmRhbWVudGFsXCIpOjYwMTE3LHc9Yj9TeW1ib2wuZm9yKFwicmVhY3QucmVzcG9uZGVyXCIpOjYwMTE4O2Z1bmN0aW9uIHgoYSl7aWYoXCJvYmplY3RcIj09PSh0eXBlb2YgYT09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mKGEpKSYmbnVsbCE9PWEpe3ZhciB1PWEuJCR0eXBlb2Y7c3dpdGNoKHUpe2Nhc2UgYzpzd2l0Y2goYT1hLnR5cGUsYSl7Y2FzZSBsOmNhc2UgbTpjYXNlIGU6Y2FzZSBnOmNhc2UgZjpjYXNlIHA6cmV0dXJuIGE7ZGVmYXVsdDpzd2l0Y2goYT1hJiZhLiQkdHlwZW9mLGEpe2Nhc2UgazpjYXNlIG46Y2FzZSBoOnJldHVybiBhO2RlZmF1bHQ6cmV0dXJuIHU7fX1jYXNlIHQ6Y2FzZSByOmNhc2UgZDpyZXR1cm4gdTt9fX1mdW5jdGlvbiB5KGEpe3JldHVybiB4KGEpPT09bTt9ZXhwb3J0cy50eXBlT2Y9eDtleHBvcnRzLkFzeW5jTW9kZT1sO2V4cG9ydHMuQ29uY3VycmVudE1vZGU9bTtleHBvcnRzLkNvbnRleHRDb25zdW1lcj1rO2V4cG9ydHMuQ29udGV4dFByb3ZpZGVyPWg7ZXhwb3J0cy5FbGVtZW50PWM7ZXhwb3J0cy5Gb3J3YXJkUmVmPW47ZXhwb3J0cy5GcmFnbWVudD1lO2V4cG9ydHMuTGF6eT10O2V4cG9ydHMuTWVtbz1yO2V4cG9ydHMuUG9ydGFsPWQ7ZXhwb3J0cy5Qcm9maWxlcj1nO2V4cG9ydHMuU3RyaWN0TW9kZT1mO2V4cG9ydHMuU3VzcGVuc2U9cDtleHBvcnRzLmlzVmFsaWRFbGVtZW50VHlwZT1mdW5jdGlvbihhKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhfHxhPT09ZXx8YT09PW18fGE9PT1nfHxhPT09Znx8YT09PXB8fGE9PT1xfHxcIm9iamVjdFwiPT09KHR5cGVvZiBhPT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YoYSkpJiZudWxsIT09YSYmKGEuJCR0eXBlb2Y9PT10fHxhLiQkdHlwZW9mPT09cnx8YS4kJHR5cGVvZj09PWh8fGEuJCR0eXBlb2Y9PT1rfHxhLiQkdHlwZW9mPT09bnx8YS4kJHR5cGVvZj09PXZ8fGEuJCR0eXBlb2Y9PT13KTt9O2V4cG9ydHMuaXNBc3luY01vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSl8fHgoYSk9PT1sO307ZXhwb3J0cy5pc0NvbmN1cnJlbnRNb2RlPXk7ZXhwb3J0cy5pc0NvbnRleHRDb25zdW1lcj1mdW5jdGlvbihhKXtyZXR1cm4geChhKT09PWs7fTtleHBvcnRzLmlzQ29udGV4dFByb3ZpZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpPT09aDt9O2V4cG9ydHMuaXNFbGVtZW50PWZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCI9PT0odHlwZW9mIGE9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZihhKSkmJm51bGwhPT1hJiZhLiQkdHlwZW9mPT09Yzt9O2V4cG9ydHMuaXNGb3J3YXJkUmVmPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpPT09bjt9O2V4cG9ydHMuaXNGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4geChhKT09PWU7fTtleHBvcnRzLmlzTGF6eT1mdW5jdGlvbihhKXtyZXR1cm4geChhKT09PXQ7fTtleHBvcnRzLmlzTWVtbz1mdW5jdGlvbihhKXtyZXR1cm4geChhKT09PXI7fTtleHBvcnRzLmlzUG9ydGFsPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpPT09ZDt9O2V4cG9ydHMuaXNQcm9maWxlcj1mdW5jdGlvbihhKXtyZXR1cm4geChhKT09PWc7fTtleHBvcnRzLmlzU3RyaWN0TW9kZT1mdW5jdGlvbihhKXtyZXR1cm4geChhKT09PWY7fTtleHBvcnRzLmlzU3VzcGVuc2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSk9PT1wO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWlzL2Nqcy9yZWFjdC1pcy5wcm9kdWN0aW9uLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi45LjBcbiAqIHJlYWN0LWlzLmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09XCJwcm9kdWN0aW9uXCIpeyhmdW5jdGlvbigpeyd1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnX19lc01vZHVsZScse3ZhbHVlOnRydWV9KTsvLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQtbGlrZSB0eXBlcy4gSWYgdGhlcmUgaXMgbm8gbmF0aXZlIFN5bWJvbFxuLy8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLlxudmFyIGhhc1N5bWJvbD10eXBlb2YgU3ltYm9sPT09J2Z1bmN0aW9uJyYmU3ltYm9sLmZvcjt2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50Jyk6MHhlYWM3O3ZhciBSRUFDVF9QT1JUQUxfVFlQRT1oYXNTeW1ib2w/U3ltYm9sLmZvcigncmVhY3QucG9ydGFsJyk6MHhlYWNhO3ZhciBSRUFDVF9GUkFHTUVOVF9UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5mcmFnbWVudCcpOjB4ZWFjYjt2YXIgUkVBQ1RfU1RSSUNUX01PREVfVFlQRT1oYXNTeW1ib2w/U3ltYm9sLmZvcigncmVhY3Quc3RyaWN0X21vZGUnKToweGVhY2M7dmFyIFJFQUNUX1BST0ZJTEVSX1RZUEU9aGFzU3ltYm9sP1N5bWJvbC5mb3IoJ3JlYWN0LnByb2ZpbGVyJyk6MHhlYWQyO3ZhciBSRUFDVF9QUk9WSURFUl9UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5wcm92aWRlcicpOjB4ZWFjZDt2YXIgUkVBQ1RfQ09OVEVYVF9UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5jb250ZXh0Jyk6MHhlYWNlOy8vIFRPRE86IFdlIGRvbid0IHVzZSBBc3luY01vZGUgb3IgQ29uY3VycmVudE1vZGUgYW55bW9yZS4gVGhleSB3ZXJlIHRlbXBvcmFyeVxuLy8gKHVuc3RhYmxlKSBBUElzIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZWQuIENhbiB3ZSByZW1vdmUgdGhlIHN5bWJvbHM/XG52YXIgUkVBQ1RfQVNZTkNfTU9ERV9UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5hc3luY19tb2RlJyk6MHhlYWNmO3ZhciBSRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRT1oYXNTeW1ib2w/U3ltYm9sLmZvcigncmVhY3QuY29uY3VycmVudF9tb2RlJyk6MHhlYWNmO3ZhciBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5mb3J3YXJkX3JlZicpOjB4ZWFkMDt2YXIgUkVBQ1RfU1VTUEVOU0VfVFlQRT1oYXNTeW1ib2w/U3ltYm9sLmZvcigncmVhY3Quc3VzcGVuc2UnKToweGVhZDE7dmFyIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRT1oYXNTeW1ib2w/U3ltYm9sLmZvcigncmVhY3Quc3VzcGVuc2VfbGlzdCcpOjB4ZWFkODt2YXIgUkVBQ1RfTUVNT19UWVBFPWhhc1N5bWJvbD9TeW1ib2wuZm9yKCdyZWFjdC5tZW1vJyk6MHhlYWQzO3ZhciBSRUFDVF9MQVpZX1RZUEU9aGFzU3ltYm9sP1N5bWJvbC5mb3IoJ3JlYWN0LmxhenknKToweGVhZDQ7dmFyIFJFQUNUX0ZVTkRBTUVOVEFMX1RZUEU9aGFzU3ltYm9sP1N5bWJvbC5mb3IoJ3JlYWN0LmZ1bmRhbWVudGFsJyk6MHhlYWQ1O3ZhciBSRUFDVF9SRVNQT05ERVJfVFlQRT1oYXNTeW1ib2w/U3ltYm9sLmZvcigncmVhY3QucmVzcG9uZGVyJyk6MHhlYWQ2O2Z1bmN0aW9uIGlzVmFsaWRFbGVtZW50VHlwZSh0eXBlKXtyZXR1cm4gdHlwZW9mIHR5cGU9PT0nc3RyaW5nJ3x8dHlwZW9mIHR5cGU9PT0nZnVuY3Rpb24nfHwvLyBOb3RlOiBpdHMgdHlwZW9mIG1pZ2h0IGJlIG90aGVyIHRoYW4gJ3N5bWJvbCcgb3IgJ251bWJlcicgaWYgaXQncyBhIHBvbHlmaWxsLlxudHlwZT09PVJFQUNUX0ZSQUdNRU5UX1RZUEV8fHR5cGU9PT1SRUFDVF9DT05DVVJSRU5UX01PREVfVFlQRXx8dHlwZT09PVJFQUNUX1BST0ZJTEVSX1RZUEV8fHR5cGU9PT1SRUFDVF9TVFJJQ1RfTU9ERV9UWVBFfHx0eXBlPT09UkVBQ1RfU1VTUEVOU0VfVFlQRXx8dHlwZT09PVJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRXx8KHR5cGVvZiB0eXBlPT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZih0eXBlKSk9PT0nb2JqZWN0JyYmdHlwZSE9PW51bGwmJih0eXBlLiQkdHlwZW9mPT09UkVBQ1RfTEFaWV9UWVBFfHx0eXBlLiQkdHlwZW9mPT09UkVBQ1RfTUVNT19UWVBFfHx0eXBlLiQkdHlwZW9mPT09UkVBQ1RfUFJPVklERVJfVFlQRXx8dHlwZS4kJHR5cGVvZj09PVJFQUNUX0NPTlRFWFRfVFlQRXx8dHlwZS4kJHR5cGVvZj09PVJFQUNUX0ZPUldBUkRfUkVGX1RZUEV8fHR5cGUuJCR0eXBlb2Y9PT1SRUFDVF9GVU5EQU1FTlRBTF9UWVBFfHx0eXBlLiQkdHlwZW9mPT09UkVBQ1RfUkVTUE9OREVSX1RZUEUpO30vKipcbiAqIEZvcmtlZCBmcm9tIGZianMvd2FybmluZzpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mYmpzL2Jsb2IvZTY2YmEyMGFkNWJlNDMzZWI1NDQyM2YyYjA5N2Q4MjkzMjRkOWRlNi9wYWNrYWdlcy9mYmpzL3NyYy9fX2ZvcmtzX18vd2FybmluZy5qc1xuICpcbiAqIE9ubHkgY2hhbmdlIGlzIHdlIHVzZSBjb25zb2xlLndhcm4gaW5zdGVhZCBvZiBjb25zb2xlLmVycm9yLFxuICogYW5kIGRvIG5vdGhpbmcgd2hlbiAnY29uc29sZScgaXMgbm90IHN1cHBvcnRlZC5cbiAqIFRoaXMgcmVhbGx5IHNpbXBsaWZpZXMgdGhlIGNvZGUuXG4gKiAtLS1cbiAqIFNpbWlsYXIgdG8gaW52YXJpYW50IGJ1dCBvbmx5IGxvZ3MgYSB3YXJuaW5nIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IG1ldC5cbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMgaW4gY3JpdGljYWxcbiAqIHBhdGhzLiBSZW1vdmluZyB0aGUgbG9nZ2luZyBjb2RlIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50cyB3aWxsIGtlZXAgdGhlXG4gKiBzYW1lIGxvZ2ljIGFuZCBmb2xsb3cgdGhlIHNhbWUgY29kZSBwYXRocy5cbiAqL3ZhciBsb3dQcmlvcml0eVdhcm5pbmc9ZnVuY3Rpb24gbG93UHJpb3JpdHlXYXJuaW5nKCl7fTt7dmFyIHByaW50V2FybmluZz1mdW5jdGlvbiBwcmludFdhcm5pbmcoZm9ybWF0KXtmb3IodmFyIF9sZW49YXJndW1lbnRzLmxlbmd0aCxhcmdzPUFycmF5KF9sZW4+MT9fbGVuLTE6MCksX2tleT0xO19rZXk8X2xlbjtfa2V5Kyspe2FyZ3NbX2tleS0xXT1hcmd1bWVudHNbX2tleV07fXZhciBhcmdJbmRleD0wO3ZhciBtZXNzYWdlPSdXYXJuaW5nOiAnK2Zvcm1hdC5yZXBsYWNlKC8lcy9nLGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107fSk7aWYodHlwZW9mIGNvbnNvbGUhPT0ndW5kZWZpbmVkJyl7Y29uc29sZS53YXJuKG1lc3NhZ2UpO310cnl7Ly8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4vLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbnRocm93IG5ldyBFcnJvcihtZXNzYWdlKTt9Y2F0Y2goeCl7fX07bG93UHJpb3JpdHlXYXJuaW5nPWZ1bmN0aW9uIGxvd1ByaW9yaXR5V2FybmluZyhjb25kaXRpb24sZm9ybWF0KXtpZihmb3JtYXQ9PT11bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcignYGxvd1ByaW9yaXR5V2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnKydtZXNzYWdlIGFyZ3VtZW50Jyk7fWlmKCFjb25kaXRpb24pe2Zvcih2YXIgX2xlbjI9YXJndW1lbnRzLmxlbmd0aCxhcmdzPUFycmF5KF9sZW4yPjI/X2xlbjItMjowKSxfa2V5Mj0yO19rZXkyPF9sZW4yO19rZXkyKyspe2FyZ3NbX2tleTItMl09YXJndW1lbnRzW19rZXkyXTt9cHJpbnRXYXJuaW5nLmFwcGx5KHVuZGVmaW5lZCxbZm9ybWF0XS5jb25jYXQoYXJncykpO319O312YXIgbG93UHJpb3JpdHlXYXJuaW5nJDE9bG93UHJpb3JpdHlXYXJuaW5nO2Z1bmN0aW9uIHR5cGVPZihvYmplY3Qpe2lmKCh0eXBlb2Ygb2JqZWN0PT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihvYmplY3QpKT09PSdvYmplY3QnJiZvYmplY3QhPT1udWxsKXt2YXIgJCR0eXBlb2Y9b2JqZWN0LiQkdHlwZW9mO3N3aXRjaCgkJHR5cGVvZil7Y2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6dmFyIHR5cGU9b2JqZWN0LnR5cGU7c3dpdGNoKHR5cGUpe2Nhc2UgUkVBQ1RfQVNZTkNfTU9ERV9UWVBFOmNhc2UgUkVBQ1RfQ09OQ1VSUkVOVF9NT0RFX1RZUEU6Y2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOmNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRTpjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6Y2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOnJldHVybiB0eXBlO2RlZmF1bHQ6dmFyICQkdHlwZW9mVHlwZT10eXBlJiZ0eXBlLiQkdHlwZW9mO3N3aXRjaCgkJHR5cGVvZlR5cGUpe2Nhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOmNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTpjYXNlIFJFQUNUX1BST1ZJREVSX1RZUEU6cmV0dXJuICQkdHlwZW9mVHlwZTtkZWZhdWx0OnJldHVybiAkJHR5cGVvZjt9fWNhc2UgUkVBQ1RfTEFaWV9UWVBFOmNhc2UgUkVBQ1RfTUVNT19UWVBFOmNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6cmV0dXJuICQkdHlwZW9mO319cmV0dXJuIHVuZGVmaW5lZDt9Ly8gQXN5bmNNb2RlIGlzIGRlcHJlY2F0ZWQgYWxvbmcgd2l0aCBpc0FzeW5jTW9kZVxudmFyIEFzeW5jTW9kZT1SRUFDVF9BU1lOQ19NT0RFX1RZUEU7dmFyIENvbmN1cnJlbnRNb2RlPVJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFO3ZhciBDb250ZXh0Q29uc3VtZXI9UkVBQ1RfQ09OVEVYVF9UWVBFO3ZhciBDb250ZXh0UHJvdmlkZXI9UkVBQ1RfUFJPVklERVJfVFlQRTt2YXIgRWxlbWVudD1SRUFDVF9FTEVNRU5UX1RZUEU7dmFyIEZvcndhcmRSZWY9UkVBQ1RfRk9SV0FSRF9SRUZfVFlQRTt2YXIgRnJhZ21lbnQ9UkVBQ1RfRlJBR01FTlRfVFlQRTt2YXIgTGF6eT1SRUFDVF9MQVpZX1RZUEU7dmFyIE1lbW89UkVBQ1RfTUVNT19UWVBFO3ZhciBQb3J0YWw9UkVBQ1RfUE9SVEFMX1RZUEU7dmFyIFByb2ZpbGVyPVJFQUNUX1BST0ZJTEVSX1RZUEU7dmFyIFN0cmljdE1vZGU9UkVBQ1RfU1RSSUNUX01PREVfVFlQRTt2YXIgU3VzcGVuc2U9UkVBQ1RfU1VTUEVOU0VfVFlQRTt2YXIgaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGU9ZmFsc2U7Ly8gQXN5bmNNb2RlIHNob3VsZCBiZSBkZXByZWNhdGVkXG5mdW5jdGlvbiBpc0FzeW5jTW9kZShvYmplY3Qpe3tpZighaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUpe2hhc1dhcm5lZEFib3V0RGVwcmVjYXRlZElzQXN5bmNNb2RlPXRydWU7bG93UHJpb3JpdHlXYXJuaW5nJDEoZmFsc2UsJ1RoZSBSZWFjdElzLmlzQXN5bmNNb2RlKCkgYWxpYXMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgJysnYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBSZWFjdCAxNysuIFVwZGF0ZSB5b3VyIGNvZGUgdG8gdXNlICcrJ1JlYWN0SXMuaXNDb25jdXJyZW50TW9kZSgpIGluc3RlYWQuIEl0IGhhcyB0aGUgZXhhY3Qgc2FtZSBBUEkuJyk7fX1yZXR1cm4gaXNDb25jdXJyZW50TW9kZShvYmplY3QpfHx0eXBlT2Yob2JqZWN0KT09PVJFQUNUX0FTWU5DX01PREVfVFlQRTt9ZnVuY3Rpb24gaXNDb25jdXJyZW50TW9kZShvYmplY3Qpe3JldHVybiB0eXBlT2Yob2JqZWN0KT09PVJFQUNUX0NPTkNVUlJFTlRfTU9ERV9UWVBFO31mdW5jdGlvbiBpc0NvbnRleHRDb25zdW1lcihvYmplY3Qpe3JldHVybiB0eXBlT2Yob2JqZWN0KT09PVJFQUNUX0NPTlRFWFRfVFlQRTt9ZnVuY3Rpb24gaXNDb250ZXh0UHJvdmlkZXIob2JqZWN0KXtyZXR1cm4gdHlwZU9mKG9iamVjdCk9PT1SRUFDVF9QUk9WSURFUl9UWVBFO31mdW5jdGlvbiBpc0VsZW1lbnQob2JqZWN0KXtyZXR1cm4odHlwZW9mIG9iamVjdD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2Yob2JqZWN0KSk9PT0nb2JqZWN0JyYmb2JqZWN0IT09bnVsbCYmb2JqZWN0LiQkdHlwZW9mPT09UkVBQ1RfRUxFTUVOVF9UWVBFO31mdW5jdGlvbiBpc0ZvcndhcmRSZWYob2JqZWN0KXtyZXR1cm4gdHlwZU9mKG9iamVjdCk9PT1SRUFDVF9GT1JXQVJEX1JFRl9UWVBFO31mdW5jdGlvbiBpc0ZyYWdtZW50KG9iamVjdCl7cmV0dXJuIHR5cGVPZihvYmplY3QpPT09UkVBQ1RfRlJBR01FTlRfVFlQRTt9ZnVuY3Rpb24gaXNMYXp5KG9iamVjdCl7cmV0dXJuIHR5cGVPZihvYmplY3QpPT09UkVBQ1RfTEFaWV9UWVBFO31mdW5jdGlvbiBpc01lbW8ob2JqZWN0KXtyZXR1cm4gdHlwZU9mKG9iamVjdCk9PT1SRUFDVF9NRU1PX1RZUEU7fWZ1bmN0aW9uIGlzUG9ydGFsKG9iamVjdCl7cmV0dXJuIHR5cGVPZihvYmplY3QpPT09UkVBQ1RfUE9SVEFMX1RZUEU7fWZ1bmN0aW9uIGlzUHJvZmlsZXIob2JqZWN0KXtyZXR1cm4gdHlwZU9mKG9iamVjdCk9PT1SRUFDVF9QUk9GSUxFUl9UWVBFO31mdW5jdGlvbiBpc1N0cmljdE1vZGUob2JqZWN0KXtyZXR1cm4gdHlwZU9mKG9iamVjdCk9PT1SRUFDVF9TVFJJQ1RfTU9ERV9UWVBFO31mdW5jdGlvbiBpc1N1c3BlbnNlKG9iamVjdCl7cmV0dXJuIHR5cGVPZihvYmplY3QpPT09UkVBQ1RfU1VTUEVOU0VfVFlQRTt9ZXhwb3J0cy50eXBlT2Y9dHlwZU9mO2V4cG9ydHMuQXN5bmNNb2RlPUFzeW5jTW9kZTtleHBvcnRzLkNvbmN1cnJlbnRNb2RlPUNvbmN1cnJlbnRNb2RlO2V4cG9ydHMuQ29udGV4dENvbnN1bWVyPUNvbnRleHRDb25zdW1lcjtleHBvcnRzLkNvbnRleHRQcm92aWRlcj1Db250ZXh0UHJvdmlkZXI7ZXhwb3J0cy5FbGVtZW50PUVsZW1lbnQ7ZXhwb3J0cy5Gb3J3YXJkUmVmPUZvcndhcmRSZWY7ZXhwb3J0cy5GcmFnbWVudD1GcmFnbWVudDtleHBvcnRzLkxhenk9TGF6eTtleHBvcnRzLk1lbW89TWVtbztleHBvcnRzLlBvcnRhbD1Qb3J0YWw7ZXhwb3J0cy5Qcm9maWxlcj1Qcm9maWxlcjtleHBvcnRzLlN0cmljdE1vZGU9U3RyaWN0TW9kZTtleHBvcnRzLlN1c3BlbnNlPVN1c3BlbnNlO2V4cG9ydHMuaXNWYWxpZEVsZW1lbnRUeXBlPWlzVmFsaWRFbGVtZW50VHlwZTtleHBvcnRzLmlzQXN5bmNNb2RlPWlzQXN5bmNNb2RlO2V4cG9ydHMuaXNDb25jdXJyZW50TW9kZT1pc0NvbmN1cnJlbnRNb2RlO2V4cG9ydHMuaXNDb250ZXh0Q29uc3VtZXI9aXNDb250ZXh0Q29uc3VtZXI7ZXhwb3J0cy5pc0NvbnRleHRQcm92aWRlcj1pc0NvbnRleHRQcm92aWRlcjtleHBvcnRzLmlzRWxlbWVudD1pc0VsZW1lbnQ7ZXhwb3J0cy5pc0ZvcndhcmRSZWY9aXNGb3J3YXJkUmVmO2V4cG9ydHMuaXNGcmFnbWVudD1pc0ZyYWdtZW50O2V4cG9ydHMuaXNMYXp5PWlzTGF6eTtleHBvcnRzLmlzTWVtbz1pc01lbW87ZXhwb3J0cy5pc1BvcnRhbD1pc1BvcnRhbDtleHBvcnRzLmlzUHJvZmlsZXI9aXNQcm9maWxlcjtleHBvcnRzLmlzU3RyaWN0TW9kZT1pc1N0cmljdE1vZGU7ZXhwb3J0cy5pc1N1c3BlbnNlPWlzU3VzcGVuc2U7fSkoKTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWlzL2Nqcy9yZWFjdC1pcy5kZXZlbG9wbWVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqLyd1c2Ugc3RyaWN0Jzt2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307dmFyIFJlYWN0SXM9cmVxdWlyZSgncmVhY3QtaXMnKTt2YXIgYXNzaWduPXJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTt2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQ9cmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTt2YXIgY2hlY2tQcm9wVHlwZXM9cmVxdWlyZSgnLi9jaGVja1Byb3BUeXBlcycpO3ZhciBoYXM9RnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO3ZhciBwcmludFdhcm5pbmc9ZnVuY3Rpb24gcHJpbnRXYXJuaW5nKCl7fTtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7cHJpbnRXYXJuaW5nPWZ1bmN0aW9uIHByaW50V2FybmluZyh0ZXh0KXt2YXIgbWVzc2FnZT0nV2FybmluZzogJyt0ZXh0O2lmKHR5cGVvZiBjb25zb2xlIT09J3VuZGVmaW5lZCcpe2NvbnNvbGUuZXJyb3IobWVzc2FnZSk7fXRyeXsvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG4vLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbi8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLlxudGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO31jYXRjaCh4KXt9fTt9ZnVuY3Rpb24gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbCgpe3JldHVybiBudWxsO31tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpc1ZhbGlkRWxlbWVudCx0aHJvd09uRGlyZWN0QWNjZXNzKXsvKiBnbG9iYWwgU3ltYm9sICovdmFyIElURVJBVE9SX1NZTUJPTD10eXBlb2YgU3ltYm9sPT09J2Z1bmN0aW9uJyYmU3ltYm9sLml0ZXJhdG9yO3ZhciBGQVVYX0lURVJBVE9SX1NZTUJPTD0nQEBpdGVyYXRvcic7Ly8gQmVmb3JlIFN5bWJvbCBzcGVjLlxuLyoqXG4gICAqIFJldHVybnMgdGhlIGl0ZXJhdG9yIG1ldGhvZCBmdW5jdGlvbiBjb250YWluZWQgb24gdGhlIGl0ZXJhYmxlIG9iamVjdC5cbiAgICpcbiAgICogQmUgc3VyZSB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGl0ZXJhYmxlIGFzIGNvbnRleHQ6XG4gICAqXG4gICAqICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obXlJdGVyYWJsZSk7XG4gICAqICAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgKiAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobXlJdGVyYWJsZSk7XG4gICAqICAgICAgIC4uLlxuICAgKiAgICAgfVxuICAgKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG1heWJlSXRlcmFibGVcbiAgICogQHJldHVybiB7P2Z1bmN0aW9ufVxuICAgKi9mdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpe3ZhciBpdGVyYXRvckZuPW1heWJlSXRlcmFibGUmJihJVEVSQVRPUl9TWU1CT0wmJm1heWJlSXRlcmFibGVbSVRFUkFUT1JfU1lNQk9MXXx8bWF5YmVJdGVyYWJsZVtGQVVYX0lURVJBVE9SX1NZTUJPTF0pO2lmKHR5cGVvZiBpdGVyYXRvckZuPT09J2Z1bmN0aW9uJyl7cmV0dXJuIGl0ZXJhdG9yRm47fX0vKipcbiAgICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIHRoYXQgYWxsb3cgZGVjbGFyYXRpb24gYW5kIHZhbGlkYXRpb24gb2YgcHJvcHMgdGhhdCBhcmVcbiAgICogc3VwcGxpZWQgdG8gUmVhY3QgY29tcG9uZW50cy4gRXhhbXBsZSB1c2FnZTpcbiAgICpcbiAgICogICB2YXIgUHJvcHMgPSByZXF1aXJlKCdSZWFjdFByb3BUeXBlcycpO1xuICAgKiAgIHZhciBNeUFydGljbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gICAqICAgICBwcm9wVHlwZXM6IHtcbiAgICogICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIHByb3AgbmFtZWQgXCJkZXNjcmlwdGlvblwiLlxuICAgKiAgICAgICBkZXNjcmlwdGlvbjogUHJvcHMuc3RyaW5nLFxuICAgKlxuICAgKiAgICAgICAvLyBBIHJlcXVpcmVkIGVudW0gcHJvcCBuYW1lZCBcImNhdGVnb3J5XCIuXG4gICAqICAgICAgIGNhdGVnb3J5OiBQcm9wcy5vbmVPZihbJ05ld3MnLCdQaG90b3MnXSkuaXNSZXF1aXJlZCxcbiAgICpcbiAgICogICAgICAgLy8gQSBwcm9wIG5hbWVkIFwiZGlhbG9nXCIgdGhhdCByZXF1aXJlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2cuXG4gICAqICAgICAgIGRpYWxvZzogUHJvcHMuaW5zdGFuY2VPZihEaWFsb2cpLmlzUmVxdWlyZWRcbiAgICogICAgIH0sXG4gICAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgeyAuLi4gfVxuICAgKiAgIH0pO1xuICAgKlxuICAgKiBBIG1vcmUgZm9ybWFsIHNwZWNpZmljYXRpb24gb2YgaG93IHRoZXNlIG1ldGhvZHMgYXJlIHVzZWQ6XG4gICAqXG4gICAqICAgdHlwZSA6PSBhcnJheXxib29sfGZ1bmN8b2JqZWN0fG51bWJlcnxzdHJpbmd8b25lT2YoWy4uLl0pfGluc3RhbmNlT2YoLi4uKVxuICAgKiAgIGRlY2wgOj0gUmVhY3RQcm9wVHlwZXMue3R5cGV9KC5pc1JlcXVpcmVkKT9cbiAgICpcbiAgICogRWFjaCBhbmQgZXZlcnkgZGVjbGFyYXRpb24gcHJvZHVjZXMgYSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIHNpZ25hdHVyZS4gVGhpc1xuICAgKiBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6XG4gICAqXG4gICAqICB2YXIgTXlMaW5rID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICBwcm9wVHlwZXM6IHtcbiAgICogICAgICAvLyBBbiBvcHRpb25hbCBzdHJpbmcgb3IgVVJJIHByb3AgbmFtZWQgXCJocmVmXCIuXG4gICAqICAgICAgaHJlZjogZnVuY3Rpb24ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gICAqICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgKiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPSBudWxsICYmIHR5cGVvZiBwcm9wVmFsdWUgIT09ICdzdHJpbmcnICYmXG4gICAqICAgICAgICAgICAgIShwcm9wVmFsdWUgaW5zdGFuY2VvZiBVUkkpKSB7XG4gICAqICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoXG4gICAqICAgICAgICAgICAgJ0V4cGVjdGVkIGEgc3RyaW5nIG9yIGFuIFVSSSBmb3IgJyArIHByb3BOYW1lICsgJyBpbiAnICtcbiAgICogICAgICAgICAgICBjb21wb25lbnROYW1lXG4gICAqICAgICAgICAgICk7XG4gICAqICAgICAgICB9XG4gICAqICAgICAgfVxuICAgKiAgICB9LFxuICAgKiAgICByZW5kZXI6IGZ1bmN0aW9uKCkgey4uLn1cbiAgICogIH0pO1xuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovdmFyIEFOT05ZTU9VUz0nPDxhbm9ueW1vdXM+Pic7Ly8gSW1wb3J0YW50IVxuLy8gS2VlcCB0aGlzIGxpc3QgaW4gc3luYyB3aXRoIHByb2R1Y3Rpb24gdmVyc2lvbiBpbiBgLi9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanNgLlxudmFyIFJlYWN0UHJvcFR5cGVzPXthcnJheTpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYXJyYXknKSxib29sOmNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdib29sZWFuJyksZnVuYzpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignZnVuY3Rpb24nKSxudW1iZXI6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ251bWJlcicpLG9iamVjdDpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignb2JqZWN0Jyksc3RyaW5nOmNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzdHJpbmcnKSxzeW1ib2w6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N5bWJvbCcpLGFueTpjcmVhdGVBbnlUeXBlQ2hlY2tlcigpLGFycmF5T2Y6Y3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyLGVsZW1lbnQ6Y3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCksZWxlbWVudFR5cGU6Y3JlYXRlRWxlbWVudFR5cGVUeXBlQ2hlY2tlcigpLGluc3RhbmNlT2Y6Y3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcixub2RlOmNyZWF0ZU5vZGVDaGVja2VyKCksb2JqZWN0T2Y6Y3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcixvbmVPZjpjcmVhdGVFbnVtVHlwZUNoZWNrZXIsb25lT2ZUeXBlOmNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIsc2hhcGU6Y3JlYXRlU2hhcGVUeXBlQ2hlY2tlcixleGFjdDpjcmVhdGVTdHJpY3RTaGFwZVR5cGVDaGVja2VyfTsvKipcbiAgICogaW5saW5lZCBPYmplY3QuaXMgcG9seWZpbGwgdG8gYXZvaWQgcmVxdWlyaW5nIGNvbnN1bWVycyBzaGlwIHRoZWlyIG93blxuICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICovLyplc2xpbnQtZGlzYWJsZSBuby1zZWxmLWNvbXBhcmUqL2Z1bmN0aW9uIGlzKHgseSl7Ly8gU2FtZVZhbHVlIGFsZ29yaXRobVxuaWYoeD09PXkpey8vIFN0ZXBzIDEtNSwgNy0xMFxuLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTBcbnJldHVybiB4IT09MHx8MS94PT09MS95O31lbHNley8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG5yZXR1cm4geCE9PXgmJnkhPT15O319Lyplc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSovLyoqXG4gICAqIFdlIHVzZSBhbiBFcnJvci1saWtlIG9iamVjdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBhcyBwZW9wbGUgbWF5IGNhbGxcbiAgICogUHJvcFR5cGVzIGRpcmVjdGx5IGFuZCBpbnNwZWN0IHRoZWlyIG91dHB1dC4gSG93ZXZlciwgd2UgZG9uJ3QgdXNlIHJlYWxcbiAgICogRXJyb3JzIGFueW1vcmUuIFdlIGRvbid0IGluc3BlY3QgdGhlaXIgc3RhY2sgYW55d2F5LCBhbmQgY3JlYXRpbmcgdGhlbVxuICAgKiBpcyBwcm9oaWJpdGl2ZWx5IGV4cGVuc2l2ZSBpZiB0aGV5IGFyZSBjcmVhdGVkIHRvbyBvZnRlbiwgc3VjaCBhcyB3aGF0XG4gICAqIGhhcHBlbnMgaW4gb25lT2ZUeXBlKCkgZm9yIGFueSB0eXBlIGJlZm9yZSB0aGUgb25lIHRoYXQgbWF0Y2hlZC5cbiAgICovZnVuY3Rpb24gUHJvcFR5cGVFcnJvcihtZXNzYWdlKXt0aGlzLm1lc3NhZ2U9bWVzc2FnZTt0aGlzLnN0YWNrPScnO30vLyBNYWtlIGBpbnN0YW5jZW9mIEVycm9yYCBzdGlsbCB3b3JrIGZvciByZXR1cm5lZCBlcnJvcnMuXG5Qcm9wVHlwZUVycm9yLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGU7ZnVuY3Rpb24gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpe2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXt2YXIgbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGU9e307dmFyIG1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50PTA7fWZ1bmN0aW9uIGNoZWNrVHlwZShpc1JlcXVpcmVkLHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lLHNlY3JldCl7Y29tcG9uZW50TmFtZT1jb21wb25lbnROYW1lfHxBTk9OWU1PVVM7cHJvcEZ1bGxOYW1lPXByb3BGdWxsTmFtZXx8cHJvcE5hbWU7aWYoc2VjcmV0IT09UmVhY3RQcm9wVHlwZXNTZWNyZXQpe2lmKHRocm93T25EaXJlY3RBY2Nlc3Mpey8vIE5ldyBiZWhhdmlvciBvbmx5IGZvciB1c2VycyBvZiBgcHJvcC10eXBlc2AgcGFja2FnZVxudmFyIGVycj1uZXcgRXJyb3IoJ0NhbGxpbmcgUHJvcFR5cGVzIHZhbGlkYXRvcnMgZGlyZWN0bHkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcrJ1VzZSBgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKClgIHRvIGNhbGwgdGhlbS4gJysnUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcycpO2Vyci5uYW1lPSdJbnZhcmlhbnQgVmlvbGF0aW9uJzt0aHJvdyBlcnI7fWVsc2UgaWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicmJnR5cGVvZiBjb25zb2xlIT09J3VuZGVmaW5lZCcpey8vIE9sZCBiZWhhdmlvciBmb3IgcGVvcGxlIHVzaW5nIFJlYWN0LlByb3BUeXBlc1xudmFyIGNhY2hlS2V5PWNvbXBvbmVudE5hbWUrJzonK3Byb3BOYW1lO2lmKCFtYW51YWxQcm9wVHlwZUNhbGxDYWNoZVtjYWNoZUtleV0mJi8vIEF2b2lkIHNwYW1taW5nIHRoZSBjb25zb2xlIGJlY2F1c2UgdGhleSBhcmUgb2Z0ZW4gbm90IGFjdGlvbmFibGUgZXhjZXB0IGZvciBsaWIgYXV0aG9yc1xubWFudWFsUHJvcFR5cGVXYXJuaW5nQ291bnQ8Myl7cHJpbnRXYXJuaW5nKCdZb3UgYXJlIG1hbnVhbGx5IGNhbGxpbmcgYSBSZWFjdC5Qcm9wVHlwZXMgdmFsaWRhdGlvbiAnKydmdW5jdGlvbiBmb3IgdGhlIGAnK3Byb3BGdWxsTmFtZSsnYCBwcm9wIG9uIGAnK2NvbXBvbmVudE5hbWUrJ2AuIFRoaXMgaXMgZGVwcmVjYXRlZCAnKydhbmQgd2lsbCB0aHJvdyBpbiB0aGUgc3RhbmRhbG9uZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJysnWW91IG1heSBiZSBzZWVpbmcgdGhpcyB3YXJuaW5nIGR1ZSB0byBhIHRoaXJkLXBhcnR5IFByb3BUeXBlcyAnKydsaWJyYXJ5LiBTZWUgaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLWRvbnQtY2FsbC1wcm9wdHlwZXMgJysnZm9yIGRldGFpbHMuJyk7bWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldPXRydWU7bWFudWFsUHJvcFR5cGVXYXJuaW5nQ291bnQrKzt9fX1pZihwcm9wc1twcm9wTmFtZV09PW51bGwpe2lmKGlzUmVxdWlyZWQpe2lmKHByb3BzW3Byb3BOYW1lXT09PW51bGwpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignVGhlICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2AgaXMgbWFya2VkIGFzIHJlcXVpcmVkICcrKCdpbiBgJytjb21wb25lbnROYW1lKydgLCBidXQgaXRzIHZhbHVlIGlzIGBudWxsYC4nKSk7fXJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignVGhlICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2AgaXMgbWFya2VkIGFzIHJlcXVpcmVkIGluICcrKCdgJytjb21wb25lbnROYW1lKydgLCBidXQgaXRzIHZhbHVlIGlzIGB1bmRlZmluZWRgLicpKTt9cmV0dXJuIG51bGw7fWVsc2V7cmV0dXJuIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKTt9fXZhciBjaGFpbmVkQ2hlY2tUeXBlPWNoZWNrVHlwZS5iaW5kKG51bGwsZmFsc2UpO2NoYWluZWRDaGVja1R5cGUuaXNSZXF1aXJlZD1jaGVja1R5cGUuYmluZChudWxsLHRydWUpO3JldHVybiBjaGFpbmVkQ2hlY2tUeXBlO31mdW5jdGlvbiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcihleHBlY3RlZFR5cGUpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lLHNlY3JldCl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGUhPT1leHBlY3RlZFR5cGUpey8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0J1xuLy8gY2hlY2ssIGJ1dCB3ZSBjYW4gb2ZmZXIgYSBtb3JlIHByZWNpc2UgZXJyb3IgbWVzc2FnZSBoZXJlIHJhdGhlciB0aGFuXG4vLyAnb2YgdHlwZSBgb2JqZWN0YCcuXG52YXIgcHJlY2lzZVR5cGU9Z2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKTtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlICcrKCdgJytwcmVjaXNlVHlwZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCAnKSsoJ2AnK2V4cGVjdGVkVHlwZSsnYC4nKSk7fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVBbnlUeXBlQ2hlY2tlcigpe3JldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsKTt9ZnVuY3Rpb24gY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7aWYodHlwZW9mIHR5cGVDaGVja2VyIT09J2Z1bmN0aW9uJyl7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdQcm9wZXJ0eSBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgY29tcG9uZW50IGAnK2NvbXBvbmVudE5hbWUrJ2AgaGFzIGludmFsaWQgUHJvcFR5cGUgbm90YXRpb24gaW5zaWRlIGFycmF5T2YuJyk7fXZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO2lmKCFBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpe3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK3Byb3BUeXBlKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIGFuIGFycmF5LicpKTt9Zm9yKHZhciBpPTA7aTxwcm9wVmFsdWUubGVuZ3RoO2krKyl7dmFyIGVycm9yPXR5cGVDaGVja2VyKHByb3BWYWx1ZSxpLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKydbJytpKyddJyxSZWFjdFByb3BUeXBlc1NlY3JldCk7aWYoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcil7cmV0dXJuIGVycm9yO319cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXt2YXIgcHJvcFZhbHVlPXByb3BzW3Byb3BOYW1lXTtpZighaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSl7dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSAnKygnYCcrcHJvcFR5cGUrJ2Agc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYSBzaW5nbGUgUmVhY3RFbGVtZW50LicpKTt9cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRUeXBlVHlwZUNoZWNrZXIoKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07aWYoIVJlYWN0SXMuaXNWYWxpZEVsZW1lbnRUeXBlKHByb3BWYWx1ZSkpe3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK3Byb3BUeXBlKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudCB0eXBlLicpKTt9cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIoZXhwZWN0ZWRDbGFzcyl7ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe2lmKCEocHJvcHNbcHJvcE5hbWVdaW5zdGFuY2VvZiBleHBlY3RlZENsYXNzKSl7dmFyIGV4cGVjdGVkQ2xhc3NOYW1lPWV4cGVjdGVkQ2xhc3MubmFtZXx8QU5PTllNT1VTO3ZhciBhY3R1YWxDbGFzc05hbWU9Z2V0Q2xhc3NOYW1lKHByb3BzW3Byb3BOYW1lXSk7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSAnKygnYCcrYWN0dWFsQ2xhc3NOYW1lKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkICcpKygnaW5zdGFuY2Ugb2YgYCcrZXhwZWN0ZWRDbGFzc05hbWUrJ2AuJykpO31yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlRW51bVR5cGVDaGVja2VyKGV4cGVjdGVkVmFsdWVzKXtpZighQXJyYXkuaXNBcnJheShleHBlY3RlZFZhbHVlcykpe2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3ByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudHMgc3VwcGxpZWQgdG8gb25lT2YsIGV4cGVjdGVkIGFuIGFycmF5LCBnb3QgJythcmd1bWVudHMubGVuZ3RoKycgYXJndW1lbnRzLiAnKydBIGNvbW1vbiBtaXN0YWtlIGlzIHRvIHdyaXRlIG9uZU9mKHgsIHksIHopIGluc3RlYWQgb2Ygb25lT2YoW3gsIHksIHpdKS4nKTt9ZWxzZXtwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2YsIGV4cGVjdGVkIGFuIGFycmF5LicpO319cmV0dXJuIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGw7fWZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXt2YXIgcHJvcFZhbHVlPXByb3BzW3Byb3BOYW1lXTtmb3IodmFyIGk9MDtpPGV4cGVjdGVkVmFsdWVzLmxlbmd0aDtpKyspe2lmKGlzKHByb3BWYWx1ZSxleHBlY3RlZFZhbHVlc1tpXSkpe3JldHVybiBudWxsO319dmFyIHZhbHVlc1N0cmluZz1KU09OLnN0cmluZ2lmeShleHBlY3RlZFZhbHVlcyxmdW5jdGlvbiByZXBsYWNlcihrZXksdmFsdWUpe3ZhciB0eXBlPWdldFByZWNpc2VUeXBlKHZhbHVlKTtpZih0eXBlPT09J3N5bWJvbCcpe3JldHVybiBTdHJpbmcodmFsdWUpO31yZXR1cm4gdmFsdWU7fSk7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdmFsdWUgYCcrU3RyaW5nKHByb3BWYWx1ZSkrJ2AgJysoJ3N1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIG9uZSBvZiAnK3ZhbHVlc1N0cmluZysnLicpKTt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcil7ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe2lmKHR5cGVvZiB0eXBlQ2hlY2tlciE9PSdmdW5jdGlvbicpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIGNvbXBvbmVudCBgJytjb21wb25lbnROYW1lKydgIGhhcyBpbnZhbGlkIFByb3BUeXBlIG5vdGF0aW9uIGluc2lkZSBvYmplY3RPZi4nKTt9dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGUhPT0nb2JqZWN0Jyl7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSAnKygnYCcrcHJvcFR5cGUrJ2Agc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYW4gb2JqZWN0LicpKTt9Zm9yKHZhciBrZXkgaW4gcHJvcFZhbHVlKXtpZihoYXMocHJvcFZhbHVlLGtleSkpe3ZhciBlcnJvcj10eXBlQ2hlY2tlcihwcm9wVmFsdWUsa2V5LGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKycuJytrZXksUmVhY3RQcm9wVHlwZXNTZWNyZXQpO2lmKGVycm9yIGluc3RhbmNlb2YgRXJyb3Ipe3JldHVybiBlcnJvcjt9fX1yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKXtpZighQXJyYXkuaXNBcnJheShhcnJheU9mVHlwZUNoZWNrZXJzKSl7cHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbic/cHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJyk6dm9pZCAwO3JldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsO31mb3IodmFyIGk9MDtpPGFycmF5T2ZUeXBlQ2hlY2tlcnMubGVuZ3RoO2krKyl7dmFyIGNoZWNrZXI9YXJyYXlPZlR5cGVDaGVja2Vyc1tpXTtpZih0eXBlb2YgY2hlY2tlciE9PSdmdW5jdGlvbicpe3ByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUuIEV4cGVjdGVkIGFuIGFycmF5IG9mIGNoZWNrIGZ1bmN0aW9ucywgYnV0ICcrJ3JlY2VpdmVkICcrZ2V0UG9zdGZpeEZvclR5cGVXYXJuaW5nKGNoZWNrZXIpKycgYXQgaW5kZXggJytpKycuJyk7cmV0dXJuIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGw7fX1mdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7Zm9yKHZhciBpPTA7aTxhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDtpKyspe3ZhciBjaGVja2VyPWFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07aWYoY2hlY2tlcihwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxSZWFjdFByb3BUeXBlc1NlY3JldCk9PW51bGwpe3JldHVybiBudWxsO319cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agc3VwcGxpZWQgdG8gJysoJ2AnK2NvbXBvbmVudE5hbWUrJ2AuJykpO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVOb2RlQ2hlY2tlcigpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXtpZighaXNOb2RlKHByb3BzW3Byb3BOYW1lXSkpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIHN1cHBsaWVkIHRvICcrKCdgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBhIFJlYWN0Tm9kZS4nKSk7fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXt2YXIgcHJvcFZhbHVlPXByb3BzW3Byb3BOYW1lXTt2YXIgcHJvcFR5cGU9Z2V0UHJvcFR5cGUocHJvcFZhbHVlKTtpZihwcm9wVHlwZSE9PSdvYmplY3QnKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlIGAnK3Byb3BUeXBlKydgICcrKCdzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7fWZvcih2YXIga2V5IGluIHNoYXBlVHlwZXMpe3ZhciBjaGVja2VyPXNoYXBlVHlwZXNba2V5XTtpZighY2hlY2tlcil7Y29udGludWU7fXZhciBlcnJvcj1jaGVja2VyKHByb3BWYWx1ZSxrZXksY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUrJy4nK2tleSxSZWFjdFByb3BUeXBlc1NlY3JldCk7aWYoZXJyb3Ipe3JldHVybiBlcnJvcjt9fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVTdHJpY3RTaGFwZVR5cGVDaGVja2VyKHNoYXBlVHlwZXMpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXt2YXIgcHJvcFZhbHVlPXByb3BzW3Byb3BOYW1lXTt2YXIgcHJvcFR5cGU9Z2V0UHJvcFR5cGUocHJvcFZhbHVlKTtpZihwcm9wVHlwZSE9PSdvYmplY3QnKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlIGAnK3Byb3BUeXBlKydgICcrKCdzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7fS8vIFdlIG5lZWQgdG8gY2hlY2sgYWxsIGtleXMgaW4gY2FzZSBzb21lIGFyZSByZXF1aXJlZCBidXQgbWlzc2luZyBmcm9tXG4vLyBwcm9wcy5cbnZhciBhbGxLZXlzPWFzc2lnbih7fSxwcm9wc1twcm9wTmFtZV0sc2hhcGVUeXBlcyk7Zm9yKHZhciBrZXkgaW4gYWxsS2V5cyl7dmFyIGNoZWNrZXI9c2hhcGVUeXBlc1trZXldO2lmKCFjaGVja2VyKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBrZXkgYCcra2V5KydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AuJysnXFxuQmFkIG9iamVjdDogJytKU09OLnN0cmluZ2lmeShwcm9wc1twcm9wTmFtZV0sbnVsbCwnICAnKSsnXFxuVmFsaWQga2V5czogJytKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyhzaGFwZVR5cGVzKSxudWxsLCcgICcpKTt9dmFyIGVycm9yPWNoZWNrZXIocHJvcFZhbHVlLGtleSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSsnLicra2V5LFJlYWN0UHJvcFR5cGVzU2VjcmV0KTtpZihlcnJvcil7cmV0dXJuIGVycm9yO319cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGlzTm9kZShwcm9wVmFsdWUpe3N3aXRjaCh0eXBlb2YgcHJvcFZhbHVlPT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihwcm9wVmFsdWUpKXtjYXNlJ251bWJlcic6Y2FzZSdzdHJpbmcnOmNhc2UndW5kZWZpbmVkJzpyZXR1cm4gdHJ1ZTtjYXNlJ2Jvb2xlYW4nOnJldHVybiFwcm9wVmFsdWU7Y2FzZSdvYmplY3QnOmlmKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSl7cmV0dXJuIHByb3BWYWx1ZS5ldmVyeShpc05vZGUpO31pZihwcm9wVmFsdWU9PT1udWxsfHxpc1ZhbGlkRWxlbWVudChwcm9wVmFsdWUpKXtyZXR1cm4gdHJ1ZTt9dmFyIGl0ZXJhdG9yRm49Z2V0SXRlcmF0b3JGbihwcm9wVmFsdWUpO2lmKGl0ZXJhdG9yRm4pe3ZhciBpdGVyYXRvcj1pdGVyYXRvckZuLmNhbGwocHJvcFZhbHVlKTt2YXIgc3RlcDtpZihpdGVyYXRvckZuIT09cHJvcFZhbHVlLmVudHJpZXMpe3doaWxlKCEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmUpe2lmKCFpc05vZGUoc3RlcC52YWx1ZSkpe3JldHVybiBmYWxzZTt9fX1lbHNley8vIEl0ZXJhdG9yIHdpbGwgcHJvdmlkZSBlbnRyeSBbayx2XSB0dXBsZXMgcmF0aGVyIHRoYW4gdmFsdWVzLlxud2hpbGUoIShzdGVwPWl0ZXJhdG9yLm5leHQoKSkuZG9uZSl7dmFyIGVudHJ5PXN0ZXAudmFsdWU7aWYoZW50cnkpe2lmKCFpc05vZGUoZW50cnlbMV0pKXtyZXR1cm4gZmFsc2U7fX19fX1lbHNle3JldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7ZGVmYXVsdDpyZXR1cm4gZmFsc2U7fX1mdW5jdGlvbiBpc1N5bWJvbChwcm9wVHlwZSxwcm9wVmFsdWUpey8vIE5hdGl2ZSBTeW1ib2wuXG5pZihwcm9wVHlwZT09PSdzeW1ib2wnKXtyZXR1cm4gdHJ1ZTt9Ly8gZmFsc3kgdmFsdWUgY2FuJ3QgYmUgYSBTeW1ib2xcbmlmKCFwcm9wVmFsdWUpe3JldHVybiBmYWxzZTt9Ly8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXSA9PT0gJ1N5bWJvbCdcbmlmKHByb3BWYWx1ZVsnQEB0b1N0cmluZ1RhZyddPT09J1N5bWJvbCcpe3JldHVybiB0cnVlO30vLyBGYWxsYmFjayBmb3Igbm9uLXNwZWMgY29tcGxpYW50IFN5bWJvbHMgd2hpY2ggYXJlIHBvbHlmaWxsZWQuXG5pZih0eXBlb2YgU3ltYm9sPT09J2Z1bmN0aW9uJyYmcHJvcFZhbHVlIGluc3RhbmNlb2YgU3ltYm9sKXtyZXR1cm4gdHJ1ZTt9cmV0dXJuIGZhbHNlO30vLyBFcXVpdmFsZW50IG9mIGB0eXBlb2ZgIGJ1dCB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGFycmF5IGFuZCByZWdleHAuXG5mdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpe3ZhciBwcm9wVHlwZT10eXBlb2YgcHJvcFZhbHVlPT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihwcm9wVmFsdWUpO2lmKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSl7cmV0dXJuJ2FycmF5Jzt9aWYocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKXsvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuXG4vLyAnb2JqZWN0JyBmb3IgdHlwZW9mIGEgUmVnRXhwLiBXZSdsbCBub3JtYWxpemUgdGhpcyBoZXJlIHNvIHRoYXQgL2JsYS9cbi8vIHBhc3NlcyBQcm9wVHlwZXMub2JqZWN0LlxucmV0dXJuJ29iamVjdCc7fWlmKGlzU3ltYm9sKHByb3BUeXBlLHByb3BWYWx1ZSkpe3JldHVybidzeW1ib2wnO31yZXR1cm4gcHJvcFR5cGU7fS8vIFRoaXMgaGFuZGxlcyBtb3JlIHR5cGVzIHRoYW4gYGdldFByb3BUeXBlYC4gT25seSB1c2VkIGZvciBlcnJvciBtZXNzYWdlcy5cbi8vIFNlZSBgY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXJgLlxuZnVuY3Rpb24gZ2V0UHJlY2lzZVR5cGUocHJvcFZhbHVlKXtpZih0eXBlb2YgcHJvcFZhbHVlPT09J3VuZGVmaW5lZCd8fHByb3BWYWx1ZT09PW51bGwpe3JldHVybicnK3Byb3BWYWx1ZTt9dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGU9PT0nb2JqZWN0Jyl7aWYocHJvcFZhbHVlIGluc3RhbmNlb2YgRGF0ZSl7cmV0dXJuJ2RhdGUnO31lbHNlIGlmKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCl7cmV0dXJuJ3JlZ2V4cCc7fX1yZXR1cm4gcHJvcFR5cGU7fS8vIFJldHVybnMgYSBzdHJpbmcgdGhhdCBpcyBwb3N0Zml4ZWQgdG8gYSB3YXJuaW5nIGFib3V0IGFuIGludmFsaWQgdHlwZS5cbi8vIEZvciBleGFtcGxlLCBcInVuZGVmaW5lZFwiIG9yIFwib2YgdHlwZSBhcnJheVwiXG5mdW5jdGlvbiBnZXRQb3N0Zml4Rm9yVHlwZVdhcm5pbmcodmFsdWUpe3ZhciB0eXBlPWdldFByZWNpc2VUeXBlKHZhbHVlKTtzd2l0Y2godHlwZSl7Y2FzZSdhcnJheSc6Y2FzZSdvYmplY3QnOnJldHVybidhbiAnK3R5cGU7Y2FzZSdib29sZWFuJzpjYXNlJ2RhdGUnOmNhc2UncmVnZXhwJzpyZXR1cm4nYSAnK3R5cGU7ZGVmYXVsdDpyZXR1cm4gdHlwZTt9fS8vIFJldHVybnMgY2xhc3MgbmFtZSBvZiB0aGUgb2JqZWN0LCBpZiBhbnkuXG5mdW5jdGlvbiBnZXRDbGFzc05hbWUocHJvcFZhbHVlKXtpZighcHJvcFZhbHVlLmNvbnN0cnVjdG9yfHwhcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpe3JldHVybiBBTk9OWU1PVVM7fXJldHVybiBwcm9wVmFsdWUuY29uc3RydWN0b3IubmFtZTt9UmVhY3RQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXM9Y2hlY2tQcm9wVHlwZXM7UmVhY3RQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGU9Y2hlY2tQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGU7UmVhY3RQcm9wVHlwZXMuUHJvcFR5cGVzPVJlYWN0UHJvcFR5cGVzO3JldHVybiBSZWFjdFByb3BUeXBlczt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvfi9wcm9wLXR5cGVzL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIvKlxub2JqZWN0LWFzc2lnblxuKGMpIFNpbmRyZSBTb3JodXNcbkBsaWNlbnNlIE1JVFxuKi8ndXNlIHN0cmljdCc7LyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi92YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIGhhc093blByb3BlcnR5PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIHByb3BJc0VudW1lcmFibGU9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtmdW5jdGlvbiB0b09iamVjdCh2YWwpe2lmKHZhbD09PW51bGx8fHZhbD09PXVuZGVmaW5lZCl7dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTt9cmV0dXJuIE9iamVjdCh2YWwpO31mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKXt0cnl7aWYoIU9iamVjdC5hc3NpZ24pe3JldHVybiBmYWxzZTt9Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxuLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxudmFyIHRlc3QxPW5ldyBTdHJpbmcoJ2FiYycpOy8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LXdyYXBwZXJzXG50ZXN0MVs1XT0nZGUnO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXT09PSc1Jyl7cmV0dXJuIGZhbHNlO30vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG52YXIgdGVzdDI9e307Zm9yKHZhciBpPTA7aTwxMDtpKyspe3Rlc3QyWydfJytTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXT1pO312YXIgb3JkZXIyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIHRlc3QyW25dO30pO2lmKG9yZGVyMi5qb2luKCcnKSE9PScwMTIzNDU2Nzg5Jyl7cmV0dXJuIGZhbHNlO30vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG52YXIgdGVzdDM9e307J2FiY2RlZmdoaWprbG1ub3BxcnN0Jy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbihsZXR0ZXIpe3Rlc3QzW2xldHRlcl09bGV0dGVyO30pO2lmKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sdGVzdDMpKS5qb2luKCcnKSE9PSdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpe3JldHVybiBmYWxzZTt9cmV0dXJuIHRydWU7fWNhdGNoKGVycil7Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cbnJldHVybiBmYWxzZTt9fW1vZHVsZS5leHBvcnRzPXNob3VsZFVzZU5hdGl2ZSgpP09iamVjdC5hc3NpZ246ZnVuY3Rpb24odGFyZ2V0LHNvdXJjZSl7dmFyIGZyb207dmFyIHRvPXRvT2JqZWN0KHRhcmdldCk7dmFyIHN5bWJvbHM7Zm9yKHZhciBzPTE7czxhcmd1bWVudHMubGVuZ3RoO3MrKyl7ZnJvbT1PYmplY3QoYXJndW1lbnRzW3NdKTtmb3IodmFyIGtleSBpbiBmcm9tKXtpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sa2V5KSl7dG9ba2V5XT1mcm9tW2tleV07fX1pZihnZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3N5bWJvbHM9Z2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO2Zvcih2YXIgaT0wO2k8c3ltYm9scy5sZW5ndGg7aSsrKXtpZihwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSxzeW1ib2xzW2ldKSl7dG9bc3ltYm9sc1tpXV09ZnJvbVtzeW1ib2xzW2ldXTt9fX19cmV0dXJuIHRvO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L29iamVjdC1hc3NpZ24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0PSdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCc7bW9kdWxlLmV4cG9ydHM9UmVhY3RQcm9wVHlwZXNTZWNyZXQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9+L3Byb3AtdHlwZXMvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovJ3VzZSBzdHJpY3QnO3ZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo7fTt2YXIgcHJpbnRXYXJuaW5nPWZ1bmN0aW9uIHByaW50V2FybmluZygpe307aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe3ZhciBSZWFjdFByb3BUeXBlc1NlY3JldD1yZXF1aXJlKCcuL2xpYi9SZWFjdFByb3BUeXBlc1NlY3JldCcpO3ZhciBsb2dnZWRUeXBlRmFpbHVyZXM9e307dmFyIGhhcz1GdW5jdGlvbi5jYWxsLmJpbmQoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7cHJpbnRXYXJuaW5nPWZ1bmN0aW9uIHByaW50V2FybmluZyh0ZXh0KXt2YXIgbWVzc2FnZT0nV2FybmluZzogJyt0ZXh0O2lmKHR5cGVvZiBjb25zb2xlIT09J3VuZGVmaW5lZCcpe2NvbnNvbGUuZXJyb3IobWVzc2FnZSk7fXRyeXsvLyAtLS0gV2VsY29tZSB0byBkZWJ1Z2dpbmcgUmVhY3QgLS0tXG4vLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbi8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLlxudGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO31jYXRjaCh4KXt9fTt9LyoqXG4gKiBBc3NlcnQgdGhhdCB0aGUgdmFsdWVzIG1hdGNoIHdpdGggdGhlIHR5cGUgc3BlY3MuXG4gKiBFcnJvciBtZXNzYWdlcyBhcmUgbWVtb3JpemVkIGFuZCB3aWxsIG9ubHkgYmUgc2hvd24gb25jZS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gdHlwZVNwZWNzIE1hcCBvZiBuYW1lIHRvIGEgUmVhY3RQcm9wVHlwZVxuICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcyBSdW50aW1lIHZhbHVlcyB0aGF0IG5lZWQgdG8gYmUgdHlwZS1jaGVja2VkXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gZS5nLiBcInByb3BcIiwgXCJjb250ZXh0XCIsIFwiY2hpbGQgY29udGV4dFwiXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuICogQHBhcmFtIHs/RnVuY3Rpb259IGdldFN0YWNrIFJldHVybnMgdGhlIGNvbXBvbmVudCBzdGFjay5cbiAqIEBwcml2YXRlXG4gKi9mdW5jdGlvbiBjaGVja1Byb3BUeXBlcyh0eXBlU3BlY3MsdmFsdWVzLGxvY2F0aW9uLGNvbXBvbmVudE5hbWUsZ2V0U3RhY2spe2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXtmb3IodmFyIHR5cGVTcGVjTmFtZSBpbiB0eXBlU3BlY3Mpe2lmKGhhcyh0eXBlU3BlY3MsdHlwZVNwZWNOYW1lKSl7dmFyIGVycm9yOy8vIFByb3AgdHlwZSB2YWxpZGF0aW9uIG1heSB0aHJvdy4gSW4gY2FzZSB0aGV5IGRvLCB3ZSBkb24ndCB3YW50IHRvXG4vLyBmYWlsIHRoZSByZW5kZXIgcGhhc2Ugd2hlcmUgaXQgZGlkbid0IGZhaWwgYmVmb3JlLiBTbyB3ZSBsb2cgaXQuXG4vLyBBZnRlciB0aGVzZSBoYXZlIGJlZW4gY2xlYW5lZCB1cCwgd2UnbGwgbGV0IHRoZW0gdGhyb3cuXG50cnl7Ly8gVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFuIGludmFyaWFudCB0aGF0IGdldHMgY2F1Z2h0LiBJdCdzIHRoZSBzYW1lXG4vLyBiZWhhdmlvciBhcyB3aXRob3V0IHRoaXMgc3RhdGVtZW50IGV4Y2VwdCB3aXRoIGEgYmV0dGVyIG1lc3NhZ2UuXG5pZih0eXBlb2YgdHlwZVNwZWNzW3R5cGVTcGVjTmFtZV0hPT0nZnVuY3Rpb24nKXt2YXIgZXJyPUVycm9yKChjb21wb25lbnROYW1lfHwnUmVhY3QgY2xhc3MnKSsnOiAnK2xvY2F0aW9uKycgdHlwZSBgJyt0eXBlU3BlY05hbWUrJ2AgaXMgaW52YWxpZDsgJysnaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5IGZyb20gdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLCBidXQgcmVjZWl2ZWQgYCcrX3R5cGVvZih0eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSkrJ2AuJyk7ZXJyLm5hbWU9J0ludmFyaWFudCBWaW9sYXRpb24nO3Rocm93IGVycjt9ZXJyb3I9dHlwZVNwZWNzW3R5cGVTcGVjTmFtZV0odmFsdWVzLHR5cGVTcGVjTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLG51bGwsUmVhY3RQcm9wVHlwZXNTZWNyZXQpO31jYXRjaChleCl7ZXJyb3I9ZXg7fWlmKGVycm9yJiYhKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKXtwcmludFdhcm5pbmcoKGNvbXBvbmVudE5hbWV8fCdSZWFjdCBjbGFzcycpKyc6IHR5cGUgc3BlY2lmaWNhdGlvbiBvZiAnK2xvY2F0aW9uKycgYCcrdHlwZVNwZWNOYW1lKydgIGlzIGludmFsaWQ7IHRoZSB0eXBlIGNoZWNrZXIgJysnZnVuY3Rpb24gbXVzdCByZXR1cm4gYG51bGxgIG9yIGFuIGBFcnJvcmAgYnV0IHJldHVybmVkIGEgJysodHlwZW9mIGVycm9yPT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihlcnJvcikpKycuICcrJ1lvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgdHlwZSBjaGVja2VyICcrJ2NyZWF0b3IgKGFycmF5T2YsIGluc3RhbmNlT2YsIG9iamVjdE9mLCBvbmVPZiwgb25lT2ZUeXBlLCBhbmQgJysnc2hhcGUgYWxsIHJlcXVpcmUgYW4gYXJndW1lbnQpLicpO31pZihlcnJvciBpbnN0YW5jZW9mIEVycm9yJiYhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSl7Ly8gT25seSBtb25pdG9yIHRoaXMgZmFpbHVyZSBvbmNlIGJlY2F1c2UgdGhlcmUgdGVuZHMgdG8gYmUgYSBsb3Qgb2YgdGhlXG4vLyBzYW1lIGVycm9yLlxubG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdPXRydWU7dmFyIHN0YWNrPWdldFN0YWNrP2dldFN0YWNrKCk6Jyc7cHJpbnRXYXJuaW5nKCdGYWlsZWQgJytsb2NhdGlvbisnIHR5cGU6ICcrZXJyb3IubWVzc2FnZSsoc3RhY2shPW51bGw/c3RhY2s6JycpKTt9fX19fS8qKlxuICogUmVzZXRzIHdhcm5pbmcgY2FjaGUgd2hlbiB0ZXN0aW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKi9jaGVja1Byb3BUeXBlcy5yZXNldFdhcm5pbmdDYWNoZT1mdW5jdGlvbigpe2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXtsb2dnZWRUeXBlRmFpbHVyZXM9e307fX07bW9kdWxlLmV4cG9ydHM9Y2hlY2tQcm9wVHlwZXM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9+L3Byb3AtdHlwZXMvY2hlY2tQcm9wVHlwZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0PXJlcXVpcmUoJy4vbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0Jyk7ZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpe31mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0KCl7fWVtcHR5RnVuY3Rpb25XaXRoUmVzZXQucmVzZXRXYXJuaW5nQ2FjaGU9ZW1wdHlGdW5jdGlvbjttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbigpe2Z1bmN0aW9uIHNoaW0ocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUsc2VjcmV0KXtpZihzZWNyZXQ9PT1SZWFjdFByb3BUeXBlc1NlY3JldCl7Ly8gSXQgaXMgc3RpbGwgc2FmZSB3aGVuIGNhbGxlZCBmcm9tIFJlYWN0LlxucmV0dXJuO312YXIgZXJyPW5ldyBFcnJvcignQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gJysnVXNlIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpIHRvIGNhbGwgdGhlbS4gJysnUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcycpO2Vyci5uYW1lPSdJbnZhcmlhbnQgVmlvbGF0aW9uJzt0aHJvdyBlcnI7fTtzaGltLmlzUmVxdWlyZWQ9c2hpbTtmdW5jdGlvbiBnZXRTaGltKCl7cmV0dXJuIHNoaW07fTsvLyBJbXBvcnRhbnQhXG4vLyBLZWVwIHRoaXMgbGlzdCBpbiBzeW5jIHdpdGggcHJvZHVjdGlvbiB2ZXJzaW9uIGluIGAuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzYC5cbnZhciBSZWFjdFByb3BUeXBlcz17YXJyYXk6c2hpbSxib29sOnNoaW0sZnVuYzpzaGltLG51bWJlcjpzaGltLG9iamVjdDpzaGltLHN0cmluZzpzaGltLHN5bWJvbDpzaGltLGFueTpzaGltLGFycmF5T2Y6Z2V0U2hpbSxlbGVtZW50OnNoaW0sZWxlbWVudFR5cGU6c2hpbSxpbnN0YW5jZU9mOmdldFNoaW0sbm9kZTpzaGltLG9iamVjdE9mOmdldFNoaW0sb25lT2Y6Z2V0U2hpbSxvbmVPZlR5cGU6Z2V0U2hpbSxzaGFwZTpnZXRTaGltLGV4YWN0OmdldFNoaW0sY2hlY2tQcm9wVHlwZXM6ZW1wdHlGdW5jdGlvbldpdGhSZXNldCxyZXNldFdhcm5pbmdDYWNoZTplbXB0eUZ1bmN0aW9ufTtSZWFjdFByb3BUeXBlcy5Qcm9wVHlwZXM9UmVhY3RQcm9wVHlwZXM7cmV0dXJuIFJlYWN0UHJvcFR5cGVzO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9+L3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlY9PT0ncHJvZHVjdGlvbicpe21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vY2pzL2hpc3RvcnkubWluLmpzJyk7fWVsc2V7bW9kdWxlLmV4cG9ydHM9cmVxdWlyZSgnLi9janMvaGlzdG9yeS5qcycpO31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCh0KXtyZXR1cm4gdCYmXCJvYmplY3RcIj09KHR5cGVvZiB0PT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YodCkpJiZcImRlZmF1bHRcImluIHQ/dC5kZWZhdWx0OnQ7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByZXNvbHZlUGF0aG5hbWU9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoXCJyZXNvbHZlLXBhdGhuYW1lXCIpKSx2YWx1ZUVxdWFsPV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKFwidmFsdWUtZXF1YWxcIikpO3JlcXVpcmUoXCJ0aW55LXdhcm5pbmdcIik7dmFyIGludmFyaWFudD1faW50ZXJvcERlZmF1bHQocmVxdWlyZShcInRpbnktaW52YXJpYW50XCIpKTtmdW5jdGlvbiBfZXh0ZW5kcygpe3JldHVybihfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXt2YXIgZT1hcmd1bWVudHNbbl07Zm9yKHZhciBhIGluIGUpe09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGEpJiYodFthXT1lW2FdKTt9fXJldHVybiB0O30pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHQpe3JldHVyblwiL1wiPT09dC5jaGFyQXQoMCk/dDpcIi9cIit0O31mdW5jdGlvbiBzdHJpcExlYWRpbmdTbGFzaCh0KXtyZXR1cm5cIi9cIj09PXQuY2hhckF0KDApP3Quc3Vic3RyKDEpOnQ7fWZ1bmN0aW9uIGhhc0Jhc2VuYW1lKHQsbil7cmV0dXJuIDA9PT10LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihuLnRvTG93ZXJDYXNlKCkpJiYtMSE9PVwiLz8jXCIuaW5kZXhPZih0LmNoYXJBdChuLmxlbmd0aCkpO31mdW5jdGlvbiBzdHJpcEJhc2VuYW1lKHQsbil7cmV0dXJuIGhhc0Jhc2VuYW1lKHQsbik/dC5zdWJzdHIobi5sZW5ndGgpOnQ7fWZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaCh0KXtyZXR1cm5cIi9cIj09PXQuY2hhckF0KHQubGVuZ3RoLTEpP3Quc2xpY2UoMCwtMSk6dDt9ZnVuY3Rpb24gcGFyc2VQYXRoKHQpe3ZhciBuPXR8fFwiL1wiLGU9XCJcIixhPVwiXCIscj1uLmluZGV4T2YoXCIjXCIpOy0xIT09ciYmKGE9bi5zdWJzdHIociksbj1uLnN1YnN0cigwLHIpKTt2YXIgbz1uLmluZGV4T2YoXCI/XCIpO3JldHVybi0xIT09byYmKGU9bi5zdWJzdHIobyksbj1uLnN1YnN0cigwLG8pKSx7cGF0aG5hbWU6bixzZWFyY2g6XCI/XCI9PT1lP1wiXCI6ZSxoYXNoOlwiI1wiPT09YT9cIlwiOmF9O31mdW5jdGlvbiBjcmVhdGVQYXRoKHQpe3ZhciBuPXQucGF0aG5hbWUsZT10LnNlYXJjaCxhPXQuaGFzaCxyPW58fFwiL1wiO3JldHVybiBlJiZcIj9cIiE9PWUmJihyKz1cIj9cIj09PWUuY2hhckF0KDApP2U6XCI/XCIrZSksYSYmXCIjXCIhPT1hJiYocis9XCIjXCI9PT1hLmNoYXJBdCgwKT9hOlwiI1wiK2EpLHI7fWZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHQsbixlLGEpe3ZhciByO1wic3RyaW5nXCI9PXR5cGVvZiB0PyhyPXBhcnNlUGF0aCh0KSkuc3RhdGU9bjoodm9pZCAwPT09KHI9X2V4dGVuZHMoe30sdCkpLnBhdGhuYW1lJiYoci5wYXRobmFtZT1cIlwiKSxyLnNlYXJjaD9cIj9cIiE9PXIuc2VhcmNoLmNoYXJBdCgwKSYmKHIuc2VhcmNoPVwiP1wiK3Iuc2VhcmNoKTpyLnNlYXJjaD1cIlwiLHIuaGFzaD9cIiNcIiE9PXIuaGFzaC5jaGFyQXQoMCkmJihyLmhhc2g9XCIjXCIrci5oYXNoKTpyLmhhc2g9XCJcIix2b2lkIDAhPT1uJiZ2b2lkIDA9PT1yLnN0YXRlJiYoci5zdGF0ZT1uKSk7dHJ5e3IucGF0aG5hbWU9ZGVjb2RlVVJJKHIucGF0aG5hbWUpO31jYXRjaCh0KXt0aHJvdyB0IGluc3RhbmNlb2YgVVJJRXJyb3I/bmV3IFVSSUVycm9yKCdQYXRobmFtZSBcIicrci5wYXRobmFtZSsnXCIgY291bGQgbm90IGJlIGRlY29kZWQuIFRoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSBhbiBpbnZhbGlkIHBlcmNlbnQtZW5jb2RpbmcuJyk6dDt9cmV0dXJuIGUmJihyLmtleT1lKSxhP3IucGF0aG5hbWU/XCIvXCIhPT1yLnBhdGhuYW1lLmNoYXJBdCgwKSYmKHIucGF0aG5hbWU9cmVzb2x2ZVBhdGhuYW1lKHIucGF0aG5hbWUsYS5wYXRobmFtZSkpOnIucGF0aG5hbWU9YS5wYXRobmFtZTpyLnBhdGhuYW1lfHwoci5wYXRobmFtZT1cIi9cIikscjt9ZnVuY3Rpb24gbG9jYXRpb25zQXJlRXF1YWwodCxuKXtyZXR1cm4gdC5wYXRobmFtZT09PW4ucGF0aG5hbWUmJnQuc2VhcmNoPT09bi5zZWFyY2gmJnQuaGFzaD09PW4uaGFzaCYmdC5rZXk9PT1uLmtleSYmdmFsdWVFcXVhbCh0LnN0YXRlLG4uc3RhdGUpO31mdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpe3ZhciBvPW51bGw7dmFyIGE9W107cmV0dXJue3NldFByb21wdDpmdW5jdGlvbiBzZXRQcm9tcHQodCl7cmV0dXJuIG89dCxmdW5jdGlvbigpe289PT10JiYobz1udWxsKTt9O30sY29uZmlybVRyYW5zaXRpb25UbzpmdW5jdGlvbiBjb25maXJtVHJhbnNpdGlvblRvKHQsbixlLGEpe2lmKG51bGwhPW8pe3ZhciByPVwiZnVuY3Rpb25cIj09dHlwZW9mIG8/byh0LG4pOm87XCJzdHJpbmdcIj09dHlwZW9mIHI/XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lKHIsYSk6YSghMCk6YSghMSE9PXIpO31lbHNlIGEoITApO30sYXBwZW5kTGlzdGVuZXI6ZnVuY3Rpb24gYXBwZW5kTGlzdGVuZXIodCl7dmFyIG49ITA7ZnVuY3Rpb24gZSgpe24mJnQuYXBwbHkodm9pZCAwLGFyZ3VtZW50cyk7fXJldHVybiBhLnB1c2goZSksZnVuY3Rpb24oKXtuPSExLGE9YS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQhPT1lO30pO307fSxub3RpZnlMaXN0ZW5lcnM6ZnVuY3Rpb24gbm90aWZ5TGlzdGVuZXJzKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkodCksZT0wO2U8dDtlKyspe25bZV09YXJndW1lbnRzW2VdO31hLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuYXBwbHkodm9pZCAwLG4pO30pO319O312YXIgY2FuVXNlRE9NPSEoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvd3x8IXdpbmRvdy5kb2N1bWVudHx8IXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtmdW5jdGlvbiBnZXRDb25maXJtYXRpb24odCxuKXtuKHdpbmRvdy5jb25maXJtKHQpKTt9ZnVuY3Rpb24gc3VwcG9ydHNIaXN0b3J5KCl7dmFyIHQ9d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7cmV0dXJuKC0xPT09dC5pbmRleE9mKFwiQW5kcm9pZCAyLlwiKSYmLTE9PT10LmluZGV4T2YoXCJBbmRyb2lkIDQuMFwiKXx8LTE9PT10LmluZGV4T2YoXCJNb2JpbGUgU2FmYXJpXCIpfHwtMSE9PXQuaW5kZXhPZihcIkNocm9tZVwiKXx8LTEhPT10LmluZGV4T2YoXCJXaW5kb3dzIFBob25lXCIpKSYmd2luZG93Lmhpc3RvcnkmJlwicHVzaFN0YXRlXCJpbiB3aW5kb3cuaGlzdG9yeTt9ZnVuY3Rpb24gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpe3JldHVybi0xPT09d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnRcIik7fWZ1bmN0aW9uIHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCl7cmV0dXJuLTE9PT13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiRmlyZWZveFwiKTt9ZnVuY3Rpb24gaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudCh0KXtyZXR1cm4gdm9pZCAwPT09dC5zdGF0ZSYmLTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJDcmlPU1wiKTt9dmFyIFBvcFN0YXRlRXZlbnQ9XCJwb3BzdGF0ZVwiLEhhc2hDaGFuZ2VFdmVudD1cImhhc2hjaGFuZ2VcIjtmdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUoKXt0cnl7cmV0dXJuIHdpbmRvdy5oaXN0b3J5LnN0YXRlfHx7fTt9Y2F0Y2godCl7cmV0dXJue307fX1mdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeSh0KXt2b2lkIDA9PT10JiYodD17fSksY2FuVXNlRE9NfHxpbnZhcmlhbnQoITEpO3ZhciBzPXdpbmRvdy5oaXN0b3J5LGM9c3VwcG9ydHNIaXN0b3J5KCksbj0hc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpLGU9dCxhPWUuZm9yY2VSZWZyZXNoLGg9dm9pZCAwIT09YSYmYSxyPWUuZ2V0VXNlckNvbmZpcm1hdGlvbix1PXZvaWQgMD09PXI/Z2V0Q29uZmlybWF0aW9uOnIsbz1lLmtleUxlbmd0aCxpPXZvaWQgMD09PW8/NjpvLGY9dC5iYXNlbmFtZT9zdHJpcFRyYWlsaW5nU2xhc2goYWRkTGVhZGluZ1NsYXNoKHQuYmFzZW5hbWUpKTpcIlwiO2Z1bmN0aW9uIGwodCl7dmFyIG49dHx8e30sZT1uLmtleSxhPW4uc3RhdGUscj13aW5kb3cubG9jYXRpb24sbz1yLnBhdGhuYW1lK3Iuc2VhcmNoK3IuaGFzaDtyZXR1cm4gZiYmKG89c3RyaXBCYXNlbmFtZShvLGYpKSxjcmVhdGVMb2NhdGlvbihvLGEsZSk7fWZ1bmN0aW9uIGQoKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsaSk7fXZhciB2PWNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCk7ZnVuY3Rpb24gcCh0KXtfZXh0ZW5kcyhULHQpLFQubGVuZ3RoPXMubGVuZ3RoLHYubm90aWZ5TGlzdGVuZXJzKFQubG9jYXRpb24sVC5hY3Rpb24pO31mdW5jdGlvbiBnKHQpe2lzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQodCl8fHcobCh0LnN0YXRlKSk7fWZ1bmN0aW9uIFAoKXt3KGwoZ2V0SGlzdG9yeVN0YXRlKCkpKTt9dmFyIG09ITE7ZnVuY3Rpb24gdyhuKXtpZihtKW09ITEscCgpO2Vsc2V7di5jb25maXJtVHJhbnNpdGlvblRvKG4sXCJQT1BcIix1LGZ1bmN0aW9uKHQpe3Q/cCh7YWN0aW9uOlwiUE9QXCIsbG9jYXRpb246bn0pOmZ1bmN0aW9uKHQpe3ZhciBuPVQubG9jYXRpb24sZT1ILmluZGV4T2Yobi5rZXkpOy0xPT09ZSYmKGU9MCk7dmFyIGE9SC5pbmRleE9mKHQua2V5KTstMT09PWEmJihhPTApO3ZhciByPWUtYTtyJiYobT0hMCxMKHIpKTt9KG4pO30pO319dmFyIHk9bChnZXRIaXN0b3J5U3RhdGUoKSksSD1beS5rZXldO2Z1bmN0aW9uIHgodCl7cmV0dXJuIGYrY3JlYXRlUGF0aCh0KTt9ZnVuY3Rpb24gTCh0KXtzLmdvKHQpO312YXIgTz0wO2Z1bmN0aW9uIEUodCl7MT09PShPKz10KSYmMT09PXQ/KHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFBvcFN0YXRlRXZlbnQsZyksbiYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoSGFzaENoYW5nZUV2ZW50LFApKTowPT09TyYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFBvcFN0YXRlRXZlbnQsZyksbiYmd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoSGFzaENoYW5nZUV2ZW50LFApKTt9dmFyIFM9ITE7dmFyIFQ9e2xlbmd0aDpzLmxlbmd0aCxhY3Rpb246XCJQT1BcIixsb2NhdGlvbjp5LGNyZWF0ZUhyZWY6eCxwdXNoOmZ1bmN0aW9uIHB1c2godCxuKXt2YXIgaT1jcmVhdGVMb2NhdGlvbih0LG4sZCgpLFQubG9jYXRpb24pO3YuY29uZmlybVRyYW5zaXRpb25UbyhpLFwiUFVTSFwiLHUsZnVuY3Rpb24odCl7aWYodCl7dmFyIG49eChpKSxlPWkua2V5LGE9aS5zdGF0ZTtpZihjKXtpZihzLnB1c2hTdGF0ZSh7a2V5OmUsc3RhdGU6YX0sbnVsbCxuKSxoKXdpbmRvdy5sb2NhdGlvbi5ocmVmPW47ZWxzZXt2YXIgcj1ILmluZGV4T2YoVC5sb2NhdGlvbi5rZXkpLG89SC5zbGljZSgwLHIrMSk7by5wdXNoKGkua2V5KSxIPW8scCh7YWN0aW9uOlwiUFVTSFwiLGxvY2F0aW9uOml9KTt9fWVsc2Ugd2luZG93LmxvY2F0aW9uLmhyZWY9bjt9fSk7fSxyZXBsYWNlOmZ1bmN0aW9uIHJlcGxhY2UodCxuKXt2YXIgbz1cIlJFUExBQ0VcIixpPWNyZWF0ZUxvY2F0aW9uKHQsbixkKCksVC5sb2NhdGlvbik7di5jb25maXJtVHJhbnNpdGlvblRvKGksbyx1LGZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBuPXgoaSksZT1pLmtleSxhPWkuc3RhdGU7aWYoYyl7aWYocy5yZXBsYWNlU3RhdGUoe2tleTplLHN0YXRlOmF9LG51bGwsbiksaCl3aW5kb3cubG9jYXRpb24ucmVwbGFjZShuKTtlbHNle3ZhciByPUguaW5kZXhPZihULmxvY2F0aW9uLmtleSk7LTEhPT1yJiYoSFtyXT1pLmtleSkscCh7YWN0aW9uOm8sbG9jYXRpb246aX0pO319ZWxzZSB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShuKTt9fSk7fSxnbzpMLGdvQmFjazpmdW5jdGlvbiBnb0JhY2soKXtMKC0xKTt9LGdvRm9yd2FyZDpmdW5jdGlvbiBnb0ZvcndhcmQoKXtMKDEpO30sYmxvY2s6ZnVuY3Rpb24gYmxvY2sodCl7dm9pZCAwPT09dCYmKHQ9ITEpO3ZhciBuPXYuc2V0UHJvbXB0KHQpO3JldHVybiBTfHwoRSgxKSxTPSEwKSxmdW5jdGlvbigpe3JldHVybiBTJiYoUz0hMSxFKC0xKSksbigpO307fSxsaXN0ZW46ZnVuY3Rpb24gbGlzdGVuKHQpe3ZhciBuPXYuYXBwZW5kTGlzdGVuZXIodCk7cmV0dXJuIEUoMSksZnVuY3Rpb24oKXtFKC0xKSxuKCk7fTt9fTtyZXR1cm4gVDt9dmFyIEhhc2hDaGFuZ2VFdmVudCQxPVwiaGFzaGNoYW5nZVwiLEhhc2hQYXRoQ29kZXJzPXtoYXNoYmFuZzp7ZW5jb2RlUGF0aDpmdW5jdGlvbiBlbmNvZGVQYXRoKHQpe3JldHVyblwiIVwiPT09dC5jaGFyQXQoMCk/dDpcIiEvXCIrc3RyaXBMZWFkaW5nU2xhc2godCk7fSxkZWNvZGVQYXRoOmZ1bmN0aW9uIGRlY29kZVBhdGgodCl7cmV0dXJuXCIhXCI9PT10LmNoYXJBdCgwKT90LnN1YnN0cigxKTp0O319LG5vc2xhc2g6e2VuY29kZVBhdGg6c3RyaXBMZWFkaW5nU2xhc2gsZGVjb2RlUGF0aDphZGRMZWFkaW5nU2xhc2h9LHNsYXNoOntlbmNvZGVQYXRoOmFkZExlYWRpbmdTbGFzaCxkZWNvZGVQYXRoOmFkZExlYWRpbmdTbGFzaH19O2Z1bmN0aW9uIHN0cmlwSGFzaCh0KXt2YXIgbj10LmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT09bj90OnQuc2xpY2UoMCxuKTt9ZnVuY3Rpb24gZ2V0SGFzaFBhdGgoKXt2YXIgdD13aW5kb3cubG9jYXRpb24uaHJlZixuPXQuaW5kZXhPZihcIiNcIik7cmV0dXJuLTE9PT1uP1wiXCI6dC5zdWJzdHJpbmcobisxKTt9ZnVuY3Rpb24gcHVzaEhhc2hQYXRoKHQpe3dpbmRvdy5sb2NhdGlvbi5oYXNoPXQ7fWZ1bmN0aW9uIHJlcGxhY2VIYXNoUGF0aCh0KXt3aW5kb3cubG9jYXRpb24ucmVwbGFjZShzdHJpcEhhc2god2luZG93LmxvY2F0aW9uLmhyZWYpK1wiI1wiK3QpO31mdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeSh0KXt2b2lkIDA9PT10JiYodD17fSksY2FuVXNlRE9NfHxpbnZhcmlhbnQoITEpO3ZhciBuPXdpbmRvdy5oaXN0b3J5LGU9KHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCksdCksYT1lLmdldFVzZXJDb25maXJtYXRpb24saT12b2lkIDA9PT1hP2dldENvbmZpcm1hdGlvbjphLHI9ZS5oYXNoVHlwZSxvPXZvaWQgMD09PXI/XCJzbGFzaFwiOnIscz10LmJhc2VuYW1lP3N0cmlwVHJhaWxpbmdTbGFzaChhZGRMZWFkaW5nU2xhc2godC5iYXNlbmFtZSkpOlwiXCIsYz1IYXNoUGF0aENvZGVyc1tvXSxoPWMuZW5jb2RlUGF0aCx1PWMuZGVjb2RlUGF0aDtmdW5jdGlvbiBmKCl7dmFyIHQ9dShnZXRIYXNoUGF0aCgpKTtyZXR1cm4gcyYmKHQ9c3RyaXBCYXNlbmFtZSh0LHMpKSxjcmVhdGVMb2NhdGlvbih0KTt9dmFyIGw9Y3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKTtmdW5jdGlvbiBkKHQpe19leHRlbmRzKEUsdCksRS5sZW5ndGg9bi5sZW5ndGgsbC5ub3RpZnlMaXN0ZW5lcnMoRS5sb2NhdGlvbixFLmFjdGlvbik7fXZhciB2PSExLHA9bnVsbDtmdW5jdGlvbiBnKCl7dmFyIHQ9Z2V0SGFzaFBhdGgoKSxuPWgodCk7aWYodCE9PW4pcmVwbGFjZUhhc2hQYXRoKG4pO2Vsc2V7dmFyIGU9ZigpLGE9RS5sb2NhdGlvbjtpZighdiYmZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5wYXRobmFtZT09PW4ucGF0aG5hbWUmJnQuc2VhcmNoPT09bi5zZWFyY2gmJnQuaGFzaD09PW4uaGFzaDt9KGEsZSkpcmV0dXJuO2lmKHA9PT1jcmVhdGVQYXRoKGUpKXJldHVybjtwPW51bGwsZnVuY3Rpb24obil7aWYodil2PSExLGQoKTtlbHNle2wuY29uZmlybVRyYW5zaXRpb25UbyhuLFwiUE9QXCIsaSxmdW5jdGlvbih0KXt0P2Qoe2FjdGlvbjpcIlBPUFwiLGxvY2F0aW9uOm59KTpmdW5jdGlvbih0KXt2YXIgbj1FLmxvY2F0aW9uLGU9eS5sYXN0SW5kZXhPZihjcmVhdGVQYXRoKG4pKTstMT09PWUmJihlPTApO3ZhciBhPXkubGFzdEluZGV4T2YoY3JlYXRlUGF0aCh0KSk7LTE9PT1hJiYoYT0wKTt2YXIgcj1lLWE7ciYmKHY9ITAsSChyKSk7fShuKTt9KTt9fShlKTt9fXZhciBQPWdldEhhc2hQYXRoKCksbT1oKFApO1AhPT1tJiZyZXBsYWNlSGFzaFBhdGgobSk7dmFyIHc9ZigpLHk9W2NyZWF0ZVBhdGgodyldO2Z1bmN0aW9uIEgodCl7bi5nbyh0KTt9dmFyIHg9MDtmdW5jdGlvbiBMKHQpezE9PT0oeCs9dCkmJjE9PT10P3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKEhhc2hDaGFuZ2VFdmVudCQxLGcpOjA9PT14JiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihIYXNoQ2hhbmdlRXZlbnQkMSxnKTt9dmFyIE89ITE7dmFyIEU9e2xlbmd0aDpuLmxlbmd0aCxhY3Rpb246XCJQT1BcIixsb2NhdGlvbjp3LGNyZWF0ZUhyZWY6ZnVuY3Rpb24gY3JlYXRlSHJlZih0KXt2YXIgbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYmFzZVwiKSxlPVwiXCI7cmV0dXJuIG4mJm4uZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSYmKGU9c3RyaXBIYXNoKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSksZStcIiNcIitoKHMrY3JlYXRlUGF0aCh0KSk7fSxwdXNoOmZ1bmN0aW9uIHB1c2godCxuKXt2YXIgbz1jcmVhdGVMb2NhdGlvbih0LHZvaWQgMCx2b2lkIDAsRS5sb2NhdGlvbik7bC5jb25maXJtVHJhbnNpdGlvblRvKG8sXCJQVVNIXCIsaSxmdW5jdGlvbih0KXtpZih0KXt2YXIgbj1jcmVhdGVQYXRoKG8pLGU9aChzK24pO2lmKGdldEhhc2hQYXRoKCkhPT1lKXtwPW4scHVzaEhhc2hQYXRoKGUpO3ZhciBhPXkubGFzdEluZGV4T2YoY3JlYXRlUGF0aChFLmxvY2F0aW9uKSkscj15LnNsaWNlKDAsYSsxKTtyLnB1c2gobikseT1yLGQoe2FjdGlvbjpcIlBVU0hcIixsb2NhdGlvbjpvfSk7fWVsc2UgZCgpO319KTt9LHJlcGxhY2U6ZnVuY3Rpb24gcmVwbGFjZSh0LG4pe3ZhciByPVwiUkVQTEFDRVwiLG89Y3JlYXRlTG9jYXRpb24odCx2b2lkIDAsdm9pZCAwLEUubG9jYXRpb24pO2wuY29uZmlybVRyYW5zaXRpb25UbyhvLHIsaSxmdW5jdGlvbih0KXtpZih0KXt2YXIgbj1jcmVhdGVQYXRoKG8pLGU9aChzK24pO2dldEhhc2hQYXRoKCkhPT1lJiYocD1uLHJlcGxhY2VIYXNoUGF0aChlKSk7dmFyIGE9eS5pbmRleE9mKGNyZWF0ZVBhdGgoRS5sb2NhdGlvbikpOy0xIT09YSYmKHlbYV09biksZCh7YWN0aW9uOnIsbG9jYXRpb246b30pO319KTt9LGdvOkgsZ29CYWNrOmZ1bmN0aW9uIGdvQmFjaygpe0goLTEpO30sZ29Gb3J3YXJkOmZ1bmN0aW9uIGdvRm9yd2FyZCgpe0goMSk7fSxibG9jazpmdW5jdGlvbiBibG9jayh0KXt2b2lkIDA9PT10JiYodD0hMSk7dmFyIG49bC5zZXRQcm9tcHQodCk7cmV0dXJuIE98fChMKDEpLE89ITApLGZ1bmN0aW9uKCl7cmV0dXJuIE8mJihPPSExLEwoLTEpKSxuKCk7fTt9LGxpc3RlbjpmdW5jdGlvbiBsaXN0ZW4odCl7dmFyIG49bC5hcHBlbmRMaXN0ZW5lcih0KTtyZXR1cm4gTCgxKSxmdW5jdGlvbigpe0woLTEpLG4oKTt9O319O3JldHVybiBFO31mdW5jdGlvbiBjbGFtcCh0LG4sZSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQsbiksZSk7fWZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkodCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBuPXQscj1uLmdldFVzZXJDb25maXJtYXRpb24sZT1uLmluaXRpYWxFbnRyaWVzLGE9dm9pZCAwPT09ZT9bXCIvXCJdOmUsbz1uLmluaXRpYWxJbmRleCxpPXZvaWQgMD09PW8/MDpvLHM9bi5rZXlMZW5ndGgsYz12b2lkIDA9PT1zPzY6cyxoPWNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCk7ZnVuY3Rpb24gdSh0KXtfZXh0ZW5kcyhnLHQpLGcubGVuZ3RoPWcuZW50cmllcy5sZW5ndGgsaC5ub3RpZnlMaXN0ZW5lcnMoZy5sb2NhdGlvbixnLmFjdGlvbik7fWZ1bmN0aW9uIGYoKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsYyk7fXZhciBsPWNsYW1wKGksMCxhLmxlbmd0aC0xKSxkPWEubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBjcmVhdGVMb2NhdGlvbih0LHZvaWQgMCxcInN0cmluZ1wiPT10eXBlb2YgdD9mKCk6dC5rZXl8fGYoKSk7fSksdj1jcmVhdGVQYXRoO2Z1bmN0aW9uIHAodCl7dmFyIG49Y2xhbXAoZy5pbmRleCt0LDAsZy5lbnRyaWVzLmxlbmd0aC0xKSxlPWcuZW50cmllc1tuXTtoLmNvbmZpcm1UcmFuc2l0aW9uVG8oZSxcIlBPUFwiLHIsZnVuY3Rpb24odCl7dD91KHthY3Rpb246XCJQT1BcIixsb2NhdGlvbjplLGluZGV4Om59KTp1KCk7fSk7fXZhciBnPXtsZW5ndGg6ZC5sZW5ndGgsYWN0aW9uOlwiUE9QXCIsbG9jYXRpb246ZFtsXSxpbmRleDpsLGVudHJpZXM6ZCxjcmVhdGVIcmVmOnYscHVzaDpmdW5jdGlvbiBwdXNoKHQsbil7dmFyIGE9Y3JlYXRlTG9jYXRpb24odCxuLGYoKSxnLmxvY2F0aW9uKTtoLmNvbmZpcm1UcmFuc2l0aW9uVG8oYSxcIlBVU0hcIixyLGZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBuPWcuaW5kZXgrMSxlPWcuZW50cmllcy5zbGljZSgwKTtlLmxlbmd0aD5uP2Uuc3BsaWNlKG4sZS5sZW5ndGgtbixhKTplLnB1c2goYSksdSh7YWN0aW9uOlwiUFVTSFwiLGxvY2F0aW9uOmEsaW5kZXg6bixlbnRyaWVzOmV9KTt9fSk7fSxyZXBsYWNlOmZ1bmN0aW9uIHJlcGxhY2UodCxuKXt2YXIgZT1cIlJFUExBQ0VcIixhPWNyZWF0ZUxvY2F0aW9uKHQsbixmKCksZy5sb2NhdGlvbik7aC5jb25maXJtVHJhbnNpdGlvblRvKGEsZSxyLGZ1bmN0aW9uKHQpe3QmJihnLmVudHJpZXNbZy5pbmRleF09YSx1KHthY3Rpb246ZSxsb2NhdGlvbjphfSkpO30pO30sZ286cCxnb0JhY2s6ZnVuY3Rpb24gZ29CYWNrKCl7cCgtMSk7fSxnb0ZvcndhcmQ6ZnVuY3Rpb24gZ29Gb3J3YXJkKCl7cCgxKTt9LGNhbkdvOmZ1bmN0aW9uIGNhbkdvKHQpe3ZhciBuPWcuaW5kZXgrdDtyZXR1cm4gMDw9biYmbjxnLmVudHJpZXMubGVuZ3RoO30sYmxvY2s6ZnVuY3Rpb24gYmxvY2sodCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSExKSxoLnNldFByb21wdCh0KTt9LGxpc3RlbjpmdW5jdGlvbiBsaXN0ZW4odCl7cmV0dXJuIGguYXBwZW5kTGlzdGVuZXIodCk7fX07cmV0dXJuIGc7fWV4cG9ydHMuY3JlYXRlQnJvd3Nlckhpc3Rvcnk9Y3JlYXRlQnJvd3Nlckhpc3RvcnksZXhwb3J0cy5jcmVhdGVIYXNoSGlzdG9yeT1jcmVhdGVIYXNoSGlzdG9yeSxleHBvcnRzLmNyZWF0ZU1lbW9yeUhpc3Rvcnk9Y3JlYXRlTWVtb3J5SGlzdG9yeSxleHBvcnRzLmNyZWF0ZUxvY2F0aW9uPWNyZWF0ZUxvY2F0aW9uLGV4cG9ydHMubG9jYXRpb25zQXJlRXF1YWw9bG9jYXRpb25zQXJlRXF1YWwsZXhwb3J0cy5wYXJzZVBhdGg9cGFyc2VQYXRoLGV4cG9ydHMuY3JlYXRlUGF0aD1jcmVhdGVQYXRoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9oaXN0b3J5L2Nqcy9oaXN0b3J5Lm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WPT09J3Byb2R1Y3Rpb24nKXttb2R1bGUuZXhwb3J0cz1yZXF1aXJlKCcuL2Nqcy9yZXNvbHZlLXBhdGhuYW1lLm1pbi5qcycpO31lbHNle21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vY2pzL3Jlc29sdmUtcGF0aG5hbWUuanMnKTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Jlc29sdmUtcGF0aG5hbWUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIGlzQWJzb2x1dGUoZSl7cmV0dXJuXCIvXCI9PT1lLmNoYXJBdCgwKTt9ZnVuY3Rpb24gc3BsaWNlT25lKGUsdCl7Zm9yKHZhciBzPXQsbj1zKzEsaT1lLmxlbmd0aDtuPGk7cys9MSxuKz0xKXtlW3NdPWVbbl07fWUucG9wKCk7fWZ1bmN0aW9uIHJlc29sdmVQYXRobmFtZShlLHQpe3ZvaWQgMD09PXQmJih0PVwiXCIpO3ZhciBzLG49ZSYmZS5zcGxpdChcIi9cIil8fFtdLGk9dCYmdC5zcGxpdChcIi9cIil8fFtdLGw9ZSYmaXNBYnNvbHV0ZShlKSxyPXQmJmlzQWJzb2x1dGUodCksbz1sfHxyO2lmKGUmJmlzQWJzb2x1dGUoZSk/aT1uOm4ubGVuZ3RoJiYoaS5wb3AoKSxpPWkuY29uY2F0KG4pKSwhaS5sZW5ndGgpcmV0dXJuXCIvXCI7aWYoaS5sZW5ndGgpe3ZhciB1PWlbaS5sZW5ndGgtMV07cz1cIi5cIj09PXV8fFwiLi5cIj09PXV8fFwiXCI9PT11O31lbHNlIHM9ITE7Zm9yKHZhciBhPTAsYz1pLmxlbmd0aDswPD1jO2MtLSl7dmFyIGY9aVtjXTtcIi5cIj09PWY/c3BsaWNlT25lKGksYyk6XCIuLlwiPT09Zj8oc3BsaWNlT25lKGksYyksYSsrKTphJiYoc3BsaWNlT25lKGksYyksYS0tKTt9aWYoIW8pZm9yKDthLS07YSl7aS51bnNoaWZ0KFwiLi5cIik7fSFvfHxcIlwiPT09aVswXXx8aVswXSYmaXNBYnNvbHV0ZShpWzBdKXx8aS51bnNoaWZ0KFwiXCIpO3ZhciBoPWkuam9pbihcIi9cIik7cmV0dXJuIHMmJlwiL1wiIT09aC5zdWJzdHIoLTEpJiYoaCs9XCIvXCIpLGg7fW1vZHVsZS5leHBvcnRzPXJlc29sdmVQYXRobmFtZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVzb2x2ZS1wYXRobmFtZS9janMvcmVzb2x2ZS1wYXRobmFtZS5taW4uanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztmdW5jdGlvbiBpc0Fic29sdXRlKHBhdGhuYW1lKXtyZXR1cm4gcGF0aG5hbWUuY2hhckF0KDApPT09Jy8nO30vLyBBYm91dCAxLjV4IGZhc3RlciB0aGFuIHRoZSB0d28tYXJnIHZlcnNpb24gb2YgQXJyYXkjc3BsaWNlKClcbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LGluZGV4KXtmb3IodmFyIGk9aW5kZXgsaz1pKzEsbj1saXN0Lmxlbmd0aDtrPG47aSs9MSxrKz0xKXtsaXN0W2ldPWxpc3Rba107fWxpc3QucG9wKCk7fS8vIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgYmFzZWQgaGVhdmlseSBvbiBub2RlJ3MgdXJsLnBhcnNlXG5mdW5jdGlvbiByZXNvbHZlUGF0aG5hbWUodG8sZnJvbSl7aWYoZnJvbT09PXVuZGVmaW5lZClmcm9tPScnO3ZhciB0b1BhcnRzPXRvJiZ0by5zcGxpdCgnLycpfHxbXTt2YXIgZnJvbVBhcnRzPWZyb20mJmZyb20uc3BsaXQoJy8nKXx8W107dmFyIGlzVG9BYnM9dG8mJmlzQWJzb2x1dGUodG8pO3ZhciBpc0Zyb21BYnM9ZnJvbSYmaXNBYnNvbHV0ZShmcm9tKTt2YXIgbXVzdEVuZEFicz1pc1RvQWJzfHxpc0Zyb21BYnM7aWYodG8mJmlzQWJzb2x1dGUodG8pKXsvLyB0byBpcyBhYnNvbHV0ZVxuZnJvbVBhcnRzPXRvUGFydHM7fWVsc2UgaWYodG9QYXJ0cy5sZW5ndGgpey8vIHRvIGlzIHJlbGF0aXZlLCBkcm9wIHRoZSBmaWxlbmFtZVxuZnJvbVBhcnRzLnBvcCgpO2Zyb21QYXJ0cz1mcm9tUGFydHMuY29uY2F0KHRvUGFydHMpO31pZighZnJvbVBhcnRzLmxlbmd0aClyZXR1cm4nLyc7dmFyIGhhc1RyYWlsaW5nU2xhc2g7aWYoZnJvbVBhcnRzLmxlbmd0aCl7dmFyIGxhc3Q9ZnJvbVBhcnRzW2Zyb21QYXJ0cy5sZW5ndGgtMV07aGFzVHJhaWxpbmdTbGFzaD1sYXN0PT09Jy4nfHxsYXN0PT09Jy4uJ3x8bGFzdD09PScnO31lbHNle2hhc1RyYWlsaW5nU2xhc2g9ZmFsc2U7fXZhciB1cD0wO2Zvcih2YXIgaT1mcm9tUGFydHMubGVuZ3RoO2k+PTA7aS0tKXt2YXIgcGFydD1mcm9tUGFydHNbaV07aWYocGFydD09PScuJyl7c3BsaWNlT25lKGZyb21QYXJ0cyxpKTt9ZWxzZSBpZihwYXJ0PT09Jy4uJyl7c3BsaWNlT25lKGZyb21QYXJ0cyxpKTt1cCsrO31lbHNlIGlmKHVwKXtzcGxpY2VPbmUoZnJvbVBhcnRzLGkpO3VwLS07fX1pZighbXVzdEVuZEFicylmb3IoO3VwLS07dXApe2Zyb21QYXJ0cy51bnNoaWZ0KCcuLicpO31pZihtdXN0RW5kQWJzJiZmcm9tUGFydHNbMF0hPT0nJyYmKCFmcm9tUGFydHNbMF18fCFpc0Fic29sdXRlKGZyb21QYXJ0c1swXSkpKWZyb21QYXJ0cy51bnNoaWZ0KCcnKTt2YXIgcmVzdWx0PWZyb21QYXJ0cy5qb2luKCcvJyk7aWYoaGFzVHJhaWxpbmdTbGFzaCYmcmVzdWx0LnN1YnN0cigtMSkhPT0nLycpcmVzdWx0Kz0nLyc7cmV0dXJuIHJlc3VsdDt9bW9kdWxlLmV4cG9ydHM9cmVzb2x2ZVBhdGhuYW1lO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZXNvbHZlLXBhdGhuYW1lL2Nqcy9yZXNvbHZlLXBhdGhuYW1lLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlY9PT0ncHJvZHVjdGlvbicpe21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vY2pzL3ZhbHVlLWVxdWFsLm1pbi5qcycpO31lbHNle21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vY2pzL3ZhbHVlLWVxdWFsLmpzJyk7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92YWx1ZS1lcXVhbC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIHZhbHVlT2YoZSl7cmV0dXJuIGUudmFsdWVPZj9lLnZhbHVlT2YoKTpPYmplY3QucHJvdG90eXBlLnZhbHVlT2YuY2FsbChlKTt9ZnVuY3Rpb24gdmFsdWVFcXVhbCh1LHIpe2lmKHU9PT1yKXJldHVybiEwO2lmKG51bGw9PXV8fG51bGw9PXIpcmV0dXJuITE7aWYoQXJyYXkuaXNBcnJheSh1KSlyZXR1cm4gQXJyYXkuaXNBcnJheShyKSYmdS5sZW5ndGg9PT1yLmxlbmd0aCYmdS5ldmVyeShmdW5jdGlvbihlLHUpe3JldHVybiB2YWx1ZUVxdWFsKGUsclt1XSk7fSk7aWYoXCJvYmplY3RcIiE9KHR5cGVvZiB1PT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YodSkpJiZcIm9iamVjdFwiIT0odHlwZW9mIHI9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZihyKSkpcmV0dXJuITE7dmFyIGU9dmFsdWVPZih1KSx0PXZhbHVlT2Yocik7cmV0dXJuIGUhPT11fHx0IT09cj92YWx1ZUVxdWFsKGUsdCk6T2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSx1LHIpKS5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4gdmFsdWVFcXVhbCh1W2VdLHJbZV0pO30pO31tb2R1bGUuZXhwb3J0cz12YWx1ZUVxdWFsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92YWx1ZS1lcXVhbC9janMvdmFsdWUtZXF1YWwubWluLmpzXG4vLyBtb2R1bGUgaWQgPSAyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIHZhbHVlT2Yob2JqKXtyZXR1cm4gb2JqLnZhbHVlT2Y/b2JqLnZhbHVlT2YoKTpPYmplY3QucHJvdG90eXBlLnZhbHVlT2YuY2FsbChvYmopO31mdW5jdGlvbiB2YWx1ZUVxdWFsKGEsYil7Ly8gVGVzdCBmb3Igc3RyaWN0IGVxdWFsaXR5IGZpcnN0LlxuaWYoYT09PWIpcmV0dXJuIHRydWU7Ly8gT3RoZXJ3aXNlLCBpZiBlaXRoZXIgb2YgdGhlbSA9PSBudWxsIHRoZXkgYXJlIG5vdCBlcXVhbC5cbmlmKGE9PW51bGx8fGI9PW51bGwpcmV0dXJuIGZhbHNlO2lmKEFycmF5LmlzQXJyYXkoYSkpe3JldHVybiBBcnJheS5pc0FycmF5KGIpJiZhLmxlbmd0aD09PWIubGVuZ3RoJiZhLmV2ZXJ5KGZ1bmN0aW9uKGl0ZW0saW5kZXgpe3JldHVybiB2YWx1ZUVxdWFsKGl0ZW0sYltpbmRleF0pO30pO31pZigodHlwZW9mIGE9PT0ndW5kZWZpbmVkJz8ndW5kZWZpbmVkJzpfdHlwZW9mKGEpKT09PSdvYmplY3QnfHwodHlwZW9mIGI9PT0ndW5kZWZpbmVkJz8ndW5kZWZpbmVkJzpfdHlwZW9mKGIpKT09PSdvYmplY3QnKXt2YXIgYVZhbHVlPXZhbHVlT2YoYSk7dmFyIGJWYWx1ZT12YWx1ZU9mKGIpO2lmKGFWYWx1ZSE9PWF8fGJWYWx1ZSE9PWIpcmV0dXJuIHZhbHVlRXF1YWwoYVZhbHVlLGJWYWx1ZSk7cmV0dXJuIE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sYSxiKSkuZXZlcnkoZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVFcXVhbChhW2tleV0sYltrZXldKTt9KTt9cmV0dXJuIGZhbHNlO31tb2R1bGUuZXhwb3J0cz12YWx1ZUVxdWFsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi92YWx1ZS1lcXVhbC9janMvdmFsdWUtZXF1YWwuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgaXNQcm9kdWN0aW9uPXByb2Nlc3MuZW52Lk5PREVfRU5WPT09J3Byb2R1Y3Rpb24nO2Z1bmN0aW9uIHdhcm5pbmcoY29uZGl0aW9uLG1lc3NhZ2Upe2lmKCFpc1Byb2R1Y3Rpb24pe2lmKGNvbmRpdGlvbil7cmV0dXJuO312YXIgdGV4dD1cIldhcm5pbmc6IFwiK21lc3NhZ2U7aWYodHlwZW9mIGNvbnNvbGUhPT0ndW5kZWZpbmVkJyl7Y29uc29sZS53YXJuKHRleHQpO310cnl7dGhyb3cgRXJyb3IodGV4dCk7fWNhdGNoKHgpe319fW1vZHVsZS5leHBvcnRzPXdhcm5pbmc7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Rpbnktd2FybmluZy9kaXN0L3Rpbnktd2FybmluZy5janMuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgaXNQcm9kdWN0aW9uPXByb2Nlc3MuZW52Lk5PREVfRU5WPT09J3Byb2R1Y3Rpb24nO3ZhciBwcmVmaXg9J0ludmFyaWFudCBmYWlsZWQnO2Z1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sbWVzc2FnZSl7aWYoY29uZGl0aW9uKXtyZXR1cm47fWlmKGlzUHJvZHVjdGlvbil7dGhyb3cgbmV3IEVycm9yKHByZWZpeCk7fWVsc2V7dGhyb3cgbmV3IEVycm9yKHByZWZpeCtcIjogXCIrKG1lc3NhZ2V8fCcnKSk7fX1tb2R1bGUuZXhwb3J0cz1pbnZhcmlhbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3RpbnktaW52YXJpYW50L2Rpc3QvdGlueS1pbnZhcmlhbnQuY2pzLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCdfX2VzTW9kdWxlJyx7dmFsdWU6dHJ1ZX0pO2Z1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdChleCl7cmV0dXJuIGV4JiYodHlwZW9mIGV4PT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihleCkpPT09J29iamVjdCcmJidkZWZhdWx0J2luIGV4P2V4WydkZWZhdWx0J106ZXg7fXZhciByZXNvbHZlUGF0aG5hbWU9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ3Jlc29sdmUtcGF0aG5hbWUnKSk7dmFyIHZhbHVlRXF1YWw9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ3ZhbHVlLWVxdWFsJykpO3ZhciB3YXJuaW5nPV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCd0aW55LXdhcm5pbmcnKSk7dmFyIGludmFyaWFudD1faW50ZXJvcERlZmF1bHQocmVxdWlyZSgndGlueS1pbnZhcmlhbnQnKSk7ZnVuY3Rpb24gX2V4dGVuZHMoKXtfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldO2Zvcih2YXIga2V5IGluIHNvdXJjZSl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSxrZXkpKXt0YXJnZXRba2V5XT1zb3VyY2Vba2V5XTt9fX1yZXR1cm4gdGFyZ2V0O307cmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHBhdGgpe3JldHVybiBwYXRoLmNoYXJBdCgwKT09PScvJz9wYXRoOicvJytwYXRoO31mdW5jdGlvbiBzdHJpcExlYWRpbmdTbGFzaChwYXRoKXtyZXR1cm4gcGF0aC5jaGFyQXQoMCk9PT0nLyc/cGF0aC5zdWJzdHIoMSk6cGF0aDt9ZnVuY3Rpb24gaGFzQmFzZW5hbWUocGF0aCxwcmVmaXgpe3JldHVybiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihwcmVmaXgudG9Mb3dlckNhc2UoKSk9PT0wJiYnLz8jJy5pbmRleE9mKHBhdGguY2hhckF0KHByZWZpeC5sZW5ndGgpKSE9PS0xO31mdW5jdGlvbiBzdHJpcEJhc2VuYW1lKHBhdGgscHJlZml4KXtyZXR1cm4gaGFzQmFzZW5hbWUocGF0aCxwcmVmaXgpP3BhdGguc3Vic3RyKHByZWZpeC5sZW5ndGgpOnBhdGg7fWZ1bmN0aW9uIHN0cmlwVHJhaWxpbmdTbGFzaChwYXRoKXtyZXR1cm4gcGF0aC5jaGFyQXQocGF0aC5sZW5ndGgtMSk9PT0nLyc/cGF0aC5zbGljZSgwLC0xKTpwYXRoO31mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCl7dmFyIHBhdGhuYW1lPXBhdGh8fCcvJzt2YXIgc2VhcmNoPScnO3ZhciBoYXNoPScnO3ZhciBoYXNoSW5kZXg9cGF0aG5hbWUuaW5kZXhPZignIycpO2lmKGhhc2hJbmRleCE9PS0xKXtoYXNoPXBhdGhuYW1lLnN1YnN0cihoYXNoSW5kZXgpO3BhdGhuYW1lPXBhdGhuYW1lLnN1YnN0cigwLGhhc2hJbmRleCk7fXZhciBzZWFyY2hJbmRleD1wYXRobmFtZS5pbmRleE9mKCc/Jyk7aWYoc2VhcmNoSW5kZXghPT0tMSl7c2VhcmNoPXBhdGhuYW1lLnN1YnN0cihzZWFyY2hJbmRleCk7cGF0aG5hbWU9cGF0aG5hbWUuc3Vic3RyKDAsc2VhcmNoSW5kZXgpO31yZXR1cm57cGF0aG5hbWU6cGF0aG5hbWUsc2VhcmNoOnNlYXJjaD09PSc/Jz8nJzpzZWFyY2gsaGFzaDpoYXNoPT09JyMnPycnOmhhc2h9O31mdW5jdGlvbiBjcmVhdGVQYXRoKGxvY2F0aW9uKXt2YXIgcGF0aG5hbWU9bG9jYXRpb24ucGF0aG5hbWUsc2VhcmNoPWxvY2F0aW9uLnNlYXJjaCxoYXNoPWxvY2F0aW9uLmhhc2g7dmFyIHBhdGg9cGF0aG5hbWV8fCcvJztpZihzZWFyY2gmJnNlYXJjaCE9PSc/JylwYXRoKz1zZWFyY2guY2hhckF0KDApPT09Jz8nP3NlYXJjaDpcIj9cIitzZWFyY2g7aWYoaGFzaCYmaGFzaCE9PScjJylwYXRoKz1oYXNoLmNoYXJBdCgwKT09PScjJz9oYXNoOlwiI1wiK2hhc2g7cmV0dXJuIHBhdGg7fWZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHBhdGgsc3RhdGUsa2V5LGN1cnJlbnRMb2NhdGlvbil7dmFyIGxvY2F0aW9uO2lmKHR5cGVvZiBwYXRoPT09J3N0cmluZycpey8vIFR3by1hcmcgZm9ybTogcHVzaChwYXRoLCBzdGF0ZSlcbmxvY2F0aW9uPXBhcnNlUGF0aChwYXRoKTtsb2NhdGlvbi5zdGF0ZT1zdGF0ZTt9ZWxzZXsvLyBPbmUtYXJnIGZvcm06IHB1c2gobG9jYXRpb24pXG5sb2NhdGlvbj1fZXh0ZW5kcyh7fSxwYXRoKTtpZihsb2NhdGlvbi5wYXRobmFtZT09PXVuZGVmaW5lZClsb2NhdGlvbi5wYXRobmFtZT0nJztpZihsb2NhdGlvbi5zZWFyY2gpe2lmKGxvY2F0aW9uLnNlYXJjaC5jaGFyQXQoMCkhPT0nPycpbG9jYXRpb24uc2VhcmNoPSc/Jytsb2NhdGlvbi5zZWFyY2g7fWVsc2V7bG9jYXRpb24uc2VhcmNoPScnO31pZihsb2NhdGlvbi5oYXNoKXtpZihsb2NhdGlvbi5oYXNoLmNoYXJBdCgwKSE9PScjJylsb2NhdGlvbi5oYXNoPScjJytsb2NhdGlvbi5oYXNoO31lbHNle2xvY2F0aW9uLmhhc2g9Jyc7fWlmKHN0YXRlIT09dW5kZWZpbmVkJiZsb2NhdGlvbi5zdGF0ZT09PXVuZGVmaW5lZClsb2NhdGlvbi5zdGF0ZT1zdGF0ZTt9dHJ5e2xvY2F0aW9uLnBhdGhuYW1lPWRlY29kZVVSSShsb2NhdGlvbi5wYXRobmFtZSk7fWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBVUklFcnJvcil7dGhyb3cgbmV3IFVSSUVycm9yKCdQYXRobmFtZSBcIicrbG9jYXRpb24ucGF0aG5hbWUrJ1wiIGNvdWxkIG5vdCBiZSBkZWNvZGVkLiAnKydUaGlzIGlzIGxpa2VseSBjYXVzZWQgYnkgYW4gaW52YWxpZCBwZXJjZW50LWVuY29kaW5nLicpO31lbHNle3Rocm93IGU7fX1pZihrZXkpbG9jYXRpb24ua2V5PWtleTtpZihjdXJyZW50TG9jYXRpb24pey8vIFJlc29sdmUgaW5jb21wbGV0ZS9yZWxhdGl2ZSBwYXRobmFtZSByZWxhdGl2ZSB0byBjdXJyZW50IGxvY2F0aW9uLlxuaWYoIWxvY2F0aW9uLnBhdGhuYW1lKXtsb2NhdGlvbi5wYXRobmFtZT1jdXJyZW50TG9jYXRpb24ucGF0aG5hbWU7fWVsc2UgaWYobG9jYXRpb24ucGF0aG5hbWUuY2hhckF0KDApIT09Jy8nKXtsb2NhdGlvbi5wYXRobmFtZT1yZXNvbHZlUGF0aG5hbWUobG9jYXRpb24ucGF0aG5hbWUsY3VycmVudExvY2F0aW9uLnBhdGhuYW1lKTt9fWVsc2V7Ly8gV2hlbiB0aGVyZSBpcyBubyBwcmlvciBsb2NhdGlvbiBhbmQgcGF0aG5hbWUgaXMgZW1wdHksIHNldCBpdCB0byAvXG5pZighbG9jYXRpb24ucGF0aG5hbWUpe2xvY2F0aW9uLnBhdGhuYW1lPScvJzt9fXJldHVybiBsb2NhdGlvbjt9ZnVuY3Rpb24gbG9jYXRpb25zQXJlRXF1YWwoYSxiKXtyZXR1cm4gYS5wYXRobmFtZT09PWIucGF0aG5hbWUmJmEuc2VhcmNoPT09Yi5zZWFyY2gmJmEuaGFzaD09PWIuaGFzaCYmYS5rZXk9PT1iLmtleSYmdmFsdWVFcXVhbChhLnN0YXRlLGIuc3RhdGUpO31mdW5jdGlvbiBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpe3ZhciBwcm9tcHQ9bnVsbDtmdW5jdGlvbiBzZXRQcm9tcHQobmV4dFByb21wdCl7d2FybmluZyhwcm9tcHQ9PW51bGwsJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJyk7cHJvbXB0PW5leHRQcm9tcHQ7cmV0dXJuIGZ1bmN0aW9uKCl7aWYocHJvbXB0PT09bmV4dFByb21wdClwcm9tcHQ9bnVsbDt9O31mdW5jdGlvbiBjb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLGFjdGlvbixnZXRVc2VyQ29uZmlybWF0aW9uLGNhbGxiYWNrKXsvLyBUT0RPOiBJZiBhbm90aGVyIHRyYW5zaXRpb24gc3RhcnRzIHdoaWxlIHdlJ3JlIHN0aWxsIGNvbmZpcm1pbmdcbi8vIHRoZSBwcmV2aW91cyBvbmUsIHdlIG1heSBlbmQgdXAgaW4gYSB3ZWlyZCBzdGF0ZS4gRmlndXJlIG91dCB0aGVcbi8vIGJlc3Qgd2F5IHRvIGhhbmRsZSB0aGlzLlxuaWYocHJvbXB0IT1udWxsKXt2YXIgcmVzdWx0PXR5cGVvZiBwcm9tcHQ9PT0nZnVuY3Rpb24nP3Byb21wdChsb2NhdGlvbixhY3Rpb24pOnByb21wdDtpZih0eXBlb2YgcmVzdWx0PT09J3N0cmluZycpe2lmKHR5cGVvZiBnZXRVc2VyQ29uZmlybWF0aW9uPT09J2Z1bmN0aW9uJyl7Z2V0VXNlckNvbmZpcm1hdGlvbihyZXN1bHQsY2FsbGJhY2spO31lbHNle3dhcm5pbmcoZmFsc2UsJ0EgaGlzdG9yeSBuZWVkcyBhIGdldFVzZXJDb25maXJtYXRpb24gZnVuY3Rpb24gaW4gb3JkZXIgdG8gdXNlIGEgcHJvbXB0IG1lc3NhZ2UnKTtjYWxsYmFjayh0cnVlKTt9fWVsc2V7Ly8gUmV0dXJuIGZhbHNlIGZyb20gYSB0cmFuc2l0aW9uIGhvb2sgdG8gY2FuY2VsIHRoZSB0cmFuc2l0aW9uLlxuY2FsbGJhY2socmVzdWx0IT09ZmFsc2UpO319ZWxzZXtjYWxsYmFjayh0cnVlKTt9fXZhciBsaXN0ZW5lcnM9W107ZnVuY3Rpb24gYXBwZW5kTGlzdGVuZXIoZm4pe3ZhciBpc0FjdGl2ZT10cnVlO2Z1bmN0aW9uIGxpc3RlbmVyKCl7aWYoaXNBY3RpdmUpZm4uYXBwbHkodm9pZCAwLGFyZ3VtZW50cyk7fWxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtyZXR1cm4gZnVuY3Rpb24oKXtpc0FjdGl2ZT1mYWxzZTtsaXN0ZW5lcnM9bGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbSE9PWxpc3RlbmVyO30pO307fWZ1bmN0aW9uIG5vdGlmeUxpc3RlbmVycygpe2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLGFyZ3M9bmV3IEFycmF5KF9sZW4pLF9rZXk9MDtfa2V5PF9sZW47X2tleSsrKXthcmdzW19rZXldPWFyZ3VtZW50c1tfa2V5XTt9bGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpe3JldHVybiBsaXN0ZW5lci5hcHBseSh2b2lkIDAsYXJncyk7fSk7fXJldHVybntzZXRQcm9tcHQ6c2V0UHJvbXB0LGNvbmZpcm1UcmFuc2l0aW9uVG86Y29uZmlybVRyYW5zaXRpb25UbyxhcHBlbmRMaXN0ZW5lcjphcHBlbmRMaXN0ZW5lcixub3RpZnlMaXN0ZW5lcnM6bm90aWZ5TGlzdGVuZXJzfTt9dmFyIGNhblVzZURPTT0hISh0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcmJndpbmRvdy5kb2N1bWVudCYmd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO2Z1bmN0aW9uIGdldENvbmZpcm1hdGlvbihtZXNzYWdlLGNhbGxiYWNrKXtjYWxsYmFjayh3aW5kb3cuY29uZmlybShtZXNzYWdlKSk7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby1hbGVydFxufS8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBpcyBzdXBwb3J0ZWQuIFRha2VuIGZyb20gTW9kZXJuaXpyLlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL2ZlYXR1cmUtZGV0ZWN0cy9oaXN0b3J5LmpzXG4gKiBjaGFuZ2VkIHRvIGF2b2lkIGZhbHNlIG5lZ2F0aXZlcyBmb3IgV2luZG93cyBQaG9uZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXJvdXRlci9pc3N1ZXMvNTg2XG4gKi9mdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKXt2YXIgdWE9d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7aWYoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSE9PS0xfHx1YS5pbmRleE9mKCdBbmRyb2lkIDQuMCcpIT09LTEpJiZ1YS5pbmRleE9mKCdNb2JpbGUgU2FmYXJpJykhPT0tMSYmdWEuaW5kZXhPZignQ2hyb21lJyk9PT0tMSYmdWEuaW5kZXhPZignV2luZG93cyBQaG9uZScpPT09LTEpcmV0dXJuIGZhbHNlO3JldHVybiB3aW5kb3cuaGlzdG9yeSYmJ3B1c2hTdGF0ZSdpbiB3aW5kb3cuaGlzdG9yeTt9LyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYnJvd3NlciBmaXJlcyBwb3BzdGF0ZSBvbiBoYXNoIGNoYW5nZS5cbiAqIElFMTAgYW5kIElFMTEgZG8gbm90LlxuICovZnVuY3Rpb24gc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpe3JldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdUcmlkZW50Jyk9PT0tMTt9LyoqXG4gKiBSZXR1cm5zIGZhbHNlIGlmIHVzaW5nIGdvKG4pIHdpdGggaGFzaCBoaXN0b3J5IGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQuXG4gKi9mdW5jdGlvbiBzdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCgpe3JldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94Jyk9PT0tMTt9LyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBnaXZlbiBwb3BzdGF0ZSBldmVudCBpcyBhbiBleHRyYW5lb3VzIFdlYktpdCBldmVudC5cbiAqIEFjY291bnRzIGZvciB0aGUgZmFjdCB0aGF0IENocm9tZSBvbiBpT1MgZmlyZXMgcmVhbCBwb3BzdGF0ZSBldmVudHNcbiAqIGNvbnRhaW5pbmcgdW5kZWZpbmVkIHN0YXRlIHdoZW4gcHJlc3NpbmcgdGhlIGJhY2sgYnV0dG9uLlxuICovZnVuY3Rpb24gaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudChldmVudCl7cmV0dXJuIGV2ZW50LnN0YXRlPT09dW5kZWZpbmVkJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0NyaU9TJyk9PT0tMTt9dmFyIFBvcFN0YXRlRXZlbnQ9J3BvcHN0YXRlJzt2YXIgSGFzaENoYW5nZUV2ZW50PSdoYXNoY2hhbmdlJztmdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUoKXt0cnl7cmV0dXJuIHdpbmRvdy5oaXN0b3J5LnN0YXRlfHx7fTt9Y2F0Y2goZSl7Ly8gSUUgMTEgc29tZXRpbWVzIHRocm93cyB3aGVuIGFjY2Vzc2luZyB3aW5kb3cuaGlzdG9yeS5zdGF0ZVxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SZWFjdFRyYWluaW5nL2hpc3RvcnkvcHVsbC8yODlcbnJldHVybnt9O319LyoqXG4gKiBDcmVhdGVzIGEgaGlzdG9yeSBvYmplY3QgdGhhdCB1c2VzIHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBpbmNsdWRpbmdcbiAqIHB1c2hTdGF0ZSwgcmVwbGFjZVN0YXRlLCBhbmQgdGhlIHBvcHN0YXRlIGV2ZW50LlxuICovZnVuY3Rpb24gY3JlYXRlQnJvd3Nlckhpc3RvcnkocHJvcHMpe2lmKHByb3BzPT09dm9pZCAwKXtwcm9wcz17fTt9IWNhblVzZURPTT9pbnZhcmlhbnQoZmFsc2UsJ0Jyb3dzZXIgaGlzdG9yeSBuZWVkcyBhIERPTScpOnZvaWQgMDt2YXIgZ2xvYmFsSGlzdG9yeT13aW5kb3cuaGlzdG9yeTt2YXIgY2FuVXNlSGlzdG9yeT1zdXBwb3J0c0hpc3RvcnkoKTt2YXIgbmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXI9IXN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UoKTt2YXIgX3Byb3BzPXByb3BzLF9wcm9wcyRmb3JjZVJlZnJlc2g9X3Byb3BzLmZvcmNlUmVmcmVzaCxmb3JjZVJlZnJlc2g9X3Byb3BzJGZvcmNlUmVmcmVzaD09PXZvaWQgMD9mYWxzZTpfcHJvcHMkZm9yY2VSZWZyZXNoLF9wcm9wcyRnZXRVc2VyQ29uZmlybT1fcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixnZXRVc2VyQ29uZmlybWF0aW9uPV9wcm9wcyRnZXRVc2VyQ29uZmlybT09PXZvaWQgMD9nZXRDb25maXJtYXRpb246X3Byb3BzJGdldFVzZXJDb25maXJtLF9wcm9wcyRrZXlMZW5ndGg9X3Byb3BzLmtleUxlbmd0aCxrZXlMZW5ndGg9X3Byb3BzJGtleUxlbmd0aD09PXZvaWQgMD82Ol9wcm9wcyRrZXlMZW5ndGg7dmFyIGJhc2VuYW1lPXByb3BzLmJhc2VuYW1lP3N0cmlwVHJhaWxpbmdTbGFzaChhZGRMZWFkaW5nU2xhc2gocHJvcHMuYmFzZW5hbWUpKTonJztmdW5jdGlvbiBnZXRET01Mb2NhdGlvbihoaXN0b3J5U3RhdGUpe3ZhciBfcmVmPWhpc3RvcnlTdGF0ZXx8e30sa2V5PV9yZWYua2V5LHN0YXRlPV9yZWYuc3RhdGU7dmFyIF93aW5kb3ckbG9jYXRpb249d2luZG93LmxvY2F0aW9uLHBhdGhuYW1lPV93aW5kb3ckbG9jYXRpb24ucGF0aG5hbWUsc2VhcmNoPV93aW5kb3ckbG9jYXRpb24uc2VhcmNoLGhhc2g9X3dpbmRvdyRsb2NhdGlvbi5oYXNoO3ZhciBwYXRoPXBhdGhuYW1lK3NlYXJjaCtoYXNoO3dhcm5pbmcoIWJhc2VuYW1lfHxoYXNCYXNlbmFtZShwYXRoLGJhc2VuYW1lKSwnWW91IGFyZSBhdHRlbXB0aW5nIHRvIHVzZSBhIGJhc2VuYW1lIG9uIGEgcGFnZSB3aG9zZSBVUkwgcGF0aCBkb2VzIG5vdCBiZWdpbiAnKyd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicrcGF0aCsnXCIgdG8gYmVnaW4gd2l0aCBcIicrYmFzZW5hbWUrJ1wiLicpO2lmKGJhc2VuYW1lKXBhdGg9c3RyaXBCYXNlbmFtZShwYXRoLGJhc2VuYW1lKTtyZXR1cm4gY3JlYXRlTG9jYXRpb24ocGF0aCxzdGF0ZSxrZXkpO31mdW5jdGlvbiBjcmVhdGVLZXkoKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsa2V5TGVuZ3RoKTt9dmFyIHRyYW5zaXRpb25NYW5hZ2VyPWNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCk7ZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKXtfZXh0ZW5kcyhoaXN0b3J5LG5leHRTdGF0ZSk7aGlzdG9yeS5sZW5ndGg9Z2xvYmFsSGlzdG9yeS5sZW5ndGg7dHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24saGlzdG9yeS5hY3Rpb24pO31mdW5jdGlvbiBoYW5kbGVQb3BTdGF0ZShldmVudCl7Ly8gSWdub3JlIGV4dHJhbmVvdXMgcG9wc3RhdGUgZXZlbnRzIGluIFdlYktpdC5cbmlmKGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpKXJldHVybjtoYW5kbGVQb3AoZ2V0RE9NTG9jYXRpb24oZXZlbnQuc3RhdGUpKTt9ZnVuY3Rpb24gaGFuZGxlSGFzaENoYW5nZSgpe2hhbmRsZVBvcChnZXRET01Mb2NhdGlvbihnZXRIaXN0b3J5U3RhdGUoKSkpO312YXIgZm9yY2VOZXh0UG9wPWZhbHNlO2Z1bmN0aW9uIGhhbmRsZVBvcChsb2NhdGlvbil7aWYoZm9yY2VOZXh0UG9wKXtmb3JjZU5leHRQb3A9ZmFsc2U7c2V0U3RhdGUoKTt9ZWxzZXt2YXIgYWN0aW9uPSdQT1AnO3RyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sYWN0aW9uLGdldFVzZXJDb25maXJtYXRpb24sZnVuY3Rpb24ob2spe2lmKG9rKXtzZXRTdGF0ZSh7YWN0aW9uOmFjdGlvbixsb2NhdGlvbjpsb2NhdGlvbn0pO31lbHNle3JldmVydFBvcChsb2NhdGlvbik7fX0pO319ZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbil7dmFyIHRvTG9jYXRpb249aGlzdG9yeS5sb2NhdGlvbjsvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuLy8ga2VlcGluZyBhIGxpc3Qgb2Yga2V5cyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuLy8gSW5zdGVhZCwgd2UganVzdCBkZWZhdWx0IHRvIDAgZm9yIGtleXMgd2UgZG9uJ3Qga25vdy5cbnZhciB0b0luZGV4PWFsbEtleXMuaW5kZXhPZih0b0xvY2F0aW9uLmtleSk7aWYodG9JbmRleD09PS0xKXRvSW5kZXg9MDt2YXIgZnJvbUluZGV4PWFsbEtleXMuaW5kZXhPZihmcm9tTG9jYXRpb24ua2V5KTtpZihmcm9tSW5kZXg9PT0tMSlmcm9tSW5kZXg9MDt2YXIgZGVsdGE9dG9JbmRleC1mcm9tSW5kZXg7aWYoZGVsdGEpe2ZvcmNlTmV4dFBvcD10cnVlO2dvKGRlbHRhKTt9fXZhciBpbml0aWFsTG9jYXRpb249Z2V0RE9NTG9jYXRpb24oZ2V0SGlzdG9yeVN0YXRlKCkpO3ZhciBhbGxLZXlzPVtpbml0aWFsTG9jYXRpb24ua2V5XTsvLyBQdWJsaWMgaW50ZXJmYWNlXG5mdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKXtyZXR1cm4gYmFzZW5hbWUrY3JlYXRlUGF0aChsb2NhdGlvbik7fWZ1bmN0aW9uIHB1c2gocGF0aCxzdGF0ZSl7d2FybmluZyghKCh0eXBlb2YgcGF0aD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocGF0aCkpPT09J29iamVjdCcmJnBhdGguc3RhdGUhPT11bmRlZmluZWQmJnN0YXRlIT09dW5kZWZpbmVkKSwnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJysnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7dmFyIGFjdGlvbj0nUFVTSCc7dmFyIGxvY2F0aW9uPWNyZWF0ZUxvY2F0aW9uKHBhdGgsc3RhdGUsY3JlYXRlS2V5KCksaGlzdG9yeS5sb2NhdGlvbik7dHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbixhY3Rpb24sZ2V0VXNlckNvbmZpcm1hdGlvbixmdW5jdGlvbihvayl7aWYoIW9rKXJldHVybjt2YXIgaHJlZj1jcmVhdGVIcmVmKGxvY2F0aW9uKTt2YXIga2V5PWxvY2F0aW9uLmtleSxzdGF0ZT1sb2NhdGlvbi5zdGF0ZTtpZihjYW5Vc2VIaXN0b3J5KXtnbG9iYWxIaXN0b3J5LnB1c2hTdGF0ZSh7a2V5OmtleSxzdGF0ZTpzdGF0ZX0sbnVsbCxocmVmKTtpZihmb3JjZVJlZnJlc2gpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPWhyZWY7fWVsc2V7dmFyIHByZXZJbmRleD1hbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO3ZhciBuZXh0S2V5cz1hbGxLZXlzLnNsaWNlKDAscHJldkluZGV4KzEpO25leHRLZXlzLnB1c2gobG9jYXRpb24ua2V5KTthbGxLZXlzPW5leHRLZXlzO3NldFN0YXRlKHthY3Rpb246YWN0aW9uLGxvY2F0aW9uOmxvY2F0aW9ufSk7fX1lbHNle3dhcm5pbmcoc3RhdGU9PT11bmRlZmluZWQsJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKTt3aW5kb3cubG9jYXRpb24uaHJlZj1ocmVmO319KTt9ZnVuY3Rpb24gcmVwbGFjZShwYXRoLHN0YXRlKXt3YXJuaW5nKCEoKHR5cGVvZiBwYXRoPT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihwYXRoKSk9PT0nb2JqZWN0JyYmcGF0aC5zdGF0ZSE9PXVuZGVmaW5lZCYmc3RhdGUhPT11bmRlZmluZWQpLCdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byByZXBsYWNlIHdoZW4gdGhlIDFzdCAnKydhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKTt2YXIgYWN0aW9uPSdSRVBMQUNFJzt2YXIgbG9jYXRpb249Y3JlYXRlTG9jYXRpb24ocGF0aCxzdGF0ZSxjcmVhdGVLZXkoKSxoaXN0b3J5LmxvY2F0aW9uKTt0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLGFjdGlvbixnZXRVc2VyQ29uZmlybWF0aW9uLGZ1bmN0aW9uKG9rKXtpZighb2spcmV0dXJuO3ZhciBocmVmPWNyZWF0ZUhyZWYobG9jYXRpb24pO3ZhciBrZXk9bG9jYXRpb24ua2V5LHN0YXRlPWxvY2F0aW9uLnN0YXRlO2lmKGNhblVzZUhpc3Rvcnkpe2dsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHtrZXk6a2V5LHN0YXRlOnN0YXRlfSxudWxsLGhyZWYpO2lmKGZvcmNlUmVmcmVzaCl7d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaHJlZik7fWVsc2V7dmFyIHByZXZJbmRleD1hbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO2lmKHByZXZJbmRleCE9PS0xKWFsbEtleXNbcHJldkluZGV4XT1sb2NhdGlvbi5rZXk7c2V0U3RhdGUoe2FjdGlvbjphY3Rpb24sbG9jYXRpb246bG9jYXRpb259KTt9fWVsc2V7d2FybmluZyhzdGF0ZT09PXVuZGVmaW5lZCwnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpO3dpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO319KTt9ZnVuY3Rpb24gZ28obil7Z2xvYmFsSGlzdG9yeS5nbyhuKTt9ZnVuY3Rpb24gZ29CYWNrKCl7Z28oLTEpO31mdW5jdGlvbiBnb0ZvcndhcmQoKXtnbygxKTt9dmFyIGxpc3RlbmVyQ291bnQ9MDtmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSl7bGlzdGVuZXJDb3VudCs9ZGVsdGE7aWYobGlzdGVuZXJDb3VudD09PTEmJmRlbHRhPT09MSl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUG9wU3RhdGVFdmVudCxoYW5kbGVQb3BTdGF0ZSk7aWYobmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIpd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoSGFzaENoYW5nZUV2ZW50LGhhbmRsZUhhc2hDaGFuZ2UpO31lbHNlIGlmKGxpc3RlbmVyQ291bnQ9PT0wKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihQb3BTdGF0ZUV2ZW50LGhhbmRsZVBvcFN0YXRlKTtpZihuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lcil3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihIYXNoQ2hhbmdlRXZlbnQsaGFuZGxlSGFzaENoYW5nZSk7fX12YXIgaXNCbG9ja2VkPWZhbHNlO2Z1bmN0aW9uIGJsb2NrKHByb21wdCl7aWYocHJvbXB0PT09dm9pZCAwKXtwcm9tcHQ9ZmFsc2U7fXZhciB1bmJsb2NrPXRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO2lmKCFpc0Jsb2NrZWQpe2NoZWNrRE9NTGlzdGVuZXJzKDEpO2lzQmxvY2tlZD10cnVlO31yZXR1cm4gZnVuY3Rpb24oKXtpZihpc0Jsb2NrZWQpe2lzQmxvY2tlZD1mYWxzZTtjaGVja0RPTUxpc3RlbmVycygtMSk7fXJldHVybiB1bmJsb2NrKCk7fTt9ZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKXt2YXIgdW5saXN0ZW49dHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO2NoZWNrRE9NTGlzdGVuZXJzKDEpO3JldHVybiBmdW5jdGlvbigpe2NoZWNrRE9NTGlzdGVuZXJzKC0xKTt1bmxpc3RlbigpO307fXZhciBoaXN0b3J5PXtsZW5ndGg6Z2xvYmFsSGlzdG9yeS5sZW5ndGgsYWN0aW9uOidQT1AnLGxvY2F0aW9uOmluaXRpYWxMb2NhdGlvbixjcmVhdGVIcmVmOmNyZWF0ZUhyZWYscHVzaDpwdXNoLHJlcGxhY2U6cmVwbGFjZSxnbzpnbyxnb0JhY2s6Z29CYWNrLGdvRm9yd2FyZDpnb0ZvcndhcmQsYmxvY2s6YmxvY2ssbGlzdGVuOmxpc3Rlbn07cmV0dXJuIGhpc3Rvcnk7fXZhciBIYXNoQ2hhbmdlRXZlbnQkMT0naGFzaGNoYW5nZSc7dmFyIEhhc2hQYXRoQ29kZXJzPXtoYXNoYmFuZzp7ZW5jb2RlUGF0aDpmdW5jdGlvbiBlbmNvZGVQYXRoKHBhdGgpe3JldHVybiBwYXRoLmNoYXJBdCgwKT09PSchJz9wYXRoOichLycrc3RyaXBMZWFkaW5nU2xhc2gocGF0aCk7fSxkZWNvZGVQYXRoOmZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCl7cmV0dXJuIHBhdGguY2hhckF0KDApPT09JyEnP3BhdGguc3Vic3RyKDEpOnBhdGg7fX0sbm9zbGFzaDp7ZW5jb2RlUGF0aDpzdHJpcExlYWRpbmdTbGFzaCxkZWNvZGVQYXRoOmFkZExlYWRpbmdTbGFzaH0sc2xhc2g6e2VuY29kZVBhdGg6YWRkTGVhZGluZ1NsYXNoLGRlY29kZVBhdGg6YWRkTGVhZGluZ1NsYXNofX07ZnVuY3Rpb24gc3RyaXBIYXNoKHVybCl7dmFyIGhhc2hJbmRleD11cmwuaW5kZXhPZignIycpO3JldHVybiBoYXNoSW5kZXg9PT0tMT91cmw6dXJsLnNsaWNlKDAsaGFzaEluZGV4KTt9ZnVuY3Rpb24gZ2V0SGFzaFBhdGgoKXsvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4vLyBjb25zaXN0ZW50IGFjcm9zcyBicm93c2VycyAtIEZpcmVmb3ggd2lsbCBwcmUtZGVjb2RlIGl0IVxudmFyIGhyZWY9d2luZG93LmxvY2F0aW9uLmhyZWY7dmFyIGhhc2hJbmRleD1ocmVmLmluZGV4T2YoJyMnKTtyZXR1cm4gaGFzaEluZGV4PT09LTE/Jyc6aHJlZi5zdWJzdHJpbmcoaGFzaEluZGV4KzEpO31mdW5jdGlvbiBwdXNoSGFzaFBhdGgocGF0aCl7d2luZG93LmxvY2F0aW9uLmhhc2g9cGF0aDt9ZnVuY3Rpb24gcmVwbGFjZUhhc2hQYXRoKHBhdGgpe3dpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHN0cmlwSGFzaCh3aW5kb3cubG9jYXRpb24uaHJlZikrJyMnK3BhdGgpO31mdW5jdGlvbiBjcmVhdGVIYXNoSGlzdG9yeShwcm9wcyl7aWYocHJvcHM9PT12b2lkIDApe3Byb3BzPXt9O30hY2FuVXNlRE9NP2ludmFyaWFudChmYWxzZSwnSGFzaCBoaXN0b3J5IG5lZWRzIGEgRE9NJyk6dm9pZCAwO3ZhciBnbG9iYWxIaXN0b3J5PXdpbmRvdy5oaXN0b3J5O3ZhciBjYW5Hb1dpdGhvdXRSZWxvYWQ9c3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKTt2YXIgX3Byb3BzPXByb3BzLF9wcm9wcyRnZXRVc2VyQ29uZmlybT1fcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixnZXRVc2VyQ29uZmlybWF0aW9uPV9wcm9wcyRnZXRVc2VyQ29uZmlybT09PXZvaWQgMD9nZXRDb25maXJtYXRpb246X3Byb3BzJGdldFVzZXJDb25maXJtLF9wcm9wcyRoYXNoVHlwZT1fcHJvcHMuaGFzaFR5cGUsaGFzaFR5cGU9X3Byb3BzJGhhc2hUeXBlPT09dm9pZCAwPydzbGFzaCc6X3Byb3BzJGhhc2hUeXBlO3ZhciBiYXNlbmFtZT1wcm9wcy5iYXNlbmFtZT9zdHJpcFRyYWlsaW5nU2xhc2goYWRkTGVhZGluZ1NsYXNoKHByb3BzLmJhc2VuYW1lKSk6Jyc7dmFyIF9IYXNoUGF0aENvZGVycyRoYXNoVD1IYXNoUGF0aENvZGVyc1toYXNoVHlwZV0sZW5jb2RlUGF0aD1fSGFzaFBhdGhDb2RlcnMkaGFzaFQuZW5jb2RlUGF0aCxkZWNvZGVQYXRoPV9IYXNoUGF0aENvZGVycyRoYXNoVC5kZWNvZGVQYXRoO2Z1bmN0aW9uIGdldERPTUxvY2F0aW9uKCl7dmFyIHBhdGg9ZGVjb2RlUGF0aChnZXRIYXNoUGF0aCgpKTt3YXJuaW5nKCFiYXNlbmFtZXx8aGFzQmFzZW5hbWUocGF0aCxiYXNlbmFtZSksJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJysnd2l0aCB0aGUgYmFzZW5hbWUuIEV4cGVjdGVkIHBhdGggXCInK3BhdGgrJ1wiIHRvIGJlZ2luIHdpdGggXCInK2Jhc2VuYW1lKydcIi4nKTtpZihiYXNlbmFtZSlwYXRoPXN0cmlwQmFzZW5hbWUocGF0aCxiYXNlbmFtZSk7cmV0dXJuIGNyZWF0ZUxvY2F0aW9uKHBhdGgpO312YXIgdHJhbnNpdGlvbk1hbmFnZXI9Y3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKTtmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpe19leHRlbmRzKGhpc3RvcnksbmV4dFN0YXRlKTtoaXN0b3J5Lmxlbmd0aD1nbG9iYWxIaXN0b3J5Lmxlbmd0aDt0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbixoaXN0b3J5LmFjdGlvbik7fXZhciBmb3JjZU5leHRQb3A9ZmFsc2U7dmFyIGlnbm9yZVBhdGg9bnVsbDtmdW5jdGlvbiBsb2NhdGlvbnNBcmVFcXVhbCQkMShhLGIpe3JldHVybiBhLnBhdGhuYW1lPT09Yi5wYXRobmFtZSYmYS5zZWFyY2g9PT1iLnNlYXJjaCYmYS5oYXNoPT09Yi5oYXNoO31mdW5jdGlvbiBoYW5kbGVIYXNoQ2hhbmdlKCl7dmFyIHBhdGg9Z2V0SGFzaFBhdGgoKTt2YXIgZW5jb2RlZFBhdGg9ZW5jb2RlUGF0aChwYXRoKTtpZihwYXRoIT09ZW5jb2RlZFBhdGgpey8vIEVuc3VyZSB3ZSBhbHdheXMgaGF2ZSBhIHByb3Blcmx5LWVuY29kZWQgaGFzaC5cbnJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7fWVsc2V7dmFyIGxvY2F0aW9uPWdldERPTUxvY2F0aW9uKCk7dmFyIHByZXZMb2NhdGlvbj1oaXN0b3J5LmxvY2F0aW9uO2lmKCFmb3JjZU5leHRQb3AmJmxvY2F0aW9uc0FyZUVxdWFsJCQxKHByZXZMb2NhdGlvbixsb2NhdGlvbikpcmV0dXJuOy8vIEEgaGFzaGNoYW5nZSBkb2Vzbid0IGFsd2F5cyA9PSBsb2NhdGlvbiBjaGFuZ2UuXG5pZihpZ25vcmVQYXRoPT09Y3JlYXRlUGF0aChsb2NhdGlvbikpcmV0dXJuOy8vIElnbm9yZSB0aGlzIGNoYW5nZTsgd2UgYWxyZWFkeSBzZXRTdGF0ZSBpbiBwdXNoL3JlcGxhY2UuXG5pZ25vcmVQYXRoPW51bGw7aGFuZGxlUG9wKGxvY2F0aW9uKTt9fWZ1bmN0aW9uIGhhbmRsZVBvcChsb2NhdGlvbil7aWYoZm9yY2VOZXh0UG9wKXtmb3JjZU5leHRQb3A9ZmFsc2U7c2V0U3RhdGUoKTt9ZWxzZXt2YXIgYWN0aW9uPSdQT1AnO3RyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sYWN0aW9uLGdldFVzZXJDb25maXJtYXRpb24sZnVuY3Rpb24ob2spe2lmKG9rKXtzZXRTdGF0ZSh7YWN0aW9uOmFjdGlvbixsb2NhdGlvbjpsb2NhdGlvbn0pO31lbHNle3JldmVydFBvcChsb2NhdGlvbik7fX0pO319ZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbil7dmFyIHRvTG9jYXRpb249aGlzdG9yeS5sb2NhdGlvbjsvLyBUT0RPOiBXZSBjb3VsZCBwcm9iYWJseSBtYWtlIHRoaXMgbW9yZSByZWxpYWJsZSBieVxuLy8ga2VlcGluZyBhIGxpc3Qgb2YgcGF0aHMgd2UndmUgc2VlbiBpbiBzZXNzaW9uU3RvcmFnZS5cbi8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBwYXRocyB3ZSBkb24ndCBrbm93LlxudmFyIHRvSW5kZXg9YWxsUGF0aHMubGFzdEluZGV4T2YoY3JlYXRlUGF0aCh0b0xvY2F0aW9uKSk7aWYodG9JbmRleD09PS0xKXRvSW5kZXg9MDt2YXIgZnJvbUluZGV4PWFsbFBhdGhzLmxhc3RJbmRleE9mKGNyZWF0ZVBhdGgoZnJvbUxvY2F0aW9uKSk7aWYoZnJvbUluZGV4PT09LTEpZnJvbUluZGV4PTA7dmFyIGRlbHRhPXRvSW5kZXgtZnJvbUluZGV4O2lmKGRlbHRhKXtmb3JjZU5leHRQb3A9dHJ1ZTtnbyhkZWx0YSk7fX0vLyBFbnN1cmUgdGhlIGhhc2ggaXMgZW5jb2RlZCBwcm9wZXJseSBiZWZvcmUgZG9pbmcgYW55dGhpbmcgZWxzZS5cbnZhciBwYXRoPWdldEhhc2hQYXRoKCk7dmFyIGVuY29kZWRQYXRoPWVuY29kZVBhdGgocGF0aCk7aWYocGF0aCE9PWVuY29kZWRQYXRoKXJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7dmFyIGluaXRpYWxMb2NhdGlvbj1nZXRET01Mb2NhdGlvbigpO3ZhciBhbGxQYXRocz1bY3JlYXRlUGF0aChpbml0aWFsTG9jYXRpb24pXTsvLyBQdWJsaWMgaW50ZXJmYWNlXG5mdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKXt2YXIgYmFzZVRhZz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7dmFyIGhyZWY9Jyc7aWYoYmFzZVRhZyYmYmFzZVRhZy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSl7aHJlZj1zdHJpcEhhc2god2luZG93LmxvY2F0aW9uLmhyZWYpO31yZXR1cm4gaHJlZisnIycrZW5jb2RlUGF0aChiYXNlbmFtZStjcmVhdGVQYXRoKGxvY2F0aW9uKSk7fWZ1bmN0aW9uIHB1c2gocGF0aCxzdGF0ZSl7d2FybmluZyhzdGF0ZT09PXVuZGVmaW5lZCwnSGFzaCBoaXN0b3J5IGNhbm5vdCBwdXNoIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7dmFyIGFjdGlvbj0nUFVTSCc7dmFyIGxvY2F0aW9uPWNyZWF0ZUxvY2F0aW9uKHBhdGgsdW5kZWZpbmVkLHVuZGVmaW5lZCxoaXN0b3J5LmxvY2F0aW9uKTt0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLGFjdGlvbixnZXRVc2VyQ29uZmlybWF0aW9uLGZ1bmN0aW9uKG9rKXtpZighb2spcmV0dXJuO3ZhciBwYXRoPWNyZWF0ZVBhdGgobG9jYXRpb24pO3ZhciBlbmNvZGVkUGF0aD1lbmNvZGVQYXRoKGJhc2VuYW1lK3BhdGgpO3ZhciBoYXNoQ2hhbmdlZD1nZXRIYXNoUGF0aCgpIT09ZW5jb2RlZFBhdGg7aWYoaGFzaENoYW5nZWQpey8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUFVTSCwgc28gd2UnZFxuLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4vLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG5pZ25vcmVQYXRoPXBhdGg7cHVzaEhhc2hQYXRoKGVuY29kZWRQYXRoKTt2YXIgcHJldkluZGV4PWFsbFBhdGhzLmxhc3RJbmRleE9mKGNyZWF0ZVBhdGgoaGlzdG9yeS5sb2NhdGlvbikpO3ZhciBuZXh0UGF0aHM9YWxsUGF0aHMuc2xpY2UoMCxwcmV2SW5kZXgrMSk7bmV4dFBhdGhzLnB1c2gocGF0aCk7YWxsUGF0aHM9bmV4dFBhdGhzO3NldFN0YXRlKHthY3Rpb246YWN0aW9uLGxvY2F0aW9uOmxvY2F0aW9ufSk7fWVsc2V7d2FybmluZyhmYWxzZSwnSGFzaCBoaXN0b3J5IGNhbm5vdCBQVVNIIHRoZSBzYW1lIHBhdGg7IGEgbmV3IGVudHJ5IHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBoaXN0b3J5IHN0YWNrJyk7c2V0U3RhdGUoKTt9fSk7fWZ1bmN0aW9uIHJlcGxhY2UocGF0aCxzdGF0ZSl7d2FybmluZyhzdGF0ZT09PXVuZGVmaW5lZCwnSGFzaCBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7dmFyIGFjdGlvbj0nUkVQTEFDRSc7dmFyIGxvY2F0aW9uPWNyZWF0ZUxvY2F0aW9uKHBhdGgsdW5kZWZpbmVkLHVuZGVmaW5lZCxoaXN0b3J5LmxvY2F0aW9uKTt0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLGFjdGlvbixnZXRVc2VyQ29uZmlybWF0aW9uLGZ1bmN0aW9uKG9rKXtpZighb2spcmV0dXJuO3ZhciBwYXRoPWNyZWF0ZVBhdGgobG9jYXRpb24pO3ZhciBlbmNvZGVkUGF0aD1lbmNvZGVQYXRoKGJhc2VuYW1lK3BhdGgpO3ZhciBoYXNoQ2hhbmdlZD1nZXRIYXNoUGF0aCgpIT09ZW5jb2RlZFBhdGg7aWYoaGFzaENoYW5nZWQpey8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUkVQTEFDRSwgc28gd2UnZFxuLy8gcmF0aGVyIHNldFN0YXRlIGhlcmUgYW5kIGlnbm9yZSB0aGUgaGFzaGNoYW5nZS4gVGhlIGNhdmVhdCBoZXJlXG4vLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG5pZ25vcmVQYXRoPXBhdGg7cmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTt9dmFyIHByZXZJbmRleD1hbGxQYXRocy5pbmRleE9mKGNyZWF0ZVBhdGgoaGlzdG9yeS5sb2NhdGlvbikpO2lmKHByZXZJbmRleCE9PS0xKWFsbFBhdGhzW3ByZXZJbmRleF09cGF0aDtzZXRTdGF0ZSh7YWN0aW9uOmFjdGlvbixsb2NhdGlvbjpsb2NhdGlvbn0pO30pO31mdW5jdGlvbiBnbyhuKXt3YXJuaW5nKGNhbkdvV2l0aG91dFJlbG9hZCwnSGFzaCBoaXN0b3J5IGdvKG4pIGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQgaW4gdGhpcyBicm93c2VyJyk7Z2xvYmFsSGlzdG9yeS5nbyhuKTt9ZnVuY3Rpb24gZ29CYWNrKCl7Z28oLTEpO31mdW5jdGlvbiBnb0ZvcndhcmQoKXtnbygxKTt9dmFyIGxpc3RlbmVyQ291bnQ9MDtmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSl7bGlzdGVuZXJDb3VudCs9ZGVsdGE7aWYobGlzdGVuZXJDb3VudD09PTEmJmRlbHRhPT09MSl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoSGFzaENoYW5nZUV2ZW50JDEsaGFuZGxlSGFzaENoYW5nZSk7fWVsc2UgaWYobGlzdGVuZXJDb3VudD09PTApe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKEhhc2hDaGFuZ2VFdmVudCQxLGhhbmRsZUhhc2hDaGFuZ2UpO319dmFyIGlzQmxvY2tlZD1mYWxzZTtmdW5jdGlvbiBibG9jayhwcm9tcHQpe2lmKHByb21wdD09PXZvaWQgMCl7cHJvbXB0PWZhbHNlO312YXIgdW5ibG9jaz10cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTtpZighaXNCbG9ja2VkKXtjaGVja0RPTUxpc3RlbmVycygxKTtpc0Jsb2NrZWQ9dHJ1ZTt9cmV0dXJuIGZ1bmN0aW9uKCl7aWYoaXNCbG9ja2VkKXtpc0Jsb2NrZWQ9ZmFsc2U7Y2hlY2tET01MaXN0ZW5lcnMoLTEpO31yZXR1cm4gdW5ibG9jaygpO307fWZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcil7dmFyIHVubGlzdGVuPXRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtjaGVja0RPTUxpc3RlbmVycygxKTtyZXR1cm4gZnVuY3Rpb24oKXtjaGVja0RPTUxpc3RlbmVycygtMSk7dW5saXN0ZW4oKTt9O312YXIgaGlzdG9yeT17bGVuZ3RoOmdsb2JhbEhpc3RvcnkubGVuZ3RoLGFjdGlvbjonUE9QJyxsb2NhdGlvbjppbml0aWFsTG9jYXRpb24sY3JlYXRlSHJlZjpjcmVhdGVIcmVmLHB1c2g6cHVzaCxyZXBsYWNlOnJlcGxhY2UsZ286Z28sZ29CYWNrOmdvQmFjayxnb0ZvcndhcmQ6Z29Gb3J3YXJkLGJsb2NrOmJsb2NrLGxpc3RlbjpsaXN0ZW59O3JldHVybiBoaXN0b3J5O31mdW5jdGlvbiBjbGFtcChuLGxvd2VyQm91bmQsdXBwZXJCb3VuZCl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG4sbG93ZXJCb3VuZCksdXBwZXJCb3VuZCk7fS8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgc3RvcmVzIGxvY2F0aW9ucyBpbiBtZW1vcnkuXG4gKi9mdW5jdGlvbiBjcmVhdGVNZW1vcnlIaXN0b3J5KHByb3BzKXtpZihwcm9wcz09PXZvaWQgMCl7cHJvcHM9e307fXZhciBfcHJvcHM9cHJvcHMsZ2V0VXNlckNvbmZpcm1hdGlvbj1fcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixfcHJvcHMkaW5pdGlhbEVudHJpZXM9X3Byb3BzLmluaXRpYWxFbnRyaWVzLGluaXRpYWxFbnRyaWVzPV9wcm9wcyRpbml0aWFsRW50cmllcz09PXZvaWQgMD9bJy8nXTpfcHJvcHMkaW5pdGlhbEVudHJpZXMsX3Byb3BzJGluaXRpYWxJbmRleD1fcHJvcHMuaW5pdGlhbEluZGV4LGluaXRpYWxJbmRleD1fcHJvcHMkaW5pdGlhbEluZGV4PT09dm9pZCAwPzA6X3Byb3BzJGluaXRpYWxJbmRleCxfcHJvcHMka2V5TGVuZ3RoPV9wcm9wcy5rZXlMZW5ndGgsa2V5TGVuZ3RoPV9wcm9wcyRrZXlMZW5ndGg9PT12b2lkIDA/NjpfcHJvcHMka2V5TGVuZ3RoO3ZhciB0cmFuc2l0aW9uTWFuYWdlcj1jcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpO2Z1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSl7X2V4dGVuZHMoaGlzdG9yeSxuZXh0U3RhdGUpO2hpc3RvcnkubGVuZ3RoPWhpc3RvcnkuZW50cmllcy5sZW5ndGg7dHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24saGlzdG9yeS5hY3Rpb24pO31mdW5jdGlvbiBjcmVhdGVLZXkoKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsa2V5TGVuZ3RoKTt9dmFyIGluZGV4PWNsYW1wKGluaXRpYWxJbmRleCwwLGluaXRpYWxFbnRyaWVzLmxlbmd0aC0xKTt2YXIgZW50cmllcz1pbml0aWFsRW50cmllcy5tYXAoZnVuY3Rpb24oZW50cnkpe3JldHVybiB0eXBlb2YgZW50cnk9PT0nc3RyaW5nJz9jcmVhdGVMb2NhdGlvbihlbnRyeSx1bmRlZmluZWQsY3JlYXRlS2V5KCkpOmNyZWF0ZUxvY2F0aW9uKGVudHJ5LHVuZGVmaW5lZCxlbnRyeS5rZXl8fGNyZWF0ZUtleSgpKTt9KTsvLyBQdWJsaWMgaW50ZXJmYWNlXG52YXIgY3JlYXRlSHJlZj1jcmVhdGVQYXRoO2Z1bmN0aW9uIHB1c2gocGF0aCxzdGF0ZSl7d2FybmluZyghKCh0eXBlb2YgcGF0aD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocGF0aCkpPT09J29iamVjdCcmJnBhdGguc3RhdGUhPT11bmRlZmluZWQmJnN0YXRlIT09dW5kZWZpbmVkKSwnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcHVzaCB3aGVuIHRoZSAxc3QgJysnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7dmFyIGFjdGlvbj0nUFVTSCc7dmFyIGxvY2F0aW9uPWNyZWF0ZUxvY2F0aW9uKHBhdGgsc3RhdGUsY3JlYXRlS2V5KCksaGlzdG9yeS5sb2NhdGlvbik7dHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbixhY3Rpb24sZ2V0VXNlckNvbmZpcm1hdGlvbixmdW5jdGlvbihvayl7aWYoIW9rKXJldHVybjt2YXIgcHJldkluZGV4PWhpc3RvcnkuaW5kZXg7dmFyIG5leHRJbmRleD1wcmV2SW5kZXgrMTt2YXIgbmV4dEVudHJpZXM9aGlzdG9yeS5lbnRyaWVzLnNsaWNlKDApO2lmKG5leHRFbnRyaWVzLmxlbmd0aD5uZXh0SW5kZXgpe25leHRFbnRyaWVzLnNwbGljZShuZXh0SW5kZXgsbmV4dEVudHJpZXMubGVuZ3RoLW5leHRJbmRleCxsb2NhdGlvbik7fWVsc2V7bmV4dEVudHJpZXMucHVzaChsb2NhdGlvbik7fXNldFN0YXRlKHthY3Rpb246YWN0aW9uLGxvY2F0aW9uOmxvY2F0aW9uLGluZGV4Om5leHRJbmRleCxlbnRyaWVzOm5leHRFbnRyaWVzfSk7fSk7fWZ1bmN0aW9uIHJlcGxhY2UocGF0aCxzdGF0ZSl7d2FybmluZyghKCh0eXBlb2YgcGF0aD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocGF0aCkpPT09J29iamVjdCcmJnBhdGguc3RhdGUhPT11bmRlZmluZWQmJnN0YXRlIT09dW5kZWZpbmVkKSwnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJysnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJyk7dmFyIGFjdGlvbj0nUkVQTEFDRSc7dmFyIGxvY2F0aW9uPWNyZWF0ZUxvY2F0aW9uKHBhdGgsc3RhdGUsY3JlYXRlS2V5KCksaGlzdG9yeS5sb2NhdGlvbik7dHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbixhY3Rpb24sZ2V0VXNlckNvbmZpcm1hdGlvbixmdW5jdGlvbihvayl7aWYoIW9rKXJldHVybjtoaXN0b3J5LmVudHJpZXNbaGlzdG9yeS5pbmRleF09bG9jYXRpb247c2V0U3RhdGUoe2FjdGlvbjphY3Rpb24sbG9jYXRpb246bG9jYXRpb259KTt9KTt9ZnVuY3Rpb24gZ28obil7dmFyIG5leHRJbmRleD1jbGFtcChoaXN0b3J5LmluZGV4K24sMCxoaXN0b3J5LmVudHJpZXMubGVuZ3RoLTEpO3ZhciBhY3Rpb249J1BPUCc7dmFyIGxvY2F0aW9uPWhpc3RvcnkuZW50cmllc1tuZXh0SW5kZXhdO3RyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sYWN0aW9uLGdldFVzZXJDb25maXJtYXRpb24sZnVuY3Rpb24ob2spe2lmKG9rKXtzZXRTdGF0ZSh7YWN0aW9uOmFjdGlvbixsb2NhdGlvbjpsb2NhdGlvbixpbmRleDpuZXh0SW5kZXh9KTt9ZWxzZXsvLyBNaW1pYyB0aGUgYmVoYXZpb3Igb2YgRE9NIGhpc3RvcmllcyBieVxuLy8gY2F1c2luZyBhIHJlbmRlciBhZnRlciBhIGNhbmNlbGxlZCBQT1AuXG5zZXRTdGF0ZSgpO319KTt9ZnVuY3Rpb24gZ29CYWNrKCl7Z28oLTEpO31mdW5jdGlvbiBnb0ZvcndhcmQoKXtnbygxKTt9ZnVuY3Rpb24gY2FuR28obil7dmFyIG5leHRJbmRleD1oaXN0b3J5LmluZGV4K247cmV0dXJuIG5leHRJbmRleD49MCYmbmV4dEluZGV4PGhpc3RvcnkuZW50cmllcy5sZW5ndGg7fWZ1bmN0aW9uIGJsb2NrKHByb21wdCl7aWYocHJvbXB0PT09dm9pZCAwKXtwcm9tcHQ9ZmFsc2U7fXJldHVybiB0cmFuc2l0aW9uTWFuYWdlci5zZXRQcm9tcHQocHJvbXB0KTt9ZnVuY3Rpb24gbGlzdGVuKGxpc3RlbmVyKXtyZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO312YXIgaGlzdG9yeT17bGVuZ3RoOmVudHJpZXMubGVuZ3RoLGFjdGlvbjonUE9QJyxsb2NhdGlvbjplbnRyaWVzW2luZGV4XSxpbmRleDppbmRleCxlbnRyaWVzOmVudHJpZXMsY3JlYXRlSHJlZjpjcmVhdGVIcmVmLHB1c2g6cHVzaCxyZXBsYWNlOnJlcGxhY2UsZ286Z28sZ29CYWNrOmdvQmFjayxnb0ZvcndhcmQ6Z29Gb3J3YXJkLGNhbkdvOmNhbkdvLGJsb2NrOmJsb2NrLGxpc3RlbjpsaXN0ZW59O3JldHVybiBoaXN0b3J5O31leHBvcnRzLmNyZWF0ZUJyb3dzZXJIaXN0b3J5PWNyZWF0ZUJyb3dzZXJIaXN0b3J5O2V4cG9ydHMuY3JlYXRlSGFzaEhpc3Rvcnk9Y3JlYXRlSGFzaEhpc3Rvcnk7ZXhwb3J0cy5jcmVhdGVNZW1vcnlIaXN0b3J5PWNyZWF0ZU1lbW9yeUhpc3Rvcnk7ZXhwb3J0cy5jcmVhdGVMb2NhdGlvbj1jcmVhdGVMb2NhdGlvbjtleHBvcnRzLmxvY2F0aW9uc0FyZUVxdWFsPWxvY2F0aW9uc0FyZUVxdWFsO2V4cG9ydHMucGFyc2VQYXRoPXBhcnNlUGF0aDtleHBvcnRzLmNyZWF0ZVBhdGg9Y3JlYXRlUGF0aDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaGlzdG9yeS9janMvaGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo7fTtmdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQoZSl7cmV0dXJuIGUmJih0eXBlb2YgZT09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YoZSkpPT09J29iamVjdCcmJidkZWZhdWx0J2luIGU/ZVsnZGVmYXVsdCddOmU7fXZhciBSZWFjdD1yZXF1aXJlKCdyZWFjdCcpLFJlYWN0X19kZWZhdWx0PV9pbnRlcm9wRGVmYXVsdChSZWFjdCksX2luaGVyaXRzTG9vc2U9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHNMb29zZScpKSxQcm9wVHlwZXM9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ3Byb3AtdHlwZXMnKSksZ3VkPV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdndWQnKSksd2FybmluZz1faW50ZXJvcERlZmF1bHQocmVxdWlyZSgndGlueS13YXJuaW5nJykpO3ZhciBNQVhfU0lHTkVEXzMxX0JJVF9JTlQ9MTA3Mzc0MTgyMztmdW5jdGlvbiBvYmplY3RJcyh4LHkpe2lmKHg9PT15KXtyZXR1cm4geCE9PTB8fDEveD09PTEveTt9ZWxzZXtyZXR1cm4geCE9PXgmJnkhPT15O319ZnVuY3Rpb24gY3JlYXRlRXZlbnRFbWl0dGVyKHZhbHVlKXt2YXIgaGFuZGxlcnM9W107cmV0dXJue29uOmZ1bmN0aW9uIG9uKGhhbmRsZXIpe2hhbmRsZXJzLnB1c2goaGFuZGxlcik7fSxvZmY6ZnVuY3Rpb24gb2ZmKGhhbmRsZXIpe2hhbmRsZXJzPWhhbmRsZXJzLmZpbHRlcihmdW5jdGlvbihoKXtyZXR1cm4gaCE9PWhhbmRsZXI7fSk7fSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIHZhbHVlO30sc2V0OmZ1bmN0aW9uIHNldChuZXdWYWx1ZSxjaGFuZ2VkQml0cyl7dmFsdWU9bmV3VmFsdWU7aGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVyKXtyZXR1cm4gaGFuZGxlcih2YWx1ZSxjaGFuZ2VkQml0cyk7fSk7fX07fWZ1bmN0aW9uIG9ubHlDaGlsZChjaGlsZHJlbil7cmV0dXJuIEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pP2NoaWxkcmVuWzBdOmNoaWxkcmVuO31mdW5jdGlvbiBjcmVhdGVSZWFjdENvbnRleHQoZGVmYXVsdFZhbHVlLGNhbGN1bGF0ZUNoYW5nZWRCaXRzKXt2YXIgX1Byb3ZpZGVyJGNoaWxkQ29udGV4LF9Db25zdW1lciRjb250ZXh0VHlwZTt2YXIgY29udGV4dFByb3A9J19fY3JlYXRlLXJlYWN0LWNvbnRleHQtJytndWQoKSsnX18nO3ZhciBQcm92aWRlcj0vKiNfX1BVUkVfXyovZnVuY3Rpb24oX0NvbXBvbmVudCl7X2luaGVyaXRzTG9vc2UoUHJvdmlkZXIsX0NvbXBvbmVudCk7ZnVuY3Rpb24gUHJvdmlkZXIoKXt2YXIgX3RoaXM7X3RoaXM9X0NvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7X3RoaXMuZW1pdHRlcj1jcmVhdGVFdmVudEVtaXR0ZXIoX3RoaXMucHJvcHMudmFsdWUpO3JldHVybiBfdGhpczt9dmFyIF9wcm90bz1Qcm92aWRlci5wcm90b3R5cGU7X3Byb3RvLmdldENoaWxkQ29udGV4dD1mdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKXt2YXIgX3JlZjtyZXR1cm4gX3JlZj17fSxfcmVmW2NvbnRleHRQcm9wXT10aGlzLmVtaXR0ZXIsX3JlZjt9O19wcm90by5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzPWZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKXtpZih0aGlzLnByb3BzLnZhbHVlIT09bmV4dFByb3BzLnZhbHVlKXt2YXIgb2xkVmFsdWU9dGhpcy5wcm9wcy52YWx1ZTt2YXIgbmV3VmFsdWU9bmV4dFByb3BzLnZhbHVlO3ZhciBjaGFuZ2VkQml0cztpZihvYmplY3RJcyhvbGRWYWx1ZSxuZXdWYWx1ZSkpe2NoYW5nZWRCaXRzPTA7fWVsc2V7Y2hhbmdlZEJpdHM9dHlwZW9mIGNhbGN1bGF0ZUNoYW5nZWRCaXRzPT09J2Z1bmN0aW9uJz9jYWxjdWxhdGVDaGFuZ2VkQml0cyhvbGRWYWx1ZSxuZXdWYWx1ZSk6TUFYX1NJR05FRF8zMV9CSVRfSU5UO2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXt3YXJuaW5nKChjaGFuZ2VkQml0cyZNQVhfU0lHTkVEXzMxX0JJVF9JTlQpPT09Y2hhbmdlZEJpdHMsJ2NhbGN1bGF0ZUNoYW5nZWRCaXRzOiBFeHBlY3RlZCB0aGUgcmV0dXJuIHZhbHVlIHRvIGJlIGEgJysnMzEtYml0IGludGVnZXIuIEluc3RlYWQgcmVjZWl2ZWQ6ICcrY2hhbmdlZEJpdHMpO31jaGFuZ2VkQml0c3w9MDtpZihjaGFuZ2VkQml0cyE9PTApe3RoaXMuZW1pdHRlci5zZXQobmV4dFByb3BzLnZhbHVlLGNoYW5nZWRCaXRzKTt9fX19O19wcm90by5yZW5kZXI9ZnVuY3Rpb24gcmVuZGVyKCl7cmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47fTtyZXR1cm4gUHJvdmlkZXI7fShSZWFjdC5Db21wb25lbnQpO1Byb3ZpZGVyLmNoaWxkQ29udGV4dFR5cGVzPShfUHJvdmlkZXIkY2hpbGRDb250ZXg9e30sX1Byb3ZpZGVyJGNoaWxkQ29udGV4W2NvbnRleHRQcm9wXT1Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsX1Byb3ZpZGVyJGNoaWxkQ29udGV4KTt2YXIgQ29uc3VtZXI9LyojX19QVVJFX18qL2Z1bmN0aW9uKF9Db21wb25lbnQyKXtfaW5oZXJpdHNMb29zZShDb25zdW1lcixfQ29tcG9uZW50Mik7ZnVuY3Rpb24gQ29uc3VtZXIoKXt2YXIgX3RoaXMyO190aGlzMj1fQ29tcG9uZW50Mi5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7X3RoaXMyLnN0YXRlPXt2YWx1ZTpfdGhpczIuZ2V0VmFsdWUoKX07X3RoaXMyLm9uVXBkYXRlPWZ1bmN0aW9uKG5ld1ZhbHVlLGNoYW5nZWRCaXRzKXt2YXIgb2JzZXJ2ZWRCaXRzPV90aGlzMi5vYnNlcnZlZEJpdHN8MDtpZigob2JzZXJ2ZWRCaXRzJmNoYW5nZWRCaXRzKSE9PTApe190aGlzMi5zZXRTdGF0ZSh7dmFsdWU6X3RoaXMyLmdldFZhbHVlKCl9KTt9fTtyZXR1cm4gX3RoaXMyO312YXIgX3Byb3RvMj1Db25zdW1lci5wcm90b3R5cGU7X3Byb3RvMi5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzPWZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKXt2YXIgb2JzZXJ2ZWRCaXRzPW5leHRQcm9wcy5vYnNlcnZlZEJpdHM7dGhpcy5vYnNlcnZlZEJpdHM9b2JzZXJ2ZWRCaXRzPT09dW5kZWZpbmVkfHxvYnNlcnZlZEJpdHM9PT1udWxsP01BWF9TSUdORURfMzFfQklUX0lOVDpvYnNlcnZlZEJpdHM7fTtfcHJvdG8yLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCl7aWYodGhpcy5jb250ZXh0W2NvbnRleHRQcm9wXSl7dGhpcy5jb250ZXh0W2NvbnRleHRQcm9wXS5vbih0aGlzLm9uVXBkYXRlKTt9dmFyIG9ic2VydmVkQml0cz10aGlzLnByb3BzLm9ic2VydmVkQml0czt0aGlzLm9ic2VydmVkQml0cz1vYnNlcnZlZEJpdHM9PT11bmRlZmluZWR8fG9ic2VydmVkQml0cz09PW51bGw/TUFYX1NJR05FRF8zMV9CSVRfSU5UOm9ic2VydmVkQml0czt9O19wcm90bzIuY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKXtpZih0aGlzLmNvbnRleHRbY29udGV4dFByb3BdKXt0aGlzLmNvbnRleHRbY29udGV4dFByb3BdLm9mZih0aGlzLm9uVXBkYXRlKTt9fTtfcHJvdG8yLmdldFZhbHVlPWZ1bmN0aW9uIGdldFZhbHVlKCl7aWYodGhpcy5jb250ZXh0W2NvbnRleHRQcm9wXSl7cmV0dXJuIHRoaXMuY29udGV4dFtjb250ZXh0UHJvcF0uZ2V0KCk7fWVsc2V7cmV0dXJuIGRlZmF1bHRWYWx1ZTt9fTtfcHJvdG8yLnJlbmRlcj1mdW5jdGlvbiByZW5kZXIoKXtyZXR1cm4gb25seUNoaWxkKHRoaXMucHJvcHMuY2hpbGRyZW4pKHRoaXMuc3RhdGUudmFsdWUpO307cmV0dXJuIENvbnN1bWVyO30oUmVhY3QuQ29tcG9uZW50KTtDb25zdW1lci5jb250ZXh0VHlwZXM9KF9Db25zdW1lciRjb250ZXh0VHlwZT17fSxfQ29uc3VtZXIkY29udGV4dFR5cGVbY29udGV4dFByb3BdPVByb3BUeXBlcy5vYmplY3QsX0NvbnN1bWVyJGNvbnRleHRUeXBlKTtyZXR1cm57UHJvdmlkZXI6UHJvdmlkZXIsQ29uc3VtZXI6Q29uc3VtZXJ9O312YXIgaW5kZXg9UmVhY3RfX2RlZmF1bHQuY3JlYXRlQ29udGV4dHx8Y3JlYXRlUmVhY3RDb250ZXh0O21vZHVsZS5leHBvcnRzPWluZGV4O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9taW5pLWNyZWF0ZS1yZWFjdC1jb250ZXh0L2Rpc3QvY2pzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcyxzdXBlckNsYXNzKXtzdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7c3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yPXN1YkNsYXNzO3N1YkNsYXNzLl9fcHJvdG9fXz1zdXBlckNsYXNzO31tb2R1bGUuZXhwb3J0cz1faW5oZXJpdHNMb29zZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7LyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXt2YXIgUmVhY3RJcz1yZXF1aXJlKCdyZWFjdC1pcycpOy8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IGRldmVsb3BtZW50IGJlaGF2aW9yLlxuLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxudmFyIHRocm93T25EaXJlY3RBY2Nlc3M9dHJ1ZTttb2R1bGUuZXhwb3J0cz1yZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzJykoUmVhY3RJcy5pc0VsZW1lbnQsdGhyb3dPbkRpcmVjdEFjY2Vzcyk7fWVsc2V7Ly8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgcHJvZHVjdGlvbiBiZWhhdmlvci5cbi8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2Rcbm1vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zJykoKTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3Byb3AtdHlwZXMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O3ZhciBSZWFjdElzPXJlcXVpcmUoJ3JlYWN0LWlzJyk7dmFyIGFzc2lnbj1yZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0PXJlcXVpcmUoJy4vbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0Jyk7dmFyIGNoZWNrUHJvcFR5cGVzPXJlcXVpcmUoJy4vY2hlY2tQcm9wVHlwZXMnKTt2YXIgaGFzPUZ1bmN0aW9uLmNhbGwuYmluZChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTt2YXIgcHJpbnRXYXJuaW5nPWZ1bmN0aW9uIHByaW50V2FybmluZygpe307aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe3ByaW50V2FybmluZz1mdW5jdGlvbiBwcmludFdhcm5pbmcodGV4dCl7dmFyIG1lc3NhZ2U9J1dhcm5pbmc6ICcrdGV4dDtpZih0eXBlb2YgY29uc29sZSE9PSd1bmRlZmluZWQnKXtjb25zb2xlLmVycm9yKG1lc3NhZ2UpO310cnl7Ly8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4vLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbnRocm93IG5ldyBFcnJvcihtZXNzYWdlKTt9Y2F0Y2goeCl7fX07fWZ1bmN0aW9uIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGwoKXtyZXR1cm4gbnVsbDt9bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXNWYWxpZEVsZW1lbnQsdGhyb3dPbkRpcmVjdEFjY2Vzcyl7LyogZ2xvYmFsIFN5bWJvbCAqL3ZhciBJVEVSQVRPUl9TWU1CT0w9dHlwZW9mIFN5bWJvbD09PSdmdW5jdGlvbicmJlN5bWJvbC5pdGVyYXRvcjt2YXIgRkFVWF9JVEVSQVRPUl9TWU1CT0w9J0BAaXRlcmF0b3InOy8vIEJlZm9yZSBTeW1ib2wgc3BlYy5cbi8qKlxuICAgKiBSZXR1cm5zIHRoZSBpdGVyYXRvciBtZXRob2QgZnVuY3Rpb24gY29udGFpbmVkIG9uIHRoZSBpdGVyYWJsZSBvYmplY3QuXG4gICAqXG4gICAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OlxuICAgKlxuICAgKiAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKG15SXRlcmFibGUpO1xuICAgKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICogICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG15SXRlcmFibGUpO1xuICAgKiAgICAgICAuLi5cbiAgICogICAgIH1cbiAgICpcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBtYXliZUl0ZXJhYmxlXG4gICAqIEByZXR1cm4gez9mdW5jdGlvbn1cbiAgICovZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKXt2YXIgaXRlcmF0b3JGbj1tYXliZUl0ZXJhYmxlJiYoSVRFUkFUT1JfU1lNQk9MJiZtYXliZUl0ZXJhYmxlW0lURVJBVE9SX1NZTUJPTF18fG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTtpZih0eXBlb2YgaXRlcmF0b3JGbj09PSdmdW5jdGlvbicpe3JldHVybiBpdGVyYXRvckZuO319LyoqXG4gICAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlXG4gICAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6XG4gICAqXG4gICAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTtcbiAgICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICAgcHJvcFR5cGVzOiB7XG4gICAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkIFwiZGVzY3JpcHRpb25cIi5cbiAgICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZyxcbiAgICpcbiAgICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgXCJjYXRlZ29yeVwiLlxuICAgKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsXG4gICAqXG4gICAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCBcImRpYWxvZ1wiIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLlxuICAgKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkXG4gICAqICAgICB9LFxuICAgKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH1cbiAgICogICB9KTtcbiAgICpcbiAgICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOlxuICAgKlxuICAgKiAgIHR5cGUgOj0gYXJyYXl8Ym9vbHxmdW5jfG9iamVjdHxudW1iZXJ8c3RyaW5nfG9uZU9mKFsuLi5dKXxpbnN0YW5jZU9mKC4uLilcbiAgICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/XG4gICAqXG4gICAqIEVhY2ggYW5kIGV2ZXJ5IGRlY2xhcmF0aW9uIHByb2R1Y2VzIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBzaWduYXR1cmUuIFRoaXNcbiAgICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuICAgKlxuICAgKiAgdmFyIE15TGluayA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICogICAgcHJvcFR5cGVzOiB7XG4gICAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkIFwiaHJlZlwiLlxuICAgKiAgICAgIGhyZWY6IGZ1bmN0aW9uKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJlxuICAgKiAgICAgICAgICAgICEocHJvcFZhbHVlIGluc3RhbmNlb2YgVVJJKSkge1xuICAgKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFxuICAgKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArXG4gICAqICAgICAgICAgICAgY29tcG9uZW50TmFtZVxuICAgKiAgICAgICAgICApO1xuICAgKiAgICAgICAgfVxuICAgKiAgICAgIH1cbiAgICogICAgfSxcbiAgICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59XG4gICAqICB9KTtcbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL3ZhciBBTk9OWU1PVVM9Jzw8YW5vbnltb3VzPj4nOy8vIEltcG9ydGFudCFcbi8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzYC5cbnZhciBSZWFjdFByb3BUeXBlcz17YXJyYXk6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksYm9vbDpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLGZ1bmM6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Z1bmN0aW9uJyksbnVtYmVyOmNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSxvYmplY3Q6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLHN0cmluZzpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3RyaW5nJyksc3ltYm9sOmNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzeW1ib2wnKSxhbnk6Y3JlYXRlQW55VHlwZUNoZWNrZXIoKSxhcnJheU9mOmNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixlbGVtZW50OmNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpLGVsZW1lbnRUeXBlOmNyZWF0ZUVsZW1lbnRUeXBlVHlwZUNoZWNrZXIoKSxpbnN0YW5jZU9mOmNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsbm9kZTpjcmVhdGVOb2RlQ2hlY2tlcigpLG9iamVjdE9mOmNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIsb25lT2Y6Y3JlYXRlRW51bVR5cGVDaGVja2VyLG9uZU9mVHlwZTpjcmVhdGVVbmlvblR5cGVDaGVja2VyLHNoYXBlOmNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIsZXhhY3Q6Y3JlYXRlU3RyaWN0U2hhcGVUeXBlQ2hlY2tlcn07LyoqXG4gICAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd25cbiAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gICAqLy8qZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlKi9mdW5jdGlvbiBpcyh4LHkpey8vIFNhbWVWYWx1ZSBhbGdvcml0aG1cbmlmKHg9PT15KXsvLyBTdGVwcyAxLTUsIDctMTBcbi8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG5yZXR1cm4geCE9PTB8fDEveD09PTEveTt9ZWxzZXsvLyBTdGVwIDYuYTogTmFOID09IE5hTlxucmV0dXJuIHghPT14JiZ5IT09eTt9fS8qZXNsaW50LWVuYWJsZSBuby1zZWxmLWNvbXBhcmUqLy8qKlxuICAgKiBXZSB1c2UgYW4gRXJyb3ItbGlrZSBvYmplY3QgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgYXMgcGVvcGxlIG1heSBjYWxsXG4gICAqIFByb3BUeXBlcyBkaXJlY3RseSBhbmQgaW5zcGVjdCB0aGVpciBvdXRwdXQuIEhvd2V2ZXIsIHdlIGRvbid0IHVzZSByZWFsXG4gICAqIEVycm9ycyBhbnltb3JlLiBXZSBkb24ndCBpbnNwZWN0IHRoZWlyIHN0YWNrIGFueXdheSwgYW5kIGNyZWF0aW5nIHRoZW1cbiAgICogaXMgcHJvaGliaXRpdmVseSBleHBlbnNpdmUgaWYgdGhleSBhcmUgY3JlYXRlZCB0b28gb2Z0ZW4sIHN1Y2ggYXMgd2hhdFxuICAgKiBoYXBwZW5zIGluIG9uZU9mVHlwZSgpIGZvciBhbnkgdHlwZSBiZWZvcmUgdGhlIG9uZSB0aGF0IG1hdGNoZWQuXG4gICAqL2Z1bmN0aW9uIFByb3BUeXBlRXJyb3IobWVzc2FnZSl7dGhpcy5tZXNzYWdlPW1lc3NhZ2U7dGhpcy5zdGFjaz0nJzt9Ly8gTWFrZSBgaW5zdGFuY2VvZiBFcnJvcmAgc3RpbGwgd29yayBmb3IgcmV0dXJuZWQgZXJyb3JzLlxuUHJvcFR5cGVFcnJvci5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlO2Z1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7dmFyIG1hbnVhbFByb3BUeXBlQ2FsbENhY2hlPXt9O3ZhciBtYW51YWxQcm9wVHlwZVdhcm5pbmdDb3VudD0wO31mdW5jdGlvbiBjaGVja1R5cGUoaXNSZXF1aXJlZCxwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxzZWNyZXQpe2NvbXBvbmVudE5hbWU9Y29tcG9uZW50TmFtZXx8QU5PTllNT1VTO3Byb3BGdWxsTmFtZT1wcm9wRnVsbE5hbWV8fHByb3BOYW1lO2lmKHNlY3JldCE9PVJlYWN0UHJvcFR5cGVzU2VjcmV0KXtpZih0aHJvd09uRGlyZWN0QWNjZXNzKXsvLyBOZXcgYmVoYXZpb3Igb25seSBmb3IgdXNlcnMgb2YgYHByb3AtdHlwZXNgIHBhY2thZ2VcbnZhciBlcnI9bmV3IEVycm9yKCdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnKydVc2UgYFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpYCB0byBjYWxsIHRoZW0uICcrJ1JlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMnKTtlcnIubmFtZT0nSW52YXJpYW50IFZpb2xhdGlvbic7dGhyb3cgZXJyO31lbHNlIGlmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nJiZ0eXBlb2YgY29uc29sZSE9PSd1bmRlZmluZWQnKXsvLyBPbGQgYmVoYXZpb3IgZm9yIHBlb3BsZSB1c2luZyBSZWFjdC5Qcm9wVHlwZXNcbnZhciBjYWNoZUtleT1jb21wb25lbnROYW1lKyc6Jytwcm9wTmFtZTtpZighbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldJiYvLyBBdm9pZCBzcGFtbWluZyB0aGUgY29uc29sZSBiZWNhdXNlIHRoZXkgYXJlIG9mdGVuIG5vdCBhY3Rpb25hYmxlIGV4Y2VwdCBmb3IgbGliIGF1dGhvcnNcbm1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50PDMpe3ByaW50V2FybmluZygnWW91IGFyZSBtYW51YWxseSBjYWxsaW5nIGEgUmVhY3QuUHJvcFR5cGVzIHZhbGlkYXRpb24gJysnZnVuY3Rpb24gZm9yIHRoZSBgJytwcm9wRnVsbE5hbWUrJ2AgcHJvcCBvbiBgJytjb21wb25lbnROYW1lKydgLiBUaGlzIGlzIGRlcHJlY2F0ZWQgJysnYW5kIHdpbGwgdGhyb3cgaW4gdGhlIHN0YW5kYWxvbmUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcrJ1lvdSBtYXkgYmUgc2VlaW5nIHRoaXMgd2FybmluZyBkdWUgdG8gYSB0aGlyZC1wYXJ0eSBQcm9wVHlwZXMgJysnbGlicmFyeS4gU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1kb250LWNhbGwtcHJvcHR5cGVzICcrJ2ZvciBkZXRhaWxzLicpO21hbnVhbFByb3BUeXBlQ2FsbENhY2hlW2NhY2hlS2V5XT10cnVlO21hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50Kys7fX19aWYocHJvcHNbcHJvcE5hbWVdPT1udWxsKXtpZihpc1JlcXVpcmVkKXtpZihwcm9wc1twcm9wTmFtZV09PT1udWxsKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIGlzIG1hcmtlZCBhcyByZXF1aXJlZCAnKygnaW4gYCcrY29tcG9uZW50TmFtZSsnYCwgYnV0IGl0cyB2YWx1ZSBpcyBgbnVsbGAuJykpO31yZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIGlzIG1hcmtlZCBhcyByZXF1aXJlZCBpbiAnKygnYCcrY29tcG9uZW50TmFtZSsnYCwgYnV0IGl0cyB2YWx1ZSBpcyBgdW5kZWZpbmVkYC4nKSk7fXJldHVybiBudWxsO31lbHNle3JldHVybiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSk7fX12YXIgY2hhaW5lZENoZWNrVHlwZT1jaGVja1R5cGUuYmluZChudWxsLGZhbHNlKTtjaGFpbmVkQ2hlY2tUeXBlLmlzUmVxdWlyZWQ9Y2hlY2tUeXBlLmJpbmQobnVsbCx0cnVlKTtyZXR1cm4gY2hhaW5lZENoZWNrVHlwZTt9ZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoZXhwZWN0ZWRUeXBlKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxzZWNyZXQpe3ZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO2lmKHByb3BUeXBlIT09ZXhwZWN0ZWRUeXBlKXsvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCdcbi8vIGNoZWNrLCBidXQgd2UgY2FuIG9mZmVyIGEgbW9yZSBwcmVjaXNlIGVycm9yIG1lc3NhZ2UgaGVyZSByYXRoZXIgdGhhblxuLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxudmFyIHByZWNpc2VUeXBlPWdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSk7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSAnKygnYCcrcHJlY2lzZVR5cGUrJ2Agc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgJykrKCdgJytleHBlY3RlZFR5cGUrJ2AuJykpO31yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKXtyZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbCk7fWZ1bmN0aW9uIGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcil7ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe2lmKHR5cGVvZiB0eXBlQ2hlY2tlciE9PSdmdW5jdGlvbicpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIGNvbXBvbmVudCBgJytjb21wb25lbnROYW1lKydgIGhhcyBpbnZhbGlkIFByb3BUeXBlIG5vdGF0aW9uIGluc2lkZSBhcnJheU9mLicpO312YXIgcHJvcFZhbHVlPXByb3BzW3Byb3BOYW1lXTtpZighQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKXt2YXIgcHJvcFR5cGU9Z2V0UHJvcFR5cGUocHJvcFZhbHVlKTtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlICcrKCdgJytwcm9wVHlwZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBhbiBhcnJheS4nKSk7fWZvcih2YXIgaT0wO2k8cHJvcFZhbHVlLmxlbmd0aDtpKyspe3ZhciBlcnJvcj10eXBlQ2hlY2tlcihwcm9wVmFsdWUsaSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSsnWycraSsnXScsUmVhY3RQcm9wVHlwZXNTZWNyZXQpO2lmKGVycm9yIGluc3RhbmNlb2YgRXJyb3Ipe3JldHVybiBlcnJvcjt9fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07aWYoIWlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpe3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK3Byb3BUeXBlKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudC4nKSk7fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZVR5cGVDaGVja2VyKCl7ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe3ZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO2lmKCFSZWFjdElzLmlzVmFsaWRFbGVtZW50VHlwZShwcm9wVmFsdWUpKXt2YXIgcHJvcFR5cGU9Z2V0UHJvcFR5cGUocHJvcFZhbHVlKTtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlICcrKCdgJytwcm9wVHlwZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQgdHlwZS4nKSk7fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyKGV4cGVjdGVkQ2xhc3Mpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXtpZighKHByb3BzW3Byb3BOYW1lXWluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpe3ZhciBleHBlY3RlZENsYXNzTmFtZT1leHBlY3RlZENsYXNzLm5hbWV8fEFOT05ZTU9VUzt2YXIgYWN0dWFsQ2xhc3NOYW1lPWdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK2FjdHVhbENsYXNzTmFtZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCAnKSsoJ2luc3RhbmNlIG9mIGAnK2V4cGVjdGVkQ2xhc3NOYW1lKydgLicpKTt9cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcyl7aWYoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnRzIHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheSwgZ290ICcrYXJndW1lbnRzLmxlbmd0aCsnIGFyZ3VtZW50cy4gJysnQSBjb21tb24gbWlzdGFrZSBpcyB0byB3cml0ZSBvbmVPZih4LCB5LCB6KSBpbnN0ZWFkIG9mIG9uZU9mKFt4LCB5LCB6XSkuJyk7fWVsc2V7cHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheS4nKTt9fXJldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsO31mdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07Zm9yKHZhciBpPTA7aTxleHBlY3RlZFZhbHVlcy5sZW5ndGg7aSsrKXtpZihpcyhwcm9wVmFsdWUsZXhwZWN0ZWRWYWx1ZXNbaV0pKXtyZXR1cm4gbnVsbDt9fXZhciB2YWx1ZXNTdHJpbmc9SlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRWYWx1ZXMsZnVuY3Rpb24gcmVwbGFjZXIoa2V5LHZhbHVlKXt2YXIgdHlwZT1nZXRQcmVjaXNlVHlwZSh2YWx1ZSk7aWYodHlwZT09PSdzeW1ib2wnKXtyZXR1cm4gU3RyaW5nKHZhbHVlKTt9cmV0dXJuIHZhbHVlO30pO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHZhbHVlIGAnK1N0cmluZyhwcm9wVmFsdWUpKydgICcrKCdzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBvbmUgb2YgJyt2YWx1ZXNTdHJpbmcrJy4nKSk7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXtpZih0eXBlb2YgdHlwZUNoZWNrZXIhPT0nZnVuY3Rpb24nKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1Byb3BlcnR5IGAnK3Byb3BGdWxsTmFtZSsnYCBvZiBjb21wb25lbnQgYCcrY29tcG9uZW50TmFtZSsnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgb2JqZWN0T2YuJyk7fXZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO2lmKHByb3BUeXBlIT09J29iamVjdCcpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK3Byb3BUeXBlKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7fWZvcih2YXIga2V5IGluIHByb3BWYWx1ZSl7aWYoaGFzKHByb3BWYWx1ZSxrZXkpKXt2YXIgZXJyb3I9dHlwZUNoZWNrZXIocHJvcFZhbHVlLGtleSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSsnLicra2V5LFJlYWN0UHJvcFR5cGVzU2VjcmV0KTtpZihlcnJvciBpbnN0YW5jZW9mIEVycm9yKXtyZXR1cm4gZXJyb3I7fX19cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIoYXJyYXlPZlR5cGVDaGVja2Vycyl7aWYoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2Vycykpe3Byb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nP3ByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpOnZvaWQgMDtyZXR1cm4gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbDt9Zm9yKHZhciBpPTA7aTxhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDtpKyspe3ZhciBjaGVja2VyPWFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07aWYodHlwZW9mIGNoZWNrZXIhPT0nZnVuY3Rpb24nKXtwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2ZUeXBlLiBFeHBlY3RlZCBhbiBhcnJheSBvZiBjaGVjayBmdW5jdGlvbnMsIGJ1dCAnKydyZWNlaXZlZCAnK2dldFBvc3RmaXhGb3JUeXBlV2FybmluZyhjaGVja2VyKSsnIGF0IGluZGV4ICcraSsnLicpO3JldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsO319ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe2Zvcih2YXIgaT0wO2k8YXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7aSsrKXt2YXIgY2hlY2tlcj1hcnJheU9mVHlwZUNoZWNrZXJzW2ldO2lmKGNoZWNrZXIocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUsUmVhY3RQcm9wVHlwZXNTZWNyZXQpPT1udWxsKXtyZXR1cm4gbnVsbDt9fXJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIHN1cHBsaWVkIHRvICcrKCdgJytjb21wb25lbnROYW1lKydgLicpKTt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7aWYoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBzdXBwbGllZCB0byAnKygnYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYSBSZWFjdE5vZGUuJykpO31yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlU2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGUhPT0nb2JqZWN0Jyl7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSBgJytwcm9wVHlwZSsnYCAnKygnc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO31mb3IodmFyIGtleSBpbiBzaGFwZVR5cGVzKXt2YXIgY2hlY2tlcj1zaGFwZVR5cGVzW2tleV07aWYoIWNoZWNrZXIpe2NvbnRpbnVlO312YXIgZXJyb3I9Y2hlY2tlcihwcm9wVmFsdWUsa2V5LGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKycuJytrZXksUmVhY3RQcm9wVHlwZXNTZWNyZXQpO2lmKGVycm9yKXtyZXR1cm4gZXJyb3I7fX1yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlU3RyaWN0U2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGUhPT0nb2JqZWN0Jyl7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSBgJytwcm9wVHlwZSsnYCAnKygnc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO30vLyBXZSBuZWVkIHRvIGNoZWNrIGFsbCBrZXlzIGluIGNhc2Ugc29tZSBhcmUgcmVxdWlyZWQgYnV0IG1pc3NpbmcgZnJvbVxuLy8gcHJvcHMuXG52YXIgYWxsS2V5cz1hc3NpZ24oe30scHJvcHNbcHJvcE5hbWVdLHNoYXBlVHlwZXMpO2Zvcih2YXIga2V5IGluIGFsbEtleXMpe3ZhciBjaGVja2VyPXNoYXBlVHlwZXNba2V5XTtpZighY2hlY2tlcil7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Aga2V5IGAnK2tleSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLicrJ1xcbkJhZCBvYmplY3Q6ICcrSlNPTi5zdHJpbmdpZnkocHJvcHNbcHJvcE5hbWVdLG51bGwsJyAgJykrJ1xcblZhbGlkIGtleXM6ICcrSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmtleXMoc2hhcGVUeXBlcyksbnVsbCwnICAnKSk7fXZhciBlcnJvcj1jaGVja2VyKHByb3BWYWx1ZSxrZXksY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUrJy4nK2tleSxSZWFjdFByb3BUeXBlc1NlY3JldCk7aWYoZXJyb3Ipe3JldHVybiBlcnJvcjt9fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBpc05vZGUocHJvcFZhbHVlKXtzd2l0Y2godHlwZW9mIHByb3BWYWx1ZT09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocHJvcFZhbHVlKSl7Y2FzZSdudW1iZXInOmNhc2Unc3RyaW5nJzpjYXNlJ3VuZGVmaW5lZCc6cmV0dXJuIHRydWU7Y2FzZSdib29sZWFuJzpyZXR1cm4hcHJvcFZhbHVlO2Nhc2Unb2JqZWN0JzppZihBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpe3JldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTt9aWYocHJvcFZhbHVlPT09bnVsbHx8aXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSl7cmV0dXJuIHRydWU7fXZhciBpdGVyYXRvckZuPWdldEl0ZXJhdG9yRm4ocHJvcFZhbHVlKTtpZihpdGVyYXRvckZuKXt2YXIgaXRlcmF0b3I9aXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7dmFyIHN0ZXA7aWYoaXRlcmF0b3JGbiE9PXByb3BWYWx1ZS5lbnRyaWVzKXt3aGlsZSghKHN0ZXA9aXRlcmF0b3IubmV4dCgpKS5kb25lKXtpZighaXNOb2RlKHN0ZXAudmFsdWUpKXtyZXR1cm4gZmFsc2U7fX19ZWxzZXsvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cbndoaWxlKCEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmUpe3ZhciBlbnRyeT1zdGVwLnZhbHVlO2lmKGVudHJ5KXtpZighaXNOb2RlKGVudHJ5WzFdKSl7cmV0dXJuIGZhbHNlO319fX19ZWxzZXtyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlO319ZnVuY3Rpb24gaXNTeW1ib2wocHJvcFR5cGUscHJvcFZhbHVlKXsvLyBOYXRpdmUgU3ltYm9sLlxuaWYocHJvcFR5cGU9PT0nc3ltYm9sJyl7cmV0dXJuIHRydWU7fS8vIGZhbHN5IHZhbHVlIGNhbid0IGJlIGEgU3ltYm9sXG5pZighcHJvcFZhbHVlKXtyZXR1cm4gZmFsc2U7fS8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10gPT09ICdTeW1ib2wnXG5pZihwcm9wVmFsdWVbJ0BAdG9TdHJpbmdUYWcnXT09PSdTeW1ib2wnKXtyZXR1cm4gdHJ1ZTt9Ly8gRmFsbGJhY2sgZm9yIG5vbi1zcGVjIGNvbXBsaWFudCBTeW1ib2xzIHdoaWNoIGFyZSBwb2x5ZmlsbGVkLlxuaWYodHlwZW9mIFN5bWJvbD09PSdmdW5jdGlvbicmJnByb3BWYWx1ZSBpbnN0YW5jZW9mIFN5bWJvbCl7cmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9Ly8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuZnVuY3Rpb24gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKXt2YXIgcHJvcFR5cGU9dHlwZW9mIHByb3BWYWx1ZT09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocHJvcFZhbHVlKTtpZihBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpe3JldHVybidhcnJheSc7fWlmKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCl7Ly8gT2xkIHdlYmtpdHMgKGF0IGxlYXN0IHVudGlsIEFuZHJvaWQgNC4wKSByZXR1cm4gJ2Z1bmN0aW9uJyByYXRoZXIgdGhhblxuLy8gJ29iamVjdCcgZm9yIHR5cGVvZiBhIFJlZ0V4cC4gV2UnbGwgbm9ybWFsaXplIHRoaXMgaGVyZSBzbyB0aGF0IC9ibGEvXG4vLyBwYXNzZXMgUHJvcFR5cGVzLm9iamVjdC5cbnJldHVybidvYmplY3QnO31pZihpc1N5bWJvbChwcm9wVHlwZSxwcm9wVmFsdWUpKXtyZXR1cm4nc3ltYm9sJzt9cmV0dXJuIHByb3BUeXBlO30vLyBUaGlzIGhhbmRsZXMgbW9yZSB0eXBlcyB0aGFuIGBnZXRQcm9wVHlwZWAuIE9ubHkgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4vLyBTZWUgYGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyYC5cbmZ1bmN0aW9uIGdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSl7aWYodHlwZW9mIHByb3BWYWx1ZT09PSd1bmRlZmluZWQnfHxwcm9wVmFsdWU9PT1udWxsKXtyZXR1cm4nJytwcm9wVmFsdWU7fXZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO2lmKHByb3BUeXBlPT09J29iamVjdCcpe2lmKHByb3BWYWx1ZSBpbnN0YW5jZW9mIERhdGUpe3JldHVybidkYXRlJzt9ZWxzZSBpZihwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApe3JldHVybidyZWdleHAnO319cmV0dXJuIHByb3BUeXBlO30vLyBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgaXMgcG9zdGZpeGVkIHRvIGEgd2FybmluZyBhYm91dCBhbiBpbnZhbGlkIHR5cGUuXG4vLyBGb3IgZXhhbXBsZSwgXCJ1bmRlZmluZWRcIiBvciBcIm9mIHR5cGUgYXJyYXlcIlxuZnVuY3Rpb24gZ2V0UG9zdGZpeEZvclR5cGVXYXJuaW5nKHZhbHVlKXt2YXIgdHlwZT1nZXRQcmVjaXNlVHlwZSh2YWx1ZSk7c3dpdGNoKHR5cGUpe2Nhc2UnYXJyYXknOmNhc2Unb2JqZWN0JzpyZXR1cm4nYW4gJyt0eXBlO2Nhc2UnYm9vbGVhbic6Y2FzZSdkYXRlJzpjYXNlJ3JlZ2V4cCc6cmV0dXJuJ2EgJyt0eXBlO2RlZmF1bHQ6cmV0dXJuIHR5cGU7fX0vLyBSZXR1cm5zIGNsYXNzIG5hbWUgb2YgdGhlIG9iamVjdCwgaWYgYW55LlxuZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKHByb3BWYWx1ZSl7aWYoIXByb3BWYWx1ZS5jb25zdHJ1Y3Rvcnx8IXByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lKXtyZXR1cm4gQU5PTllNT1VTO31yZXR1cm4gcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7fVJlYWN0UHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzPWNoZWNrUHJvcFR5cGVzO1JlYWN0UHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlPWNoZWNrUHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlO1JlYWN0UHJvcFR5cGVzLlByb3BUeXBlcz1SZWFjdFByb3BUeXBlcztyZXR1cm4gUmVhY3RQcm9wVHlwZXM7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvcC10eXBlcy9mYWN0b3J5V2l0aFR5cGVDaGVja2Vycy5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqLyd1c2Ugc3RyaWN0Jzt2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQ9J1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJzttb2R1bGUuZXhwb3J0cz1SZWFjdFByb3BUeXBlc1NlY3JldDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvcC10eXBlcy9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQuanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O3ZhciBwcmludFdhcm5pbmc9ZnVuY3Rpb24gcHJpbnRXYXJuaW5nKCl7fTtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0PXJlcXVpcmUoJy4vbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0Jyk7dmFyIGxvZ2dlZFR5cGVGYWlsdXJlcz17fTt2YXIgaGFzPUZ1bmN0aW9uLmNhbGwuYmluZChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTtwcmludFdhcm5pbmc9ZnVuY3Rpb24gcHJpbnRXYXJuaW5nKHRleHQpe3ZhciBtZXNzYWdlPSdXYXJuaW5nOiAnK3RleHQ7aWYodHlwZW9mIGNvbnNvbGUhPT0ndW5kZWZpbmVkJyl7Y29uc29sZS5lcnJvcihtZXNzYWdlKTt9dHJ5ey8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS1cbi8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFja1xuLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG50aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7fWNhdGNoKHgpe319O30vKipcbiAqIEFzc2VydCB0aGF0IHRoZSB2YWx1ZXMgbWF0Y2ggd2l0aCB0aGUgdHlwZSBzcGVjcy5cbiAqIEVycm9yIG1lc3NhZ2VzIGFyZSBtZW1vcml6ZWQgYW5kIHdpbGwgb25seSBiZSBzaG93biBvbmNlLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSB0eXBlU3BlY3MgTWFwIG9mIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG4gKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzIFJ1bnRpbWUgdmFsdWVzIHRoYXQgbmVlZCB0byBiZSB0eXBlLWNoZWNrZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiBlLmcuIFwicHJvcFwiLCBcImNvbnRleHRcIiwgXCJjaGlsZCBjb250ZXh0XCJcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcGFyYW0gez9GdW5jdGlvbn0gZ2V0U3RhY2sgUmV0dXJucyB0aGUgY29tcG9uZW50IHN0YWNrLlxuICogQHByaXZhdGVcbiAqL2Z1bmN0aW9uIGNoZWNrUHJvcFR5cGVzKHR5cGVTcGVjcyx2YWx1ZXMsbG9jYXRpb24sY29tcG9uZW50TmFtZSxnZXRTdGFjayl7aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe2Zvcih2YXIgdHlwZVNwZWNOYW1lIGluIHR5cGVTcGVjcyl7aWYoaGFzKHR5cGVTcGVjcyx0eXBlU3BlY05hbWUpKXt2YXIgZXJyb3I7Ly8gUHJvcCB0eXBlIHZhbGlkYXRpb24gbWF5IHRocm93LiBJbiBjYXNlIHRoZXkgZG8sIHdlIGRvbid0IHdhbnQgdG9cbi8vIGZhaWwgdGhlIHJlbmRlciBwaGFzZSB3aGVyZSBpdCBkaWRuJ3QgZmFpbCBiZWZvcmUuIFNvIHdlIGxvZyBpdC5cbi8vIEFmdGVyIHRoZXNlIGhhdmUgYmVlbiBjbGVhbmVkIHVwLCB3ZSdsbCBsZXQgdGhlbSB0aHJvdy5cbnRyeXsvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbi8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbmlmKHR5cGVvZiB0eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSE9PSdmdW5jdGlvbicpe3ZhciBlcnI9RXJyb3IoKGNvbXBvbmVudE5hbWV8fCdSZWFjdCBjbGFzcycpKyc6ICcrbG9jYXRpb24rJyB0eXBlIGAnK3R5cGVTcGVjTmFtZSsnYCBpcyBpbnZhbGlkOyAnKydpdCBtdXN0IGJlIGEgZnVuY3Rpb24sIHVzdWFsbHkgZnJvbSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UsIGJ1dCByZWNlaXZlZCBgJytfdHlwZW9mKHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdKSsnYC4nKTtlcnIubmFtZT0nSW52YXJpYW50IFZpb2xhdGlvbic7dGhyb3cgZXJyO31lcnJvcj10eXBlU3BlY3NbdHlwZVNwZWNOYW1lXSh2YWx1ZXMsdHlwZVNwZWNOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24sbnVsbCxSZWFjdFByb3BUeXBlc1NlY3JldCk7fWNhdGNoKGV4KXtlcnJvcj1leDt9aWYoZXJyb3ImJiEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpe3ByaW50V2FybmluZygoY29tcG9uZW50TmFtZXx8J1JlYWN0IGNsYXNzJykrJzogdHlwZSBzcGVjaWZpY2F0aW9uIG9mICcrbG9jYXRpb24rJyBgJyt0eXBlU3BlY05hbWUrJ2AgaXMgaW52YWxpZDsgdGhlIHR5cGUgY2hlY2tlciAnKydmdW5jdGlvbiBtdXN0IHJldHVybiBgbnVsbGAgb3IgYW4gYEVycm9yYCBidXQgcmV0dXJuZWQgYSAnKyh0eXBlb2YgZXJyb3I9PT0ndW5kZWZpbmVkJz8ndW5kZWZpbmVkJzpfdHlwZW9mKGVycm9yKSkrJy4gJysnWW91IG1heSBoYXZlIGZvcmdvdHRlbiB0byBwYXNzIGFuIGFyZ3VtZW50IHRvIHRoZSB0eXBlIGNoZWNrZXIgJysnY3JlYXRvciAoYXJyYXlPZiwgaW5zdGFuY2VPZiwgb2JqZWN0T2YsIG9uZU9mLCBvbmVPZlR5cGUsIGFuZCAnKydzaGFwZSBhbGwgcmVxdWlyZSBhbiBhcmd1bWVudCkuJyk7fWlmKGVycm9yIGluc3RhbmNlb2YgRXJyb3ImJiEoZXJyb3IubWVzc2FnZSBpbiBsb2dnZWRUeXBlRmFpbHVyZXMpKXsvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbi8vIHNhbWUgZXJyb3IuXG5sb2dnZWRUeXBlRmFpbHVyZXNbZXJyb3IubWVzc2FnZV09dHJ1ZTt2YXIgc3RhY2s9Z2V0U3RhY2s/Z2V0U3RhY2soKTonJztwcmludFdhcm5pbmcoJ0ZhaWxlZCAnK2xvY2F0aW9uKycgdHlwZTogJytlcnJvci5tZXNzYWdlKyhzdGFjayE9bnVsbD9zdGFjazonJykpO319fX19LyoqXG4gKiBSZXNldHMgd2FybmluZyBjYWNoZSB3aGVuIHRlc3RpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqL2NoZWNrUHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlPWZ1bmN0aW9uKCl7aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe2xvZ2dlZFR5cGVGYWlsdXJlcz17fTt9fTttb2R1bGUuZXhwb3J0cz1jaGVja1Byb3BUeXBlcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvcC10eXBlcy9jaGVja1Byb3BUeXBlcy5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqLyd1c2Ugc3RyaWN0Jzt2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQ9cmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCl7fWZ1bmN0aW9uIGVtcHR5RnVuY3Rpb25XaXRoUmVzZXQoKXt9ZW1wdHlGdW5jdGlvbldpdGhSZXNldC5yZXNldFdhcm5pbmdDYWNoZT1lbXB0eUZ1bmN0aW9uO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gc2hpbShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxzZWNyZXQpe2lmKHNlY3JldD09PVJlYWN0UHJvcFR5cGVzU2VjcmV0KXsvLyBJdCBpcyBzdGlsbCBzYWZlIHdoZW4gY2FsbGVkIGZyb20gUmVhY3QuXG5yZXR1cm47fXZhciBlcnI9bmV3IEVycm9yKCdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnKydVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnKydSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJyk7ZXJyLm5hbWU9J0ludmFyaWFudCBWaW9sYXRpb24nO3Rocm93IGVycjt9O3NoaW0uaXNSZXF1aXJlZD1zaGltO2Z1bmN0aW9uIGdldFNoaW0oKXtyZXR1cm4gc2hpbTt9Oy8vIEltcG9ydGFudCFcbi8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxudmFyIFJlYWN0UHJvcFR5cGVzPXthcnJheTpzaGltLGJvb2w6c2hpbSxmdW5jOnNoaW0sbnVtYmVyOnNoaW0sb2JqZWN0OnNoaW0sc3RyaW5nOnNoaW0sc3ltYm9sOnNoaW0sYW55OnNoaW0sYXJyYXlPZjpnZXRTaGltLGVsZW1lbnQ6c2hpbSxlbGVtZW50VHlwZTpzaGltLGluc3RhbmNlT2Y6Z2V0U2hpbSxub2RlOnNoaW0sb2JqZWN0T2Y6Z2V0U2hpbSxvbmVPZjpnZXRTaGltLG9uZU9mVHlwZTpnZXRTaGltLHNoYXBlOmdldFNoaW0sZXhhY3Q6Z2V0U2hpbSxjaGVja1Byb3BUeXBlczplbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LHJlc2V0V2FybmluZ0NhY2hlOmVtcHR5RnVuY3Rpb259O1JlYWN0UHJvcFR5cGVzLlByb3BUeXBlcz1SZWFjdFByb3BUeXBlcztyZXR1cm4gUmVhY3RQcm9wVHlwZXM7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvcC10eXBlcy9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIga2V5PSdfX2dsb2JhbF91bmlxdWVfaWRfXyc7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gZ2xvYmFsW2tleV09KGdsb2JhbFtrZXldfHwwKSsxO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2d1ZC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo7fTt2YXIgaXNhcnJheT1yZXF1aXJlKCdpc2FycmF5Jyk7LyoqXG4gKiBFeHBvc2UgYHBhdGhUb1JlZ2V4cGAuXG4gKi9tb2R1bGUuZXhwb3J0cz1wYXRoVG9SZWdleHA7bW9kdWxlLmV4cG9ydHMucGFyc2U9cGFyc2U7bW9kdWxlLmV4cG9ydHMuY29tcGlsZT1jb21waWxlO21vZHVsZS5leHBvcnRzLnRva2Vuc1RvRnVuY3Rpb249dG9rZW5zVG9GdW5jdGlvbjttb2R1bGUuZXhwb3J0cy50b2tlbnNUb1JlZ0V4cD10b2tlbnNUb1JlZ0V4cDsvKipcbiAqIFRoZSBtYWluIHBhdGggbWF0Y2hpbmcgcmVnZXhwIHV0aWxpdHkuXG4gKlxuICogQHR5cGUge1JlZ0V4cH1cbiAqL3ZhciBQQVRIX1JFR0VYUD1uZXcgUmVnRXhwKFsvLyBNYXRjaCBlc2NhcGVkIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYXBwZWFyIGluIGZ1dHVyZSBtYXRjaGVzLlxuLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS5cbicoXFxcXFxcXFwuKScsLy8gTWF0Y2ggRXhwcmVzcy1zdHlsZSBwYXJhbWV0ZXJzIGFuZCB1bi1uYW1lZCBwYXJhbWV0ZXJzIHdpdGggYSBwcmVmaXhcbi8vIGFuZCBvcHRpb25hbCBzdWZmaXhlcy4gTWF0Y2hlcyBhcHBlYXIgYXM6XG4vL1xuLy8gXCIvOnRlc3QoXFxcXGQrKT9cIiA9PiBbXCIvXCIsIFwidGVzdFwiLCBcIlxcZCtcIiwgdW5kZWZpbmVkLCBcIj9cIiwgdW5kZWZpbmVkXVxuLy8gXCIvcm91dGUoXFxcXGQrKVwiICA9PiBbdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgXCJcXGQrXCIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuLy8gXCIvKlwiICAgICAgICAgICAgPT4gW1wiL1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIFwiKlwiXVxuJyhbXFxcXC8uXSk/KD86KD86XFxcXDooXFxcXHcrKSg/OlxcXFwoKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKCldKSspXFxcXCkpP3xcXFxcKCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpXSkrKVxcXFwpKShbKyo/XSk/fChcXFxcKikpJ10uam9pbignfCcpLCdnJyk7LyoqXG4gKiBQYXJzZSBhIHN0cmluZyBmb3IgdGhlIHJhdyB0b2tlbnMuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3RyXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcmV0dXJuIHshQXJyYXl9XG4gKi9mdW5jdGlvbiBwYXJzZShzdHIsb3B0aW9ucyl7dmFyIHRva2Vucz1bXTt2YXIga2V5PTA7dmFyIGluZGV4PTA7dmFyIHBhdGg9Jyc7dmFyIGRlZmF1bHREZWxpbWl0ZXI9b3B0aW9ucyYmb3B0aW9ucy5kZWxpbWl0ZXJ8fCcvJzt2YXIgcmVzO3doaWxlKChyZXM9UEFUSF9SRUdFWFAuZXhlYyhzdHIpKSE9bnVsbCl7dmFyIG09cmVzWzBdO3ZhciBlc2NhcGVkPXJlc1sxXTt2YXIgb2Zmc2V0PXJlcy5pbmRleDtwYXRoKz1zdHIuc2xpY2UoaW5kZXgsb2Zmc2V0KTtpbmRleD1vZmZzZXQrbS5sZW5ndGg7Ly8gSWdub3JlIGFscmVhZHkgZXNjYXBlZCBzZXF1ZW5jZXMuXG5pZihlc2NhcGVkKXtwYXRoKz1lc2NhcGVkWzFdO2NvbnRpbnVlO312YXIgbmV4dD1zdHJbaW5kZXhdO3ZhciBwcmVmaXg9cmVzWzJdO3ZhciBuYW1lPXJlc1szXTt2YXIgY2FwdHVyZT1yZXNbNF07dmFyIGdyb3VwPXJlc1s1XTt2YXIgbW9kaWZpZXI9cmVzWzZdO3ZhciBhc3Rlcmlzaz1yZXNbN107Ly8gUHVzaCB0aGUgY3VycmVudCBwYXRoIG9udG8gdGhlIHRva2Vucy5cbmlmKHBhdGgpe3Rva2Vucy5wdXNoKHBhdGgpO3BhdGg9Jyc7fXZhciBwYXJ0aWFsPXByZWZpeCE9bnVsbCYmbmV4dCE9bnVsbCYmbmV4dCE9PXByZWZpeDt2YXIgcmVwZWF0PW1vZGlmaWVyPT09JysnfHxtb2RpZmllcj09PScqJzt2YXIgb3B0aW9uYWw9bW9kaWZpZXI9PT0nPyd8fG1vZGlmaWVyPT09JyonO3ZhciBkZWxpbWl0ZXI9cmVzWzJdfHxkZWZhdWx0RGVsaW1pdGVyO3ZhciBwYXR0ZXJuPWNhcHR1cmV8fGdyb3VwO3Rva2Vucy5wdXNoKHtuYW1lOm5hbWV8fGtleSsrLHByZWZpeDpwcmVmaXh8fCcnLGRlbGltaXRlcjpkZWxpbWl0ZXIsb3B0aW9uYWw6b3B0aW9uYWwscmVwZWF0OnJlcGVhdCxwYXJ0aWFsOnBhcnRpYWwsYXN0ZXJpc2s6ISFhc3RlcmlzayxwYXR0ZXJuOnBhdHRlcm4/ZXNjYXBlR3JvdXAocGF0dGVybik6YXN0ZXJpc2s/Jy4qJzonW14nK2VzY2FwZVN0cmluZyhkZWxpbWl0ZXIpKyddKz8nfSk7fS8vIE1hdGNoIGFueSBjaGFyYWN0ZXJzIHN0aWxsIHJlbWFpbmluZy5cbmlmKGluZGV4PHN0ci5sZW5ndGgpe3BhdGgrPXN0ci5zdWJzdHIoaW5kZXgpO30vLyBJZiB0aGUgcGF0aCBleGlzdHMsIHB1c2ggaXQgb250byB0aGUgZW5kLlxuaWYocGF0aCl7dG9rZW5zLnB1c2gocGF0aCk7fXJldHVybiB0b2tlbnM7fS8qKlxuICogQ29tcGlsZSBhIHN0cmluZyB0byBhIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciB0aGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgIHN0clxuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshZnVuY3Rpb24oT2JqZWN0PSwgT2JqZWN0PSl9XG4gKi9mdW5jdGlvbiBjb21waWxlKHN0cixvcHRpb25zKXtyZXR1cm4gdG9rZW5zVG9GdW5jdGlvbihwYXJzZShzdHIsb3B0aW9ucykpO30vKipcbiAqIFByZXR0aWVyIGVuY29kaW5nIG9mIFVSSSBwYXRoIHNlZ21lbnRzLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ31cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL2Z1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudFByZXR0eShzdHIpe3JldHVybiBlbmNvZGVVUkkoc3RyKS5yZXBsYWNlKC9bXFwvPyNdL2csZnVuY3Rpb24oYyl7cmV0dXJuJyUnK2MuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTt9KTt9LyoqXG4gKiBFbmNvZGUgdGhlIGFzdGVyaXNrIHBhcmFtZXRlci4gU2ltaWxhciB0byBgcHJldHR5YCwgYnV0IGFsbG93cyBzbGFzaGVzLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ31cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL2Z1bmN0aW9uIGVuY29kZUFzdGVyaXNrKHN0cil7cmV0dXJuIGVuY29kZVVSSShzdHIpLnJlcGxhY2UoL1s/I10vZyxmdW5jdGlvbihjKXtyZXR1cm4nJScrYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO30pO30vKipcbiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuICovZnVuY3Rpb24gdG9rZW5zVG9GdW5jdGlvbih0b2tlbnMpey8vIENvbXBpbGUgYWxsIHRoZSB0b2tlbnMgaW50byByZWdleHBzLlxudmFyIG1hdGNoZXM9bmV3IEFycmF5KHRva2Vucy5sZW5ndGgpOy8vIENvbXBpbGUgYWxsIHRoZSBwYXR0ZXJucyBiZWZvcmUgY29tcGlsYXRpb24uXG5mb3IodmFyIGk9MDtpPHRva2Vucy5sZW5ndGg7aSsrKXtpZihfdHlwZW9mKHRva2Vuc1tpXSk9PT0nb2JqZWN0Jyl7bWF0Y2hlc1tpXT1uZXcgUmVnRXhwKCdeKD86Jyt0b2tlbnNbaV0ucGF0dGVybisnKSQnKTt9fXJldHVybiBmdW5jdGlvbihvYmosb3B0cyl7dmFyIHBhdGg9Jyc7dmFyIGRhdGE9b2JqfHx7fTt2YXIgb3B0aW9ucz1vcHRzfHx7fTt2YXIgZW5jb2RlPW9wdGlvbnMucHJldHR5P2VuY29kZVVSSUNvbXBvbmVudFByZXR0eTplbmNvZGVVUklDb21wb25lbnQ7Zm9yKHZhciBpPTA7aTx0b2tlbnMubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2Vuc1tpXTtpZih0eXBlb2YgdG9rZW49PT0nc3RyaW5nJyl7cGF0aCs9dG9rZW47Y29udGludWU7fXZhciB2YWx1ZT1kYXRhW3Rva2VuLm5hbWVdO3ZhciBzZWdtZW50O2lmKHZhbHVlPT1udWxsKXtpZih0b2tlbi5vcHRpb25hbCl7Ly8gUHJlcGVuZCBwYXJ0aWFsIHNlZ21lbnQgcHJlZml4ZXMuXG5pZih0b2tlbi5wYXJ0aWFsKXtwYXRoKz10b2tlbi5wcmVmaXg7fWNvbnRpbnVlO31lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyt0b2tlbi5uYW1lKydcIiB0byBiZSBkZWZpbmVkJyk7fX1pZihpc2FycmF5KHZhbHVlKSl7aWYoIXRva2VuLnJlcGVhdCl7dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgXCInK3Rva2VuLm5hbWUrJ1wiIHRvIG5vdCByZXBlYXQsIGJ1dCByZWNlaXZlZCBgJytKU09OLnN0cmluZ2lmeSh2YWx1ZSkrJ2AnKTt9aWYodmFsdWUubGVuZ3RoPT09MCl7aWYodG9rZW4ub3B0aW9uYWwpe2NvbnRpbnVlO31lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyt0b2tlbi5uYW1lKydcIiB0byBub3QgYmUgZW1wdHknKTt9fWZvcih2YXIgaj0wO2o8dmFsdWUubGVuZ3RoO2orKyl7c2VnbWVudD1lbmNvZGUodmFsdWVbal0pO2lmKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCBcIicrdG9rZW4ubmFtZSsnXCIgdG8gbWF0Y2ggXCInK3Rva2VuLnBhdHRlcm4rJ1wiLCBidXQgcmVjZWl2ZWQgYCcrSlNPTi5zdHJpbmdpZnkoc2VnbWVudCkrJ2AnKTt9cGF0aCs9KGo9PT0wP3Rva2VuLnByZWZpeDp0b2tlbi5kZWxpbWl0ZXIpK3NlZ21lbnQ7fWNvbnRpbnVlO31zZWdtZW50PXRva2VuLmFzdGVyaXNrP2VuY29kZUFzdGVyaXNrKHZhbHVlKTplbmNvZGUodmFsdWUpO2lmKCFtYXRjaGVzW2ldLnRlc3Qoc2VnbWVudCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIFwiJyt0b2tlbi5uYW1lKydcIiB0byBtYXRjaCBcIicrdG9rZW4ucGF0dGVybisnXCIsIGJ1dCByZWNlaXZlZCBcIicrc2VnbWVudCsnXCInKTt9cGF0aCs9dG9rZW4ucHJlZml4K3NlZ21lbnQ7fXJldHVybiBwYXRoO307fS8qKlxuICogRXNjYXBlIGEgcmVndWxhciBleHByZXNzaW9uIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfVxuICovZnVuY3Rpb24gZXNjYXBlU3RyaW5nKHN0cil7cmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL1xcXFxdKS9nLCdcXFxcJDEnKTt9LyoqXG4gKiBFc2NhcGUgdGhlIGNhcHR1cmluZyBncm91cCBieSBlc2NhcGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgYW5kIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFxuICogQHJldHVybiB7c3RyaW5nfVxuICovZnVuY3Rpb24gZXNjYXBlR3JvdXAoZ3JvdXApe3JldHVybiBncm91cC5yZXBsYWNlKC8oWz0hOiRcXC8oKV0pL2csJ1xcXFwkMScpO30vKipcbiAqIEF0dGFjaCB0aGUga2V5cyBhcyBhIHByb3BlcnR5IG9mIHRoZSByZWdleHAuXG4gKlxuICogQHBhcmFtICB7IVJlZ0V4cH0gcmVcbiAqIEBwYXJhbSAge0FycmF5fSAgIGtleXNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9mdW5jdGlvbiBhdHRhY2hLZXlzKHJlLGtleXMpe3JlLmtleXM9a2V5cztyZXR1cm4gcmU7fS8qKlxuICogR2V0IHRoZSBmbGFncyBmb3IgYSByZWdleHAgZnJvbSB0aGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL2Z1bmN0aW9uIGZsYWdzKG9wdGlvbnMpe3JldHVybiBvcHRpb25zLnNlbnNpdGl2ZT8nJzonaSc7fS8qKlxuICogUHVsbCBvdXQga2V5cyBmcm9tIGEgcmVnZXhwLlxuICpcbiAqIEBwYXJhbSAgeyFSZWdFeHB9IHBhdGhcbiAqIEBwYXJhbSAgeyFBcnJheX0gIGtleXNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9mdW5jdGlvbiByZWdleHBUb1JlZ2V4cChwYXRoLGtleXMpey8vIFVzZSBhIG5lZ2F0aXZlIGxvb2thaGVhZCB0byBtYXRjaCBvbmx5IGNhcHR1cmluZyBncm91cHMuXG52YXIgZ3JvdXBzPXBhdGguc291cmNlLm1hdGNoKC9cXCgoPyFcXD8pL2cpO2lmKGdyb3Vwcyl7Zm9yKHZhciBpPTA7aTxncm91cHMubGVuZ3RoO2krKyl7a2V5cy5wdXNoKHtuYW1lOmkscHJlZml4Om51bGwsZGVsaW1pdGVyOm51bGwsb3B0aW9uYWw6ZmFsc2UscmVwZWF0OmZhbHNlLHBhcnRpYWw6ZmFsc2UsYXN0ZXJpc2s6ZmFsc2UscGF0dGVybjpudWxsfSk7fX1yZXR1cm4gYXR0YWNoS2V5cyhwYXRoLGtleXMpO30vKipcbiAqIFRyYW5zZm9ybSBhbiBhcnJheSBpbnRvIGEgcmVnZXhwLlxuICpcbiAqIEBwYXJhbSAgeyFBcnJheX0gIHBhdGhcbiAqIEBwYXJhbSAge0FycmF5fSAgIGtleXNcbiAqIEBwYXJhbSAgeyFPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9mdW5jdGlvbiBhcnJheVRvUmVnZXhwKHBhdGgsa2V5cyxvcHRpb25zKXt2YXIgcGFydHM9W107Zm9yKHZhciBpPTA7aTxwYXRoLmxlbmd0aDtpKyspe3BhcnRzLnB1c2gocGF0aFRvUmVnZXhwKHBhdGhbaV0sa2V5cyxvcHRpb25zKS5zb3VyY2UpO312YXIgcmVnZXhwPW5ldyBSZWdFeHAoJyg/OicrcGFydHMuam9pbignfCcpKycpJyxmbGFncyhvcHRpb25zKSk7cmV0dXJuIGF0dGFjaEtleXMocmVnZXhwLGtleXMpO30vKipcbiAqIENyZWF0ZSBhIHBhdGggcmVnZXhwIGZyb20gc3RyaW5nIGlucHV0LlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gIHBhdGhcbiAqIEBwYXJhbSAgeyFBcnJheX0gIGtleXNcbiAqIEBwYXJhbSAgeyFPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4geyFSZWdFeHB9XG4gKi9mdW5jdGlvbiBzdHJpbmdUb1JlZ2V4cChwYXRoLGtleXMsb3B0aW9ucyl7cmV0dXJuIHRva2Vuc1RvUmVnRXhwKHBhcnNlKHBhdGgsb3B0aW9ucyksa2V5cyxvcHRpb25zKTt9LyoqXG4gKiBFeHBvc2UgYSBmdW5jdGlvbiBmb3IgdGFraW5nIHRva2VucyBhbmQgcmV0dXJuaW5nIGEgUmVnRXhwLlxuICpcbiAqIEBwYXJhbSAgeyFBcnJheX0gICAgICAgICAgdG9rZW5zXG4gKiBAcGFyYW0gIHsoQXJyYXl8T2JqZWN0KT19IGtleXNcbiAqIEBwYXJhbSAge09iamVjdD19ICAgICAgICAgb3B0aW9uc1xuICogQHJldHVybiB7IVJlZ0V4cH1cbiAqL2Z1bmN0aW9uIHRva2Vuc1RvUmVnRXhwKHRva2VucyxrZXlzLG9wdGlvbnMpe2lmKCFpc2FycmF5KGtleXMpKXtvcHRpb25zPS8qKiBAdHlwZSB7IU9iamVjdH0gKi9rZXlzfHxvcHRpb25zO2tleXM9W107fW9wdGlvbnM9b3B0aW9uc3x8e307dmFyIHN0cmljdD1vcHRpb25zLnN0cmljdDt2YXIgZW5kPW9wdGlvbnMuZW5kIT09ZmFsc2U7dmFyIHJvdXRlPScnOy8vIEl0ZXJhdGUgb3ZlciB0aGUgdG9rZW5zIGFuZCBjcmVhdGUgb3VyIHJlZ2V4cCBzdHJpbmcuXG5mb3IodmFyIGk9MDtpPHRva2Vucy5sZW5ndGg7aSsrKXt2YXIgdG9rZW49dG9rZW5zW2ldO2lmKHR5cGVvZiB0b2tlbj09PSdzdHJpbmcnKXtyb3V0ZSs9ZXNjYXBlU3RyaW5nKHRva2VuKTt9ZWxzZXt2YXIgcHJlZml4PWVzY2FwZVN0cmluZyh0b2tlbi5wcmVmaXgpO3ZhciBjYXB0dXJlPScoPzonK3Rva2VuLnBhdHRlcm4rJyknO2tleXMucHVzaCh0b2tlbik7aWYodG9rZW4ucmVwZWF0KXtjYXB0dXJlKz0nKD86JytwcmVmaXgrY2FwdHVyZSsnKSonO31pZih0b2tlbi5vcHRpb25hbCl7aWYoIXRva2VuLnBhcnRpYWwpe2NhcHR1cmU9Jyg/OicrcHJlZml4KycoJytjYXB0dXJlKycpKT8nO31lbHNle2NhcHR1cmU9cHJlZml4KycoJytjYXB0dXJlKycpPyc7fX1lbHNle2NhcHR1cmU9cHJlZml4KycoJytjYXB0dXJlKycpJzt9cm91dGUrPWNhcHR1cmU7fX12YXIgZGVsaW1pdGVyPWVzY2FwZVN0cmluZyhvcHRpb25zLmRlbGltaXRlcnx8Jy8nKTt2YXIgZW5kc1dpdGhEZWxpbWl0ZXI9cm91dGUuc2xpY2UoLWRlbGltaXRlci5sZW5ndGgpPT09ZGVsaW1pdGVyOy8vIEluIG5vbi1zdHJpY3QgbW9kZSB3ZSBhbGxvdyBhIHNsYXNoIGF0IHRoZSBlbmQgb2YgbWF0Y2guIElmIHRoZSBwYXRoIHRvXG4vLyBtYXRjaCBhbHJlYWR5IGVuZHMgd2l0aCBhIHNsYXNoLCB3ZSByZW1vdmUgaXQgZm9yIGNvbnNpc3RlbmN5LiBUaGUgc2xhc2hcbi8vIGlzIHZhbGlkIGF0IHRoZSBlbmQgb2YgYSBwYXRoIG1hdGNoLCBub3QgaW4gdGhlIG1pZGRsZS4gVGhpcyBpcyBpbXBvcnRhbnRcbi8vIGluIG5vbi1lbmRpbmcgbW9kZSwgd2hlcmUgXCIvdGVzdC9cIiBzaG91bGRuJ3QgbWF0Y2ggXCIvdGVzdC8vcm91dGVcIi5cbmlmKCFzdHJpY3Qpe3JvdXRlPShlbmRzV2l0aERlbGltaXRlcj9yb3V0ZS5zbGljZSgwLC1kZWxpbWl0ZXIubGVuZ3RoKTpyb3V0ZSkrJyg/OicrZGVsaW1pdGVyKycoPz0kKSk/Jzt9aWYoZW5kKXtyb3V0ZSs9JyQnO31lbHNley8vIEluIG5vbi1lbmRpbmcgbW9kZSwgd2UgbmVlZCB0aGUgY2FwdHVyaW5nIGdyb3VwcyB0byBtYXRjaCBhcyBtdWNoIGFzXG4vLyBwb3NzaWJsZSBieSB1c2luZyBhIHBvc2l0aXZlIGxvb2thaGVhZCB0byB0aGUgZW5kIG9yIG5leHQgcGF0aCBzZWdtZW50Llxucm91dGUrPXN0cmljdCYmZW5kc1dpdGhEZWxpbWl0ZXI/Jyc6Jyg/PScrZGVsaW1pdGVyKyd8JCknO31yZXR1cm4gYXR0YWNoS2V5cyhuZXcgUmVnRXhwKCdeJytyb3V0ZSxmbGFncyhvcHRpb25zKSksa2V5cyk7fS8qKlxuICogTm9ybWFsaXplIHRoZSBnaXZlbiBwYXRoIHN0cmluZywgcmV0dXJuaW5nIGEgcmVndWxhciBleHByZXNzaW9uLlxuICpcbiAqIEFuIGVtcHR5IGFycmF5IGNhbiBiZSBwYXNzZWQgaW4gZm9yIHRoZSBrZXlzLCB3aGljaCB3aWxsIGhvbGQgdGhlXG4gKiBwbGFjZWhvbGRlciBrZXkgZGVzY3JpcHRpb25zLiBGb3IgZXhhbXBsZSwgdXNpbmcgYC91c2VyLzppZGAsIGBrZXlzYCB3aWxsXG4gKiBjb250YWluIGBbeyBuYW1lOiAnaWQnLCBkZWxpbWl0ZXI6ICcvJywgb3B0aW9uYWw6IGZhbHNlLCByZXBlYXQ6IGZhbHNlIH1dYC5cbiAqXG4gKiBAcGFyYW0gIHsoc3RyaW5nfFJlZ0V4cHxBcnJheSl9IHBhdGhcbiAqIEBwYXJhbSAgeyhBcnJheXxPYmplY3QpPX0gICAgICAga2V5c1xuICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICAgICBvcHRpb25zXG4gKiBAcmV0dXJuIHshUmVnRXhwfVxuICovZnVuY3Rpb24gcGF0aFRvUmVnZXhwKHBhdGgsa2V5cyxvcHRpb25zKXtpZighaXNhcnJheShrZXlzKSl7b3B0aW9ucz0vKiogQHR5cGUgeyFPYmplY3R9ICova2V5c3x8b3B0aW9ucztrZXlzPVtdO31vcHRpb25zPW9wdGlvbnN8fHt9O2lmKHBhdGggaW5zdGFuY2VvZiBSZWdFeHApe3JldHVybiByZWdleHBUb1JlZ2V4cChwYXRoLC8qKiBAdHlwZSB7IUFycmF5fSAqL2tleXMpO31pZihpc2FycmF5KHBhdGgpKXtyZXR1cm4gYXJyYXlUb1JlZ2V4cCgvKiogQHR5cGUgeyFBcnJheX0gKi9wYXRoLC8qKiBAdHlwZSB7IUFycmF5fSAqL2tleXMsb3B0aW9ucyk7fXJldHVybiBzdHJpbmdUb1JlZ2V4cCgvKiogQHR5cGUge3N0cmluZ30gKi9wYXRoLC8qKiBAdHlwZSB7IUFycmF5fSAqL2tleXMsb3B0aW9ucyk7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXIvfi9wYXRoLXRvLXJlZ2V4cC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGFycil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpPT0nW29iamVjdCBBcnJheV0nO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci9+L2lzYXJyYXkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvKipcbiAqIENvcHlyaWdodCAyMDE1LCBZYWhvbyEgSW5jLlxuICogQ29weXJpZ2h0cyBsaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBMaWNlbnNlLiBTZWUgdGhlIGFjY29tcGFueWluZyBMSUNFTlNFIGZpbGUgZm9yIHRlcm1zLlxuICovdmFyIFJlYWN0SXM9cmVxdWlyZSgncmVhY3QtaXMnKTt2YXIgUkVBQ1RfU1RBVElDUz17Y2hpbGRDb250ZXh0VHlwZXM6dHJ1ZSxjb250ZXh0VHlwZTp0cnVlLGNvbnRleHRUeXBlczp0cnVlLGRlZmF1bHRQcm9wczp0cnVlLGRpc3BsYXlOYW1lOnRydWUsZ2V0RGVmYXVsdFByb3BzOnRydWUsZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yOnRydWUsZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOnRydWUsbWl4aW5zOnRydWUscHJvcFR5cGVzOnRydWUsdHlwZTp0cnVlfTt2YXIgS05PV05fU1RBVElDUz17bmFtZTp0cnVlLGxlbmd0aDp0cnVlLHByb3RvdHlwZTp0cnVlLGNhbGxlcjp0cnVlLGNhbGxlZTp0cnVlLGFyZ3VtZW50czp0cnVlLGFyaXR5OnRydWV9O3ZhciBGT1JXQVJEX1JFRl9TVEFUSUNTPXsnJCR0eXBlb2YnOnRydWUscmVuZGVyOnRydWUsZGVmYXVsdFByb3BzOnRydWUsZGlzcGxheU5hbWU6dHJ1ZSxwcm9wVHlwZXM6dHJ1ZX07dmFyIE1FTU9fU1RBVElDUz17JyQkdHlwZW9mJzp0cnVlLGNvbXBhcmU6dHJ1ZSxkZWZhdWx0UHJvcHM6dHJ1ZSxkaXNwbGF5TmFtZTp0cnVlLHByb3BUeXBlczp0cnVlLHR5cGU6dHJ1ZX07dmFyIFRZUEVfU1RBVElDUz17fTtUWVBFX1NUQVRJQ1NbUmVhY3RJcy5Gb3J3YXJkUmVmXT1GT1JXQVJEX1JFRl9TVEFUSUNTO2Z1bmN0aW9uIGdldFN0YXRpY3MoY29tcG9uZW50KXtpZihSZWFjdElzLmlzTWVtbyhjb21wb25lbnQpKXtyZXR1cm4gTUVNT19TVEFUSUNTO31yZXR1cm4gVFlQRV9TVEFUSUNTW2NvbXBvbmVudFsnJCR0eXBlb2YnXV18fFJFQUNUX1NUQVRJQ1M7fXZhciBkZWZpbmVQcm9wZXJ0eT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIGdldE93blByb3BlcnR5TmFtZXM9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7dmFyIGdldE93blByb3BlcnR5U3ltYm9scz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO3ZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt2YXIgZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LmdldFByb3RvdHlwZU9mO3ZhciBvYmplY3RQcm90b3R5cGU9T2JqZWN0LnByb3RvdHlwZTtmdW5jdGlvbiBob2lzdE5vblJlYWN0U3RhdGljcyh0YXJnZXRDb21wb25lbnQsc291cmNlQ29tcG9uZW50LGJsYWNrbGlzdCl7aWYodHlwZW9mIHNvdXJjZUNvbXBvbmVudCE9PSdzdHJpbmcnKXsvLyBkb24ndCBob2lzdCBvdmVyIHN0cmluZyAoaHRtbCkgY29tcG9uZW50c1xuaWYob2JqZWN0UHJvdG90eXBlKXt2YXIgaW5oZXJpdGVkQ29tcG9uZW50PWdldFByb3RvdHlwZU9mKHNvdXJjZUNvbXBvbmVudCk7aWYoaW5oZXJpdGVkQ29tcG9uZW50JiZpbmhlcml0ZWRDb21wb25lbnQhPT1vYmplY3RQcm90b3R5cGUpe2hvaXN0Tm9uUmVhY3RTdGF0aWNzKHRhcmdldENvbXBvbmVudCxpbmhlcml0ZWRDb21wb25lbnQsYmxhY2tsaXN0KTt9fXZhciBrZXlzPWdldE93blByb3BlcnR5TmFtZXMoc291cmNlQ29tcG9uZW50KTtpZihnZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe2tleXM9a2V5cy5jb25jYXQoZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZUNvbXBvbmVudCkpO312YXIgdGFyZ2V0U3RhdGljcz1nZXRTdGF0aWNzKHRhcmdldENvbXBvbmVudCk7dmFyIHNvdXJjZVN0YXRpY3M9Z2V0U3RhdGljcyhzb3VyY2VDb21wb25lbnQpO2Zvcih2YXIgaT0wO2k8a2V5cy5sZW5ndGg7KytpKXt2YXIga2V5PWtleXNbaV07aWYoIUtOT1dOX1NUQVRJQ1Nba2V5XSYmIShibGFja2xpc3QmJmJsYWNrbGlzdFtrZXldKSYmIShzb3VyY2VTdGF0aWNzJiZzb3VyY2VTdGF0aWNzW2tleV0pJiYhKHRhcmdldFN0YXRpY3MmJnRhcmdldFN0YXRpY3Nba2V5XSkpe3ZhciBkZXNjcmlwdG9yPWdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2VDb21wb25lbnQsa2V5KTt0cnl7Ly8gQXZvaWQgZmFpbHVyZXMgZnJvbSByZWFkLW9ubHkgcHJvcGVydGllc1xuZGVmaW5lUHJvcGVydHkodGFyZ2V0Q29tcG9uZW50LGtleSxkZXNjcmlwdG9yKTt9Y2F0Y2goZSl7fX19cmV0dXJuIHRhcmdldENvbXBvbmVudDt9cmV0dXJuIHRhcmdldENvbXBvbmVudDt9bW9kdWxlLmV4cG9ydHM9aG9pc3ROb25SZWFjdFN0YXRpY3M7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzL2Rpc3QvaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MuY2pzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdChleCl7cmV0dXJuIGV4JiYodHlwZW9mIGV4PT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihleCkpPT09J29iamVjdCcmJidkZWZhdWx0J2luIGV4P2V4WydkZWZhdWx0J106ZXg7fXZhciBSZWFjdD1faW50ZXJvcERlZmF1bHQocmVxdWlyZSgncmVhY3QnKSk7dmFyIFByb3BUeXBlcz1faW50ZXJvcERlZmF1bHQocmVxdWlyZSgncHJvcC10eXBlcycpKTt2YXIgaGlzdG9yeT1yZXF1aXJlKCdoaXN0b3J5Jyk7dmFyIHdhcm5pbmc9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ3Rpbnktd2FybmluZycpKTt2YXIgY3JlYXRlQ29udGV4dD1faW50ZXJvcERlZmF1bHQocmVxdWlyZSgnbWluaS1jcmVhdGUtcmVhY3QtY29udGV4dCcpKTt2YXIgaW52YXJpYW50PV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCd0aW55LWludmFyaWFudCcpKTt2YXIgcGF0aFRvUmVnZXhwPV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdwYXRoLXRvLXJlZ2V4cCcpKTt2YXIgcmVhY3RJcz1yZXF1aXJlKCdyZWFjdC1pcycpO3ZhciBob2lzdFN0YXRpY3M9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzJykpO2Z1bmN0aW9uIF9leHRlbmRzKCl7X2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXTtmb3IodmFyIGtleSBpbiBzb3VyY2Upe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2Usa2V5KSl7dGFyZ2V0W2tleV09c291cmNlW2tleV07fX19cmV0dXJuIHRhcmdldDt9O3JldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fWZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe3N1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3I9c3ViQ2xhc3M7c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSxleGNsdWRlZCl7aWYoc291cmNlPT1udWxsKXJldHVybnt9O3ZhciB0YXJnZXQ9e307dmFyIHNvdXJjZUtleXM9T2JqZWN0LmtleXMoc291cmNlKTt2YXIga2V5LGk7Zm9yKGk9MDtpPHNvdXJjZUtleXMubGVuZ3RoO2krKyl7a2V5PXNvdXJjZUtleXNbaV07aWYoZXhjbHVkZWQuaW5kZXhPZihrZXkpPj0wKWNvbnRpbnVlO3RhcmdldFtrZXldPXNvdXJjZVtrZXldO31yZXR1cm4gdGFyZ2V0O30vLyBUT0RPOiBSZXBsYWNlIHdpdGggUmVhY3QuY3JlYXRlQ29udGV4dCBvbmNlIHdlIGNhbiBhc3N1bWUgUmVhY3QgMTYrXG52YXIgY3JlYXRlTmFtZWRDb250ZXh0PWZ1bmN0aW9uIGNyZWF0ZU5hbWVkQ29udGV4dChuYW1lKXt2YXIgY29udGV4dD1jcmVhdGVDb250ZXh0KCk7Y29udGV4dC5kaXNwbGF5TmFtZT1uYW1lO3JldHVybiBjb250ZXh0O307dmFyIGNvbnRleHQ9LyojX19QVVJFX18qL2NyZWF0ZU5hbWVkQ29udGV4dChcIlJvdXRlclwiKTsvKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBwdXR0aW5nIGhpc3Rvcnkgb24gY29udGV4dC5cbiAqL3ZhciBSb3V0ZXI9LyojX19QVVJFX18qL2Z1bmN0aW9uKF9SZWFjdCRDb21wb25lbnQpe19pbmhlcml0c0xvb3NlKFJvdXRlcixfUmVhY3QkQ29tcG9uZW50KTtSb3V0ZXIuY29tcHV0ZVJvb3RNYXRjaD1mdW5jdGlvbiBjb21wdXRlUm9vdE1hdGNoKHBhdGhuYW1lKXtyZXR1cm57cGF0aDpcIi9cIix1cmw6XCIvXCIscGFyYW1zOnt9LGlzRXhhY3Q6cGF0aG5hbWU9PT1cIi9cIn07fTtmdW5jdGlvbiBSb3V0ZXIocHJvcHMpe3ZhciBfdGhpcztfdGhpcz1fUmVhY3QkQ29tcG9uZW50LmNhbGwodGhpcyxwcm9wcyl8fHRoaXM7X3RoaXMuc3RhdGU9e2xvY2F0aW9uOnByb3BzLmhpc3RvcnkubG9jYXRpb259Oy8vIFRoaXMgaXMgYSBiaXQgb2YgYSBoYWNrLiBXZSBoYXZlIHRvIHN0YXJ0IGxpc3RlbmluZyBmb3IgbG9jYXRpb25cbi8vIGNoYW5nZXMgaGVyZSBpbiB0aGUgY29uc3RydWN0b3IgaW4gY2FzZSB0aGVyZSBhcmUgYW55IDxSZWRpcmVjdD5zXG4vLyBvbiB0aGUgaW5pdGlhbCByZW5kZXIuIElmIHRoZXJlIGFyZSwgdGhleSB3aWxsIHJlcGxhY2UvcHVzaCB3aGVuXG4vLyB0aGV5IG1vdW50IGFuZCBzaW5jZSBjRE0gZmlyZXMgaW4gY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMsIHdlIG1heVxuLy8gZ2V0IGEgbmV3IGxvY2F0aW9uIGJlZm9yZSB0aGUgPFJvdXRlcj4gaXMgbW91bnRlZC5cbl90aGlzLl9pc01vdW50ZWQ9ZmFsc2U7X3RoaXMuX3BlbmRpbmdMb2NhdGlvbj1udWxsO2lmKCFwcm9wcy5zdGF0aWNDb250ZXh0KXtfdGhpcy51bmxpc3Rlbj1wcm9wcy5oaXN0b3J5Lmxpc3RlbihmdW5jdGlvbihsb2NhdGlvbil7aWYoX3RoaXMuX2lzTW91bnRlZCl7X3RoaXMuc2V0U3RhdGUoe2xvY2F0aW9uOmxvY2F0aW9ufSk7fWVsc2V7X3RoaXMuX3BlbmRpbmdMb2NhdGlvbj1sb2NhdGlvbjt9fSk7fXJldHVybiBfdGhpczt9dmFyIF9wcm90bz1Sb3V0ZXIucHJvdG90eXBlO19wcm90by5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpe3RoaXMuX2lzTW91bnRlZD10cnVlO2lmKHRoaXMuX3BlbmRpbmdMb2NhdGlvbil7dGhpcy5zZXRTdGF0ZSh7bG9jYXRpb246dGhpcy5fcGVuZGluZ0xvY2F0aW9ufSk7fX07X3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCl7aWYodGhpcy51bmxpc3Rlbil0aGlzLnVubGlzdGVuKCk7fTtfcHJvdG8ucmVuZGVyPWZ1bmN0aW9uIHJlbmRlcigpe3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbnRleHQuUHJvdmlkZXIse2NoaWxkcmVuOnRoaXMucHJvcHMuY2hpbGRyZW58fG51bGwsdmFsdWU6e2hpc3Rvcnk6dGhpcy5wcm9wcy5oaXN0b3J5LGxvY2F0aW9uOnRoaXMuc3RhdGUubG9jYXRpb24sbWF0Y2g6Um91dGVyLmNvbXB1dGVSb290TWF0Y2godGhpcy5zdGF0ZS5sb2NhdGlvbi5wYXRobmFtZSksc3RhdGljQ29udGV4dDp0aGlzLnByb3BzLnN0YXRpY0NvbnRleHR9fSk7fTtyZXR1cm4gUm91dGVyO30oUmVhY3QuQ29tcG9uZW50KTt7Um91dGVyLnByb3BUeXBlcz17Y2hpbGRyZW46UHJvcFR5cGVzLm5vZGUsaGlzdG9yeTpQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsc3RhdGljQ29udGV4dDpQcm9wVHlwZXMub2JqZWN0fTtSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZT1mdW5jdGlvbihwcmV2UHJvcHMpe3dhcm5pbmcocHJldlByb3BzLmhpc3Rvcnk9PT10aGlzLnByb3BzLmhpc3RvcnksXCJZb3UgY2Fubm90IGNoYW5nZSA8Um91dGVyIGhpc3Rvcnk+XCIpO307fS8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCBzdG9yZXMgbG9jYXRpb24gaW4gbWVtb3J5LlxuICovdmFyIE1lbW9yeVJvdXRlcj0vKiNfX1BVUkVfXyovZnVuY3Rpb24oX1JlYWN0JENvbXBvbmVudCl7X2luaGVyaXRzTG9vc2UoTWVtb3J5Um91dGVyLF9SZWFjdCRDb21wb25lbnQpO2Z1bmN0aW9uIE1lbW9yeVJvdXRlcigpe3ZhciBfdGhpcztmb3IodmFyIF9sZW49YXJndW1lbnRzLmxlbmd0aCxhcmdzPW5ldyBBcnJheShfbGVuKSxfa2V5PTA7X2tleTxfbGVuO19rZXkrKyl7YXJnc1tfa2V5XT1hcmd1bWVudHNbX2tleV07fV90aGlzPV9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LFt0aGlzXS5jb25jYXQoYXJncykpfHx0aGlzO190aGlzLmhpc3Rvcnk9aGlzdG9yeS5jcmVhdGVNZW1vcnlIaXN0b3J5KF90aGlzLnByb3BzKTtyZXR1cm4gX3RoaXM7fXZhciBfcHJvdG89TWVtb3J5Um91dGVyLnByb3RvdHlwZTtfcHJvdG8ucmVuZGVyPWZ1bmN0aW9uIHJlbmRlcigpe3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlcix7aGlzdG9yeTp0aGlzLmhpc3RvcnksY2hpbGRyZW46dGhpcy5wcm9wcy5jaGlsZHJlbn0pO307cmV0dXJuIE1lbW9yeVJvdXRlcjt9KFJlYWN0LkNvbXBvbmVudCk7e01lbW9yeVJvdXRlci5wcm9wVHlwZXM9e2luaXRpYWxFbnRyaWVzOlByb3BUeXBlcy5hcnJheSxpbml0aWFsSW5kZXg6UHJvcFR5cGVzLm51bWJlcixnZXRVc2VyQ29uZmlybWF0aW9uOlByb3BUeXBlcy5mdW5jLGtleUxlbmd0aDpQcm9wVHlwZXMubnVtYmVyLGNoaWxkcmVuOlByb3BUeXBlcy5ub2RlfTtNZW1vcnlSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7d2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LFwiPE1lbW9yeVJvdXRlcj4gaWdub3JlcyB0aGUgaGlzdG9yeSBwcm9wLiBUbyB1c2UgYSBjdXN0b20gaGlzdG9yeSwgXCIrXCJ1c2UgYGltcG9ydCB7IFJvdXRlciB9YCBpbnN0ZWFkIG9mIGBpbXBvcnQgeyBNZW1vcnlSb3V0ZXIgYXMgUm91dGVyIH1gLlwiKTt9O312YXIgTGlmZWN5Y2xlPS8qI19fUFVSRV9fKi9mdW5jdGlvbihfUmVhY3QkQ29tcG9uZW50KXtfaW5oZXJpdHNMb29zZShMaWZlY3ljbGUsX1JlYWN0JENvbXBvbmVudCk7ZnVuY3Rpb24gTGlmZWN5Y2xlKCl7cmV0dXJuIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO312YXIgX3Byb3RvPUxpZmVjeWNsZS5wcm90b3R5cGU7X3Byb3RvLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCl7aWYodGhpcy5wcm9wcy5vbk1vdW50KXRoaXMucHJvcHMub25Nb3VudC5jYWxsKHRoaXMsdGhpcyk7fTtfcHJvdG8uY29tcG9uZW50RGlkVXBkYXRlPWZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpe2lmKHRoaXMucHJvcHMub25VcGRhdGUpdGhpcy5wcm9wcy5vblVwZGF0ZS5jYWxsKHRoaXMsdGhpcyxwcmV2UHJvcHMpO307X3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCl7aWYodGhpcy5wcm9wcy5vblVubW91bnQpdGhpcy5wcm9wcy5vblVubW91bnQuY2FsbCh0aGlzLHRoaXMpO307X3Byb3RvLnJlbmRlcj1mdW5jdGlvbiByZW5kZXIoKXtyZXR1cm4gbnVsbDt9O3JldHVybiBMaWZlY3ljbGU7fShSZWFjdC5Db21wb25lbnQpOy8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHByb21wdGluZyB0aGUgdXNlciBiZWZvcmUgbmF2aWdhdGluZyBhd2F5IGZyb20gYSBzY3JlZW4uXG4gKi9mdW5jdGlvbiBQcm9tcHQoX3JlZil7dmFyIG1lc3NhZ2U9X3JlZi5tZXNzYWdlLF9yZWYkd2hlbj1fcmVmLndoZW4sd2hlbj1fcmVmJHdoZW49PT12b2lkIDA/dHJ1ZTpfcmVmJHdoZW47cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29udGV4dC5Db25zdW1lcixudWxsLGZ1bmN0aW9uKGNvbnRleHQpeyFjb250ZXh0P2ludmFyaWFudChmYWxzZSxcIllvdSBzaG91bGQgbm90IHVzZSA8UHJvbXB0PiBvdXRzaWRlIGEgPFJvdXRlcj5cIik6dm9pZCAwO2lmKCF3aGVufHxjb250ZXh0LnN0YXRpY0NvbnRleHQpcmV0dXJuIG51bGw7dmFyIG1ldGhvZD1jb250ZXh0Lmhpc3RvcnkuYmxvY2s7cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlmZWN5Y2xlLHtvbk1vdW50OmZ1bmN0aW9uIG9uTW91bnQoc2VsZil7c2VsZi5yZWxlYXNlPW1ldGhvZChtZXNzYWdlKTt9LG9uVXBkYXRlOmZ1bmN0aW9uIG9uVXBkYXRlKHNlbGYscHJldlByb3BzKXtpZihwcmV2UHJvcHMubWVzc2FnZSE9PW1lc3NhZ2Upe3NlbGYucmVsZWFzZSgpO3NlbGYucmVsZWFzZT1tZXRob2QobWVzc2FnZSk7fX0sb25Vbm1vdW50OmZ1bmN0aW9uIG9uVW5tb3VudChzZWxmKXtzZWxmLnJlbGVhc2UoKTt9LG1lc3NhZ2U6bWVzc2FnZX0pO30pO317dmFyIG1lc3NhZ2VUeXBlPVByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5mdW5jLFByb3BUeXBlcy5zdHJpbmddKTtQcm9tcHQucHJvcFR5cGVzPXt3aGVuOlByb3BUeXBlcy5ib29sLG1lc3NhZ2U6bWVzc2FnZVR5cGUuaXNSZXF1aXJlZH07fXZhciBjYWNoZT17fTt2YXIgY2FjaGVMaW1pdD0xMDAwMDt2YXIgY2FjaGVDb3VudD0wO2Z1bmN0aW9uIGNvbXBpbGVQYXRoKHBhdGgpe2lmKGNhY2hlW3BhdGhdKXJldHVybiBjYWNoZVtwYXRoXTt2YXIgZ2VuZXJhdG9yPXBhdGhUb1JlZ2V4cC5jb21waWxlKHBhdGgpO2lmKGNhY2hlQ291bnQ8Y2FjaGVMaW1pdCl7Y2FjaGVbcGF0aF09Z2VuZXJhdG9yO2NhY2hlQ291bnQrKzt9cmV0dXJuIGdlbmVyYXRvcjt9LyoqXG4gKiBQdWJsaWMgQVBJIGZvciBnZW5lcmF0aW5nIGEgVVJMIHBhdGhuYW1lIGZyb20gYSBwYXRoIGFuZCBwYXJhbWV0ZXJzLlxuICovZnVuY3Rpb24gZ2VuZXJhdGVQYXRoKHBhdGgscGFyYW1zKXtpZihwYXRoPT09dm9pZCAwKXtwYXRoPVwiL1wiO31pZihwYXJhbXM9PT12b2lkIDApe3BhcmFtcz17fTt9cmV0dXJuIHBhdGg9PT1cIi9cIj9wYXRoOmNvbXBpbGVQYXRoKHBhdGgpKHBhcmFtcyx7cHJldHR5OnRydWV9KTt9LyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgbmF2aWdhdGluZyBwcm9ncmFtbWF0aWNhbGx5IHdpdGggYSBjb21wb25lbnQuXG4gKi9mdW5jdGlvbiBSZWRpcmVjdChfcmVmKXt2YXIgY29tcHV0ZWRNYXRjaD1fcmVmLmNvbXB1dGVkTWF0Y2gsdG89X3JlZi50byxfcmVmJHB1c2g9X3JlZi5wdXNoLHB1c2g9X3JlZiRwdXNoPT09dm9pZCAwP2ZhbHNlOl9yZWYkcHVzaDtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LkNvbnN1bWVyLG51bGwsZnVuY3Rpb24oY29udGV4dCl7IWNvbnRleHQ/aW52YXJpYW50KGZhbHNlLFwiWW91IHNob3VsZCBub3QgdXNlIDxSZWRpcmVjdD4gb3V0c2lkZSBhIDxSb3V0ZXI+XCIpOnZvaWQgMDt2YXIgaGlzdG9yeSQxPWNvbnRleHQuaGlzdG9yeSxzdGF0aWNDb250ZXh0PWNvbnRleHQuc3RhdGljQ29udGV4dDt2YXIgbWV0aG9kPXB1c2g/aGlzdG9yeSQxLnB1c2g6aGlzdG9yeSQxLnJlcGxhY2U7dmFyIGxvY2F0aW9uPWhpc3RvcnkuY3JlYXRlTG9jYXRpb24oY29tcHV0ZWRNYXRjaD90eXBlb2YgdG89PT1cInN0cmluZ1wiP2dlbmVyYXRlUGF0aCh0byxjb21wdXRlZE1hdGNoLnBhcmFtcyk6X2V4dGVuZHMoe30sdG8se3BhdGhuYW1lOmdlbmVyYXRlUGF0aCh0by5wYXRobmFtZSxjb21wdXRlZE1hdGNoLnBhcmFtcyl9KTp0byk7Ly8gV2hlbiByZW5kZXJpbmcgaW4gYSBzdGF0aWMgY29udGV4dCxcbi8vIHNldCB0aGUgbmV3IGxvY2F0aW9uIGltbWVkaWF0ZWx5LlxuaWYoc3RhdGljQ29udGV4dCl7bWV0aG9kKGxvY2F0aW9uKTtyZXR1cm4gbnVsbDt9cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlmZWN5Y2xlLHtvbk1vdW50OmZ1bmN0aW9uIG9uTW91bnQoKXttZXRob2QobG9jYXRpb24pO30sb25VcGRhdGU6ZnVuY3Rpb24gb25VcGRhdGUoc2VsZixwcmV2UHJvcHMpe3ZhciBwcmV2TG9jYXRpb249aGlzdG9yeS5jcmVhdGVMb2NhdGlvbihwcmV2UHJvcHMudG8pO2lmKCFoaXN0b3J5LmxvY2F0aW9uc0FyZUVxdWFsKHByZXZMb2NhdGlvbixfZXh0ZW5kcyh7fSxsb2NhdGlvbix7a2V5OnByZXZMb2NhdGlvbi5rZXl9KSkpe21ldGhvZChsb2NhdGlvbik7fX0sdG86dG99KTt9KTt9e1JlZGlyZWN0LnByb3BUeXBlcz17cHVzaDpQcm9wVHlwZXMuYm9vbCxmcm9tOlByb3BUeXBlcy5zdHJpbmcsdG86UHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZyxQcm9wVHlwZXMub2JqZWN0XSkuaXNSZXF1aXJlZH07fXZhciBjYWNoZSQxPXt9O3ZhciBjYWNoZUxpbWl0JDE9MTAwMDA7dmFyIGNhY2hlQ291bnQkMT0wO2Z1bmN0aW9uIGNvbXBpbGVQYXRoJDEocGF0aCxvcHRpb25zKXt2YXIgY2FjaGVLZXk9XCJcIitvcHRpb25zLmVuZCtvcHRpb25zLnN0cmljdCtvcHRpb25zLnNlbnNpdGl2ZTt2YXIgcGF0aENhY2hlPWNhY2hlJDFbY2FjaGVLZXldfHwoY2FjaGUkMVtjYWNoZUtleV09e30pO2lmKHBhdGhDYWNoZVtwYXRoXSlyZXR1cm4gcGF0aENhY2hlW3BhdGhdO3ZhciBrZXlzPVtdO3ZhciByZWdleHA9cGF0aFRvUmVnZXhwKHBhdGgsa2V5cyxvcHRpb25zKTt2YXIgcmVzdWx0PXtyZWdleHA6cmVnZXhwLGtleXM6a2V5c307aWYoY2FjaGVDb3VudCQxPGNhY2hlTGltaXQkMSl7cGF0aENhY2hlW3BhdGhdPXJlc3VsdDtjYWNoZUNvdW50JDErKzt9cmV0dXJuIHJlc3VsdDt9LyoqXG4gKiBQdWJsaWMgQVBJIGZvciBtYXRjaGluZyBhIFVSTCBwYXRobmFtZSB0byBhIHBhdGguXG4gKi9mdW5jdGlvbiBtYXRjaFBhdGgocGF0aG5hbWUsb3B0aW9ucyl7aWYob3B0aW9ucz09PXZvaWQgMCl7b3B0aW9ucz17fTt9aWYodHlwZW9mIG9wdGlvbnM9PT1cInN0cmluZ1wifHxBcnJheS5pc0FycmF5KG9wdGlvbnMpKXtvcHRpb25zPXtwYXRoOm9wdGlvbnN9O312YXIgX29wdGlvbnM9b3B0aW9ucyxwYXRoPV9vcHRpb25zLnBhdGgsX29wdGlvbnMkZXhhY3Q9X29wdGlvbnMuZXhhY3QsZXhhY3Q9X29wdGlvbnMkZXhhY3Q9PT12b2lkIDA/ZmFsc2U6X29wdGlvbnMkZXhhY3QsX29wdGlvbnMkc3RyaWN0PV9vcHRpb25zLnN0cmljdCxzdHJpY3Q9X29wdGlvbnMkc3RyaWN0PT09dm9pZCAwP2ZhbHNlOl9vcHRpb25zJHN0cmljdCxfb3B0aW9ucyRzZW5zaXRpdmU9X29wdGlvbnMuc2Vuc2l0aXZlLHNlbnNpdGl2ZT1fb3B0aW9ucyRzZW5zaXRpdmU9PT12b2lkIDA/ZmFsc2U6X29wdGlvbnMkc2Vuc2l0aXZlO3ZhciBwYXRocz1bXS5jb25jYXQocGF0aCk7cmV0dXJuIHBhdGhzLnJlZHVjZShmdW5jdGlvbihtYXRjaGVkLHBhdGgpe2lmKCFwYXRoJiZwYXRoIT09XCJcIilyZXR1cm4gbnVsbDtpZihtYXRjaGVkKXJldHVybiBtYXRjaGVkO3ZhciBfY29tcGlsZVBhdGg9Y29tcGlsZVBhdGgkMShwYXRoLHtlbmQ6ZXhhY3Qsc3RyaWN0OnN0cmljdCxzZW5zaXRpdmU6c2Vuc2l0aXZlfSkscmVnZXhwPV9jb21waWxlUGF0aC5yZWdleHAsa2V5cz1fY29tcGlsZVBhdGgua2V5czt2YXIgbWF0Y2g9cmVnZXhwLmV4ZWMocGF0aG5hbWUpO2lmKCFtYXRjaClyZXR1cm4gbnVsbDt2YXIgdXJsPW1hdGNoWzBdLHZhbHVlcz1tYXRjaC5zbGljZSgxKTt2YXIgaXNFeGFjdD1wYXRobmFtZT09PXVybDtpZihleGFjdCYmIWlzRXhhY3QpcmV0dXJuIG51bGw7cmV0dXJue3BhdGg6cGF0aCwvLyB0aGUgcGF0aCB1c2VkIHRvIG1hdGNoXG51cmw6cGF0aD09PVwiL1wiJiZ1cmw9PT1cIlwiP1wiL1wiOnVybCwvLyB0aGUgbWF0Y2hlZCBwb3J0aW9uIG9mIHRoZSBVUkxcbmlzRXhhY3Q6aXNFeGFjdCwvLyB3aGV0aGVyIG9yIG5vdCB3ZSBtYXRjaGVkIGV4YWN0bHlcbnBhcmFtczprZXlzLnJlZHVjZShmdW5jdGlvbihtZW1vLGtleSxpbmRleCl7bWVtb1trZXkubmFtZV09dmFsdWVzW2luZGV4XTtyZXR1cm4gbWVtbzt9LHt9KX07fSxudWxsKTt9ZnVuY3Rpb24gaXNFbXB0eUNoaWxkcmVuKGNoaWxkcmVuKXtyZXR1cm4gUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pPT09MDt9ZnVuY3Rpb24gZXZhbENoaWxkcmVuRGV2KGNoaWxkcmVuLHByb3BzLHBhdGgpe3ZhciB2YWx1ZT1jaGlsZHJlbihwcm9wcyk7d2FybmluZyh2YWx1ZSE9PXVuZGVmaW5lZCxcIllvdSByZXR1cm5lZCBgdW5kZWZpbmVkYCBmcm9tIHRoZSBgY2hpbGRyZW5gIGZ1bmN0aW9uIG9mIFwiKyhcIjxSb3V0ZVwiKyhwYXRoP1wiIHBhdGg9XFxcIlwiK3BhdGgrXCJcXFwiXCI6XCJcIikrXCI+LCBidXQgeW91IFwiKStcInNob3VsZCBoYXZlIHJldHVybmVkIGEgUmVhY3QgZWxlbWVudCBvciBgbnVsbGBcIik7cmV0dXJuIHZhbHVlfHxudWxsO30vKipcbiAqIFRoZSBwdWJsaWMgQVBJIGZvciBtYXRjaGluZyBhIHNpbmdsZSBwYXRoIGFuZCByZW5kZXJpbmcuXG4gKi92YXIgUm91dGU9LyojX19QVVJFX18qL2Z1bmN0aW9uKF9SZWFjdCRDb21wb25lbnQpe19pbmhlcml0c0xvb3NlKFJvdXRlLF9SZWFjdCRDb21wb25lbnQpO2Z1bmN0aW9uIFJvdXRlKCl7cmV0dXJuIF9SZWFjdCRDb21wb25lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO312YXIgX3Byb3RvPVJvdXRlLnByb3RvdHlwZTtfcHJvdG8ucmVuZGVyPWZ1bmN0aW9uIHJlbmRlcigpe3ZhciBfdGhpcz10aGlzO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbnRleHQuQ29uc3VtZXIsbnVsbCxmdW5jdGlvbihjb250ZXh0JDEpeyFjb250ZXh0JDE/aW52YXJpYW50KGZhbHNlLFwiWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZT4gb3V0c2lkZSBhIDxSb3V0ZXI+XCIpOnZvaWQgMDt2YXIgbG9jYXRpb249X3RoaXMucHJvcHMubG9jYXRpb258fGNvbnRleHQkMS5sb2NhdGlvbjt2YXIgbWF0Y2g9X3RoaXMucHJvcHMuY29tcHV0ZWRNYXRjaD9fdGhpcy5wcm9wcy5jb21wdXRlZE1hdGNoLy8gPFN3aXRjaD4gYWxyZWFkeSBjb21wdXRlZCB0aGUgbWF0Y2ggZm9yIHVzXG46X3RoaXMucHJvcHMucGF0aD9tYXRjaFBhdGgobG9jYXRpb24ucGF0aG5hbWUsX3RoaXMucHJvcHMpOmNvbnRleHQkMS5tYXRjaDt2YXIgcHJvcHM9X2V4dGVuZHMoe30sY29udGV4dCQxLHtsb2NhdGlvbjpsb2NhdGlvbixtYXRjaDptYXRjaH0pO3ZhciBfdGhpcyRwcm9wcz1fdGhpcy5wcm9wcyxjaGlsZHJlbj1fdGhpcyRwcm9wcy5jaGlsZHJlbixjb21wb25lbnQ9X3RoaXMkcHJvcHMuY29tcG9uZW50LHJlbmRlcj1fdGhpcyRwcm9wcy5yZW5kZXI7Ly8gUHJlYWN0IHVzZXMgYW4gZW1wdHkgYXJyYXkgYXMgY2hpbGRyZW4gYnlcbi8vIGRlZmF1bHQsIHNvIHVzZSBudWxsIGlmIHRoYXQncyB0aGUgY2FzZS5cbmlmKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pJiZjaGlsZHJlbi5sZW5ndGg9PT0wKXtjaGlsZHJlbj1udWxsO31yZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LlByb3ZpZGVyLHt2YWx1ZTpwcm9wc30scHJvcHMubWF0Y2g/Y2hpbGRyZW4/dHlwZW9mIGNoaWxkcmVuPT09XCJmdW5jdGlvblwiP2V2YWxDaGlsZHJlbkRldihjaGlsZHJlbixwcm9wcyxfdGhpcy5wcm9wcy5wYXRoKTpjaGlsZHJlbjpjb21wb25lbnQ/UmVhY3QuY3JlYXRlRWxlbWVudChjb21wb25lbnQscHJvcHMpOnJlbmRlcj9yZW5kZXIocHJvcHMpOm51bGw6dHlwZW9mIGNoaWxkcmVuPT09XCJmdW5jdGlvblwiP2V2YWxDaGlsZHJlbkRldihjaGlsZHJlbixwcm9wcyxfdGhpcy5wcm9wcy5wYXRoKTpudWxsKTt9KTt9O3JldHVybiBSb3V0ZTt9KFJlYWN0LkNvbXBvbmVudCk7e1JvdXRlLnByb3BUeXBlcz17Y2hpbGRyZW46UHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMsUHJvcFR5cGVzLm5vZGVdKSxjb21wb25lbnQ6ZnVuY3Rpb24gY29tcG9uZW50KHByb3BzLHByb3BOYW1lKXtpZihwcm9wc1twcm9wTmFtZV0mJiFyZWFjdElzLmlzVmFsaWRFbGVtZW50VHlwZShwcm9wc1twcm9wTmFtZV0pKXtyZXR1cm4gbmV3IEVycm9yKFwiSW52YWxpZCBwcm9wICdjb21wb25lbnQnIHN1cHBsaWVkIHRvICdSb3V0ZSc6IHRoZSBwcm9wIGlzIG5vdCBhIHZhbGlkIFJlYWN0IGNvbXBvbmVudFwiKTt9fSxleGFjdDpQcm9wVHlwZXMuYm9vbCxsb2NhdGlvbjpQcm9wVHlwZXMub2JqZWN0LHBhdGg6UHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZyxQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKV0pLHJlbmRlcjpQcm9wVHlwZXMuZnVuYyxzZW5zaXRpdmU6UHJvcFR5cGVzLmJvb2wsc3RyaWN0OlByb3BUeXBlcy5ib29sfTtSb3V0ZS5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt3YXJuaW5nKCEodGhpcy5wcm9wcy5jaGlsZHJlbiYmIWlzRW1wdHlDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuKSYmdGhpcy5wcm9wcy5jb21wb25lbnQpLFwiWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSBjb21wb25lbnQ+IGFuZCA8Um91dGUgY2hpbGRyZW4+IGluIHRoZSBzYW1lIHJvdXRlOyA8Um91dGUgY29tcG9uZW50PiB3aWxsIGJlIGlnbm9yZWRcIik7d2FybmluZyghKHRoaXMucHJvcHMuY2hpbGRyZW4mJiFpc0VtcHR5Q2hpbGRyZW4odGhpcy5wcm9wcy5jaGlsZHJlbikmJnRoaXMucHJvcHMucmVuZGVyKSxcIllvdSBzaG91bGQgbm90IHVzZSA8Um91dGUgcmVuZGVyPiBhbmQgPFJvdXRlIGNoaWxkcmVuPiBpbiB0aGUgc2FtZSByb3V0ZTsgPFJvdXRlIHJlbmRlcj4gd2lsbCBiZSBpZ25vcmVkXCIpO3dhcm5pbmcoISh0aGlzLnByb3BzLmNvbXBvbmVudCYmdGhpcy5wcm9wcy5yZW5kZXIpLFwiWW91IHNob3VsZCBub3QgdXNlIDxSb3V0ZSBjb21wb25lbnQ+IGFuZCA8Um91dGUgcmVuZGVyPiBpbiB0aGUgc2FtZSByb3V0ZTsgPFJvdXRlIHJlbmRlcj4gd2lsbCBiZSBpZ25vcmVkXCIpO307Um91dGUucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZT1mdW5jdGlvbihwcmV2UHJvcHMpe3dhcm5pbmcoISh0aGlzLnByb3BzLmxvY2F0aW9uJiYhcHJldlByb3BzLmxvY2F0aW9uKSwnPFJvdXRlPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIHVuY29udHJvbGxlZCB0byBjb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IGluaXRpYWxseSB1c2VkIG5vIFwibG9jYXRpb25cIiBwcm9wIGFuZCB0aGVuIHByb3ZpZGVkIG9uZSBvbiBhIHN1YnNlcXVlbnQgcmVuZGVyLicpO3dhcm5pbmcoISghdGhpcy5wcm9wcy5sb2NhdGlvbiYmcHJldlByb3BzLmxvY2F0aW9uKSwnPFJvdXRlPiBlbGVtZW50cyBzaG91bGQgbm90IGNoYW5nZSBmcm9tIGNvbnRyb2xsZWQgdG8gdW5jb250cm9sbGVkIChvciB2aWNlIHZlcnNhKS4gWW91IHByb3ZpZGVkIGEgXCJsb2NhdGlvblwiIHByb3AgaW5pdGlhbGx5IGJ1dCBvbWl0dGVkIGl0IG9uIGEgc3Vic2VxdWVudCByZW5kZXIuJyk7fTt9ZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHBhdGgpe3JldHVybiBwYXRoLmNoYXJBdCgwKT09PVwiL1wiP3BhdGg6XCIvXCIrcGF0aDt9ZnVuY3Rpb24gYWRkQmFzZW5hbWUoYmFzZW5hbWUsbG9jYXRpb24pe2lmKCFiYXNlbmFtZSlyZXR1cm4gbG9jYXRpb247cmV0dXJuIF9leHRlbmRzKHt9LGxvY2F0aW9uLHtwYXRobmFtZTphZGRMZWFkaW5nU2xhc2goYmFzZW5hbWUpK2xvY2F0aW9uLnBhdGhuYW1lfSk7fWZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUoYmFzZW5hbWUsbG9jYXRpb24pe2lmKCFiYXNlbmFtZSlyZXR1cm4gbG9jYXRpb247dmFyIGJhc2U9YWRkTGVhZGluZ1NsYXNoKGJhc2VuYW1lKTtpZihsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKGJhc2UpIT09MClyZXR1cm4gbG9jYXRpb247cmV0dXJuIF9leHRlbmRzKHt9LGxvY2F0aW9uLHtwYXRobmFtZTpsb2NhdGlvbi5wYXRobmFtZS5zdWJzdHIoYmFzZS5sZW5ndGgpfSk7fWZ1bmN0aW9uIGNyZWF0ZVVSTChsb2NhdGlvbil7cmV0dXJuIHR5cGVvZiBsb2NhdGlvbj09PVwic3RyaW5nXCI/bG9jYXRpb246aGlzdG9yeS5jcmVhdGVQYXRoKGxvY2F0aW9uKTt9ZnVuY3Rpb24gc3RhdGljSGFuZGxlcihtZXRob2ROYW1lKXtyZXR1cm4gZnVuY3Rpb24oKXtpbnZhcmlhbnQoZmFsc2UsXCJZb3UgY2Fubm90ICVzIHdpdGggPFN0YXRpY1JvdXRlcj5cIixtZXRob2ROYW1lKTt9O31mdW5jdGlvbiBub29wKCl7fS8qKlxuICogVGhlIHB1YmxpYyB0b3AtbGV2ZWwgQVBJIGZvciBhIFwic3RhdGljXCIgPFJvdXRlcj4sIHNvLWNhbGxlZCBiZWNhdXNlIGl0XG4gKiBjYW4ndCBhY3R1YWxseSBjaGFuZ2UgdGhlIGN1cnJlbnQgbG9jYXRpb24uIEluc3RlYWQsIGl0IGp1c3QgcmVjb3Jkc1xuICogbG9jYXRpb24gY2hhbmdlcyBpbiBhIGNvbnRleHQgb2JqZWN0LiBVc2VmdWwgbWFpbmx5IGluIHRlc3RpbmcgYW5kXG4gKiBzZXJ2ZXItcmVuZGVyaW5nIHNjZW5hcmlvcy5cbiAqL3ZhciBTdGF0aWNSb3V0ZXI9LyojX19QVVJFX18qL2Z1bmN0aW9uKF9SZWFjdCRDb21wb25lbnQpe19pbmhlcml0c0xvb3NlKFN0YXRpY1JvdXRlcixfUmVhY3QkQ29tcG9uZW50KTtmdW5jdGlvbiBTdGF0aWNSb3V0ZXIoKXt2YXIgX3RoaXM7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1uZXcgQXJyYXkoX2xlbiksX2tleT0wO19rZXk8X2xlbjtfa2V5Kyspe2FyZ3NbX2tleV09YXJndW1lbnRzW19rZXldO31fdGhpcz1fUmVhY3QkQ29tcG9uZW50LmNhbGwuYXBwbHkoX1JlYWN0JENvbXBvbmVudCxbdGhpc10uY29uY2F0KGFyZ3MpKXx8dGhpcztfdGhpcy5oYW5kbGVQdXNoPWZ1bmN0aW9uKGxvY2F0aW9uKXtyZXR1cm4gX3RoaXMubmF2aWdhdGVUbyhsb2NhdGlvbixcIlBVU0hcIik7fTtfdGhpcy5oYW5kbGVSZXBsYWNlPWZ1bmN0aW9uKGxvY2F0aW9uKXtyZXR1cm4gX3RoaXMubmF2aWdhdGVUbyhsb2NhdGlvbixcIlJFUExBQ0VcIik7fTtfdGhpcy5oYW5kbGVMaXN0ZW49ZnVuY3Rpb24oKXtyZXR1cm4gbm9vcDt9O190aGlzLmhhbmRsZUJsb2NrPWZ1bmN0aW9uKCl7cmV0dXJuIG5vb3A7fTtyZXR1cm4gX3RoaXM7fXZhciBfcHJvdG89U3RhdGljUm91dGVyLnByb3RvdHlwZTtfcHJvdG8ubmF2aWdhdGVUbz1mdW5jdGlvbiBuYXZpZ2F0ZVRvKGxvY2F0aW9uLGFjdGlvbil7dmFyIF90aGlzJHByb3BzPXRoaXMucHJvcHMsX3RoaXMkcHJvcHMkYmFzZW5hbWU9X3RoaXMkcHJvcHMuYmFzZW5hbWUsYmFzZW5hbWU9X3RoaXMkcHJvcHMkYmFzZW5hbWU9PT12b2lkIDA/XCJcIjpfdGhpcyRwcm9wcyRiYXNlbmFtZSxfdGhpcyRwcm9wcyRjb250ZXh0PV90aGlzJHByb3BzLmNvbnRleHQsY29udGV4dD1fdGhpcyRwcm9wcyRjb250ZXh0PT09dm9pZCAwP3t9Ol90aGlzJHByb3BzJGNvbnRleHQ7Y29udGV4dC5hY3Rpb249YWN0aW9uO2NvbnRleHQubG9jYXRpb249YWRkQmFzZW5hbWUoYmFzZW5hbWUsaGlzdG9yeS5jcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpO2NvbnRleHQudXJsPWNyZWF0ZVVSTChjb250ZXh0LmxvY2F0aW9uKTt9O19wcm90by5yZW5kZXI9ZnVuY3Rpb24gcmVuZGVyKCl7dmFyIF90aGlzJHByb3BzMj10aGlzLnByb3BzLF90aGlzJHByb3BzMiRiYXNlbmFtZT1fdGhpcyRwcm9wczIuYmFzZW5hbWUsYmFzZW5hbWU9X3RoaXMkcHJvcHMyJGJhc2VuYW1lPT09dm9pZCAwP1wiXCI6X3RoaXMkcHJvcHMyJGJhc2VuYW1lLF90aGlzJHByb3BzMiRjb250ZXh0PV90aGlzJHByb3BzMi5jb250ZXh0LGNvbnRleHQ9X3RoaXMkcHJvcHMyJGNvbnRleHQ9PT12b2lkIDA/e306X3RoaXMkcHJvcHMyJGNvbnRleHQsX3RoaXMkcHJvcHMyJGxvY2F0aW9uPV90aGlzJHByb3BzMi5sb2NhdGlvbixsb2NhdGlvbj1fdGhpcyRwcm9wczIkbG9jYXRpb249PT12b2lkIDA/XCIvXCI6X3RoaXMkcHJvcHMyJGxvY2F0aW9uLHJlc3Q9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3RoaXMkcHJvcHMyLFtcImJhc2VuYW1lXCIsXCJjb250ZXh0XCIsXCJsb2NhdGlvblwiXSk7dmFyIGhpc3RvcnkkMT17Y3JlYXRlSHJlZjpmdW5jdGlvbiBjcmVhdGVIcmVmKHBhdGgpe3JldHVybiBhZGRMZWFkaW5nU2xhc2goYmFzZW5hbWUrY3JlYXRlVVJMKHBhdGgpKTt9LGFjdGlvbjpcIlBPUFwiLGxvY2F0aW9uOnN0cmlwQmFzZW5hbWUoYmFzZW5hbWUsaGlzdG9yeS5jcmVhdGVMb2NhdGlvbihsb2NhdGlvbikpLHB1c2g6dGhpcy5oYW5kbGVQdXNoLHJlcGxhY2U6dGhpcy5oYW5kbGVSZXBsYWNlLGdvOnN0YXRpY0hhbmRsZXIoXCJnb1wiKSxnb0JhY2s6c3RhdGljSGFuZGxlcihcImdvQmFja1wiKSxnb0ZvcndhcmQ6c3RhdGljSGFuZGxlcihcImdvRm9yd2FyZFwiKSxsaXN0ZW46dGhpcy5oYW5kbGVMaXN0ZW4sYmxvY2s6dGhpcy5oYW5kbGVCbG9ja307cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGVyLF9leHRlbmRzKHt9LHJlc3Qse2hpc3Rvcnk6aGlzdG9yeSQxLHN0YXRpY0NvbnRleHQ6Y29udGV4dH0pKTt9O3JldHVybiBTdGF0aWNSb3V0ZXI7fShSZWFjdC5Db21wb25lbnQpO3tTdGF0aWNSb3V0ZXIucHJvcFR5cGVzPXtiYXNlbmFtZTpQcm9wVHlwZXMuc3RyaW5nLGNvbnRleHQ6UHJvcFR5cGVzLm9iamVjdCxsb2NhdGlvbjpQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLFByb3BUeXBlcy5vYmplY3RdKX07U3RhdGljUm91dGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbigpe3dhcm5pbmcoIXRoaXMucHJvcHMuaGlzdG9yeSxcIjxTdGF0aWNSb3V0ZXI+IGlnbm9yZXMgdGhlIGhpc3RvcnkgcHJvcC4gVG8gdXNlIGEgY3VzdG9tIGhpc3RvcnksIFwiK1widXNlIGBpbXBvcnQgeyBSb3V0ZXIgfWAgaW5zdGVhZCBvZiBgaW1wb3J0IHsgU3RhdGljUm91dGVyIGFzIFJvdXRlciB9YC5cIik7fTt9LyoqXG4gKiBUaGUgcHVibGljIEFQSSBmb3IgcmVuZGVyaW5nIHRoZSBmaXJzdCA8Um91dGU+IHRoYXQgbWF0Y2hlcy5cbiAqL3ZhciBTd2l0Y2g9LyojX19QVVJFX18qL2Z1bmN0aW9uKF9SZWFjdCRDb21wb25lbnQpe19pbmhlcml0c0xvb3NlKFN3aXRjaCxfUmVhY3QkQ29tcG9uZW50KTtmdW5jdGlvbiBTd2l0Y2goKXtyZXR1cm4gX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7fXZhciBfcHJvdG89U3dpdGNoLnByb3RvdHlwZTtfcHJvdG8ucmVuZGVyPWZ1bmN0aW9uIHJlbmRlcigpe3ZhciBfdGhpcz10aGlzO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbnRleHQuQ29uc3VtZXIsbnVsbCxmdW5jdGlvbihjb250ZXh0KXshY29udGV4dD9pbnZhcmlhbnQoZmFsc2UsXCJZb3Ugc2hvdWxkIG5vdCB1c2UgPFN3aXRjaD4gb3V0c2lkZSBhIDxSb3V0ZXI+XCIpOnZvaWQgMDt2YXIgbG9jYXRpb249X3RoaXMucHJvcHMubG9jYXRpb258fGNvbnRleHQubG9jYXRpb247dmFyIGVsZW1lbnQsbWF0Y2g7Ly8gV2UgdXNlIFJlYWN0LkNoaWxkcmVuLmZvckVhY2ggaW5zdGVhZCBvZiBSZWFjdC5DaGlsZHJlbi50b0FycmF5KCkuZmluZCgpXG4vLyBoZXJlIGJlY2F1c2UgdG9BcnJheSBhZGRzIGtleXMgdG8gYWxsIGNoaWxkIGVsZW1lbnRzIGFuZCB3ZSBkbyBub3Qgd2FudFxuLy8gdG8gdHJpZ2dlciBhbiB1bm1vdW50L3JlbW91bnQgZm9yIHR3byA8Um91dGU+cyB0aGF0IHJlbmRlciB0aGUgc2FtZVxuLy8gY29tcG9uZW50IGF0IGRpZmZlcmVudCBVUkxzLlxuUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChfdGhpcy5wcm9wcy5jaGlsZHJlbixmdW5jdGlvbihjaGlsZCl7aWYobWF0Y2g9PW51bGwmJlJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSl7ZWxlbWVudD1jaGlsZDt2YXIgcGF0aD1jaGlsZC5wcm9wcy5wYXRofHxjaGlsZC5wcm9wcy5mcm9tO21hdGNoPXBhdGg/bWF0Y2hQYXRoKGxvY2F0aW9uLnBhdGhuYW1lLF9leHRlbmRzKHt9LGNoaWxkLnByb3BzLHtwYXRoOnBhdGh9KSk6Y29udGV4dC5tYXRjaDt9fSk7cmV0dXJuIG1hdGNoP1JlYWN0LmNsb25lRWxlbWVudChlbGVtZW50LHtsb2NhdGlvbjpsb2NhdGlvbixjb21wdXRlZE1hdGNoOm1hdGNofSk6bnVsbDt9KTt9O3JldHVybiBTd2l0Y2g7fShSZWFjdC5Db21wb25lbnQpO3tTd2l0Y2gucHJvcFR5cGVzPXtjaGlsZHJlbjpQcm9wVHlwZXMubm9kZSxsb2NhdGlvbjpQcm9wVHlwZXMub2JqZWN0fTtTd2l0Y2gucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZT1mdW5jdGlvbihwcmV2UHJvcHMpe3dhcm5pbmcoISh0aGlzLnByb3BzLmxvY2F0aW9uJiYhcHJldlByb3BzLmxvY2F0aW9uKSwnPFN3aXRjaD4gZWxlbWVudHMgc2hvdWxkIG5vdCBjaGFuZ2UgZnJvbSB1bmNvbnRyb2xsZWQgdG8gY29udHJvbGxlZCAob3IgdmljZSB2ZXJzYSkuIFlvdSBpbml0aWFsbHkgdXNlZCBubyBcImxvY2F0aW9uXCIgcHJvcCBhbmQgdGhlbiBwcm92aWRlZCBvbmUgb24gYSBzdWJzZXF1ZW50IHJlbmRlci4nKTt3YXJuaW5nKCEoIXRoaXMucHJvcHMubG9jYXRpb24mJnByZXZQcm9wcy5sb2NhdGlvbiksJzxTd2l0Y2g+IGVsZW1lbnRzIHNob3VsZCBub3QgY2hhbmdlIGZyb20gY29udHJvbGxlZCB0byB1bmNvbnRyb2xsZWQgKG9yIHZpY2UgdmVyc2EpLiBZb3UgcHJvdmlkZWQgYSBcImxvY2F0aW9uXCIgcHJvcCBpbml0aWFsbHkgYnV0IG9taXR0ZWQgaXQgb24gYSBzdWJzZXF1ZW50IHJlbmRlci4nKTt9O30vKipcbiAqIEEgcHVibGljIGhpZ2hlci1vcmRlciBjb21wb25lbnQgdG8gYWNjZXNzIHRoZSBpbXBlcmF0aXZlIEFQSVxuICovZnVuY3Rpb24gd2l0aFJvdXRlcihDb21wb25lbnQpe3ZhciBkaXNwbGF5TmFtZT1cIndpdGhSb3V0ZXIoXCIrKENvbXBvbmVudC5kaXNwbGF5TmFtZXx8Q29tcG9uZW50Lm5hbWUpK1wiKVwiO3ZhciBDPWZ1bmN0aW9uIEMocHJvcHMpe3ZhciB3cmFwcGVkQ29tcG9uZW50UmVmPXByb3BzLndyYXBwZWRDb21wb25lbnRSZWYscmVtYWluaW5nUHJvcHM9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UocHJvcHMsW1wid3JhcHBlZENvbXBvbmVudFJlZlwiXSk7cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoY29udGV4dC5Db25zdW1lcixudWxsLGZ1bmN0aW9uKGNvbnRleHQpeyFjb250ZXh0P2ludmFyaWFudChmYWxzZSxcIllvdSBzaG91bGQgbm90IHVzZSA8XCIrZGlzcGxheU5hbWUrXCIgLz4gb3V0c2lkZSBhIDxSb3V0ZXI+XCIpOnZvaWQgMDtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsX2V4dGVuZHMoe30scmVtYWluaW5nUHJvcHMsY29udGV4dCx7cmVmOndyYXBwZWRDb21wb25lbnRSZWZ9KSk7fSk7fTtDLmRpc3BsYXlOYW1lPWRpc3BsYXlOYW1lO0MuV3JhcHBlZENvbXBvbmVudD1Db21wb25lbnQ7e0MucHJvcFR5cGVzPXt3cmFwcGVkQ29tcG9uZW50UmVmOlByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsUHJvcFR5cGVzLmZ1bmMsUHJvcFR5cGVzLm9iamVjdF0pfTt9cmV0dXJuIGhvaXN0U3RhdGljcyhDLENvbXBvbmVudCk7fXZhciB1c2VDb250ZXh0PVJlYWN0LnVzZUNvbnRleHQ7ZnVuY3Rpb24gdXNlSGlzdG9yeSgpe3shKHR5cGVvZiB1c2VDb250ZXh0PT09XCJmdW5jdGlvblwiKT9pbnZhcmlhbnQoZmFsc2UsXCJZb3UgbXVzdCB1c2UgUmVhY3QgPj0gMTYuOCBpbiBvcmRlciB0byB1c2UgdXNlSGlzdG9yeSgpXCIpOnZvaWQgMDt9cmV0dXJuIHVzZUNvbnRleHQoY29udGV4dCkuaGlzdG9yeTt9ZnVuY3Rpb24gdXNlTG9jYXRpb24oKXt7ISh0eXBlb2YgdXNlQ29udGV4dD09PVwiZnVuY3Rpb25cIik/aW52YXJpYW50KGZhbHNlLFwiWW91IG11c3QgdXNlIFJlYWN0ID49IDE2LjggaW4gb3JkZXIgdG8gdXNlIHVzZUxvY2F0aW9uKClcIik6dm9pZCAwO31yZXR1cm4gdXNlQ29udGV4dChjb250ZXh0KS5sb2NhdGlvbjt9ZnVuY3Rpb24gdXNlUGFyYW1zKCl7eyEodHlwZW9mIHVzZUNvbnRleHQ9PT1cImZ1bmN0aW9uXCIpP2ludmFyaWFudChmYWxzZSxcIllvdSBtdXN0IHVzZSBSZWFjdCA+PSAxNi44IGluIG9yZGVyIHRvIHVzZSB1c2VQYXJhbXMoKVwiKTp2b2lkIDA7fXZhciBtYXRjaD11c2VDb250ZXh0KGNvbnRleHQpLm1hdGNoO3JldHVybiBtYXRjaD9tYXRjaC5wYXJhbXM6e307fWZ1bmN0aW9uIHVzZVJvdXRlTWF0Y2gocGF0aCl7eyEodHlwZW9mIHVzZUNvbnRleHQ9PT1cImZ1bmN0aW9uXCIpP2ludmFyaWFudChmYWxzZSxcIllvdSBtdXN0IHVzZSBSZWFjdCA+PSAxNi44IGluIG9yZGVyIHRvIHVzZSB1c2VSb3V0ZU1hdGNoKClcIik6dm9pZCAwO31yZXR1cm4gcGF0aD9tYXRjaFBhdGgodXNlTG9jYXRpb24oKS5wYXRobmFtZSxwYXRoKTp1c2VDb250ZXh0KGNvbnRleHQpLm1hdGNoO317aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe3ZhciBnbG9iYWw9d2luZG93O3ZhciBrZXk9XCJfX3JlYWN0X3JvdXRlcl9idWlsZF9fXCI7dmFyIGJ1aWxkTmFtZXM9e2NqczpcIkNvbW1vbkpTXCIsZXNtOlwiRVMgbW9kdWxlc1wiLHVtZDpcIlVNRFwifTtpZihnbG9iYWxba2V5XSYmZ2xvYmFsW2tleV0hPT1cImNqc1wiKXt2YXIgaW5pdGlhbEJ1aWxkTmFtZT1idWlsZE5hbWVzW2dsb2JhbFtrZXldXTt2YXIgc2Vjb25kYXJ5QnVpbGROYW1lPWJ1aWxkTmFtZXNbXCJjanNcIl07Ly8gVE9ETzogQWRkIGxpbmsgdG8gYXJ0aWNsZSB0aGF0IGV4cGxhaW5zIGluIGRldGFpbCBob3cgdG8gYXZvaWRcbi8vIGxvYWRpbmcgMiBkaWZmZXJlbnQgYnVpbGRzLlxudGhyb3cgbmV3IEVycm9yKFwiWW91IGFyZSBsb2FkaW5nIHRoZSBcIitzZWNvbmRhcnlCdWlsZE5hbWUrXCIgYnVpbGQgb2YgUmVhY3QgUm91dGVyIFwiKyhcIm9uIGEgcGFnZSB0aGF0IGlzIGFscmVhZHkgcnVubmluZyB0aGUgXCIraW5pdGlhbEJ1aWxkTmFtZStcIiBcIikrXCJidWlsZCwgc28gdGhpbmdzIHdvbid0IHdvcmsgcmlnaHQuXCIpO31nbG9iYWxba2V5XT1cImNqc1wiO319ZXhwb3J0cy5NZW1vcnlSb3V0ZXI9TWVtb3J5Um91dGVyO2V4cG9ydHMuUHJvbXB0PVByb21wdDtleHBvcnRzLlJlZGlyZWN0PVJlZGlyZWN0O2V4cG9ydHMuUm91dGU9Um91dGU7ZXhwb3J0cy5Sb3V0ZXI9Um91dGVyO2V4cG9ydHMuU3RhdGljUm91dGVyPVN0YXRpY1JvdXRlcjtleHBvcnRzLlN3aXRjaD1Td2l0Y2g7ZXhwb3J0cy5fX1JvdXRlckNvbnRleHQ9Y29udGV4dDtleHBvcnRzLmdlbmVyYXRlUGF0aD1nZW5lcmF0ZVBhdGg7ZXhwb3J0cy5tYXRjaFBhdGg9bWF0Y2hQYXRoO2V4cG9ydHMudXNlSGlzdG9yeT11c2VIaXN0b3J5O2V4cG9ydHMudXNlTG9jYXRpb249dXNlTG9jYXRpb247ZXhwb3J0cy51c2VQYXJhbXM9dXNlUGFyYW1zO2V4cG9ydHMudXNlUm91dGVNYXRjaD11c2VSb3V0ZU1hdGNoO2V4cG9ydHMud2l0aFJvdXRlcj13aXRoUm91dGVyOy8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0LXJvdXRlci5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyL2Nqcy9yZWFjdC1yb3V0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovaWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe3ZhciBSZWFjdElzPXJlcXVpcmUoJ3JlYWN0LWlzJyk7Ly8gQnkgZXhwbGljaXRseSB1c2luZyBgcHJvcC10eXBlc2AgeW91IGFyZSBvcHRpbmcgaW50byBuZXcgZGV2ZWxvcG1lbnQgYmVoYXZpb3IuXG4vLyBodHRwOi8vZmIubWUvcHJvcC10eXBlcy1pbi1wcm9kXG52YXIgdGhyb3dPbkRpcmVjdEFjY2Vzcz10cnVlO21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMnKShSZWFjdElzLmlzRWxlbWVudCx0aHJvd09uRGlyZWN0QWNjZXNzKTt9ZWxzZXsvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBwcm9kdWN0aW9uIGJlaGF2aW9yLlxuLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxubW9kdWxlLmV4cG9ydHM9cmVxdWlyZSgnLi9mYWN0b3J5V2l0aFRocm93aW5nU2hpbXMnKSgpO31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9+L3Byb3AtdHlwZXMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O3ZhciBSZWFjdElzPXJlcXVpcmUoJ3JlYWN0LWlzJyk7dmFyIGFzc2lnbj1yZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0PXJlcXVpcmUoJy4vbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0Jyk7dmFyIGNoZWNrUHJvcFR5cGVzPXJlcXVpcmUoJy4vY2hlY2tQcm9wVHlwZXMnKTt2YXIgaGFzPUZ1bmN0aW9uLmNhbGwuYmluZChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTt2YXIgcHJpbnRXYXJuaW5nPWZ1bmN0aW9uIHByaW50V2FybmluZygpe307aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe3ByaW50V2FybmluZz1mdW5jdGlvbiBwcmludFdhcm5pbmcodGV4dCl7dmFyIG1lc3NhZ2U9J1dhcm5pbmc6ICcrdGV4dDtpZih0eXBlb2YgY29uc29sZSE9PSd1bmRlZmluZWQnKXtjb25zb2xlLmVycm9yKG1lc3NhZ2UpO310cnl7Ly8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4vLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbnRocm93IG5ldyBFcnJvcihtZXNzYWdlKTt9Y2F0Y2goeCl7fX07fWZ1bmN0aW9uIGVtcHR5RnVuY3Rpb25UaGF0UmV0dXJuc051bGwoKXtyZXR1cm4gbnVsbDt9bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXNWYWxpZEVsZW1lbnQsdGhyb3dPbkRpcmVjdEFjY2Vzcyl7LyogZ2xvYmFsIFN5bWJvbCAqL3ZhciBJVEVSQVRPUl9TWU1CT0w9dHlwZW9mIFN5bWJvbD09PSdmdW5jdGlvbicmJlN5bWJvbC5pdGVyYXRvcjt2YXIgRkFVWF9JVEVSQVRPUl9TWU1CT0w9J0BAaXRlcmF0b3InOy8vIEJlZm9yZSBTeW1ib2wgc3BlYy5cbi8qKlxuICAgKiBSZXR1cm5zIHRoZSBpdGVyYXRvciBtZXRob2QgZnVuY3Rpb24gY29udGFpbmVkIG9uIHRoZSBpdGVyYWJsZSBvYmplY3QuXG4gICAqXG4gICAqIEJlIHN1cmUgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBpdGVyYWJsZSBhcyBjb250ZXh0OlxuICAgKlxuICAgKiAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKG15SXRlcmFibGUpO1xuICAgKiAgICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICogICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG15SXRlcmFibGUpO1xuICAgKiAgICAgICAuLi5cbiAgICogICAgIH1cbiAgICpcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBtYXliZUl0ZXJhYmxlXG4gICAqIEByZXR1cm4gez9mdW5jdGlvbn1cbiAgICovZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKXt2YXIgaXRlcmF0b3JGbj1tYXliZUl0ZXJhYmxlJiYoSVRFUkFUT1JfU1lNQk9MJiZtYXliZUl0ZXJhYmxlW0lURVJBVE9SX1NZTUJPTF18fG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTtpZih0eXBlb2YgaXRlcmF0b3JGbj09PSdmdW5jdGlvbicpe3JldHVybiBpdGVyYXRvckZuO319LyoqXG4gICAqIENvbGxlY3Rpb24gb2YgbWV0aG9kcyB0aGF0IGFsbG93IGRlY2xhcmF0aW9uIGFuZCB2YWxpZGF0aW9uIG9mIHByb3BzIHRoYXQgYXJlXG4gICAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6XG4gICAqXG4gICAqICAgdmFyIFByb3BzID0gcmVxdWlyZSgnUmVhY3RQcm9wVHlwZXMnKTtcbiAgICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICAgcHJvcFR5cGVzOiB7XG4gICAqICAgICAgIC8vIEFuIG9wdGlvbmFsIHN0cmluZyBwcm9wIG5hbWVkIFwiZGVzY3JpcHRpb25cIi5cbiAgICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZyxcbiAgICpcbiAgICogICAgICAgLy8gQSByZXF1aXJlZCBlbnVtIHByb3AgbmFtZWQgXCJjYXRlZ29yeVwiLlxuICAgKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsXG4gICAqXG4gICAqICAgICAgIC8vIEEgcHJvcCBuYW1lZCBcImRpYWxvZ1wiIHRoYXQgcmVxdWlyZXMgYW4gaW5zdGFuY2Ugb2YgRGlhbG9nLlxuICAgKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkXG4gICAqICAgICB9LFxuICAgKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHsgLi4uIH1cbiAgICogICB9KTtcbiAgICpcbiAgICogQSBtb3JlIGZvcm1hbCBzcGVjaWZpY2F0aW9uIG9mIGhvdyB0aGVzZSBtZXRob2RzIGFyZSB1c2VkOlxuICAgKlxuICAgKiAgIHR5cGUgOj0gYXJyYXl8Ym9vbHxmdW5jfG9iamVjdHxudW1iZXJ8c3RyaW5nfG9uZU9mKFsuLi5dKXxpbnN0YW5jZU9mKC4uLilcbiAgICogICBkZWNsIDo9IFJlYWN0UHJvcFR5cGVzLnt0eXBlfSguaXNSZXF1aXJlZCk/XG4gICAqXG4gICAqIEVhY2ggYW5kIGV2ZXJ5IGRlY2xhcmF0aW9uIHByb2R1Y2VzIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBzaWduYXR1cmUuIFRoaXNcbiAgICogYWxsb3dzIHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuICAgKlxuICAgKiAgdmFyIE15TGluayA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICogICAgcHJvcFR5cGVzOiB7XG4gICAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkIFwiaHJlZlwiLlxuICAgKiAgICAgIGhyZWY6IGZ1bmN0aW9uKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgKiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJlxuICAgKiAgICAgICAgICAgICEocHJvcFZhbHVlIGluc3RhbmNlb2YgVVJJKSkge1xuICAgKiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFxuICAgKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArXG4gICAqICAgICAgICAgICAgY29tcG9uZW50TmFtZVxuICAgKiAgICAgICAgICApO1xuICAgKiAgICAgICAgfVxuICAgKiAgICAgIH1cbiAgICogICAgfSxcbiAgICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59XG4gICAqICB9KTtcbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL3ZhciBBTk9OWU1PVVM9Jzw8YW5vbnltb3VzPj4nOy8vIEltcG9ydGFudCFcbi8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzYC5cbnZhciBSZWFjdFByb3BUeXBlcz17YXJyYXk6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksYm9vbDpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignYm9vbGVhbicpLGZ1bmM6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2Z1bmN0aW9uJyksbnVtYmVyOmNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSxvYmplY3Q6Y3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ29iamVjdCcpLHN0cmluZzpjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignc3RyaW5nJyksc3ltYm9sOmNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdzeW1ib2wnKSxhbnk6Y3JlYXRlQW55VHlwZUNoZWNrZXIoKSxhcnJheU9mOmNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcixlbGVtZW50OmNyZWF0ZUVsZW1lbnRUeXBlQ2hlY2tlcigpLGVsZW1lbnRUeXBlOmNyZWF0ZUVsZW1lbnRUeXBlVHlwZUNoZWNrZXIoKSxpbnN0YW5jZU9mOmNyZWF0ZUluc3RhbmNlVHlwZUNoZWNrZXIsbm9kZTpjcmVhdGVOb2RlQ2hlY2tlcigpLG9iamVjdE9mOmNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIsb25lT2Y6Y3JlYXRlRW51bVR5cGVDaGVja2VyLG9uZU9mVHlwZTpjcmVhdGVVbmlvblR5cGVDaGVja2VyLHNoYXBlOmNyZWF0ZVNoYXBlVHlwZUNoZWNrZXIsZXhhY3Q6Y3JlYXRlU3RyaWN0U2hhcGVUeXBlQ2hlY2tlcn07LyoqXG4gICAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd25cbiAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gICAqLy8qZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlKi9mdW5jdGlvbiBpcyh4LHkpey8vIFNhbWVWYWx1ZSBhbGdvcml0aG1cbmlmKHg9PT15KXsvLyBTdGVwcyAxLTUsIDctMTBcbi8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG5yZXR1cm4geCE9PTB8fDEveD09PTEveTt9ZWxzZXsvLyBTdGVwIDYuYTogTmFOID09IE5hTlxucmV0dXJuIHghPT14JiZ5IT09eTt9fS8qZXNsaW50LWVuYWJsZSBuby1zZWxmLWNvbXBhcmUqLy8qKlxuICAgKiBXZSB1c2UgYW4gRXJyb3ItbGlrZSBvYmplY3QgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgYXMgcGVvcGxlIG1heSBjYWxsXG4gICAqIFByb3BUeXBlcyBkaXJlY3RseSBhbmQgaW5zcGVjdCB0aGVpciBvdXRwdXQuIEhvd2V2ZXIsIHdlIGRvbid0IHVzZSByZWFsXG4gICAqIEVycm9ycyBhbnltb3JlLiBXZSBkb24ndCBpbnNwZWN0IHRoZWlyIHN0YWNrIGFueXdheSwgYW5kIGNyZWF0aW5nIHRoZW1cbiAgICogaXMgcHJvaGliaXRpdmVseSBleHBlbnNpdmUgaWYgdGhleSBhcmUgY3JlYXRlZCB0b28gb2Z0ZW4sIHN1Y2ggYXMgd2hhdFxuICAgKiBoYXBwZW5zIGluIG9uZU9mVHlwZSgpIGZvciBhbnkgdHlwZSBiZWZvcmUgdGhlIG9uZSB0aGF0IG1hdGNoZWQuXG4gICAqL2Z1bmN0aW9uIFByb3BUeXBlRXJyb3IobWVzc2FnZSl7dGhpcy5tZXNzYWdlPW1lc3NhZ2U7dGhpcy5zdGFjaz0nJzt9Ly8gTWFrZSBgaW5zdGFuY2VvZiBFcnJvcmAgc3RpbGwgd29yayBmb3IgcmV0dXJuZWQgZXJyb3JzLlxuUHJvcFR5cGVFcnJvci5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlO2Z1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7dmFyIG1hbnVhbFByb3BUeXBlQ2FsbENhY2hlPXt9O3ZhciBtYW51YWxQcm9wVHlwZVdhcm5pbmdDb3VudD0wO31mdW5jdGlvbiBjaGVja1R5cGUoaXNSZXF1aXJlZCxwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxzZWNyZXQpe2NvbXBvbmVudE5hbWU9Y29tcG9uZW50TmFtZXx8QU5PTllNT1VTO3Byb3BGdWxsTmFtZT1wcm9wRnVsbE5hbWV8fHByb3BOYW1lO2lmKHNlY3JldCE9PVJlYWN0UHJvcFR5cGVzU2VjcmV0KXtpZih0aHJvd09uRGlyZWN0QWNjZXNzKXsvLyBOZXcgYmVoYXZpb3Igb25seSBmb3IgdXNlcnMgb2YgYHByb3AtdHlwZXNgIHBhY2thZ2VcbnZhciBlcnI9bmV3IEVycm9yKCdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnKydVc2UgYFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpYCB0byBjYWxsIHRoZW0uICcrJ1JlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMnKTtlcnIubmFtZT0nSW52YXJpYW50IFZpb2xhdGlvbic7dGhyb3cgZXJyO31lbHNlIGlmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nJiZ0eXBlb2YgY29uc29sZSE9PSd1bmRlZmluZWQnKXsvLyBPbGQgYmVoYXZpb3IgZm9yIHBlb3BsZSB1c2luZyBSZWFjdC5Qcm9wVHlwZXNcbnZhciBjYWNoZUtleT1jb21wb25lbnROYW1lKyc6Jytwcm9wTmFtZTtpZighbWFudWFsUHJvcFR5cGVDYWxsQ2FjaGVbY2FjaGVLZXldJiYvLyBBdm9pZCBzcGFtbWluZyB0aGUgY29uc29sZSBiZWNhdXNlIHRoZXkgYXJlIG9mdGVuIG5vdCBhY3Rpb25hYmxlIGV4Y2VwdCBmb3IgbGliIGF1dGhvcnNcbm1hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50PDMpe3ByaW50V2FybmluZygnWW91IGFyZSBtYW51YWxseSBjYWxsaW5nIGEgUmVhY3QuUHJvcFR5cGVzIHZhbGlkYXRpb24gJysnZnVuY3Rpb24gZm9yIHRoZSBgJytwcm9wRnVsbE5hbWUrJ2AgcHJvcCBvbiBgJytjb21wb25lbnROYW1lKydgLiBUaGlzIGlzIGRlcHJlY2F0ZWQgJysnYW5kIHdpbGwgdGhyb3cgaW4gdGhlIHN0YW5kYWxvbmUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcrJ1lvdSBtYXkgYmUgc2VlaW5nIHRoaXMgd2FybmluZyBkdWUgdG8gYSB0aGlyZC1wYXJ0eSBQcm9wVHlwZXMgJysnbGlicmFyeS4gU2VlIGh0dHBzOi8vZmIubWUvcmVhY3Qtd2FybmluZy1kb250LWNhbGwtcHJvcHR5cGVzICcrJ2ZvciBkZXRhaWxzLicpO21hbnVhbFByb3BUeXBlQ2FsbENhY2hlW2NhY2hlS2V5XT10cnVlO21hbnVhbFByb3BUeXBlV2FybmluZ0NvdW50Kys7fX19aWYocHJvcHNbcHJvcE5hbWVdPT1udWxsKXtpZihpc1JlcXVpcmVkKXtpZihwcm9wc1twcm9wTmFtZV09PT1udWxsKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIGlzIG1hcmtlZCBhcyByZXF1aXJlZCAnKygnaW4gYCcrY29tcG9uZW50TmFtZSsnYCwgYnV0IGl0cyB2YWx1ZSBpcyBgbnVsbGAuJykpO31yZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1RoZSAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIGlzIG1hcmtlZCBhcyByZXF1aXJlZCBpbiAnKygnYCcrY29tcG9uZW50TmFtZSsnYCwgYnV0IGl0cyB2YWx1ZSBpcyBgdW5kZWZpbmVkYC4nKSk7fXJldHVybiBudWxsO31lbHNle3JldHVybiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSk7fX12YXIgY2hhaW5lZENoZWNrVHlwZT1jaGVja1R5cGUuYmluZChudWxsLGZhbHNlKTtjaGFpbmVkQ2hlY2tUeXBlLmlzUmVxdWlyZWQ9Y2hlY2tUeXBlLmJpbmQobnVsbCx0cnVlKTtyZXR1cm4gY2hhaW5lZENoZWNrVHlwZTt9ZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoZXhwZWN0ZWRUeXBlKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxzZWNyZXQpe3ZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO2lmKHByb3BUeXBlIT09ZXhwZWN0ZWRUeXBlKXsvLyBgcHJvcFZhbHVlYCBiZWluZyBpbnN0YW5jZSBvZiwgc2F5LCBkYXRlL3JlZ2V4cCwgcGFzcyB0aGUgJ29iamVjdCdcbi8vIGNoZWNrLCBidXQgd2UgY2FuIG9mZmVyIGEgbW9yZSBwcmVjaXNlIGVycm9yIG1lc3NhZ2UgaGVyZSByYXRoZXIgdGhhblxuLy8gJ29mIHR5cGUgYG9iamVjdGAnLlxudmFyIHByZWNpc2VUeXBlPWdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSk7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSAnKygnYCcrcHJlY2lzZVR5cGUrJ2Agc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgJykrKCdgJytleHBlY3RlZFR5cGUrJ2AuJykpO31yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKXtyZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIoZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbCk7fWZ1bmN0aW9uIGNyZWF0ZUFycmF5T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcil7ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe2lmKHR5cGVvZiB0eXBlQ2hlY2tlciE9PSdmdW5jdGlvbicpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignUHJvcGVydHkgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIGNvbXBvbmVudCBgJytjb21wb25lbnROYW1lKydgIGhhcyBpbnZhbGlkIFByb3BUeXBlIG5vdGF0aW9uIGluc2lkZSBhcnJheU9mLicpO312YXIgcHJvcFZhbHVlPXByb3BzW3Byb3BOYW1lXTtpZighQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKXt2YXIgcHJvcFR5cGU9Z2V0UHJvcFR5cGUocHJvcFZhbHVlKTtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlICcrKCdgJytwcm9wVHlwZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBhbiBhcnJheS4nKSk7fWZvcih2YXIgaT0wO2k8cHJvcFZhbHVlLmxlbmd0aDtpKyspe3ZhciBlcnJvcj10eXBlQ2hlY2tlcihwcm9wVmFsdWUsaSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSsnWycraSsnXScsUmVhY3RQcm9wVHlwZXNTZWNyZXQpO2lmKGVycm9yIGluc3RhbmNlb2YgRXJyb3Ipe3JldHVybiBlcnJvcjt9fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07aWYoIWlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpe3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK3Byb3BUeXBlKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIGEgc2luZ2xlIFJlYWN0RWxlbWVudC4nKSk7fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVFbGVtZW50VHlwZVR5cGVDaGVja2VyKCl7ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe3ZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO2lmKCFSZWFjdElzLmlzVmFsaWRFbGVtZW50VHlwZShwcm9wVmFsdWUpKXt2YXIgcHJvcFR5cGU9Z2V0UHJvcFR5cGUocHJvcFZhbHVlKTtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBvZiB0eXBlICcrKCdgJytwcm9wVHlwZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQgdHlwZS4nKSk7fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyKGV4cGVjdGVkQ2xhc3Mpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXtpZighKHByb3BzW3Byb3BOYW1lXWluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpe3ZhciBleHBlY3RlZENsYXNzTmFtZT1leHBlY3RlZENsYXNzLm5hbWV8fEFOT05ZTU9VUzt2YXIgYWN0dWFsQ2xhc3NOYW1lPWdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK2FjdHVhbENsYXNzTmFtZSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCAnKSsoJ2luc3RhbmNlIG9mIGAnK2V4cGVjdGVkQ2xhc3NOYW1lKydgLicpKTt9cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcyl7aWYoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnRzIHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheSwgZ290ICcrYXJndW1lbnRzLmxlbmd0aCsnIGFyZ3VtZW50cy4gJysnQSBjb21tb24gbWlzdGFrZSBpcyB0byB3cml0ZSBvbmVPZih4LCB5LCB6KSBpbnN0ZWFkIG9mIG9uZU9mKFt4LCB5LCB6XSkuJyk7fWVsc2V7cHJpbnRXYXJuaW5nKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mLCBleHBlY3RlZCBhbiBhcnJheS4nKTt9fXJldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsO31mdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07Zm9yKHZhciBpPTA7aTxleHBlY3RlZFZhbHVlcy5sZW5ndGg7aSsrKXtpZihpcyhwcm9wVmFsdWUsZXhwZWN0ZWRWYWx1ZXNbaV0pKXtyZXR1cm4gbnVsbDt9fXZhciB2YWx1ZXNTdHJpbmc9SlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRWYWx1ZXMsZnVuY3Rpb24gcmVwbGFjZXIoa2V5LHZhbHVlKXt2YXIgdHlwZT1nZXRQcmVjaXNlVHlwZSh2YWx1ZSk7aWYodHlwZT09PSdzeW1ib2wnKXtyZXR1cm4gU3RyaW5nKHZhbHVlKTt9cmV0dXJuIHZhbHVlO30pO3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHZhbHVlIGAnK1N0cmluZyhwcm9wVmFsdWUpKydgICcrKCdzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLCBleHBlY3RlZCBvbmUgb2YgJyt2YWx1ZXNTdHJpbmcrJy4nKSk7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIodHlwZUNoZWNrZXIpe2Z1bmN0aW9uIHZhbGlkYXRlKHByb3BzLHByb3BOYW1lLGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKXtpZih0eXBlb2YgdHlwZUNoZWNrZXIhPT0nZnVuY3Rpb24nKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ1Byb3BlcnR5IGAnK3Byb3BGdWxsTmFtZSsnYCBvZiBjb21wb25lbnQgYCcrY29tcG9uZW50TmFtZSsnYCBoYXMgaW52YWxpZCBQcm9wVHlwZSBub3RhdGlvbiBpbnNpZGUgb2JqZWN0T2YuJyk7fXZhciBwcm9wVmFsdWU9cHJvcHNbcHJvcE5hbWVdO3ZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO2lmKHByb3BUeXBlIT09J29iamVjdCcpe3JldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIG9mIHR5cGUgJysoJ2AnK3Byb3BUeXBlKydgIHN1cHBsaWVkIHRvIGAnK2NvbXBvbmVudE5hbWUrJ2AsIGV4cGVjdGVkIGFuIG9iamVjdC4nKSk7fWZvcih2YXIga2V5IGluIHByb3BWYWx1ZSl7aWYoaGFzKHByb3BWYWx1ZSxrZXkpKXt2YXIgZXJyb3I9dHlwZUNoZWNrZXIocHJvcFZhbHVlLGtleSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSsnLicra2V5LFJlYWN0UHJvcFR5cGVzU2VjcmV0KTtpZihlcnJvciBpbnN0YW5jZW9mIEVycm9yKXtyZXR1cm4gZXJyb3I7fX19cmV0dXJuIG51bGw7fXJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7fWZ1bmN0aW9uIGNyZWF0ZVVuaW9uVHlwZUNoZWNrZXIoYXJyYXlPZlR5cGVDaGVja2Vycyl7aWYoIUFycmF5LmlzQXJyYXkoYXJyYXlPZlR5cGVDaGVja2Vycykpe3Byb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nP3ByaW50V2FybmluZygnSW52YWxpZCBhcmd1bWVudCBzdXBwbGllZCB0byBvbmVPZlR5cGUsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpOnZvaWQgMDtyZXR1cm4gZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zTnVsbDt9Zm9yKHZhciBpPTA7aTxhcnJheU9mVHlwZUNoZWNrZXJzLmxlbmd0aDtpKyspe3ZhciBjaGVja2VyPWFycmF5T2ZUeXBlQ2hlY2tlcnNbaV07aWYodHlwZW9mIGNoZWNrZXIhPT0nZnVuY3Rpb24nKXtwcmludFdhcm5pbmcoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2ZUeXBlLiBFeHBlY3RlZCBhbiBhcnJheSBvZiBjaGVjayBmdW5jdGlvbnMsIGJ1dCAnKydyZWNlaXZlZCAnK2dldFBvc3RmaXhGb3JUeXBlV2FybmluZyhjaGVja2VyKSsnIGF0IGluZGV4ICcraSsnLicpO3JldHVybiBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNOdWxsO319ZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUpe2Zvcih2YXIgaT0wO2k8YXJyYXlPZlR5cGVDaGVja2Vycy5sZW5ndGg7aSsrKXt2YXIgY2hlY2tlcj1hcnJheU9mVHlwZUNoZWNrZXJzW2ldO2lmKGNoZWNrZXIocHJvcHMscHJvcE5hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUsUmVhY3RQcm9wVHlwZXNTZWNyZXQpPT1udWxsKXtyZXR1cm4gbnVsbDt9fXJldHVybiBuZXcgUHJvcFR5cGVFcnJvcignSW52YWxpZCAnK2xvY2F0aW9uKycgYCcrcHJvcEZ1bGxOYW1lKydgIHN1cHBsaWVkIHRvICcrKCdgJytjb21wb25lbnROYW1lKydgLicpKTt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7aWYoIWlzTm9kZShwcm9wc1twcm9wTmFtZV0pKXtyZXR1cm4gbmV3IFByb3BUeXBlRXJyb3IoJ0ludmFsaWQgJytsb2NhdGlvbisnIGAnK3Byb3BGdWxsTmFtZSsnYCBzdXBwbGllZCB0byAnKygnYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYSBSZWFjdE5vZGUuJykpO31yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlU2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGUhPT0nb2JqZWN0Jyl7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSBgJytwcm9wVHlwZSsnYCAnKygnc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO31mb3IodmFyIGtleSBpbiBzaGFwZVR5cGVzKXt2YXIgY2hlY2tlcj1zaGFwZVR5cGVzW2tleV07aWYoIWNoZWNrZXIpe2NvbnRpbnVlO312YXIgZXJyb3I9Y2hlY2tlcihwcm9wVmFsdWUsa2V5LGNvbXBvbmVudE5hbWUsbG9jYXRpb24scHJvcEZ1bGxOYW1lKycuJytrZXksUmVhY3RQcm9wVHlwZXNTZWNyZXQpO2lmKGVycm9yKXtyZXR1cm4gZXJyb3I7fX1yZXR1cm4gbnVsbDt9cmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTt9ZnVuY3Rpb24gY3JlYXRlU3RyaWN0U2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKXtmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSl7dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wTmFtZV07dmFyIHByb3BUeXBlPWdldFByb3BUeXBlKHByb3BWYWx1ZSk7aWYocHJvcFR5cGUhPT0nb2JqZWN0Jyl7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Agb2YgdHlwZSBgJytwcm9wVHlwZSsnYCAnKygnc3VwcGxpZWQgdG8gYCcrY29tcG9uZW50TmFtZSsnYCwgZXhwZWN0ZWQgYG9iamVjdGAuJykpO30vLyBXZSBuZWVkIHRvIGNoZWNrIGFsbCBrZXlzIGluIGNhc2Ugc29tZSBhcmUgcmVxdWlyZWQgYnV0IG1pc3NpbmcgZnJvbVxuLy8gcHJvcHMuXG52YXIgYWxsS2V5cz1hc3NpZ24oe30scHJvcHNbcHJvcE5hbWVdLHNoYXBlVHlwZXMpO2Zvcih2YXIga2V5IGluIGFsbEtleXMpe3ZhciBjaGVja2VyPXNoYXBlVHlwZXNba2V5XTtpZighY2hlY2tlcil7cmV0dXJuIG5ldyBQcm9wVHlwZUVycm9yKCdJbnZhbGlkICcrbG9jYXRpb24rJyBgJytwcm9wRnVsbE5hbWUrJ2Aga2V5IGAnK2tleSsnYCBzdXBwbGllZCB0byBgJytjb21wb25lbnROYW1lKydgLicrJ1xcbkJhZCBvYmplY3Q6ICcrSlNPTi5zdHJpbmdpZnkocHJvcHNbcHJvcE5hbWVdLG51bGwsJyAgJykrJ1xcblZhbGlkIGtleXM6ICcrSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmtleXMoc2hhcGVUeXBlcyksbnVsbCwnICAnKSk7fXZhciBlcnJvcj1jaGVja2VyKHByb3BWYWx1ZSxrZXksY29tcG9uZW50TmFtZSxsb2NhdGlvbixwcm9wRnVsbE5hbWUrJy4nK2tleSxSZWFjdFByb3BUeXBlc1NlY3JldCk7aWYoZXJyb3Ipe3JldHVybiBlcnJvcjt9fXJldHVybiBudWxsO31yZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO31mdW5jdGlvbiBpc05vZGUocHJvcFZhbHVlKXtzd2l0Y2godHlwZW9mIHByb3BWYWx1ZT09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocHJvcFZhbHVlKSl7Y2FzZSdudW1iZXInOmNhc2Unc3RyaW5nJzpjYXNlJ3VuZGVmaW5lZCc6cmV0dXJuIHRydWU7Y2FzZSdib29sZWFuJzpyZXR1cm4hcHJvcFZhbHVlO2Nhc2Unb2JqZWN0JzppZihBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpe3JldHVybiBwcm9wVmFsdWUuZXZlcnkoaXNOb2RlKTt9aWYocHJvcFZhbHVlPT09bnVsbHx8aXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSl7cmV0dXJuIHRydWU7fXZhciBpdGVyYXRvckZuPWdldEl0ZXJhdG9yRm4ocHJvcFZhbHVlKTtpZihpdGVyYXRvckZuKXt2YXIgaXRlcmF0b3I9aXRlcmF0b3JGbi5jYWxsKHByb3BWYWx1ZSk7dmFyIHN0ZXA7aWYoaXRlcmF0b3JGbiE9PXByb3BWYWx1ZS5lbnRyaWVzKXt3aGlsZSghKHN0ZXA9aXRlcmF0b3IubmV4dCgpKS5kb25lKXtpZighaXNOb2RlKHN0ZXAudmFsdWUpKXtyZXR1cm4gZmFsc2U7fX19ZWxzZXsvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cbndoaWxlKCEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmUpe3ZhciBlbnRyeT1zdGVwLnZhbHVlO2lmKGVudHJ5KXtpZighaXNOb2RlKGVudHJ5WzFdKSl7cmV0dXJuIGZhbHNlO319fX19ZWxzZXtyZXR1cm4gZmFsc2U7fXJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlO319ZnVuY3Rpb24gaXNTeW1ib2wocHJvcFR5cGUscHJvcFZhbHVlKXsvLyBOYXRpdmUgU3ltYm9sLlxuaWYocHJvcFR5cGU9PT0nc3ltYm9sJyl7cmV0dXJuIHRydWU7fS8vIGZhbHN5IHZhbHVlIGNhbid0IGJlIGEgU3ltYm9sXG5pZighcHJvcFZhbHVlKXtyZXR1cm4gZmFsc2U7fS8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10gPT09ICdTeW1ib2wnXG5pZihwcm9wVmFsdWVbJ0BAdG9TdHJpbmdUYWcnXT09PSdTeW1ib2wnKXtyZXR1cm4gdHJ1ZTt9Ly8gRmFsbGJhY2sgZm9yIG5vbi1zcGVjIGNvbXBsaWFudCBTeW1ib2xzIHdoaWNoIGFyZSBwb2x5ZmlsbGVkLlxuaWYodHlwZW9mIFN5bWJvbD09PSdmdW5jdGlvbicmJnByb3BWYWx1ZSBpbnN0YW5jZW9mIFN5bWJvbCl7cmV0dXJuIHRydWU7fXJldHVybiBmYWxzZTt9Ly8gRXF1aXZhbGVudCBvZiBgdHlwZW9mYCBidXQgd2l0aCBzcGVjaWFsIGhhbmRsaW5nIGZvciBhcnJheSBhbmQgcmVnZXhwLlxuZnVuY3Rpb24gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKXt2YXIgcHJvcFR5cGU9dHlwZW9mIHByb3BWYWx1ZT09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YocHJvcFZhbHVlKTtpZihBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpe3JldHVybidhcnJheSc7fWlmKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCl7Ly8gT2xkIHdlYmtpdHMgKGF0IGxlYXN0IHVudGlsIEFuZHJvaWQgNC4wKSByZXR1cm4gJ2Z1bmN0aW9uJyByYXRoZXIgdGhhblxuLy8gJ29iamVjdCcgZm9yIHR5cGVvZiBhIFJlZ0V4cC4gV2UnbGwgbm9ybWFsaXplIHRoaXMgaGVyZSBzbyB0aGF0IC9ibGEvXG4vLyBwYXNzZXMgUHJvcFR5cGVzLm9iamVjdC5cbnJldHVybidvYmplY3QnO31pZihpc1N5bWJvbChwcm9wVHlwZSxwcm9wVmFsdWUpKXtyZXR1cm4nc3ltYm9sJzt9cmV0dXJuIHByb3BUeXBlO30vLyBUaGlzIGhhbmRsZXMgbW9yZSB0eXBlcyB0aGFuIGBnZXRQcm9wVHlwZWAuIE9ubHkgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4vLyBTZWUgYGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyYC5cbmZ1bmN0aW9uIGdldFByZWNpc2VUeXBlKHByb3BWYWx1ZSl7aWYodHlwZW9mIHByb3BWYWx1ZT09PSd1bmRlZmluZWQnfHxwcm9wVmFsdWU9PT1udWxsKXtyZXR1cm4nJytwcm9wVmFsdWU7fXZhciBwcm9wVHlwZT1nZXRQcm9wVHlwZShwcm9wVmFsdWUpO2lmKHByb3BUeXBlPT09J29iamVjdCcpe2lmKHByb3BWYWx1ZSBpbnN0YW5jZW9mIERhdGUpe3JldHVybidkYXRlJzt9ZWxzZSBpZihwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApe3JldHVybidyZWdleHAnO319cmV0dXJuIHByb3BUeXBlO30vLyBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgaXMgcG9zdGZpeGVkIHRvIGEgd2FybmluZyBhYm91dCBhbiBpbnZhbGlkIHR5cGUuXG4vLyBGb3IgZXhhbXBsZSwgXCJ1bmRlZmluZWRcIiBvciBcIm9mIHR5cGUgYXJyYXlcIlxuZnVuY3Rpb24gZ2V0UG9zdGZpeEZvclR5cGVXYXJuaW5nKHZhbHVlKXt2YXIgdHlwZT1nZXRQcmVjaXNlVHlwZSh2YWx1ZSk7c3dpdGNoKHR5cGUpe2Nhc2UnYXJyYXknOmNhc2Unb2JqZWN0JzpyZXR1cm4nYW4gJyt0eXBlO2Nhc2UnYm9vbGVhbic6Y2FzZSdkYXRlJzpjYXNlJ3JlZ2V4cCc6cmV0dXJuJ2EgJyt0eXBlO2RlZmF1bHQ6cmV0dXJuIHR5cGU7fX0vLyBSZXR1cm5zIGNsYXNzIG5hbWUgb2YgdGhlIG9iamVjdCwgaWYgYW55LlxuZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKHByb3BWYWx1ZSl7aWYoIXByb3BWYWx1ZS5jb25zdHJ1Y3Rvcnx8IXByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lKXtyZXR1cm4gQU5PTllNT1VTO31yZXR1cm4gcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7fVJlYWN0UHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzPWNoZWNrUHJvcFR5cGVzO1JlYWN0UHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlPWNoZWNrUHJvcFR5cGVzLnJlc2V0V2FybmluZ0NhY2hlO1JlYWN0UHJvcFR5cGVzLlByb3BUeXBlcz1SZWFjdFByb3BUeXBlcztyZXR1cm4gUmVhY3RQcm9wVHlwZXM7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9+L3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi8ndXNlIHN0cmljdCc7dmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0PSdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCc7bW9kdWxlLmV4cG9ydHM9UmVhY3RQcm9wVHlwZXNTZWNyZXQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vfi9wcm9wLXR5cGVzL2xpYi9SZWFjdFByb3BUeXBlc1NlY3JldC5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqLyd1c2Ugc3RyaWN0Jzt2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307dmFyIHByaW50V2FybmluZz1mdW5jdGlvbiBwcmludFdhcm5pbmcoKXt9O2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXt2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQ9cmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTt2YXIgbG9nZ2VkVHlwZUZhaWx1cmVzPXt9O3ZhciBoYXM9RnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO3ByaW50V2FybmluZz1mdW5jdGlvbiBwcmludFdhcm5pbmcodGV4dCl7dmFyIG1lc3NhZ2U9J1dhcm5pbmc6ICcrdGV4dDtpZih0eXBlb2YgY29uc29sZSE9PSd1bmRlZmluZWQnKXtjb25zb2xlLmVycm9yKG1lc3NhZ2UpO310cnl7Ly8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4vLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbnRocm93IG5ldyBFcnJvcihtZXNzYWdlKTt9Y2F0Y2goeCl7fX07fS8qKlxuICogQXNzZXJ0IHRoYXQgdGhlIHZhbHVlcyBtYXRjaCB3aXRoIHRoZSB0eXBlIHNwZWNzLlxuICogRXJyb3IgbWVzc2FnZXMgYXJlIG1lbW9yaXplZCBhbmQgd2lsbCBvbmx5IGJlIHNob3duIG9uY2UuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHR5cGVTcGVjcyBNYXAgb2YgbmFtZSB0byBhIFJlYWN0UHJvcFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZXMgUnVudGltZSB2YWx1ZXMgdGhhdCBuZWVkIHRvIGJlIHR5cGUtY2hlY2tlZFxuICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgTmFtZSBvZiB0aGUgY29tcG9uZW50IGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEBwYXJhbSB7P0Z1bmN0aW9ufSBnZXRTdGFjayBSZXR1cm5zIHRoZSBjb21wb25lbnQgc3RhY2suXG4gKiBAcHJpdmF0ZVxuICovZnVuY3Rpb24gY2hlY2tQcm9wVHlwZXModHlwZVNwZWNzLHZhbHVlcyxsb2NhdGlvbixjb21wb25lbnROYW1lLGdldFN0YWNrKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7Zm9yKHZhciB0eXBlU3BlY05hbWUgaW4gdHlwZVNwZWNzKXtpZihoYXModHlwZVNwZWNzLHR5cGVTcGVjTmFtZSkpe3ZhciBlcnJvcjsvLyBQcm9wIHR5cGUgdmFsaWRhdGlvbiBtYXkgdGhyb3cuIEluIGNhc2UgdGhleSBkbywgd2UgZG9uJ3Qgd2FudCB0b1xuLy8gZmFpbCB0aGUgcmVuZGVyIHBoYXNlIHdoZXJlIGl0IGRpZG4ndCBmYWlsIGJlZm9yZS4gU28gd2UgbG9nIGl0LlxuLy8gQWZ0ZXIgdGhlc2UgaGF2ZSBiZWVuIGNsZWFuZWQgdXAsIHdlJ2xsIGxldCB0aGVtIHRocm93LlxudHJ5ey8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBhbiBpbnZhcmlhbnQgdGhhdCBnZXRzIGNhdWdodC4gSXQncyB0aGUgc2FtZVxuLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLlxuaWYodHlwZW9mIHR5cGVTcGVjc1t0eXBlU3BlY05hbWVdIT09J2Z1bmN0aW9uJyl7dmFyIGVycj1FcnJvcigoY29tcG9uZW50TmFtZXx8J1JlYWN0IGNsYXNzJykrJzogJytsb2NhdGlvbisnIHR5cGUgYCcrdHlwZVNwZWNOYW1lKydgIGlzIGludmFsaWQ7ICcrJ2l0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tIHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZSwgYnV0IHJlY2VpdmVkIGAnK190eXBlb2YodHlwZVNwZWNzW3R5cGVTcGVjTmFtZV0pKydgLicpO2Vyci5uYW1lPSdJbnZhcmlhbnQgVmlvbGF0aW9uJzt0aHJvdyBlcnI7fWVycm9yPXR5cGVTcGVjc1t0eXBlU3BlY05hbWVdKHZhbHVlcyx0eXBlU3BlY05hbWUsY29tcG9uZW50TmFtZSxsb2NhdGlvbixudWxsLFJlYWN0UHJvcFR5cGVzU2VjcmV0KTt9Y2F0Y2goZXgpe2Vycm9yPWV4O31pZihlcnJvciYmIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSl7cHJpbnRXYXJuaW5nKChjb21wb25lbnROYW1lfHwnUmVhY3QgY2xhc3MnKSsnOiB0eXBlIHNwZWNpZmljYXRpb24gb2YgJytsb2NhdGlvbisnIGAnK3R5cGVTcGVjTmFtZSsnYCBpcyBpbnZhbGlkOyB0aGUgdHlwZSBjaGVja2VyICcrJ2Z1bmN0aW9uIG11c3QgcmV0dXJuIGBudWxsYCBvciBhbiBgRXJyb3JgIGJ1dCByZXR1cm5lZCBhICcrKHR5cGVvZiBlcnJvcj09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YoZXJyb3IpKSsnLiAnKydZb3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIHBhc3MgYW4gYXJndW1lbnQgdG8gdGhlIHR5cGUgY2hlY2tlciAnKydjcmVhdG9yIChhcnJheU9mLCBpbnN0YW5jZU9mLCBvYmplY3RPZiwgb25lT2YsIG9uZU9mVHlwZSwgYW5kICcrJ3NoYXBlIGFsbCByZXF1aXJlIGFuIGFyZ3VtZW50KS4nKTt9aWYoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciYmIShlcnJvci5tZXNzYWdlIGluIGxvZ2dlZFR5cGVGYWlsdXJlcykpey8vIE9ubHkgbW9uaXRvciB0aGlzIGZhaWx1cmUgb25jZSBiZWNhdXNlIHRoZXJlIHRlbmRzIHRvIGJlIGEgbG90IG9mIHRoZVxuLy8gc2FtZSBlcnJvci5cbmxvZ2dlZFR5cGVGYWlsdXJlc1tlcnJvci5tZXNzYWdlXT10cnVlO3ZhciBzdGFjaz1nZXRTdGFjaz9nZXRTdGFjaygpOicnO3ByaW50V2FybmluZygnRmFpbGVkICcrbG9jYXRpb24rJyB0eXBlOiAnK2Vycm9yLm1lc3NhZ2UrKHN0YWNrIT1udWxsP3N0YWNrOicnKSk7fX19fX0vKipcbiAqIFJlc2V0cyB3YXJuaW5nIGNhY2hlIHdoZW4gdGVzdGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovY2hlY2tQcm9wVHlwZXMucmVzZXRXYXJuaW5nQ2FjaGU9ZnVuY3Rpb24oKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7bG9nZ2VkVHlwZUZhaWx1cmVzPXt9O319O21vZHVsZS5leHBvcnRzPWNoZWNrUHJvcFR5cGVzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1yb3V0ZXItZG9tL34vcHJvcC10eXBlcy9jaGVja1Byb3BUeXBlcy5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqLyd1c2Ugc3RyaWN0Jzt2YXIgUmVhY3RQcm9wVHlwZXNTZWNyZXQ9cmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtmdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCl7fWZ1bmN0aW9uIGVtcHR5RnVuY3Rpb25XaXRoUmVzZXQoKXt9ZW1wdHlGdW5jdGlvbldpdGhSZXNldC5yZXNldFdhcm5pbmdDYWNoZT1lbXB0eUZ1bmN0aW9uO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gc2hpbShwcm9wcyxwcm9wTmFtZSxjb21wb25lbnROYW1lLGxvY2F0aW9uLHByb3BGdWxsTmFtZSxzZWNyZXQpe2lmKHNlY3JldD09PVJlYWN0UHJvcFR5cGVzU2VjcmV0KXsvLyBJdCBpcyBzdGlsbCBzYWZlIHdoZW4gY2FsbGVkIGZyb20gUmVhY3QuXG5yZXR1cm47fXZhciBlcnI9bmV3IEVycm9yKCdDYWxsaW5nIFByb3BUeXBlcyB2YWxpZGF0b3JzIGRpcmVjdGx5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGBwcm9wLXR5cGVzYCBwYWNrYWdlLiAnKydVc2UgUHJvcFR5cGVzLmNoZWNrUHJvcFR5cGVzKCkgdG8gY2FsbCB0aGVtLiAnKydSZWFkIG1vcmUgYXQgaHR0cDovL2ZiLm1lL3VzZS1jaGVjay1wcm9wLXR5cGVzJyk7ZXJyLm5hbWU9J0ludmFyaWFudCBWaW9sYXRpb24nO3Rocm93IGVycjt9O3NoaW0uaXNSZXF1aXJlZD1zaGltO2Z1bmN0aW9uIGdldFNoaW0oKXtyZXR1cm4gc2hpbTt9Oy8vIEltcG9ydGFudCFcbi8vIEtlZXAgdGhpcyBsaXN0IGluIHN5bmMgd2l0aCBwcm9kdWN0aW9uIHZlcnNpb24gaW4gYC4vZmFjdG9yeVdpdGhUeXBlQ2hlY2tlcnMuanNgLlxudmFyIFJlYWN0UHJvcFR5cGVzPXthcnJheTpzaGltLGJvb2w6c2hpbSxmdW5jOnNoaW0sbnVtYmVyOnNoaW0sb2JqZWN0OnNoaW0sc3RyaW5nOnNoaW0sc3ltYm9sOnNoaW0sYW55OnNoaW0sYXJyYXlPZjpnZXRTaGltLGVsZW1lbnQ6c2hpbSxlbGVtZW50VHlwZTpzaGltLGluc3RhbmNlT2Y6Z2V0U2hpbSxub2RlOnNoaW0sb2JqZWN0T2Y6Z2V0U2hpbSxvbmVPZjpnZXRTaGltLG9uZU9mVHlwZTpnZXRTaGltLHNoYXBlOmdldFNoaW0sZXhhY3Q6Z2V0U2hpbSxjaGVja1Byb3BUeXBlczplbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LHJlc2V0V2FybmluZ0NhY2hlOmVtcHR5RnVuY3Rpb259O1JlYWN0UHJvcFR5cGVzLlByb3BUeXBlcz1SZWFjdFByb3BUeXBlcztyZXR1cm4gUmVhY3RQcm9wVHlwZXM7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qtcm91dGVyLWRvbS9+L3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O2Z1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdChleCl7cmV0dXJuIGV4JiYodHlwZW9mIGV4PT09J3VuZGVmaW5lZCc/J3VuZGVmaW5lZCc6X3R5cGVvZihleCkpPT09J29iamVjdCcmJidkZWZhdWx0J2luIGV4P2V4WydkZWZhdWx0J106ZXg7fXZhciByZWFjdFJvdXRlcj1yZXF1aXJlKCdyZWFjdC1yb3V0ZXInKTt2YXIgUmVhY3Q9X2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ3JlYWN0JykpO3ZhciBoaXN0b3J5PXJlcXVpcmUoJ2hpc3RvcnknKTt2YXIgUHJvcFR5cGVzPV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdwcm9wLXR5cGVzJykpO3ZhciB3YXJuaW5nPV9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCd0aW55LXdhcm5pbmcnKSk7dmFyIGludmFyaWFudD1faW50ZXJvcERlZmF1bHQocmVxdWlyZSgndGlueS1pbnZhcmlhbnQnKSk7ZnVuY3Rpb24gX2V4dGVuZHMoKXtfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldO2Zvcih2YXIga2V5IGluIHNvdXJjZSl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSxrZXkpKXt0YXJnZXRba2V5XT1zb3VyY2Vba2V5XTt9fX1yZXR1cm4gdGFyZ2V0O307cmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9ZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3Msc3VwZXJDbGFzcyl7c3ViQ2xhc3MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO3N1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1zdWJDbGFzcztzdWJDbGFzcy5fX3Byb3RvX189c3VwZXJDbGFzczt9ZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLGV4Y2x1ZGVkKXtpZihzb3VyY2U9PW51bGwpcmV0dXJue307dmFyIHRhcmdldD17fTt2YXIgc291cmNlS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO3ZhciBrZXksaTtmb3IoaT0wO2k8c291cmNlS2V5cy5sZW5ndGg7aSsrKXtrZXk9c291cmNlS2V5c1tpXTtpZihleGNsdWRlZC5pbmRleE9mKGtleSk+PTApY29udGludWU7dGFyZ2V0W2tleV09c291cmNlW2tleV07fXJldHVybiB0YXJnZXQ7fS8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCB1c2VzIEhUTUw1IGhpc3RvcnkuXG4gKi92YXIgQnJvd3NlclJvdXRlcj0vKiNfX1BVUkVfXyovZnVuY3Rpb24oX1JlYWN0JENvbXBvbmVudCl7X2luaGVyaXRzTG9vc2UoQnJvd3NlclJvdXRlcixfUmVhY3QkQ29tcG9uZW50KTtmdW5jdGlvbiBCcm93c2VyUm91dGVyKCl7dmFyIF90aGlzO2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLGFyZ3M9bmV3IEFycmF5KF9sZW4pLF9rZXk9MDtfa2V5PF9sZW47X2tleSsrKXthcmdzW19rZXldPWFyZ3VtZW50c1tfa2V5XTt9X3RoaXM9X1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsW3RoaXNdLmNvbmNhdChhcmdzKSl8fHRoaXM7X3RoaXMuaGlzdG9yeT1oaXN0b3J5LmNyZWF0ZUJyb3dzZXJIaXN0b3J5KF90aGlzLnByb3BzKTtyZXR1cm4gX3RoaXM7fXZhciBfcHJvdG89QnJvd3NlclJvdXRlci5wcm90b3R5cGU7X3Byb3RvLnJlbmRlcj1mdW5jdGlvbiByZW5kZXIoKXtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChyZWFjdFJvdXRlci5Sb3V0ZXIse2hpc3Rvcnk6dGhpcy5oaXN0b3J5LGNoaWxkcmVuOnRoaXMucHJvcHMuY2hpbGRyZW59KTt9O3JldHVybiBCcm93c2VyUm91dGVyO30oUmVhY3QuQ29tcG9uZW50KTt7QnJvd3NlclJvdXRlci5wcm9wVHlwZXM9e2Jhc2VuYW1lOlByb3BUeXBlcy5zdHJpbmcsY2hpbGRyZW46UHJvcFR5cGVzLm5vZGUsZm9yY2VSZWZyZXNoOlByb3BUeXBlcy5ib29sLGdldFVzZXJDb25maXJtYXRpb246UHJvcFR5cGVzLmZ1bmMsa2V5TGVuZ3RoOlByb3BUeXBlcy5udW1iZXJ9O0Jyb3dzZXJSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7d2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LFwiPEJyb3dzZXJSb3V0ZXI+IGlnbm9yZXMgdGhlIGhpc3RvcnkgcHJvcC4gVG8gdXNlIGEgY3VzdG9tIGhpc3RvcnksIFwiK1widXNlIGBpbXBvcnQgeyBSb3V0ZXIgfWAgaW5zdGVhZCBvZiBgaW1wb3J0IHsgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIgfWAuXCIpO307fS8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIGEgPFJvdXRlcj4gdGhhdCB1c2VzIHdpbmRvdy5sb2NhdGlvbi5oYXNoLlxuICovdmFyIEhhc2hSb3V0ZXI9LyojX19QVVJFX18qL2Z1bmN0aW9uKF9SZWFjdCRDb21wb25lbnQpe19pbmhlcml0c0xvb3NlKEhhc2hSb3V0ZXIsX1JlYWN0JENvbXBvbmVudCk7ZnVuY3Rpb24gSGFzaFJvdXRlcigpe3ZhciBfdGhpcztmb3IodmFyIF9sZW49YXJndW1lbnRzLmxlbmd0aCxhcmdzPW5ldyBBcnJheShfbGVuKSxfa2V5PTA7X2tleTxfbGVuO19rZXkrKyl7YXJnc1tfa2V5XT1hcmd1bWVudHNbX2tleV07fV90aGlzPV9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LFt0aGlzXS5jb25jYXQoYXJncykpfHx0aGlzO190aGlzLmhpc3Rvcnk9aGlzdG9yeS5jcmVhdGVIYXNoSGlzdG9yeShfdGhpcy5wcm9wcyk7cmV0dXJuIF90aGlzO312YXIgX3Byb3RvPUhhc2hSb3V0ZXIucHJvdG90eXBlO19wcm90by5yZW5kZXI9ZnVuY3Rpb24gcmVuZGVyKCl7cmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQocmVhY3RSb3V0ZXIuUm91dGVyLHtoaXN0b3J5OnRoaXMuaGlzdG9yeSxjaGlsZHJlbjp0aGlzLnByb3BzLmNoaWxkcmVufSk7fTtyZXR1cm4gSGFzaFJvdXRlcjt9KFJlYWN0LkNvbXBvbmVudCk7e0hhc2hSb3V0ZXIucHJvcFR5cGVzPXtiYXNlbmFtZTpQcm9wVHlwZXMuc3RyaW5nLGNoaWxkcmVuOlByb3BUeXBlcy5ub2RlLGdldFVzZXJDb25maXJtYXRpb246UHJvcFR5cGVzLmZ1bmMsaGFzaFR5cGU6UHJvcFR5cGVzLm9uZU9mKFtcImhhc2hiYW5nXCIsXCJub3NsYXNoXCIsXCJzbGFzaFwiXSl9O0hhc2hSb3V0ZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7d2FybmluZyghdGhpcy5wcm9wcy5oaXN0b3J5LFwiPEhhc2hSb3V0ZXI+IGlnbm9yZXMgdGhlIGhpc3RvcnkgcHJvcC4gVG8gdXNlIGEgY3VzdG9tIGhpc3RvcnksIFwiK1widXNlIGBpbXBvcnQgeyBSb3V0ZXIgfWAgaW5zdGVhZCBvZiBgaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIgfWAuXCIpO307fXZhciByZXNvbHZlVG9Mb2NhdGlvbj1mdW5jdGlvbiByZXNvbHZlVG9Mb2NhdGlvbih0byxjdXJyZW50TG9jYXRpb24pe3JldHVybiB0eXBlb2YgdG89PT1cImZ1bmN0aW9uXCI/dG8oY3VycmVudExvY2F0aW9uKTp0bzt9O3ZhciBub3JtYWxpemVUb0xvY2F0aW9uPWZ1bmN0aW9uIG5vcm1hbGl6ZVRvTG9jYXRpb24odG8sY3VycmVudExvY2F0aW9uKXtyZXR1cm4gdHlwZW9mIHRvPT09XCJzdHJpbmdcIj9oaXN0b3J5LmNyZWF0ZUxvY2F0aW9uKHRvLG51bGwsbnVsbCxjdXJyZW50TG9jYXRpb24pOnRvO307dmFyIGZvcndhcmRSZWZTaGltPWZ1bmN0aW9uIGZvcndhcmRSZWZTaGltKEMpe3JldHVybiBDO307dmFyIGZvcndhcmRSZWY9UmVhY3QuZm9yd2FyZFJlZjtpZih0eXBlb2YgZm9yd2FyZFJlZj09PVwidW5kZWZpbmVkXCIpe2ZvcndhcmRSZWY9Zm9yd2FyZFJlZlNoaW07fWZ1bmN0aW9uIGlzTW9kaWZpZWRFdmVudChldmVudCl7cmV0dXJuISEoZXZlbnQubWV0YUtleXx8ZXZlbnQuYWx0S2V5fHxldmVudC5jdHJsS2V5fHxldmVudC5zaGlmdEtleSk7fXZhciBMaW5rQW5jaG9yPWZvcndhcmRSZWYoZnVuY3Rpb24oX3JlZixmb3J3YXJkZWRSZWYpe3ZhciBpbm5lclJlZj1fcmVmLmlubmVyUmVmLG5hdmlnYXRlPV9yZWYubmF2aWdhdGUsX29uQ2xpY2s9X3JlZi5vbkNsaWNrLHJlc3Q9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZixbXCJpbm5lclJlZlwiLFwibmF2aWdhdGVcIixcIm9uQ2xpY2tcIl0pO3ZhciB0YXJnZXQ9cmVzdC50YXJnZXQ7dmFyIHByb3BzPV9leHRlbmRzKHt9LHJlc3Qse29uQ2xpY2s6ZnVuY3Rpb24gb25DbGljayhldmVudCl7dHJ5e2lmKF9vbkNsaWNrKV9vbkNsaWNrKGV2ZW50KTt9Y2F0Y2goZXgpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7dGhyb3cgZXg7fWlmKCFldmVudC5kZWZhdWx0UHJldmVudGVkJiYvLyBvbkNsaWNrIHByZXZlbnRlZCBkZWZhdWx0XG5ldmVudC5idXR0b249PT0wJiYoLy8gaWdub3JlIGV2ZXJ5dGhpbmcgYnV0IGxlZnQgY2xpY2tzXG4hdGFyZ2V0fHx0YXJnZXQ9PT1cIl9zZWxmXCIpJiYvLyBsZXQgYnJvd3NlciBoYW5kbGUgXCJ0YXJnZXQ9X2JsYW5rXCIgZXRjLlxuIWlzTW9kaWZpZWRFdmVudChldmVudCkvLyBpZ25vcmUgY2xpY2tzIHdpdGggbW9kaWZpZXIga2V5c1xuKXtldmVudC5wcmV2ZW50RGVmYXVsdCgpO25hdmlnYXRlKCk7fX19KTsvLyBSZWFjdCAxNSBjb21wYXRcbmlmKGZvcndhcmRSZWZTaGltIT09Zm9yd2FyZFJlZil7cHJvcHMucmVmPWZvcndhcmRlZFJlZnx8aW5uZXJSZWY7fWVsc2V7cHJvcHMucmVmPWlubmVyUmVmO31yZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImFcIixwcm9wcyk7fSk7e0xpbmtBbmNob3IuZGlzcGxheU5hbWU9XCJMaW5rQW5jaG9yXCI7fS8qKlxuICogVGhlIHB1YmxpYyBBUEkgZm9yIHJlbmRlcmluZyBhIGhpc3RvcnktYXdhcmUgPGE+LlxuICovdmFyIExpbms9Zm9yd2FyZFJlZihmdW5jdGlvbihfcmVmMixmb3J3YXJkZWRSZWYpe3ZhciBfcmVmMiRjb21wb25lbnQ9X3JlZjIuY29tcG9uZW50LGNvbXBvbmVudD1fcmVmMiRjb21wb25lbnQ9PT12b2lkIDA/TGlua0FuY2hvcjpfcmVmMiRjb21wb25lbnQscmVwbGFjZT1fcmVmMi5yZXBsYWNlLHRvPV9yZWYyLnRvLGlubmVyUmVmPV9yZWYyLmlubmVyUmVmLHJlc3Q9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZjIsW1wiY29tcG9uZW50XCIsXCJyZXBsYWNlXCIsXCJ0b1wiLFwiaW5uZXJSZWZcIl0pO3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KHJlYWN0Um91dGVyLl9fUm91dGVyQ29udGV4dC5Db25zdW1lcixudWxsLGZ1bmN0aW9uKGNvbnRleHQpeyFjb250ZXh0P2ludmFyaWFudChmYWxzZSxcIllvdSBzaG91bGQgbm90IHVzZSA8TGluaz4gb3V0c2lkZSBhIDxSb3V0ZXI+XCIpOnZvaWQgMDt2YXIgaGlzdG9yeT1jb250ZXh0Lmhpc3Rvcnk7dmFyIGxvY2F0aW9uPW5vcm1hbGl6ZVRvTG9jYXRpb24ocmVzb2x2ZVRvTG9jYXRpb24odG8sY29udGV4dC5sb2NhdGlvbiksY29udGV4dC5sb2NhdGlvbik7dmFyIGhyZWY9bG9jYXRpb24/aGlzdG9yeS5jcmVhdGVIcmVmKGxvY2F0aW9uKTpcIlwiO3ZhciBwcm9wcz1fZXh0ZW5kcyh7fSxyZXN0LHtocmVmOmhyZWYsbmF2aWdhdGU6ZnVuY3Rpb24gbmF2aWdhdGUoKXt2YXIgbG9jYXRpb249cmVzb2x2ZVRvTG9jYXRpb24odG8sY29udGV4dC5sb2NhdGlvbik7dmFyIG1ldGhvZD1yZXBsYWNlP2hpc3RvcnkucmVwbGFjZTpoaXN0b3J5LnB1c2g7bWV0aG9kKGxvY2F0aW9uKTt9fSk7Ly8gUmVhY3QgMTUgY29tcGF0XG5pZihmb3J3YXJkUmVmU2hpbSE9PWZvcndhcmRSZWYpe3Byb3BzLnJlZj1mb3J3YXJkZWRSZWZ8fGlubmVyUmVmO31lbHNle3Byb3BzLmlubmVyUmVmPWlubmVyUmVmO31yZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChjb21wb25lbnQscHJvcHMpO30pO30pO3t2YXIgdG9UeXBlPVByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsUHJvcFR5cGVzLm9iamVjdCxQcm9wVHlwZXMuZnVuY10pO3ZhciByZWZUeXBlPVByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsUHJvcFR5cGVzLmZ1bmMsUHJvcFR5cGVzLnNoYXBlKHtjdXJyZW50OlByb3BUeXBlcy5hbnl9KV0pO0xpbmsuZGlzcGxheU5hbWU9XCJMaW5rXCI7TGluay5wcm9wVHlwZXM9e2lubmVyUmVmOnJlZlR5cGUsb25DbGljazpQcm9wVHlwZXMuZnVuYyxyZXBsYWNlOlByb3BUeXBlcy5ib29sLHRhcmdldDpQcm9wVHlwZXMuc3RyaW5nLHRvOnRvVHlwZS5pc1JlcXVpcmVkfTt9dmFyIGZvcndhcmRSZWZTaGltJDE9ZnVuY3Rpb24gZm9yd2FyZFJlZlNoaW0oQyl7cmV0dXJuIEM7fTt2YXIgZm9yd2FyZFJlZiQxPVJlYWN0LmZvcndhcmRSZWY7aWYodHlwZW9mIGZvcndhcmRSZWYkMT09PVwidW5kZWZpbmVkXCIpe2ZvcndhcmRSZWYkMT1mb3J3YXJkUmVmU2hpbSQxO31mdW5jdGlvbiBqb2luQ2xhc3NuYW1lcygpe2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLGNsYXNzbmFtZXM9bmV3IEFycmF5KF9sZW4pLF9rZXk9MDtfa2V5PF9sZW47X2tleSsrKXtjbGFzc25hbWVzW19rZXldPWFyZ3VtZW50c1tfa2V5XTt9cmV0dXJuIGNsYXNzbmFtZXMuZmlsdGVyKGZ1bmN0aW9uKGkpe3JldHVybiBpO30pLmpvaW4oXCIgXCIpO30vKipcbiAqIEEgPExpbms+IHdyYXBwZXIgdGhhdCBrbm93cyBpZiBpdCdzIFwiYWN0aXZlXCIgb3Igbm90LlxuICovdmFyIE5hdkxpbms9Zm9yd2FyZFJlZiQxKGZ1bmN0aW9uKF9yZWYsZm9yd2FyZGVkUmVmKXt2YXIgX3JlZiRhcmlhQ3VycmVudD1fcmVmW1wiYXJpYS1jdXJyZW50XCJdLGFyaWFDdXJyZW50PV9yZWYkYXJpYUN1cnJlbnQ9PT12b2lkIDA/XCJwYWdlXCI6X3JlZiRhcmlhQ3VycmVudCxfcmVmJGFjdGl2ZUNsYXNzTmFtZT1fcmVmLmFjdGl2ZUNsYXNzTmFtZSxhY3RpdmVDbGFzc05hbWU9X3JlZiRhY3RpdmVDbGFzc05hbWU9PT12b2lkIDA/XCJhY3RpdmVcIjpfcmVmJGFjdGl2ZUNsYXNzTmFtZSxhY3RpdmVTdHlsZT1fcmVmLmFjdGl2ZVN0eWxlLGNsYXNzTmFtZVByb3A9X3JlZi5jbGFzc05hbWUsZXhhY3Q9X3JlZi5leGFjdCxpc0FjdGl2ZVByb3A9X3JlZi5pc0FjdGl2ZSxsb2NhdGlvblByb3A9X3JlZi5sb2NhdGlvbixzdHJpY3Q9X3JlZi5zdHJpY3Qsc3R5bGVQcm9wPV9yZWYuc3R5bGUsdG89X3JlZi50byxpbm5lclJlZj1fcmVmLmlubmVyUmVmLHJlc3Q9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZixbXCJhcmlhLWN1cnJlbnRcIixcImFjdGl2ZUNsYXNzTmFtZVwiLFwiYWN0aXZlU3R5bGVcIixcImNsYXNzTmFtZVwiLFwiZXhhY3RcIixcImlzQWN0aXZlXCIsXCJsb2NhdGlvblwiLFwic3RyaWN0XCIsXCJzdHlsZVwiLFwidG9cIixcImlubmVyUmVmXCJdKTtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChyZWFjdFJvdXRlci5fX1JvdXRlckNvbnRleHQuQ29uc3VtZXIsbnVsbCxmdW5jdGlvbihjb250ZXh0KXshY29udGV4dD9pbnZhcmlhbnQoZmFsc2UsXCJZb3Ugc2hvdWxkIG5vdCB1c2UgPE5hdkxpbms+IG91dHNpZGUgYSA8Um91dGVyPlwiKTp2b2lkIDA7dmFyIGN1cnJlbnRMb2NhdGlvbj1sb2NhdGlvblByb3B8fGNvbnRleHQubG9jYXRpb247dmFyIHRvTG9jYXRpb249bm9ybWFsaXplVG9Mb2NhdGlvbihyZXNvbHZlVG9Mb2NhdGlvbih0byxjdXJyZW50TG9jYXRpb24pLGN1cnJlbnRMb2NhdGlvbik7dmFyIHBhdGg9dG9Mb2NhdGlvbi5wYXRobmFtZTsvLyBSZWdleCB0YWtlbiBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vcGlsbGFyanMvcGF0aC10by1yZWdleHAvYmxvYi9tYXN0ZXIvaW5kZXguanMjTDIwMlxudmFyIGVzY2FwZWRQYXRoPXBhdGgmJnBhdGgucmVwbGFjZSgvKFsuKyo/PV4hOiR7fSgpW1xcXXwvXFxcXF0pL2csXCJcXFxcJDFcIik7dmFyIG1hdGNoPWVzY2FwZWRQYXRoP3JlYWN0Um91dGVyLm1hdGNoUGF0aChjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUse3BhdGg6ZXNjYXBlZFBhdGgsZXhhY3Q6ZXhhY3Qsc3RyaWN0OnN0cmljdH0pOm51bGw7dmFyIGlzQWN0aXZlPSEhKGlzQWN0aXZlUHJvcD9pc0FjdGl2ZVByb3AobWF0Y2gsY3VycmVudExvY2F0aW9uKTptYXRjaCk7dmFyIGNsYXNzTmFtZT1pc0FjdGl2ZT9qb2luQ2xhc3NuYW1lcyhjbGFzc05hbWVQcm9wLGFjdGl2ZUNsYXNzTmFtZSk6Y2xhc3NOYW1lUHJvcDt2YXIgc3R5bGU9aXNBY3RpdmU/X2V4dGVuZHMoe30sc3R5bGVQcm9wLHt9LGFjdGl2ZVN0eWxlKTpzdHlsZVByb3A7dmFyIHByb3BzPV9leHRlbmRzKHtcImFyaWEtY3VycmVudFwiOmlzQWN0aXZlJiZhcmlhQ3VycmVudHx8bnVsbCxjbGFzc05hbWU6Y2xhc3NOYW1lLHN0eWxlOnN0eWxlLHRvOnRvTG9jYXRpb259LHJlc3QpOy8vIFJlYWN0IDE1IGNvbXBhdFxuaWYoZm9yd2FyZFJlZlNoaW0kMSE9PWZvcndhcmRSZWYkMSl7cHJvcHMucmVmPWZvcndhcmRlZFJlZnx8aW5uZXJSZWY7fWVsc2V7cHJvcHMuaW5uZXJSZWY9aW5uZXJSZWY7fXJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KExpbmsscHJvcHMpO30pO30pO3tOYXZMaW5rLmRpc3BsYXlOYW1lPVwiTmF2TGlua1wiO3ZhciBhcmlhQ3VycmVudFR5cGU9UHJvcFR5cGVzLm9uZU9mKFtcInBhZ2VcIixcInN0ZXBcIixcImxvY2F0aW9uXCIsXCJkYXRlXCIsXCJ0aW1lXCIsXCJ0cnVlXCJdKTtOYXZMaW5rLnByb3BUeXBlcz1fZXh0ZW5kcyh7fSxMaW5rLnByb3BUeXBlcyx7XCJhcmlhLWN1cnJlbnRcIjphcmlhQ3VycmVudFR5cGUsYWN0aXZlQ2xhc3NOYW1lOlByb3BUeXBlcy5zdHJpbmcsYWN0aXZlU3R5bGU6UHJvcFR5cGVzLm9iamVjdCxjbGFzc05hbWU6UHJvcFR5cGVzLnN0cmluZyxleGFjdDpQcm9wVHlwZXMuYm9vbCxpc0FjdGl2ZTpQcm9wVHlwZXMuZnVuYyxsb2NhdGlvbjpQcm9wVHlwZXMub2JqZWN0LHN0cmljdDpQcm9wVHlwZXMuYm9vbCxzdHlsZTpQcm9wVHlwZXMub2JqZWN0fSk7fU9iamVjdC5rZXlzKHJlYWN0Um91dGVyKS5mb3JFYWNoKGZ1bmN0aW9uKGspe2lmKGshPT0nZGVmYXVsdCcpT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsayx7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gcmVhY3RSb3V0ZXJba107fX0pO30pO2V4cG9ydHMuQnJvd3NlclJvdXRlcj1Ccm93c2VyUm91dGVyO2V4cG9ydHMuSGFzaFJvdXRlcj1IYXNoUm91dGVyO2V4cG9ydHMuTGluaz1MaW5rO2V4cG9ydHMuTmF2TGluaz1OYXZMaW5rOy8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0LXJvdXRlci1kb20uanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LXJvdXRlci1kb20vY2pzL3JlYWN0LXJvdXRlci1kb20uanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgRG9jQ29udGV4dCA9IHJlcXVpcmUoJy4uLy4uL2RvYy1jb250ZXh0Jyk7XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3JlYWN0LXJvdXRlci1kb20nKSxcbiAgICB3aXRoUm91dGVyID0gX3JlcXVpcmUud2l0aFJvdXRlcjtcblxudmFyIGZldGNoRGF0YSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9mZXRjaERhdGEnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBUb29sYmFyQ29udGFpbmVyID0gcmVxdWlyZSgnLi8uLi90b29sYmFyLWNvbnRhaW5lci90b29sYmFyLWNvbnRhaW5lci5qc3gnKSxcbiAgICBCdG5TdGFydCA9IHJlcXVpcmUoJy4vLi4vYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1zdGFydC9idXR0b24tcmVnaXN0ZXItc3RhcnQuanN4JyksXG4gICAgQnRuTG9naW4gPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tbG9naW4vYnV0dG9uLWxvZ2luLmpzeCcpLFxuICAgIEJ0bkVkaXQgPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZWRpdC9idXR0b24tcmVnaXN0ZXItZWRpdC5qc3gnKSxcbiAgICBCdG5JbmZvID0gcmVxdWlyZSgnLi8uLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLWluZm8vaW5kZXguanN4JyksXG4gICAgU3RhcnRNZW51ID0gcmVxdWlyZSgnLi8uLi9zdGFydC1tZW51L3N0YXJ0LW1lbnUuanN4JyksXG4gICAgU2VsZWN0UmVrdiA9IHJlcXVpcmUoJy4vLi4vc2VsZWN0LXJla3YvaW5kZXguanN4JyksXG4gICAgQnRuQWNjb3VudCA9IHJlcXVpcmUoJy4vLi4vYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1hY2NvdW50L2J1dHRvbi1hY2NvdW50LmpzeCcpO1xuXG52YXIgc3R5bGUgPSByZXF1aXJlKCcuL21lbnUtdG9vbGJhci5zdHlsZXMnKTtcblxudmFyIE1lbnVUb29sQmFyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoTWVudVRvb2xCYXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gTWVudVRvb2xCYXIocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lbnVUb29sQmFyKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWVudVRvb2xCYXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNZW51VG9vbEJhcikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGxvZ2VkSW46IHRydWUsXG4gICAgICAgICAgICBzdGFydE1lbnVWYWx1ZTogJ3BhcmVudGlkJyxcbiAgICAgICAgICAgIHNob3dTdGFydE1lbnU6IGZhbHNlLFxuICAgICAgICAgICAgaXNPcGVuUmVrdlBhZ2U6IGZhbHNlLFxuICAgICAgICAgICAgcmVrdklkOiBwcm9wcy5yZWt2SWQgPyBwcm9wcy5yZWt2SWQgOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMuYnRuU3RhcnRDbGljayA9IF90aGlzLmJ0blN0YXJ0Q2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmJ0bkxvZ2luQ2xpY2sgPSBfdGhpcy5idG5Mb2dpbkNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5yZW5kZXJTdGFydE1lbnUgPSBfdGhpcy5yZW5kZXJTdGFydE1lbnUuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnN0YXJ0TWVudUNsaWNrSGFuZGxlciA9IF90aGlzLnN0YXJ0TWVudUNsaWNrSGFuZGxlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlID0gX3RoaXMuaGFuZGxlQ2hhbmdlLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5idG5BY2NvdW50Q2xpY2sgPSBfdGhpcy5idG5BY2NvdW50Q2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmJ0bkVkaXRSZWt2Q2xpY2sgPSBfdGhpcy5idG5FZGl0UmVrdkNsaWNrLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTWVudVRvb2xCYXIsIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaXNFZGl0TW9kZSA9IHRoaXMucHJvcHMuZWRpdGVkLFxuICAgICAgICAgICAgICAgIHRvb2xiYXJQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgYnRuU3RhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5wYXJhbXNbJ2J0blN0YXJ0J10uc2hvdyB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0bkxvZ2luOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuQWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnN0YXRlLmxvZ2VkSW4gfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuSW5mbzoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdXNlckFjY2Vzc0xpc3QgPSBbXTtcblxuICAgICAgICAgICAgaWYgKCd1c2VyQWNjZXNzTGlzdCcgaW4gRG9jQ29udGV4dC51c2VyRGF0YSkge1xuICAgICAgICAgICAgICAgIHVzZXJBY2Nlc3NMaXN0ID0gRG9jQ29udGV4dC51c2VyRGF0YS51c2VyQWNjZXNzTGlzdC5tYXAoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93T2JqZWN0ID0gSlNPTi5wYXJzZShyb3cpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBpZDogcm93T2JqZWN0LmlkLCBrb29kOiAnJywgbmFtZTogcm93T2JqZWN0Lm5pbWV0dXMgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vINGB0L7RgNGC0LjRgNC+0LLQutCwXG4gICAgICAgICAgICAgICAgdXNlckFjY2Vzc0xpc3QgPSB1c2VyQWNjZXNzTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUsICdlbicsIHsgc2Vuc2l0aXZpdHk6ICdiYXNlJyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJla3ZJZCA9IHRoaXMuc3RhdGUucmVrdklkLFxuICAgICAgICAgICAgICAgIGFzdXR1cyA9IHVzZXJBY2Nlc3NMaXN0LmZpbmQoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3cuaWQgPT0gcmVrdklkO1xuICAgICAgICAgICAgfSkubmFtZTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlWydjb250YWluZXInXSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVbJ3BhZ2VOYW1lJ10gfSxcbiAgICAgICAgICAgICAgICAgICAgJyAnLFxuICAgICAgICAgICAgICAgICAgICBEb2NDb250ZXh0LnBhZ2VOYW1lID8gRG9jQ29udGV4dC5wYWdlTmFtZSA6ICdMYXN0ZSByZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICcgJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgVG9vbGJhckNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnbWVudVRvb2xiYXJDb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdsZWZ0JyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blN0YXJ0LCB7IHJlZjogJ2J0blN0YXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYnRuU3RhcnRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXNbJ2J0blN0YXJ0J10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0b29sYmFyUGFyYW1zWydidG5TdGFydCddLmRpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdFJla3YsIHsgbmFtZTogJ3Jla3ZJZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAncmVrdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVbJ3NlbGVjdFN0eWxlJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB1c2VyQWNjZXNzTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZWt2SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGFzdXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3Jla3ZJZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuRWRpdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuRWRpdFJla3YnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdNdXVkYScsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmJ0bkVkaXRSZWt2Q2xpY2tcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuQWNjb3VudCwgeyByZWY6ICdidG5BY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBEb2NDb250ZXh0LnVzZXJEYXRhID8gRG9jQ29udGV4dC51c2VyRGF0YS51c2VyTmFtZSA6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5idG5BY2NvdW50Q2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5BY2NvdW50J10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0b29sYmFyUGFyYW1zWydidG5BY2NvdW50J10uZGlzYWJsZWQgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuTG9naW4sIHsgcmVmOiAnYnRuTG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubG9nZWRJbiA/ICdWw6RsanUnIDogJ1Npc3NlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYnRuTG9naW5DbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXNbJ2J0bkxvZ2luJ10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0b29sYmFyUGFyYW1zWydidG5Mb2dpbiddLmRpc2FibGVkIH0pLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkluZm8sIHsgcmVmOiAnYnRuSW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0p1aGVuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5JbmZvJ10uc2hvdyB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTdGFydE1lbnUoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyU3RhcnRNZW51JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclN0YXJ0TWVudSgpIHtcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IERvY0NvbnRleHQubWVudTtcclxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dTdGFydE1lbnUpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFN0YXJ0TWVudSwgeyByZWY6ICdzdGFydE1lbnUnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5zdGFydE1lbnVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tIYW5kbGVyOiB0aGlzLnN0YXJ0TWVudUNsaWNrSGFuZGxlciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0blN0YXJ0Q2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuU3RhcnRDbGljaygpIHtcbiAgICAgICAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60LggU3RhcnRcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dTdGFydE1lbnU6ICF0aGlzLnN0YXRlLnNob3dTdGFydE1lbnUgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9C+0LvRg9GH0LjRgiDQvtGCINGB0YLQsNGA0YLQvtCz0L4g0LzQtdC90Y4g0LTQsNC90L3Ri9C1LCDRgdC/0YDRj9GH0LXRgiDQvNC10L3RjlxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdGFydE1lbnVDbGlja0hhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRNZW51Q2xpY2tIYW5kbGVyKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1N0YXJ0TWVudTogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgIHZhciBkb2NUeXBlID0gRG9jQ29udGV4dFsnbWVudSddLmZpbmQoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3cua29vZCA9PT0gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChkb2NUeXBlKSB7XG4gICAgICAgICAgICAgICAgRG9jQ29udGV4dC5wYWdlTmFtZSA9IGRvY1R5cGUubmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaGlzdG9yeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhuYW1lOiAnLycgKyBEb2NDb250ZXh0Lm1vZHVsZSArICcvJyArIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogeyBtb2R1bGU6IERvY0NvbnRleHQubW9kdWxlIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gJy8nICsgRG9jQ29udGV4dC5tb2R1bGUgKyAnLycgKyB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuTG9naW5DbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5Mb2dpbkNsaWNrKCkge1xuICAgICAgICAgICAgdmFyIFVSTCA9ICcvbG9nb3V0JztcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2dlZEluOiBmYWxzZSB9KTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgdXNlcklkID0gRG9jQ29udGV4dC51c2VyRGF0YS51c2VySWQ7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsIG1vZHVsZTogRG9jQ29udGV4dC5tb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIHV1aWQ6IHRoaXMuc3RhdGUubG9nZWRJbiA/IERvY0NvbnRleHQudXNlckRhdGEudXVpZCA6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZmV0Y2hEYXRhLmZldGNoRGF0YVBvc3QoVVJMLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBEb2NDb250ZXh0LnVzZXJEYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcvbG9naW4nO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5BY2NvdW50Q2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuQWNjb3VudENsaWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXRobmFtZTogJy8nICsgRG9jQ29udGV4dC5tb2R1bGUgKyAnL3VzZXJpZC8nICsgRG9jQ29udGV4dC51c2VyRGF0YS51c2VySWQsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHsgbW9kdWxlOiBEb2NDb250ZXh0Lm1vZHVsZSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuRWRpdFJla3ZDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5FZGl0UmVrdkNsaWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXRobmFtZTogJy8nICsgRG9jQ29udGV4dC5tb2R1bGUgKyAnL3Jla3YvJyArIERvY0NvbnRleHQudXNlckRhdGEuYXN1dHVzSWQsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHsgbW9kdWxlOiBEb2NDb250ZXh0Lm1vZHVsZSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShpbnB1dE5hbWUsIGlucHV0VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgVVJMID0gJy9uZXdBcGkvY2hhbmdlQXN1dHVzJztcbiAgICAgICAgICAgIHZhciByZWt2SWQgPSBpbnB1dFZhbHVlOyAvLyBjaG9vc2UgYXN1dHVzSWRcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmxvZ2VkSW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vINC+0YLQv9GA0LDQstC40YLRjCDQv9C+0YHRgiDQt9Cw0L/RgNC+0YFcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsVXJsID0gVVJMICsgJy8nICsgcmVrdklkO1xuICAgICAgICAgICAgICAgIHZhciB1c2VySWQgPSB0aGlzLnN0YXRlLmxvZ2VkSW4gPyBEb2NDb250ZXh0LnVzZXJEYXRhLnVzZXJJZCA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIHV1aWQgPSB0aGlzLnN0YXRlLmxvZ2VkSW4gPyBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWQgOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogRG9jQ29udGV4dC5tb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRG9jQ29udGV4dC5kb2NUeXBlSWQsXG4gICAgICAgICAgICAgICAgICAgIHV1aWQ6IHV1aWRcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJla3ZJZDogcmVrdklkIH0pO1xuXG4gICAgICAgICAgICAgICAgZmV0Y2hEYXRhLmZldGNoRGF0YVBvc3QobG9jYWxVcmwsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgRG9jQ29udGV4dC51c2VyRGF0YSA9IE9iamVjdC5hc3NpZ24oRG9jQ29udGV4dC51c2VyRGF0YSwgcmVzcG9uc2UuY29uZmlnLmRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlZGlyZWN0IHRvIG1haW5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLmhpc3RvcnkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRobmFtZTogJy9sYXBzZWQvJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vINC/0L7Qu9GD0YfQuNGC0Ywg0Lgg0YHQvtGF0YDQsNGC0Ywg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgICAgICAgICAgLy8g0L7QsdC90L7QstC40YLRjCDRgNC10LPQuNGB0YLRgCDQtNC+0LrRg9C80LXQvdGC0L7QsiAtINC/0LXRgNC10LnRgtC4INC90LAg0LPQu9Cw0LLQvdGD0Y4g0YHRgtGA0LDQvdC40YbRg1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1lbnVUb29sQmFyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG4vKlxyXG5NZW51VG9vbEJhclxyXG4gICAgLnByb3BUeXBlcyA9IHtcclxuICAgIGVkaXRlZDogUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBwYXJhbXM6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIGxvZ2VkSW46IFByb3BUeXBlcy5ib29sXHJcbn07XHJcblxyXG5cclxuTWVudVRvb2xCYXJcclxuICAgIC5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBlZGl0ZWQ6IGZhbHNlLFxyXG4gICAgbG9nZWRJbjogZmFsc2UsXHJcbiAgICBwYXJhbXM6IHtcclxuICAgICAgICBidG5TdGFydDoge1xyXG4gICAgICAgICAgICBzaG93OiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHdpdGhSb3V0ZXIoTWVudVRvb2xCYXIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9tZW51LXRvb2xiYXIvbWVudS10b29sYmFyLmpzeFxuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBheGlvcz1yZXF1aXJlKCdheGlvcycpO2F4aW9zLmRlZmF1bHRzLmJhc2VVUkw9Jy8nO3ZhciBpc09rPWZhbHNlO21vZHVsZS5leHBvcnRzPXtmZXRjaERhdGFHZXQ6ZnVuY3Rpb24gZmV0Y2hEYXRhR2V0KHVybCl7cmV0dXJuIGF4aW9zLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzKXtyZXR1cm4gcmVzO30pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXtjb25zb2xlLmVycm9yKCdmZXRjaERhdGEgc3RhdHVzLCBlcnJvcicsZXJyb3IucmVzcG9uc2Uuc3RhdHVzLGVycm9yKTtyZXR1cm57cmVzdWx0OidlcnJvcicsc3RhdHVzOmVycm9yLnJlc3BvbnNlLnN0YXR1c307fSk7fSxmZXRjaERhdGFQb3N0OmZ1bmN0aW9uIGZldGNoRGF0YVBvc3QodXJsLHBhcmFtcyl7cmV0dXJuIGF4aW9zLnBvc3QodXJsLHBhcmFtcykuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe2NvbnNvbGUuZXJyb3IoJ2ZldGNoRGF0YSBlcnJvcicsZXJyb3IucmVzcG9uc2Uuc3RhdHVzLGVycm9yKTtyZXR1cm57cmVzdWx0OidlcnJvcicsc3RhdHVzOmVycm9yLnJlc3BvbnNlLnN0YXR1c307fSk7fSxmZXRjaERhdGFQdXQ6ZnVuY3Rpb24gZmV0Y2hEYXRhUHV0KHVybCxwYXJhbXMpe3JldHVybiBheGlvcy5wdXQodXJsLHBhcmFtcykuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe2NvbnNvbGUuZXJyb3IoJ2ZldGNoRGF0YSBlcnJvcicsZXJyb3IucmVzcG9uc2Uuc3RhdHVzLGVycm9yKTtyZXR1cm57cmVzdWx0OidlcnJvcicsc3RhdHVzOmVycm9yLnJlc3BvbnNlLnN0YXR1c307fSk7fX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9saWJzL2ZldGNoRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vbGliL2F4aW9zJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIHV0aWxzPXJlcXVpcmUoJy4vdXRpbHMnKTt2YXIgYmluZD1yZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO3ZhciBBeGlvcz1yZXF1aXJlKCcuL2NvcmUvQXhpb3MnKTt2YXIgbWVyZ2VDb25maWc9cmVxdWlyZSgnLi9jb3JlL21lcmdlQ29uZmlnJyk7dmFyIGRlZmF1bHRzPXJlcXVpcmUoJy4vZGVmYXVsdHMnKTsvKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL2Z1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpe3ZhciBjb250ZXh0PW5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTt2YXIgaW5zdGFuY2U9YmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCxjb250ZXh0KTsvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxudXRpbHMuZXh0ZW5kKGluc3RhbmNlLEF4aW9zLnByb3RvdHlwZSxjb250ZXh0KTsvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2VcbnV0aWxzLmV4dGVuZChpbnN0YW5jZSxjb250ZXh0KTtyZXR1cm4gaW5zdGFuY2U7fS8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxudmFyIGF4aW9zPWNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTsvLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zPUF4aW9zOy8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbmF4aW9zLmNyZWF0ZT1mdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpe3JldHVybiBjcmVhdGVJbnN0YW5jZShtZXJnZUNvbmZpZyhheGlvcy5kZWZhdWx0cyxpbnN0YW5jZUNvbmZpZykpO307Ly8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5heGlvcy5DYW5jZWw9cmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7YXhpb3MuQ2FuY2VsVG9rZW49cmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsVG9rZW4nKTtheGlvcy5pc0NhbmNlbD1yZXF1aXJlKCcuL2NhbmNlbC9pc0NhbmNlbCcpOy8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGw9ZnVuY3Rpb24gYWxsKHByb21pc2VzKXtyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO307YXhpb3Muc3ByZWFkPXJlcXVpcmUoJy4vaGVscGVycy9zcHJlYWQnKTttb2R1bGUuZXhwb3J0cz1heGlvczsvLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHRcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQ9YXhpb3M7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9heGlvcy5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo7fTt2YXIgYmluZD1yZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO3ZhciBpc0J1ZmZlcj1yZXF1aXJlKCdpcy1idWZmZXInKTsvKmdsb2JhbCB0b1N0cmluZzp0cnVlKi8vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xudmFyIHRvU3RyaW5nPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL2Z1bmN0aW9uIGlzQXJyYXkodmFsKXtyZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpPT09J1tvYmplY3QgQXJyYXldJzt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL2Z1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKXtyZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpPT09J1tvYmplY3QgQXJyYXlCdWZmZXJdJzt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWwpe3JldHVybiB0eXBlb2YgRm9ybURhdGEhPT0ndW5kZWZpbmVkJyYmdmFsIGluc3RhbmNlb2YgRm9ybURhdGE7fS8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL2Z1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCl7dmFyIHJlc3VsdDtpZih0eXBlb2YgQXJyYXlCdWZmZXIhPT0ndW5kZWZpbmVkJyYmQXJyYXlCdWZmZXIuaXNWaWV3KXtyZXN1bHQ9QXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7fWVsc2V7cmVzdWx0PXZhbCYmdmFsLmJ1ZmZlciYmdmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyO31yZXR1cm4gcmVzdWx0O30vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNTdHJpbmcodmFsKXtyZXR1cm4gdHlwZW9mIHZhbD09PSdzdHJpbmcnO30vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNOdW1iZXIodmFsKXtyZXR1cm4gdHlwZW9mIHZhbD09PSdudW1iZXInO30vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKXtyZXR1cm4gdHlwZW9mIHZhbD09PSd1bmRlZmluZWQnO30vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9mdW5jdGlvbiBpc09iamVjdCh2YWwpe3JldHVybiB2YWwhPT1udWxsJiYodHlwZW9mIHZhbD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YodmFsKSk9PT0nb2JqZWN0Jzt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNEYXRlKHZhbCl7cmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKT09PSdbb2JqZWN0IERhdGVdJzt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNGaWxlKHZhbCl7cmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKT09PSdbb2JqZWN0IEZpbGVdJzt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNCbG9iKHZhbCl7cmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKT09PSdbb2JqZWN0IEJsb2JdJzt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCl7cmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKT09PSdbb2JqZWN0IEZ1bmN0aW9uXSc7fS8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9mdW5jdGlvbiBpc1N0cmVhbSh2YWwpe3JldHVybiBpc09iamVjdCh2YWwpJiZpc0Z1bmN0aW9uKHZhbC5waXBlKTt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKXtyZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyE9PSd1bmRlZmluZWQnJiZ2YWwgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXM7fS8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL2Z1bmN0aW9uIHRyaW0oc3RyKXtyZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywnJykucmVwbGFjZSgvXFxzKiQvLCcnKTt9LyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuICpcbiAqIHdlYiB3b3JrZXJzOlxuICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG4gKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZFxuICpcbiAqIHJlYWN0LW5hdGl2ZTpcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnXG4gKiBuYXRpdmVzY3JpcHRcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnTmF0aXZlU2NyaXB0JyBvciAnTlMnXG4gKi9mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpe2lmKHR5cGVvZiBuYXZpZ2F0b3IhPT0ndW5kZWZpbmVkJyYmKG5hdmlnYXRvci5wcm9kdWN0PT09J1JlYWN0TmF0aXZlJ3x8bmF2aWdhdG9yLnByb2R1Y3Q9PT0nTmF0aXZlU2NyaXB0J3x8bmF2aWdhdG9yLnByb2R1Y3Q9PT0nTlMnKSl7cmV0dXJuIGZhbHNlO31yZXR1cm4gdHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnJiZ0eXBlb2YgZG9jdW1lbnQhPT0ndW5kZWZpbmVkJzt9LyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICovZnVuY3Rpb24gZm9yRWFjaChvYmosZm4pey8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuaWYob2JqPT09bnVsbHx8dHlwZW9mIG9iaj09PSd1bmRlZmluZWQnKXtyZXR1cm47fS8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuaWYoKHR5cGVvZiBvYmo9PT0ndW5kZWZpbmVkJz8ndW5kZWZpbmVkJzpfdHlwZW9mKG9iaikpIT09J29iamVjdCcpey8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL29iaj1bb2JqXTt9aWYoaXNBcnJheShvYmopKXsvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG5mb3IodmFyIGk9MCxsPW9iai5sZW5ndGg7aTxsO2krKyl7Zm4uY2FsbChudWxsLG9ialtpXSxpLG9iaik7fX1lbHNley8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuZm9yKHZhciBrZXkgaW4gb2JqKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSkpe2ZuLmNhbGwobnVsbCxvYmpba2V5XSxrZXksb2JqKTt9fX19LyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL2Z1bmN0aW9uIG1lcmdlKCkvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi97dmFyIHJlc3VsdD17fTtmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsa2V5KXtpZihfdHlwZW9mKHJlc3VsdFtrZXldKT09PSdvYmplY3QnJiYodHlwZW9mIHZhbD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YodmFsKSk9PT0nb2JqZWN0Jyl7cmVzdWx0W2tleV09bWVyZ2UocmVzdWx0W2tleV0sdmFsKTt9ZWxzZXtyZXN1bHRba2V5XT12YWw7fX1mb3IodmFyIGk9MCxsPWFyZ3VtZW50cy5sZW5ndGg7aTxsO2krKyl7Zm9yRWFjaChhcmd1bWVudHNbaV0sYXNzaWduVmFsdWUpO31yZXR1cm4gcmVzdWx0O30vKipcbiAqIEZ1bmN0aW9uIGVxdWFsIHRvIG1lcmdlIHdpdGggdGhlIGRpZmZlcmVuY2UgYmVpbmcgdGhhdCBubyByZWZlcmVuY2VcbiAqIHRvIG9yaWdpbmFsIG9iamVjdHMgaXMga2VwdC5cbiAqXG4gKiBAc2VlIG1lcmdlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovZnVuY3Rpb24gZGVlcE1lcmdlKCkvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi97dmFyIHJlc3VsdD17fTtmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsa2V5KXtpZihfdHlwZW9mKHJlc3VsdFtrZXldKT09PSdvYmplY3QnJiYodHlwZW9mIHZhbD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YodmFsKSk9PT0nb2JqZWN0Jyl7cmVzdWx0W2tleV09ZGVlcE1lcmdlKHJlc3VsdFtrZXldLHZhbCk7fWVsc2UgaWYoKHR5cGVvZiB2YWw9PT0ndW5kZWZpbmVkJz8ndW5kZWZpbmVkJzpfdHlwZW9mKHZhbCkpPT09J29iamVjdCcpe3Jlc3VsdFtrZXldPWRlZXBNZXJnZSh7fSx2YWwpO31lbHNle3Jlc3VsdFtrZXldPXZhbDt9fWZvcih2YXIgaT0wLGw9YXJndW1lbnRzLmxlbmd0aDtpPGw7aSsrKXtmb3JFYWNoKGFyZ3VtZW50c1tpXSxhc3NpZ25WYWx1ZSk7fXJldHVybiByZXN1bHQ7fS8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovZnVuY3Rpb24gZXh0ZW5kKGEsYix0aGlzQXJnKXtmb3JFYWNoKGIsZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLGtleSl7aWYodGhpc0FyZyYmdHlwZW9mIHZhbD09PSdmdW5jdGlvbicpe2Fba2V5XT1iaW5kKHZhbCx0aGlzQXJnKTt9ZWxzZXthW2tleV09dmFsO319KTtyZXR1cm4gYTt9bW9kdWxlLmV4cG9ydHM9e2lzQXJyYXk6aXNBcnJheSxpc0FycmF5QnVmZmVyOmlzQXJyYXlCdWZmZXIsaXNCdWZmZXI6aXNCdWZmZXIsaXNGb3JtRGF0YTppc0Zvcm1EYXRhLGlzQXJyYXlCdWZmZXJWaWV3OmlzQXJyYXlCdWZmZXJWaWV3LGlzU3RyaW5nOmlzU3RyaW5nLGlzTnVtYmVyOmlzTnVtYmVyLGlzT2JqZWN0OmlzT2JqZWN0LGlzVW5kZWZpbmVkOmlzVW5kZWZpbmVkLGlzRGF0ZTppc0RhdGUsaXNGaWxlOmlzRmlsZSxpc0Jsb2I6aXNCbG9iLGlzRnVuY3Rpb246aXNGdW5jdGlvbixpc1N0cmVhbTppc1N0cmVhbSxpc1VSTFNlYXJjaFBhcmFtczppc1VSTFNlYXJjaFBhcmFtcyxpc1N0YW5kYXJkQnJvd3NlckVudjppc1N0YW5kYXJkQnJvd3NlckVudixmb3JFYWNoOmZvckVhY2gsbWVyZ2U6bWVyZ2UsZGVlcE1lcmdlOmRlZXBNZXJnZSxleHRlbmQ6ZXh0ZW5kLHRyaW06dHJpbX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGJpbmQoZm4sdGhpc0FyZyl7cmV0dXJuIGZ1bmN0aW9uIHdyYXAoKXt2YXIgYXJncz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxhcmdzLmxlbmd0aDtpKyspe2FyZ3NbaV09YXJndW1lbnRzW2ldO31yZXR1cm4gZm4uYXBwbHkodGhpc0FyZyxhcmdzKTt9O307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanNcbi8vIG1vZHVsZSBpZCA9IDU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvKiFcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgYSBCdWZmZXJcbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gaXNCdWZmZXIob2JqKXtyZXR1cm4gb2JqIT1udWxsJiZvYmouY29uc3RydWN0b3IhPW51bGwmJnR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXI9PT0nZnVuY3Rpb24nJiZvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKTt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9+L2lzLWJ1ZmZlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciB1dGlscz1yZXF1aXJlKCcuLy4uL3V0aWxzJyk7dmFyIGJ1aWxkVVJMPXJlcXVpcmUoJy4uL2hlbHBlcnMvYnVpbGRVUkwnKTt2YXIgSW50ZXJjZXB0b3JNYW5hZ2VyPXJlcXVpcmUoJy4vSW50ZXJjZXB0b3JNYW5hZ2VyJyk7dmFyIGRpc3BhdGNoUmVxdWVzdD1yZXF1aXJlKCcuL2Rpc3BhdGNoUmVxdWVzdCcpO3ZhciBtZXJnZUNvbmZpZz1yZXF1aXJlKCcuL21lcmdlQ29uZmlnJyk7LyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL2Z1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKXt0aGlzLmRlZmF1bHRzPWluc3RhbmNlQ29uZmlnO3RoaXMuaW50ZXJjZXB0b3JzPXtyZXF1ZXN0Om5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxyZXNwb25zZTpuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCl9O30vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovQXhpb3MucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24gcmVxdWVzdChjb25maWcpey8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLy8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcbmlmKHR5cGVvZiBjb25maWc9PT0nc3RyaW5nJyl7Y29uZmlnPWFyZ3VtZW50c1sxXXx8e307Y29uZmlnLnVybD1hcmd1bWVudHNbMF07fWVsc2V7Y29uZmlnPWNvbmZpZ3x8e307fWNvbmZpZz1tZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLGNvbmZpZyk7Y29uZmlnLm1ldGhvZD1jb25maWcubWV0aG9kP2NvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTonZ2V0JzsvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG52YXIgY2hhaW49W2Rpc3BhdGNoUmVxdWVzdCx1bmRlZmluZWRdO3ZhciBwcm9taXNlPVByb21pc2UucmVzb2x2ZShjb25maWcpO3RoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcil7Y2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsaW50ZXJjZXB0b3IucmVqZWN0ZWQpO30pO3RoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKXtjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCxpbnRlcmNlcHRvci5yZWplY3RlZCk7fSk7d2hpbGUoY2hhaW4ubGVuZ3RoKXtwcm9taXNlPXByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLGNoYWluLnNoaWZ0KCkpO31yZXR1cm4gcHJvbWlzZTt9O0F4aW9zLnByb3RvdHlwZS5nZXRVcmk9ZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZyl7Y29uZmlnPW1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsY29uZmlnKTtyZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCxjb25maWcucGFyYW1zLGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXFw/LywnJyk7fTsvLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCdnZXQnLCdoZWFkJywnb3B0aW9ucyddLGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKXsvKmVzbGludCBmdW5jLW5hbWVzOjAqL0F4aW9zLnByb3RvdHlwZVttZXRob2RdPWZ1bmN0aW9uKHVybCxjb25maWcpe3JldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnfHx7fSx7bWV0aG9kOm1ldGhvZCx1cmw6dXJsfSkpO307fSk7dXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCdwdXQnLCdwYXRjaCddLGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2Qpey8qZXNsaW50IGZ1bmMtbmFtZXM6MCovQXhpb3MucHJvdG90eXBlW21ldGhvZF09ZnVuY3Rpb24odXJsLGRhdGEsY29uZmlnKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZ3x8e30se21ldGhvZDptZXRob2QsdXJsOnVybCxkYXRhOmRhdGF9KSk7fTt9KTttb2R1bGUuZXhwb3J0cz1BeGlvcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvQXhpb3MuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgdXRpbHM9cmVxdWlyZSgnLi8uLi91dGlscycpO2Z1bmN0aW9uIGVuY29kZSh2YWwpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5yZXBsYWNlKC8lNDAvZ2ksJ0AnKS5yZXBsYWNlKC8lM0EvZ2ksJzonKS5yZXBsYWNlKC8lMjQvZywnJCcpLnJlcGxhY2UoLyUyQy9naSwnLCcpLnJlcGxhY2UoLyUyMC9nLCcrJykucmVwbGFjZSgvJTVCL2dpLCdbJykucmVwbGFjZSgvJTVEL2dpLCddJyk7fS8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGJ1aWxkVVJMKHVybCxwYXJhbXMscGFyYW1zU2VyaWFsaXplcil7Lyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovaWYoIXBhcmFtcyl7cmV0dXJuIHVybDt9dmFyIHNlcmlhbGl6ZWRQYXJhbXM7aWYocGFyYW1zU2VyaWFsaXplcil7c2VyaWFsaXplZFBhcmFtcz1wYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7fWVsc2UgaWYodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSl7c2VyaWFsaXplZFBhcmFtcz1wYXJhbXMudG9TdHJpbmcoKTt9ZWxzZXt2YXIgcGFydHM9W107dXRpbHMuZm9yRWFjaChwYXJhbXMsZnVuY3Rpb24gc2VyaWFsaXplKHZhbCxrZXkpe2lmKHZhbD09PW51bGx8fHR5cGVvZiB2YWw9PT0ndW5kZWZpbmVkJyl7cmV0dXJuO31pZih1dGlscy5pc0FycmF5KHZhbCkpe2tleT1rZXkrJ1tdJzt9ZWxzZXt2YWw9W3ZhbF07fXV0aWxzLmZvckVhY2godmFsLGZ1bmN0aW9uIHBhcnNlVmFsdWUodil7aWYodXRpbHMuaXNEYXRlKHYpKXt2PXYudG9JU09TdHJpbmcoKTt9ZWxzZSBpZih1dGlscy5pc09iamVjdCh2KSl7dj1KU09OLnN0cmluZ2lmeSh2KTt9cGFydHMucHVzaChlbmNvZGUoa2V5KSsnPScrZW5jb2RlKHYpKTt9KTt9KTtzZXJpYWxpemVkUGFyYW1zPXBhcnRzLmpvaW4oJyYnKTt9aWYoc2VyaWFsaXplZFBhcmFtcyl7dmFyIGhhc2htYXJrSW5kZXg9dXJsLmluZGV4T2YoJyMnKTtpZihoYXNobWFya0luZGV4IT09LTEpe3VybD11cmwuc2xpY2UoMCxoYXNobWFya0luZGV4KTt9dXJsKz0odXJsLmluZGV4T2YoJz8nKT09PS0xPyc/JzonJicpK3NlcmlhbGl6ZWRQYXJhbXM7fXJldHVybiB1cmw7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgdXRpbHM9cmVxdWlyZSgnLi8uLi91dGlscycpO2Z1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpe3RoaXMuaGFuZGxlcnM9W107fS8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2U9ZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCxyZWplY3RlZCl7dGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6ZnVsZmlsbGVkLHJlamVjdGVkOnJlamVjdGVkfSk7cmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoLTE7fTsvKipcbiAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcbiAqL0ludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24gZWplY3QoaWQpe2lmKHRoaXMuaGFuZGxlcnNbaWRdKXt0aGlzLmhhbmRsZXJzW2lkXT1udWxsO319Oy8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL0ludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbiBmb3JFYWNoKGZuKXt1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCl7aWYoaCE9PW51bGwpe2ZuKGgpO319KTt9O21vZHVsZS5leHBvcnRzPUludGVyY2VwdG9yTWFuYWdlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA1OVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIHV0aWxzPXJlcXVpcmUoJy4vLi4vdXRpbHMnKTt2YXIgdHJhbnNmb3JtRGF0YT1yZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTt2YXIgaXNDYW5jZWw9cmVxdWlyZSgnLi4vY2FuY2VsL2lzQ2FuY2VsJyk7dmFyIGRlZmF1bHRzPXJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7dmFyIGlzQWJzb2x1dGVVUkw9cmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwnKTt2YXIgY29tYmluZVVSTHM9cmVxdWlyZSgnLi8uLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7LyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpe2lmKGNvbmZpZy5jYW5jZWxUb2tlbil7Y29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTt9fS8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZyl7dGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpOy8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcbmlmKGNvbmZpZy5iYXNlVVJMJiYhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSl7Y29uZmlnLnVybD1jb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCxjb25maWcudXJsKTt9Ly8gRW5zdXJlIGhlYWRlcnMgZXhpc3RcbmNvbmZpZy5oZWFkZXJzPWNvbmZpZy5oZWFkZXJzfHx7fTsvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhXG5jb25maWcuZGF0YT10cmFuc2Zvcm1EYXRhKGNvbmZpZy5kYXRhLGNvbmZpZy5oZWFkZXJzLGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTsvLyBGbGF0dGVuIGhlYWRlcnNcbmNvbmZpZy5oZWFkZXJzPXV0aWxzLm1lcmdlKGNvbmZpZy5oZWFkZXJzLmNvbW1vbnx8e30sY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF18fHt9LGNvbmZpZy5oZWFkZXJzfHx7fSk7dXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsJ2dldCcsJ2hlYWQnLCdwb3N0JywncHV0JywncGF0Y2gnLCdjb21tb24nXSxmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2Qpe2RlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO30pO3ZhciBhZGFwdGVyPWNvbmZpZy5hZGFwdGVyfHxkZWZhdWx0cy5hZGFwdGVyO3JldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKXt0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7Ly8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbnJlc3BvbnNlLmRhdGE9dHJhbnNmb3JtRGF0YShyZXNwb25zZS5kYXRhLHJlc3BvbnNlLmhlYWRlcnMsY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlKTtyZXR1cm4gcmVzcG9uc2U7fSxmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKXtpZighaXNDYW5jZWwocmVhc29uKSl7dGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpOy8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG5pZihyZWFzb24mJnJlYXNvbi5yZXNwb25zZSl7cmVhc29uLnJlc3BvbnNlLmRhdGE9dHJhbnNmb3JtRGF0YShyZWFzb24ucmVzcG9uc2UuZGF0YSxyZWFzb24ucmVzcG9uc2UuaGVhZGVycyxjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpO319cmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7fSk7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIHV0aWxzPXJlcXVpcmUoJy4vLi4vdXRpbHMnKTsvKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsaGVhZGVycyxmbnMpey8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL3V0aWxzLmZvckVhY2goZm5zLGZ1bmN0aW9uIHRyYW5zZm9ybShmbil7ZGF0YT1mbihkYXRhLGhlYWRlcnMpO30pO3JldHVybiBkYXRhO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSl7cmV0dXJuISEodmFsdWUmJnZhbHVlLl9fQ0FOQ0VMX18pO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgdXRpbHM9cmVxdWlyZSgnLi91dGlscycpO3ZhciBub3JtYWxpemVIZWFkZXJOYW1lPXJlcXVpcmUoJy4vaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lJyk7dmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFPXsnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ307ZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsdmFsdWUpe2lmKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSYmdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKXtoZWFkZXJzWydDb250ZW50LVR5cGUnXT12YWx1ZTt9fWZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCl7dmFyIGFkYXB0ZXI7Ly8gT25seSBOb2RlLkpTIGhhcyBhIHByb2Nlc3MgdmFyaWFibGUgdGhhdCBpcyBvZiBbW0NsYXNzXV0gcHJvY2Vzc1xuaWYodHlwZW9mIHByb2Nlc3MhPT0ndW5kZWZpbmVkJyYmT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpPT09J1tvYmplY3QgcHJvY2Vzc10nKXsvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG5hZGFwdGVyPXJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO31lbHNlIGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCE9PSd1bmRlZmluZWQnKXsvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG5hZGFwdGVyPXJlcXVpcmUoJy4vYWRhcHRlcnMveGhyJyk7fXJldHVybiBhZGFwdGVyO312YXIgZGVmYXVsdHM9e2FkYXB0ZXI6Z2V0RGVmYXVsdEFkYXB0ZXIoKSx0cmFuc2Zvcm1SZXF1ZXN0OltmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsaGVhZGVycyl7bm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCdBY2NlcHQnKTtub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsJ0NvbnRlbnQtVHlwZScpO2lmKHV0aWxzLmlzRm9ybURhdGEoZGF0YSl8fHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSl8fHV0aWxzLmlzQnVmZmVyKGRhdGEpfHx1dGlscy5pc1N0cmVhbShkYXRhKXx8dXRpbHMuaXNGaWxlKGRhdGEpfHx1dGlscy5pc0Jsb2IoZGF0YSkpe3JldHVybiBkYXRhO31pZih1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSl7cmV0dXJuIGRhdGEuYnVmZmVyO31pZih1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSl7c2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7cmV0dXJuIGRhdGEudG9TdHJpbmcoKTt9aWYodXRpbHMuaXNPYmplY3QoZGF0YSkpe3NldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnKTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7fXJldHVybiBkYXRhO31dLHRyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKXsvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9pZih0eXBlb2YgZGF0YT09PSdzdHJpbmcnKXt0cnl7ZGF0YT1KU09OLnBhcnNlKGRhdGEpO31jYXRjaChlKXsvKiBJZ25vcmUgKi99fXJldHVybiBkYXRhO31dLC8qKlxuICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcbiAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cbiAgICovdGltZW91dDowLHhzcmZDb29raWVOYW1lOidYU1JGLVRPS0VOJyx4c3JmSGVhZGVyTmFtZTonWC1YU1JGLVRPS0VOJyxtYXhDb250ZW50TGVuZ3RoOi0xLHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cyl7cmV0dXJuIHN0YXR1cz49MjAwJiZzdGF0dXM8MzAwO319O2RlZmF1bHRzLmhlYWRlcnM9e2NvbW1vbjp7J0FjY2VwdCc6J2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKid9fTt1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywnZ2V0JywnaGVhZCddLGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKXtkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF09e307fSk7dXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCdwdXQnLCdwYXRjaCddLGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2Qpe2RlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXT11dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7fSk7bW9kdWxlLmV4cG9ydHM9ZGVmYXVsdHM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciB1dGlscz1yZXF1aXJlKCcuLi91dGlscycpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycyxub3JtYWxpemVkTmFtZSl7dXRpbHMuZm9yRWFjaChoZWFkZXJzLGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsbmFtZSl7aWYobmFtZSE9PW5vcm1hbGl6ZWROYW1lJiZuYW1lLnRvVXBwZXJDYXNlKCk9PT1ub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKXtoZWFkZXJzW25vcm1hbGl6ZWROYW1lXT12YWx1ZTtkZWxldGUgaGVhZGVyc1tuYW1lXTt9fSk7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZS5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciB1dGlscz1yZXF1aXJlKCcuLy4uL3V0aWxzJyk7dmFyIHNldHRsZT1yZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7dmFyIGJ1aWxkVVJMPXJlcXVpcmUoJy4vLi4vaGVscGVycy9idWlsZFVSTCcpO3ZhciBwYXJzZUhlYWRlcnM9cmVxdWlyZSgnLi8uLi9oZWxwZXJzL3BhcnNlSGVhZGVycycpO3ZhciBpc1VSTFNhbWVPcmlnaW49cmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO3ZhciBjcmVhdGVFcnJvcj1yZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSxyZWplY3Qpe3ZhciByZXF1ZXN0RGF0YT1jb25maWcuZGF0YTt2YXIgcmVxdWVzdEhlYWRlcnM9Y29uZmlnLmhlYWRlcnM7aWYodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpe2RlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107Ly8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxufXZhciByZXF1ZXN0PW5ldyBYTUxIdHRwUmVxdWVzdCgpOy8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbmlmKGNvbmZpZy5hdXRoKXt2YXIgdXNlcm5hbWU9Y29uZmlnLmF1dGgudXNlcm5hbWV8fCcnO3ZhciBwYXNzd29yZD1jb25maWcuYXV0aC5wYXNzd29yZHx8Jyc7cmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbj0nQmFzaWMgJytidG9hKHVzZXJuYW1lKyc6JytwYXNzd29yZCk7fXJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksYnVpbGRVUkwoY29uZmlnLnVybCxjb25maWcucGFyYW1zLGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSx0cnVlKTsvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xucmVxdWVzdC50aW1lb3V0PWNvbmZpZy50aW1lb3V0Oy8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGVcbnJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uIGhhbmRsZUxvYWQoKXtpZighcmVxdWVzdHx8cmVxdWVzdC5yZWFkeVN0YXRlIT09NCl7cmV0dXJuO30vLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbi8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkXG4vLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuaWYocmVxdWVzdC5zdGF0dXM9PT0wJiYhKHJlcXVlc3QucmVzcG9uc2VVUkwmJnJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKT09PTApKXtyZXR1cm47fS8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG52YXIgcmVzcG9uc2VIZWFkZXJzPSdnZXRBbGxSZXNwb25zZUhlYWRlcnMnaW4gcmVxdWVzdD9wYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk6bnVsbDt2YXIgcmVzcG9uc2VEYXRhPSFjb25maWcucmVzcG9uc2VUeXBlfHxjb25maWcucmVzcG9uc2VUeXBlPT09J3RleHQnP3JlcXVlc3QucmVzcG9uc2VUZXh0OnJlcXVlc3QucmVzcG9uc2U7dmFyIHJlc3BvbnNlPXtkYXRhOnJlc3BvbnNlRGF0YSxzdGF0dXM6cmVxdWVzdC5zdGF0dXMsc3RhdHVzVGV4dDpyZXF1ZXN0LnN0YXR1c1RleHQsaGVhZGVyczpyZXNwb25zZUhlYWRlcnMsY29uZmlnOmNvbmZpZyxyZXF1ZXN0OnJlcXVlc3R9O3NldHRsZShyZXNvbHZlLHJlamVjdCxyZXNwb25zZSk7Ly8gQ2xlYW4gdXAgcmVxdWVzdFxucmVxdWVzdD1udWxsO307Ly8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxucmVxdWVzdC5vbmFib3J0PWZ1bmN0aW9uIGhhbmRsZUFib3J0KCl7aWYoIXJlcXVlc3Qpe3JldHVybjt9cmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLGNvbmZpZywnRUNPTk5BQk9SVEVEJyxyZXF1ZXN0KSk7Ly8gQ2xlYW4gdXAgcmVxdWVzdFxucmVxdWVzdD1udWxsO307Ly8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xucmVxdWVzdC5vbmVycm9yPWZ1bmN0aW9uIGhhbmRsZUVycm9yKCl7Ly8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4vLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbnJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsY29uZmlnLG51bGwscmVxdWVzdCkpOy8vIENsZWFuIHVwIHJlcXVlc3RcbnJlcXVlc3Q9bnVsbDt9Oy8vIEhhbmRsZSB0aW1lb3V0XG5yZXF1ZXN0Lm9udGltZW91dD1mdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCl7cmVqZWN0KGNyZWF0ZUVycm9yKCd0aW1lb3V0IG9mICcrY29uZmlnLnRpbWVvdXQrJ21zIGV4Y2VlZGVkJyxjb25maWcsJ0VDT05OQUJPUlRFRCcscmVxdWVzdCkpOy8vIENsZWFuIHVwIHJlcXVlc3RcbnJlcXVlc3Q9bnVsbDt9Oy8vIEFkZCB4c3JmIGhlYWRlclxuLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4vLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuaWYodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIGNvb2tpZXM9cmVxdWlyZSgnLi8uLi9oZWxwZXJzL2Nvb2tpZXMnKTsvLyBBZGQgeHNyZiBoZWFkZXJcbnZhciB4c3JmVmFsdWU9KGNvbmZpZy53aXRoQ3JlZGVudGlhbHN8fGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkmJmNvbmZpZy54c3JmQ29va2llTmFtZT9jb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKTp1bmRlZmluZWQ7aWYoeHNyZlZhbHVlKXtyZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdPXhzcmZWYWx1ZTt9fS8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG5pZignc2V0UmVxdWVzdEhlYWRlcidpbiByZXF1ZXN0KXt1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLGtleSl7aWYodHlwZW9mIHJlcXVlc3REYXRhPT09J3VuZGVmaW5lZCcmJmtleS50b0xvd2VyQ2FzZSgpPT09J2NvbnRlbnQtdHlwZScpey8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbmRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO31lbHNley8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG5yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LHZhbCk7fX0pO30vLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG5pZihjb25maWcud2l0aENyZWRlbnRpYWxzKXtyZXF1ZXN0LndpdGhDcmVkZW50aWFscz10cnVlO30vLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG5pZihjb25maWcucmVzcG9uc2VUeXBlKXt0cnl7cmVxdWVzdC5yZXNwb25zZVR5cGU9Y29uZmlnLnJlc3BvbnNlVHlwZTt9Y2F0Y2goZSl7Ly8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cbmlmKGNvbmZpZy5yZXNwb25zZVR5cGUhPT0nanNvbicpe3Rocm93IGU7fX19Ly8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuaWYodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3M9PT0nZnVuY3Rpb24nKXtyZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJyxjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTt9Ly8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbmlmKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcz09PSdmdW5jdGlvbicmJnJlcXVlc3QudXBsb2FkKXtyZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO31pZihjb25maWcuY2FuY2VsVG9rZW4pey8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbmNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpe2lmKCFyZXF1ZXN0KXtyZXR1cm47fXJlcXVlc3QuYWJvcnQoKTtyZWplY3QoY2FuY2VsKTsvLyBDbGVhbiB1cCByZXF1ZXN0XG5yZXF1ZXN0PW51bGw7fSk7fWlmKHJlcXVlc3REYXRhPT09dW5kZWZpbmVkKXtyZXF1ZXN0RGF0YT1udWxsO30vLyBTZW5kIHRoZSByZXF1ZXN0XG5yZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO30pO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9hZGFwdGVycy94aHIuanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgY3JlYXRlRXJyb3I9cmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpOy8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSxyZWplY3QscmVzcG9uc2Upe3ZhciB2YWxpZGF0ZVN0YXR1cz1yZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7aWYoIXZhbGlkYXRlU3RhdHVzfHx2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKXtyZXNvbHZlKHJlc3BvbnNlKTt9ZWxzZXtyZWplY3QoY3JlYXRlRXJyb3IoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJytyZXNwb25zZS5zdGF0dXMscmVzcG9uc2UuY29uZmlnLG51bGwscmVzcG9uc2UucmVxdWVzdCxyZXNwb25zZSkpO319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9zZXR0bGUuanNcbi8vIG1vZHVsZSBpZCA9IDY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgZW5oYW5jZUVycm9yPXJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7LyoqXG4gKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLGNvbmZpZyxjb2RlLHJlcXVlc3QscmVzcG9uc2Upe3ZhciBlcnJvcj1uZXcgRXJyb3IobWVzc2FnZSk7cmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvcixjb25maWcsY29kZSxyZXF1ZXN0LHJlc3BvbnNlKTt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9jcmVhdGVFcnJvci5qc1xuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnOy8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGVuaGFuY2VFcnJvcihlcnJvcixjb25maWcsY29kZSxyZXF1ZXN0LHJlc3BvbnNlKXtlcnJvci5jb25maWc9Y29uZmlnO2lmKGNvZGUpe2Vycm9yLmNvZGU9Y29kZTt9ZXJyb3IucmVxdWVzdD1yZXF1ZXN0O2Vycm9yLnJlc3BvbnNlPXJlc3BvbnNlO2Vycm9yLmlzQXhpb3NFcnJvcj10cnVlO2Vycm9yLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnsvLyBTdGFuZGFyZFxubWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsLy8gTWljcm9zb2Z0XG5kZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLG51bWJlcjp0aGlzLm51bWJlciwvLyBNb3ppbGxhXG5maWxlTmFtZTp0aGlzLmZpbGVOYW1lLGxpbmVOdW1iZXI6dGhpcy5saW5lTnVtYmVyLGNvbHVtbk51bWJlcjp0aGlzLmNvbHVtbk51bWJlcixzdGFjazp0aGlzLnN0YWNrLC8vIEF4aW9zXG5jb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGV9O307cmV0dXJuIGVycm9yO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciB1dGlscz1yZXF1aXJlKCcuLy4uL3V0aWxzJyk7Ly8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZj1bJ2FnZScsJ2F1dGhvcml6YXRpb24nLCdjb250ZW50LWxlbmd0aCcsJ2NvbnRlbnQtdHlwZScsJ2V0YWcnLCdleHBpcmVzJywnZnJvbScsJ2hvc3QnLCdpZi1tb2RpZmllZC1zaW5jZScsJ2lmLXVubW9kaWZpZWQtc2luY2UnLCdsYXN0LW1vZGlmaWVkJywnbG9jYXRpb24nLCdtYXgtZm9yd2FyZHMnLCdwcm94eS1hdXRob3JpemF0aW9uJywncmVmZXJlcicsJ3JldHJ5LWFmdGVyJywndXNlci1hZ2VudCddOy8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycyl7dmFyIHBhcnNlZD17fTt2YXIga2V5O3ZhciB2YWw7dmFyIGk7aWYoIWhlYWRlcnMpe3JldHVybiBwYXJzZWQ7fXV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksZnVuY3Rpb24gcGFyc2VyKGxpbmUpe2k9bGluZS5pbmRleE9mKCc6Jyk7a2V5PXV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCxpKSkudG9Mb3dlckNhc2UoKTt2YWw9dXRpbHMudHJpbShsaW5lLnN1YnN0cihpKzEpKTtpZihrZXkpe2lmKHBhcnNlZFtrZXldJiZpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSk+PTApe3JldHVybjt9aWYoa2V5PT09J3NldC1jb29raWUnKXtwYXJzZWRba2V5XT0ocGFyc2VkW2tleV0/cGFyc2VkW2tleV06W10pLmNvbmNhdChbdmFsXSk7fWVsc2V7cGFyc2VkW2tleV09cGFyc2VkW2tleV0/cGFyc2VkW2tleV0rJywgJyt2YWw6dmFsO319fSk7cmV0dXJuIHBhcnNlZDt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgdXRpbHM9cmVxdWlyZSgnLi8uLi91dGlscycpO21vZHVsZS5leHBvcnRzPXV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/Ly8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4vLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbmZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpe3ZhciBtc2llPS8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7dmFyIHVybFBhcnNpbmdOb2RlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTt2YXIgb3JpZ2luVVJMOy8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL2Z1bmN0aW9uIHJlc29sdmVVUkwodXJsKXt2YXIgaHJlZj11cmw7aWYobXNpZSl7Ly8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xudXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJyxocmVmKTtocmVmPXVybFBhcnNpbmdOb2RlLmhyZWY7fXVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsaHJlZik7Ly8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xucmV0dXJue2hyZWY6dXJsUGFyc2luZ05vZGUuaHJlZixwcm90b2NvbDp1cmxQYXJzaW5nTm9kZS5wcm90b2NvbD91cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sJycpOicnLGhvc3Q6dXJsUGFyc2luZ05vZGUuaG9zdCxzZWFyY2g6dXJsUGFyc2luZ05vZGUuc2VhcmNoP3VybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywnJyk6JycsaGFzaDp1cmxQYXJzaW5nTm9kZS5oYXNoP3VybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCcnKTonJyxob3N0bmFtZTp1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxwb3J0OnVybFBhcnNpbmdOb2RlLnBvcnQscGF0aG5hbWU6dXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApPT09Jy8nP3VybFBhcnNpbmdOb2RlLnBhdGhuYW1lOicvJyt1cmxQYXJzaW5nTm9kZS5wYXRobmFtZX07fW9yaWdpblVSTD1yZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9yZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpe3ZhciBwYXJzZWQ9dXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCk/cmVzb2x2ZVVSTChyZXF1ZXN0VVJMKTpyZXF1ZXN0VVJMO3JldHVybiBwYXJzZWQucHJvdG9jb2w9PT1vcmlnaW5VUkwucHJvdG9jb2wmJnBhcnNlZC5ob3N0PT09b3JpZ2luVVJMLmhvc3Q7fTt9KCk6Ly8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbmZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpe3JldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKXtyZXR1cm4gdHJ1ZTt9O30oKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIHV0aWxzPXJlcXVpcmUoJy4vLi4vdXRpbHMnKTttb2R1bGUuZXhwb3J0cz11dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpPy8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCl7cmV0dXJue3dyaXRlOmZ1bmN0aW9uIHdyaXRlKG5hbWUsdmFsdWUsZXhwaXJlcyxwYXRoLGRvbWFpbixzZWN1cmUpe3ZhciBjb29raWU9W107Y29va2llLnB1c2gobmFtZSsnPScrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7aWYodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpe2Nvb2tpZS5wdXNoKCdleHBpcmVzPScrbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7fWlmKHV0aWxzLmlzU3RyaW5nKHBhdGgpKXtjb29raWUucHVzaCgncGF0aD0nK3BhdGgpO31pZih1dGlscy5pc1N0cmluZyhkb21haW4pKXtjb29raWUucHVzaCgnZG9tYWluPScrZG9tYWluKTt9aWYoc2VjdXJlPT09dHJ1ZSl7Y29va2llLnB1c2goJ3NlY3VyZScpO31kb2N1bWVudC5jb29raWU9Y29va2llLmpvaW4oJzsgJyk7fSxyZWFkOmZ1bmN0aW9uIHJlYWQobmFtZSl7dmFyIG1hdGNoPWRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnK25hbWUrJyk9KFteO10qKScpKTtyZXR1cm4gbWF0Y2g/ZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKTpudWxsO30scmVtb3ZlOmZ1bmN0aW9uIHJlbW92ZShuYW1lKXt0aGlzLndyaXRlKG5hbWUsJycsRGF0ZS5ub3coKS04NjQwMDAwMCk7fX07fSgpOi8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbmZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpe3JldHVybnt3cml0ZTpmdW5jdGlvbiB3cml0ZSgpe30scmVhZDpmdW5jdGlvbiByZWFkKCl7cmV0dXJuIG51bGw7fSxyZW1vdmU6ZnVuY3Rpb24gcmVtb3ZlKCl7fX07fSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7LyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpey8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbi8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG5yZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qc1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnOy8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcbiAqL21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwscmVsYXRpdmVVUkwpe3JldHVybiByZWxhdGl2ZVVSTD9iYXNlVVJMLnJlcGxhY2UoL1xcLyskLywnJykrJy8nK3JlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywnJyk6YmFzZVVSTDt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciB1dGlscz1yZXF1aXJlKCcuLi91dGlscycpOy8qKlxuICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdFxuICogYnkgbWVyZ2luZyB0d28gY29uZmlndXJhdGlvbiBvYmplY3RzIHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMlxuICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMVxuICovbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gbWVyZ2VDb25maWcoY29uZmlnMSxjb25maWcyKXsvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbmNvbmZpZzI9Y29uZmlnMnx8e307dmFyIGNvbmZpZz17fTt1dGlscy5mb3JFYWNoKFsndXJsJywnbWV0aG9kJywncGFyYW1zJywnZGF0YSddLGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCl7aWYodHlwZW9mIGNvbmZpZzJbcHJvcF0hPT0ndW5kZWZpbmVkJyl7Y29uZmlnW3Byb3BdPWNvbmZpZzJbcHJvcF07fX0pO3V0aWxzLmZvckVhY2goWydoZWFkZXJzJywnYXV0aCcsJ3Byb3h5J10sZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKXtpZih1dGlscy5pc09iamVjdChjb25maWcyW3Byb3BdKSl7Y29uZmlnW3Byb3BdPXV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdLGNvbmZpZzJbcHJvcF0pO31lbHNlIGlmKHR5cGVvZiBjb25maWcyW3Byb3BdIT09J3VuZGVmaW5lZCcpe2NvbmZpZ1twcm9wXT1jb25maWcyW3Byb3BdO31lbHNlIGlmKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzFbcHJvcF0pKXtjb25maWdbcHJvcF09dXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0pO31lbHNlIGlmKHR5cGVvZiBjb25maWcxW3Byb3BdIT09J3VuZGVmaW5lZCcpe2NvbmZpZ1twcm9wXT1jb25maWcxW3Byb3BdO319KTt1dGlscy5mb3JFYWNoKFsnYmFzZVVSTCcsJ3RyYW5zZm9ybVJlcXVlc3QnLCd0cmFuc2Zvcm1SZXNwb25zZScsJ3BhcmFtc1NlcmlhbGl6ZXInLCd0aW1lb3V0Jywnd2l0aENyZWRlbnRpYWxzJywnYWRhcHRlcicsJ3Jlc3BvbnNlVHlwZScsJ3hzcmZDb29raWVOYW1lJywneHNyZkhlYWRlck5hbWUnLCdvblVwbG9hZFByb2dyZXNzJywnb25Eb3dubG9hZFByb2dyZXNzJywnbWF4Q29udGVudExlbmd0aCcsJ3ZhbGlkYXRlU3RhdHVzJywnbWF4UmVkaXJlY3RzJywnaHR0cEFnZW50JywnaHR0cHNBZ2VudCcsJ2NhbmNlbFRva2VuJywnc29ja2V0UGF0aCddLGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCl7aWYodHlwZW9mIGNvbmZpZzJbcHJvcF0hPT0ndW5kZWZpbmVkJyl7Y29uZmlnW3Byb3BdPWNvbmZpZzJbcHJvcF07fWVsc2UgaWYodHlwZW9mIGNvbmZpZzFbcHJvcF0hPT0ndW5kZWZpbmVkJyl7Y29uZmlnW3Byb3BdPWNvbmZpZzFbcHJvcF07fX0pO3JldHVybiBjb25maWc7fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2Upe3RoaXMubWVzc2FnZT1tZXNzYWdlO31DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uIHRvU3RyaW5nKCl7cmV0dXJuJ0NhbmNlbCcrKHRoaXMubWVzc2FnZT8nOiAnK3RoaXMubWVzc2FnZTonJyk7fTtDYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX189dHJ1ZTttb2R1bGUuZXhwb3J0cz1DYW5jZWw7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIENhbmNlbD1yZXF1aXJlKCcuL0NhbmNlbCcpOy8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL2Z1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKXtpZih0eXBlb2YgZXhlY3V0b3IhPT0nZnVuY3Rpb24nKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7fXZhciByZXNvbHZlUHJvbWlzZTt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpe3Jlc29sdmVQcm9taXNlPXJlc29sdmU7fSk7dmFyIHRva2VuPXRoaXM7ZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2Upe2lmKHRva2VuLnJlYXNvbil7Ly8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG5yZXR1cm47fXRva2VuLnJlYXNvbj1uZXcgQ2FuY2VsKG1lc3NhZ2UpO3Jlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7fSk7fS8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL0NhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkPWZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKXtpZih0aGlzLnJlYXNvbil7dGhyb3cgdGhpcy5yZWFzb247fX07LyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovQ2FuY2VsVG9rZW4uc291cmNlPWZ1bmN0aW9uIHNvdXJjZSgpe3ZhciBjYW5jZWw7dmFyIHRva2VuPW5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKXtjYW5jZWw9Yzt9KTtyZXR1cm57dG9rZW46dG9rZW4sY2FuY2VsOmNhbmNlbH07fTttb2R1bGUuZXhwb3J0cz1DYW5jZWxUb2tlbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnOy8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKXtyZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpe3JldHVybiBjYWxsYmFjay5hcHBseShudWxsLGFycik7fTt9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi90b29sYmFyLWNvbnRhaW5lci1zdHlsZXMnKSxcbiAgICBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBUb29sQmFyQ29udGFpbmVyID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoVG9vbEJhckNvbnRhaW5lciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udGFpbmVyKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb29sQmFyQ29udGFpbmVyKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRvb2xCYXJDb250YWluZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUb29sQmFyQ29udGFpbmVyKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhUb29sQmFyQ29udGFpbmVyLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGVzLnRvb2xCYXJDb250YWluZXJTdHlsZSwgc3R5bGVzW3RoaXMucHJvcHMucG9zaXRpb25dKTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgaWQ6ICd0b29sQmFyQ29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAndG9vbEJhckNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSB9LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVG9vbEJhckNvbnRhaW5lcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuVG9vbEJhckNvbnRhaW5lci5wcm9wVHlwZXMgPSB7XG4gICAgcG9zaXRpb246IFByb3BUeXBlcy5zdHJpbmdcbn07XG5cblRvb2xCYXJDb250YWluZXIuZGVmYXVsdFByb3BzID0ge1xuICAgIHBvc2l0aW9uOiAncmlnaHQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvb2xCYXJDb250YWluZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3Rvb2xiYXItY29udGFpbmVyL3Rvb2xiYXItY29udGFpbmVyLmpzeFxuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXt0b29sQmFyQ29udGFpbmVyU3R5bGU6e2Rpc3BsYXk6J2ZsZXgnLHdpZHRoOicxMDAlJyxoZWlnaHQ6J0F1dG8nLG1hcmdpbkJvdHRvbTonNXB4JyxtYXJnaW5IZWlnaHQ6JzVweCcsYm9yZGVyUmFkaXVzOic1cHgnfSxyaWdodDp7anVzdGlmeUNvbnRlbnQ6J2ZsZXgtZW5kJ30sbGVmdDp7anVzdGlmeUNvbnRlbnQ6J2ZsZXgtc3RhcnQnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3Rvb2xiYXItY29udGFpbmVyL3Rvb2xiYXItY29udGFpbmVyLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gNzlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcycpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBJQ09OID0gJ3N0YXJ0JztcblxudmFyIEJ1dHRvblJlZ2lzdGVyU3RhcnQgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uUmVnaXN0ZXJTdGFydCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgLy8g0LrQvdC+0L/QutCwINGB0L7Qt9C00LDQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwINCyINGA0LXQs9C40YHRgtGA0LDRhVxuICAgIGZ1bmN0aW9uIEJ1dHRvblJlZ2lzdGVyU3RhcnQocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblJlZ2lzdGVyU3RhcnQpO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uUmVnaXN0ZXJTdGFydC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvblJlZ2lzdGVyU3RhcnQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblJlZ2lzdGVyU3RhcnQsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2soJ3N0YXJ0Jyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5TdGFydCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuYnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVnaXN0ZXJTdGFydDtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbkJ1dHRvblJlZ2lzdGVyU3RhcnQuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblJlZ2lzdGVyU3RhcnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItc3RhcnQvYnV0dG9uLXJlZ2lzdGVyLXN0YXJ0LmpzeFxuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtidXR0b246e2JhY2tncm91bmQ6J3doaXRlJyxtYXJnaW46JzVweCAycHgnLGJvcmRlclJhZGl1czonNXB4JyxoZWlnaHQ6JzMwcHgnLGRpc3BsYXk6J2ZsZXgnLGJvcmRlcjonMXB4IHNvbGlkIGdyYXknfSxidXR0b25BY2NvdW50Ont3aWR0aDonNTAlJ30sYnV0dG9uTG9naW46e3dpZHRoOic1MCUnfSxidXR0b25FZGl0OntkaXNwbGF5OidmbGV4J30saWNvbnM6e2FkZDonL2ltYWdlcy9pY29ucy9hZGQucG5nJyxlZGl0OicvaW1hZ2VzL2ljb25zL2VkaXQucG5nJyxkZWxldGU6Jy9pbWFnZXMvaWNvbnMvZGVsZXRlLnBuZycsZmlsdGVyOicvaW1hZ2VzL2ljb25zL2ZpbHRlci5wbmcnLHByaW50OicvaW1hZ2VzL2ljb25zL3ByaW50LnBuZycsb2s6Jy9pbWFnZXMvaWNvbnMvb2sucG5nJyxjYW5jZWw6Jy9pbWFnZXMvaWNvbnMvY2FuY2VsLnBuZycsc2F2ZTonL2ltYWdlcy9pY29ucy9zYXZlLnBuZycsZXhlY3V0ZTonL2ltYWdlcy9pY29ucy9leGVjdXRlLnBuZycsc3RhcnQ6Jy9pbWFnZXMvaWNvbnMvc3RhcnQucG5nJyxsb2dpbjonL2ltYWdlcy9pY29ucy9sb2dpbi5wbmcnLGFjY291bnQ6Jy9pbWFnZXMvaWNvbnMvYWNjb3VudC5wbmcnLHJla3Y6Jy9pbWFnZXMvaWNvbnMvcmVrdi5wbmcnLGluZm86Jy9pbWFnZXMvaWNvbnMvaW5mby5wbmcnLHNldHRpbmdzOicvaW1hZ2VzL2ljb25zL3NldHRpbmdzLnBuZycsbWFpbDonL2ltYWdlcy9pY29ucy9tYWlsLnBuZycsc2VsZWN0OicvaW1hZ2VzL2ljb25zL3NlbGVjdC5wbmcnLHJlZnJlc2g6Jy9pbWFnZXMvaWNvbnMvcmVmcmVzaC5wbmcnLGF0dGFjaG1lbnQ6Jy9pbWFnZXMvaWNvbnMvYXR0YWNobWVudC5wbmcnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBzdHlsZXMgPSByZXF1aXJlKCcuL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKTtcblxudmFyIEJ1dHRvbiA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b24sIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b24ocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvbik7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvbikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IF90aGlzLmhhbmRsZUNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRpc2FibGVkOiBfdGhpcy5wcm9wcy5kaXNhYmxlZFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2xpY2sodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RibGNsaWNrJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKHRoaXMucHJvcHMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndW5oYW5kbGVkJywgZXZlbnQudHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAvLyB2aXNpYmlsaXR5XG4gICAgICAgICAgICB2YXIgdmlzaWJpbGl0eSA9IHRoaXMucHJvcHMuc2hvdyA/ICdpbml0aWFsJyA6ICdoaWRkZW4nO1xuXG4gICAgICAgICAgICB2YXIgcHJvcFN0eWxlID0gJ3N0eWxlJyBpbiB0aGlzLnByb3BzID8gdGhpcy5wcm9wcy5zdHlsZSA6IHt9LFxuICAgICAgICAgICAgICAgIHN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGVzLmJ1dHRvbiwgcHJvcFN0eWxlLCB7IHZpc2liaWxpdHk6IHZpc2liaWxpdHkgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgb25Eb3VibGVDbGljazogdGhpcy5oYW5kbGVDbGljayxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDbGljayB9LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy52YWx1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLmRpc2FibGVkICE9PSBwcmV2U3RhdGUuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXNhYmxlZDogbmV4dFByb3BzLmRpc2FibGVkIH07XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uLnByb3BUeXBlcyA9IHtcbiAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgc3R5bGU6IFByb3BUeXBlcy5vYmplY3Rcbn07XG5cbkJ1dHRvbi5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLmpzeFxuLy8gbW9kdWxlIGlkID0gODJcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcycpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBJQ09OID0gJ2xvZ2luJztcblxudmFyIEJ1dHRvbkxvZ2luID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvbkxvZ2luLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uTG9naW4ocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvbkxvZ2luKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uTG9naW4uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25Mb2dpbikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSB8fCAnU2lzc2UnXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8vIHdpbGwgdXBkYXRlIHN0YXRlIGlmIHByb3BzIGNoYW5nZWRcblxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvbkxvZ2luLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCdsb2dpbicpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuc3RhdGUudmFsdWU7XG4gICAgICAgICAgICB2YXIgYnV0dG9uU3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMuYnV0dG9uLCBzdHlsZXMuYnV0dG9uTG9naW4pO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkxvZ2luJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGJ1dHRvblN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy52YWx1ZSAhPT0gcHJldlN0YXRlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvbkxvZ2luO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uTG9naW4ucHJvcFR5cGVzID0ge1xuICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmdcbn07XG5cbkJ1dHRvbkxvZ2luLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc2hvdzogdHJ1ZSxcbiAgICB2YWx1ZTogJ1bDpGxqdSdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uTG9naW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tbG9naW4vYnV0dG9uLWxvZ2luLmpzeFxuLy8gbW9kdWxlIGlkID0gODNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcycpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBJQ09OID0gJ2VkaXQnO1xuXG52YXIgQnV0dG9uUmVnaXN0ZXJFZGl0ID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvblJlZ2lzdGVyRWRpdCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgLy8g0LrQvdC+0L/QutCwINGB0L7Qt9C00LDQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwINCyINGA0LXQs9C40YHRgtGA0LDRhVxuICAgIGZ1bmN0aW9uIEJ1dHRvblJlZ2lzdGVyRWRpdChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uUmVnaXN0ZXJFZGl0KTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uUmVnaXN0ZXJFZGl0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnV0dG9uUmVnaXN0ZXJFZGl0KSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZGlzYWJsZWQ6IF90aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uUmVnaXN0ZXJFZGl0LCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKHRoaXMucHJvcHMudmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBidG5TdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5idXR0b25FZGl0LCB0aGlzLnByb3BzLnN0eWxlID8gdGhpcy5wcm9wcy5zdHlsZSA6IHt9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkVkaXQnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogYnRuU3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMuc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5oYW5kbGVDbGljayhlKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgcmVmOiAnaW1hZ2UnLCBzcmM6IHN0eWxlcy5pY29uc1tJQ09OXSB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLmRpc2FibGVkICE9PSBwcmV2U3RhdGUuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXNhYmxlZDogbmV4dFByb3BzLmRpc2FibGVkIH07XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVnaXN0ZXJFZGl0O1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuLypcclxuQnV0dG9uUmVnaXN0ZXJFZGl0LnByb3BUeXBlcyA9IHtcclxuICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcclxufVxyXG4qL1xuXG5CdXR0b25SZWdpc3RlckVkaXQuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlLFxuICAgIHZhbHVlOiAnRWRpdCdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uUmVnaXN0ZXJFZGl0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWVkaXQvYnV0dG9uLXJlZ2lzdGVyLWVkaXQuanN4XG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnaW5mbyc7XG5cbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9kb2MtY29udGV4dC5qcycpO1xuXG52YXIgQnV0dG9uSW5mbyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvbkluZm8sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgLy8g0LrQvdC+0L/QutCwINGB0L7Qt9C00LDQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwINCyINGA0LXQs9C40YHRgtGA0LDRhVxuICAgIGZ1bmN0aW9uIEJ1dHRvbkluZm8ocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvbkluZm8pO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCdXR0b25JbmZvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnV0dG9uSW5mbykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IF90aGlzLmhhbmRsZUNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQuiwg0L7RgtC60YDQvtC10YIg0LzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+XHJcbiAgICAgKiBAcGFyYW0gZVxyXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b25JbmZvLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcbiAgICAgICAgICAgIHZhciBkb2NUeXBlSWQgPSB0aGlzLnByb3BzLmRvY1R5cGVJZCA/IHRoaXMucHJvcHMuZG9jVHlwZUlkIDogRG9jQ29udGV4dC5kb2NUeXBlSWQ7XG4gICAgICAgICAgICB2YXIgdXJsID0gJy9oZWxwLycgKyBkb2NUeXBlSWQ7XG4gICAgICAgICAgICB3aW5kb3cub3BlbignJyArIHVybCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIEJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuSW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMuc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDbGljayB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvbkluZm87XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbi8qXHJcbkJ1dHRvblJlZ2lzdGVyUHJpbnQucHJvcFR5cGVzID0ge1xyXG4gICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxyXG59XHJcbiovXG5cbkJ1dHRvbkluZm8uZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlLFxuICAgIHZhbHVlOiAnJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25JbmZvO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLWluZm8vaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSA4NVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vc3RhcnQtbWVudS5zdHlsZXMnKSxcbiAgICBfZmV0Y2hEYXRhID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2ZldGNoRGF0YScpLFxuICAgIFRyZWVMaXN0ID0gcmVxdWlyZSgnLi8uLi90cmVlL3RyZWUuanN4Jyk7XG5cbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi9kb2MtY29udGV4dC5qcycpO1xuXG52YXIgVVJMID0gJy9uZXdBcGkvc3RhcnRNZW51JztcblxudmFyIFN0YXJ0TWVudSA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhTdGFydE1lbnUsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIFN0YXJ0TWVudShwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RhcnRNZW51KTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU3RhcnRNZW51Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU3RhcnRNZW51KSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMudHJlZURhdGEgPSBwcm9wcy5kYXRhO1xuICAgICAgICBfdGhpcy5jbGlja0hhbmRsZXIgPSBfdGhpcy5jbGlja0hhbmRsZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmZldGNoRGF0YSA9IF90aGlzLmZldGNoRGF0YS5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICog0L/QuNGI0LXQvCDQtNC10LvQsNC10Lwg0LfQsNC/0YDQvtGBINC/0L4g0LjRgtC+0LPRgyDQt9Cw0LPRgNGD0LfQutC4XHJcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKFN0YXJ0TWVudSwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHJlZURhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy/QtNC10LvQsNC10Lwg0LfQsNC/0YDQvtGBINC90LAg0L/QvtC70YPRh9C10L3QuNC1INC00LDQvdC90YvRhVxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuY29udGFpbmVyIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUcmVlTGlzdCwgeyByZWY6ICd0cmVlTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudWwsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMudHJlZURhdGEsXG4gICAgICAgICAgICAgICAgICAgIGJpbmREYXRhRmllbGQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tBY3Rpb246IHRoaXMuY2xpY2tIYW5kbGVyXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NsaWNrSGFuZGxlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoYWN0aW9uLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY2xpY2tIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY2xpY2tIYW5kbGVyKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCS0YvQv9C+0LvQvdC40YIg0LfQsNC/0YDQvtGB0YtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmV0Y2hEYXRhJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoRGF0YShwcm9wcykge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBVUkwgKyAoJy8nICsgRG9jQ29udGV4dC5tb2R1bGUpO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHsgdXNlcklkOiBEb2NDb250ZXh0LnVzZXJEYXRhLnVzZXJJZCwgdXVpZDogRG9jQ29udGV4dC51c2VyRGF0YS51dWlkIH07XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gd2lsbCBjaGVjayBpbiBjYWNoZVxuICAgICAgICAgICAgICAgIGlmICghRG9jQ29udGV4dFsnbWVudSddIHx8IERvY0NvbnRleHRbJ21lbnUnXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgX2ZldGNoRGF0YS5mZXRjaERhdGFQb3N0KHVybCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgNDAxLCByZWRpcmVjdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gJy9sb2dpbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi50cmVlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQt9Cw0L/QvtC80L3QuNC8INGB0L7QtNC10YDQttC40LzQvtC1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jQ29udGV4dC5tZW51ID0gX3RoaXMyLnRyZWVEYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3JlY2VpdmVkIGVycm9yLT4gJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSAnL2xvZ2luJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YSA9IERvY0NvbnRleHRbJ21lbnUnXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFN0YXJ0TWVudTtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cblN0YXJ0TWVudS5wcm9wVHlwZXMgPSB7XG4gICAgZGF0YTogUHJvcFR5cGVzLmFycmF5XG59O1xuXG5TdGFydE1lbnUuZGVmYXVsdFByb3BzID0ge1xuICAgIGRhdGE6IFtdXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXJ0TWVudTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvc3RhcnQtbWVudS9zdGFydC1tZW51LmpzeFxuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtjb250YWluZXI6e3dpZHRoOidhdXRvJyxtaW5IZWlnaHQ6JzM1MHB4Jyxwb3NpdGlvbjonYWJzb2x1dGUnLGxlZnQ6JzIwcHgnLG92ZXJmbG93OidhdXRvJyx6SW5kZXg6Jzk5OTk5OSd9LHVsOntvdmVyZmxvdzonYXV0byd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvc3RhcnQtbWVudS9zdGFydC1tZW51LnN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gODdcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi90cmVlLXN0eWxlcy5qcycpO1xuXG52YXIgVHJlZSA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhUcmVlLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBUcmVlKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmVlKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVHJlZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRyZWUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpbmRleDogX3RoaXMuZ2V0SW5kZXgocHJvcHMudmFsdWUpLFxuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICAgICAgaG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgcGFyZW50SWQ6ICdkb2N1bWVudCdcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuaGFuZGxlTGlDbGljayA9IF90aGlzLmhhbmRsZUxpQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnRvZ2dsZUhvdmVyID0gX3RoaXMudG9nZ2xlSG92ZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFRyZWUgPSBfdGhpcy5nZXRUcmVlLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFRyZWUsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgICAgICAgICB0aGlzLmdldEluZGV4KG5leHRQcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW5kZXg6IHRoaXMuZ2V0SW5kZXgobmV4dFByb3BzLnZhbHVlKSwgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5kYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyByZWY6ICd0cmVlJyB9LFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VHJlZSgnMCcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60LvQuNC60LBcclxuICAgICAgICAgKiBAcGFyYW0gc2VsZWN0ZWRJbmRleFxyXG4gICAgICAgICAqIEBwYXJhbSBzZWxlY3RlZElkXHJcbiAgICAgICAgICogQHBhcmFtIGlzTm9kZVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVMaUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUxpQ2xpY2soc2VsZWN0ZWRJbmRleCwgc2VsZWN0ZWRJZCwgaXNOb2RlKSB7XG4gICAgICAgICAgICBpZiAoIWlzTm9kZSAmJiAhaXNOYU4oc2VsZWN0ZWRJZCkpIHtcbiAgICAgICAgICAgICAgICAvLyDQvdC1INC90L7QtNCwLCDQsCDQtNC+0LrRg9C80LXQvdGCXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnByb3BzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5pZCA9PT0gc2VsZWN0ZWRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGFbMF1bdGhpcy5wcm9wcy5iaW5kRGF0YUZpZWxkXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBpbmRleDogc2VsZWN0ZWRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25DbGlja0FjdGlvbih0aGlzLnByb3BzLm5hbWUgKyAnQ2hhbmdlJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9pc05vZGVcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJZCAhPT0gJzAnICYmIHNlbGVjdGVkSWQgIT09ICdMYXBzZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwYXJlbnRJZDogc2VsZWN0ZWRJZCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQstC10YDQvdC10YIg0LTQsNC90L3Ri9C1INC00LvRjyDQvdC+0LTRiyA9IHBhcmVudElkXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmVudElkXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldENoaWxkcmVuJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENoaWxkcmVuKHBhcmVudElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5kYXRhLmZpbHRlcihmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5wYXJlbnRpZCA9PSBwYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J/QvtGB0YLRgNC+0LXRgiDQtNC10YDQtdCy0L4g0LTQu9GPINC90L7QtNGLID0gcGFyZW50SWRcclxuICAgICAgICAgKiBAcGFyYW0gcGFyZW50SWRcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRUcmVlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyZWUocGFyZW50SWQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0Q2hpbGRyZW4ocGFyZW50SWQpLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZTtcblxuICAgICAgICAgICAgdmFyIGxpbmtTdHlsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmhvdmVyKSB7XG4gICAgICAgICAgICAgICAgbGlua1N0eWxlID0geyBiYWNrZ3JvdW5kQ29sb3I6ICdyZWQnIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmtTdHlsZSA9IHsgYmFja2dyb3VuZENvbG9yOiAnYmx1ZScgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGVzLnVsLCB0aGlzLnByb3BzLnN0eWxlID8gdGhpcy5wcm9wcy5zdHlsZSA6IHt9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3VsJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAndHJlZS11bCcgfSxcbiAgICAgICAgICAgICAgICBkYXRhLm1hcChmdW5jdGlvbiAoc3ViUm93LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMubGksIHZhbHVlID09PSBzdWJSb3dbX3RoaXMyLnByb3BzLmJpbmREYXRhRmllbGRdICYmICFzdWJSb3cuaXNfbm9kZSA/IHN0eWxlcy5mb2N1c2VkIDoge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmSWQgPSAnbGktJyArIGluZGV4ICsgTWF0aC5yYW5kb20oKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXNfaGlkZGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJSb3cuaXNfbm9kZSAmJiBfdGhpczIuc3RhdGUucGFyZW50SWQgIT09IHN1YlJvdy5wYXJlbnRpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNfaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2xpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHN1YlJvdy5pc19ub2RlID8gJ25vZGUnIDogJ21lbnUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpczIuaGFuZGxlTGlDbGljay5iaW5kKF90aGlzMiwgaW5kZXgsIHN1YlJvdy5pZCwgc3ViUm93LmlzX25vZGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogcmVmSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN1YlJvdy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW46IGlzX2hpZGRlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IHJlZklkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJSb3cuaXNfbm9kZSA/IF90aGlzMi5zdGF0ZS5wYXJlbnRJZCA9PSBzdWJSb3cuaWQgPyAnLScgOiAnKycgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW3N1YlJvdy5rb29kLnRvTG93ZXJDYXNlKCldIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViUm93Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuZ2V0VHJlZShzdWJSb3cuaWQpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RvZ2dsZUhvdmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZUhvdmVyKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiAhdGhpcy5zdGF0ZS5ob3ZlciB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCS0LXRgNC90LXRgiDQuNC90LTQtdC60YEg0YHRgtGA0L7QutC4INCz0LTQtSDQt9Cw0LTQsNC90L3QvtC1INC/0L7Qu9C1INC40LzQtdC10YIg0LfQvdCw0YfQtdC90LjQtSB2YWx1ZVxyXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEluZGV4JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluZGV4KHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdHJlZUluZGV4ID0gMDtcbiAgICAgICAgICAgIC8vIHdlIGdvdCB2YWx1ZSwgd2Ugc2hvdWxkIGZpbmQgaW5kZXggYW5kIGluaXRpbGl6ZSBpZHggZmllbGRcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpKys7IGkgPCB0aGlzLnByb3BzLmRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZGF0YVswXS5kYXRhW2ldW3RoaXMucHJvcHMuYmluZERhdGFGaWVsZF0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmVlSW5kZXg7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVHJlZTtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cblRyZWUucHJvcFR5cGVzID0ge1xuICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGRhdGE6IFByb3BUeXBlcy5hcnJheSxcbiAgICBiaW5kRGF0YUZpZWxkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cblRyZWUuZGVmYXVsdFByb3BzID0ge1xuICAgIGRhdGE6IFt7XG4gICAgICAgIGlkOiAwLFxuICAgICAgICBwYXJlbnRJZDogMCxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGtvb2Q6ICcnLFxuICAgICAgICBzZWxlY3RlZDogZmFsc2VcbiAgICB9XSxcbiAgICB2YWx1ZTogbnVsbCxcbiAgICBiaW5kRGF0YUZpZWxkOiAnaWQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyZWU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3RyZWUvdHJlZS5qc3hcbi8vIG1vZHVsZSBpZCA9IDg4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17dWw6e2JhY2tncm91bmRDb2xvcjond2hpdGUnLC8vICAgICAgICBtYXJnaW5SaWdodDogJzIwcHgnLFxucGFkZGluZ0xlZnQ6JzE1cHgnLGRpc3BsYXk6J3RhYmxlLXJvdy1ncm91cCcsd2lkdGg6J2F1dG8nfSxsaTp7Ly8gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbm1hcmdpblJpZ2h0OicyMHB4JyxtYXJnaW46JzEwcHggMTBweCd9LGljb25zOntfbGFwczonL2ltYWdlcy9pY29ucy9sYXBzLnBuZycsX3ZhbmVtOicvaW1hZ2VzL2ljb25zL3ZhbmVtLnBuZycsc2V0dGluZ3M6Jy9pbWFnZXMvaWNvbnMvc2V0dGluZ3MucG5nJyxfcmVrdjonL2ltYWdlcy9pY29ucy9yZWt2LnBuZycsYXJ1YW5uZTonL2ltYWdlcy9pY29ucy9yZXBvcnRzLnBuZycsX2xhcHNlX2thYXJ0OicvaW1hZ2VzL2ljb25zL3NlcnZpY2VzLnBuZycsbGlicmFyeTonL2ltYWdlcy9pY29ucy9saWJyYXJpZXMucG5nJyxfYXN1dHVzZWQ6Jy9pbWFnZXMvaWNvbnMvY29udGFjdHMucG5nJyxfbm9tZW5jbGF0dXJlOicvaW1hZ2VzL2ljb25zL25vbWVuY2xhdHVyZS5wbmcnLF9sYXBzZV9ncnVwcDonL2ltYWdlcy9pY29ucy9ncm91cHMucG5nJyxfbGFwc2VfdGFhYmVsOicvaW1hZ2VzL2ljb25zL2pvdXJuYWwucG5nJyxfdHVubnVzOicvaW1hZ2VzL2ljb25zL2F0cmlidXRlLnBuZycsZG9jdW1lbnQ6Jy9pbWFnZXMvaWNvbnMvZG9jdW1lbnRzLnBuZycsX2FydjonL2ltYWdlcy9pY29ucy9iaWxsLnBuZycsX3NvcmRlcjonL2ltYWdlcy9pY29ucy9zb3JkZXIucG5nJyxfc21rOicvaW1hZ2VzL2ljb25zL3Ntay5wbmcnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3RyZWUvdHJlZS1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIHJhZGl1bSA9IHJlcXVpcmUoJ3JhZGl1bScpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vc2VsZWN0LXN0eWxlcycpO1xuXG52YXIgSW5kZXggPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoSW5kZXgsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIEluZGV4KHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbmRleCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEluZGV4Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSW5kZXgpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMudmFsdWUgPyBwcm9wcy52YWx1ZSA6IDAgLyog0LfQtNC10YHRjCDQv9C+INC30L3QsNGH0LXQvdC40Y4g0JjQlCAqL1xuICAgICAgICAgICAgLCByZWFkT25seTogcHJvcHMucmVhZE9ubHksXG4gICAgICAgICAgICBkaXNhYmxlZDogcHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgICBmaWVsZFZhbHVlOiBwcm9wcy5kZWZhdWx0VmFsdWUgPyBwcm9wcy5kZWZhdWx0VmFsdWUgOiAnJyAvKtC30LTQtdGB0Ywg0L/QviDQt9C90LDRh9C10L3QuCDQv9C+0LvRjyBjb2xsSWQgKi9cbiAgICAgICAgICAgICwgYnRuRGVsZXRlOiBwcm9wcy5idG5EZWxldGUgLyog0LXRgdC70Lgg0LjRgdGC0LjQvdGDLCDRgtC+INGA0LjRgdGD0LXQvCDRgNGP0LTQvtC8INC60L3QvtC/0LrRgyDQtNC70Y8g0L7Rh9C40YHRgtC60Lgg0LfQvdCw0YfQtdC90LjRjyovXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMub25DaGFuZ2UgPSBfdGhpcy5vbkNoYW5nZS5iaW5kKF90aGlzKTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiDQv9GA0LjQstGP0LbQtdGCINC6INC30L3QsNGH0LXQvdGOINC/0L7Qu9GPXHJcbiAgICAgKiBAcGFyYW0gZGF0YSAtINC60L7Qu9C70LXQutGG0LjRj1xyXG4gICAgICogQHBhcmFtIGNvbGxJZCAtINC/0L7Qu9C1XHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSDQt9C90LDRh9C10L3QuNC1XHJcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKEluZGV4LCBbe1xuICAgICAgICBrZXk6ICdmaW5kRmllbGRWYWx1ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRmllbGRWYWx1ZShkYXRhLCBjb2xsSWQsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgLy8g0L3QsNC00L4g0L/RgNC40LLRj9C30LDRgtGMINC00LDQvdC90YvQtVxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAocm93W2NvbGxJZF0gPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsgdmFsdWU6IHJvd1tjb2xsSWRdLCBmaWVsZFZhbHVlOiByb3dbY29sbElkXSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGNvbGxJZFxyXG4gICAgICAgICAqIEBwYXJhbSByb3dJZFxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRWYWx1ZUJ5SWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWVCeUlkKGNvbGxJZCwgcm93SWQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyDQstC10YDQvdC10YIg0LfQvdCw0YfQtdC90LjRjyDQv9C+0LvRjyDQv9C+INCy0YvQsdGA0LDQvdC90L7QvNGDINCY0JRcblxuICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMucHJvcHMuZGF0YTtcblxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAocm93W2NvbGxJZF0gPT0gcm93SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IHJvd1tjb2xsSWRdO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoeyBmaWVsZFZhbHVlOiBmaWVsZFZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmllbGRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdpbGwgdXBkYXRlIHN0YXRlIGlmIHByb3BzIGNoYW5nZWRcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jb2xsSWQgJiYgdGhpcy5wcm9wcy5jb2xsSWQgIT09ICdpZCcpIHtcbiAgICAgICAgICAgICAgICAvLyDQuNGJ0LXQvCDQmNCUINC/0L4g0LfQvdCw0YfQtdC90LjRjiDQv9C+0LvRj1xuICAgICAgICAgICAgICAgIHRoaXMuZmluZEZpZWxkVmFsdWUodGhpcy5wcm9wcy5kYXRhLCB0aGlzLnByb3BzLmNvbGxJZCwgdGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlID09ICcnKSB7XG4gICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNvbGxJZCkge1xuICAgICAgICAgICAgICAgIC8vINC90LDQudC00LXQvCDQv9C+INC40LQg0LfQvdCw0YfQtdC90LjQtSDQv9C+0LvRjyDQsiBjb2xsSWRcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gdGhpcy5nZXRWYWx1ZUJ5SWQodGhpcy5wcm9wcy5jb2xsSWQsIGZpZWxkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g0YHQvtGF0YDQsNC90LjQvCDQuNC0INC60LDQuiB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiBlLnRhcmdldC52YWx1ZSwgZmllbGRWYWx1ZTogZmllbGRWYWx1ZSB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAvLyDRgdC80L7RgtGA0LjQvCDQuiDRh9C10LzRgyDQv9GA0LjQstGP0LfQsNC9INGB0LXQu9C10LrRgiDQuCDQvtGC0LTQsNC40Lwg0LXQs9C+INC90LDQstC10YDRhVxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy5uYW1lLCBmaWVsZFZhbHVlKTsgLy8g0LIg0YHQu9GD0YfQsNC1INC10YHQu9C4INC30LDQtNCw0L0g0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCDQstC10YDRhdC90LXQvCDRg9GA0L7QstC90LUsINC+0YLQtNCw0LTQuNC8INC+0LHRgNCw0LHQvtGC0LrRgyDRgtGD0LTQsFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0UmVhZE9ubHkgPSB0aGlzLnN0YXRlLnJlYWRPbmx5IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlucHV0RGVmYXVsdFZhbHVlID0gdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgPyB0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZSA6IHRoaXMucHJvcHMudmFsdWUgfHwgJyc7IC8vINCU0LDQtNC40Lwg0LTQtdGE0L7Qu9GC0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LTQu9GPINCy0LjQtNC20LXRgtCwLCDRh9GC0L7QsSDQv9C+0LrQsNGC0Ywg0LXQs9C+INGB0YDQsNC30YMsINC00L4g0L/QvtC00LPRgNGD0LfQutC4INCx0LjQsdC70LjQvtGC0LXQutC4XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vINC00L7QsdCw0LLQuNC8INC/0YPRgdGC0YPRjiDRgdGC0YDQvtC60YMg0LIg0LzQsNGB0YHQuNCyXG5cbiAgICAgICAgICAgICAgICAvLyDQv9GA0L7QstC10YDQuNC8INC90LDQu9C40YfQuNC1INC/0YPRgdGC0L7QuSDRgdGC0YDQvtC60Lgg0LIg0LzQsNGB0YHQuNCy0LVcbiAgICAgICAgICAgICAgICB2YXIgZW1wdHlPYmogPSB0aGlzLnByb3BzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5pZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2VsZWN0U3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMuc2VsZWN0LCBpbnB1dFJlYWRPbmx5ID8gc3R5bGVzLmhpZGUgOiB7fSwgaW5wdXRSZWFkT25seSA/IHN0eWxlcy5yZWFkT25seSA6IHt9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgeyByZWY6ICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogc2VsZWN0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnZhbHVlIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnByb3BzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlIH0sXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYWlyZURhdGFPcHRpb25zKClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQn9C+0LTQs9C+0YLQvtCy0LjRgiDQtNCw0YLQsNGB0LXRgiDQtNC70Y8g0YHQtdC70LXQutGC0LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHJlcGFpcmVEYXRhT3B0aW9ucycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYWlyZURhdGFPcHRpb25zKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnByb3BzLmRhdGEubGVuZ3RoID8gdGhpcy5wcm9wcy5kYXRhIDogW107XG5cbiAgICAgICAgICAgIC8vICAgICAgICBkYXRhLnVuc2hpZnQoe2lkOjAsIGtvb2Q6JycsIG5hbWU6Jyd9KTtcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGRhdGEubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJ29wdGlvbi0nICsgaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSAnICc7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dWYWx1ZSA9IChpdGVtLmtvb2QgPyBpdGVtLmtvb2QgOiAnJykgKyAnICcgKyBzZXBhcmF0b3IgKyAnICcgKyBpdGVtLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF90aGlzNC5wcm9wcy5kYXRhLmxlbmd0aCA/IGl0ZW1bX3RoaXM0LnByb3BzLmNvbGxJZF0gOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjoga2V5IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dWYWx1ZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gUmVhY3QuY3JlYXRlRWxlbWVudCgnb3B0aW9uJywgeyB2YWx1ZTogMCwga2V5OiBNYXRoLnJhbmRvbSgpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDRg9GB0YLQsNC90L7QstC40YIg0YTQvtC60YPRgSDQvdCwINGN0LvQtdC80LXQvdGC0YtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZm9jdXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnNbJ3NlbGVjdCddLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuXG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLnZhbHVlICE9PSBwcmV2U3RhdGUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbmV4dFByb3BzLnZhbHVlIH07XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gSW5kZXg7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5JbmRleC5wcm9wVHlwZXMgPSB7XG4gICAgZGF0YTogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgaWQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgICAgIGtvb2Q6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIG5pbWV0dXM6IFByb3BUeXBlcy5zdHJpbmdcbiAgICB9KSksXG4gICAgcmVhZE9ubHk6IFByb3BUeXBlcy5ib29sLFxuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBidG5EZWxldGU6IFByb3BUeXBlcy5ib29sLFxuICAgIGxpYnM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY29sbElkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZGVmYXVsdFZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5JbmRleC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICB2YWxpZDogdHJ1ZSxcbiAgICBidG5EZWxldGU6IGZhbHNlLFxuICAgIGNvbGxJZDogJ2lkJyxcbiAgICB0aXRsZTogJycsXG4gICAgZGVmYXVsdFZhbHVlOiAnJyxcbiAgICBkYXRhOiBbeyBpZDogMCwga29vZDogJycsIG5pbWV0dXM6ICcnIH1dXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJhZGl1bShJbmRleCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3NlbGVjdC1yZWt2L2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXJlcXVpcmUoJy4vbGliJykuZGVmYXVsdDttb2R1bGUuZXhwb3J0cy5kZWZhdWx0PW1vZHVsZS5leHBvcnRzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJQbHVnaW5zXCIse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIF9wbHVnaW5zW1wiZGVmYXVsdFwiXTt9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJTdHlsZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBfc3R5bGVbXCJkZWZhdWx0XCJdO319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIlN0eWxlUm9vdFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBfc3R5bGVSb290W1wiZGVmYXVsdFwiXTt9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJnZXRTdGF0ZVwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBfZ2V0U3RhdGVbXCJkZWZhdWx0XCJdO319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcImtleWZyYW1lc1wiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBfa2V5ZnJhbWVzW1wiZGVmYXVsdFwiXTt9fSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO3ZhciBfZW5oYW5jZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9lbmhhbmNlclwiKSk7dmFyIF9wbHVnaW5zPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcGx1Z2luc1wiKSk7dmFyIF9zdHlsZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3R5bGVcIikpO3ZhciBfc3R5bGVSb290PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY29tcG9uZW50cy9zdHlsZS1yb290XCIpKTt2YXIgX2dldFN0YXRlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vZ2V0LXN0YXRlXCIpKTt2YXIgX2tleWZyYW1lcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2tleWZyYW1lc1wiKSk7dmFyIF9yZXNvbHZlU3R5bGVzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcmVzb2x2ZS1zdHlsZXNcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e1wiZGVmYXVsdFwiOm9ian07fWZ1bmN0aW9uIFJhZGl1bShDb21wb3NlZENvbXBvbmVudCl7cmV0dXJuKDAsX2VuaGFuY2VyW1wiZGVmYXVsdFwiXSkoQ29tcG9zZWRDb21wb25lbnQpO30vLyBMZWdhY3kgb2JqZWN0IHN1cHBvcnQuXG4vL1xuLy8gTm9ybWFsbHkgaXQgd291bGQgYmUgZGlzZmF2b3JlZCB0byBhdHRhY2ggdGhlc2UgdG8gdGhlIGBSYWRpdW1gIG9iamVjdFxuLy8gYmVjYXVzZSBpdCBkZWZlYXRzIHRyZWUtc2hha2luZywgdXNpbmcgaW5zdGVhZCB0aGUgRVNNIGV4cG9ydHMuIEJ1dCxcbi8vIHRoZSBgUmFkaXVtYCBgRW5oYW5jZXJgIHVzZXMgKiphbGwqKiBvZiB0aGVzZSwgc28gdGhlcmUncyBubyBleHRyYSBcImNvc3RcIlxuLy8gdG8gdGhlbSBiZWluZyBleHBsaWNpdGx5IG9uIHRoZSBgUmFkaXVtYCBvYmplY3QuXG5SYWRpdW0uUGx1Z2lucz1fcGx1Z2luc1tcImRlZmF1bHRcIl07UmFkaXVtLlN0eWxlPV9zdHlsZVtcImRlZmF1bHRcIl07UmFkaXVtLlN0eWxlUm9vdD1fc3R5bGVSb290W1wiZGVmYXVsdFwiXTtSYWRpdW0uZ2V0U3RhdGU9X2dldFN0YXRlW1wiZGVmYXVsdFwiXTtSYWRpdW0ua2V5ZnJhbWVzPV9rZXlmcmFtZXNbXCJkZWZhdWx0XCJdO2lmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXtSYWRpdW0uVGVzdE1vZGU9e2NsZWFyU3RhdGU6X3Jlc29sdmVTdHlsZXNbXCJkZWZhdWx0XCJdLl9fY2xlYXJTdGF0ZUZvclRlc3RzLGRpc2FibGU6X3Jlc29sdmVTdHlsZXNbXCJkZWZhdWx0XCJdLl9fc2V0VGVzdE1vZGUuYmluZChudWxsLGZhbHNlKSxlbmFibGU6X3Jlc29sdmVTdHlsZXNbXCJkZWZhdWx0XCJdLl9fc2V0VGVzdE1vZGUuYmluZChudWxsLHRydWUpfTt9dmFyIF9kZWZhdWx0PVJhZGl1bTsvLyBFU00gcmUtZXhwb3J0c1xuZXhwb3J0c1tcImRlZmF1bHRcIl09X2RlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO3ZhciBfdHlwZW9mMj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1lbmhhbmNlV2l0aFJhZGl1bTt2YXIgX3JlYWN0PV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7dmFyIF9wcm9wVHlwZXM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicHJvcC10eXBlc1wiKSk7dmFyIF9ob2lzdE5vblJlYWN0U3RhdGljcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJob2lzdC1ub24tcmVhY3Qtc3RhdGljc1wiKSk7dmFyIF9yZXNvbHZlU3R5bGVzMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Jlc29sdmUtc3R5bGVzXCIpKTt2YXIgX2dldFJhZGl1bVN0eWxlU3RhdGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9nZXQtcmFkaXVtLXN0eWxlLXN0YXRlXCIpKTt2YXIgX2NvbnRleHQ9cmVxdWlyZShcIi4vY29udGV4dFwiKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O31mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmope2lmKG9iaiYmb2JqLl9fZXNNb2R1bGUpe3JldHVybiBvYmo7fWVsc2V7dmFyIG5ld09iaj17fTtpZihvYmohPW51bGwpe2Zvcih2YXIga2V5IGluIG9iail7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixrZXkpKXt2YXIgZGVzYz1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosa2V5KTp7fTtpZihkZXNjLmdldHx8ZGVzYy5zZXQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosa2V5LGRlc2MpO31lbHNle25ld09ialtrZXldPW9ialtrZXldO319fX1uZXdPYmpbXCJkZWZhdWx0XCJdPW9iajtyZXR1cm4gbmV3T2JqO319ZnVuY3Rpb24gX3R5cGVvZihvYmope2lmKHR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJl90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcik9PT1cInN5bWJvbFwiKXtfdHlwZW9mPWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307fWVsc2V7X3R5cGVvZj1mdW5jdGlvbiBfdHlwZW9mKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307fXJldHVybiBfdHlwZW9mKG9iaik7fWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTt9fWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKFwidmFsdWVcImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZixjYWxsKXtpZihjYWxsJiYoX3R5cGVvZihjYWxsKT09PVwib2JqZWN0XCJ8fHR5cGVvZiBjYWxsPT09XCJmdW5jdGlvblwiKSl7cmV0dXJuIGNhbGw7fXJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpO31mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpe2lmKHNlbGY9PT12b2lkIDApe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTt9cmV0dXJuIHNlbGY7fWZ1bmN0aW9uIF9nZXQodGFyZ2V0LHByb3BlcnR5LHJlY2VpdmVyKXtpZih0eXBlb2YgUmVmbGVjdCE9PVwidW5kZWZpbmVkXCImJlJlZmxlY3QuZ2V0KXtfZ2V0PVJlZmxlY3QuZ2V0O31lbHNle19nZXQ9ZnVuY3Rpb24gX2dldCh0YXJnZXQscHJvcGVydHkscmVjZWl2ZXIpe3ZhciBiYXNlPV9zdXBlclByb3BCYXNlKHRhcmdldCxwcm9wZXJ0eSk7aWYoIWJhc2UpcmV0dXJuO3ZhciBkZXNjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSxwcm9wZXJ0eSk7aWYoZGVzYy5nZXQpe3JldHVybiBkZXNjLmdldC5jYWxsKHJlY2VpdmVyKTt9cmV0dXJuIGRlc2MudmFsdWU7fTt9cmV0dXJuIF9nZXQodGFyZ2V0LHByb3BlcnR5LHJlY2VpdmVyfHx0YXJnZXQpO31mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QscHJvcGVydHkpe3doaWxlKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5KSl7b2JqZWN0PV9nZXRQcm90b3R5cGVPZihvYmplY3QpO2lmKG9iamVjdD09PW51bGwpYnJlYWs7fXJldHVybiBvYmplY3Q7fWZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKXtfZ2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobyl7cmV0dXJuIG8uX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7fTtyZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO31mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3Msc3VwZXJDbGFzcyl7aWYodHlwZW9mIHN1cGVyQ2xhc3MhPT1cImZ1bmN0aW9uXCImJnN1cGVyQ2xhc3MhPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7fXN1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MmJnN1cGVyQ2xhc3MucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6c3ViQ2xhc3Msd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KTtpZihzdXBlckNsYXNzKV9zZXRQcm90b3R5cGVPZihzdWJDbGFzcyxzdXBlckNsYXNzKTt9ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8scCl7X3NldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8scCl7by5fX3Byb3RvX189cDtyZXR1cm4gbzt9O3JldHVybiBfc2V0UHJvdG90eXBlT2YobyxwKTt9ZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLGkpe3JldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKXx8X2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFycixpKXx8X25vbkl0ZXJhYmxlUmVzdCgpO31mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7fWZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsaSl7dmFyIF9hcnI9W107dmFyIF9uPXRydWU7dmFyIF9kPWZhbHNlO3ZhciBfZT11bmRlZmluZWQ7dHJ5e2Zvcih2YXIgX2k9YXJyW1N5bWJvbC5pdGVyYXRvcl0oKSxfczshKF9uPShfcz1faS5uZXh0KCkpLmRvbmUpO19uPXRydWUpe19hcnIucHVzaChfcy52YWx1ZSk7aWYoaSYmX2Fyci5sZW5ndGg9PT1pKWJyZWFrO319Y2F0Y2goZXJyKXtfZD10cnVlO19lPWVycjt9ZmluYWxseXt0cnl7aWYoIV9uJiZfaVtcInJldHVyblwiXSE9bnVsbClfaVtcInJldHVyblwiXSgpO31maW5hbGx5e2lmKF9kKXRocm93IF9lO319cmV0dXJuIF9hcnI7fWZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpe2lmKEFycmF5LmlzQXJyYXkoYXJyKSlyZXR1cm4gYXJyO31mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9b3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pO30pO31yZXR1cm4gdGFyZ2V0O31mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fXJldHVybiBvYmo7fWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsZXhjbHVkZWQpe2lmKHNvdXJjZT09bnVsbClyZXR1cm57fTt2YXIgdGFyZ2V0PV9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSxleGNsdWRlZCk7dmFyIGtleSxpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBzb3VyY2VTeW1ib2xLZXlzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtmb3IoaT0wO2k8c291cmNlU3ltYm9sS2V5cy5sZW5ndGg7aSsrKXtrZXk9c291cmNlU3ltYm9sS2V5c1tpXTtpZihleGNsdWRlZC5pbmRleE9mKGtleSk+PTApY29udGludWU7aWYoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2Usa2V5KSljb250aW51ZTt0YXJnZXRba2V5XT1zb3VyY2Vba2V5XTt9fXJldHVybiB0YXJnZXQ7fWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSxleGNsdWRlZCl7aWYoc291cmNlPT1udWxsKXJldHVybnt9O3ZhciB0YXJnZXQ9e307dmFyIHNvdXJjZUtleXM9T2JqZWN0LmtleXMoc291cmNlKTt2YXIga2V5LGk7Zm9yKGk9MDtpPHNvdXJjZUtleXMubGVuZ3RoO2krKyl7a2V5PXNvdXJjZUtleXNbaV07aWYoZXhjbHVkZWQuaW5kZXhPZihrZXkpPj0wKWNvbnRpbnVlO3RhcmdldFtrZXldPXNvdXJjZVtrZXldO31yZXR1cm4gdGFyZ2V0O31mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpe3ZhciBrZXk9X3RvUHJpbWl0aXZlKGFyZyxcInN0cmluZ1wiKTtyZXR1cm4gX3R5cGVvZihrZXkpPT09XCJzeW1ib2xcIj9rZXk6U3RyaW5nKGtleSk7fWZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCxoaW50KXtpZihfdHlwZW9mKGlucHV0KSE9PVwib2JqZWN0XCJ8fGlucHV0PT09bnVsbClyZXR1cm4gaW5wdXQ7dmFyIHByaW09aW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTtpZihwcmltIT09dW5kZWZpbmVkKXt2YXIgcmVzPXByaW0uY2FsbChpbnB1dCxoaW50fHxcImRlZmF1bHRcIik7aWYoX3R5cGVvZihyZXMpIT09XCJvYmplY3RcIilyZXR1cm4gcmVzO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTt9cmV0dXJuKGhpbnQ9PT1cInN0cmluZ1wiP1N0cmluZzpOdW1iZXIpKGlucHV0KTt9dmFyIEtFWVNfVE9fSUdOT1JFX1dIRU5fQ09QWUlOR19QUk9QRVJUSUVTPVsnYXJndW1lbnRzJywnY2FsbGVlJywnY2FsbGVyJywnbGVuZ3RoJywnbmFtZScsJ3Byb3RvdHlwZScsJ3R5cGUnXTt2YXIgUkFESVVNX1BST1RPO3ZhciBSQURJVU1fTUVUSE9EUztmdW5jdGlvbiBjb3B5UHJvcGVydGllcyhzb3VyY2UsdGFyZ2V0KXtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtpZihLRVlTX1RPX0lHTk9SRV9XSEVOX0NPUFlJTkdfUFJPUEVSVElFUy5pbmRleE9mKGtleSk8MCYmIXRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpKXt2YXIgZGVzY3JpcHRvcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxrZXkpO2Rlc2NyaXB0b3ImJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LGRlc2NyaXB0b3IpO319KTt9Ly8gSGFuZGxlIHNjZW5hcmlvcyBvZjpcbi8vIC0gSW5oZXJpdCBmcm9tIGBSZWFjdC5Db21wb25lbnRgIGluIGFueSBmYXNoaW9uXG4vLyAgIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL0Zvcm1pZGFibGVMYWJzL3JhZGl1bS9pc3N1ZXMvNzM4XG4vLyAtIFRoZXJlJ3MgYW4gZXhwbGljaXQgYHJlbmRlcmAgZmllbGQgZGVmaW5lZFxuZnVuY3Rpb24gaXNTdGF0ZWxlc3MoY29tcG9uZW50KXt2YXIgcHJvdG89Y29tcG9uZW50LnByb3RvdHlwZXx8e307cmV0dXJuIWNvbXBvbmVudC5pc1JlYWN0Q29tcG9uZW50JiYhcHJvdG8uaXNSZWFjdENvbXBvbmVudCYmIWNvbXBvbmVudC5yZW5kZXImJiFwcm90by5yZW5kZXI7fS8vIENoZWNrIGlmIHZhbHVlIGlzIGEgcmVhbCBFUyBjbGFzcyBpbiBOYXRpdmUgLyBOb2RlIGNvZGUuXG4vLyBTZWU6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMDc2MDIzNlxuZnVuY3Rpb24gaXNOYXRpdmVDbGFzcyhjb21wb25lbnQpe3JldHVybiB0eXBlb2YgY29tcG9uZW50PT09J2Z1bmN0aW9uJyYmL15cXHMqY2xhc3NcXHMrLy50ZXN0KGNvbXBvbmVudC50b1N0cmluZygpKTt9Ly8gSGFuZGxlIGVzNyBhcnJvdyBmdW5jdGlvbnMgb24gUmVhY3QgY2xhc3MgbWV0aG9kIG5hbWVzIGJ5IGRldGVjdGluZ1xuLy8gYW5kIHRyYW5zZmVyaW5nIHRoZSBpbnN0YW5jZSBtZXRob2QgdG8gb3JpZ2luYWwgY2xhc3MgcHJvdG90eXBlLlxuLy8gKFVzaW5nIGEgY29weSBvZiB0aGUgY2xhc3MpLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vRm9ybWlkYWJsZUxhYnMvcmFkaXVtL2lzc3Vlcy83MzhcbmZ1bmN0aW9uIGNvcHlBcnJvd0Z1bmNzKGVuaGFuY2VkU2VsZixDb21wb3NlZENvbXBvbmVudCl7UkFESVVNX01FVEhPRFMuZm9yRWFjaChmdW5jdGlvbihuYW1lKXt2YXIgdGhpc0Rlc2M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlbmhhbmNlZFNlbGYsbmFtZSk7dmFyIHRoaXNNZXRob2Q9KHRoaXNEZXNjfHx7fSkudmFsdWU7Ly8gT25seSBjYXJlIGlmIGhhdmUgaW5zdGFuY2UgbWV0aG9kLlxuaWYoIXRoaXNNZXRob2Qpe3JldHVybjt9dmFyIHJhZGl1bURlc2M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihSQURJVU1fUFJPVE8sbmFtZSk7dmFyIHJhZGl1bVByb3RvTWV0aG9kPShyYWRpdW1EZXNjfHx7fSkudmFsdWU7dmFyIHN1cGVyUHJvdG9NZXRob2Q9Q29tcG9zZWRDb21wb25lbnQucHJvdG90eXBlW25hbWVdOy8vIEFsbG93IHRyYW5zZmVyIHdoZW46XG4vLyAxLiBoYXZlIGFuIGluc3RhbmNlIG1ldGhvZFxuLy8gMi4gdGhlIHN1cGVyIGNsYXNzIHByb3RvdHlwZSBkb2Vzbid0IGhhdmUgYW55IG1ldGhvZFxuLy8gMy4gaXQgaXMgbm90IGFscmVhZHkgdGhlIHJhZGl1bSBwcm90b3R5cGUnc1xuaWYoIXN1cGVyUHJvdG9NZXRob2QmJnRoaXNNZXRob2QhPT1yYWRpdW1Qcm90b01ldGhvZCl7Ly8gVHJhbnNmZXIgZHluYW1pYyByZW5kZXIgY29tcG9uZW50IHRvIENvbXBvbmVudCBwcm90b3R5cGUgKGNvcHkpLlxudGhpc0Rlc2MmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb3NlZENvbXBvbmVudC5wcm90b3R5cGUsbmFtZSx0aGlzRGVzYyk7Ly8gUmVtb3ZlIGluc3RhbmNlIHByb3BlcnR5LCBsZWF2aW5nIHVzIHRvIGhhdmUgYSBjb250cml2ZWRcbi8vIGluaGVyaXRhbmNlIGNoYWluIG9mICgxKSByYWRpdW0sICgyKSBzdXBlcmNsYXNzLlxuZGVsZXRlIGVuaGFuY2VkU2VsZltuYW1lXTt9fSk7fWZ1bmN0aW9uIHRyaW1SYWRpdW1TdGF0ZShlbmhhbmNlcil7aWYoZW5oYW5jZXIuX2V4dHJhUmFkaXVtU3RhdGVLZXlzJiZlbmhhbmNlci5fZXh0cmFSYWRpdW1TdGF0ZUtleXMubGVuZ3RoPjApe3ZhciB0cmltbWVkUmFkaXVtU3RhdGU9ZW5oYW5jZXIuX2V4dHJhUmFkaXVtU3RhdGVLZXlzLnJlZHVjZShmdW5jdGlvbihzdGF0ZSxrZXkpey8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xudmFyIGV4dHJhU3RhdGVLZXk9c3RhdGVba2V5XSxyZW1haW5pbmdTdGF0ZT1fb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc3RhdGUsW2tleV0ubWFwKF90b1Byb3BlcnR5S2V5KSk7cmV0dXJuIHJlbWFpbmluZ1N0YXRlO30sKDAsX2dldFJhZGl1bVN0eWxlU3RhdGVbXCJkZWZhdWx0XCJdKShlbmhhbmNlcikpO2VuaGFuY2VyLl9sYXN0UmFkaXVtU3RhdGU9dHJpbW1lZFJhZGl1bVN0YXRlO2VuaGFuY2VyLnNldFN0YXRlKHtfcmFkaXVtU3R5bGVTdGF0ZTp0cmltbWVkUmFkaXVtU3RhdGV9KTt9fWZ1bmN0aW9uIGNsZWFuVXBFbmhhbmNlcihlbmhhbmNlcil7dmFyIF9yYWRpdW1Nb3VzZVVwTGlzdGVuZXI9ZW5oYW5jZXIuX3JhZGl1bU1vdXNlVXBMaXN0ZW5lcixfcmFkaXVtTWVkaWFRdWVyeUxpc3RlbmVyc0J5UXVlcnk9ZW5oYW5jZXIuX3JhZGl1bU1lZGlhUXVlcnlMaXN0ZW5lcnNCeVF1ZXJ5O2VuaGFuY2VyLl9yYWRpdW1Jc01vdW50ZWQ9ZmFsc2U7aWYoX3JhZGl1bU1vdXNlVXBMaXN0ZW5lcil7X3JhZGl1bU1vdXNlVXBMaXN0ZW5lci5yZW1vdmUoKTt9aWYoX3JhZGl1bU1lZGlhUXVlcnlMaXN0ZW5lcnNCeVF1ZXJ5KXtPYmplY3Qua2V5cyhfcmFkaXVtTWVkaWFRdWVyeUxpc3RlbmVyc0J5UXVlcnkpLmZvckVhY2goZnVuY3Rpb24ocXVlcnkpe19yYWRpdW1NZWRpYVF1ZXJ5TGlzdGVuZXJzQnlRdWVyeVtxdWVyeV0ucmVtb3ZlKCk7fSxlbmhhbmNlcik7fX1mdW5jdGlvbiByZXNvbHZlQ29uZmlnKHByb3BDb25maWcsY29udGV4dENvbmZpZyxob2NDb25maWcpe3ZhciBjb25maWc9cHJvcENvbmZpZ3x8Y29udGV4dENvbmZpZ3x8aG9jQ29uZmlnO2lmKGhvY0NvbmZpZyYmY29uZmlnIT09aG9jQ29uZmlnKXtjb25maWc9X29iamVjdFNwcmVhZCh7fSxob2NDb25maWcsY29uZmlnKTt9cmV0dXJuIGNvbmZpZzt9ZnVuY3Rpb24gcmVuZGVyUmFkaXVtQ29tcG9uZW50KGVuaGFuY2VyLHJlbmRlcmVkRWxlbWVudCxyZXNvbHZlZENvbmZpZyxwcm9wQ29uZmlnKXt2YXIgX3Jlc29sdmVTdHlsZXM9KDAsX3Jlc29sdmVTdHlsZXMyW1wiZGVmYXVsdFwiXSkoZW5oYW5jZXIscmVuZGVyZWRFbGVtZW50LHJlc29sdmVkQ29uZmlnKSxleHRyYVN0YXRlS2V5TWFwPV9yZXNvbHZlU3R5bGVzLmV4dHJhU3RhdGVLZXlNYXAsZWxlbWVudD1fcmVzb2x2ZVN0eWxlcy5lbGVtZW50O2VuaGFuY2VyLl9leHRyYVJhZGl1bVN0YXRlS2V5cz1PYmplY3Qua2V5cyhleHRyYVN0YXRlS2V5TWFwKTtpZihwcm9wQ29uZmlnKXtyZXR1cm4gX3JlYWN0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9jb250ZXh0LlJhZGl1bUNvbmZpZ0NvbnRleHQuUHJvdmlkZXIse3ZhbHVlOnByb3BDb25maWd9LGVsZW1lbnQpO31yZXR1cm4gZWxlbWVudDt9ZnVuY3Rpb24gY3JlYXRlRW5oYW5jZWRGdW5jdGlvbkNvbXBvbmVudChvcmlnQ29tcG9uZW50LGNvbmZpZyl7dmFyIFJhZGl1bUVuaGFuY2VyPV9yZWFjdFtcImRlZmF1bHRcIl0uZm9yd2FyZFJlZihmdW5jdGlvbihwcm9wcyxyZWYpe3ZhciByYWRpdW1Db25maWc9cHJvcHMucmFkaXVtQ29uZmlnLG90aGVyUHJvcHM9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLFtcInJhZGl1bUNvbmZpZ1wiXSk7dmFyIHJhZGl1bUNvbmZpZ0NvbnRleHQ9KDAsX3JlYWN0LnVzZUNvbnRleHQpKF9jb250ZXh0LlJhZGl1bUNvbmZpZ0NvbnRleHQpO3ZhciBzdHlsZUtlZXBlckNvbnRleHQ9KDAsX3JlYWN0LnVzZUNvbnRleHQpKF9jb250ZXh0LlN0eWxlS2VlcGVyQ29udGV4dCk7dmFyIF91c2VTdGF0ZT0oMCxfcmVhY3QudXNlU3RhdGUpKHt9KSxfdXNlU3RhdGUyPV9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwyKSxzdGF0ZT1fdXNlU3RhdGUyWzBdLHNldFN0YXRlPV91c2VTdGF0ZTJbMV07dmFyIGVuaGFuY2VyQXBpPSgwLF9yZWFjdC51c2VSZWYpKHtzdGF0ZTpzdGF0ZSxzZXRTdGF0ZTpzZXRTdGF0ZSxfcmFkaXVtTWVkaWFRdWVyeUxpc3RlbmVyc0J5UXVlcnk6dW5kZWZpbmVkLF9yYWRpdW1Nb3VzZVVwTGlzdGVuZXI6dW5kZWZpbmVkLF9yYWRpdW1Jc01vdW50ZWQ6dHJ1ZSxfbGFzdFJhZGl1bVN0YXRlOnVuZGVmaW5lZCxfZXh0cmFSYWRpdW1TdGF0ZUtleXM6dW5kZWZpbmVkLF9yYWRpdW1TdHlsZUtlZXBlcjpzdHlsZUtlZXBlckNvbnRleHR9KS5jdXJyZW50Oy8vIHJlc3VsdCBvZiB1c2VSZWYgaXMgbmV2ZXIgcmVjcmVhdGVkIGFuZCBpcyBkZXNpZ25lZCB0byBiZSBtdXRhYmxlXG4vLyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgbGF0ZXN0IHN0YXRlIGlzIGF0dGFjaGVkIHRvIGl0XG5lbmhhbmNlckFwaS5zdGF0ZT1zdGF0ZTsoMCxfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe2NsZWFuVXBFbmhhbmNlcihlbmhhbmNlckFwaSk7fTt9LFtlbmhhbmNlckFwaV0pO3ZhciBoYXNFeHRyYVN0YXRlS2V5cz1lbmhhbmNlckFwaS5fZXh0cmFSYWRpdW1TdGF0ZUtleXMmJmVuaGFuY2VyQXBpLl9leHRyYVJhZGl1bVN0YXRlS2V5cy5sZW5ndGg+MDsoMCxfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbigpe3RyaW1SYWRpdW1TdGF0ZShlbmhhbmNlckFwaSk7fSxbaGFzRXh0cmFTdGF0ZUtleXMsZW5oYW5jZXJBcGldKTt2YXIgcmVuZGVyZWRFbGVtZW50PW9yaWdDb21wb25lbnQob3RoZXJQcm9wcyxyZWYpO3ZhciBjdXJyZW50Q29uZmlnPXJlc29sdmVDb25maWcocmFkaXVtQ29uZmlnLHJhZGl1bUNvbmZpZ0NvbnRleHQsY29uZmlnKTtyZXR1cm4gcmVuZGVyUmFkaXVtQ29tcG9uZW50KGVuaGFuY2VyQXBpLHJlbmRlcmVkRWxlbWVudCxjdXJyZW50Q29uZmlnLHJhZGl1bUNvbmZpZyk7fSk7UmFkaXVtRW5oYW5jZXIuX2lzUmFkaXVtRW5oYW5jZWQ9dHJ1ZTtSYWRpdW1FbmhhbmNlci5kZWZhdWx0UHJvcHM9b3JpZ0NvbXBvbmVudC5kZWZhdWx0UHJvcHM7cmV0dXJuKDAsX2hvaXN0Tm9uUmVhY3RTdGF0aWNzW1wiZGVmYXVsdFwiXSkoUmFkaXVtRW5oYW5jZXIsb3JpZ0NvbXBvbmVudCk7fWZ1bmN0aW9uIGNyZWF0ZUVuaGFuY2VkQ2xhc3NDb21wb25lbnQob3JpZ0NvbXBvbmVudCxDb21wb3NlZENvbXBvbmVudCxjb25maWcpe3ZhciBSYWRpdW1FbmhhbmNlcj0vKiNfX1BVUkVfXyovZnVuY3Rpb24oX0NvbXBvc2VkQ29tcG9uZW50KXtfaW5oZXJpdHMoUmFkaXVtRW5oYW5jZXIsX0NvbXBvc2VkQ29tcG9uZW50KTsvLyBuZWVkIHRvIGF0dGVtcHQgdG8gYXNzaWduIHRvIHRoaXMuc3RhdGUgaW4gY2FzZVxuLy8gc3VwZXIgY29tcG9uZW50IGlzIHNldHRpbmcgc3RhdGUgb24gY29uc3RydWN0aW9uLFxuLy8gb3RoZXJ3aXNlIGNsYXNzIHByb3BlcnRpZXMgcmVpbml0aWFsaXplIHRvIHVuZGVmaW5lZFxuLy8gbmVlZCB0byBhc3NpZ24gdGhlIGZvbGxvd2luZyBtZXRob2RzIHRvIHRoaXMueHh4IGFzXG4vLyB0ZXN0cyBhdHRlbXB0IHRvIHNldCB0aGlzIG9uIHRoZSBvcmlnaW5hbCBjb21wb25lbnRcbmZ1bmN0aW9uIFJhZGl1bUVuaGFuY2VyKCl7dmFyIF90aGlzO19jbGFzc0NhbGxDaGVjayh0aGlzLFJhZGl1bUVuaGFuY2VyKTtfdGhpcz1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLF9nZXRQcm90b3R5cGVPZihSYWRpdW1FbmhhbmNlcikuYXBwbHkodGhpcyxhcmd1bWVudHMpKTtfdGhpcy5zdGF0ZT1fdGhpcy5zdGF0ZXx8e307X3RoaXMuX3JhZGl1bVN0eWxlS2VlcGVyPV90aGlzLnByb3BzLnN0eWxlS2VlcGVyQ29udGV4dDtfdGhpcy5fcmFkaXVtTWVkaWFRdWVyeUxpc3RlbmVyc0J5UXVlcnk9X3RoaXMuX3JhZGl1bU1lZGlhUXVlcnlMaXN0ZW5lcnNCeVF1ZXJ5O190aGlzLl9yYWRpdW1Nb3VzZVVwTGlzdGVuZXI9X3RoaXMuX3JhZGl1bU1vdXNlVXBMaXN0ZW5lcjtfdGhpcy5fcmFkaXVtSXNNb3VudGVkPXRydWU7X3RoaXMuX2xhc3RSYWRpdW1TdGF0ZT12b2lkIDA7X3RoaXMuX2V4dHJhUmFkaXVtU3RhdGVLZXlzPXZvaWQgMDtfdGhpcy5zdGF0ZS5fcmFkaXVtU3R5bGVTdGF0ZT17fTt2YXIgc2VsZj1fYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKTsvLyBIYW5kbGUgZXM3IGFycm93IGZ1bmN0aW9ucyBvbiBSZWFjdCBjbGFzcyBtZXRob2RcbmNvcHlBcnJvd0Z1bmNzKHNlbGYsQ29tcG9zZWRDb21wb25lbnQpO3JldHVybiBfdGhpczt9X2NyZWF0ZUNsYXNzKFJhZGl1bUVuaGFuY2VyLFt7a2V5OlwiY29tcG9uZW50RGlkVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcyxwcmV2U3RhdGUsc25hcHNob3Qpe2lmKF9nZXQoX2dldFByb3RvdHlwZU9mKFJhZGl1bUVuaGFuY2VyLnByb3RvdHlwZSksXCJjb21wb25lbnREaWRVcGRhdGVcIix0aGlzKSl7X2dldChfZ2V0UHJvdG90eXBlT2YoUmFkaXVtRW5oYW5jZXIucHJvdG90eXBlKSxcImNvbXBvbmVudERpZFVwZGF0ZVwiLHRoaXMpLmNhbGwodGhpcyxwcmV2UHJvcHMscHJldlN0YXRlLHNuYXBzaG90KTt9dHJpbVJhZGl1bVN0YXRlKHRoaXMpO319LHtrZXk6XCJjb21wb25lbnRXaWxsVW5tb3VudFwiLHZhbHVlOmZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCl7aWYoX2dldChfZ2V0UHJvdG90eXBlT2YoUmFkaXVtRW5oYW5jZXIucHJvdG90eXBlKSxcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsdGhpcykpe19nZXQoX2dldFByb3RvdHlwZU9mKFJhZGl1bUVuaGFuY2VyLnByb3RvdHlwZSksXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLHRoaXMpLmNhbGwodGhpcyk7fWNsZWFuVXBFbmhhbmNlcih0aGlzKTt9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyKCl7dmFyIHJlbmRlcmVkRWxlbWVudD1fZ2V0KF9nZXRQcm90b3R5cGVPZihSYWRpdW1FbmhhbmNlci5wcm90b3R5cGUpLFwicmVuZGVyXCIsdGhpcykuY2FsbCh0aGlzKTt2YXIgY3VycmVudENvbmZpZz1yZXNvbHZlQ29uZmlnKHRoaXMucHJvcHMucmFkaXVtQ29uZmlnLHRoaXMucHJvcHMucmFkaXVtQ29uZmlnQ29udGV4dCxjb25maWcpO3JldHVybiByZW5kZXJSYWRpdW1Db21wb25lbnQodGhpcyxyZW5kZXJlZEVsZW1lbnQsY3VycmVudENvbmZpZyx0aGlzLnByb3BzLnJhZGl1bUNvbmZpZyk7fX1dKTtyZXR1cm4gUmFkaXVtRW5oYW5jZXI7fShDb21wb3NlZENvbXBvbmVudCk7Ly8gTGF6eSBpbmZlciB0aGUgbWV0aG9kIG5hbWVzIG9mIHRoZSBFbmhhbmNlci5cblJhZGl1bUVuaGFuY2VyLl9pc1JhZGl1bUVuaGFuY2VkPXRydWU7UkFESVVNX1BST1RPPVJhZGl1bUVuaGFuY2VyLnByb3RvdHlwZTtSQURJVU1fTUVUSE9EUz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhSQURJVU1fUFJPVE8pLmZpbHRlcihmdW5jdGlvbihuKXtyZXR1cm4gbiE9PSdjb25zdHJ1Y3RvcicmJnR5cGVvZiBSQURJVU1fUFJPVE9bbl09PT0nZnVuY3Rpb24nO30pOy8vIENsYXNzIGluaGVyaXRhbmNlIHVzZXMgT2JqZWN0LmNyZWF0ZSBhbmQgYmVjYXVzZSBvZiBfX3Byb3RvX18gaXNzdWVzXG4vLyB3aXRoIElFIDwxMCBhbnkgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIHN1cGVyY2xhc3MgYXJlbid0IGluaGVyaXRlZCBhbmRcbi8vIHNvIG5lZWQgdG8gYmUgbWFudWFsbHkgcG9wdWxhdGVkLlxuLy8gU2VlIGh0dHA6Ly9iYWJlbGpzLmlvL2RvY3MvYWR2YW5jZWQvY2F2ZWF0cy8jY2xhc3Nlcy0xMC1hbmQtYmVsb3ctXG5jb3B5UHJvcGVydGllcyhvcmlnQ29tcG9uZW50LFJhZGl1bUVuaGFuY2VyKTtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7Ly8gVGhpcyBhbHNvIGZpeGVzIFJlYWN0IEhvdCBMb2FkZXIgYnkgZXhwb3NpbmcgdGhlIG9yaWdpbmFsIGNvbXBvbmVudHMgdG9wXG4vLyBsZXZlbCBwcm90b3R5cGUgbWV0aG9kcyBvbiB0aGUgUmFkaXVtIGVuaGFuY2VkIHByb3RvdHlwZSBhcyBkaXNjdXNzZWQgaW5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Gb3JtaWRhYmxlTGFicy9yYWRpdW0vaXNzdWVzLzIxOS5cbmNvcHlQcm9wZXJ0aWVzKENvbXBvc2VkQ29tcG9uZW50LnByb3RvdHlwZSxSYWRpdW1FbmhhbmNlci5wcm90b3R5cGUpO30vLyBhZGQgUmFkaXVtIHByb3BUeXBlcyB0byBlbmhhbmNlZCBjb21wb25lbnQncyBwcm9wVHlwZXNcbmlmKFJhZGl1bUVuaGFuY2VyLnByb3BUeXBlcyYmUmFkaXVtRW5oYW5jZXIucHJvcFR5cGVzLnN0eWxlKXtSYWRpdW1FbmhhbmNlci5wcm9wVHlwZXM9X29iamVjdFNwcmVhZCh7fSxSYWRpdW1FbmhhbmNlci5wcm9wVHlwZXMse3N0eWxlOl9wcm9wVHlwZXNbXCJkZWZhdWx0XCJdLm9uZU9mVHlwZShbX3Byb3BUeXBlc1tcImRlZmF1bHRcIl0uYXJyYXksX3Byb3BUeXBlc1tcImRlZmF1bHRcIl0ub2JqZWN0XSl9KTt9Ly8gY29weSBkaXNwbGF5IG5hbWUgdG8gZW5oYW5jZWQgY29tcG9uZW50XG5SYWRpdW1FbmhhbmNlci5kaXNwbGF5TmFtZT1vcmlnQ29tcG9uZW50LmRpc3BsYXlOYW1lfHxvcmlnQ29tcG9uZW50Lm5hbWV8fCdDb21wb25lbnQnO3JldHVybigwLF9jb250ZXh0LndpdGhSYWRpdW1Db250ZXh0cykoUmFkaXVtRW5oYW5jZXIpO31mdW5jdGlvbiBjcmVhdGVDb21wb3NlZEZyb21OYXRpdmVDbGFzcyhDb21wb3NlZENvbXBvbmVudCl7Q29tcG9zZWRDb21wb25lbnQ9ZnVuY3Rpb24oT3JpZ0NvbXBvbmVudCl7ZnVuY3Rpb24gTmV3Q29tcG9uZW50KCl7Ly8gVXNlIFJlZmxlY3QuY29uc3RydWN0IHRvIHNpbXVsYXRlICduZXcnXG52YXIgb2JqPVJlZmxlY3QuY29uc3RydWN0KE9yaWdDb21wb25lbnQsYXJndW1lbnRzLHRoaXMuY29uc3RydWN0b3IpO3JldHVybiBvYmo7fS8vICRGbG93Rml4TWVcblJlZmxlY3Quc2V0UHJvdG90eXBlT2YoTmV3Q29tcG9uZW50LnByb3RvdHlwZSxPcmlnQ29tcG9uZW50LnByb3RvdHlwZSk7Ly8gJEZsb3dGaXhNZVxuUmVmbGVjdC5zZXRQcm90b3R5cGVPZihOZXdDb21wb25lbnQsT3JpZ0NvbXBvbmVudCk7cmV0dXJuIE5ld0NvbXBvbmVudDt9KENvbXBvc2VkQ29tcG9uZW50KTtyZXR1cm4gQ29tcG9zZWRDb21wb25lbnQ7fXZhciBSZWFjdEZvcndhcmRSZWZTeW1ib2w9KDAsX3JlYWN0LmZvcndhcmRSZWYpKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSkuJCR0eXBlb2Y7ZnVuY3Rpb24gZW5oYW5jZVdpdGhSYWRpdW0oY29uZmlnT3JDb21wb3NlZENvbXBvbmVudCl7dmFyIGNvbmZpZz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06e307aWYoUmVhY3RGb3J3YXJkUmVmU3ltYm9sJiZjb25maWdPckNvbXBvc2VkQ29tcG9uZW50LiQkdHlwZW9mPT09UmVhY3RGb3J3YXJkUmVmU3ltYm9sKXtyZXR1cm4gY3JlYXRlRW5oYW5jZWRGdW5jdGlvbkNvbXBvbmVudChjb25maWdPckNvbXBvc2VkQ29tcG9uZW50LnJlbmRlcixjb25maWcpO31pZih0eXBlb2YgY29uZmlnT3JDb21wb3NlZENvbXBvbmVudCE9PSdmdW5jdGlvbicpe3JldHVybiBjcmVhdGVGYWN0b3J5RnJvbUNvbmZpZyhjb25maWcsY29uZmlnT3JDb21wb3NlZENvbXBvbmVudCk7fXZhciBvcmlnQ29tcG9uZW50PWNvbmZpZ09yQ29tcG9zZWRDb21wb25lbnQ7Ly8gSGFuZGxlIHN0YXRlbGVzcyBjb21wb25lbnRzXG5pZihpc1N0YXRlbGVzcyhvcmlnQ29tcG9uZW50KSl7cmV0dXJuIGNyZWF0ZUVuaGFuY2VkRnVuY3Rpb25Db21wb25lbnQob3JpZ0NvbXBvbmVudCxjb25maWcpO312YXIgX0NvbXBvc2VkQ29tcG9uZW50Mj1vcmlnQ29tcG9uZW50Oy8vIFJhZGl1bSBpcyB0cmFuc3BpbGVkIGluIG5wbSwgc28gaXQgaXNuJ3QgcmVhbGx5IHVzaW5nIGVzNiBjbGFzc2VzIGF0XG4vLyBydW50aW1lLiAgSG93ZXZlciwgdGhlIHVzZXIgb2YgUmFkaXVtIG1pZ2h0IGJlLiAgSW4gdGhpcyBjYXNlIHdlIGhhdmVcbi8vIHRvIG1haW50YWluIGZvcndhcmQgY29tcGF0aWJpbGl0eSB3aXRoIG5hdGl2ZSBlcyBjbGFzc2VzLlxuaWYoaXNOYXRpdmVDbGFzcyhfQ29tcG9zZWRDb21wb25lbnQyKSl7X0NvbXBvc2VkQ29tcG9uZW50Mj1jcmVhdGVDb21wb3NlZEZyb21OYXRpdmVDbGFzcyhfQ29tcG9zZWRDb21wb25lbnQyKTt9Ly8gU2hhbGxvdyBjb3B5IGNvbXBvc2VkIGlmIHN0aWxsIG9yaWdpbmFsICh3ZSBtYXkgbXV0YXRlIGxhdGVyKS5cbmlmKF9Db21wb3NlZENvbXBvbmVudDI9PT1vcmlnQ29tcG9uZW50KXtfQ29tcG9zZWRDb21wb25lbnQyPS8qI19fUFVSRV9fKi9mdW5jdGlvbihfQ29tcG9zZWRDb21wb25lbnQzKXtfaW5oZXJpdHMoQ29tcG9zZWRDb21wb25lbnQsX0NvbXBvc2VkQ29tcG9uZW50Myk7ZnVuY3Rpb24gQ29tcG9zZWRDb21wb25lbnQoKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxDb21wb3NlZENvbXBvbmVudCk7cmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKENvbXBvc2VkQ29tcG9uZW50KS5hcHBseSh0aGlzLGFyZ3VtZW50cykpO31yZXR1cm4gQ29tcG9zZWRDb21wb25lbnQ7fShfQ29tcG9zZWRDb21wb25lbnQyKTt9cmV0dXJuIGNyZWF0ZUVuaGFuY2VkQ2xhc3NDb21wb25lbnQob3JpZ0NvbXBvbmVudCxfQ29tcG9zZWRDb21wb25lbnQyLGNvbmZpZyk7fWZ1bmN0aW9uIGNyZWF0ZUZhY3RvcnlGcm9tQ29uZmlnKGNvbmZpZyxjb25maWdPckNvbXBvc2VkQ29tcG9uZW50KXt2YXIgbmV3Q29uZmlnPV9vYmplY3RTcHJlYWQoe30sY29uZmlnLGNvbmZpZ09yQ29tcG9zZWRDb21wb25lbnQpO3JldHVybiBmdW5jdGlvbihjb25maWdPckNvbXBvbmVudCl7cmV0dXJuIGVuaGFuY2VXaXRoUmFkaXVtKGNvbmZpZ09yQ29tcG9uZW50LG5ld0NvbmZpZyk7fTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvZW5oYW5jZXIuanNcbi8vIG1vZHVsZSBpZCA9IDkzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO3ZhciBfdHlwZW9mMj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT12b2lkIDA7dmFyIF9hcHBlbmRJbXBvcnRhbnRUb0VhY2hWYWx1ZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2FwcGVuZC1pbXBvcnRhbnQtdG8tZWFjaC12YWx1ZVwiKSk7dmFyIF9jc3NSdWxlU2V0VG9TdHJpbmc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jc3MtcnVsZS1zZXQtdG8tc3RyaW5nXCIpKTt2YXIgX2dldFN0YXRlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vZ2V0LXN0YXRlXCIpKTt2YXIgX2dldFN0YXRlS2V5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vZ2V0LXN0YXRlLWtleVwiKSk7dmFyIF9jbGVhblN0YXRlS2V5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY2xlYW4tc3RhdGUta2V5XCIpKTt2YXIgX2dldFJhZGl1bVN0eWxlU3RhdGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9nZXQtcmFkaXVtLXN0eWxlLXN0YXRlXCIpKTt2YXIgX2hhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9oYXNoXCIpKTt2YXIgX21lcmdlU3R5bGVzPXJlcXVpcmUoXCIuL21lcmdlLXN0eWxlc1wiKTt2YXIgX3BsdWdpbnM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wbHVnaW5zL1wiKSk7dmFyIF9leGVudj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJleGVudlwiKSk7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSk7dmFyIF9zdHlsZUtlZXBlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3N0eWxlLWtlZXBlclwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7XCJkZWZhdWx0XCI6b2JqfTt9ZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldIT1udWxsP2FyZ3VtZW50c1tpXTp7fTt2YXIgb3duS2V5cz1PYmplY3Qua2V5cyhzb3VyY2UpO2lmKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzPT09J2Z1bmN0aW9uJyl7b3duS2V5cz1vd25LZXlzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSkuZmlsdGVyKGZ1bmN0aW9uKHN5bSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLHN5bSkuZW51bWVyYWJsZTt9KSk7fW93bktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe19kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNvdXJjZVtrZXldKTt9KTt9cmV0dXJuIHRhcmdldDt9ZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaixrZXksdmFsdWUpe2lmKGtleSBpbiBvYmope09iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHt2YWx1ZTp2YWx1ZSxlbnVtZXJhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pO31lbHNle29ialtrZXldPXZhbHVlO31yZXR1cm4gb2JqO31mdW5jdGlvbiBfdHlwZW9mKG9iail7aWYodHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKT09PVwic3ltYm9sXCIpe190eXBlb2Y9ZnVuY3Rpb24gX3R5cGVvZihvYmope3JldHVybiB0eXBlb2Ygb2JqPT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YyKG9iaik7fTt9ZWxzZXtfdHlwZW9mPWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqPT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YyKG9iaik7fTt9cmV0dXJuIF90eXBlb2Yob2JqKTt9dmFyIERFRkFVTFRfQ09ORklHPXtwbHVnaW5zOltfcGx1Z2luc1tcImRlZmF1bHRcIl0ubWVyZ2VTdHlsZUFycmF5LF9wbHVnaW5zW1wiZGVmYXVsdFwiXS5jaGVja1Byb3BzLF9wbHVnaW5zW1wiZGVmYXVsdFwiXS5yZXNvbHZlTWVkaWFRdWVyaWVzLF9wbHVnaW5zW1wiZGVmYXVsdFwiXS5yZXNvbHZlSW50ZXJhY3Rpb25TdHlsZXMsX3BsdWdpbnNbXCJkZWZhdWx0XCJdLmtleWZyYW1lcyxfcGx1Z2luc1tcImRlZmF1bHRcIl0udmlzaXRlZCxfcGx1Z2luc1tcImRlZmF1bHRcIl0ucmVtb3ZlTmVzdGVkU3R5bGVzLF9wbHVnaW5zW1wiZGVmYXVsdFwiXS5wcmVmaXgsX3BsdWdpbnNbXCJkZWZhdWx0XCJdLmNoZWNrUHJvcHNdfTsvLyBHcm9zc1xudmFyIGdsb2JhbFN0YXRlPXt9Oy8vIE9ubHkgZm9yIHVzZSBieSB0ZXN0c1xudmFyIF9faXNUZXN0TW9kZUVuYWJsZWQ9ZmFsc2U7Ly8gRGVjbGFyZSBlYXJseSBmb3IgcmVjdXJzaXZlIGhlbHBlcnMuXG52YXIgX3Jlc29sdmVTdHlsZXM1PW51bGw7dmFyIF9zaG91bGRSZXNvbHZlU3R5bGVzPWZ1bmN0aW9uIF9zaG91bGRSZXNvbHZlU3R5bGVzKGNvbXBvbmVudCl7cmV0dXJuIGNvbXBvbmVudC50eXBlJiYhY29tcG9uZW50LnR5cGUuX2lzUmFkaXVtRW5oYW5jZWQ7fTt2YXIgX3Jlc29sdmVDaGlsZHJlbj1mdW5jdGlvbiBfcmVzb2x2ZUNoaWxkcmVuKF9yZWYpe3ZhciBjaGlsZHJlbj1fcmVmLmNoaWxkcmVuLGNvbXBvbmVudD1fcmVmLmNvbXBvbmVudCxjb25maWc9X3JlZi5jb25maWcsZXhpc3RpbmdLZXlNYXA9X3JlZi5leGlzdGluZ0tleU1hcCxleHRyYVN0YXRlS2V5TWFwPV9yZWYuZXh0cmFTdGF0ZUtleU1hcDtpZighY2hpbGRyZW4pe3JldHVybiBjaGlsZHJlbjt9dmFyIGNoaWxkcmVuVHlwZT1fdHlwZW9mKGNoaWxkcmVuKTtpZihjaGlsZHJlblR5cGU9PT0nc3RyaW5nJ3x8Y2hpbGRyZW5UeXBlPT09J251bWJlcicpey8vIERvbid0IGRvIGFueXRoaW5nIHdpdGggYSBzaW5nbGUgcHJpbWl0aXZlIGNoaWxkXG5yZXR1cm4gY2hpbGRyZW47fWlmKGNoaWxkcmVuVHlwZT09PSdmdW5jdGlvbicpey8vIFdyYXAgdGhlIGZ1bmN0aW9uLCByZXNvbHZpbmcgc3R5bGVzIG9uIHRoZSByZXN1bHRcbnJldHVybiBmdW5jdGlvbigpe3ZhciByZXN1bHQ9Y2hpbGRyZW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKF9yZWFjdFtcImRlZmF1bHRcIl0uaXNWYWxpZEVsZW1lbnQocmVzdWx0KSl7dmFyIF9rZXk9KDAsX2dldFN0YXRlS2V5W1wiZGVmYXVsdFwiXSkocmVzdWx0KTtkZWxldGUgZXh0cmFTdGF0ZUtleU1hcFtfa2V5XTt2YXIgX3Jlc29sdmVTdHlsZXM9X3Jlc29sdmVTdHlsZXM1KGNvbXBvbmVudCxyZXN1bHQsY29uZmlnLGV4aXN0aW5nS2V5TWFwLHRydWUsZXh0cmFTdGF0ZUtleU1hcCksZWxlbWVudD1fcmVzb2x2ZVN0eWxlcy5lbGVtZW50O3JldHVybiBlbGVtZW50O31yZXR1cm4gcmVzdWx0O307fWlmKF9yZWFjdFtcImRlZmF1bHRcIl0uQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pPT09MSYmY2hpbGRyZW4udHlwZSl7Ly8gSWYgYSBSZWFjdCBFbGVtZW50IGlzIGFuIG9ubHkgY2hpbGQsIGRvbid0IHdyYXAgaXQgaW4gYW4gYXJyYXkgZm9yXG4vLyBSZWFjdC5DaGlsZHJlbi5tYXAoKSBmb3IgUmVhY3QuQ2hpbGRyZW4ub25seSgpIGNvbXBhdGliaWxpdHkuXG52YXIgb25seUNoaWxkPV9yZWFjdFtcImRlZmF1bHRcIl0uQ2hpbGRyZW4ub25seShjaGlsZHJlbik7dmFyIF9rZXkyPSgwLF9nZXRTdGF0ZUtleVtcImRlZmF1bHRcIl0pKG9ubHlDaGlsZCk7ZGVsZXRlIGV4dHJhU3RhdGVLZXlNYXBbX2tleTJdO3ZhciBfcmVzb2x2ZVN0eWxlczI9X3Jlc29sdmVTdHlsZXM1KGNvbXBvbmVudCxvbmx5Q2hpbGQsY29uZmlnLGV4aXN0aW5nS2V5TWFwLHRydWUsZXh0cmFTdGF0ZUtleU1hcCksZWxlbWVudD1fcmVzb2x2ZVN0eWxlczIuZWxlbWVudDtyZXR1cm4gZWxlbWVudDt9cmV0dXJuIF9yZWFjdFtcImRlZmF1bHRcIl0uQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLGZ1bmN0aW9uKGNoaWxkKXtpZihfcmVhY3RbXCJkZWZhdWx0XCJdLmlzVmFsaWRFbGVtZW50KGNoaWxkKSl7dmFyIF9rZXkzPSgwLF9nZXRTdGF0ZUtleVtcImRlZmF1bHRcIl0pKGNoaWxkKTtkZWxldGUgZXh0cmFTdGF0ZUtleU1hcFtfa2V5M107dmFyIF9yZXNvbHZlU3R5bGVzMz1fcmVzb2x2ZVN0eWxlczUoY29tcG9uZW50LGNoaWxkLGNvbmZpZyxleGlzdGluZ0tleU1hcCx0cnVlLGV4dHJhU3RhdGVLZXlNYXApLF9lbGVtZW50PV9yZXNvbHZlU3R5bGVzMy5lbGVtZW50O3JldHVybiBfZWxlbWVudDt9cmV0dXJuIGNoaWxkO30pO307Ly8gUmVjdXJzZSBvdmVyIHByb3BzLCBqdXN0IGxpa2UgY2hpbGRyZW5cbnZhciBfcmVzb2x2ZVByb3BzPWZ1bmN0aW9uIF9yZXNvbHZlUHJvcHMoX3JlZjIpe3ZhciBjb21wb25lbnQ9X3JlZjIuY29tcG9uZW50LGNvbmZpZz1fcmVmMi5jb25maWcsZXhpc3RpbmdLZXlNYXA9X3JlZjIuZXhpc3RpbmdLZXlNYXAscHJvcHM9X3JlZjIucHJvcHMsZXh0cmFTdGF0ZUtleU1hcD1fcmVmMi5leHRyYVN0YXRlS2V5TWFwO3ZhciBuZXdQcm9wcz1wcm9wcztPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaChmdW5jdGlvbihwcm9wKXsvLyBXZSBhbHJlYWR5IHJlY3Vyc2Ugb3ZlciBjaGlsZHJlbiBhYm92ZVxuaWYocHJvcD09PSdjaGlsZHJlbicpe3JldHVybjt9dmFyIHByb3BWYWx1ZT1wcm9wc1twcm9wXTtpZihfcmVhY3RbXCJkZWZhdWx0XCJdLmlzVmFsaWRFbGVtZW50KHByb3BWYWx1ZSkpe3ZhciBfa2V5ND0oMCxfZ2V0U3RhdGVLZXlbXCJkZWZhdWx0XCJdKShwcm9wVmFsdWUpO2RlbGV0ZSBleHRyYVN0YXRlS2V5TWFwW19rZXk0XTtuZXdQcm9wcz1fb2JqZWN0U3ByZWFkKHt9LG5ld1Byb3BzKTt2YXIgX3Jlc29sdmVTdHlsZXM0PV9yZXNvbHZlU3R5bGVzNShjb21wb25lbnQscHJvcFZhbHVlLGNvbmZpZyxleGlzdGluZ0tleU1hcCx0cnVlLGV4dHJhU3RhdGVLZXlNYXApLGVsZW1lbnQ9X3Jlc29sdmVTdHlsZXM0LmVsZW1lbnQ7bmV3UHJvcHNbcHJvcF09ZWxlbWVudDt9fSk7cmV0dXJuIG5ld1Byb3BzO307dmFyIF9idWlsZEdldEtleT1mdW5jdGlvbiBfYnVpbGRHZXRLZXkoX3JlZjMpe3ZhciBjb21wb25lbnROYW1lPV9yZWYzLmNvbXBvbmVudE5hbWUsZXhpc3RpbmdLZXlNYXA9X3JlZjMuZXhpc3RpbmdLZXlNYXAscmVuZGVyZWRFbGVtZW50PV9yZWYzLnJlbmRlcmVkRWxlbWVudDsvLyBXZSBuZWVkIGEgdW5pcXVlIGtleSB0byBjb3JyZWxhdGUgc3RhdGUgY2hhbmdlcyBkdWUgdG8gdXNlciBpbnRlcmFjdGlvblxuLy8gd2l0aCB0aGUgcmVuZGVyZWQgZWxlbWVudCwgc28gd2Uga25vdyB0byBhcHBseSB0aGUgcHJvcGVyIGludGVyYWN0aXZlXG4vLyBzdHlsZXMuXG52YXIgb3JpZ2luYWxLZXk9KDAsX2dldFN0YXRlS2V5W1wiZGVmYXVsdFwiXSkocmVuZGVyZWRFbGVtZW50KTt2YXIga2V5PSgwLF9jbGVhblN0YXRlS2V5W1wiZGVmYXVsdFwiXSkob3JpZ2luYWxLZXkpO3ZhciBhbHJlYWR5R290S2V5PWZhbHNlO3ZhciBnZXRLZXk9ZnVuY3Rpb24gZ2V0S2V5KCl7aWYoYWxyZWFkeUdvdEtleSl7cmV0dXJuIGtleTt9YWxyZWFkeUdvdEtleT10cnVlO2lmKGV4aXN0aW5nS2V5TWFwW2tleV0pe3ZhciBlbGVtZW50TmFtZTtpZih0eXBlb2YgcmVuZGVyZWRFbGVtZW50LnR5cGU9PT0nc3RyaW5nJyl7ZWxlbWVudE5hbWU9cmVuZGVyZWRFbGVtZW50LnR5cGU7fWVsc2UgaWYocmVuZGVyZWRFbGVtZW50LnR5cGUuY29uc3RydWN0b3Ipe2VsZW1lbnROYW1lPXJlbmRlcmVkRWxlbWVudC50eXBlLmNvbnN0cnVjdG9yLmRpc3BsYXlOYW1lfHxyZW5kZXJlZEVsZW1lbnQudHlwZS5jb25zdHJ1Y3Rvci5uYW1lO310aHJvdyBuZXcgRXJyb3IoJ1JhZGl1bSByZXF1aXJlcyBlYWNoIGVsZW1lbnQgd2l0aCBpbnRlcmFjdGl2ZSBzdHlsZXMgdG8gaGF2ZSBhIHVuaXF1ZSAnKydrZXksIHNldCB1c2luZyBlaXRoZXIgdGhlIHJlZiBvciBrZXkgcHJvcC4gJysob3JpZ2luYWxLZXk/J0tleSBcIicrb3JpZ2luYWxLZXkrJ1wiIGlzIGEgZHVwbGljYXRlLic6J011bHRpcGxlIGVsZW1lbnRzIGhhdmUgbm8ga2V5IHNwZWNpZmllZC4nKSsnICcrJ0NvbXBvbmVudDogXCInK2NvbXBvbmVudE5hbWUrJ1wiLiAnKyhlbGVtZW50TmFtZT8nRWxlbWVudDogXCInK2VsZW1lbnROYW1lKydcIi4nOicnKSk7fWV4aXN0aW5nS2V5TWFwW2tleV09dHJ1ZTtyZXR1cm4ga2V5O307cmV0dXJuIGdldEtleTt9O3ZhciBfc2V0U3R5bGVTdGF0ZT1mdW5jdGlvbiBfc2V0U3R5bGVTdGF0ZShjb21wb25lbnQsa2V5LHN0YXRlS2V5LHZhbHVlKXtpZighY29tcG9uZW50Ll9yYWRpdW1Jc01vdW50ZWQpe3JldHVybjt9dmFyIGV4aXN0aW5nPSgwLF9nZXRSYWRpdW1TdHlsZVN0YXRlW1wiZGVmYXVsdFwiXSkoY29tcG9uZW50KTt2YXIgc3RhdGU9e19yYWRpdW1TdHlsZVN0YXRlOl9vYmplY3RTcHJlYWQoe30sZXhpc3RpbmcpfTtzdGF0ZS5fcmFkaXVtU3R5bGVTdGF0ZVtrZXldPV9vYmplY3RTcHJlYWQoe30sc3RhdGUuX3JhZGl1bVN0eWxlU3RhdGVba2V5XSk7c3RhdGUuX3JhZGl1bVN0eWxlU3RhdGVba2V5XVtzdGF0ZUtleV09dmFsdWU7Y29tcG9uZW50Ll9sYXN0UmFkaXVtU3RhdGU9c3RhdGUuX3JhZGl1bVN0eWxlU3RhdGU7Y29tcG9uZW50LnNldFN0YXRlKHN0YXRlKTt9O3ZhciBfcnVuUGx1Z2lucz1mdW5jdGlvbiBfcnVuUGx1Z2lucyhfcmVmNCl7dmFyIGNvbXBvbmVudD1fcmVmNC5jb21wb25lbnQsY29uZmlnPV9yZWY0LmNvbmZpZyxleGlzdGluZ0tleU1hcD1fcmVmNC5leGlzdGluZ0tleU1hcCxwcm9wcz1fcmVmNC5wcm9wcyxyZW5kZXJlZEVsZW1lbnQ9X3JlZjQucmVuZGVyZWRFbGVtZW50Oy8vIERvbid0IHJ1biBwbHVnaW5zIGlmIHJlbmRlcmVkRWxlbWVudCBpcyBub3QgYSBzaW1wbGUgUmVhY3RET01FbGVtZW50IG9yIGhhc1xuLy8gbm8gc3R5bGUuXG5pZighX3JlYWN0W1wiZGVmYXVsdFwiXS5pc1ZhbGlkRWxlbWVudChyZW5kZXJlZEVsZW1lbnQpfHx0eXBlb2YgcmVuZGVyZWRFbGVtZW50LnR5cGUhPT0nc3RyaW5nJ3x8IXByb3BzLnN0eWxlKXtyZXR1cm4gcHJvcHM7fXZhciBuZXdQcm9wcz1wcm9wczt2YXIgcGx1Z2lucz1jb25maWcucGx1Z2luc3x8REVGQVVMVF9DT05GSUcucGx1Z2luczt2YXIgY29tcG9uZW50TmFtZT1jb21wb25lbnQuY29uc3RydWN0b3IuZGlzcGxheU5hbWV8fGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lO3ZhciBnZXRLZXk9X2J1aWxkR2V0S2V5KHtyZW5kZXJlZEVsZW1lbnQ6cmVuZGVyZWRFbGVtZW50LGV4aXN0aW5nS2V5TWFwOmV4aXN0aW5nS2V5TWFwLGNvbXBvbmVudE5hbWU6Y29tcG9uZW50TmFtZX0pO3ZhciBnZXRDb21wb25lbnRGaWVsZD1mdW5jdGlvbiBnZXRDb21wb25lbnRGaWVsZChrZXkpe3JldHVybiBjb21wb25lbnRba2V5XTt9O3ZhciBnZXRHbG9iYWxTdGF0ZT1mdW5jdGlvbiBnZXRHbG9iYWxTdGF0ZShrZXkpe3JldHVybiBnbG9iYWxTdGF0ZVtrZXldO307dmFyIGNvbXBvbmVudEdldFN0YXRlPWZ1bmN0aW9uIGNvbXBvbmVudEdldFN0YXRlKHN0YXRlS2V5LGVsZW1lbnRLZXkpe3JldHVybigwLF9nZXRTdGF0ZVtcImRlZmF1bHRcIl0pKGNvbXBvbmVudC5zdGF0ZSxlbGVtZW50S2V5fHxnZXRLZXkoKSxzdGF0ZUtleSk7fTt2YXIgc2V0U3RhdGU9ZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGVLZXksdmFsdWUsZWxlbWVudEtleSl7cmV0dXJuIF9zZXRTdHlsZVN0YXRlKGNvbXBvbmVudCxlbGVtZW50S2V5fHxnZXRLZXkoKSxzdGF0ZUtleSx2YWx1ZSk7fTt2YXIgYWRkQ1NTPWZ1bmN0aW9uIGFkZENTUyhjc3Mpe3ZhciBzdHlsZUtlZXBlcj1jb21wb25lbnQuX3JhZGl1bVN0eWxlS2VlcGVyO2lmKCFzdHlsZUtlZXBlcil7aWYoX19pc1Rlc3RNb2RlRW5hYmxlZCl7cmV0dXJue3JlbW92ZTpmdW5jdGlvbiByZW1vdmUoKXt9fTt9dGhyb3cgbmV3IEVycm9yKCdUbyB1c2UgcGx1Z2lucyByZXF1aXJpbmcgYGFkZENTU2AgKGUuZy4ga2V5ZnJhbWVzLCBtZWRpYSBxdWVyaWVzKSwgJysncGxlYXNlIHdyYXAgeW91ciBhcHBsaWNhdGlvbiBpbiB0aGUgU3R5bGVSb290IGNvbXBvbmVudC4gQ29tcG9uZW50ICcrJ25hbWU6IGAnK2NvbXBvbmVudE5hbWUrJ2AuJyk7fXJldHVybiBzdHlsZUtlZXBlci5hZGRDU1MoY3NzKTt9O3ZhciBuZXdTdHlsZT1wcm9wcy5zdHlsZTtwbHVnaW5zLmZvckVhY2goZnVuY3Rpb24ocGx1Z2luKXt2YXIgcmVzdWx0PXBsdWdpbih7RXhlY3V0aW9uRW52aXJvbm1lbnQ6X2V4ZW52W1wiZGVmYXVsdFwiXSxhZGRDU1M6YWRkQ1NTLGFwcGVuZEltcG9ydGFudFRvRWFjaFZhbHVlOl9hcHBlbmRJbXBvcnRhbnRUb0VhY2hWYWx1ZVtcImRlZmF1bHRcIl0sY29tcG9uZW50TmFtZTpjb21wb25lbnROYW1lLGNvbmZpZzpjb25maWcsY3NzUnVsZVNldFRvU3RyaW5nOl9jc3NSdWxlU2V0VG9TdHJpbmdbXCJkZWZhdWx0XCJdLGdldENvbXBvbmVudEZpZWxkOmdldENvbXBvbmVudEZpZWxkLGdldEdsb2JhbFN0YXRlOmdldEdsb2JhbFN0YXRlLGdldFN0YXRlOmNvbXBvbmVudEdldFN0YXRlLGhhc2g6X2hhc2hbXCJkZWZhdWx0XCJdLG1lcmdlU3R5bGVzOl9tZXJnZVN0eWxlcy5tZXJnZVN0eWxlcyxwcm9wczpuZXdQcm9wcyxzZXRTdGF0ZTpzZXRTdGF0ZSxpc05lc3RlZFN0eWxlOl9tZXJnZVN0eWxlcy5pc05lc3RlZFN0eWxlLHN0eWxlOm5ld1N0eWxlfSl8fHt9O25ld1N0eWxlPXJlc3VsdC5zdHlsZXx8bmV3U3R5bGU7bmV3UHJvcHM9cmVzdWx0LnByb3BzJiZPYmplY3Qua2V5cyhyZXN1bHQucHJvcHMpLmxlbmd0aD9fb2JqZWN0U3ByZWFkKHt9LG5ld1Byb3BzLHJlc3VsdC5wcm9wcyk6bmV3UHJvcHM7dmFyIG5ld0NvbXBvbmVudEZpZWxkcz1yZXN1bHQuY29tcG9uZW50RmllbGRzfHx7fTtPYmplY3Qua2V5cyhuZXdDb21wb25lbnRGaWVsZHMpLmZvckVhY2goZnVuY3Rpb24oZmllbGROYW1lKXtjb21wb25lbnRbZmllbGROYW1lXT1uZXdDb21wb25lbnRGaWVsZHNbZmllbGROYW1lXTt9KTt2YXIgbmV3R2xvYmFsU3RhdGU9cmVzdWx0Lmdsb2JhbFN0YXRlfHx7fTtPYmplY3Qua2V5cyhuZXdHbG9iYWxTdGF0ZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2dsb2JhbFN0YXRlW2tleV09bmV3R2xvYmFsU3RhdGVba2V5XTt9KTt9KTtpZihuZXdTdHlsZSE9PXByb3BzLnN0eWxlKXtuZXdQcm9wcz1fb2JqZWN0U3ByZWFkKHt9LG5ld1Byb3BzLHtzdHlsZTpuZXdTdHlsZX0pO31yZXR1cm4gbmV3UHJvcHM7fTsvLyBXcmFwcGVyIGFyb3VuZCBSZWFjdC5jbG9uZUVsZW1lbnQuIFRvIGF2b2lkIHByb2Nlc3NpbmcgdGhlIHNhbWUgZWxlbWVudFxuLy8gdHdpY2UsIHdoZW5ldmVyIHdlIGNsb25lIGFuIGVsZW1lbnQgYWRkIGEgc3BlY2lhbCBwcm9wIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndFxuLy8gcHJvY2VzcyB0aGlzIGVsZW1lbnQgYWdhaW4uXG52YXIgX2Nsb25lRWxlbWVudD1mdW5jdGlvbiBfY2xvbmVFbGVtZW50KHJlbmRlcmVkRWxlbWVudCxuZXdQcm9wcyxuZXdDaGlsZHJlbil7Ly8gT25seSBhZGQgZmxhZyBpZiB0aGlzIGlzIGEgbm9ybWFsIERPTSBlbGVtZW50XG5pZih0eXBlb2YgcmVuZGVyZWRFbGVtZW50LnR5cGU9PT0nc3RyaW5nJyl7bmV3UHJvcHM9X29iamVjdFNwcmVhZCh7fSxuZXdQcm9wcyx7J2RhdGEtcmFkaXVtJzp0cnVlfSk7fXJldHVybiBfcmVhY3RbXCJkZWZhdWx0XCJdLmNsb25lRWxlbWVudChyZW5kZXJlZEVsZW1lbnQsbmV3UHJvcHMsbmV3Q2hpbGRyZW4pO307Ly9cbi8vIFRoZSBudWNsZXVzIG9mIFJhZGl1bS4gcmVzb2x2ZVN0eWxlcyBpcyBjYWxsZWQgb24gdGhlIHJlbmRlcmVkIGVsZW1lbnRzXG4vLyBiZWZvcmUgdGhleSBhcmUgcmV0dXJuZWQgaW4gcmVuZGVyLiBJdCBpdGVyYXRlcyBvdmVyIHRoZSBlbGVtZW50cyBhbmRcbi8vIGNoaWxkcmVuLCByZXdyaXRpbmcgcHJvcHMgdG8gYWRkIGV2ZW50IGhhbmRsZXJzIHJlcXVpcmVkIHRvIGNhcHR1cmUgdXNlclxuLy8gaW50ZXJhY3Rpb25zIChlLmcuIG1vdXNlIG92ZXIpLiBJdCBhbHNvIHJlcGxhY2VzIHRoZSBzdHlsZSBwcm9wIGJlY2F1c2UgaXRcbi8vIGFkZHMgaW4gdGhlIHZhcmlvdXMgaW50ZXJhY3Rpb24gc3R5bGVzIChlLmcuIDpob3ZlcikuXG4vL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LXBhcmFtcyAqL19yZXNvbHZlU3R5bGVzNT1mdW5jdGlvbiByZXNvbHZlU3R5bGVzKGNvbXBvbmVudCxyZW5kZXJlZEVsZW1lbnQpe3ZhciBjb25maWc9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzJdOkRFRkFVTFRfQ09ORklHO3ZhciBleGlzdGluZ0tleU1hcD1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbM106e307dmFyIHNob3VsZENoZWNrQmVmb3JlUmVzb2x2ZT1hcmd1bWVudHMubGVuZ3RoPjQmJmFyZ3VtZW50c1s0XSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbNF06ZmFsc2U7dmFyIGV4dHJhU3RhdGVLZXlNYXA9YXJndW1lbnRzLmxlbmd0aD41P2FyZ3VtZW50c1s1XTp1bmRlZmluZWQ7Ly8gVGhlIGV4dHJhU3RhdGVLZXlNYXAgaXMgZm9yIGRldGVybWluaW5nIHdoaWNoIGtleXMgc2hvdWxkIGJlIGVyYXNlZCBmcm9tXG4vLyB0aGUgc3RhdGUgKGkuZS4gd2hpY2ggY2hpbGQgY29tcG9uZW50cyBhcmUgdW5tb3VudGVkIGFuZCBzaG91bGQgbm8gbG9uZ2VyXG4vLyBoYXZlIGEgc3R5bGUgc3RhdGUpLlxuaWYoIWV4dHJhU3RhdGVLZXlNYXApe3ZhciBzdGF0ZT0oMCxfZ2V0UmFkaXVtU3R5bGVTdGF0ZVtcImRlZmF1bHRcIl0pKGNvbXBvbmVudCk7ZXh0cmFTdGF0ZUtleU1hcD1PYmplY3Qua2V5cyhzdGF0ZSkucmVkdWNlKGZ1bmN0aW9uKGFjYyxrZXkpey8vICdtYWluJyBpcyB0aGUgYXV0by1nZW5lcmF0ZWQga2V5IHdoZW4gdGhlcmUgaXMgb25seSBvbmUgZWxlbWVudCB3aXRoXG4vLyBpbnRlcmFjdGl2ZSBzdHlsZXMgYW5kIGlmIGEgY3VzdG9tIGtleSBpcyBub3QgYXNzaWduZWQuIEJlY2F1c2Ugb2Zcbi8vIHRoaXMsIGl0IGlzIGltcG9zc2libGUgdG8ga25vdyB3aGljaCBjaGlsZCBpcyAnbWFpbicsIHNvIHdlIHdvbid0XG4vLyBjb3VudCB0aGlzIGtleSB3aGVuIGdlbmVyYXRpbmcgb3VyIGV4dHJhU3RhdGVLZXlNYXAuXG5pZihrZXkhPT0nbWFpbicpe2FjY1trZXldPXRydWU7fXJldHVybiBhY2M7fSx7fSk7fWlmKEFycmF5LmlzQXJyYXkocmVuZGVyZWRFbGVtZW50KSYmIXJlbmRlcmVkRWxlbWVudC5wcm9wcyl7dmFyIGVsZW1lbnRzPXJlbmRlcmVkRWxlbWVudC5tYXAoZnVuY3Rpb24oZWxlbWVudCl7Ly8gZWxlbWVudCBpcyBpbi11c2UsIHNvIHJlbW92ZSBmcm9tIHRoZSBleHRyYVN0YXRlS2V5TWFwXG5pZihleHRyYVN0YXRlS2V5TWFwKXt2YXIgX2tleTU9KDAsX2dldFN0YXRlS2V5W1wiZGVmYXVsdFwiXSkoZWxlbWVudCk7ZGVsZXRlIGV4dHJhU3RhdGVLZXlNYXBbX2tleTVdO30vLyB0aGlzIGVsZW1lbnQgaXMgYW4gYXJyYXkgb2YgZWxlbWVudHMsXG4vLyBzbyByZXR1cm4gYW4gYXJyYXkgb2YgZWxlbWVudHMgd2l0aCByZXNvbHZlZCBzdHlsZXNcbnJldHVybiBfcmVzb2x2ZVN0eWxlczUoY29tcG9uZW50LGVsZW1lbnQsY29uZmlnLGV4aXN0aW5nS2V5TWFwLHNob3VsZENoZWNrQmVmb3JlUmVzb2x2ZSxleHRyYVN0YXRlS2V5TWFwKS5lbGVtZW50O30pO3JldHVybntleHRyYVN0YXRlS2V5TWFwOmV4dHJhU3RhdGVLZXlNYXAsZWxlbWVudDplbGVtZW50c307fS8vIFJlYWN0RWxlbWVudFxuaWYoIXJlbmRlcmVkRWxlbWVudHx8Ly8gQmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IHByb2Nlc3NlZCB0aGlzIGVsZW1lbnQuIFRoaXMgZW5zdXJlcyB0aGF0IG9ubHkgdGhlXG4vLyBvd25lciBvZiBhbiBlbGVtZW50IHByb2Nlc3NlcyB0aGF0IGVsZW1lbnQsIHNpbmNlIHRoZSBvd25lcidzIHJlbmRlclxuLy8gZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZmlyc3QgKHdoaWNoIHdpbGwgYWx3YXlzIGJlIHRoZSBjYXNlLCBzaW5jZSB5b3Vcbi8vIGNhbid0IGtub3cgd2hhdCBlbHNlIHRvIHJlbmRlciB1bnRpbCB5b3UgcmVuZGVyIHRoZSBwYXJlbnQgY29tcG9uZW50KS5cbnJlbmRlcmVkRWxlbWVudC5wcm9wcyYmcmVuZGVyZWRFbGVtZW50LnByb3BzWydkYXRhLXJhZGl1bSddfHwvLyBCYWlsIGlmIHRoaXMgZWxlbWVudCBpcyBhIHJhZGl1bSBlbmhhbmNlZCBlbGVtZW50LCBiZWNhdXNlIGlmIGl0IGlzLFxuLy8gdGhlbiBpdCB3aWxsIHRha2UgY2FyZSBvZiByZXNvbHZpbmcgaXRzIG93biBzdHlsZXMuXG5zaG91bGRDaGVja0JlZm9yZVJlc29sdmUmJiFfc2hvdWxkUmVzb2x2ZVN0eWxlcyhyZW5kZXJlZEVsZW1lbnQpKXtyZXR1cm57ZXh0cmFTdGF0ZUtleU1hcDpleHRyYVN0YXRlS2V5TWFwLGVsZW1lbnQ6cmVuZGVyZWRFbGVtZW50fTt9dmFyIGNoaWxkcmVuPXJlbmRlcmVkRWxlbWVudC5wcm9wcy5jaGlsZHJlbjt2YXIgbmV3Q2hpbGRyZW49X3Jlc29sdmVDaGlsZHJlbih7Y2hpbGRyZW46Y2hpbGRyZW4sY29tcG9uZW50OmNvbXBvbmVudCxjb25maWc6Y29uZmlnLGV4aXN0aW5nS2V5TWFwOmV4aXN0aW5nS2V5TWFwLGV4dHJhU3RhdGVLZXlNYXA6ZXh0cmFTdGF0ZUtleU1hcH0pO3ZhciBuZXdQcm9wcz1fcmVzb2x2ZVByb3BzKHtjb21wb25lbnQ6Y29tcG9uZW50LGNvbmZpZzpjb25maWcsZXhpc3RpbmdLZXlNYXA6ZXhpc3RpbmdLZXlNYXAsZXh0cmFTdGF0ZUtleU1hcDpleHRyYVN0YXRlS2V5TWFwLHByb3BzOnJlbmRlcmVkRWxlbWVudC5wcm9wc30pO25ld1Byb3BzPV9ydW5QbHVnaW5zKHtjb21wb25lbnQ6Y29tcG9uZW50LGNvbmZpZzpjb25maWcsZXhpc3RpbmdLZXlNYXA6ZXhpc3RpbmdLZXlNYXAscHJvcHM6bmV3UHJvcHMscmVuZGVyZWRFbGVtZW50OnJlbmRlcmVkRWxlbWVudH0pOy8vIElmIG5vdGhpbmcgY2hhbmdlZCwgZG9uJ3QgYm90aGVyIGNsb25pbmcgdGhlIGVsZW1lbnQuIE1pZ2h0IGJlIGEgYml0XG4vLyB3YXN0ZWZ1bCwgYXMgd2UgYWRkIHRoZSBzZW50aW5lbCB0byBzdG9wIGRvdWJsZS1wcm9jZXNzaW5nIHdoZW4gd2UgY2xvbmUuXG4vLyBBc3N1bWUgYmVuaWduIGRvdWJsZS1wcm9jZXNzaW5nIGlzIGJldHRlciB0aGFuIHVubmVlZGVkIGNsb25pbmcuXG5pZihuZXdDaGlsZHJlbj09PWNoaWxkcmVuJiZuZXdQcm9wcz09PXJlbmRlcmVkRWxlbWVudC5wcm9wcyl7cmV0dXJue2V4dHJhU3RhdGVLZXlNYXA6ZXh0cmFTdGF0ZUtleU1hcCxlbGVtZW50OnJlbmRlcmVkRWxlbWVudH07fXZhciBlbGVtZW50PV9jbG9uZUVsZW1lbnQocmVuZGVyZWRFbGVtZW50LG5ld1Byb3BzIT09cmVuZGVyZWRFbGVtZW50LnByb3BzP25ld1Byb3BzOnt9LG5ld0NoaWxkcmVuKTtyZXR1cm57ZXh0cmFTdGF0ZUtleU1hcDpleHRyYVN0YXRlS2V5TWFwLGVsZW1lbnQ6ZWxlbWVudH07fTsvKiBlc2xpbnQtZW5hYmxlIG1heC1wYXJhbXMgKi8vLyBPbmx5IGZvciB1c2UgYnkgdGVzdHNcbmlmKHByb2Nlc3MuZW52Lk5PREVfRU5WIT09J3Byb2R1Y3Rpb24nKXtfcmVzb2x2ZVN0eWxlczUuX19jbGVhclN0YXRlRm9yVGVzdHM9ZnVuY3Rpb24oKXtnbG9iYWxTdGF0ZT17fTt9O19yZXNvbHZlU3R5bGVzNS5fX3NldFRlc3RNb2RlPWZ1bmN0aW9uKGlzRW5hYmxlZCl7X19pc1Rlc3RNb2RlRW5hYmxlZD1pc0VuYWJsZWQ7fTt9dmFyIF9kZWZhdWx0PV9yZXNvbHZlU3R5bGVzNTtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9yZXNvbHZlLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1hcHBlbmRJbXBvcnRhbnRUb0VhY2hWYWx1ZTt2YXIgX2FwcGVuZFB4SWZOZWVkZWQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9hcHBlbmQtcHgtaWYtbmVlZGVkXCIpKTt2YXIgX21hcE9iamVjdD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL21hcC1vYmplY3RcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e1wiZGVmYXVsdFwiOm9ian07fWZ1bmN0aW9uIGFwcGVuZEltcG9ydGFudFRvRWFjaFZhbHVlKHN0eWxlKXtyZXR1cm4oMCxfbWFwT2JqZWN0W1wiZGVmYXVsdFwiXSkoc3R5bGUsZnVuY3Rpb24ocmVzdWx0LGtleSl7cmV0dXJuKDAsX2FwcGVuZFB4SWZOZWVkZWRbXCJkZWZhdWx0XCJdKShrZXksc3R5bGVba2V5XSkrJyAhaW1wb3J0YW50Jzt9KTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvYXBwZW5kLWltcG9ydGFudC10by1lYWNoLXZhbHVlLmpzXG4vLyBtb2R1bGUgaWQgPSA5NVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPWFwcGVuZFB4SWZOZWVkZWQ7Ly8gQ29waWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvXG4vLyBiODdhYWJkZmUxYjc0NjFlNzMzMWFiYjM2MDFkOWU2YmIyNzU0NGJjL1xuLy8gcGFja2FnZXMvcmVhY3QtZG9tL3NyYy9zaGFyZWQvQ1NTUHJvcGVydHkuanNcbnZhciBpc1VuaXRsZXNzTnVtYmVyPXthbmltYXRpb25JdGVyYXRpb25Db3VudDp0cnVlLGJvcmRlckltYWdlT3V0c2V0OnRydWUsYm9yZGVySW1hZ2VTbGljZTp0cnVlLGJvcmRlckltYWdlV2lkdGg6dHJ1ZSxib3hGbGV4OnRydWUsYm94RmxleEdyb3VwOnRydWUsYm94T3JkaW5hbEdyb3VwOnRydWUsY29sdW1uQ291bnQ6dHJ1ZSxjb2x1bW5zOnRydWUsZmxleDp0cnVlLGZsZXhHcm93OnRydWUsZmxleFBvc2l0aXZlOnRydWUsZmxleFNocmluazp0cnVlLGZsZXhOZWdhdGl2ZTp0cnVlLGZsZXhPcmRlcjp0cnVlLGdyaWRBcmVhOnRydWUsZ3JpZFJvdzp0cnVlLGdyaWRSb3dFbmQ6dHJ1ZSxncmlkUm93U3Bhbjp0cnVlLGdyaWRSb3dTdGFydDp0cnVlLGdyaWRDb2x1bW46dHJ1ZSxncmlkQ29sdW1uRW5kOnRydWUsZ3JpZENvbHVtblNwYW46dHJ1ZSxncmlkQ29sdW1uU3RhcnQ6dHJ1ZSxmb250V2VpZ2h0OnRydWUsbGluZUNsYW1wOnRydWUsbGluZUhlaWdodDp0cnVlLG9wYWNpdHk6dHJ1ZSxvcmRlcjp0cnVlLG9ycGhhbnM6dHJ1ZSx0YWJTaXplOnRydWUsd2lkb3dzOnRydWUsekluZGV4OnRydWUsem9vbTp0cnVlLC8vIFNWRy1yZWxhdGVkIHByb3BlcnRpZXNcbmZpbGxPcGFjaXR5OnRydWUsZmxvb2RPcGFjaXR5OnRydWUsc3RvcE9wYWNpdHk6dHJ1ZSxzdHJva2VEYXNoYXJyYXk6dHJ1ZSxzdHJva2VEYXNob2Zmc2V0OnRydWUsc3Ryb2tlTWl0ZXJsaW1pdDp0cnVlLHN0cm9rZU9wYWNpdHk6dHJ1ZSxzdHJva2VXaWR0aDp0cnVlfTtmdW5jdGlvbiBhcHBlbmRQeElmTmVlZGVkKHByb3BlcnR5TmFtZSx2YWx1ZSl7dmFyIG5lZWRzUHhTdWZmaXg9IWlzVW5pdGxlc3NOdW1iZXJbcHJvcGVydHlOYW1lXSYmdHlwZW9mIHZhbHVlPT09J251bWJlcicmJnZhbHVlIT09MDtyZXR1cm4gbmVlZHNQeFN1ZmZpeD92YWx1ZSsncHgnOnZhbHVlO31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9hcHBlbmQtcHgtaWYtbmVlZGVkLmpzXG4vLyBtb2R1bGUgaWQgPSA5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPW1hcE9iamVjdDtmdW5jdGlvbiBtYXBPYmplY3Qob2JqZWN0LG1hcHBlcil7cmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCkucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCxrZXkpe3Jlc3VsdFtrZXldPW1hcHBlcihvYmplY3Rba2V5XSxrZXkpO3JldHVybiByZXN1bHQ7fSx7fSk7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL21hcC1vYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDk3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09Y3NzUnVsZVNldFRvU3RyaW5nO3ZhciBfYXBwZW5kUHhJZk5lZWRlZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2FwcGVuZC1weC1pZi1uZWVkZWRcIikpO3ZhciBfY2FtZWxDYXNlUHJvcHNUb0Rhc2hDYXNlPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vY2FtZWwtY2FzZS1wcm9wcy10by1kYXNoLWNhc2VcIikpO3ZhciBfbWFwT2JqZWN0PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbWFwLW9iamVjdFwiKSk7dmFyIF9wcmVmaXhlcj1yZXF1aXJlKFwiLi9wcmVmaXhlclwiKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O31mdW5jdGlvbiBjcmVhdGVNYXJrdXBGb3JTdHlsZXMoc3R5bGUpe3JldHVybiBPYmplY3Qua2V5cyhzdHlsZSkubWFwKGZ1bmN0aW9uKHByb3BlcnR5KXtyZXR1cm4gcHJvcGVydHkrJzogJytzdHlsZVtwcm9wZXJ0eV0rJzsnO30pLmpvaW4oJ1xcbicpO31mdW5jdGlvbiBjc3NSdWxlU2V0VG9TdHJpbmcoc2VsZWN0b3IscnVsZXMsdXNlckFnZW50KXtpZighcnVsZXMpe3JldHVybicnO312YXIgcnVsZXNXaXRoUHg9KDAsX21hcE9iamVjdFtcImRlZmF1bHRcIl0pKHJ1bGVzLGZ1bmN0aW9uKHZhbHVlLGtleSl7cmV0dXJuKDAsX2FwcGVuZFB4SWZOZWVkZWRbXCJkZWZhdWx0XCJdKShrZXksdmFsdWUpO30pO3ZhciBwcmVmaXhlZFJ1bGVzPSgwLF9wcmVmaXhlci5nZXRQcmVmaXhlZFN0eWxlKShydWxlc1dpdGhQeCx1c2VyQWdlbnQpO3ZhciBjc3NQcmVmaXhlZFJ1bGVzPSgwLF9jYW1lbENhc2VQcm9wc1RvRGFzaENhc2VbXCJkZWZhdWx0XCJdKShwcmVmaXhlZFJ1bGVzKTt2YXIgc2VyaWFsaXplZFJ1bGVzPWNyZWF0ZU1hcmt1cEZvclN0eWxlcyhjc3NQcmVmaXhlZFJ1bGVzKTtyZXR1cm4gc2VsZWN0b3IrJ3snK3NlcmlhbGl6ZWRSdWxlcysnfSc7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL2Nzcy1ydWxlLXNldC10by1zdHJpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDk4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09ZXhwb3J0cy5jYW1lbENhc2VUb0Rhc2hDYXNlPXZvaWQgMDt2YXIgX2NhbWVsQ2FzZVJlZ2V4PS8oW2Etel0pPyhbQS1aXSkvZzt2YXIgX2NhbWVsQ2FzZVJlcGxhY2VyPWZ1bmN0aW9uIF9jYW1lbENhc2VSZXBsYWNlcihtYXRjaCxwMSxwMil7cmV0dXJuKHAxfHwnJykrJy0nK3AyLnRvTG93ZXJDYXNlKCk7fTt2YXIgY2FtZWxDYXNlVG9EYXNoQ2FzZT1mdW5jdGlvbiBjYW1lbENhc2VUb0Rhc2hDYXNlKHMpe3JldHVybiBzLnJlcGxhY2UoX2NhbWVsQ2FzZVJlZ2V4LF9jYW1lbENhc2VSZXBsYWNlcik7fTtleHBvcnRzLmNhbWVsQ2FzZVRvRGFzaENhc2U9Y2FtZWxDYXNlVG9EYXNoQ2FzZTt2YXIgY2FtZWxDYXNlUHJvcHNUb0Rhc2hDYXNlPWZ1bmN0aW9uIGNhbWVsQ2FzZVByb3BzVG9EYXNoQ2FzZShwcmVmaXhlZFN0eWxlKXsvLyBTaW5jZSBwcmVmaXggaXMgZXhwZWN0ZWQgdG8gd29yayBvbiBpbmxpbmUgc3R5bGUgb2JqZWN0cywgd2UgbXVzdFxuLy8gdHJhbnNsYXRlIHRoZSBrZXlzIHRvIGRhc2ggY2FzZSBmb3IgcmVuZGVyaW5nIHRvIENTUy5cbnJldHVybiBPYmplY3Qua2V5cyhwcmVmaXhlZFN0eWxlKS5yZWR1Y2UoZnVuY3Rpb24ocmVzdWx0LGtleSl7dmFyIGRhc2hDYXNlS2V5PWNhbWVsQ2FzZVRvRGFzaENhc2Uoa2V5KTsvLyBGaXggSUUgdmVuZG9yIHByZWZpeFxuaWYoL15tcy0vLnRlc3QoZGFzaENhc2VLZXkpKXtkYXNoQ2FzZUtleT1cIi1cIi5jb25jYXQoZGFzaENhc2VLZXkpO31yZXN1bHRbZGFzaENhc2VLZXldPXByZWZpeGVkU3R5bGVba2V5XTtyZXR1cm4gcmVzdWx0O30se30pO307dmFyIF9kZWZhdWx0PWNhbWVsQ2FzZVByb3BzVG9EYXNoQ2FzZTtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9jYW1lbC1jYXNlLXByb3BzLXRvLWRhc2gtY2FzZS5qc1xuLy8gbW9kdWxlIGlkID0gOTlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF90eXBlb2YyPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo7fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZ2V0UHJlZml4ZWRLZXlmcmFtZXM9Z2V0UHJlZml4ZWRLZXlmcmFtZXM7ZXhwb3J0cy5nZXRQcmVmaXhlZFN0eWxlPWdldFByZWZpeGVkU3R5bGU7dmFyIF9jcmVhdGVQcmVmaXhlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL2NyZWF0ZVByZWZpeGVyXCIpKTt2YXIgX2NyZWF0ZVByZWZpeGVyMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9jcmVhdGVQcmVmaXhlclwiKSk7dmFyIF9leGVudj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJleGVudlwiKSk7dmFyIF9zdGF0aWM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wcmVmaXgtZGF0YS9zdGF0aWNcIikpO3ZhciBfZHluYW1pYz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ByZWZpeC1kYXRhL2R5bmFtaWNcIikpO3ZhciBfY2FtZWxDYXNlUHJvcHNUb0Rhc2hDYXNlPXJlcXVpcmUoXCIuL2NhbWVsLWNhc2UtcHJvcHMtdG8tZGFzaC1jYXNlXCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e1wiZGVmYXVsdFwiOm9ian07fWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtpZih0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpPT09XCJzeW1ib2xcIil7X3R5cGVvZj1mdW5jdGlvbiBfdHlwZW9mKG9iail7cmV0dXJuIHR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9O31lbHNle190eXBlb2Y9ZnVuY3Rpb24gX3R5cGVvZihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9O31yZXR1cm4gX3R5cGVvZihvYmopO312YXIgcHJlZml4QWxsPSgwLF9jcmVhdGVQcmVmaXhlcltcImRlZmF1bHRcIl0pKF9zdGF0aWNbXCJkZWZhdWx0XCJdKTt2YXIgSW5saW5lU3R5bGVQcmVmaXhlcj0oMCxfY3JlYXRlUHJlZml4ZXIyW1wiZGVmYXVsdFwiXSkoX2R5bmFtaWNbXCJkZWZhdWx0XCJdLHByZWZpeEFsbCk7ZnVuY3Rpb24gdHJhbnNmb3JtVmFsdWVzKHN0eWxlKXtyZXR1cm4gT2JqZWN0LmtleXMoc3R5bGUpLnJlZHVjZShmdW5jdGlvbihuZXdTdHlsZSxrZXkpe3ZhciB2YWx1ZT1zdHlsZVtrZXldO2lmKEFycmF5LmlzQXJyYXkodmFsdWUpKXt2YWx1ZT12YWx1ZS5qb2luKCc7JytrZXkrJzonKTt9ZWxzZSBpZih2YWx1ZSYmX3R5cGVvZih2YWx1ZSk9PT0nb2JqZWN0JyYmdHlwZW9mIHZhbHVlLnRvU3RyaW5nPT09J2Z1bmN0aW9uJyl7dmFsdWU9dmFsdWUudG9TdHJpbmcoKTt9bmV3U3R5bGVba2V5XT12YWx1ZTtyZXR1cm4gbmV3U3R5bGU7fSx7fSk7fS8vIEZsYXR0ZW4gcHJlZml4ZWQgdmFsdWVzIHRoYXQgYXJlIGFycmF5cyB0byBzdHJpbmdzLlxuLy9cbi8vIFdlIGdldCBwcmVmaXhlZCBzdHlsZXMgYmFjayBpbiB0aGUgZm9ybSBvZjpcbi8vIC0gYGRpc3BsYXk6IFwiZmxleFwiYCBPUlxuLy8gLSBgZGlzcGxheTogXCItd2Via2l0LWZsZXhcImAgT1Jcbi8vIC0gYGRpc3BsYXk6IFsvKiAuLi4gKi8sIFwiLXdlYmtpdC1mbGV4XCIsIFwiZmxleFwiXVxuLy9cbi8vIFRoZSBsYXN0IGZvcm0gaXMgcHJvYmxlbWF0aWMgZm9yIGV2ZW50dWFsIHVzZSBpbiB0aGUgYnJvd3NlciBhbmQgc2VydmVyXG4vLyByZW5kZXIuIE1vcmUgY29uZnVzaW5nbHksIHdlIGhhdmUgdG8gZG8gKipkaWZmZXJlbnQqKiB0aGluZ3Mgb24gdGhlXG4vLyBicm93c2VyIGFuZCBzZXJ2ZXIgKG5vdGVkIGlubGluZSBiZWxvdykuXG4vL1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL0Zvcm1pZGFibGVMYWJzL3JhZGl1bS9pc3N1ZXMvOTU4XG5mdW5jdGlvbiBmbGF0dGVuU3R5bGVWYWx1ZXMoc3R5bGUpe3JldHVybiBPYmplY3Qua2V5cyhzdHlsZSkucmVkdWNlKGZ1bmN0aW9uKG5ld1N0eWxlLGtleSl7dmFyIHZhbD1zdHlsZVtrZXldO2lmKEFycmF5LmlzQXJyYXkodmFsKSl7aWYoX2V4ZW52W1wiZGVmYXVsdFwiXS5jYW5Vc2VET00pey8vIEZvciB0aGUgKipicm93c2VyKiosIHdoZW4gZmFjZWQgd2l0aCBtdWx0aXBsZSB2YWx1ZXMsIHdlIGp1c3QgdGFrZVxuLy8gdGhlICoqbGFzdCoqIG9uZSwgd2hpY2ggaXMgdGhlIG9yaWdpbmFsIHBhc3NlZCBpbiB2YWx1ZSBiZWZvcmVcbi8vIHByZWZpeGluZy4gVGhpcyBfc2hvdWxkXyB3b3JrLCBiZWNhdXNlIGBpbmxpbmUtc3R5bGUtcHJlZml4ZXJgXG4vLyB3ZSdyZSBqdXN0IHBhc3NpbmcgdGhyb3VnaCB3aGF0IHdvdWxkIGhhcHBlbiB3aXRob3V0IElTUC5cbnZhbD12YWxbdmFsLmxlbmd0aC0xXS50b1N0cmluZygpO31lbHNley8vIEZvciB0aGUgKipzZXJ2ZXIqKiwgd2UganVzdCBjb25jYXRlbmF0ZSB0aGluZ3MgdG9nZXRoZXIgYW5kIGNvbnZlcnRcbi8vIHRoZSBzdHlsZSBvYmplY3QgdmFsdWVzIGludG8gYSBoYWNrZWQtdXAgc3RyaW5nIG9mIGxpa2UgYGRpc3BsYXk6XG4vLyBcIi13ZWJraXQtZmxleDtkaXNwbGF5OmZsZXhcImAgdGhhdCB3aWxsIFNTUiByZW5kZXIgY29ycmVjdGx5IHRvIGxpa2Vcbi8vIGBcImRpc3BsYXk6LXdlYmtpdC1mbGV4O2Rpc3BsYXk6ZmxleFwiYCBidXQgd291bGQgb3RoZXJ3aXNlIGJlXG4vLyB0b3RhbGx5IGludmFsaWQgdmFsdWVzLlxuLy8gV2UgY29udmVydCBrZXlzIHRvIGRhc2gtY2FzZSBvbmx5IGZvciB0aGUgc2VyaWFsaXplIHZhbHVlcyBhbmRcbi8vIGxlYXZlIHRoZSByZWFsIGtleSBjYW1lbC1jYXNlZCBzbyBpdCdzIGFzIGV4cGVjdGVkIHRvIFJlYWN0IGFuZFxuLy8gb3RoZXIgcGFydHMgb2YgdGhlIHByb2Nlc3NpbmcgY2hhaW4uXG52YWw9dmFsLmpvaW4oXCI7XCIuY29uY2F0KCgwLF9jYW1lbENhc2VQcm9wc1RvRGFzaENhc2UuY2FtZWxDYXNlVG9EYXNoQ2FzZSkoa2V5KSxcIjpcIikpO319bmV3U3R5bGVba2V5XT12YWw7cmV0dXJuIG5ld1N0eWxlO30se30pO312YXIgX2hhc1dhcm5lZEFib3V0VXNlckFnZW50PWZhbHNlO3ZhciBfbGFzdFVzZXJBZ2VudDt2YXIgX2NhY2hlZFByZWZpeGVyO2Z1bmN0aW9uIGdldFByZWZpeGVyKHVzZXJBZ2VudCl7dmFyIGFjdHVhbFVzZXJBZ2VudD11c2VyQWdlbnR8fGdsb2JhbCYmZ2xvYmFsLm5hdmlnYXRvciYmZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnQ7aWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYhPT0ncHJvZHVjdGlvbicpe2lmKCFhY3R1YWxVc2VyQWdlbnQmJiFfaGFzV2FybmVkQWJvdXRVc2VyQWdlbnQpey8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9jb25zb2xlLndhcm4oJ1JhZGl1bTogdXNlckFnZW50IHNob3VsZCBiZSBzdXBwbGllZCBmb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nLiBTZWUgJysnaHR0cHM6Ly9naXRodWIuY29tL0Zvcm1pZGFibGVMYWJzL3JhZGl1bS90cmVlL21hc3Rlci9kb2NzL2FwaSNyYWRpdW0gJysnZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7LyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovX2hhc1dhcm5lZEFib3V0VXNlckFnZW50PXRydWU7fX1pZihwcm9jZXNzLmVudi5OT0RFX0VOVj09PSd0ZXN0J3x8IV9jYWNoZWRQcmVmaXhlcnx8YWN0dWFsVXNlckFnZW50IT09X2xhc3RVc2VyQWdlbnQpe2lmKGFjdHVhbFVzZXJBZ2VudD09PSdhbGwnKXtfY2FjaGVkUHJlZml4ZXI9e3ByZWZpeDpwcmVmaXhBbGwscHJlZml4ZWRLZXlmcmFtZXM6J2tleWZyYW1lcyd9O31lbHNle19jYWNoZWRQcmVmaXhlcj1uZXcgSW5saW5lU3R5bGVQcmVmaXhlcih7dXNlckFnZW50OmFjdHVhbFVzZXJBZ2VudH0pO31fbGFzdFVzZXJBZ2VudD1hY3R1YWxVc2VyQWdlbnQ7fXJldHVybiBfY2FjaGVkUHJlZml4ZXI7fWZ1bmN0aW9uIGdldFByZWZpeGVkS2V5ZnJhbWVzKHVzZXJBZ2VudCl7cmV0dXJuIGdldFByZWZpeGVyKHVzZXJBZ2VudCkucHJlZml4ZWRLZXlmcmFtZXN8fCdrZXlmcmFtZXMnO30vLyBSZXR1cm5zIGEgbmV3IHN0eWxlIG9iamVjdCB3aXRoIHZlbmRvciBwcmVmaXhlcyBhZGRlZCB0byBwcm9wZXJ0eSBuYW1lcyBhbmRcbi8vIHZhbHVlcy5cbmZ1bmN0aW9uIGdldFByZWZpeGVkU3R5bGUoc3R5bGUsdXNlckFnZW50KXt2YXIgc3R5bGVXaXRoRmFsbGJhY2tzPXRyYW5zZm9ybVZhbHVlcyhzdHlsZSk7dmFyIHByZWZpeGVyPWdldFByZWZpeGVyKHVzZXJBZ2VudCk7dmFyIHByZWZpeGVkU3R5bGU9cHJlZml4ZXIucHJlZml4KHN0eWxlV2l0aEZhbGxiYWNrcyk7dmFyIGZsYXR0ZW5lZFN0eWxlPWZsYXR0ZW5TdHlsZVZhbHVlcyhwcmVmaXhlZFN0eWxlKTtyZXR1cm4gZmxhdHRlbmVkU3R5bGU7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL3ByZWZpeGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PWNyZWF0ZVByZWZpeGVyO3ZhciBfcHJlZml4UHJvcGVydHk9cmVxdWlyZSgnLi4vdXRpbHMvcHJlZml4UHJvcGVydHknKTt2YXIgX3ByZWZpeFByb3BlcnR5Mj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmVmaXhQcm9wZXJ0eSk7dmFyIF9wcmVmaXhWYWx1ZT1yZXF1aXJlKCcuLi91dGlscy9wcmVmaXhWYWx1ZScpO3ZhciBfcHJlZml4VmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByZWZpeFZhbHVlKTt2YXIgX2FkZE5ld1ZhbHVlc09ubHk9cmVxdWlyZSgnLi4vdXRpbHMvYWRkTmV3VmFsdWVzT25seScpO3ZhciBfYWRkTmV3VmFsdWVzT25seTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWRkTmV3VmFsdWVzT25seSk7dmFyIF9pc09iamVjdD1yZXF1aXJlKCcuLi91dGlscy9pc09iamVjdCcpO3ZhciBfaXNPYmplY3QyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzT2JqZWN0KTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fWZ1bmN0aW9uIGNyZWF0ZVByZWZpeGVyKF9yZWYpe3ZhciBwcmVmaXhNYXA9X3JlZi5wcmVmaXhNYXAscGx1Z2lucz1fcmVmLnBsdWdpbnM7ZnVuY3Rpb24gcHJlZml4QWxsKHN0eWxlKXtmb3IodmFyIHByb3BlcnR5IGluIHN0eWxlKXt2YXIgdmFsdWU9c3R5bGVbcHJvcGVydHldOy8vIGhhbmRsZSBuZXN0ZWQgb2JqZWN0c1xuaWYoKDAsX2lzT2JqZWN0Mi5kZWZhdWx0KSh2YWx1ZSkpe3N0eWxlW3Byb3BlcnR5XT1wcmVmaXhBbGwodmFsdWUpOy8vIGhhbmRsZSBhcnJheSB2YWx1ZXNcbn1lbHNlIGlmKEFycmF5LmlzQXJyYXkodmFsdWUpKXt2YXIgY29tYmluZWRWYWx1ZT1bXTtmb3IodmFyIGk9MCxsZW49dmFsdWUubGVuZ3RoO2k8bGVuOysraSl7dmFyIHByb2Nlc3NlZFZhbHVlPSgwLF9wcmVmaXhWYWx1ZTIuZGVmYXVsdCkocGx1Z2lucyxwcm9wZXJ0eSx2YWx1ZVtpXSxzdHlsZSxwcmVmaXhNYXApOygwLF9hZGROZXdWYWx1ZXNPbmx5Mi5kZWZhdWx0KShjb21iaW5lZFZhbHVlLHByb2Nlc3NlZFZhbHVlfHx2YWx1ZVtpXSk7fS8vIG9ubHkgbW9kaWZ5IHRoZSB2YWx1ZSBpZiBpdCB3YXMgdG91Y2hlZFxuLy8gYnkgYW55IHBsdWdpbiB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IG11dGF0aW9uc1xuaWYoY29tYmluZWRWYWx1ZS5sZW5ndGg+MCl7c3R5bGVbcHJvcGVydHldPWNvbWJpbmVkVmFsdWU7fX1lbHNle3ZhciBfcHJvY2Vzc2VkVmFsdWU9KDAsX3ByZWZpeFZhbHVlMi5kZWZhdWx0KShwbHVnaW5zLHByb3BlcnR5LHZhbHVlLHN0eWxlLHByZWZpeE1hcCk7Ly8gb25seSBtb2RpZnkgdGhlIHZhbHVlIGlmIGl0IHdhcyB0b3VjaGVkXG4vLyBieSBhbnkgcGx1Z2luIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgbXV0YXRpb25zXG5pZihfcHJvY2Vzc2VkVmFsdWUpe3N0eWxlW3Byb3BlcnR5XT1fcHJvY2Vzc2VkVmFsdWU7fXN0eWxlPSgwLF9wcmVmaXhQcm9wZXJ0eTIuZGVmYXVsdCkocHJlZml4TWFwLHByb3BlcnR5LHN0eWxlKTt9fXJldHVybiBzdHlsZTt9cmV0dXJuIHByZWZpeEFsbDt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL2NyZWF0ZVByZWZpeGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PXByZWZpeFByb3BlcnR5O3ZhciBfY2FwaXRhbGl6ZVN0cmluZz1yZXF1aXJlKCcuL2NhcGl0YWxpemVTdHJpbmcnKTt2YXIgX2NhcGl0YWxpemVTdHJpbmcyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NhcGl0YWxpemVTdHJpbmcpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gcHJlZml4UHJvcGVydHkocHJlZml4UHJvcGVydGllcyxwcm9wZXJ0eSxzdHlsZSl7aWYocHJlZml4UHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpe3ZhciBuZXdTdHlsZT17fTt2YXIgcmVxdWlyZWRQcmVmaXhlcz1wcmVmaXhQcm9wZXJ0aWVzW3Byb3BlcnR5XTt2YXIgY2FwaXRhbGl6ZWRQcm9wZXJ0eT0oMCxfY2FwaXRhbGl6ZVN0cmluZzIuZGVmYXVsdCkocHJvcGVydHkpO3ZhciBrZXlzPU9iamVjdC5rZXlzKHN0eWxlKTtmb3IodmFyIGk9MDtpPGtleXMubGVuZ3RoO2krKyl7dmFyIHN0eWxlUHJvcGVydHk9a2V5c1tpXTtpZihzdHlsZVByb3BlcnR5PT09cHJvcGVydHkpe2Zvcih2YXIgaj0wO2o8cmVxdWlyZWRQcmVmaXhlcy5sZW5ndGg7aisrKXtuZXdTdHlsZVtyZXF1aXJlZFByZWZpeGVzW2pdK2NhcGl0YWxpemVkUHJvcGVydHldPXN0eWxlW3Byb3BlcnR5XTt9fW5ld1N0eWxlW3N0eWxlUHJvcGVydHldPXN0eWxlW3N0eWxlUHJvcGVydHldO31yZXR1cm4gbmV3U3R5bGU7fXJldHVybiBzdHlsZTt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvcHJlZml4UHJvcGVydHkuanNcbi8vIG1vZHVsZSBpZCA9IDEwMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1jYXBpdGFsaXplU3RyaW5nO2Z1bmN0aW9uIGNhcGl0YWxpemVTdHJpbmcoc3RyKXtyZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3N0ci5zbGljZSgxKTt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci91dGlscy9jYXBpdGFsaXplU3RyaW5nLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9cHJlZml4VmFsdWU7ZnVuY3Rpb24gcHJlZml4VmFsdWUocGx1Z2lucyxwcm9wZXJ0eSx2YWx1ZSxzdHlsZSxtZXRhRGF0YSl7Zm9yKHZhciBpPTAsbGVuPXBsdWdpbnMubGVuZ3RoO2k8bGVuOysraSl7dmFyIHByb2Nlc3NlZFZhbHVlPXBsdWdpbnNbaV0ocHJvcGVydHksdmFsdWUsc3R5bGUsbWV0YURhdGEpOy8vIHdlIGNhbiBzdG9wIHByb2Nlc3NpbmcgaWYgYSB2YWx1ZSBpcyByZXR1cm5lZFxuLy8gYXMgYWxsIHBsdWdpbiBjcml0ZXJpYSBhcmUgdW5pcXVlXG5pZihwcm9jZXNzZWRWYWx1ZSl7cmV0dXJuIHByb2Nlc3NlZFZhbHVlO319fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvcHJlZml4VmFsdWUuanNcbi8vIG1vZHVsZSBpZCA9IDEwNFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1hZGROZXdWYWx1ZXNPbmx5O2Z1bmN0aW9uIGFkZElmTmV3KGxpc3QsdmFsdWUpe2lmKGxpc3QuaW5kZXhPZih2YWx1ZSk9PT0tMSl7bGlzdC5wdXNoKHZhbHVlKTt9fWZ1bmN0aW9uIGFkZE5ld1ZhbHVlc09ubHkobGlzdCx2YWx1ZXMpe2lmKEFycmF5LmlzQXJyYXkodmFsdWVzKSl7Zm9yKHZhciBpPTAsbGVuPXZhbHVlcy5sZW5ndGg7aTxsZW47KytpKXthZGRJZk5ldyhsaXN0LHZhbHVlc1tpXSk7fX1lbHNle2FkZElmTmV3KGxpc3QsdmFsdWVzKTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvYWRkTmV3VmFsdWVzT25seS5qc1xuLy8gbW9kdWxlIGlkID0gMTA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PWlzT2JqZWN0O2Z1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKXtyZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBPYmplY3QmJiFBcnJheS5pc0FycmF5KHZhbHVlKTt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1tcImRlZmF1bHRcIl07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci91dGlscy9pc09iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMTA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKFwidmFsdWVcImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX1yZXR1cm4gZnVuY3Rpb24oQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fTt9KCk7ZXhwb3J0cy5kZWZhdWx0PWNyZWF0ZVByZWZpeGVyO3ZhciBfZ2V0QnJvd3NlckluZm9ybWF0aW9uPXJlcXVpcmUoJy4uL3V0aWxzL2dldEJyb3dzZXJJbmZvcm1hdGlvbicpO3ZhciBfZ2V0QnJvd3NlckluZm9ybWF0aW9uMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRCcm93c2VySW5mb3JtYXRpb24pO3ZhciBfZ2V0UHJlZml4ZWRLZXlmcmFtZXM9cmVxdWlyZSgnLi4vdXRpbHMvZ2V0UHJlZml4ZWRLZXlmcmFtZXMnKTt2YXIgX2dldFByZWZpeGVkS2V5ZnJhbWVzMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcmVmaXhlZEtleWZyYW1lcyk7dmFyIF9jYXBpdGFsaXplU3RyaW5nPXJlcXVpcmUoJy4uL3V0aWxzL2NhcGl0YWxpemVTdHJpbmcnKTt2YXIgX2NhcGl0YWxpemVTdHJpbmcyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NhcGl0YWxpemVTdHJpbmcpO3ZhciBfYWRkTmV3VmFsdWVzT25seT1yZXF1aXJlKCcuLi91dGlscy9hZGROZXdWYWx1ZXNPbmx5Jyk7dmFyIF9hZGROZXdWYWx1ZXNPbmx5Mj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGROZXdWYWx1ZXNPbmx5KTt2YXIgX2lzT2JqZWN0PXJlcXVpcmUoJy4uL3V0aWxzL2lzT2JqZWN0Jyk7dmFyIF9pc09iamVjdDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNPYmplY3QpO3ZhciBfcHJlZml4VmFsdWU9cmVxdWlyZSgnLi4vdXRpbHMvcHJlZml4VmFsdWUnKTt2YXIgX3ByZWZpeFZhbHVlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmVmaXhWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O31mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7fX1mdW5jdGlvbiBjcmVhdGVQcmVmaXhlcihfcmVmKXt2YXIgcHJlZml4TWFwPV9yZWYucHJlZml4TWFwLHBsdWdpbnM9X3JlZi5wbHVnaW5zO3ZhciBmYWxsYmFjaz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06ZnVuY3Rpb24oc3R5bGUpe3JldHVybiBzdHlsZTt9O3JldHVybiBmdW5jdGlvbigpey8qKlxuICAgICAqIEluc3RhbnRpYW50ZSBhIG5ldyBwcmVmaXhlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VyQWdlbnQgLSB1c2VyQWdlbnQgdG8gZ2F0aGVyIHByZWZpeCBpbmZvcm1hdGlvbiBhY2NvcmRpbmcgdG8gY2FuaXVzZS5jb21cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2VlcFVucHJlZml4ZWQgLSBrZWVwcyB1bnByZWZpeGVkIHByb3BlcnRpZXMgYW5kIHZhbHVlc1xuICAgICAqL2Z1bmN0aW9uIFByZWZpeGVyKCl7dmFyIG9wdGlvbnM9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzBdOnt9O19jbGFzc0NhbGxDaGVjayh0aGlzLFByZWZpeGVyKTt2YXIgZGVmYXVsdFVzZXJBZ2VudD10eXBlb2YgbmF2aWdhdG9yIT09J3VuZGVmaW5lZCc/bmF2aWdhdG9yLnVzZXJBZ2VudDp1bmRlZmluZWQ7dGhpcy5fdXNlckFnZW50PW9wdGlvbnMudXNlckFnZW50fHxkZWZhdWx0VXNlckFnZW50O3RoaXMuX2tlZXBVbnByZWZpeGVkPW9wdGlvbnMua2VlcFVucHJlZml4ZWR8fGZhbHNlO2lmKHRoaXMuX3VzZXJBZ2VudCl7dGhpcy5fYnJvd3NlckluZm89KDAsX2dldEJyb3dzZXJJbmZvcm1hdGlvbjIuZGVmYXVsdCkodGhpcy5fdXNlckFnZW50KTt9Ly8gQ2hlY2tzIGlmIHRoZSB1c2VyQWdlbnQgd2FzIHJlc29sdmVkIGNvcnJlY3RseVxuaWYodGhpcy5fYnJvd3NlckluZm8mJnRoaXMuX2Jyb3dzZXJJbmZvLmNzc1ByZWZpeCl7dGhpcy5wcmVmaXhlZEtleWZyYW1lcz0oMCxfZ2V0UHJlZml4ZWRLZXlmcmFtZXMyLmRlZmF1bHQpKHRoaXMuX2Jyb3dzZXJJbmZvLmJyb3dzZXJOYW1lLHRoaXMuX2Jyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uLHRoaXMuX2Jyb3dzZXJJbmZvLmNzc1ByZWZpeCk7fWVsc2V7dGhpcy5fdXNlRmFsbGJhY2s9dHJ1ZTtyZXR1cm4gZmFsc2U7fXZhciBwcmVmaXhEYXRhPXRoaXMuX2Jyb3dzZXJJbmZvLmJyb3dzZXJOYW1lJiZwcmVmaXhNYXBbdGhpcy5fYnJvd3NlckluZm8uYnJvd3Nlck5hbWVdO2lmKHByZWZpeERhdGEpe3RoaXMuX3JlcXVpcmVzUHJlZml4PXt9O2Zvcih2YXIgcHJvcGVydHkgaW4gcHJlZml4RGF0YSl7aWYocHJlZml4RGF0YVtwcm9wZXJ0eV0+PXRoaXMuX2Jyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uKXt0aGlzLl9yZXF1aXJlc1ByZWZpeFtwcm9wZXJ0eV09dHJ1ZTt9fXRoaXMuX2hhc1Byb3BzUmVxdWlyaW5nUHJlZml4PU9iamVjdC5rZXlzKHRoaXMuX3JlcXVpcmVzUHJlZml4KS5sZW5ndGg+MDt9ZWxzZXt0aGlzLl91c2VGYWxsYmFjaz10cnVlO310aGlzLl9tZXRhRGF0YT17YnJvd3NlclZlcnNpb246dGhpcy5fYnJvd3NlckluZm8uYnJvd3NlclZlcnNpb24sYnJvd3Nlck5hbWU6dGhpcy5fYnJvd3NlckluZm8uYnJvd3Nlck5hbWUsY3NzUHJlZml4OnRoaXMuX2Jyb3dzZXJJbmZvLmNzc1ByZWZpeCxqc1ByZWZpeDp0aGlzLl9icm93c2VySW5mby5qc1ByZWZpeCxrZWVwVW5wcmVmaXhlZDp0aGlzLl9rZWVwVW5wcmVmaXhlZCxyZXF1aXJlc1ByZWZpeDp0aGlzLl9yZXF1aXJlc1ByZWZpeH07fV9jcmVhdGVDbGFzcyhQcmVmaXhlcixbe2tleToncHJlZml4Jyx2YWx1ZTpmdW5jdGlvbiBwcmVmaXgoc3R5bGUpey8vIHVzZSBzdGF0aWMgcHJlZml4ZXIgYXMgZmFsbGJhY2sgaWYgdXNlckFnZW50IGNhbiBub3QgYmUgcmVzb2x2ZWRcbmlmKHRoaXMuX3VzZUZhbGxiYWNrKXtyZXR1cm4gZmFsbGJhY2soc3R5bGUpO30vLyBvbmx5IGFkZCBwcmVmaXhlcyBpZiBuZWVkZWRcbmlmKCF0aGlzLl9oYXNQcm9wc1JlcXVpcmluZ1ByZWZpeCl7cmV0dXJuIHN0eWxlO31yZXR1cm4gdGhpcy5fcHJlZml4U3R5bGUoc3R5bGUpO319LHtrZXk6J19wcmVmaXhTdHlsZScsdmFsdWU6ZnVuY3Rpb24gX3ByZWZpeFN0eWxlKHN0eWxlKXtmb3IodmFyIHByb3BlcnR5IGluIHN0eWxlKXt2YXIgdmFsdWU9c3R5bGVbcHJvcGVydHldOy8vIGhhbmRsZSBuZXN0ZWQgb2JqZWN0c1xuaWYoKDAsX2lzT2JqZWN0Mi5kZWZhdWx0KSh2YWx1ZSkpe3N0eWxlW3Byb3BlcnR5XT10aGlzLnByZWZpeCh2YWx1ZSk7Ly8gaGFuZGxlIGFycmF5IHZhbHVlc1xufWVsc2UgaWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpe3ZhciBjb21iaW5lZFZhbHVlPVtdO2Zvcih2YXIgaT0wLGxlbj12YWx1ZS5sZW5ndGg7aTxsZW47KytpKXt2YXIgcHJvY2Vzc2VkVmFsdWU9KDAsX3ByZWZpeFZhbHVlMi5kZWZhdWx0KShwbHVnaW5zLHByb3BlcnR5LHZhbHVlW2ldLHN0eWxlLHRoaXMuX21ldGFEYXRhKTsoMCxfYWRkTmV3VmFsdWVzT25seTIuZGVmYXVsdCkoY29tYmluZWRWYWx1ZSxwcm9jZXNzZWRWYWx1ZXx8dmFsdWVbaV0pO30vLyBvbmx5IG1vZGlmeSB0aGUgdmFsdWUgaWYgaXQgd2FzIHRvdWNoZWRcbi8vIGJ5IGFueSBwbHVnaW4gdG8gcHJldmVudCB1bm5lY2Vzc2FyeSBtdXRhdGlvbnNcbmlmKGNvbWJpbmVkVmFsdWUubGVuZ3RoPjApe3N0eWxlW3Byb3BlcnR5XT1jb21iaW5lZFZhbHVlO319ZWxzZXt2YXIgX3Byb2Nlc3NlZFZhbHVlPSgwLF9wcmVmaXhWYWx1ZTIuZGVmYXVsdCkocGx1Z2lucyxwcm9wZXJ0eSx2YWx1ZSxzdHlsZSx0aGlzLl9tZXRhRGF0YSk7Ly8gb25seSBtb2RpZnkgdGhlIHZhbHVlIGlmIGl0IHdhcyB0b3VjaGVkXG4vLyBieSBhbnkgcGx1Z2luIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgbXV0YXRpb25zXG5pZihfcHJvY2Vzc2VkVmFsdWUpe3N0eWxlW3Byb3BlcnR5XT1fcHJvY2Vzc2VkVmFsdWU7fS8vIGFkZCBwcmVmaXhlcyB0byBwcm9wZXJ0aWVzXG5pZih0aGlzLl9yZXF1aXJlc1ByZWZpeC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpe3N0eWxlW3RoaXMuX2Jyb3dzZXJJbmZvLmpzUHJlZml4KygwLF9jYXBpdGFsaXplU3RyaW5nMi5kZWZhdWx0KShwcm9wZXJ0eSldPXZhbHVlO2lmKCF0aGlzLl9rZWVwVW5wcmVmaXhlZCl7ZGVsZXRlIHN0eWxlW3Byb3BlcnR5XTt9fX19cmV0dXJuIHN0eWxlO30vKipcbiAgICAgICAqIFJldHVybnMgYSBwcmVmaXhlZCB2ZXJzaW9uIG9mIHRoZSBzdHlsZSBvYmplY3QgdXNpbmcgYWxsIHZlbmRvciBwcmVmaXhlc1xuICAgICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyAtIFN0eWxlIG9iamVjdCB0aGF0IGdldHMgcHJlZml4ZWQgcHJvcGVydGllcyBhZGRlZFxuICAgICAgICogQHJldHVybnMge09iamVjdH0gLSBTdHlsZSBvYmplY3Qgd2l0aCBwcmVmaXhlZCBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXNcbiAgICAgICAqL31dLFt7a2V5OidwcmVmaXhBbGwnLHZhbHVlOmZ1bmN0aW9uIHByZWZpeEFsbChzdHlsZXMpe3JldHVybiBmYWxsYmFjayhzdHlsZXMpO319XSk7cmV0dXJuIFByZWZpeGVyO30oKTt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9jcmVhdGVQcmVmaXhlci5qc1xuLy8gbW9kdWxlIGlkID0gMTA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1nZXRCcm93c2VySW5mb3JtYXRpb247dmFyIF9ib3dzZXI9cmVxdWlyZSgnYm93c2VyJyk7dmFyIF9ib3dzZXIyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jvd3Nlcik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O312YXIgcHJlZml4QnlCcm93c2VyPXtjaHJvbWU6J1dlYmtpdCcsc2FmYXJpOidXZWJraXQnLGlvczonV2Via2l0JyxhbmRyb2lkOidXZWJraXQnLHBoYW50b206J1dlYmtpdCcsb3BlcmE6J1dlYmtpdCcsd2Vib3M6J1dlYmtpdCcsYmxhY2tiZXJyeTonV2Via2l0JyxiYWRhOidXZWJraXQnLHRpemVuOidXZWJraXQnLGNocm9taXVtOidXZWJraXQnLHZpdmFsZGk6J1dlYmtpdCcsZmlyZWZveDonTW96JyxzZWFtb25leTonTW96JyxzYWlsZmlzaDonTW96Jyxtc2llOidtcycsbXNlZGdlOidtcyd9O3ZhciBicm93c2VyQnlDYW5JdXNlQWxpYXM9e2Nocm9tZTonY2hyb21lJyxjaHJvbWl1bTonY2hyb21lJyxzYWZhcmk6J3NhZmFyaScsZmlyZm94OidmaXJlZm94Jyxtc2VkZ2U6J2VkZ2UnLG9wZXJhOidvcGVyYScsdml2YWxkaTonb3BlcmEnLG1zaWU6J2llJ307ZnVuY3Rpb24gZ2V0QnJvd3Nlck5hbWUoYnJvd3NlckluZm8pe2lmKGJyb3dzZXJJbmZvLmZpcmVmb3gpe3JldHVybidmaXJlZm94Jzt9aWYoYnJvd3NlckluZm8ubW9iaWxlfHxicm93c2VySW5mby50YWJsZXQpe2lmKGJyb3dzZXJJbmZvLmlvcyl7cmV0dXJuJ2lvc19zYWYnO31lbHNlIGlmKGJyb3dzZXJJbmZvLmFuZHJvaWQpe3JldHVybidhbmRyb2lkJzt9ZWxzZSBpZihicm93c2VySW5mby5vcGVyYSl7cmV0dXJuJ29wX21pbmknO319Zm9yKHZhciBicm93c2VyIGluIGJyb3dzZXJCeUNhbkl1c2VBbGlhcyl7aWYoYnJvd3NlckluZm8uaGFzT3duUHJvcGVydHkoYnJvd3Nlcikpe3JldHVybiBicm93c2VyQnlDYW5JdXNlQWxpYXNbYnJvd3Nlcl07fX19LyoqXG4gKiBVc2VzIGJvd3NlciB0byBnZXQgZGVmYXVsdCBicm93c2VyIGJyb3dzZXJJbmZvcm1hdGlvbiBzdWNoIGFzIHZlcnNpb24gYW5kIG5hbWVcbiAqIEV2YWx1YXRlcyBib3dzZXIgYnJvd3NlckluZm8gYW5kIGFkZHMgdmVuZG9yUHJlZml4IGJyb3dzZXJJbmZvcm1hdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJBZ2VudCAtIHVzZXJBZ2VudCB0aGF0IGdldHMgZXZhbHVhdGVkXG4gKi9mdW5jdGlvbiBnZXRCcm93c2VySW5mb3JtYXRpb24odXNlckFnZW50KXt2YXIgYnJvd3NlckluZm89X2Jvd3NlcjIuZGVmYXVsdC5fZGV0ZWN0KHVzZXJBZ2VudCk7aWYoYnJvd3NlckluZm8ueWFuZGV4YnJvd3Nlcil7YnJvd3NlckluZm89X2Jvd3NlcjIuZGVmYXVsdC5fZGV0ZWN0KHVzZXJBZ2VudC5yZXBsYWNlKC9ZYUJyb3dzZXJcXC9bMC05Ll0qLywnJykpO31mb3IodmFyIGJyb3dzZXIgaW4gcHJlZml4QnlCcm93c2VyKXtpZihicm93c2VySW5mby5oYXNPd25Qcm9wZXJ0eShicm93c2VyKSl7dmFyIHByZWZpeD1wcmVmaXhCeUJyb3dzZXJbYnJvd3Nlcl07YnJvd3NlckluZm8uanNQcmVmaXg9cHJlZml4O2Jyb3dzZXJJbmZvLmNzc1ByZWZpeD0nLScrcHJlZml4LnRvTG93ZXJDYXNlKCkrJy0nO2JyZWFrO319YnJvd3NlckluZm8uYnJvd3Nlck5hbWU9Z2V0QnJvd3Nlck5hbWUoYnJvd3NlckluZm8pOy8vIEZvciBjb3Jkb3ZhIElPUyA4IHRoZSB2ZXJzaW9uIGlzIG1pc3NpbmcsIHNldCB0cnVuY2F0ZWQgb3N2ZXJzaW9uIHRvIHByZXZlbnQgTmFOXG5pZihicm93c2VySW5mby52ZXJzaW9uKXticm93c2VySW5mby5icm93c2VyVmVyc2lvbj1wYXJzZUZsb2F0KGJyb3dzZXJJbmZvLnZlcnNpb24pO31lbHNle2Jyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uPXBhcnNlSW50KHBhcnNlRmxvYXQoYnJvd3NlckluZm8ub3N2ZXJzaW9uKSwxMCk7fWJyb3dzZXJJbmZvLm9zVmVyc2lvbj1wYXJzZUZsb2F0KGJyb3dzZXJJbmZvLm9zdmVyc2lvbik7Ly8gaU9TIGZvcmNlcyBhbGwgYnJvd3NlcnMgdG8gdXNlIFNhZmFyaSB1bmRlciB0aGUgaG9vZFxuLy8gYXMgdGhlIFNhZmFyaSB2ZXJzaW9uIHNlZW1zIHRvIG1hdGNoIHRoZSBpT1MgdmVyc2lvblxuLy8gd2UganVzdCBleHBsaWNpdGVseSB1c2UgdGhlIG9zdmVyc2lvbiBpbnN0ZWFkXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcm9mcmlzY2htYW5uL2lubGluZS1zdHlsZS1wcmVmaXhlci9pc3N1ZXMvNzJcbmlmKGJyb3dzZXJJbmZvLmJyb3dzZXJOYW1lPT09J2lvc19zYWYnJiZicm93c2VySW5mby5icm93c2VyVmVyc2lvbj5icm93c2VySW5mby5vc1ZlcnNpb24pe2Jyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uPWJyb3dzZXJJbmZvLm9zVmVyc2lvbjt9Ly8gc2VwZXJhdGUgbmF0aXZlIGFuZHJvaWQgY2hyb21lXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcm9mcmlzY2htYW5uL2lubGluZS1zdHlsZS1wcmVmaXhlci9pc3N1ZXMvNDVcbmlmKGJyb3dzZXJJbmZvLmJyb3dzZXJOYW1lPT09J2FuZHJvaWQnJiZicm93c2VySW5mby5jaHJvbWUmJmJyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uPjM3KXticm93c2VySW5mby5icm93c2VyTmFtZT0nYW5kX2Nocic7fS8vIEZvciBhbmRyb2lkIDwgNC40IHdlIHdhbnQgdG8gY2hlY2sgdGhlIG9zdmVyc2lvblxuLy8gbm90IHRoZSBjaHJvbWUgdmVyc2lvbiwgc2VlIGlzc3VlICMyNlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3JvZnJpc2NobWFubi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvaXNzdWVzLzI2XG5pZihicm93c2VySW5mby5icm93c2VyTmFtZT09PSdhbmRyb2lkJyYmYnJvd3NlckluZm8ub3NWZXJzaW9uPDUpe2Jyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uPWJyb3dzZXJJbmZvLm9zVmVyc2lvbjt9Ly8gU2Ftc3VuZyBicm93c2VyIGFyZSBiYXNpY2FsbHkgYnVpbGQgb24gQ2hyb21lID4gNDRcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2ZyaXNjaG1hbm4vaW5saW5lLXN0eWxlLXByZWZpeGVyL2lzc3Vlcy8xMDJcbmlmKGJyb3dzZXJJbmZvLmJyb3dzZXJOYW1lPT09J2FuZHJvaWQnJiZicm93c2VySW5mby5zYW1zdW5nQnJvd3Nlcil7YnJvd3NlckluZm8uYnJvd3Nlck5hbWU9J2FuZF9jaHInO2Jyb3dzZXJJbmZvLmJyb3dzZXJWZXJzaW9uPTQ0O31yZXR1cm4gYnJvd3NlckluZm87fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3V0aWxzL2dldEJyb3dzZXJJbmZvcm1hdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvKiFcbiAqIEJvd3NlciAtIGEgYnJvd3NlciBkZXRlY3RvclxuICogaHR0cHM6Ly9naXRodWIuY29tL2RlZC9ib3dzZXJcbiAqIE1JVCBMaWNlbnNlIHwgKGMpIER1c3RpbiBEaWF6IDIwMTVcbiAqLyFmdW5jdGlvbihyb290LG5hbWUsZGVmaW5pdGlvbil7aWYodHlwZW9mIG1vZHVsZSE9J3VuZGVmaW5lZCcmJm1vZHVsZS5leHBvcnRzKW1vZHVsZS5leHBvcnRzPWRlZmluaXRpb24oKTtlbHNlIGlmKHR5cGVvZiBkZWZpbmU9PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpZGVmaW5lKG5hbWUsZGVmaW5pdGlvbik7ZWxzZSByb290W25hbWVdPWRlZmluaXRpb24oKTt9KHVuZGVmaW5lZCwnYm93c2VyJyxmdW5jdGlvbigpey8qKlxuICAgICogU2VlIHVzZXJhZ2VudHMuanMgZm9yIGV4YW1wbGVzIG9mIG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAqL3ZhciB0PXRydWU7ZnVuY3Rpb24gZGV0ZWN0KHVhKXtmdW5jdGlvbiBnZXRGaXJzdE1hdGNoKHJlZ2V4KXt2YXIgbWF0Y2g9dWEubWF0Y2gocmVnZXgpO3JldHVybiBtYXRjaCYmbWF0Y2gubGVuZ3RoPjEmJm1hdGNoWzFdfHwnJzt9ZnVuY3Rpb24gZ2V0U2Vjb25kTWF0Y2gocmVnZXgpe3ZhciBtYXRjaD11YS5tYXRjaChyZWdleCk7cmV0dXJuIG1hdGNoJiZtYXRjaC5sZW5ndGg+MSYmbWF0Y2hbMl18fCcnO312YXIgaW9zZGV2aWNlPWdldEZpcnN0TWF0Y2goLyhpcG9kfGlwaG9uZXxpcGFkKS9pKS50b0xvd2VyQ2FzZSgpLGxpa2VBbmRyb2lkPS9saWtlIGFuZHJvaWQvaS50ZXN0KHVhKSxhbmRyb2lkPSFsaWtlQW5kcm9pZCYmL2FuZHJvaWQvaS50ZXN0KHVhKSxuZXh1c01vYmlsZT0vbmV4dXNcXHMqWzAtNl1cXHMqL2kudGVzdCh1YSksbmV4dXNUYWJsZXQ9IW5leHVzTW9iaWxlJiYvbmV4dXNcXHMqWzAtOV0rL2kudGVzdCh1YSksY2hyb21lb3M9L0NyT1MvLnRlc3QodWEpLHNpbGs9L3NpbGsvaS50ZXN0KHVhKSxzYWlsZmlzaD0vc2FpbGZpc2gvaS50ZXN0KHVhKSx0aXplbj0vdGl6ZW4vaS50ZXN0KHVhKSx3ZWJvcz0vKHdlYnxocHcpb3MvaS50ZXN0KHVhKSx3aW5kb3dzcGhvbmU9L3dpbmRvd3MgcGhvbmUvaS50ZXN0KHVhKSxzYW1zdW5nQnJvd3Nlcj0vU2Ftc3VuZ0Jyb3dzZXIvaS50ZXN0KHVhKSx3aW5kb3dzPSF3aW5kb3dzcGhvbmUmJi93aW5kb3dzL2kudGVzdCh1YSksbWFjPSFpb3NkZXZpY2UmJiFzaWxrJiYvbWFjaW50b3NoL2kudGVzdCh1YSksbGludXg9IWFuZHJvaWQmJiFzYWlsZmlzaCYmIXRpemVuJiYhd2Vib3MmJi9saW51eC9pLnRlc3QodWEpLGVkZ2VWZXJzaW9uPWdldFNlY29uZE1hdGNoKC9lZGcoW2VhXXxpb3MpXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSx2ZXJzaW9uSWRlbnRpZmllcj1nZXRGaXJzdE1hdGNoKC92ZXJzaW9uXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSx0YWJsZXQ9L3RhYmxldC9pLnRlc3QodWEpJiYhL3RhYmxldCBwYy9pLnRlc3QodWEpLG1vYmlsZT0hdGFibGV0JiYvW14tXW1vYmkvaS50ZXN0KHVhKSx4Ym94PS94Ym94L2kudGVzdCh1YSkscmVzdWx0O2lmKC9vcGVyYS9pLnRlc3QodWEpKXsvLyAgYW4gb2xkIE9wZXJhXG5yZXN1bHQ9e25hbWU6J09wZXJhJyxvcGVyYTp0LHZlcnNpb246dmVyc2lvbklkZW50aWZpZXJ8fGdldEZpcnN0TWF0Y2goLyg/Om9wZXJhfG9wcnxvcGlvcylbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKC9vcHJcXC98b3Bpb3MvaS50ZXN0KHVhKSl7Ly8gYSBuZXcgT3BlcmFcbnJlc3VsdD17bmFtZTonT3BlcmEnLG9wZXJhOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC8oPzpvcHJ8b3Bpb3MpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpfHx2ZXJzaW9uSWRlbnRpZmllcn07fWVsc2UgaWYoL1NhbXN1bmdCcm93c2VyL2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZCcsc2Ftc3VuZ0Jyb3dzZXI6dCx2ZXJzaW9uOnZlcnNpb25JZGVudGlmaWVyfHxnZXRGaXJzdE1hdGNoKC8oPzpTYW1zdW5nQnJvd3NlcilbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKC9jb2FzdC9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J09wZXJhIENvYXN0Jyxjb2FzdDp0LHZlcnNpb246dmVyc2lvbklkZW50aWZpZXJ8fGdldEZpcnN0TWF0Y2goLyg/OmNvYXN0KVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX07fWVsc2UgaWYoL3lhYnJvd3Nlci9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J1lhbmRleCBCcm93c2VyJyx5YW5kZXhicm93c2VyOnQsdmVyc2lvbjp2ZXJzaW9uSWRlbnRpZmllcnx8Z2V0Rmlyc3RNYXRjaCgvKD86eWFicm93c2VyKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX07fWVsc2UgaWYoL3VjYnJvd3Nlci9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J1VDIEJyb3dzZXInLHVjYnJvd3Nlcjp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86dWNicm93c2VyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfTt9ZWxzZSBpZigvbXhpb3MvaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidNYXh0aG9uJyxtYXh0aG9uOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC8oPzpteGlvcylbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX07fWVsc2UgaWYoL2VwaXBoYW55L2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonRXBpcGhhbnknLGVwaXBoYW55OnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC8oPzplcGlwaGFueSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX07fWVsc2UgaWYoL3B1ZmZpbi9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J1B1ZmZpbicscHVmZmluOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC8oPzpwdWZmaW4pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspPykvaSl9O31lbHNlIGlmKC9zbGVpcG5pci9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J1NsZWlwbmlyJyxzbGVpcG5pcjp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86c2xlaXBuaXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl9O31lbHNlIGlmKC9rLW1lbGVvbi9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J0stTWVsZW9uJyxrTWVsZW9uOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC8oPzprLW1lbGVvbilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX07fWVsc2UgaWYod2luZG93c3Bob25lKXtyZXN1bHQ9e25hbWU6J1dpbmRvd3MgUGhvbmUnLG9zbmFtZTonV2luZG93cyBQaG9uZScsd2luZG93c3Bob25lOnR9O2lmKGVkZ2VWZXJzaW9uKXtyZXN1bHQubXNlZGdlPXQ7cmVzdWx0LnZlcnNpb249ZWRnZVZlcnNpb247fWVsc2V7cmVzdWx0Lm1zaWU9dDtyZXN1bHQudmVyc2lvbj1nZXRGaXJzdE1hdGNoKC9pZW1vYmlsZVxcLyhcXGQrKFxcLlxcZCspPykvaSk7fX1lbHNlIGlmKC9tc2llfHRyaWRlbnQvaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidJbnRlcm5ldCBFeHBsb3JlcicsbXNpZTp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86bXNpZSB8cnY6KShcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKGNocm9tZW9zKXtyZXN1bHQ9e25hbWU6J0Nocm9tZScsb3NuYW1lOidDaHJvbWUgT1MnLGNocm9tZW9zOnQsY2hyb21lQm9vazp0LGNocm9tZTp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX07fWVsc2UgaWYoL2VkZyhbZWFdfGlvcykvaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidNaWNyb3NvZnQgRWRnZScsbXNlZGdlOnQsdmVyc2lvbjplZGdlVmVyc2lvbn07fWVsc2UgaWYoL3ZpdmFsZGkvaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidWaXZhbGRpJyx2aXZhbGRpOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC92aXZhbGRpXFwvKFxcZCsoXFwuXFxkKyk/KS9pKXx8dmVyc2lvbklkZW50aWZpZXJ9O31lbHNlIGlmKHNhaWxmaXNoKXtyZXN1bHQ9e25hbWU6J1NhaWxmaXNoJyxvc25hbWU6J1NhaWxmaXNoIE9TJyxzYWlsZmlzaDp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvc2FpbGZpc2hcXHM/YnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKC9zZWFtb25rZXlcXC8vaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidTZWFNb25rZXknLHNlYW1vbmtleTp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvc2VhbW9ua2V5XFwvKFxcZCsoXFwuXFxkKyk/KS9pKX07fWVsc2UgaWYoL2ZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zL2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonRmlyZWZveCcsZmlyZWZveDp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86ZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MpWyBcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX07aWYoL1xcKChtb2JpbGV8dGFibGV0KTtbXlxcKV0qcnY6W1xcZFxcLl0rXFwpL2kudGVzdCh1YSkpe3Jlc3VsdC5maXJlZm94b3M9dDtyZXN1bHQub3NuYW1lPSdGaXJlZm94IE9TJzt9fWVsc2UgaWYoc2lsayl7cmVzdWx0PXtuYW1lOidBbWF6b24gU2lsaycsc2lsazp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvc2lsa1xcLyhcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKC9waGFudG9tL2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonUGhhbnRvbUpTJyxwaGFudG9tOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC9waGFudG9tanNcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTt9ZWxzZSBpZigvc2xpbWVyanMvaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidTbGltZXJKUycsc2xpbWVyOnQsdmVyc2lvbjpnZXRGaXJzdE1hdGNoKC9zbGltZXJqc1xcLyhcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKC9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLnRlc3QodWEpfHwvcmltXFxzdGFibGV0L2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonQmxhY2tCZXJyeScsb3NuYW1lOidCbGFja0JlcnJ5IE9TJyxibGFja2JlcnJ5OnQsdmVyc2lvbjp2ZXJzaW9uSWRlbnRpZmllcnx8Z2V0Rmlyc3RNYXRjaCgvYmxhY2tiZXJyeVtcXGRdK1xcLyhcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKHdlYm9zKXtyZXN1bHQ9e25hbWU6J1dlYk9TJyxvc25hbWU6J1dlYk9TJyx3ZWJvczp0LHZlcnNpb246dmVyc2lvbklkZW50aWZpZXJ8fGdldEZpcnN0TWF0Y2goL3coPzplYik/b3Nicm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX07L3RvdWNocGFkXFwvL2kudGVzdCh1YSkmJihyZXN1bHQudG91Y2hwYWQ9dCk7fWVsc2UgaWYoL2JhZGEvaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidCYWRhJyxvc25hbWU6J0JhZGEnLGJhZGE6dCx2ZXJzaW9uOmdldEZpcnN0TWF0Y2goL2RvbGZpblxcLyhcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKHRpemVuKXtyZXN1bHQ9e25hbWU6J1RpemVuJyxvc25hbWU6J1RpemVuJyx0aXplbjp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKXx8dmVyc2lvbklkZW50aWZpZXJ9O31lbHNlIGlmKC9xdXB6aWxsYS9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J1F1cFppbGxhJyxxdXB6aWxsYTp0LHZlcnNpb246Z2V0Rmlyc3RNYXRjaCgvKD86cXVwemlsbGEpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl8fHZlcnNpb25JZGVudGlmaWVyfTt9ZWxzZSBpZigvY2hyb21pdW0vaS50ZXN0KHVhKSl7cmVzdWx0PXtuYW1lOidDaHJvbWl1bScsY2hyb21pdW06dCx2ZXJzaW9uOmdldEZpcnN0TWF0Y2goLyg/OmNocm9taXVtKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKT8pL2kpfHx2ZXJzaW9uSWRlbnRpZmllcn07fWVsc2UgaWYoL2Nocm9tZXxjcmlvc3xjcm1vL2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonQ2hyb21lJyxjaHJvbWU6dCx2ZXJzaW9uOmdldEZpcnN0TWF0Y2goLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLlxcZCspPykvaSl9O31lbHNlIGlmKGFuZHJvaWQpe3Jlc3VsdD17bmFtZTonQW5kcm9pZCcsdmVyc2lvbjp2ZXJzaW9uSWRlbnRpZmllcn07fWVsc2UgaWYoL3NhZmFyaXxhcHBsZXdlYmtpdC9pLnRlc3QodWEpKXtyZXN1bHQ9e25hbWU6J1NhZmFyaScsc2FmYXJpOnR9O2lmKHZlcnNpb25JZGVudGlmaWVyKXtyZXN1bHQudmVyc2lvbj12ZXJzaW9uSWRlbnRpZmllcjt9fWVsc2UgaWYoaW9zZGV2aWNlKXtyZXN1bHQ9e25hbWU6aW9zZGV2aWNlPT0naXBob25lJz8naVBob25lJzppb3NkZXZpY2U9PSdpcGFkJz8naVBhZCc6J2lQb2QnLy8gV1RGOiB2ZXJzaW9uIGlzIG5vdCBwYXJ0IG9mIHVzZXIgYWdlbnQgaW4gd2ViIGFwcHNcbn07aWYodmVyc2lvbklkZW50aWZpZXIpe3Jlc3VsdC52ZXJzaW9uPXZlcnNpb25JZGVudGlmaWVyO319ZWxzZSBpZigvZ29vZ2xlYm90L2kudGVzdCh1YSkpe3Jlc3VsdD17bmFtZTonR29vZ2xlYm90Jyxnb29nbGVib3Q6dCx2ZXJzaW9uOmdldEZpcnN0TWF0Y2goL2dvb2dsZWJvdFxcLyhcXGQrKFxcLlxcZCspKS9pKXx8dmVyc2lvbklkZW50aWZpZXJ9O31lbHNle3Jlc3VsdD17bmFtZTpnZXRGaXJzdE1hdGNoKC9eKC4qKVxcLyguKikgLyksdmVyc2lvbjpnZXRTZWNvbmRNYXRjaCgvXiguKilcXC8oLiopIC8pfTt9Ly8gc2V0IHdlYmtpdCBvciBnZWNrbyBmbGFnIGZvciBicm93c2VycyBiYXNlZCBvbiB0aGVzZSBlbmdpbmVzXG5pZighcmVzdWx0Lm1zZWRnZSYmLyhhcHBsZSk/d2Via2l0L2kudGVzdCh1YSkpe2lmKC8oYXBwbGUpP3dlYmtpdFxcLzUzN1xcLjM2L2kudGVzdCh1YSkpe3Jlc3VsdC5uYW1lPXJlc3VsdC5uYW1lfHxcIkJsaW5rXCI7cmVzdWx0LmJsaW5rPXQ7fWVsc2V7cmVzdWx0Lm5hbWU9cmVzdWx0Lm5hbWV8fFwiV2Via2l0XCI7cmVzdWx0LndlYmtpdD10O31pZighcmVzdWx0LnZlcnNpb24mJnZlcnNpb25JZGVudGlmaWVyKXtyZXN1bHQudmVyc2lvbj12ZXJzaW9uSWRlbnRpZmllcjt9fWVsc2UgaWYoIXJlc3VsdC5vcGVyYSYmL2dlY2tvXFwvL2kudGVzdCh1YSkpe3Jlc3VsdC5uYW1lPXJlc3VsdC5uYW1lfHxcIkdlY2tvXCI7cmVzdWx0LmdlY2tvPXQ7cmVzdWx0LnZlcnNpb249cmVzdWx0LnZlcnNpb258fGdldEZpcnN0TWF0Y2goL2dlY2tvXFwvKFxcZCsoXFwuXFxkKyk/KS9pKTt9Ly8gc2V0IE9TIGZsYWdzIGZvciBwbGF0Zm9ybXMgdGhhdCBoYXZlIG11bHRpcGxlIGJyb3dzZXJzXG5pZighcmVzdWx0LndpbmRvd3NwaG9uZSYmKGFuZHJvaWR8fHJlc3VsdC5zaWxrKSl7cmVzdWx0LmFuZHJvaWQ9dDtyZXN1bHQub3NuYW1lPSdBbmRyb2lkJzt9ZWxzZSBpZighcmVzdWx0LndpbmRvd3NwaG9uZSYmaW9zZGV2aWNlKXtyZXN1bHRbaW9zZGV2aWNlXT10O3Jlc3VsdC5pb3M9dDtyZXN1bHQub3NuYW1lPSdpT1MnO31lbHNlIGlmKG1hYyl7cmVzdWx0Lm1hYz10O3Jlc3VsdC5vc25hbWU9J21hY09TJzt9ZWxzZSBpZih4Ym94KXtyZXN1bHQueGJveD10O3Jlc3VsdC5vc25hbWU9J1hib3gnO31lbHNlIGlmKHdpbmRvd3Mpe3Jlc3VsdC53aW5kb3dzPXQ7cmVzdWx0Lm9zbmFtZT0nV2luZG93cyc7fWVsc2UgaWYobGludXgpe3Jlc3VsdC5saW51eD10O3Jlc3VsdC5vc25hbWU9J0xpbnV4Jzt9ZnVuY3Rpb24gZ2V0V2luZG93c1ZlcnNpb24ocyl7c3dpdGNoKHMpe2Nhc2UnTlQnOnJldHVybidOVCc7Y2FzZSdYUCc6cmV0dXJuJ1hQJztjYXNlJ05UIDUuMCc6cmV0dXJuJzIwMDAnO2Nhc2UnTlQgNS4xJzpyZXR1cm4nWFAnO2Nhc2UnTlQgNS4yJzpyZXR1cm4nMjAwMyc7Y2FzZSdOVCA2LjAnOnJldHVybidWaXN0YSc7Y2FzZSdOVCA2LjEnOnJldHVybic3JztjYXNlJ05UIDYuMic6cmV0dXJuJzgnO2Nhc2UnTlQgNi4zJzpyZXR1cm4nOC4xJztjYXNlJ05UIDEwLjAnOnJldHVybicxMCc7ZGVmYXVsdDpyZXR1cm4gdW5kZWZpbmVkO319Ly8gT1MgdmVyc2lvbiBleHRyYWN0aW9uXG52YXIgb3NWZXJzaW9uPScnO2lmKHJlc3VsdC53aW5kb3dzKXtvc1ZlcnNpb249Z2V0V2luZG93c1ZlcnNpb24oZ2V0Rmlyc3RNYXRjaCgvV2luZG93cyAoKE5UfFhQKSggXFxkXFxkPy5cXGQpPykvaSkpO31lbHNlIGlmKHJlc3VsdC53aW5kb3dzcGhvbmUpe29zVmVyc2lvbj1nZXRGaXJzdE1hdGNoKC93aW5kb3dzIHBob25lICg/Om9zKT9cXHM/KFxcZCsoXFwuXFxkKykqKS9pKTt9ZWxzZSBpZihyZXN1bHQubWFjKXtvc1ZlcnNpb249Z2V0Rmlyc3RNYXRjaCgvTWFjIE9TIFggKFxcZCsoW19cXC5cXHNdXFxkKykqKS9pKTtvc1ZlcnNpb249b3NWZXJzaW9uLnJlcGxhY2UoL1tfXFxzXS9nLCcuJyk7fWVsc2UgaWYoaW9zZGV2aWNlKXtvc1ZlcnNpb249Z2V0Rmlyc3RNYXRjaCgvb3MgKFxcZCsoW19cXHNdXFxkKykqKSBsaWtlIG1hYyBvcyB4L2kpO29zVmVyc2lvbj1vc1ZlcnNpb24ucmVwbGFjZSgvW19cXHNdL2csJy4nKTt9ZWxzZSBpZihhbmRyb2lkKXtvc1ZlcnNpb249Z2V0Rmlyc3RNYXRjaCgvYW5kcm9pZFsgXFwvLV0oXFxkKyhcXC5cXGQrKSopL2kpO31lbHNlIGlmKHJlc3VsdC53ZWJvcyl7b3NWZXJzaW9uPWdldEZpcnN0TWF0Y2goLyg/OndlYnxocHcpb3NcXC8oXFxkKyhcXC5cXGQrKSopL2kpO31lbHNlIGlmKHJlc3VsdC5ibGFja2JlcnJ5KXtvc1ZlcnNpb249Z2V0Rmlyc3RNYXRjaCgvcmltXFxzdGFibGV0XFxzb3NcXHMoXFxkKyhcXC5cXGQrKSopL2kpO31lbHNlIGlmKHJlc3VsdC5iYWRhKXtvc1ZlcnNpb249Z2V0Rmlyc3RNYXRjaCgvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSk7fWVsc2UgaWYocmVzdWx0LnRpemVuKXtvc1ZlcnNpb249Z2V0Rmlyc3RNYXRjaCgvdGl6ZW5bXFwvXFxzXShcXGQrKFxcLlxcZCspKikvaSk7fWlmKG9zVmVyc2lvbil7cmVzdWx0Lm9zdmVyc2lvbj1vc1ZlcnNpb247fS8vIGRldmljZSB0eXBlIGV4dHJhY3Rpb25cbnZhciBvc01ham9yVmVyc2lvbj0hcmVzdWx0LndpbmRvd3MmJm9zVmVyc2lvbi5zcGxpdCgnLicpWzBdO2lmKHRhYmxldHx8bmV4dXNUYWJsZXR8fGlvc2RldmljZT09J2lwYWQnfHxhbmRyb2lkJiYob3NNYWpvclZlcnNpb249PTN8fG9zTWFqb3JWZXJzaW9uPj00JiYhbW9iaWxlKXx8cmVzdWx0LnNpbGspe3Jlc3VsdC50YWJsZXQ9dDt9ZWxzZSBpZihtb2JpbGV8fGlvc2RldmljZT09J2lwaG9uZSd8fGlvc2RldmljZT09J2lwb2QnfHxhbmRyb2lkfHxuZXh1c01vYmlsZXx8cmVzdWx0LmJsYWNrYmVycnl8fHJlc3VsdC53ZWJvc3x8cmVzdWx0LmJhZGEpe3Jlc3VsdC5tb2JpbGU9dDt9Ly8gR3JhZGVkIEJyb3dzZXIgU3VwcG9ydFxuLy8gaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXVpL2FydGljbGVzL2dic1xuaWYocmVzdWx0Lm1zZWRnZXx8cmVzdWx0Lm1zaWUmJnJlc3VsdC52ZXJzaW9uPj0xMHx8cmVzdWx0LnlhbmRleGJyb3dzZXImJnJlc3VsdC52ZXJzaW9uPj0xNXx8cmVzdWx0LnZpdmFsZGkmJnJlc3VsdC52ZXJzaW9uPj0xLjB8fHJlc3VsdC5jaHJvbWUmJnJlc3VsdC52ZXJzaW9uPj0yMHx8cmVzdWx0LnNhbXN1bmdCcm93c2VyJiZyZXN1bHQudmVyc2lvbj49NHx8cmVzdWx0LmZpcmVmb3gmJnJlc3VsdC52ZXJzaW9uPj0yMC4wfHxyZXN1bHQuc2FmYXJpJiZyZXN1bHQudmVyc2lvbj49Nnx8cmVzdWx0Lm9wZXJhJiZyZXN1bHQudmVyc2lvbj49MTAuMHx8cmVzdWx0LmlvcyYmcmVzdWx0Lm9zdmVyc2lvbiYmcmVzdWx0Lm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF0+PTZ8fHJlc3VsdC5ibGFja2JlcnJ5JiZyZXN1bHQudmVyc2lvbj49MTAuMXx8cmVzdWx0LmNocm9taXVtJiZyZXN1bHQudmVyc2lvbj49MjApe3Jlc3VsdC5hPXQ7fWVsc2UgaWYocmVzdWx0Lm1zaWUmJnJlc3VsdC52ZXJzaW9uPDEwfHxyZXN1bHQuY2hyb21lJiZyZXN1bHQudmVyc2lvbjwyMHx8cmVzdWx0LmZpcmVmb3gmJnJlc3VsdC52ZXJzaW9uPDIwLjB8fHJlc3VsdC5zYWZhcmkmJnJlc3VsdC52ZXJzaW9uPDZ8fHJlc3VsdC5vcGVyYSYmcmVzdWx0LnZlcnNpb248MTAuMHx8cmVzdWx0LmlvcyYmcmVzdWx0Lm9zdmVyc2lvbiYmcmVzdWx0Lm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF08Nnx8cmVzdWx0LmNocm9taXVtJiZyZXN1bHQudmVyc2lvbjwyMCl7cmVzdWx0LmM9dDt9ZWxzZSByZXN1bHQueD10O3JldHVybiByZXN1bHQ7fXZhciBib3dzZXI9ZGV0ZWN0KHR5cGVvZiBuYXZpZ2F0b3IhPT0ndW5kZWZpbmVkJz9uYXZpZ2F0b3IudXNlckFnZW50fHwnJzonJyk7Ym93c2VyLnRlc3Q9ZnVuY3Rpb24oYnJvd3Nlckxpc3Qpe2Zvcih2YXIgaT0wO2k8YnJvd3Nlckxpc3QubGVuZ3RoOysraSl7dmFyIGJyb3dzZXJJdGVtPWJyb3dzZXJMaXN0W2ldO2lmKHR5cGVvZiBicm93c2VySXRlbT09PSdzdHJpbmcnKXtpZihicm93c2VySXRlbSBpbiBib3dzZXIpe3JldHVybiB0cnVlO319fXJldHVybiBmYWxzZTt9Oy8qKlxuICAgKiBHZXQgdmVyc2lvbiBwcmVjaXNpb25zIGNvdW50XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0VmVyc2lvblByZWNpc2lvbihcIjEuMTAuM1wiKSAvLyAzXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVyc2lvblxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL2Z1bmN0aW9uIGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbil7cmV0dXJuIHZlcnNpb24uc3BsaXQoXCIuXCIpLmxlbmd0aDt9LyoqXG4gICAqIEFycmF5OjptYXAgcG9seWZpbGxcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9IGFyclxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL2Z1bmN0aW9uIG1hcChhcnIsaXRlcmF0b3Ipe3ZhciByZXN1bHQ9W10saTtpZihBcnJheS5wcm90b3R5cGUubWFwKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGFycixpdGVyYXRvcik7fWZvcihpPTA7aTxhcnIubGVuZ3RoO2krKyl7cmVzdWx0LnB1c2goaXRlcmF0b3IoYXJyW2ldKSk7fXJldHVybiByZXN1bHQ7fS8qKlxuICAgKiBDYWxjdWxhdGUgYnJvd3NlciB2ZXJzaW9uIHdlaWdodFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMTAuMi4xJywgICcxLjguMi4xLjkwJ10pICAgIC8vIDFcbiAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjAxMC4yLjEnLCAnMS4wOS4yLjEuOTAnXSk7ICAvLyAxXG4gICAqICAgY29tcGFyZVZlcnNpb25zKFsnMS4xMC4yLjEnLCAgJzEuMTAuMi4xJ10pOyAgICAgLy8gMFxuICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMTAuMi4xJywgICcxLjA4MDAuMiddKTsgICAgIC8vIC0xXG4gICAqXG4gICAqIEBwYXJhbSAge0FycmF5PFN0cmluZz59IHZlcnNpb25zIHZlcnNpb25zIHRvIGNvbXBhcmVcbiAgICogQHJldHVybiB7TnVtYmVyfSBjb21wYXJpc29uIHJlc3VsdFxuICAgKi9mdW5jdGlvbiBjb21wYXJlVmVyc2lvbnModmVyc2lvbnMpey8vIDEpIGdldCBjb21tb24gcHJlY2lzaW9uIGZvciBib3RoIHZlcnNpb25zLCBmb3IgZXhhbXBsZSBmb3IgXCIxMC4wXCIgYW5kIFwiOVwiIGl0IHNob3VsZCBiZSAyXG52YXIgcHJlY2lzaW9uPU1hdGgubWF4KGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbnNbMF0pLGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbnNbMV0pKTt2YXIgY2h1bmtzPW1hcCh2ZXJzaW9ucyxmdW5jdGlvbih2ZXJzaW9uKXt2YXIgZGVsdGE9cHJlY2lzaW9uLWdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbik7Ly8gMikgXCI5XCIgLT4gXCI5LjBcIiAoZm9yIHByZWNpc2lvbiA9IDIpXG52ZXJzaW9uPXZlcnNpb24rbmV3IEFycmF5KGRlbHRhKzEpLmpvaW4oXCIuMFwiKTsvLyAzKSBcIjkuMFwiIC0+IFtcIjAwMDAwMDAwMFwiXCIsIFwiMDAwMDAwMDA5XCJdXG5yZXR1cm4gbWFwKHZlcnNpb24uc3BsaXQoXCIuXCIpLGZ1bmN0aW9uKGNodW5rKXtyZXR1cm4gbmV3IEFycmF5KDIwLWNodW5rLmxlbmd0aCkuam9pbihcIjBcIikrY2h1bms7fSkucmV2ZXJzZSgpO30pOy8vIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciBieSByZXZlcnNlZCBjaHVua3MgYXJyYXlcbndoaWxlKC0tcHJlY2lzaW9uPj0wKXsvLyA0KSBjb21wYXJlOiBcIjAwMDAwMDAwOVwiID4gXCIwMDAwMDAwMTBcIiA9IGZhbHNlIChidXQgXCI5XCIgPiBcIjEwXCIgPSB0cnVlKVxuaWYoY2h1bmtzWzBdW3ByZWNpc2lvbl0+Y2h1bmtzWzFdW3ByZWNpc2lvbl0pe3JldHVybiAxO31lbHNlIGlmKGNodW5rc1swXVtwcmVjaXNpb25dPT09Y2h1bmtzWzFdW3ByZWNpc2lvbl0pe2lmKHByZWNpc2lvbj09PTApey8vIGFsbCB2ZXJzaW9uIGNodW5rcyBhcmUgc2FtZVxucmV0dXJuIDA7fX1lbHNle3JldHVybi0xO319fS8qKlxuICAgKiBDaGVjayBpZiBicm93c2VyIGlzIHVuc3VwcG9ydGVkXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgYm93c2VyLmlzVW5zdXBwb3J0ZWRCcm93c2VyKHtcbiAgICogICAgIG1zaWU6IFwiMTBcIixcbiAgICogICAgIGZpcmVmb3g6IFwiMjNcIixcbiAgICogICAgIGNocm9tZTogXCIyOVwiLFxuICAgKiAgICAgc2FmYXJpOiBcIjUuMVwiLFxuICAgKiAgICAgb3BlcmE6IFwiMTZcIixcbiAgICogICAgIHBoYW50b206IFwiNTM0XCJcbiAgICogICB9KTtcbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSAgbWluVmVyc2lvbnMgbWFwIG9mIG1pbmltYWwgdmVyc2lvbiB0byBicm93c2VyXG4gICAqIEBwYXJhbSAge0Jvb2xlYW59IFtzdHJpY3RNb2RlID0gZmFsc2VdIGZsYWcgdG8gcmV0dXJuIGZhbHNlIGlmIGJyb3dzZXIgd2Fzbid0IGZvdW5kIGluIG1hcFxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBbdWFdIHVzZXIgYWdlbnQgc3RyaW5nXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL2Z1bmN0aW9uIGlzVW5zdXBwb3J0ZWRCcm93c2VyKG1pblZlcnNpb25zLHN0cmljdE1vZGUsdWEpe3ZhciBfYm93c2VyPWJvd3NlcjsvLyBtYWtlIHN0cmljdE1vZGUgcGFyYW0gb3B0aW9uYWwgd2l0aCB1YSBwYXJhbSB1c2FnZVxuaWYodHlwZW9mIHN0cmljdE1vZGU9PT0nc3RyaW5nJyl7dWE9c3RyaWN0TW9kZTtzdHJpY3RNb2RlPXZvaWQgMDt9aWYoc3RyaWN0TW9kZT09PXZvaWQgMCl7c3RyaWN0TW9kZT1mYWxzZTt9aWYodWEpe19ib3dzZXI9ZGV0ZWN0KHVhKTt9dmFyIHZlcnNpb249XCJcIitfYm93c2VyLnZlcnNpb247Zm9yKHZhciBicm93c2VyIGluIG1pblZlcnNpb25zKXtpZihtaW5WZXJzaW9ucy5oYXNPd25Qcm9wZXJ0eShicm93c2VyKSl7aWYoX2Jvd3Nlclticm93c2VyXSl7aWYodHlwZW9mIG1pblZlcnNpb25zW2Jyb3dzZXJdIT09J3N0cmluZycpe3Rocm93IG5ldyBFcnJvcignQnJvd3NlciB2ZXJzaW9uIGluIHRoZSBtaW5WZXJzaW9uIG1hcCBzaG91bGQgYmUgYSBzdHJpbmc6ICcrYnJvd3NlcisnOiAnK1N0cmluZyhtaW5WZXJzaW9ucykpO30vLyBicm93c2VyIHZlcnNpb24gYW5kIG1pbiBzdXBwb3J0ZWQgdmVyc2lvbi5cbnJldHVybiBjb21wYXJlVmVyc2lvbnMoW3ZlcnNpb24sbWluVmVyc2lvbnNbYnJvd3Nlcl1dKTwwO319fXJldHVybiBzdHJpY3RNb2RlOy8vIG5vdCBmb3VuZFxufS8qKlxuICAgKiBDaGVjayBpZiBicm93c2VyIGlzIHN1cHBvcnRlZFxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG1pblZlcnNpb25zIG1hcCBvZiBtaW5pbWFsIHZlcnNpb24gdG8gYnJvd3NlclxuICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc3RyaWN0TW9kZSA9IGZhbHNlXSBmbGFnIHRvIHJldHVybiBmYWxzZSBpZiBicm93c2VyIHdhc24ndCBmb3VuZCBpbiBtYXBcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgW3VhXSB1c2VyIGFnZW50IHN0cmluZ1xuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9mdW5jdGlvbiBjaGVjayhtaW5WZXJzaW9ucyxzdHJpY3RNb2RlLHVhKXtyZXR1cm4haXNVbnN1cHBvcnRlZEJyb3dzZXIobWluVmVyc2lvbnMsc3RyaWN0TW9kZSx1YSk7fWJvd3Nlci5pc1Vuc3VwcG9ydGVkQnJvd3Nlcj1pc1Vuc3VwcG9ydGVkQnJvd3Nlcjtib3dzZXIuY29tcGFyZVZlcnNpb25zPWNvbXBhcmVWZXJzaW9ucztib3dzZXIuY2hlY2s9Y2hlY2s7LypcbiAgICogU2V0IG91ciBkZXRlY3QgbWV0aG9kIHRvIHRoZSBtYWluIGJvd3NlciBvYmplY3Qgc28gd2UgY2FuXG4gICAqIHJldXNlIGl0IHRvIHRlc3Qgb3RoZXIgdXNlciBhZ2VudHMuXG4gICAqIFRoaXMgaXMgbmVlZGVkIHRvIGltcGxlbWVudCBmdXR1cmUgdGVzdHMuXG4gICAqL2Jvd3Nlci5fZGV0ZWN0PWRldGVjdDsvKlxuICAgKiBTZXQgb3VyIGRldGVjdCBwdWJsaWMgbWV0aG9kIHRvIHRoZSBtYWluIGJvd3NlciBvYmplY3RcbiAgICogVGhpcyBpcyBuZWVkZWQgdG8gaW1wbGVtZW50IGJvd3NlciBpbiBzZXJ2ZXIgc2lkZVxuICAgKi9ib3dzZXIuZGV0ZWN0PWRldGVjdDtyZXR1cm4gYm93c2VyO30pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9ib3dzZXIvc3JjL2Jvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qc1xuLy8gbW9kdWxlIGlkID0gMTEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1nZXRQcmVmaXhlZEtleWZyYW1lcztmdW5jdGlvbiBnZXRQcmVmaXhlZEtleWZyYW1lcyhicm93c2VyTmFtZSxicm93c2VyVmVyc2lvbixjc3NQcmVmaXgpe3ZhciBwcmVmaXhlZEtleWZyYW1lcz0na2V5ZnJhbWVzJztpZihicm93c2VyTmFtZT09PSdjaHJvbWUnJiZicm93c2VyVmVyc2lvbjw0M3x8KGJyb3dzZXJOYW1lPT09J3NhZmFyaSd8fGJyb3dzZXJOYW1lPT09J2lvc19zYWYnKSYmYnJvd3NlclZlcnNpb248OXx8YnJvd3Nlck5hbWU9PT0nb3BlcmEnJiZicm93c2VyVmVyc2lvbjwzMHx8YnJvd3Nlck5hbWU9PT0nYW5kcm9pZCcmJmJyb3dzZXJWZXJzaW9uPD00LjR8fGJyb3dzZXJOYW1lPT09J2FuZF91Yycpe3JldHVybiBjc3NQcmVmaXgrcHJlZml4ZWRLZXlmcmFtZXM7fXJldHVybiBwcmVmaXhlZEtleWZyYW1lczt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvdXRpbHMvZ2V0UHJlZml4ZWRLZXlmcmFtZXMuanNcbi8vIG1vZHVsZSBpZCA9IDExMVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7dmFyIF90eXBlb2Y9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9Oy8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTUgSmVkIFdhdHNvbi5cbiAgQmFzZWQgb24gY29kZSB0aGF0IGlzIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4qLy8qIGdsb2JhbCBkZWZpbmUgKi8oZnVuY3Rpb24oKXsndXNlIHN0cmljdCc7dmFyIGNhblVzZURPTT0hISh0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcmJndpbmRvdy5kb2N1bWVudCYmd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO3ZhciBFeGVjdXRpb25FbnZpcm9ubWVudD17Y2FuVXNlRE9NOmNhblVzZURPTSxjYW5Vc2VXb3JrZXJzOnR5cGVvZiBXb3JrZXIhPT0ndW5kZWZpbmVkJyxjYW5Vc2VFdmVudExpc3RlbmVyczpjYW5Vc2VET00mJiEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyfHx3aW5kb3cuYXR0YWNoRXZlbnQpLGNhblVzZVZpZXdwb3J0OmNhblVzZURPTSYmISF3aW5kb3cuc2NyZWVufTtpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmX3R5cGVvZihkZWZpbmUuYW1kKT09PSdvYmplY3QnJiZkZWZpbmUuYW1kKXtkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gRXhlY3V0aW9uRW52aXJvbm1lbnQ7fSk7fWVsc2UgaWYodHlwZW9mIG1vZHVsZSE9PSd1bmRlZmluZWQnJiZtb2R1bGUuZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9RXhlY3V0aW9uRW52aXJvbm1lbnQ7fWVsc2V7d2luZG93LkV4ZWN1dGlvbkVudmlyb25tZW50PUV4ZWN1dGlvbkVudmlyb25tZW50O319KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9leGVudi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT12b2lkIDA7dmFyIF9jYWxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9jYWxjXCIpKTt2YXIgX2Nyb3NzRmFkZT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvY3Jvc3NGYWRlXCIpKTt2YXIgX2N1cnNvcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvY3Vyc29yXCIpKTt2YXIgX2ZpbHRlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvZmlsdGVyXCIpKTt2YXIgX2ZsZXg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL2ZsZXhcIikpO3ZhciBfZmxleGJveElFPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9mbGV4Ym94SUVcIikpO3ZhciBfZmxleGJveE9sZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvZmxleGJveE9sZFwiKSk7dmFyIF9ncmFkaWVudD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvZ3JhZGllbnRcIikpO3ZhciBfaW1hZ2VTZXQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL2ltYWdlU2V0XCIpKTt2YXIgX3Bvc2l0aW9uPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9wb3NpdGlvblwiKSk7dmFyIF9zaXppbmc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL3NpemluZ1wiKSk7dmFyIF90cmFuc2l0aW9uPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy90cmFuc2l0aW9uXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O312YXIgdz1bJ1dlYmtpdCddO3ZhciBtPVsnTW96J107dmFyIG1zPVsnbXMnXTt2YXIgd209WydXZWJraXQnLCdNb3onXTt2YXIgd21zPVsnV2Via2l0JywnbXMnXTt2YXIgd21tcz1bJ1dlYmtpdCcsJ01veicsJ21zJ107dmFyIF9kZWZhdWx0PXtwbHVnaW5zOltfY2FsY1tcImRlZmF1bHRcIl0sX2Nyb3NzRmFkZVtcImRlZmF1bHRcIl0sX2N1cnNvcltcImRlZmF1bHRcIl0sX2ZpbHRlcltcImRlZmF1bHRcIl0sX2ZsZXhbXCJkZWZhdWx0XCJdLF9mbGV4Ym94SUVbXCJkZWZhdWx0XCJdLF9mbGV4Ym94T2xkW1wiZGVmYXVsdFwiXSxfZ3JhZGllbnRbXCJkZWZhdWx0XCJdLF9pbWFnZVNldFtcImRlZmF1bHRcIl0sX3Bvc2l0aW9uW1wiZGVmYXVsdFwiXSxfc2l6aW5nW1wiZGVmYXVsdFwiXSxfdHJhbnNpdGlvbltcImRlZmF1bHRcIl1dLHByZWZpeE1hcDp7dHJhbnNmb3JtOndtcyx0cmFuc2Zvcm1PcmlnaW46d21zLHRyYW5zZm9ybU9yaWdpblg6d21zLHRyYW5zZm9ybU9yaWdpblk6d21zLGJhY2tmYWNlVmlzaWJpbGl0eTp3LHBlcnNwZWN0aXZlOncscGVyc3BlY3RpdmVPcmlnaW46dyx0cmFuc2Zvcm1TdHlsZTp3LHRyYW5zZm9ybU9yaWdpblo6dyxhbmltYXRpb246dyxhbmltYXRpb25EZWxheTp3LGFuaW1hdGlvbkRpcmVjdGlvbjp3LGFuaW1hdGlvbkZpbGxNb2RlOncsYW5pbWF0aW9uRHVyYXRpb246dyxhbmltYXRpb25JdGVyYXRpb25Db3VudDp3LGFuaW1hdGlvbk5hbWU6dyxhbmltYXRpb25QbGF5U3RhdGU6dyxhbmltYXRpb25UaW1pbmdGdW5jdGlvbjp3LGFwcGVhcmFuY2U6d20sdXNlclNlbGVjdDp3bW1zLGZvbnRLZXJuaW5nOncsdGV4dEVtcGhhc2lzUG9zaXRpb246dyx0ZXh0RW1waGFzaXM6dyx0ZXh0RW1waGFzaXNTdHlsZTp3LHRleHRFbXBoYXNpc0NvbG9yOncsYm94RGVjb3JhdGlvbkJyZWFrOncsY2xpcFBhdGg6dyxtYXNrSW1hZ2U6dyxtYXNrTW9kZTp3LG1hc2tSZXBlYXQ6dyxtYXNrUG9zaXRpb246dyxtYXNrQ2xpcDp3LG1hc2tPcmlnaW46dyxtYXNrU2l6ZTp3LG1hc2tDb21wb3NpdGU6dyxtYXNrOncsbWFza0JvcmRlclNvdXJjZTp3LG1hc2tCb3JkZXJNb2RlOncsbWFza0JvcmRlclNsaWNlOncsbWFza0JvcmRlcldpZHRoOncsbWFza0JvcmRlck91dHNldDp3LG1hc2tCb3JkZXJSZXBlYXQ6dyxtYXNrQm9yZGVyOncsbWFza1R5cGU6dyx0ZXh0RGVjb3JhdGlvblN0eWxlOndtLHRleHREZWNvcmF0aW9uU2tpcDp3bSx0ZXh0RGVjb3JhdGlvbkxpbmU6d20sdGV4dERlY29yYXRpb25Db2xvcjp3bSxmaWx0ZXI6dyxmb250RmVhdHVyZVNldHRpbmdzOndtLGJyZWFrQWZ0ZXI6d21tcyxicmVha0JlZm9yZTp3bW1zLGJyZWFrSW5zaWRlOndtbXMsY29sdW1uQ291bnQ6d20sY29sdW1uRmlsbDp3bSxjb2x1bW5HYXA6d20sY29sdW1uUnVsZTp3bSxjb2x1bW5SdWxlQ29sb3I6d20sY29sdW1uUnVsZVN0eWxlOndtLGNvbHVtblJ1bGVXaWR0aDp3bSxjb2x1bW5zOndtLGNvbHVtblNwYW46d20sY29sdW1uV2lkdGg6d20sd3JpdGluZ01vZGU6d21zLGZsZXg6d21zLGZsZXhCYXNpczp3LGZsZXhEaXJlY3Rpb246d21zLGZsZXhHcm93OncsZmxleEZsb3c6d21zLGZsZXhTaHJpbms6dyxmbGV4V3JhcDp3bXMsYWxpZ25Db250ZW50OncsYWxpZ25JdGVtczp3LGFsaWduU2VsZjp3LGp1c3RpZnlDb250ZW50Oncsb3JkZXI6dyx0cmFuc2l0aW9uRGVsYXk6dyx0cmFuc2l0aW9uRHVyYXRpb246dyx0cmFuc2l0aW9uUHJvcGVydHk6dyx0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246dyxiYWNrZHJvcEZpbHRlcjp3LHNjcm9sbFNuYXBUeXBlOndtcyxzY3JvbGxTbmFwUG9pbnRzWDp3bXMsc2Nyb2xsU25hcFBvaW50c1k6d21zLHNjcm9sbFNuYXBEZXN0aW5hdGlvbjp3bXMsc2Nyb2xsU25hcENvb3JkaW5hdGU6d21zLHNoYXBlSW1hZ2VUaHJlc2hvbGQ6dyxzaGFwZUltYWdlTWFyZ2luOncsc2hhcGVJbWFnZU91dHNpZGU6dyxoeXBoZW5zOndtbXMsZmxvd0ludG86d21zLGZsb3dGcm9tOndtcyxyZWdpb25GcmFnbWVudDp3bXMsYm94U2l6aW5nOm0sdGV4dEFsaWduTGFzdDptLHRhYlNpemU6bSx3cmFwRmxvdzptcyx3cmFwVGhyb3VnaDptcyx3cmFwTWFyZ2luOm1zLHRvdWNoQWN0aW9uOm1zLGdyaWRUZW1wbGF0ZUNvbHVtbnM6bXMsZ3JpZFRlbXBsYXRlUm93czptcyxncmlkVGVtcGxhdGVBcmVhczptcyxncmlkVGVtcGxhdGU6bXMsZ3JpZEF1dG9Db2x1bW5zOm1zLGdyaWRBdXRvUm93czptcyxncmlkQXV0b0Zsb3c6bXMsZ3JpZDptcyxncmlkUm93U3RhcnQ6bXMsZ3JpZENvbHVtblN0YXJ0Om1zLGdyaWRSb3dFbmQ6bXMsZ3JpZFJvdzptcyxncmlkQ29sdW1uOm1zLGdyaWRDb2x1bW5FbmQ6bXMsZ3JpZENvbHVtbkdhcDptcyxncmlkUm93R2FwOm1zLGdyaWRBcmVhOm1zLGdyaWRHYXA6bXMsdGV4dFNpemVBZGp1c3Q6d21zLGJvcmRlckltYWdlOncsYm9yZGVySW1hZ2VPdXRzZXQ6dyxib3JkZXJJbWFnZVJlcGVhdDp3LGJvcmRlckltYWdlU2xpY2U6dyxib3JkZXJJbWFnZVNvdXJjZTp3LGJvcmRlckltYWdlV2lkdGg6d319O2V4cG9ydHNbXCJkZWZhdWx0XCJdPV9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL3ByZWZpeC1kYXRhL3N0YXRpYy5qc1xuLy8gbW9kdWxlIGlkID0gMTE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1jYWxjO3ZhciBfaXNQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJ2Nzcy1pbi1qcy11dGlscy9saWIvaXNQcmVmaXhlZFZhbHVlJyk7dmFyIF9pc1ByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzUHJlZml4ZWRWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O312YXIgcHJlZml4ZXM9Wyctd2Via2l0LScsJy1tb3otJywnJ107ZnVuY3Rpb24gY2FsYyhwcm9wZXJ0eSx2YWx1ZSl7aWYodHlwZW9mIHZhbHVlPT09J3N0cmluZycmJiEoMCxfaXNQcmVmaXhlZFZhbHVlMi5kZWZhdWx0KSh2YWx1ZSkmJnZhbHVlLmluZGV4T2YoJ2NhbGMoJyk+LTEpe3JldHVybiBwcmVmaXhlcy5tYXAoZnVuY3Rpb24ocHJlZml4KXtyZXR1cm4gdmFsdWUucmVwbGFjZSgvY2FsY1xcKC9nLHByZWZpeCsnY2FsYygnKTt9KTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL2NhbGMuanNcbi8vIG1vZHVsZSBpZCA9IDExNVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9aXNQcmVmaXhlZFZhbHVlO3ZhciByZWdleD0vLXdlYmtpdC18LW1vei18LW1zLS87ZnVuY3Rpb24gaXNQcmVmaXhlZFZhbHVlKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlPT09J3N0cmluZycmJnJlZ2V4LnRlc3QodmFsdWUpO31tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2Nzcy1pbi1qcy11dGlscy9saWIvaXNQcmVmaXhlZFZhbHVlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PWNyb3NzRmFkZTt2YXIgX2lzUHJlZml4ZWRWYWx1ZT1yZXF1aXJlKCdjc3MtaW4tanMtdXRpbHMvbGliL2lzUHJlZml4ZWRWYWx1ZScpO3ZhciBfaXNQcmVmaXhlZFZhbHVlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1ByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9Ly8gaHR0cDovL2Nhbml1c2UuY29tLyNzZWFyY2g9Y3Jvc3MtZmFkZVxudmFyIHByZWZpeGVzPVsnLXdlYmtpdC0nLCcnXTtmdW5jdGlvbiBjcm9zc0ZhZGUocHJvcGVydHksdmFsdWUpe2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiYhKDAsX2lzUHJlZml4ZWRWYWx1ZTIuZGVmYXVsdCkodmFsdWUpJiZ2YWx1ZS5pbmRleE9mKCdjcm9zcy1mYWRlKCcpPi0xKXtyZXR1cm4gcHJlZml4ZXMubWFwKGZ1bmN0aW9uKHByZWZpeCl7cmV0dXJuIHZhbHVlLnJlcGxhY2UoL2Nyb3NzLWZhZGVcXCgvZyxwcmVmaXgrJ2Nyb3NzLWZhZGUoJyk7fSk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9jcm9zc0ZhZGUuanNcbi8vIG1vZHVsZSBpZCA9IDExN1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9Y3Vyc29yO3ZhciBwcmVmaXhlcz1bJy13ZWJraXQtJywnLW1vei0nLCcnXTt2YXIgdmFsdWVzPXsnem9vbS1pbic6dHJ1ZSwnem9vbS1vdXQnOnRydWUsZ3JhYjp0cnVlLGdyYWJiaW5nOnRydWV9O2Z1bmN0aW9uIGN1cnNvcihwcm9wZXJ0eSx2YWx1ZSl7aWYocHJvcGVydHk9PT0nY3Vyc29yJyYmdmFsdWVzLmhhc093blByb3BlcnR5KHZhbHVlKSl7cmV0dXJuIHByZWZpeGVzLm1hcChmdW5jdGlvbihwcmVmaXgpe3JldHVybiBwcmVmaXgrdmFsdWU7fSk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9jdXJzb3IuanNcbi8vIG1vZHVsZSBpZCA9IDExOFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9ZmlsdGVyO3ZhciBfaXNQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJ2Nzcy1pbi1qcy11dGlscy9saWIvaXNQcmVmaXhlZFZhbHVlJyk7dmFyIF9pc1ByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzUHJlZml4ZWRWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O30vLyBodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9Y3NzLWZpbHRlci1mdW5jdGlvblxudmFyIHByZWZpeGVzPVsnLXdlYmtpdC0nLCcnXTtmdW5jdGlvbiBmaWx0ZXIocHJvcGVydHksdmFsdWUpe2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiYhKDAsX2lzUHJlZml4ZWRWYWx1ZTIuZGVmYXVsdCkodmFsdWUpJiZ2YWx1ZS5pbmRleE9mKCdmaWx0ZXIoJyk+LTEpe3JldHVybiBwcmVmaXhlcy5tYXAoZnVuY3Rpb24ocHJlZml4KXtyZXR1cm4gdmFsdWUucmVwbGFjZSgvZmlsdGVyXFwoL2cscHJlZml4KydmaWx0ZXIoJyk7fSk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDExOVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9ZmxleDt2YXIgdmFsdWVzPXtmbGV4OlsnLXdlYmtpdC1ib3gnLCctbW96LWJveCcsJy1tcy1mbGV4Ym94JywnLXdlYmtpdC1mbGV4JywnZmxleCddLCdpbmxpbmUtZmxleCc6Wyctd2Via2l0LWlubGluZS1ib3gnLCctbW96LWlubGluZS1ib3gnLCctbXMtaW5saW5lLWZsZXhib3gnLCctd2Via2l0LWlubGluZS1mbGV4JywnaW5saW5lLWZsZXgnXX07ZnVuY3Rpb24gZmxleChwcm9wZXJ0eSx2YWx1ZSl7aWYocHJvcGVydHk9PT0nZGlzcGxheScmJnZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpe3JldHVybiB2YWx1ZXNbdmFsdWVdO319bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvc3RhdGljL3BsdWdpbnMvZmxleC5qc1xuLy8gbW9kdWxlIGlkID0gMTIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1mbGV4Ym94SUU7dmFyIGFsdGVybmF0aXZlVmFsdWVzPXsnc3BhY2UtYXJvdW5kJzonZGlzdHJpYnV0ZScsJ3NwYWNlLWJldHdlZW4nOidqdXN0aWZ5JywnZmxleC1zdGFydCc6J3N0YXJ0JywnZmxleC1lbmQnOidlbmQnfTt2YXIgYWx0ZXJuYXRpdmVQcm9wcz17YWxpZ25Db250ZW50Oidtc0ZsZXhMaW5lUGFjaycsYWxpZ25TZWxmOidtc0ZsZXhJdGVtQWxpZ24nLGFsaWduSXRlbXM6J21zRmxleEFsaWduJyxqdXN0aWZ5Q29udGVudDonbXNGbGV4UGFjaycsb3JkZXI6J21zRmxleE9yZGVyJyxmbGV4R3JvdzonbXNGbGV4UG9zaXRpdmUnLGZsZXhTaHJpbms6J21zRmxleE5lZ2F0aXZlJyxmbGV4QmFzaXM6J21zRmxleFByZWZlcnJlZFNpemUnfTtmdW5jdGlvbiBmbGV4Ym94SUUocHJvcGVydHksdmFsdWUsc3R5bGUpe2lmKGFsdGVybmF0aXZlUHJvcHMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKXtzdHlsZVthbHRlcm5hdGl2ZVByb3BzW3Byb3BlcnR5XV09YWx0ZXJuYXRpdmVWYWx1ZXNbdmFsdWVdfHx2YWx1ZTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL2ZsZXhib3hJRS5qc1xuLy8gbW9kdWxlIGlkID0gMTIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1mbGV4Ym94T2xkO3ZhciBhbHRlcm5hdGl2ZVZhbHVlcz17J3NwYWNlLWFyb3VuZCc6J2p1c3RpZnknLCdzcGFjZS1iZXR3ZWVuJzonanVzdGlmeScsJ2ZsZXgtc3RhcnQnOidzdGFydCcsJ2ZsZXgtZW5kJzonZW5kJywnd3JhcC1yZXZlcnNlJzonbXVsdGlwbGUnLHdyYXA6J211bHRpcGxlJyxmbGV4Oidib3gnLCdpbmxpbmUtZmxleCc6J2lubGluZS1ib3gnfTt2YXIgYWx0ZXJuYXRpdmVQcm9wcz17YWxpZ25JdGVtczonV2Via2l0Qm94QWxpZ24nLGp1c3RpZnlDb250ZW50OidXZWJraXRCb3hQYWNrJyxmbGV4V3JhcDonV2Via2l0Qm94TGluZXMnLGZsZXhHcm93OidXZWJraXRCb3hGbGV4J307ZnVuY3Rpb24gZmxleGJveE9sZChwcm9wZXJ0eSx2YWx1ZSxzdHlsZSl7aWYocHJvcGVydHk9PT0nZmxleERpcmVjdGlvbicmJnR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnKXtpZih2YWx1ZS5pbmRleE9mKCdjb2x1bW4nKT4tMSl7c3R5bGUuV2Via2l0Qm94T3JpZW50PSd2ZXJ0aWNhbCc7fWVsc2V7c3R5bGUuV2Via2l0Qm94T3JpZW50PSdob3Jpem9udGFsJzt9aWYodmFsdWUuaW5kZXhPZigncmV2ZXJzZScpPi0xKXtzdHlsZS5XZWJraXRCb3hEaXJlY3Rpb249J3JldmVyc2UnO31lbHNle3N0eWxlLldlYmtpdEJveERpcmVjdGlvbj0nbm9ybWFsJzt9fWlmKGFsdGVybmF0aXZlUHJvcHMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKXtzdHlsZVthbHRlcm5hdGl2ZVByb3BzW3Byb3BlcnR5XV09YWx0ZXJuYXRpdmVWYWx1ZXNbdmFsdWVdfHx2YWx1ZTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL2ZsZXhib3hPbGQuanNcbi8vIG1vZHVsZSBpZCA9IDEyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9Z3JhZGllbnQ7dmFyIF9pc1ByZWZpeGVkVmFsdWU9cmVxdWlyZSgnY3NzLWluLWpzLXV0aWxzL2xpYi9pc1ByZWZpeGVkVmFsdWUnKTt2YXIgX2lzUHJlZml4ZWRWYWx1ZTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNQcmVmaXhlZFZhbHVlKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fXZhciBwcmVmaXhlcz1bJy13ZWJraXQtJywnLW1vei0nLCcnXTt2YXIgdmFsdWVzPS9saW5lYXItZ3JhZGllbnR8cmFkaWFsLWdyYWRpZW50fHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnR8cmVwZWF0aW5nLXJhZGlhbC1ncmFkaWVudC9naTtmdW5jdGlvbiBncmFkaWVudChwcm9wZXJ0eSx2YWx1ZSl7aWYodHlwZW9mIHZhbHVlPT09J3N0cmluZycmJiEoMCxfaXNQcmVmaXhlZFZhbHVlMi5kZWZhdWx0KSh2YWx1ZSkmJnZhbHVlcy50ZXN0KHZhbHVlKSl7cmV0dXJuIHByZWZpeGVzLm1hcChmdW5jdGlvbihwcmVmaXgpe3JldHVybiB2YWx1ZS5yZXBsYWNlKHZhbHVlcyxmdW5jdGlvbihncmFkKXtyZXR1cm4gcHJlZml4K2dyYWQ7fSk7fSk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9ncmFkaWVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1pbWFnZVNldDt2YXIgX2lzUHJlZml4ZWRWYWx1ZT1yZXF1aXJlKCdjc3MtaW4tanMtdXRpbHMvbGliL2lzUHJlZml4ZWRWYWx1ZScpO3ZhciBfaXNQcmVmaXhlZFZhbHVlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1ByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9Ly8gaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWNzcy1pbWFnZS1zZXRcbnZhciBwcmVmaXhlcz1bJy13ZWJraXQtJywnJ107ZnVuY3Rpb24gaW1hZ2VTZXQocHJvcGVydHksdmFsdWUpe2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiYhKDAsX2lzUHJlZml4ZWRWYWx1ZTIuZGVmYXVsdCkodmFsdWUpJiZ2YWx1ZS5pbmRleE9mKCdpbWFnZS1zZXQoJyk+LTEpe3JldHVybiBwcmVmaXhlcy5tYXAoZnVuY3Rpb24ocHJlZml4KXtyZXR1cm4gdmFsdWUucmVwbGFjZSgvaW1hZ2Utc2V0XFwoL2cscHJlZml4KydpbWFnZS1zZXQoJyk7fSk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9pbWFnZVNldC5qc1xuLy8gbW9kdWxlIGlkID0gMTI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1wb3NpdGlvbjtmdW5jdGlvbiBwb3NpdGlvbihwcm9wZXJ0eSx2YWx1ZSl7aWYocHJvcGVydHk9PT0ncG9zaXRpb24nJiZ2YWx1ZT09PSdzdGlja3knKXtyZXR1cm5bJy13ZWJraXQtc3RpY2t5Jywnc3RpY2t5J107fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9zdGF0aWMvcGx1Z2lucy9wb3NpdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1zaXppbmc7dmFyIHByZWZpeGVzPVsnLXdlYmtpdC0nLCctbW96LScsJyddO3ZhciBwcm9wZXJ0aWVzPXttYXhIZWlnaHQ6dHJ1ZSxtYXhXaWR0aDp0cnVlLHdpZHRoOnRydWUsaGVpZ2h0OnRydWUsY29sdW1uV2lkdGg6dHJ1ZSxtaW5XaWR0aDp0cnVlLG1pbkhlaWdodDp0cnVlfTt2YXIgdmFsdWVzPXsnbWluLWNvbnRlbnQnOnRydWUsJ21heC1jb250ZW50Jzp0cnVlLCdmaWxsLWF2YWlsYWJsZSc6dHJ1ZSwnZml0LWNvbnRlbnQnOnRydWUsJ2NvbnRhaW4tZmxvYXRzJzp0cnVlfTtmdW5jdGlvbiBzaXppbmcocHJvcGVydHksdmFsdWUpe2lmKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpJiZ2YWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWUpKXtyZXR1cm4gcHJlZml4ZXMubWFwKGZ1bmN0aW9uKHByZWZpeCl7cmV0dXJuIHByZWZpeCt2YWx1ZTt9KTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL3NpemluZy5qc1xuLy8gbW9kdWxlIGlkID0gMTI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD10cmFuc2l0aW9uO3ZhciBfaHlwaGVuYXRlUHJvcGVydHk9cmVxdWlyZSgnY3NzLWluLWpzLXV0aWxzL2xpYi9oeXBoZW5hdGVQcm9wZXJ0eScpO3ZhciBfaHlwaGVuYXRlUHJvcGVydHkyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h5cGhlbmF0ZVByb3BlcnR5KTt2YXIgX2lzUHJlZml4ZWRWYWx1ZT1yZXF1aXJlKCdjc3MtaW4tanMtdXRpbHMvbGliL2lzUHJlZml4ZWRWYWx1ZScpO3ZhciBfaXNQcmVmaXhlZFZhbHVlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1ByZWZpeGVkVmFsdWUpO3ZhciBfY2FwaXRhbGl6ZVN0cmluZz1yZXF1aXJlKCcuLi8uLi91dGlscy9jYXBpdGFsaXplU3RyaW5nJyk7dmFyIF9jYXBpdGFsaXplU3RyaW5nMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jYXBpdGFsaXplU3RyaW5nKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fXZhciBwcm9wZXJ0aWVzPXt0cmFuc2l0aW9uOnRydWUsdHJhbnNpdGlvblByb3BlcnR5OnRydWUsV2Via2l0VHJhbnNpdGlvbjp0cnVlLFdlYmtpdFRyYW5zaXRpb25Qcm9wZXJ0eTp0cnVlLE1velRyYW5zaXRpb246dHJ1ZSxNb3pUcmFuc2l0aW9uUHJvcGVydHk6dHJ1ZX07dmFyIHByZWZpeE1hcHBpbmc9e1dlYmtpdDonLXdlYmtpdC0nLE1vejonLW1vei0nLG1zOictbXMtJ307ZnVuY3Rpb24gcHJlZml4VmFsdWUodmFsdWUscHJvcGVydHlQcmVmaXhNYXApe2lmKCgwLF9pc1ByZWZpeGVkVmFsdWUyLmRlZmF1bHQpKHZhbHVlKSl7cmV0dXJuIHZhbHVlO30vLyBvbmx5IHNwbGl0IG11bHRpIHZhbHVlcywgbm90IGN1YmljIGJlemllcnNcbnZhciBtdWx0aXBsZVZhbHVlcz12YWx1ZS5zcGxpdCgvLCg/IVteKCldKig/OlxcKFteKCldKlxcKSk/XFwpKS9nKTtmb3IodmFyIGk9MCxsZW49bXVsdGlwbGVWYWx1ZXMubGVuZ3RoO2k8bGVuOysraSl7dmFyIHNpbmdsZVZhbHVlPW11bHRpcGxlVmFsdWVzW2ldO3ZhciB2YWx1ZXM9W3NpbmdsZVZhbHVlXTtmb3IodmFyIHByb3BlcnR5IGluIHByb3BlcnR5UHJlZml4TWFwKXt2YXIgZGFzaENhc2VQcm9wZXJ0eT0oMCxfaHlwaGVuYXRlUHJvcGVydHkyLmRlZmF1bHQpKHByb3BlcnR5KTtpZihzaW5nbGVWYWx1ZS5pbmRleE9mKGRhc2hDYXNlUHJvcGVydHkpPi0xJiZkYXNoQ2FzZVByb3BlcnR5IT09J29yZGVyJyl7dmFyIHByZWZpeGVzPXByb3BlcnR5UHJlZml4TWFwW3Byb3BlcnR5XTtmb3IodmFyIGo9MCxwTGVuPXByZWZpeGVzLmxlbmd0aDtqPHBMZW47KytqKXsvLyBqb2luIGFsbCBwcmVmaXhlcyBhbmQgY3JlYXRlIGEgbmV3IHZhbHVlXG52YWx1ZXMudW5zaGlmdChzaW5nbGVWYWx1ZS5yZXBsYWNlKGRhc2hDYXNlUHJvcGVydHkscHJlZml4TWFwcGluZ1twcmVmaXhlc1tqXV0rZGFzaENhc2VQcm9wZXJ0eSkpO319fW11bHRpcGxlVmFsdWVzW2ldPXZhbHVlcy5qb2luKCcsJyk7fXJldHVybiBtdWx0aXBsZVZhbHVlcy5qb2luKCcsJyk7fWZ1bmN0aW9uIHRyYW5zaXRpb24ocHJvcGVydHksdmFsdWUsc3R5bGUscHJvcGVydHlQcmVmaXhNYXApey8vIGFsc28gY2hlY2sgZm9yIGFscmVhZHkgcHJlZml4ZWQgdHJhbnNpdGlvbnNcbmlmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiZwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSl7dmFyIG91dHB1dFZhbHVlPXByZWZpeFZhbHVlKHZhbHVlLHByb3BlcnR5UHJlZml4TWFwKTsvLyBpZiB0aGUgcHJvcGVydHkgaXMgYWxyZWFkeSBwcmVmaXhlZFxudmFyIHdlYmtpdE91dHB1dD1vdXRwdXRWYWx1ZS5zcGxpdCgvLCg/IVteKCldKig/OlxcKFteKCldKlxcKSk/XFwpKS9nKS5maWx0ZXIoZnVuY3Rpb24odmFsKXtyZXR1cm4hLy1tb3otfC1tcy0vLnRlc3QodmFsKTt9KS5qb2luKCcsJyk7aWYocHJvcGVydHkuaW5kZXhPZignV2Via2l0Jyk+LTEpe3JldHVybiB3ZWJraXRPdXRwdXQ7fXZhciBtb3pPdXRwdXQ9b3V0cHV0VmFsdWUuc3BsaXQoLywoPyFbXigpXSooPzpcXChbXigpXSpcXCkpP1xcKSkvZykuZmlsdGVyKGZ1bmN0aW9uKHZhbCl7cmV0dXJuIS8td2Via2l0LXwtbXMtLy50ZXN0KHZhbCk7fSkuam9pbignLCcpO2lmKHByb3BlcnR5LmluZGV4T2YoJ01veicpPi0xKXtyZXR1cm4gbW96T3V0cHV0O31zdHlsZVsnV2Via2l0JysoMCxfY2FwaXRhbGl6ZVN0cmluZzIuZGVmYXVsdCkocHJvcGVydHkpXT13ZWJraXRPdXRwdXQ7c3R5bGVbJ01veicrKDAsX2NhcGl0YWxpemVTdHJpbmcyLmRlZmF1bHQpKHByb3BlcnR5KV09bW96T3V0cHV0O3JldHVybiBvdXRwdXRWYWx1ZTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3N0YXRpYy9wbHVnaW5zL3RyYW5zaXRpb24uanNcbi8vIG1vZHVsZSBpZCA9IDEyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9aHlwaGVuYXRlUHJvcGVydHk7dmFyIF9oeXBoZW5hdGVTdHlsZU5hbWU9cmVxdWlyZSgnaHlwaGVuYXRlLXN0eWxlLW5hbWUnKTt2YXIgX2h5cGhlbmF0ZVN0eWxlTmFtZTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaHlwaGVuYXRlU3R5bGVOYW1lKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fWZ1bmN0aW9uIGh5cGhlbmF0ZVByb3BlcnR5KHByb3BlcnR5KXtyZXR1cm4oMCxfaHlwaGVuYXRlU3R5bGVOYW1lMi5kZWZhdWx0KShwcm9wZXJ0eSk7fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWluLWpzLXV0aWxzL2xpYi9oeXBoZW5hdGVQcm9wZXJ0eS5qc1xuLy8gbW9kdWxlIGlkID0gMTI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgdXBwZXJjYXNlUGF0dGVybj0vW0EtWl0vZzt2YXIgbXNQYXR0ZXJuPS9ebXMtLzt2YXIgY2FjaGU9e307ZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKHN0cmluZyl7cmV0dXJuIHN0cmluZyBpbiBjYWNoZT9jYWNoZVtzdHJpbmddOmNhY2hlW3N0cmluZ109c3RyaW5nLnJlcGxhY2UodXBwZXJjYXNlUGF0dGVybiwnLSQmJykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKG1zUGF0dGVybiwnLW1zLScpO31tb2R1bGUuZXhwb3J0cz1oeXBoZW5hdGVTdHlsZU5hbWU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2h5cGhlbmF0ZS1zdHlsZS1uYW1lL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT12b2lkIDA7dmFyIF9jYWxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvY2FsY1wiKSk7dmFyIF9jcm9zc0ZhZGU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9jcm9zc0ZhZGVcIikpO3ZhciBfY3Vyc29yPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvY3Vyc29yXCIpKTt2YXIgX2ZpbHRlcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2ZpbHRlclwiKSk7dmFyIF9mbGV4PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvZmxleFwiKSk7dmFyIF9mbGV4Ym94SUU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9mbGV4Ym94SUVcIikpO3ZhciBfZmxleGJveE9sZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2ZsZXhib3hPbGRcIikpO3ZhciBfZ3JhZGllbnQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9ncmFkaWVudFwiKSk7dmFyIF9pbWFnZVNldD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJpbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2ltYWdlU2V0XCIpKTt2YXIgX3Bvc2l0aW9uPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvcG9zaXRpb25cIikpO3ZhciBfc2l6aW5nPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImlubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvc2l6aW5nXCIpKTt2YXIgX3RyYW5zaXRpb249X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy90cmFuc2l0aW9uXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O312YXIgX2RlZmF1bHQ9e3BsdWdpbnM6W19jYWxjW1wiZGVmYXVsdFwiXSxfY3Jvc3NGYWRlW1wiZGVmYXVsdFwiXSxfY3Vyc29yW1wiZGVmYXVsdFwiXSxfZmlsdGVyW1wiZGVmYXVsdFwiXSxfZmxleFtcImRlZmF1bHRcIl0sX2ZsZXhib3hJRVtcImRlZmF1bHRcIl0sX2ZsZXhib3hPbGRbXCJkZWZhdWx0XCJdLF9ncmFkaWVudFtcImRlZmF1bHRcIl0sX2ltYWdlU2V0W1wiZGVmYXVsdFwiXSxfcG9zaXRpb25bXCJkZWZhdWx0XCJdLF9zaXppbmdbXCJkZWZhdWx0XCJdLF90cmFuc2l0aW9uW1wiZGVmYXVsdFwiXV0scHJlZml4TWFwOntjaHJvbWU6e3RyYW5zZm9ybTozNSx0cmFuc2Zvcm1PcmlnaW46MzUsdHJhbnNmb3JtT3JpZ2luWDozNSx0cmFuc2Zvcm1PcmlnaW5ZOjM1LGJhY2tmYWNlVmlzaWJpbGl0eTozNSxwZXJzcGVjdGl2ZTozNSxwZXJzcGVjdGl2ZU9yaWdpbjozNSx0cmFuc2Zvcm1TdHlsZTozNSx0cmFuc2Zvcm1PcmlnaW5aOjM1LGFuaW1hdGlvbjo0MixhbmltYXRpb25EZWxheTo0MixhbmltYXRpb25EaXJlY3Rpb246NDIsYW5pbWF0aW9uRmlsbE1vZGU6NDIsYW5pbWF0aW9uRHVyYXRpb246NDIsYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6NDIsYW5pbWF0aW9uTmFtZTo0MixhbmltYXRpb25QbGF5U3RhdGU6NDIsYW5pbWF0aW9uVGltaW5nRnVuY3Rpb246NDIsYXBwZWFyYW5jZTo2Nix1c2VyU2VsZWN0OjUzLGZvbnRLZXJuaW5nOjMyLHRleHRFbXBoYXNpc1Bvc2l0aW9uOjY2LHRleHRFbXBoYXNpczo2Nix0ZXh0RW1waGFzaXNTdHlsZTo2Nix0ZXh0RW1waGFzaXNDb2xvcjo2Nixib3hEZWNvcmF0aW9uQnJlYWs6NjYsY2xpcFBhdGg6NTQsbWFza0ltYWdlOjY2LG1hc2tNb2RlOjY2LG1hc2tSZXBlYXQ6NjYsbWFza1Bvc2l0aW9uOjY2LG1hc2tDbGlwOjY2LG1hc2tPcmlnaW46NjYsbWFza1NpemU6NjYsbWFza0NvbXBvc2l0ZTo2NixtYXNrOjY2LG1hc2tCb3JkZXJTb3VyY2U6NjYsbWFza0JvcmRlck1vZGU6NjYsbWFza0JvcmRlclNsaWNlOjY2LG1hc2tCb3JkZXJXaWR0aDo2NixtYXNrQm9yZGVyT3V0c2V0OjY2LG1hc2tCb3JkZXJSZXBlYXQ6NjYsbWFza0JvcmRlcjo2NixtYXNrVHlwZTo2Nix0ZXh0RGVjb3JhdGlvblN0eWxlOjU2LHRleHREZWNvcmF0aW9uU2tpcDo1Nix0ZXh0RGVjb3JhdGlvbkxpbmU6NTYsdGV4dERlY29yYXRpb25Db2xvcjo1NixmaWx0ZXI6NTIsZm9udEZlYXR1cmVTZXR0aW5nczo0NyxicmVha0FmdGVyOjQ5LGJyZWFrQmVmb3JlOjQ5LGJyZWFrSW5zaWRlOjQ5LGNvbHVtbkNvdW50OjQ5LGNvbHVtbkZpbGw6NDksY29sdW1uR2FwOjQ5LGNvbHVtblJ1bGU6NDksY29sdW1uUnVsZUNvbG9yOjQ5LGNvbHVtblJ1bGVTdHlsZTo0OSxjb2x1bW5SdWxlV2lkdGg6NDksY29sdW1uczo0OSxjb2x1bW5TcGFuOjQ5LGNvbHVtbldpZHRoOjQ5LHdyaXRpbmdNb2RlOjQ3fSxzYWZhcmk6e2ZsZXg6OCxmbGV4QmFzaXM6OCxmbGV4RGlyZWN0aW9uOjgsZmxleEdyb3c6OCxmbGV4Rmxvdzo4LGZsZXhTaHJpbms6OCxmbGV4V3JhcDo4LGFsaWduQ29udGVudDo4LGFsaWduSXRlbXM6OCxhbGlnblNlbGY6OCxqdXN0aWZ5Q29udGVudDo4LG9yZGVyOjgsdHJhbnNpdGlvbjo2LHRyYW5zaXRpb25EZWxheTo2LHRyYW5zaXRpb25EdXJhdGlvbjo2LHRyYW5zaXRpb25Qcm9wZXJ0eTo2LHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjo2LHRyYW5zZm9ybTo4LHRyYW5zZm9ybU9yaWdpbjo4LHRyYW5zZm9ybU9yaWdpblg6OCx0cmFuc2Zvcm1PcmlnaW5ZOjgsYmFja2ZhY2VWaXNpYmlsaXR5OjgscGVyc3BlY3RpdmU6OCxwZXJzcGVjdGl2ZU9yaWdpbjo4LHRyYW5zZm9ybVN0eWxlOjgsdHJhbnNmb3JtT3JpZ2luWjo4LGFuaW1hdGlvbjo4LGFuaW1hdGlvbkRlbGF5OjgsYW5pbWF0aW9uRGlyZWN0aW9uOjgsYW5pbWF0aW9uRmlsbE1vZGU6OCxhbmltYXRpb25EdXJhdGlvbjo4LGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OjgsYW5pbWF0aW9uTmFtZTo4LGFuaW1hdGlvblBsYXlTdGF0ZTo4LGFuaW1hdGlvblRpbWluZ0Z1bmN0aW9uOjgsYXBwZWFyYW5jZToxMSx1c2VyU2VsZWN0OjExLGJhY2tkcm9wRmlsdGVyOjExLGZvbnRLZXJuaW5nOjksc2Nyb2xsU25hcFR5cGU6MTAuMSxzY3JvbGxTbmFwUG9pbnRzWDoxMC4xLHNjcm9sbFNuYXBQb2ludHNZOjEwLjEsc2Nyb2xsU25hcERlc3RpbmF0aW9uOjEwLjEsc2Nyb2xsU25hcENvb3JkaW5hdGU6MTAuMSx0ZXh0RW1waGFzaXNQb3NpdGlvbjo3LHRleHRFbXBoYXNpczo3LHRleHRFbXBoYXNpc1N0eWxlOjcsdGV4dEVtcGhhc2lzQ29sb3I6Nyxib3hEZWNvcmF0aW9uQnJlYWs6MTEsY2xpcFBhdGg6MTEsbWFza0ltYWdlOjExLG1hc2tNb2RlOjExLG1hc2tSZXBlYXQ6MTEsbWFza1Bvc2l0aW9uOjExLG1hc2tDbGlwOjExLG1hc2tPcmlnaW46MTEsbWFza1NpemU6MTEsbWFza0NvbXBvc2l0ZToxMSxtYXNrOjExLG1hc2tCb3JkZXJTb3VyY2U6MTEsbWFza0JvcmRlck1vZGU6MTEsbWFza0JvcmRlclNsaWNlOjExLG1hc2tCb3JkZXJXaWR0aDoxMSxtYXNrQm9yZGVyT3V0c2V0OjExLG1hc2tCb3JkZXJSZXBlYXQ6MTEsbWFza0JvcmRlcjoxMSxtYXNrVHlwZToxMSx0ZXh0RGVjb3JhdGlvblN0eWxlOjExLHRleHREZWNvcmF0aW9uU2tpcDoxMSx0ZXh0RGVjb3JhdGlvbkxpbmU6MTEsdGV4dERlY29yYXRpb25Db2xvcjoxMSxzaGFwZUltYWdlVGhyZXNob2xkOjEwLHNoYXBlSW1hZ2VNYXJnaW46MTAsc2hhcGVJbWFnZU91dHNpZGU6MTAsZmlsdGVyOjksaHlwaGVuczoxMSxmbG93SW50bzoxMSxmbG93RnJvbToxMSxicmVha0JlZm9yZTo4LGJyZWFrQWZ0ZXI6OCxicmVha0luc2lkZTo4LHJlZ2lvbkZyYWdtZW50OjExLGNvbHVtbkNvdW50OjgsY29sdW1uRmlsbDo4LGNvbHVtbkdhcDo4LGNvbHVtblJ1bGU6OCxjb2x1bW5SdWxlQ29sb3I6OCxjb2x1bW5SdWxlU3R5bGU6OCxjb2x1bW5SdWxlV2lkdGg6OCxjb2x1bW5zOjgsY29sdW1uU3Bhbjo4LGNvbHVtbldpZHRoOjgsd3JpdGluZ01vZGU6MTAuMX0sZmlyZWZveDp7YXBwZWFyYW5jZTo2MCx1c2VyU2VsZWN0OjYwLGJveFNpemluZzoyOCx0ZXh0QWxpZ25MYXN0OjQ4LHRleHREZWNvcmF0aW9uU3R5bGU6MzUsdGV4dERlY29yYXRpb25Ta2lwOjM1LHRleHREZWNvcmF0aW9uTGluZTozNSx0ZXh0RGVjb3JhdGlvbkNvbG9yOjM1LHRhYlNpemU6NjAsaHlwaGVuczo0Mixmb250RmVhdHVyZVNldHRpbmdzOjMzLGJyZWFrQWZ0ZXI6NTEsYnJlYWtCZWZvcmU6NTEsYnJlYWtJbnNpZGU6NTEsY29sdW1uQ291bnQ6NTEsY29sdW1uRmlsbDo1MSxjb2x1bW5HYXA6NTEsY29sdW1uUnVsZTo1MSxjb2x1bW5SdWxlQ29sb3I6NTEsY29sdW1uUnVsZVN0eWxlOjUxLGNvbHVtblJ1bGVXaWR0aDo1MSxjb2x1bW5zOjUxLGNvbHVtblNwYW46NTEsY29sdW1uV2lkdGg6NTF9LG9wZXJhOntmbGV4OjE2LGZsZXhCYXNpczoxNixmbGV4RGlyZWN0aW9uOjE2LGZsZXhHcm93OjE2LGZsZXhGbG93OjE2LGZsZXhTaHJpbms6MTYsZmxleFdyYXA6MTYsYWxpZ25Db250ZW50OjE2LGFsaWduSXRlbXM6MTYsYWxpZ25TZWxmOjE2LGp1c3RpZnlDb250ZW50OjE2LG9yZGVyOjE2LHRyYW5zZm9ybToyMix0cmFuc2Zvcm1PcmlnaW46MjIsdHJhbnNmb3JtT3JpZ2luWDoyMix0cmFuc2Zvcm1PcmlnaW5ZOjIyLGJhY2tmYWNlVmlzaWJpbGl0eToyMixwZXJzcGVjdGl2ZToyMixwZXJzcGVjdGl2ZU9yaWdpbjoyMix0cmFuc2Zvcm1TdHlsZToyMix0cmFuc2Zvcm1PcmlnaW5aOjIyLGFuaW1hdGlvbjoyOSxhbmltYXRpb25EZWxheToyOSxhbmltYXRpb25EaXJlY3Rpb246MjksYW5pbWF0aW9uRmlsbE1vZGU6MjksYW5pbWF0aW9uRHVyYXRpb246MjksYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6MjksYW5pbWF0aW9uTmFtZToyOSxhbmltYXRpb25QbGF5U3RhdGU6MjksYW5pbWF0aW9uVGltaW5nRnVuY3Rpb246MjksYXBwZWFyYW5jZTo1MCx1c2VyU2VsZWN0OjQwLGZvbnRLZXJuaW5nOjE5LHRleHRFbXBoYXNpc1Bvc2l0aW9uOjUwLHRleHRFbXBoYXNpczo1MCx0ZXh0RW1waGFzaXNTdHlsZTo1MCx0ZXh0RW1waGFzaXNDb2xvcjo1MCxib3hEZWNvcmF0aW9uQnJlYWs6NTAsY2xpcFBhdGg6NDEsbWFza0ltYWdlOjUwLG1hc2tNb2RlOjUwLG1hc2tSZXBlYXQ6NTAsbWFza1Bvc2l0aW9uOjUwLG1hc2tDbGlwOjUwLG1hc2tPcmlnaW46NTAsbWFza1NpemU6NTAsbWFza0NvbXBvc2l0ZTo1MCxtYXNrOjUwLG1hc2tCb3JkZXJTb3VyY2U6NTAsbWFza0JvcmRlck1vZGU6NTAsbWFza0JvcmRlclNsaWNlOjUwLG1hc2tCb3JkZXJXaWR0aDo1MCxtYXNrQm9yZGVyT3V0c2V0OjUwLG1hc2tCb3JkZXJSZXBlYXQ6NTAsbWFza0JvcmRlcjo1MCxtYXNrVHlwZTo1MCx0ZXh0RGVjb3JhdGlvblN0eWxlOjQzLHRleHREZWNvcmF0aW9uU2tpcDo0Myx0ZXh0RGVjb3JhdGlvbkxpbmU6NDMsdGV4dERlY29yYXRpb25Db2xvcjo0MyxmaWx0ZXI6MzksZm9udEZlYXR1cmVTZXR0aW5nczozNCxicmVha0FmdGVyOjM2LGJyZWFrQmVmb3JlOjM2LGJyZWFrSW5zaWRlOjM2LGNvbHVtbkNvdW50OjM2LGNvbHVtbkZpbGw6MzYsY29sdW1uR2FwOjM2LGNvbHVtblJ1bGU6MzYsY29sdW1uUnVsZUNvbG9yOjM2LGNvbHVtblJ1bGVTdHlsZTozNixjb2x1bW5SdWxlV2lkdGg6MzYsY29sdW1uczozNixjb2x1bW5TcGFuOjM2LGNvbHVtbldpZHRoOjM2LHdyaXRpbmdNb2RlOjM0fSxpZTp7ZmxleDoxMCxmbGV4RGlyZWN0aW9uOjEwLGZsZXhGbG93OjEwLGZsZXhXcmFwOjEwLHRyYW5zZm9ybTo5LHRyYW5zZm9ybU9yaWdpbjo5LHRyYW5zZm9ybU9yaWdpblg6OSx0cmFuc2Zvcm1PcmlnaW5ZOjksdXNlclNlbGVjdDoxMSx3cmFwRmxvdzoxMSx3cmFwVGhyb3VnaDoxMSx3cmFwTWFyZ2luOjExLHNjcm9sbFNuYXBUeXBlOjExLHNjcm9sbFNuYXBQb2ludHNYOjExLHNjcm9sbFNuYXBQb2ludHNZOjExLHNjcm9sbFNuYXBEZXN0aW5hdGlvbjoxMSxzY3JvbGxTbmFwQ29vcmRpbmF0ZToxMSx0b3VjaEFjdGlvbjoxMCxoeXBoZW5zOjExLGZsb3dJbnRvOjExLGZsb3dGcm9tOjExLGJyZWFrQmVmb3JlOjExLGJyZWFrQWZ0ZXI6MTEsYnJlYWtJbnNpZGU6MTEscmVnaW9uRnJhZ21lbnQ6MTEsZ3JpZFRlbXBsYXRlQ29sdW1uczoxMSxncmlkVGVtcGxhdGVSb3dzOjExLGdyaWRUZW1wbGF0ZUFyZWFzOjExLGdyaWRUZW1wbGF0ZToxMSxncmlkQXV0b0NvbHVtbnM6MTEsZ3JpZEF1dG9Sb3dzOjExLGdyaWRBdXRvRmxvdzoxMSxncmlkOjExLGdyaWRSb3dTdGFydDoxMSxncmlkQ29sdW1uU3RhcnQ6MTEsZ3JpZFJvd0VuZDoxMSxncmlkUm93OjExLGdyaWRDb2x1bW46MTEsZ3JpZENvbHVtbkVuZDoxMSxncmlkQ29sdW1uR2FwOjExLGdyaWRSb3dHYXA6MTEsZ3JpZEFyZWE6MTEsZ3JpZEdhcDoxMSx0ZXh0U2l6ZUFkanVzdDoxMSx3cml0aW5nTW9kZToxMX0sZWRnZTp7dXNlclNlbGVjdDoxNyx3cmFwRmxvdzoxNyx3cmFwVGhyb3VnaDoxNyx3cmFwTWFyZ2luOjE3LHNjcm9sbFNuYXBUeXBlOjE3LHNjcm9sbFNuYXBQb2ludHNYOjE3LHNjcm9sbFNuYXBQb2ludHNZOjE3LHNjcm9sbFNuYXBEZXN0aW5hdGlvbjoxNyxzY3JvbGxTbmFwQ29vcmRpbmF0ZToxNyxoeXBoZW5zOjE3LGZsb3dJbnRvOjE3LGZsb3dGcm9tOjE3LGJyZWFrQmVmb3JlOjE3LGJyZWFrQWZ0ZXI6MTcsYnJlYWtJbnNpZGU6MTcscmVnaW9uRnJhZ21lbnQ6MTcsZ3JpZFRlbXBsYXRlQ29sdW1uczoxNSxncmlkVGVtcGxhdGVSb3dzOjE1LGdyaWRUZW1wbGF0ZUFyZWFzOjE1LGdyaWRUZW1wbGF0ZToxNSxncmlkQXV0b0NvbHVtbnM6MTUsZ3JpZEF1dG9Sb3dzOjE1LGdyaWRBdXRvRmxvdzoxNSxncmlkOjE1LGdyaWRSb3dTdGFydDoxNSxncmlkQ29sdW1uU3RhcnQ6MTUsZ3JpZFJvd0VuZDoxNSxncmlkUm93OjE1LGdyaWRDb2x1bW46MTUsZ3JpZENvbHVtbkVuZDoxNSxncmlkQ29sdW1uR2FwOjE1LGdyaWRSb3dHYXA6MTUsZ3JpZEFyZWE6MTUsZ3JpZEdhcDoxNX0saW9zX3NhZjp7ZmxleDo4LjEsZmxleEJhc2lzOjguMSxmbGV4RGlyZWN0aW9uOjguMSxmbGV4R3Jvdzo4LjEsZmxleEZsb3c6OC4xLGZsZXhTaHJpbms6OC4xLGZsZXhXcmFwOjguMSxhbGlnbkNvbnRlbnQ6OC4xLGFsaWduSXRlbXM6OC4xLGFsaWduU2VsZjo4LjEsanVzdGlmeUNvbnRlbnQ6OC4xLG9yZGVyOjguMSx0cmFuc2l0aW9uOjYsdHJhbnNpdGlvbkRlbGF5OjYsdHJhbnNpdGlvbkR1cmF0aW9uOjYsdHJhbnNpdGlvblByb3BlcnR5OjYsdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOjYsdHJhbnNmb3JtOjguMSx0cmFuc2Zvcm1PcmlnaW46OC4xLHRyYW5zZm9ybU9yaWdpblg6OC4xLHRyYW5zZm9ybU9yaWdpblk6OC4xLGJhY2tmYWNlVmlzaWJpbGl0eTo4LjEscGVyc3BlY3RpdmU6OC4xLHBlcnNwZWN0aXZlT3JpZ2luOjguMSx0cmFuc2Zvcm1TdHlsZTo4LjEsdHJhbnNmb3JtT3JpZ2luWjo4LjEsYW5pbWF0aW9uOjguMSxhbmltYXRpb25EZWxheTo4LjEsYW5pbWF0aW9uRGlyZWN0aW9uOjguMSxhbmltYXRpb25GaWxsTW9kZTo4LjEsYW5pbWF0aW9uRHVyYXRpb246OC4xLGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OjguMSxhbmltYXRpb25OYW1lOjguMSxhbmltYXRpb25QbGF5U3RhdGU6OC4xLGFuaW1hdGlvblRpbWluZ0Z1bmN0aW9uOjguMSxhcHBlYXJhbmNlOjExLHVzZXJTZWxlY3Q6MTEsYmFja2Ryb3BGaWx0ZXI6MTEsZm9udEtlcm5pbmc6MTEsc2Nyb2xsU25hcFR5cGU6MTAuMyxzY3JvbGxTbmFwUG9pbnRzWDoxMC4zLHNjcm9sbFNuYXBQb2ludHNZOjEwLjMsc2Nyb2xsU25hcERlc3RpbmF0aW9uOjEwLjMsc2Nyb2xsU25hcENvb3JkaW5hdGU6MTAuMyxib3hEZWNvcmF0aW9uQnJlYWs6MTEsY2xpcFBhdGg6MTEsbWFza0ltYWdlOjExLG1hc2tNb2RlOjExLG1hc2tSZXBlYXQ6MTEsbWFza1Bvc2l0aW9uOjExLG1hc2tDbGlwOjExLG1hc2tPcmlnaW46MTEsbWFza1NpemU6MTEsbWFza0NvbXBvc2l0ZToxMSxtYXNrOjExLG1hc2tCb3JkZXJTb3VyY2U6MTEsbWFza0JvcmRlck1vZGU6MTEsbWFza0JvcmRlclNsaWNlOjExLG1hc2tCb3JkZXJXaWR0aDoxMSxtYXNrQm9yZGVyT3V0c2V0OjExLG1hc2tCb3JkZXJSZXBlYXQ6MTEsbWFza0JvcmRlcjoxMSxtYXNrVHlwZToxMSx0ZXh0U2l6ZUFkanVzdDoxMSx0ZXh0RGVjb3JhdGlvblN0eWxlOjExLHRleHREZWNvcmF0aW9uU2tpcDoxMSx0ZXh0RGVjb3JhdGlvbkxpbmU6MTEsdGV4dERlY29yYXRpb25Db2xvcjoxMSxzaGFwZUltYWdlVGhyZXNob2xkOjEwLHNoYXBlSW1hZ2VNYXJnaW46MTAsc2hhcGVJbWFnZU91dHNpZGU6MTAsZmlsdGVyOjksaHlwaGVuczoxMSxmbG93SW50bzoxMSxmbG93RnJvbToxMSxicmVha0JlZm9yZTo4LjEsYnJlYWtBZnRlcjo4LjEsYnJlYWtJbnNpZGU6OC4xLHJlZ2lvbkZyYWdtZW50OjExLGNvbHVtbkNvdW50OjguMSxjb2x1bW5GaWxsOjguMSxjb2x1bW5HYXA6OC4xLGNvbHVtblJ1bGU6OC4xLGNvbHVtblJ1bGVDb2xvcjo4LjEsY29sdW1uUnVsZVN0eWxlOjguMSxjb2x1bW5SdWxlV2lkdGg6OC4xLGNvbHVtbnM6OC4xLGNvbHVtblNwYW46OC4xLGNvbHVtbldpZHRoOjguMSx3cml0aW5nTW9kZToxMC4zfSxhbmRyb2lkOntib3JkZXJJbWFnZTo0LjIsYm9yZGVySW1hZ2VPdXRzZXQ6NC4yLGJvcmRlckltYWdlUmVwZWF0OjQuMixib3JkZXJJbWFnZVNsaWNlOjQuMixib3JkZXJJbWFnZVNvdXJjZTo0LjIsYm9yZGVySW1hZ2VXaWR0aDo0LjIsZmxleDo0LjIsZmxleEJhc2lzOjQuMixmbGV4RGlyZWN0aW9uOjQuMixmbGV4R3Jvdzo0LjIsZmxleEZsb3c6NC4yLGZsZXhTaHJpbms6NC4yLGZsZXhXcmFwOjQuMixhbGlnbkNvbnRlbnQ6NC4yLGFsaWduSXRlbXM6NC4yLGFsaWduU2VsZjo0LjIsanVzdGlmeUNvbnRlbnQ6NC4yLG9yZGVyOjQuMix0cmFuc2l0aW9uOjQuMix0cmFuc2l0aW9uRGVsYXk6NC4yLHRyYW5zaXRpb25EdXJhdGlvbjo0LjIsdHJhbnNpdGlvblByb3BlcnR5OjQuMix0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246NC4yLHRyYW5zZm9ybTo0LjQsdHJhbnNmb3JtT3JpZ2luOjQuNCx0cmFuc2Zvcm1PcmlnaW5YOjQuNCx0cmFuc2Zvcm1PcmlnaW5ZOjQuNCxiYWNrZmFjZVZpc2liaWxpdHk6NC40LHBlcnNwZWN0aXZlOjQuNCxwZXJzcGVjdGl2ZU9yaWdpbjo0LjQsdHJhbnNmb3JtU3R5bGU6NC40LHRyYW5zZm9ybU9yaWdpblo6NC40LGFuaW1hdGlvbjo0LjQsYW5pbWF0aW9uRGVsYXk6NC40LGFuaW1hdGlvbkRpcmVjdGlvbjo0LjQsYW5pbWF0aW9uRmlsbE1vZGU6NC40LGFuaW1hdGlvbkR1cmF0aW9uOjQuNCxhbmltYXRpb25JdGVyYXRpb25Db3VudDo0LjQsYW5pbWF0aW9uTmFtZTo0LjQsYW5pbWF0aW9uUGxheVN0YXRlOjQuNCxhbmltYXRpb25UaW1pbmdGdW5jdGlvbjo0LjQsYXBwZWFyYW5jZTo2Mix1c2VyU2VsZWN0OjQuNCxmb250S2VybmluZzo0LjQsdGV4dEVtcGhhc2lzUG9zaXRpb246NjIsdGV4dEVtcGhhc2lzOjYyLHRleHRFbXBoYXNpc1N0eWxlOjYyLHRleHRFbXBoYXNpc0NvbG9yOjYyLGJveERlY29yYXRpb25CcmVhazo2MixjbGlwUGF0aDo0LjQsbWFza0ltYWdlOjYyLG1hc2tNb2RlOjYyLG1hc2tSZXBlYXQ6NjIsbWFza1Bvc2l0aW9uOjYyLG1hc2tDbGlwOjYyLG1hc2tPcmlnaW46NjIsbWFza1NpemU6NjIsbWFza0NvbXBvc2l0ZTo2MixtYXNrOjYyLG1hc2tCb3JkZXJTb3VyY2U6NjIsbWFza0JvcmRlck1vZGU6NjIsbWFza0JvcmRlclNsaWNlOjYyLG1hc2tCb3JkZXJXaWR0aDo2MixtYXNrQm9yZGVyT3V0c2V0OjYyLG1hc2tCb3JkZXJSZXBlYXQ6NjIsbWFza0JvcmRlcjo2MixtYXNrVHlwZTo2MixmaWx0ZXI6NC40LGZvbnRGZWF0dXJlU2V0dGluZ3M6NC40LGJyZWFrQWZ0ZXI6NC40LGJyZWFrQmVmb3JlOjQuNCxicmVha0luc2lkZTo0LjQsY29sdW1uQ291bnQ6NC40LGNvbHVtbkZpbGw6NC40LGNvbHVtbkdhcDo0LjQsY29sdW1uUnVsZTo0LjQsY29sdW1uUnVsZUNvbG9yOjQuNCxjb2x1bW5SdWxlU3R5bGU6NC40LGNvbHVtblJ1bGVXaWR0aDo0LjQsY29sdW1uczo0LjQsY29sdW1uU3Bhbjo0LjQsY29sdW1uV2lkdGg6NC40LHdyaXRpbmdNb2RlOjQuNH0sYW5kX2Nocjp7YXBwZWFyYW5jZTo2Mix0ZXh0RW1waGFzaXNQb3NpdGlvbjo2Mix0ZXh0RW1waGFzaXM6NjIsdGV4dEVtcGhhc2lzU3R5bGU6NjIsdGV4dEVtcGhhc2lzQ29sb3I6NjIsYm94RGVjb3JhdGlvbkJyZWFrOjYyLG1hc2tJbWFnZTo2MixtYXNrTW9kZTo2MixtYXNrUmVwZWF0OjYyLG1hc2tQb3NpdGlvbjo2MixtYXNrQ2xpcDo2MixtYXNrT3JpZ2luOjYyLG1hc2tTaXplOjYyLG1hc2tDb21wb3NpdGU6NjIsbWFzazo2MixtYXNrQm9yZGVyU291cmNlOjYyLG1hc2tCb3JkZXJNb2RlOjYyLG1hc2tCb3JkZXJTbGljZTo2MixtYXNrQm9yZGVyV2lkdGg6NjIsbWFza0JvcmRlck91dHNldDo2MixtYXNrQm9yZGVyUmVwZWF0OjYyLG1hc2tCb3JkZXI6NjIsbWFza1R5cGU6NjJ9LGFuZF91Yzp7ZmxleDoxMS40LGZsZXhCYXNpczoxMS40LGZsZXhEaXJlY3Rpb246MTEuNCxmbGV4R3JvdzoxMS40LGZsZXhGbG93OjExLjQsZmxleFNocmluazoxMS40LGZsZXhXcmFwOjExLjQsYWxpZ25Db250ZW50OjExLjQsYWxpZ25JdGVtczoxMS40LGFsaWduU2VsZjoxMS40LGp1c3RpZnlDb250ZW50OjExLjQsb3JkZXI6MTEuNCx0cmFuc2Zvcm06MTEuNCx0cmFuc2Zvcm1PcmlnaW46MTEuNCx0cmFuc2Zvcm1PcmlnaW5YOjExLjQsdHJhbnNmb3JtT3JpZ2luWToxMS40LGJhY2tmYWNlVmlzaWJpbGl0eToxMS40LHBlcnNwZWN0aXZlOjExLjQscGVyc3BlY3RpdmVPcmlnaW46MTEuNCx0cmFuc2Zvcm1TdHlsZToxMS40LHRyYW5zZm9ybU9yaWdpblo6MTEuNCxhbmltYXRpb246MTEuNCxhbmltYXRpb25EZWxheToxMS40LGFuaW1hdGlvbkRpcmVjdGlvbjoxMS40LGFuaW1hdGlvbkZpbGxNb2RlOjExLjQsYW5pbWF0aW9uRHVyYXRpb246MTEuNCxhbmltYXRpb25JdGVyYXRpb25Db3VudDoxMS40LGFuaW1hdGlvbk5hbWU6MTEuNCxhbmltYXRpb25QbGF5U3RhdGU6MTEuNCxhbmltYXRpb25UaW1pbmdGdW5jdGlvbjoxMS40LGFwcGVhcmFuY2U6MTEuNCx1c2VyU2VsZWN0OjExLjQsdGV4dEVtcGhhc2lzUG9zaXRpb246MTEuNCx0ZXh0RW1waGFzaXM6MTEuNCx0ZXh0RW1waGFzaXNTdHlsZToxMS40LHRleHRFbXBoYXNpc0NvbG9yOjExLjQsY2xpcFBhdGg6MTEuNCxtYXNrSW1hZ2U6MTEuNCxtYXNrTW9kZToxMS40LG1hc2tSZXBlYXQ6MTEuNCxtYXNrUG9zaXRpb246MTEuNCxtYXNrQ2xpcDoxMS40LG1hc2tPcmlnaW46MTEuNCxtYXNrU2l6ZToxMS40LG1hc2tDb21wb3NpdGU6MTEuNCxtYXNrOjExLjQsbWFza0JvcmRlclNvdXJjZToxMS40LG1hc2tCb3JkZXJNb2RlOjExLjQsbWFza0JvcmRlclNsaWNlOjExLjQsbWFza0JvcmRlcldpZHRoOjExLjQsbWFza0JvcmRlck91dHNldDoxMS40LG1hc2tCb3JkZXJSZXBlYXQ6MTEuNCxtYXNrQm9yZGVyOjExLjQsbWFza1R5cGU6MTEuNCx0ZXh0U2l6ZUFkanVzdDoxMS40LGZpbHRlcjoxMS40LGh5cGhlbnM6MTEuNCxmb250RmVhdHVyZVNldHRpbmdzOjExLjQsYnJlYWtBZnRlcjoxMS40LGJyZWFrQmVmb3JlOjExLjQsYnJlYWtJbnNpZGU6MTEuNCxjb2x1bW5Db3VudDoxMS40LGNvbHVtbkZpbGw6MTEuNCxjb2x1bW5HYXA6MTEuNCxjb2x1bW5SdWxlOjExLjQsY29sdW1uUnVsZUNvbG9yOjExLjQsY29sdW1uUnVsZVN0eWxlOjExLjQsY29sdW1uUnVsZVdpZHRoOjExLjQsY29sdW1uczoxMS40LGNvbHVtblNwYW46MTEuNCxjb2x1bW5XaWR0aDoxMS40LHdyaXRpbmdNb2RlOjExLjR9LG9wX21pbmk6e319fTtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9wcmVmaXgtZGF0YS9keW5hbWljLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PWNhbGM7dmFyIF9nZXRQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJy4uLy4uL3V0aWxzL2dldFByZWZpeGVkVmFsdWUnKTt2YXIgX2dldFByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gY2FsYyhwcm9wZXJ0eSx2YWx1ZSxzdHlsZSxfcmVmKXt2YXIgYnJvd3Nlck5hbWU9X3JlZi5icm93c2VyTmFtZSxicm93c2VyVmVyc2lvbj1fcmVmLmJyb3dzZXJWZXJzaW9uLGNzc1ByZWZpeD1fcmVmLmNzc1ByZWZpeCxrZWVwVW5wcmVmaXhlZD1fcmVmLmtlZXBVbnByZWZpeGVkO2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiZ2YWx1ZS5pbmRleE9mKCdjYWxjKCcpPi0xJiYoYnJvd3Nlck5hbWU9PT0nZmlyZWZveCcmJmJyb3dzZXJWZXJzaW9uPDE1fHxicm93c2VyTmFtZT09PSdjaHJvbWUnJiZicm93c2VyVmVyc2lvbjwyNXx8YnJvd3Nlck5hbWU9PT0nc2FmYXJpJyYmYnJvd3NlclZlcnNpb248Ni4xfHxicm93c2VyTmFtZT09PSdpb3Nfc2FmJyYmYnJvd3NlclZlcnNpb248Nykpe3JldHVybigwLF9nZXRQcmVmaXhlZFZhbHVlMi5kZWZhdWx0KSh2YWx1ZS5yZXBsYWNlKC9jYWxjXFwoL2csY3NzUHJlZml4KydjYWxjKCcpLHZhbHVlLGtlZXBVbnByZWZpeGVkKTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9jYWxjLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9Z2V0UHJlZml4ZWRWYWx1ZTtmdW5jdGlvbiBnZXRQcmVmaXhlZFZhbHVlKHByZWZpeGVkVmFsdWUsdmFsdWUsa2VlcFVucHJlZml4ZWQpe2lmKGtlZXBVbnByZWZpeGVkKXtyZXR1cm5bcHJlZml4ZWRWYWx1ZSx2YWx1ZV07fXJldHVybiBwcmVmaXhlZFZhbHVlO31tb2R1bGUuZXhwb3J0cz1leHBvcnRzW1wiZGVmYXVsdFwiXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL3V0aWxzL2dldFByZWZpeGVkVmFsdWUuanNcbi8vIG1vZHVsZSBpZCA9IDEzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9Y3Jvc3NGYWRlO3ZhciBfZ2V0UHJlZml4ZWRWYWx1ZT1yZXF1aXJlKCcuLi8uLi91dGlscy9nZXRQcmVmaXhlZFZhbHVlJyk7dmFyIF9nZXRQcmVmaXhlZFZhbHVlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcmVmaXhlZFZhbHVlKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fWZ1bmN0aW9uIGNyb3NzRmFkZShwcm9wZXJ0eSx2YWx1ZSxzdHlsZSxfcmVmKXt2YXIgYnJvd3Nlck5hbWU9X3JlZi5icm93c2VyTmFtZSxicm93c2VyVmVyc2lvbj1fcmVmLmJyb3dzZXJWZXJzaW9uLGNzc1ByZWZpeD1fcmVmLmNzc1ByZWZpeCxrZWVwVW5wcmVmaXhlZD1fcmVmLmtlZXBVbnByZWZpeGVkO2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiZ2YWx1ZS5pbmRleE9mKCdjcm9zcy1mYWRlKCcpPi0xJiYoYnJvd3Nlck5hbWU9PT0nY2hyb21lJ3x8YnJvd3Nlck5hbWU9PT0nb3BlcmEnfHxicm93c2VyTmFtZT09PSdhbmRfY2hyJ3x8KGJyb3dzZXJOYW1lPT09J2lvc19zYWYnfHxicm93c2VyTmFtZT09PSdzYWZhcmknKSYmYnJvd3NlclZlcnNpb248MTApKXtyZXR1cm4oMCxfZ2V0UHJlZml4ZWRWYWx1ZTIuZGVmYXVsdCkodmFsdWUucmVwbGFjZSgvY3Jvc3MtZmFkZVxcKC9nLGNzc1ByZWZpeCsnY3Jvc3MtZmFkZSgnKSx2YWx1ZSxrZWVwVW5wcmVmaXhlZCk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvY3Jvc3NGYWRlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PWN1cnNvcjt2YXIgX2dldFByZWZpeGVkVmFsdWU9cmVxdWlyZSgnLi4vLi4vdXRpbHMvZ2V0UHJlZml4ZWRWYWx1ZScpO3ZhciBfZ2V0UHJlZml4ZWRWYWx1ZTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJlZml4ZWRWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O312YXIgZ3JhYlZhbHVlcz17Z3JhYjp0cnVlLGdyYWJiaW5nOnRydWV9O3ZhciB6b29tVmFsdWVzPXsnem9vbS1pbic6dHJ1ZSwnem9vbS1vdXQnOnRydWV9O2Z1bmN0aW9uIGN1cnNvcihwcm9wZXJ0eSx2YWx1ZSxzdHlsZSxfcmVmKXt2YXIgYnJvd3Nlck5hbWU9X3JlZi5icm93c2VyTmFtZSxicm93c2VyVmVyc2lvbj1fcmVmLmJyb3dzZXJWZXJzaW9uLGNzc1ByZWZpeD1fcmVmLmNzc1ByZWZpeCxrZWVwVW5wcmVmaXhlZD1fcmVmLmtlZXBVbnByZWZpeGVkOy8vIGFkZHMgcHJlZml4ZXMgZm9yIGZpcmVmb3gsIGNocm9tZSwgc2FmYXJpLCBhbmQgb3BlcmEgcmVnYXJkbGVzcyBvZlxuLy8gdmVyc2lvbiB1bnRpbCBhIHJlbGlhYmxlIGJyb3dzZXIgc3VwcG9ydCBpbmZvIGNhbiBiZSBmb3VuZFxuLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vcm9mcmlzY2htYW5uL2lubGluZS1zdHlsZS1wcmVmaXhlci9pc3N1ZXMvNzlcbmlmKHByb3BlcnR5PT09J2N1cnNvcicmJmdyYWJWYWx1ZXNbdmFsdWVdJiYoYnJvd3Nlck5hbWU9PT0nZmlyZWZveCd8fGJyb3dzZXJOYW1lPT09J2Nocm9tZSd8fGJyb3dzZXJOYW1lPT09J3NhZmFyaSd8fGJyb3dzZXJOYW1lPT09J29wZXJhJykpe3JldHVybigwLF9nZXRQcmVmaXhlZFZhbHVlMi5kZWZhdWx0KShjc3NQcmVmaXgrdmFsdWUsdmFsdWUsa2VlcFVucHJlZml4ZWQpO31pZihwcm9wZXJ0eT09PSdjdXJzb3InJiZ6b29tVmFsdWVzW3ZhbHVlXSYmKGJyb3dzZXJOYW1lPT09J2ZpcmVmb3gnJiZicm93c2VyVmVyc2lvbjwyNHx8YnJvd3Nlck5hbWU9PT0nY2hyb21lJyYmYnJvd3NlclZlcnNpb248Mzd8fGJyb3dzZXJOYW1lPT09J3NhZmFyaScmJmJyb3dzZXJWZXJzaW9uPDl8fGJyb3dzZXJOYW1lPT09J29wZXJhJyYmYnJvd3NlclZlcnNpb248MjQpKXtyZXR1cm4oMCxfZ2V0UHJlZml4ZWRWYWx1ZTIuZGVmYXVsdCkoY3NzUHJlZml4K3ZhbHVlLHZhbHVlLGtlZXBVbnByZWZpeGVkKTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9jdXJzb3IuanNcbi8vIG1vZHVsZSBpZCA9IDEzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9ZmlsdGVyO3ZhciBfZ2V0UHJlZml4ZWRWYWx1ZT1yZXF1aXJlKCcuLi8uLi91dGlscy9nZXRQcmVmaXhlZFZhbHVlJyk7dmFyIF9nZXRQcmVmaXhlZFZhbHVlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcmVmaXhlZFZhbHVlKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fWZ1bmN0aW9uIGZpbHRlcihwcm9wZXJ0eSx2YWx1ZSxzdHlsZSxfcmVmKXt2YXIgYnJvd3Nlck5hbWU9X3JlZi5icm93c2VyTmFtZSxicm93c2VyVmVyc2lvbj1fcmVmLmJyb3dzZXJWZXJzaW9uLGNzc1ByZWZpeD1fcmVmLmNzc1ByZWZpeCxrZWVwVW5wcmVmaXhlZD1fcmVmLmtlZXBVbnByZWZpeGVkO2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiZ2YWx1ZS5pbmRleE9mKCdmaWx0ZXIoJyk+LTEmJihicm93c2VyTmFtZT09PSdpb3Nfc2FmJ3x8YnJvd3Nlck5hbWU9PT0nc2FmYXJpJyYmYnJvd3NlclZlcnNpb248OS4xKSl7cmV0dXJuKDAsX2dldFByZWZpeGVkVmFsdWUyLmRlZmF1bHQpKHZhbHVlLnJlcGxhY2UoL2ZpbHRlclxcKC9nLGNzc1ByZWZpeCsnZmlsdGVyKCcpLHZhbHVlLGtlZXBVbnByZWZpeGVkKTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9maWx0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9ZmxleDt2YXIgX2dldFByZWZpeGVkVmFsdWU9cmVxdWlyZSgnLi4vLi4vdXRpbHMvZ2V0UHJlZml4ZWRWYWx1ZScpO3ZhciBfZ2V0UHJlZml4ZWRWYWx1ZTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJlZml4ZWRWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O312YXIgdmFsdWVzPXtmbGV4OnRydWUsJ2lubGluZS1mbGV4Jzp0cnVlfTtmdW5jdGlvbiBmbGV4KHByb3BlcnR5LHZhbHVlLHN0eWxlLF9yZWYpe3ZhciBicm93c2VyTmFtZT1fcmVmLmJyb3dzZXJOYW1lLGJyb3dzZXJWZXJzaW9uPV9yZWYuYnJvd3NlclZlcnNpb24sY3NzUHJlZml4PV9yZWYuY3NzUHJlZml4LGtlZXBVbnByZWZpeGVkPV9yZWYua2VlcFVucHJlZml4ZWQ7aWYocHJvcGVydHk9PT0nZGlzcGxheScmJnZhbHVlc1t2YWx1ZV0mJihicm93c2VyTmFtZT09PSdjaHJvbWUnJiZicm93c2VyVmVyc2lvbjwyOSYmYnJvd3NlclZlcnNpb24+MjB8fChicm93c2VyTmFtZT09PSdzYWZhcmknfHxicm93c2VyTmFtZT09PSdpb3Nfc2FmJykmJmJyb3dzZXJWZXJzaW9uPDkmJmJyb3dzZXJWZXJzaW9uPjZ8fGJyb3dzZXJOYW1lPT09J29wZXJhJyYmKGJyb3dzZXJWZXJzaW9uPT09MTV8fGJyb3dzZXJWZXJzaW9uPT09MTYpKSl7cmV0dXJuKDAsX2dldFByZWZpeGVkVmFsdWUyLmRlZmF1bHQpKGNzc1ByZWZpeCt2YWx1ZSx2YWx1ZSxrZWVwVW5wcmVmaXhlZCk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvZmxleC5qc1xuLy8gbW9kdWxlIGlkID0gMTM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1mbGV4Ym94SUU7dmFyIF9nZXRQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJy4uLy4uL3V0aWxzL2dldFByZWZpeGVkVmFsdWUnKTt2YXIgX2dldFByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9dmFyIGFsdGVybmF0aXZlVmFsdWVzPXsnc3BhY2UtYXJvdW5kJzonZGlzdHJpYnV0ZScsJ3NwYWNlLWJldHdlZW4nOidqdXN0aWZ5JywnZmxleC1zdGFydCc6J3N0YXJ0JywnZmxleC1lbmQnOidlbmQnLGZsZXg6J2ZsZXhib3gnLCdpbmxpbmUtZmxleCc6J2lubGluZS1mbGV4Ym94J307dmFyIGFsdGVybmF0aXZlUHJvcHM9e2FsaWduQ29udGVudDonbXNGbGV4TGluZVBhY2snLGFsaWduU2VsZjonbXNGbGV4SXRlbUFsaWduJyxhbGlnbkl0ZW1zOidtc0ZsZXhBbGlnbicsanVzdGlmeUNvbnRlbnQ6J21zRmxleFBhY2snLG9yZGVyOidtc0ZsZXhPcmRlcicsZmxleEdyb3c6J21zRmxleFBvc2l0aXZlJyxmbGV4U2hyaW5rOidtc0ZsZXhOZWdhdGl2ZScsZmxleEJhc2lzOidtc0ZsZXhQcmVmZXJyZWRTaXplJ307ZnVuY3Rpb24gZmxleGJveElFKHByb3BlcnR5LHZhbHVlLHN0eWxlLF9yZWYpe3ZhciBicm93c2VyTmFtZT1fcmVmLmJyb3dzZXJOYW1lLGJyb3dzZXJWZXJzaW9uPV9yZWYuYnJvd3NlclZlcnNpb24sY3NzUHJlZml4PV9yZWYuY3NzUHJlZml4LGtlZXBVbnByZWZpeGVkPV9yZWYua2VlcFVucHJlZml4ZWQscmVxdWlyZXNQcmVmaXg9X3JlZi5yZXF1aXJlc1ByZWZpeDtpZigoYWx0ZXJuYXRpdmVQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSl8fHByb3BlcnR5PT09J2Rpc3BsYXknJiZ0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyYmdmFsdWUuaW5kZXhPZignZmxleCcpPi0xKSYmKGJyb3dzZXJOYW1lPT09J2llX21vYid8fGJyb3dzZXJOYW1lPT09J2llJykmJmJyb3dzZXJWZXJzaW9uPT09MTApe2RlbGV0ZSByZXF1aXJlc1ByZWZpeFtwcm9wZXJ0eV07aWYoIWtlZXBVbnByZWZpeGVkJiYhQXJyYXkuaXNBcnJheShzdHlsZVtwcm9wZXJ0eV0pKXtkZWxldGUgc3R5bGVbcHJvcGVydHldO31pZihwcm9wZXJ0eT09PSdkaXNwbGF5JyYmYWx0ZXJuYXRpdmVWYWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWUpKXtyZXR1cm4oMCxfZ2V0UHJlZml4ZWRWYWx1ZTIuZGVmYXVsdCkoY3NzUHJlZml4K2FsdGVybmF0aXZlVmFsdWVzW3ZhbHVlXSx2YWx1ZSxrZWVwVW5wcmVmaXhlZCk7fWlmKGFsdGVybmF0aXZlUHJvcHMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKXtzdHlsZVthbHRlcm5hdGl2ZVByb3BzW3Byb3BlcnR5XV09YWx0ZXJuYXRpdmVWYWx1ZXNbdmFsdWVdfHx2YWx1ZTt9fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvZmxleGJveElFLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PWZsZXhib3hPbGQ7dmFyIF9nZXRQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJy4uLy4uL3V0aWxzL2dldFByZWZpeGVkVmFsdWUnKTt2YXIgX2dldFByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9dmFyIGFsdGVybmF0aXZlVmFsdWVzPXsnc3BhY2UtYXJvdW5kJzonanVzdGlmeScsJ3NwYWNlLWJldHdlZW4nOidqdXN0aWZ5JywnZmxleC1zdGFydCc6J3N0YXJ0JywnZmxleC1lbmQnOidlbmQnLCd3cmFwLXJldmVyc2UnOidtdWx0aXBsZScsd3JhcDonbXVsdGlwbGUnLGZsZXg6J2JveCcsJ2lubGluZS1mbGV4JzonaW5saW5lLWJveCd9O3ZhciBhbHRlcm5hdGl2ZVByb3BzPXthbGlnbkl0ZW1zOidXZWJraXRCb3hBbGlnbicsanVzdGlmeUNvbnRlbnQ6J1dlYmtpdEJveFBhY2snLGZsZXhXcmFwOidXZWJraXRCb3hMaW5lcycsZmxleEdyb3c6J1dlYmtpdEJveEZsZXgnfTt2YXIgb3RoZXJQcm9wcz1bJ2FsaWduQ29udGVudCcsJ2FsaWduU2VsZicsJ29yZGVyJywnZmxleEdyb3cnLCdmbGV4U2hyaW5rJywnZmxleEJhc2lzJywnZmxleERpcmVjdGlvbiddO3ZhciBwcm9wZXJ0aWVzPU9iamVjdC5rZXlzKGFsdGVybmF0aXZlUHJvcHMpLmNvbmNhdChvdGhlclByb3BzKTtmdW5jdGlvbiBmbGV4Ym94T2xkKHByb3BlcnR5LHZhbHVlLHN0eWxlLF9yZWYpe3ZhciBicm93c2VyTmFtZT1fcmVmLmJyb3dzZXJOYW1lLGJyb3dzZXJWZXJzaW9uPV9yZWYuYnJvd3NlclZlcnNpb24sY3NzUHJlZml4PV9yZWYuY3NzUHJlZml4LGtlZXBVbnByZWZpeGVkPV9yZWYua2VlcFVucHJlZml4ZWQscmVxdWlyZXNQcmVmaXg9X3JlZi5yZXF1aXJlc1ByZWZpeDtpZigocHJvcGVydGllcy5pbmRleE9mKHByb3BlcnR5KT4tMXx8cHJvcGVydHk9PT0nZGlzcGxheScmJnR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiZ2YWx1ZS5pbmRleE9mKCdmbGV4Jyk+LTEpJiYoYnJvd3Nlck5hbWU9PT0nZmlyZWZveCcmJmJyb3dzZXJWZXJzaW9uPDIyfHxicm93c2VyTmFtZT09PSdjaHJvbWUnJiZicm93c2VyVmVyc2lvbjwyMXx8KGJyb3dzZXJOYW1lPT09J3NhZmFyaSd8fGJyb3dzZXJOYW1lPT09J2lvc19zYWYnKSYmYnJvd3NlclZlcnNpb248PTYuMXx8YnJvd3Nlck5hbWU9PT0nYW5kcm9pZCcmJmJyb3dzZXJWZXJzaW9uPDQuNHx8YnJvd3Nlck5hbWU9PT0nYW5kX3VjJykpe2RlbGV0ZSByZXF1aXJlc1ByZWZpeFtwcm9wZXJ0eV07aWYoIWtlZXBVbnByZWZpeGVkJiYhQXJyYXkuaXNBcnJheShzdHlsZVtwcm9wZXJ0eV0pKXtkZWxldGUgc3R5bGVbcHJvcGVydHldO31pZihwcm9wZXJ0eT09PSdmbGV4RGlyZWN0aW9uJyYmdHlwZW9mIHZhbHVlPT09J3N0cmluZycpe2lmKHZhbHVlLmluZGV4T2YoJ2NvbHVtbicpPi0xKXtzdHlsZS5XZWJraXRCb3hPcmllbnQ9J3ZlcnRpY2FsJzt9ZWxzZXtzdHlsZS5XZWJraXRCb3hPcmllbnQ9J2hvcml6b250YWwnO31pZih2YWx1ZS5pbmRleE9mKCdyZXZlcnNlJyk+LTEpe3N0eWxlLldlYmtpdEJveERpcmVjdGlvbj0ncmV2ZXJzZSc7fWVsc2V7c3R5bGUuV2Via2l0Qm94RGlyZWN0aW9uPSdub3JtYWwnO319aWYocHJvcGVydHk9PT0nZGlzcGxheScmJmFsdGVybmF0aXZlVmFsdWVzLmhhc093blByb3BlcnR5KHZhbHVlKSl7cmV0dXJuKDAsX2dldFByZWZpeGVkVmFsdWUyLmRlZmF1bHQpKGNzc1ByZWZpeCthbHRlcm5hdGl2ZVZhbHVlc1t2YWx1ZV0sdmFsdWUsa2VlcFVucHJlZml4ZWQpO31pZihhbHRlcm5hdGl2ZVByb3BzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSl7c3R5bGVbYWx0ZXJuYXRpdmVQcm9wc1twcm9wZXJ0eV1dPWFsdGVybmF0aXZlVmFsdWVzW3ZhbHVlXXx8dmFsdWU7fX19bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL2ZsZXhib3hPbGQuanNcbi8vIG1vZHVsZSBpZCA9IDEzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9Z3JhZGllbnQ7dmFyIF9nZXRQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJy4uLy4uL3V0aWxzL2dldFByZWZpeGVkVmFsdWUnKTt2YXIgX2dldFByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9dmFyIHZhbHVlcz0vbGluZWFyLWdyYWRpZW50fHJhZGlhbC1ncmFkaWVudHxyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50fHJlcGVhdGluZy1yYWRpYWwtZ3JhZGllbnQvZ2k7ZnVuY3Rpb24gZ3JhZGllbnQocHJvcGVydHksdmFsdWUsc3R5bGUsX3JlZil7dmFyIGJyb3dzZXJOYW1lPV9yZWYuYnJvd3Nlck5hbWUsYnJvd3NlclZlcnNpb249X3JlZi5icm93c2VyVmVyc2lvbixjc3NQcmVmaXg9X3JlZi5jc3NQcmVmaXgsa2VlcFVucHJlZml4ZWQ9X3JlZi5rZWVwVW5wcmVmaXhlZDtpZih0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyYmdmFsdWVzLnRlc3QodmFsdWUpJiYoYnJvd3Nlck5hbWU9PT0nZmlyZWZveCcmJmJyb3dzZXJWZXJzaW9uPDE2fHxicm93c2VyTmFtZT09PSdjaHJvbWUnJiZicm93c2VyVmVyc2lvbjwyNnx8KGJyb3dzZXJOYW1lPT09J3NhZmFyaSd8fGJyb3dzZXJOYW1lPT09J2lvc19zYWYnKSYmYnJvd3NlclZlcnNpb248N3x8KGJyb3dzZXJOYW1lPT09J29wZXJhJ3x8YnJvd3Nlck5hbWU9PT0nb3BfbWluaScpJiZicm93c2VyVmVyc2lvbjwxMi4xfHxicm93c2VyTmFtZT09PSdhbmRyb2lkJyYmYnJvd3NlclZlcnNpb248NC40fHxicm93c2VyTmFtZT09PSdhbmRfdWMnKSl7cmV0dXJuKDAsX2dldFByZWZpeGVkVmFsdWUyLmRlZmF1bHQpKHZhbHVlLnJlcGxhY2UodmFsdWVzLGZ1bmN0aW9uKGdyYWQpe3JldHVybiBjc3NQcmVmaXgrZ3JhZDt9KSx2YWx1ZSxrZWVwVW5wcmVmaXhlZCk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvZ3JhZGllbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRlZmF1bHQ9aW1hZ2VTZXQ7dmFyIF9nZXRQcmVmaXhlZFZhbHVlPXJlcXVpcmUoJy4uLy4uL3V0aWxzL2dldFByZWZpeGVkVmFsdWUnKTt2YXIgX2dldFByZWZpeGVkVmFsdWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByZWZpeGVkVmFsdWUpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gaW1hZ2VTZXQocHJvcGVydHksdmFsdWUsc3R5bGUsX3JlZil7dmFyIGJyb3dzZXJOYW1lPV9yZWYuYnJvd3Nlck5hbWUsY3NzUHJlZml4PV9yZWYuY3NzUHJlZml4LGtlZXBVbnByZWZpeGVkPV9yZWYua2VlcFVucHJlZml4ZWQ7aWYodHlwZW9mIHZhbHVlPT09J3N0cmluZycmJnZhbHVlLmluZGV4T2YoJ2ltYWdlLXNldCgnKT4tMSYmKGJyb3dzZXJOYW1lPT09J2Nocm9tZSd8fGJyb3dzZXJOYW1lPT09J29wZXJhJ3x8YnJvd3Nlck5hbWU9PT0nYW5kX2Nocid8fGJyb3dzZXJOYW1lPT09J2FuZF91Yyd8fGJyb3dzZXJOYW1lPT09J2lvc19zYWYnfHxicm93c2VyTmFtZT09PSdzYWZhcmknKSl7cmV0dXJuKDAsX2dldFByZWZpeGVkVmFsdWUyLmRlZmF1bHQpKHZhbHVlLnJlcGxhY2UoL2ltYWdlLXNldFxcKC9nLGNzc1ByZWZpeCsnaW1hZ2Utc2V0KCcpLHZhbHVlLGtlZXBVbnByZWZpeGVkKTt9fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL34vaW5saW5lLXN0eWxlLXByZWZpeGVyL2R5bmFtaWMvcGx1Z2lucy9pbWFnZVNldC5qc1xuLy8gbW9kdWxlIGlkID0gMTQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD1wb3NpdGlvbjt2YXIgX2dldFByZWZpeGVkVmFsdWU9cmVxdWlyZSgnLi4vLi4vdXRpbHMvZ2V0UHJlZml4ZWRWYWx1ZScpO3ZhciBfZ2V0UHJlZml4ZWRWYWx1ZTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJlZml4ZWRWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O31mdW5jdGlvbiBwb3NpdGlvbihwcm9wZXJ0eSx2YWx1ZSxzdHlsZSxfcmVmKXt2YXIgYnJvd3Nlck5hbWU9X3JlZi5icm93c2VyTmFtZSxjc3NQcmVmaXg9X3JlZi5jc3NQcmVmaXgsa2VlcFVucHJlZml4ZWQ9X3JlZi5rZWVwVW5wcmVmaXhlZDtpZihwcm9wZXJ0eT09PSdwb3NpdGlvbicmJnZhbHVlPT09J3N0aWNreScmJihicm93c2VyTmFtZT09PSdzYWZhcmknfHxicm93c2VyTmFtZT09PSdpb3Nfc2FmJykpe3JldHVybigwLF9nZXRQcmVmaXhlZFZhbHVlMi5kZWZhdWx0KShjc3NQcmVmaXgrdmFsdWUsdmFsdWUsa2VlcFVucHJlZml4ZWQpO319bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL3Bvc2l0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kZWZhdWx0PXNpemluZzt2YXIgX2dldFByZWZpeGVkVmFsdWU9cmVxdWlyZSgnLi4vLi4vdXRpbHMvZ2V0UHJlZml4ZWRWYWx1ZScpO3ZhciBfZ2V0UHJlZml4ZWRWYWx1ZTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJlZml4ZWRWYWx1ZSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O312YXIgcHJvcGVydGllcz17bWF4SGVpZ2h0OnRydWUsbWF4V2lkdGg6dHJ1ZSx3aWR0aDp0cnVlLGhlaWdodDp0cnVlLGNvbHVtbldpZHRoOnRydWUsbWluV2lkdGg6dHJ1ZSxtaW5IZWlnaHQ6dHJ1ZX07dmFyIHZhbHVlcz17J21pbi1jb250ZW50Jzp0cnVlLCdtYXgtY29udGVudCc6dHJ1ZSwnZmlsbC1hdmFpbGFibGUnOnRydWUsJ2ZpdC1jb250ZW50Jzp0cnVlLCdjb250YWluLWZsb2F0cyc6dHJ1ZS8vIFRPRE86IGNocm9tZSAmIG9wZXJhIHN1cHBvcnQgaXRcbn07ZnVuY3Rpb24gc2l6aW5nKHByb3BlcnR5LHZhbHVlLHN0eWxlLF9yZWYpe3ZhciBjc3NQcmVmaXg9X3JlZi5jc3NQcmVmaXgsa2VlcFVucHJlZml4ZWQ9X3JlZi5rZWVwVW5wcmVmaXhlZDsvLyBUaGlzIG1pZ2h0IGNoYW5nZSBpbiB0aGUgZnV0dXJlXG4vLyBLZWVwIGFuIGV5ZSBvbiBpdFxuaWYocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkmJnZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpe3JldHVybigwLF9nZXRQcmVmaXhlZFZhbHVlMi5kZWZhdWx0KShjc3NQcmVmaXgrdmFsdWUsdmFsdWUsa2VlcFVucHJlZml4ZWQpO319bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vfi9pbmxpbmUtc3R5bGUtcHJlZml4ZXIvZHluYW1pYy9wbHVnaW5zL3NpemluZy5qc1xuLy8gbW9kdWxlIGlkID0gMTQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD10cmFuc2l0aW9uO3ZhciBfaHlwaGVuYXRlUHJvcGVydHk9cmVxdWlyZSgnY3NzLWluLWpzLXV0aWxzL2xpYi9oeXBoZW5hdGVQcm9wZXJ0eScpO3ZhciBfaHlwaGVuYXRlUHJvcGVydHkyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h5cGhlbmF0ZVByb3BlcnR5KTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fXZhciBwcm9wZXJ0aWVzPXt0cmFuc2l0aW9uOnRydWUsdHJhbnNpdGlvblByb3BlcnR5OnRydWUsV2Via2l0VHJhbnNpdGlvbjp0cnVlLFdlYmtpdFRyYW5zaXRpb25Qcm9wZXJ0eTp0cnVlLE1velRyYW5zaXRpb246dHJ1ZSxNb3pUcmFuc2l0aW9uUHJvcGVydHk6dHJ1ZX07dmFyIHJlcXVpcmVzUHJlZml4RGFzaENhc2VkPXZvaWQgMDtmdW5jdGlvbiB0cmFuc2l0aW9uKHByb3BlcnR5LHZhbHVlLHN0eWxlLF9yZWYpe3ZhciBjc3NQcmVmaXg9X3JlZi5jc3NQcmVmaXgsa2VlcFVucHJlZml4ZWQ9X3JlZi5rZWVwVW5wcmVmaXhlZCxyZXF1aXJlc1ByZWZpeD1fcmVmLnJlcXVpcmVzUHJlZml4O2lmKHR5cGVvZiB2YWx1ZT09PSdzdHJpbmcnJiZwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSl7Ly8gbWVtb2l6ZSB0aGUgcHJlZml4IGFycmF5IGZvciBsYXRlciB1c2VcbmlmKCFyZXF1aXJlc1ByZWZpeERhc2hDYXNlZCl7cmVxdWlyZXNQcmVmaXhEYXNoQ2FzZWQ9T2JqZWN0LmtleXMocmVxdWlyZXNQcmVmaXgpLm1hcChmdW5jdGlvbihwcm9wKXtyZXR1cm4oMCxfaHlwaGVuYXRlUHJvcGVydHkyLmRlZmF1bHQpKHByb3ApO30pO30vLyBvbmx5IHNwbGl0IG11bHRpIHZhbHVlcywgbm90IGN1YmljIGJlemllcnNcbnZhciBtdWx0aXBsZVZhbHVlcz12YWx1ZS5zcGxpdCgvLCg/IVteKCldKig/OlxcKFteKCldKlxcKSk/XFwpKS9nKTtyZXF1aXJlc1ByZWZpeERhc2hDYXNlZC5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape211bHRpcGxlVmFsdWVzLmZvckVhY2goZnVuY3Rpb24odmFsLGluZGV4KXtpZih2YWwuaW5kZXhPZihwcm9wKT4tMSYmcHJvcCE9PSdvcmRlcicpe211bHRpcGxlVmFsdWVzW2luZGV4XT12YWwucmVwbGFjZShwcm9wLGNzc1ByZWZpeCtwcm9wKSsoa2VlcFVucHJlZml4ZWQ/JywnK3ZhbDonJyk7fX0pO30pO3JldHVybiBtdWx0aXBsZVZhbHVlcy5qb2luKCcsJyk7fX1tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9+L2lubGluZS1zdHlsZS1wcmVmaXhlci9keW5hbWljL3BsdWdpbnMvdHJhbnNpdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO3ZhciBfY2xlYW5TdGF0ZUtleT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2NsZWFuLXN0YXRlLWtleVwiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7XCJkZWZhdWx0XCI6b2JqfTt9dmFyIGdldFN0YXRlPWZ1bmN0aW9uIGdldFN0YXRlKHN0YXRlLGVsZW1lbnRLZXksdmFsdWUpe3ZhciBrZXk9KDAsX2NsZWFuU3RhdGVLZXlbXCJkZWZhdWx0XCJdKShlbGVtZW50S2V5KTtyZXR1cm4hIXN0YXRlJiYhIXN0YXRlLl9yYWRpdW1TdHlsZVN0YXRlJiYhIXN0YXRlLl9yYWRpdW1TdHlsZVN0YXRlW2tleV0mJnN0YXRlLl9yYWRpdW1TdHlsZVN0YXRlW2tleV1bdmFsdWVdO307dmFyIF9kZWZhdWx0PWdldFN0YXRlO2V4cG9ydHNbXCJkZWZhdWx0XCJdPV9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL2dldC1zdGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwOy8qIGZsb3cgKi92YXIgY2xlYW5TdGF0ZUtleT1mdW5jdGlvbiBjbGVhblN0YXRlS2V5KGtleSl7cmV0dXJuIGtleT09PW51bGx8fHR5cGVvZiBrZXk9PT0ndW5kZWZpbmVkJz8nbWFpbic6a2V5LnRvU3RyaW5nKCk7fTt2YXIgX2RlZmF1bHQ9Y2xlYW5TdGF0ZUtleTtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9jbGVhbi1zdGF0ZS1rZXkuanNcbi8vIG1vZHVsZSBpZCA9IDE0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPXZvaWQgMDt2YXIgZ2V0U3RhdGVLZXk9ZnVuY3Rpb24gZ2V0U3RhdGVLZXkocmVuZGVyZWRFbGVtZW50KXtyZXR1cm4gdHlwZW9mIHJlbmRlcmVkRWxlbWVudC5yZWY9PT0nc3RyaW5nJz9yZW5kZXJlZEVsZW1lbnQucmVmOnJlbmRlcmVkRWxlbWVudC5rZXk7fTt2YXIgX2RlZmF1bHQ9Z2V0U3RhdGVLZXk7ZXhwb3J0c1tcImRlZmF1bHRcIl09X2RlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvZ2V0LXN0YXRlLWtleS5qc1xuLy8gbW9kdWxlIGlkID0gMTQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO3ZhciBnZXRSYWRpdW1TdHlsZVN0YXRlPWZ1bmN0aW9uIGdldFJhZGl1bVN0eWxlU3RhdGUoY29tcG9uZW50KXtyZXR1cm4gY29tcG9uZW50Ll9sYXN0UmFkaXVtU3RhdGV8fGNvbXBvbmVudC5zdGF0ZSYmY29tcG9uZW50LnN0YXRlLl9yYWRpdW1TdHlsZVN0YXRlfHx7fTt9O3ZhciBfZGVmYXVsdD1nZXRSYWRpdW1TdHlsZVN0YXRlO2V4cG9ydHNbXCJkZWZhdWx0XCJdPV9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL2dldC1yYWRpdW0tc3R5bGUtc3RhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDE0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPWhhc2g7Ly8gYSBzaW1wbGUgZGpiMiBoYXNoIGJhc2VkIG9uIGhhc2gtc3RyaW5nOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL01hdHRoZXdCYXJrZXIvaGFzaC1zdHJpbmcvYmxvYi9tYXN0ZXIvc291cmNlL2hhc2gtc3RyaW5nLmpzXG4vLyByZXR1cm5zIGEgaGV4LWVuY29kZWQgaGFzaFxuZnVuY3Rpb24gaGFzaCh0ZXh0KXtpZighdGV4dCl7cmV0dXJuJyc7fXZhciBoYXNoVmFsdWU9NTM4MTt2YXIgaW5kZXg9dGV4dC5sZW5ndGgtMTt3aGlsZShpbmRleCl7aGFzaFZhbHVlPWhhc2hWYWx1ZSozM150ZXh0LmNoYXJDb2RlQXQoaW5kZXgpO2luZGV4LT0xO31yZXR1cm4oaGFzaFZhbHVlPj4+MCkudG9TdHJpbmcoMTYpO31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9oYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF90eXBlb2YyPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo7fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuaXNOZXN0ZWRTdHlsZT1pc05lc3RlZFN0eWxlO2V4cG9ydHMubWVyZ2VTdHlsZXM9bWVyZ2VTdHlsZXM7ZnVuY3Rpb24gX3R5cGVvZihvYmope2lmKHR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJl90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcik9PT1cInN5bWJvbFwiKXtfdHlwZW9mPWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307fWVsc2V7X3R5cGVvZj1mdW5jdGlvbiBfdHlwZW9mKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307fXJldHVybiBfdHlwZW9mKG9iaik7fWZ1bmN0aW9uIGlzTmVzdGVkU3R5bGUodmFsdWUpey8vIERvbid0IG1lcmdlIG9iamVjdHMgb3ZlcnJpZGluZyB0b1N0cmluZywgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkXG4vLyB0byBzdHJpbmcgdmFsdWVzLlxucmV0dXJuIHZhbHVlJiZ2YWx1ZS5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmdmFsdWUudG9TdHJpbmc9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO30vLyBNZXJnZSBzdHlsZSBvYmplY3RzLiBEZWVwIG1lcmdlIHBsYWluIG9iamVjdCB2YWx1ZXMuXG5mdW5jdGlvbiBtZXJnZVN0eWxlcyhzdHlsZXMpe3ZhciByZXN1bHQ9e307c3R5bGVzLmZvckVhY2goZnVuY3Rpb24oc3R5bGUpe2lmKCFzdHlsZXx8X3R5cGVvZihzdHlsZSkhPT0nb2JqZWN0Jyl7cmV0dXJuO31pZihBcnJheS5pc0FycmF5KHN0eWxlKSl7c3R5bGU9bWVyZ2VTdHlsZXMoc3R5bGUpO31PYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpey8vIFNpbXBsZSBjYXNlLCBub3RoaW5nIG5lc3RlZFxuaWYoIWlzTmVzdGVkU3R5bGUoc3R5bGVba2V5XSl8fCFpc05lc3RlZFN0eWxlKHJlc3VsdFtrZXldKSl7cmVzdWx0W2tleV09c3R5bGVba2V5XTtyZXR1cm47fS8vIElmIG5lc3RlZCBtZWRpYSwgZG9uJ3QgbWVyZ2UgdGhlIG5lc3RlZCBzdHlsZXMsIGFwcGVuZCBhIHNwYWNlIHRvIHRoZVxuLy8gZW5kIChiZW5pZ24gd2hlbiBjb252ZXJ0ZWQgdG8gQ1NTKS4gVGhpcyB3YXkgd2UgZG9uJ3QgZW5kIHVwIG1lcmdpbmdcbi8vIG1lZGlhIHF1ZXJpZXMgdGhhdCBhcHBlYXIgbGF0ZXIgaW4gdGhlIGNoYWluIHdpdGggdGhvc2UgdGhhdCBhcHBlYXJcbi8vIGVhcmxpZXIuXG5pZihrZXkuaW5kZXhPZignQG1lZGlhJyk9PT0wKXt2YXIgbmV3S2V5PWtleTsvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG53aGlsZSh0cnVlKXtuZXdLZXkrPScgJztpZighcmVzdWx0W25ld0tleV0pe3Jlc3VsdFtuZXdLZXldPXN0eWxlW2tleV07cmV0dXJuO319fS8vIE1lcmdlIGFsbCBvdGhlciBuZXN0ZWQgc3R5bGVzIHJlY3Vyc2l2ZWx5XG5yZXN1bHRba2V5XT1tZXJnZVN0eWxlcyhbcmVzdWx0W2tleV0sc3R5bGVba2V5XV0pO30pO30pO3JldHVybiByZXN1bHQ7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL21lcmdlLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO3ZhciBfY2hlY2tQcm9wc1BsdWdpbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2NoZWNrLXByb3BzLXBsdWdpblwiKSk7dmFyIF9rZXlmcmFtZXNQbHVnaW49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9rZXlmcmFtZXMtcGx1Z2luXCIpKTt2YXIgX21lcmdlU3R5bGVBcnJheVBsdWdpbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL21lcmdlLXN0eWxlLWFycmF5LXBsdWdpblwiKSk7dmFyIF9wcmVmaXhQbHVnaW49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wcmVmaXgtcGx1Z2luXCIpKTt2YXIgX3JlbW92ZU5lc3RlZFN0eWxlc1BsdWdpbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JlbW92ZS1uZXN0ZWQtc3R5bGVzLXBsdWdpblwiKSk7dmFyIF9yZXNvbHZlSW50ZXJhY3Rpb25TdHlsZXNQbHVnaW49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9yZXNvbHZlLWludGVyYWN0aW9uLXN0eWxlcy1wbHVnaW5cIikpO3ZhciBfcmVzb2x2ZU1lZGlhUXVlcmllc1BsdWdpbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Jlc29sdmUtbWVkaWEtcXVlcmllcy1wbHVnaW5cIikpO3ZhciBfdmlzaXRlZFBsdWdpbj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Zpc2l0ZWQtcGx1Z2luXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O30vKiBlc2xpbnQtZGlzYWJsZSBibG9jay1zY29wZWQtY29uc3QgKi92YXIgX2RlZmF1bHQ9e2NoZWNrUHJvcHM6X2NoZWNrUHJvcHNQbHVnaW5bXCJkZWZhdWx0XCJdLGtleWZyYW1lczpfa2V5ZnJhbWVzUGx1Z2luW1wiZGVmYXVsdFwiXSxtZXJnZVN0eWxlQXJyYXk6X21lcmdlU3R5bGVBcnJheVBsdWdpbltcImRlZmF1bHRcIl0scHJlZml4Ol9wcmVmaXhQbHVnaW5bXCJkZWZhdWx0XCJdLHJlbW92ZU5lc3RlZFN0eWxlczpfcmVtb3ZlTmVzdGVkU3R5bGVzUGx1Z2luW1wiZGVmYXVsdFwiXSxyZXNvbHZlSW50ZXJhY3Rpb25TdHlsZXM6X3Jlc29sdmVJbnRlcmFjdGlvblN0eWxlc1BsdWdpbltcImRlZmF1bHRcIl0scmVzb2x2ZU1lZGlhUXVlcmllczpfcmVzb2x2ZU1lZGlhUXVlcmllc1BsdWdpbltcImRlZmF1bHRcIl0sdmlzaXRlZDpfdmlzaXRlZFBsdWdpbltcImRlZmF1bHRcIl19O2V4cG9ydHNbXCJkZWZhdWx0XCJdPV9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL3BsdWdpbnMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjt2YXIgX3R5cGVvZjI9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO2Z1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXSE9bnVsbD9hcmd1bWVudHNbaV06e307dmFyIG93bktleXM9T2JqZWN0LmtleXMoc291cmNlKTtpZih0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz09PSdmdW5jdGlvbicpe293bktleXM9b3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbihzeW0pe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxzeW0pLmVudW1lcmFibGU7fSkpO31vd25LZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtfZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxzb3VyY2Vba2V5XSk7fSk7fXJldHVybiB0YXJnZXQ7fWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9cmV0dXJuIG9iajt9ZnVuY3Rpb24gX3R5cGVvZihvYmope2lmKHR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJl90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcik9PT1cInN5bWJvbFwiKXtfdHlwZW9mPWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307fWVsc2V7X3R5cGVvZj1mdW5jdGlvbiBfdHlwZW9mKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307fXJldHVybiBfdHlwZW9mKG9iaik7fXZhciBfY2hlY2tQcm9wcz1mdW5jdGlvbiBjaGVja1Byb3BzKCl7fTtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7Ly8gV2FybiBpZiB5b3UgdXNlIGxvbmdoYW5kIGFuZCBzaG9ydGhhbmQgcHJvcGVydGllcyBpbiB0aGUgc2FtZSBzdHlsZVxuLy8gb2JqZWN0LlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL1Nob3J0aGFuZF9wcm9wZXJ0aWVzXG52YXIgc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zPXtiYWNrZ3JvdW5kOlsnYmFja2dyb3VuZEF0dGFjaG1lbnQnLCdiYWNrZ3JvdW5kQmxlbmRNb2RlJywnYmFja2dyb3VuZENsaXAnLCdiYWNrZ3JvdW5kQ29sb3InLCdiYWNrZ3JvdW5kSW1hZ2UnLCdiYWNrZ3JvdW5kT3JpZ2luJywnYmFja2dyb3VuZFBvc2l0aW9uJywnYmFja2dyb3VuZFBvc2l0aW9uWCcsJ2JhY2tncm91bmRQb3NpdGlvblknLCdiYWNrZ3JvdW5kUmVwZWF0JywnYmFja2dyb3VuZFJlcGVhdFgnLCdiYWNrZ3JvdW5kUmVwZWF0WScsJ2JhY2tncm91bmRTaXplJ10sYm9yZGVyOlsnYm9yZGVyQm90dG9tJywnYm9yZGVyQm90dG9tQ29sb3InLCdib3JkZXJCb3R0b21TdHlsZScsJ2JvcmRlckJvdHRvbVdpZHRoJywnYm9yZGVyQ29sb3InLCdib3JkZXJMZWZ0JywnYm9yZGVyTGVmdENvbG9yJywnYm9yZGVyTGVmdFN0eWxlJywnYm9yZGVyTGVmdFdpZHRoJywnYm9yZGVyUmlnaHQnLCdib3JkZXJSaWdodENvbG9yJywnYm9yZGVyUmlnaHRTdHlsZScsJ2JvcmRlclJpZ2h0V2lkdGgnLCdib3JkZXJTdHlsZScsJ2JvcmRlclRvcCcsJ2JvcmRlclRvcENvbG9yJywnYm9yZGVyVG9wU3R5bGUnLCdib3JkZXJUb3BXaWR0aCcsJ2JvcmRlcldpZHRoJ10sYm9yZGVySW1hZ2U6Wydib3JkZXJJbWFnZU91dHNldCcsJ2JvcmRlckltYWdlUmVwZWF0JywnYm9yZGVySW1hZ2VTbGljZScsJ2JvcmRlckltYWdlU291cmNlJywnYm9yZGVySW1hZ2VXaWR0aCddLGJvcmRlclJhZGl1czpbJ2JvcmRlckJvdHRvbUxlZnRSYWRpdXMnLCdib3JkZXJCb3R0b21SaWdodFJhZGl1cycsJ2JvcmRlclRvcExlZnRSYWRpdXMnLCdib3JkZXJUb3BSaWdodFJhZGl1cyddLGZvbnQ6Wydmb250RmFtaWx5JywnZm9udEtlcm5pbmcnLCdmb250U2l6ZScsJ2ZvbnRTdHJldGNoJywnZm9udFN0eWxlJywnZm9udFZhcmlhbnQnLCdmb250VmFyaWFudExpZ2F0dXJlcycsJ2ZvbnRXZWlnaHQnLCdsaW5lSGVpZ2h0J10sbGlzdFN0eWxlOlsnbGlzdFN0eWxlSW1hZ2UnLCdsaXN0U3R5bGVQb3NpdGlvbicsJ2xpc3RTdHlsZVR5cGUnXSxtYXJnaW46WydtYXJnaW5Cb3R0b20nLCdtYXJnaW5MZWZ0JywnbWFyZ2luUmlnaHQnLCdtYXJnaW5Ub3AnXSxwYWRkaW5nOlsncGFkZGluZ0JvdHRvbScsJ3BhZGRpbmdMZWZ0JywncGFkZGluZ1JpZ2h0JywncGFkZGluZ1RvcCddLHRyYW5zaXRpb246Wyd0cmFuc2l0aW9uRGVsYXknLCd0cmFuc2l0aW9uRHVyYXRpb24nLCd0cmFuc2l0aW9uUHJvcGVydHknLCd0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24nXX07X2NoZWNrUHJvcHM9ZnVuY3Rpb24gY2hlY2tQcm9wcyhjb25maWcpe3ZhciBjb21wb25lbnROYW1lPWNvbmZpZy5jb21wb25lbnROYW1lLHN0eWxlPWNvbmZpZy5zdHlsZTtpZihfdHlwZW9mKHN0eWxlKSE9PSdvYmplY3QnfHwhc3R5bGUpe3JldHVybjt9dmFyIHN0eWxlS2V5cz1PYmplY3Qua2V5cyhzdHlsZSk7c3R5bGVLZXlzLmZvckVhY2goZnVuY3Rpb24oc3R5bGVLZXkpe2lmKEFycmF5LmlzQXJyYXkoc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zW3N0eWxlS2V5XSkmJnNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uc1tzdHlsZUtleV0uc29tZShmdW5jdGlvbihzcCl7cmV0dXJuIHN0eWxlS2V5cy5pbmRleE9mKHNwKSE9PS0xO30pKXtpZihwcm9jZXNzLmVudi5OT0RFX0VOViE9PSdwcm9kdWN0aW9uJyl7LyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL2NvbnNvbGUud2FybignUmFkaXVtOiBwcm9wZXJ0eSBcIicrc3R5bGVLZXkrJ1wiIGluIHN0eWxlIG9iamVjdCcsc3R5bGUsJzogZG8gbm90IG1peCBsb25naGFuZCBhbmQgJysnc2hvcnRoYW5kIHByb3BlcnRpZXMgaW4gdGhlIHNhbWUgc3R5bGUgb2JqZWN0LiBDaGVjayB0aGUgcmVuZGVyICcrJ21ldGhvZCBvZiAnK2NvbXBvbmVudE5hbWUrJy4nLCdTZWUgaHR0cHM6Ly9naXRodWIuY29tL0Zvcm1pZGFibGVMYWJzL3JhZGl1bS9pc3N1ZXMvOTUgZm9yIG1vcmUgJysnaW5mb3JtYXRpb24uJyk7LyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovfX19KTtzdHlsZUtleXMuZm9yRWFjaChmdW5jdGlvbihrKXtyZXR1cm4gX2NoZWNrUHJvcHMoX29iamVjdFNwcmVhZCh7fSxjb25maWcse3N0eWxlOnN0eWxlW2tdfSkpO30pO3JldHVybjt9O312YXIgX2RlZmF1bHQ9X2NoZWNrUHJvcHM7ZXhwb3J0c1tcImRlZmF1bHRcIl09X2RlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9jaGVjay1wcm9wcy1wbHVnaW4uanNcbi8vIG1vZHVsZSBpZCA9IDE1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPWtleWZyYW1lc1BsdWdpbjtmdW5jdGlvbiBrZXlmcmFtZXNQbHVnaW4oX3JlZil7dmFyIGFkZENTUz1fcmVmLmFkZENTUyxjb25maWc9X3JlZi5jb25maWcsc3R5bGU9X3JlZi5zdHlsZTt2YXIgcHJvY2Vzc0tleWZyYW1lU3R5bGU9ZnVuY3Rpb24gcHJvY2Vzc0tleWZyYW1lU3R5bGUodmFsdWUpe3ZhciBrZXlmcmFtZXNWYWx1ZT12YWx1ZTt2YXIgX2tleWZyYW1lc1ZhbHVlJF9fcHJvPWtleWZyYW1lc1ZhbHVlLl9fcHJvY2Vzcyhjb25maWcudXNlckFnZW50KSxhbmltYXRpb25OYW1lPV9rZXlmcmFtZXNWYWx1ZSRfX3Byby5hbmltYXRpb25OYW1lLGNzcz1fa2V5ZnJhbWVzVmFsdWUkX19wcm8uY3NzO2FkZENTUyhjc3MpO3JldHVybiBhbmltYXRpb25OYW1lO307dmFyIG5ld1N0eWxlPU9iamVjdC5rZXlzKHN0eWxlKS5yZWR1Y2UoZnVuY3Rpb24obmV3U3R5bGVJblByb2dyZXNzLGtleSl7dmFyIHZhbHVlPXN0eWxlW2tleV07dmFyIGlzS2V5ZnJhbWVBcnJheT1BcnJheS5pc0FycmF5KHZhbHVlKTtpZihrZXk9PT0nYW5pbWF0aW9uTmFtZScmJnZhbHVlJiYodmFsdWUuX19yYWRpdW1LZXlmcmFtZXN8fGlzS2V5ZnJhbWVBcnJheSkpe2lmKGlzS2V5ZnJhbWVBcnJheSl7dmFsdWU9dmFsdWUubWFwKHByb2Nlc3NLZXlmcmFtZVN0eWxlKS5qb2luKCcsICcpO31lbHNle3ZhbHVlPXByb2Nlc3NLZXlmcmFtZVN0eWxlKHZhbHVlKTt9fW5ld1N0eWxlSW5Qcm9ncmVzc1trZXldPXZhbHVlO3JldHVybiBuZXdTdHlsZUluUHJvZ3Jlc3M7fSx7fSk7cmV0dXJue3N0eWxlOm5ld1N0eWxlfTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9rZXlmcmFtZXMtcGx1Z2luLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT12b2lkIDA7Ly8gQ29udmVuaWVudCBzeW50YXggZm9yIG11bHRpcGxlIHN0eWxlczogYHN0eWxlPXtbc3R5bGUxLCBzdHlsZTIsIGV0Y119YFxuLy8gSWdub3JlcyBub24tb2JqZWN0cywgc28geW91IGNhbiBkbyBgdGhpcy5zdGF0ZS5pc0Nvb2wgJiYgc3R5bGVzLmNvb2xgLlxudmFyIG1lcmdlU3R5bGVBcnJheVBsdWdpbj1mdW5jdGlvbiBtZXJnZVN0eWxlQXJyYXlQbHVnaW4oX3JlZil7dmFyIHN0eWxlPV9yZWYuc3R5bGUsbWVyZ2VTdHlsZXM9X3JlZi5tZXJnZVN0eWxlczsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNoYWRvd1xudmFyIG5ld1N0eWxlPUFycmF5LmlzQXJyYXkoc3R5bGUpP21lcmdlU3R5bGVzKHN0eWxlKTpzdHlsZTtyZXR1cm57c3R5bGU6bmV3U3R5bGV9O307dmFyIF9kZWZhdWx0PW1lcmdlU3R5bGVBcnJheVBsdWdpbjtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9wbHVnaW5zL21lcmdlLXN0eWxlLWFycmF5LXBsdWdpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09cHJlZml4UGx1Z2luO3ZhciBfcHJlZml4ZXI9cmVxdWlyZShcIi4uL3ByZWZpeGVyXCIpO2Z1bmN0aW9uIHByZWZpeFBsdWdpbihfcmVmKXt2YXIgY29uZmlnPV9yZWYuY29uZmlnLHN0eWxlPV9yZWYuc3R5bGU7dmFyIG5ld1N0eWxlPSgwLF9wcmVmaXhlci5nZXRQcmVmaXhlZFN0eWxlKShzdHlsZSxjb25maWcudXNlckFnZW50KTtyZXR1cm57c3R5bGU6bmV3U3R5bGV9O31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9wbHVnaW5zL3ByZWZpeC1wbHVnaW4uanNcbi8vIG1vZHVsZSBpZCA9IDE1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPXJlbW92ZU5lc3RlZFN0eWxlcztmdW5jdGlvbiByZW1vdmVOZXN0ZWRTdHlsZXMoX3JlZil7dmFyIGlzTmVzdGVkU3R5bGU9X3JlZi5pc05lc3RlZFN0eWxlLHN0eWxlPV9yZWYuc3R5bGU7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zaGFkb3dcbnZhciBuZXdTdHlsZT1PYmplY3Qua2V5cyhzdHlsZSkucmVkdWNlKGZ1bmN0aW9uKG5ld1N0eWxlSW5Qcm9ncmVzcyxrZXkpe3ZhciB2YWx1ZT1zdHlsZVtrZXldO2lmKCFpc05lc3RlZFN0eWxlKHZhbHVlKSl7bmV3U3R5bGVJblByb2dyZXNzW2tleV09dmFsdWU7fXJldHVybiBuZXdTdHlsZUluUHJvZ3Jlc3M7fSx7fSk7cmV0dXJue3N0eWxlOm5ld1N0eWxlfTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9yZW1vdmUtbmVzdGVkLXN0eWxlcy1wbHVnaW4uanNcbi8vIG1vZHVsZSBpZCA9IDE1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPXZvaWQgMDt2YXIgX21vdXNlVXBMaXN0ZW5lcj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL21vdXNlLXVwLWxpc3RlbmVyXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O312YXIgX2lzSW50ZXJhY3RpdmVTdHlsZUZpZWxkPWZ1bmN0aW9uIF9pc0ludGVyYWN0aXZlU3R5bGVGaWVsZChzdHlsZUZpZWxkTmFtZSl7cmV0dXJuIHN0eWxlRmllbGROYW1lPT09Jzpob3Zlcid8fHN0eWxlRmllbGROYW1lPT09JzphY3RpdmUnfHxzdHlsZUZpZWxkTmFtZT09PSc6Zm9jdXMnO307dmFyIHJlc29sdmVJbnRlcmFjdGlvblN0eWxlcz1mdW5jdGlvbiByZXNvbHZlSW50ZXJhY3Rpb25TdHlsZXMoY29uZmlnKXt2YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQ9Y29uZmlnLkV4ZWN1dGlvbkVudmlyb25tZW50LGdldENvbXBvbmVudEZpZWxkPWNvbmZpZy5nZXRDb21wb25lbnRGaWVsZCxnZXRTdGF0ZT1jb25maWcuZ2V0U3RhdGUsbWVyZ2VTdHlsZXM9Y29uZmlnLm1lcmdlU3R5bGVzLHByb3BzPWNvbmZpZy5wcm9wcyxzZXRTdGF0ZT1jb25maWcuc2V0U3RhdGUsc3R5bGU9Y29uZmlnLnN0eWxlO3ZhciBuZXdDb21wb25lbnRGaWVsZHM9e307dmFyIG5ld1Byb3BzPXt9Oy8vIE9ubHkgYWRkIGhhbmRsZXJzIGlmIG5lY2Vzc2FyeVxuaWYoc3R5bGVbJzpob3ZlciddKXsvLyBBbHdheXMgY2FsbCB0aGUgZXhpc3RpbmcgaGFuZGxlciBpZiBvbmUgaXMgYWxyZWFkeSBkZWZpbmVkLlxuLy8gVGhpcyBjb2RlLCBhbmQgdGhlIHZlcnkgc2ltaWxhciBvbmVzIGJlbG93LCBjb3VsZCBiZSBhYnN0cmFjdGVkIGEgYml0XG4vLyBtb3JlLCBidXQgaXQgaHVydHMgcmVhZGFiaWxpdHkgSU1PLlxudmFyIGV4aXN0aW5nT25Nb3VzZUVudGVyPXByb3BzLm9uTW91c2VFbnRlcjtuZXdQcm9wcy5vbk1vdXNlRW50ZXI9ZnVuY3Rpb24oZSl7ZXhpc3RpbmdPbk1vdXNlRW50ZXImJmV4aXN0aW5nT25Nb3VzZUVudGVyKGUpO3NldFN0YXRlKCc6aG92ZXInLHRydWUpO307dmFyIGV4aXN0aW5nT25Nb3VzZUxlYXZlPXByb3BzLm9uTW91c2VMZWF2ZTtuZXdQcm9wcy5vbk1vdXNlTGVhdmU9ZnVuY3Rpb24oZSl7ZXhpc3RpbmdPbk1vdXNlTGVhdmUmJmV4aXN0aW5nT25Nb3VzZUxlYXZlKGUpO3NldFN0YXRlKCc6aG92ZXInLGZhbHNlKTt9O31pZihzdHlsZVsnOmFjdGl2ZSddKXt2YXIgZXhpc3RpbmdPbk1vdXNlRG93bj1wcm9wcy5vbk1vdXNlRG93bjtuZXdQcm9wcy5vbk1vdXNlRG93bj1mdW5jdGlvbihlKXtleGlzdGluZ09uTW91c2VEb3duJiZleGlzdGluZ09uTW91c2VEb3duKGUpO25ld0NvbXBvbmVudEZpZWxkcy5fbGFzdE1vdXNlRG93bj1EYXRlLm5vdygpO3NldFN0YXRlKCc6YWN0aXZlJywndmlhbW91c2Vkb3duJyk7fTt2YXIgZXhpc3RpbmdPbktleURvd249cHJvcHMub25LZXlEb3duO25ld1Byb3BzLm9uS2V5RG93bj1mdW5jdGlvbihlKXtleGlzdGluZ09uS2V5RG93biYmZXhpc3RpbmdPbktleURvd24oZSk7aWYoZS5rZXk9PT0nICd8fGUua2V5PT09J0VudGVyJyl7c2V0U3RhdGUoJzphY3RpdmUnLCd2aWFrZXlkb3duJyk7fX07dmFyIGV4aXN0aW5nT25LZXlVcD1wcm9wcy5vbktleVVwO25ld1Byb3BzLm9uS2V5VXA9ZnVuY3Rpb24oZSl7ZXhpc3RpbmdPbktleVVwJiZleGlzdGluZ09uS2V5VXAoZSk7aWYoZS5rZXk9PT0nICd8fGUua2V5PT09J0VudGVyJyl7c2V0U3RhdGUoJzphY3RpdmUnLGZhbHNlKTt9fTt9aWYoc3R5bGVbJzpmb2N1cyddKXt2YXIgZXhpc3RpbmdPbkZvY3VzPXByb3BzLm9uRm9jdXM7bmV3UHJvcHMub25Gb2N1cz1mdW5jdGlvbihlKXtleGlzdGluZ09uRm9jdXMmJmV4aXN0aW5nT25Gb2N1cyhlKTtzZXRTdGF0ZSgnOmZvY3VzJyx0cnVlKTt9O3ZhciBleGlzdGluZ09uQmx1cj1wcm9wcy5vbkJsdXI7bmV3UHJvcHMub25CbHVyPWZ1bmN0aW9uKGUpe2V4aXN0aW5nT25CbHVyJiZleGlzdGluZ09uQmx1cihlKTtzZXRTdGF0ZSgnOmZvY3VzJyxmYWxzZSk7fTt9aWYoc3R5bGVbJzphY3RpdmUnXSYmIWdldENvbXBvbmVudEZpZWxkKCdfcmFkaXVtTW91c2VVcExpc3RlbmVyJykmJkV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZUV2ZW50TGlzdGVuZXJzKXtuZXdDb21wb25lbnRGaWVsZHMuX3JhZGl1bU1vdXNlVXBMaXN0ZW5lcj1fbW91c2VVcExpc3RlbmVyW1wiZGVmYXVsdFwiXS5zdWJzY3JpYmUoZnVuY3Rpb24oKXtPYmplY3Qua2V5cyhnZXRDb21wb25lbnRGaWVsZCgnc3RhdGUnKS5fcmFkaXVtU3R5bGVTdGF0ZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2lmKGdldFN0YXRlKCc6YWN0aXZlJyxrZXkpPT09J3ZpYW1vdXNlZG93bicpe3NldFN0YXRlKCc6YWN0aXZlJyxmYWxzZSxrZXkpO319KTt9KTt9Ly8gTWVyZ2UgdGhlIHN0eWxlcyBpbiB0aGUgb3JkZXIgdGhleSB3ZXJlIGRlZmluZWRcbnZhciBpbnRlcmFjdGlvblN0eWxlcz1wcm9wcy5kaXNhYmxlZD9bc3R5bGVbJzpkaXNhYmxlZCddXTpPYmplY3Qua2V5cyhzdHlsZSkuZmlsdGVyKGZ1bmN0aW9uKG5hbWUpe3JldHVybiBfaXNJbnRlcmFjdGl2ZVN0eWxlRmllbGQobmFtZSkmJmdldFN0YXRlKG5hbWUpO30pLm1hcChmdW5jdGlvbihuYW1lKXtyZXR1cm4gc3R5bGVbbmFtZV07fSk7dmFyIG5ld1N0eWxlPW1lcmdlU3R5bGVzKFtzdHlsZV0uY29uY2F0KGludGVyYWN0aW9uU3R5bGVzKSk7Ly8gUmVtb3ZlIGludGVyYWN0aXZlIHN0eWxlc1xubmV3U3R5bGU9T2JqZWN0LmtleXMobmV3U3R5bGUpLnJlZHVjZShmdW5jdGlvbihzdHlsZVdpdGhvdXRJbnRlcmFjdGlvbnMsbmFtZSl7aWYoIV9pc0ludGVyYWN0aXZlU3R5bGVGaWVsZChuYW1lKSYmbmFtZSE9PSc6ZGlzYWJsZWQnKXtzdHlsZVdpdGhvdXRJbnRlcmFjdGlvbnNbbmFtZV09bmV3U3R5bGVbbmFtZV07fXJldHVybiBzdHlsZVdpdGhvdXRJbnRlcmFjdGlvbnM7fSx7fSk7cmV0dXJue2NvbXBvbmVudEZpZWxkczpuZXdDb21wb25lbnRGaWVsZHMscHJvcHM6bmV3UHJvcHMsc3R5bGU6bmV3U3R5bGV9O307dmFyIF9kZWZhdWx0PXJlc29sdmVJbnRlcmFjdGlvblN0eWxlcztleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9wbHVnaW5zL3Jlc29sdmUtaW50ZXJhY3Rpb24tc3R5bGVzLXBsdWdpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO3ZhciBfY2FsbGJhY2tzPVtdO3ZhciBfbW91c2VVcExpc3RlbmVySXNBY3RpdmU9ZmFsc2U7ZnVuY3Rpb24gX2hhbmRsZU1vdXNlVXAoKXtfY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24oY2FsbGJhY2spe2NhbGxiYWNrKCk7fSk7fXZhciBzdWJzY3JpYmU9ZnVuY3Rpb24gc3Vic2NyaWJlKGNhbGxiYWNrKXtpZihfY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spPT09LTEpe19jYWxsYmFja3MucHVzaChjYWxsYmFjayk7fWlmKCFfbW91c2VVcExpc3RlbmVySXNBY3RpdmUpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxfaGFuZGxlTW91c2VVcCk7X21vdXNlVXBMaXN0ZW5lcklzQWN0aXZlPXRydWU7fXJldHVybntyZW1vdmU6ZnVuY3Rpb24gcmVtb3ZlKCl7dmFyIGluZGV4PV9jYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7X2NhbGxiYWNrcy5zcGxpY2UoaW5kZXgsMSk7aWYoX2NhbGxiYWNrcy5sZW5ndGg9PT0wJiZfbW91c2VVcExpc3RlbmVySXNBY3RpdmUpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxfaGFuZGxlTW91c2VVcCk7X21vdXNlVXBMaXN0ZW5lcklzQWN0aXZlPWZhbHNlO319fTt9O3ZhciBfZGVmYXVsdD17c3Vic2NyaWJlOnN1YnNjcmliZSxfX3RyaWdnZXJGb3JUZXN0czpfaGFuZGxlTW91c2VVcH07ZXhwb3J0c1tcImRlZmF1bHRcIl09X2RlZmF1bHQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvcGx1Z2lucy9tb3VzZS11cC1saXN0ZW5lci5qc1xuLy8gbW9kdWxlIGlkID0gMTU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09cmVzb2x2ZU1lZGlhUXVlcmllcztmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCl7Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV0hPW51bGw/YXJndW1lbnRzW2ldOnt9O3ZhciBvd25LZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0nZnVuY3Rpb24nKXtvd25LZXlzPW93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2Usc3ltKS5lbnVtZXJhYmxlO30pKTt9b3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pO30pO31yZXR1cm4gdGFyZ2V0O31mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLGtleSx2YWx1ZSl7aWYoa2V5IGluIG9iail7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbHVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSk7fWVsc2V7b2JqW2tleV09dmFsdWU7fXJldHVybiBvYmo7fXZhciBfd2luZG93TWF0Y2hNZWRpYTtmdW5jdGlvbiBfZ2V0V2luZG93TWF0Y2hNZWRpYShFeGVjdXRpb25FbnZpcm9ubWVudCl7aWYoX3dpbmRvd01hdGNoTWVkaWE9PT11bmRlZmluZWQpe193aW5kb3dNYXRjaE1lZGlhPSEhRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NJiYhIXdpbmRvdyYmISF3aW5kb3cubWF0Y2hNZWRpYSYmZnVuY3Rpb24obWVkaWFRdWVyeVN0cmluZyl7cmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKG1lZGlhUXVlcnlTdHJpbmcpO318fG51bGw7fXJldHVybiBfd2luZG93TWF0Y2hNZWRpYTt9ZnVuY3Rpb24gX2ZpbHRlck9iamVjdChvYmoscHJlZGljYXRlKXtyZXR1cm4gT2JqZWN0LmtleXMob2JqKS5maWx0ZXIoZnVuY3Rpb24oa2V5KXtyZXR1cm4gcHJlZGljYXRlKG9ialtrZXldLGtleSk7fSkucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCxrZXkpe3Jlc3VsdFtrZXldPW9ialtrZXldO3JldHVybiByZXN1bHQ7fSx7fSk7fWZ1bmN0aW9uIF9yZW1vdmVNZWRpYVF1ZXJpZXMoc3R5bGUpe3JldHVybiBPYmplY3Qua2V5cyhzdHlsZSkucmVkdWNlKGZ1bmN0aW9uKHN0eWxlV2l0aG91dE1lZGlhLGtleSl7aWYoa2V5LmluZGV4T2YoJ0BtZWRpYScpIT09MCl7c3R5bGVXaXRob3V0TWVkaWFba2V5XT1zdHlsZVtrZXldO31yZXR1cm4gc3R5bGVXaXRob3V0TWVkaWE7fSx7fSk7fWZ1bmN0aW9uIF90b3BMZXZlbFJ1bGVzVG9DU1MoX3JlZil7dmFyIGFkZENTUz1fcmVmLmFkZENTUyxhcHBlbmRJbXBvcnRhbnRUb0VhY2hWYWx1ZT1fcmVmLmFwcGVuZEltcG9ydGFudFRvRWFjaFZhbHVlLGNzc1J1bGVTZXRUb1N0cmluZz1fcmVmLmNzc1J1bGVTZXRUb1N0cmluZyxoYXNoPV9yZWYuaGFzaCxpc05lc3RlZFN0eWxlPV9yZWYuaXNOZXN0ZWRTdHlsZSxzdHlsZT1fcmVmLnN0eWxlLHVzZXJBZ2VudD1fcmVmLnVzZXJBZ2VudDt2YXIgY2xhc3NOYW1lPScnO09iamVjdC5rZXlzKHN0eWxlKS5maWx0ZXIoZnVuY3Rpb24obmFtZSl7cmV0dXJuIG5hbWUuaW5kZXhPZignQG1lZGlhJyk9PT0wO30pLm1hcChmdW5jdGlvbihxdWVyeSl7dmFyIHRvcExldmVsUnVsZXM9YXBwZW5kSW1wb3J0YW50VG9FYWNoVmFsdWUoX2ZpbHRlck9iamVjdChzdHlsZVtxdWVyeV0sZnVuY3Rpb24odmFsdWUpe3JldHVybiFpc05lc3RlZFN0eWxlKHZhbHVlKTt9KSk7aWYoIU9iamVjdC5rZXlzKHRvcExldmVsUnVsZXMpLmxlbmd0aCl7cmV0dXJuO312YXIgcnVsZUNTUz1jc3NSdWxlU2V0VG9TdHJpbmcoJycsdG9wTGV2ZWxSdWxlcyx1c2VyQWdlbnQpOy8vIENTUyBjbGFzc2VzIGNhbm5vdCBzdGFydCB3aXRoIGEgbnVtYmVyXG52YXIgbWVkaWFRdWVyeUNsYXNzTmFtZT0ncm1xLScraGFzaChxdWVyeStydWxlQ1NTKTt2YXIgY3NzPXF1ZXJ5Kyd7IC4nK21lZGlhUXVlcnlDbGFzc05hbWUrcnVsZUNTUysnfSc7YWRkQ1NTKGNzcyk7Y2xhc3NOYW1lKz0oY2xhc3NOYW1lPycgJzonJykrbWVkaWFRdWVyeUNsYXNzTmFtZTt9KTtyZXR1cm4gY2xhc3NOYW1lO31mdW5jdGlvbiBfc3Vic2NyaWJlVG9NZWRpYVF1ZXJ5KF9yZWYyKXt2YXIgbGlzdGVuZXI9X3JlZjIubGlzdGVuZXIsbGlzdGVuZXJzQnlRdWVyeT1fcmVmMi5saXN0ZW5lcnNCeVF1ZXJ5LG1hdGNoTWVkaWE9X3JlZjIubWF0Y2hNZWRpYSxtZWRpYVF1ZXJ5TGlzdHNCeVF1ZXJ5PV9yZWYyLm1lZGlhUXVlcnlMaXN0c0J5UXVlcnkscXVlcnk9X3JlZjIucXVlcnk7cXVlcnk9cXVlcnkucmVwbGFjZSgnQG1lZGlhICcsJycpO3ZhciBtcWw9bWVkaWFRdWVyeUxpc3RzQnlRdWVyeVtxdWVyeV07aWYoIW1xbCYmbWF0Y2hNZWRpYSl7bWVkaWFRdWVyeUxpc3RzQnlRdWVyeVtxdWVyeV09bXFsPW1hdGNoTWVkaWEocXVlcnkpO31pZighbGlzdGVuZXJzQnlRdWVyeXx8IWxpc3RlbmVyc0J5UXVlcnlbcXVlcnldKXttcWwuYWRkTGlzdGVuZXIobGlzdGVuZXIpO2xpc3RlbmVyc0J5UXVlcnlbcXVlcnldPXtyZW1vdmU6ZnVuY3Rpb24gcmVtb3ZlKCl7bXFsLnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTt9fTt9cmV0dXJuIG1xbDt9ZnVuY3Rpb24gcmVzb2x2ZU1lZGlhUXVlcmllcyhfcmVmMyl7dmFyIEV4ZWN1dGlvbkVudmlyb25tZW50PV9yZWYzLkV4ZWN1dGlvbkVudmlyb25tZW50LGFkZENTUz1fcmVmMy5hZGRDU1MsYXBwZW5kSW1wb3J0YW50VG9FYWNoVmFsdWU9X3JlZjMuYXBwZW5kSW1wb3J0YW50VG9FYWNoVmFsdWUsY29uZmlnPV9yZWYzLmNvbmZpZyxjc3NSdWxlU2V0VG9TdHJpbmc9X3JlZjMuY3NzUnVsZVNldFRvU3RyaW5nLGdldENvbXBvbmVudEZpZWxkPV9yZWYzLmdldENvbXBvbmVudEZpZWxkLGdldEdsb2JhbFN0YXRlPV9yZWYzLmdldEdsb2JhbFN0YXRlLGhhc2g9X3JlZjMuaGFzaCxpc05lc3RlZFN0eWxlPV9yZWYzLmlzTmVzdGVkU3R5bGUsbWVyZ2VTdHlsZXM9X3JlZjMubWVyZ2VTdHlsZXMscHJvcHM9X3JlZjMucHJvcHMsc2V0U3RhdGU9X3JlZjMuc2V0U3RhdGUsc3R5bGU9X3JlZjMuc3R5bGU7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zaGFkb3dcbnZhciBuZXdTdHlsZT1fcmVtb3ZlTWVkaWFRdWVyaWVzKHN0eWxlKTt2YXIgbWVkaWFRdWVyeUNsYXNzTmFtZXM9X3RvcExldmVsUnVsZXNUb0NTUyh7YWRkQ1NTOmFkZENTUyxhcHBlbmRJbXBvcnRhbnRUb0VhY2hWYWx1ZTphcHBlbmRJbXBvcnRhbnRUb0VhY2hWYWx1ZSxjc3NSdWxlU2V0VG9TdHJpbmc6Y3NzUnVsZVNldFRvU3RyaW5nLGhhc2g6aGFzaCxpc05lc3RlZFN0eWxlOmlzTmVzdGVkU3R5bGUsc3R5bGU6c3R5bGUsdXNlckFnZW50OmNvbmZpZy51c2VyQWdlbnR9KTt2YXIgbmV3UHJvcHM9bWVkaWFRdWVyeUNsYXNzTmFtZXM/e2NsYXNzTmFtZTptZWRpYVF1ZXJ5Q2xhc3NOYW1lcysocHJvcHMuY2xhc3NOYW1lPycgJytwcm9wcy5jbGFzc05hbWU6JycpfTpudWxsO3ZhciBtYXRjaE1lZGlhPWNvbmZpZy5tYXRjaE1lZGlhfHxfZ2V0V2luZG93TWF0Y2hNZWRpYShFeGVjdXRpb25FbnZpcm9ubWVudCk7aWYoIW1hdGNoTWVkaWEpe3JldHVybntwcm9wczpuZXdQcm9wcyxzdHlsZTpuZXdTdHlsZX07fXZhciBsaXN0ZW5lcnNCeVF1ZXJ5PV9vYmplY3RTcHJlYWQoe30sZ2V0Q29tcG9uZW50RmllbGQoJ19yYWRpdW1NZWRpYVF1ZXJ5TGlzdGVuZXJzQnlRdWVyeScpKTt2YXIgbWVkaWFRdWVyeUxpc3RzQnlRdWVyeT1nZXRHbG9iYWxTdGF0ZSgnbWVkaWFRdWVyeUxpc3RzQnlRdWVyeScpfHx7fTtPYmplY3Qua2V5cyhzdHlsZSkuZmlsdGVyKGZ1bmN0aW9uKG5hbWUpe3JldHVybiBuYW1lLmluZGV4T2YoJ0BtZWRpYScpPT09MDt9KS5tYXAoZnVuY3Rpb24ocXVlcnkpe3ZhciBuZXN0ZWRSdWxlcz1fZmlsdGVyT2JqZWN0KHN0eWxlW3F1ZXJ5XSxpc05lc3RlZFN0eWxlKTtpZighT2JqZWN0LmtleXMobmVzdGVkUnVsZXMpLmxlbmd0aCl7cmV0dXJuO312YXIgbXFsPV9zdWJzY3JpYmVUb01lZGlhUXVlcnkoe2xpc3RlbmVyOmZ1bmN0aW9uIGxpc3RlbmVyKCl7cmV0dXJuIHNldFN0YXRlKHF1ZXJ5LG1xbC5tYXRjaGVzLCdfYWxsJyk7fSxsaXN0ZW5lcnNCeVF1ZXJ5Omxpc3RlbmVyc0J5UXVlcnksbWF0Y2hNZWRpYTptYXRjaE1lZGlhLG1lZGlhUXVlcnlMaXN0c0J5UXVlcnk6bWVkaWFRdWVyeUxpc3RzQnlRdWVyeSxxdWVyeTpxdWVyeX0pOy8vIEFwcGx5IG1lZGlhIHF1ZXJ5IHN0YXRlc1xuaWYobXFsLm1hdGNoZXMpe25ld1N0eWxlPW1lcmdlU3R5bGVzKFtuZXdTdHlsZSxuZXN0ZWRSdWxlc10pO319KTtyZXR1cm57Y29tcG9uZW50RmllbGRzOntfcmFkaXVtTWVkaWFRdWVyeUxpc3RlbmVyc0J5UXVlcnk6bGlzdGVuZXJzQnlRdWVyeX0sZ2xvYmFsU3RhdGU6e21lZGlhUXVlcnlMaXN0c0J5UXVlcnk6bWVkaWFRdWVyeUxpc3RzQnlRdWVyeX0scHJvcHM6bmV3UHJvcHMsc3R5bGU6bmV3U3R5bGV9O31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9wbHVnaW5zL3Jlc29sdmUtbWVkaWEtcXVlcmllcy1wbHVnaW4uanNcbi8vIG1vZHVsZSBpZCA9IDE1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPXZpc2l0ZWQ7ZnVuY3Rpb24gdmlzaXRlZChfcmVmKXt2YXIgYWRkQ1NTPV9yZWYuYWRkQ1NTLGFwcGVuZEltcG9ydGFudFRvRWFjaFZhbHVlPV9yZWYuYXBwZW5kSW1wb3J0YW50VG9FYWNoVmFsdWUsY29uZmlnPV9yZWYuY29uZmlnLGNzc1J1bGVTZXRUb1N0cmluZz1fcmVmLmNzc1J1bGVTZXRUb1N0cmluZyxoYXNoPV9yZWYuaGFzaCxwcm9wcz1fcmVmLnByb3BzLHN0eWxlPV9yZWYuc3R5bGU7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zaGFkb3dcbnZhciBjbGFzc05hbWU9cHJvcHMuY2xhc3NOYW1lO3ZhciBuZXdTdHlsZT1PYmplY3Qua2V5cyhzdHlsZSkucmVkdWNlKGZ1bmN0aW9uKG5ld1N0eWxlSW5Qcm9ncmVzcyxrZXkpe3ZhciB2YWx1ZT1zdHlsZVtrZXldO2lmKGtleT09PSc6dmlzaXRlZCcpe3ZhbHVlPWFwcGVuZEltcG9ydGFudFRvRWFjaFZhbHVlKHZhbHVlKTt2YXIgcnVsZUNTUz1jc3NSdWxlU2V0VG9TdHJpbmcoJycsdmFsdWUsY29uZmlnLnVzZXJBZ2VudCk7dmFyIHZpc2l0ZWRDbGFzc05hbWU9J3JhZC0nK2hhc2gocnVsZUNTUyk7dmFyIGNzcz0nLicrdmlzaXRlZENsYXNzTmFtZSsnOnZpc2l0ZWQnK3J1bGVDU1M7YWRkQ1NTKGNzcyk7Y2xhc3NOYW1lPShjbGFzc05hbWU/Y2xhc3NOYW1lKycgJzonJykrdmlzaXRlZENsYXNzTmFtZTt9ZWxzZXtuZXdTdHlsZUluUHJvZ3Jlc3Nba2V5XT12YWx1ZTt9cmV0dXJuIG5ld1N0eWxlSW5Qcm9ncmVzczt9LHt9KTtyZXR1cm57cHJvcHM6Y2xhc3NOYW1lPT09cHJvcHMuY2xhc3NOYW1lP251bGw6e2NsYXNzTmFtZTpjbGFzc05hbWV9LHN0eWxlOm5ld1N0eWxlfTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JhZGl1bS9saWIvcGx1Z2lucy92aXNpdGVkLXBsdWdpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO2Z1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTt9fWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKFwidmFsdWVcImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX1mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9dmFyIFN0eWxlS2VlcGVyPS8qI19fUFVSRV9fKi9mdW5jdGlvbigpe2Z1bmN0aW9uIFN0eWxlS2VlcGVyKHVzZXJBZ2VudCl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsU3R5bGVLZWVwZXIpO3RoaXMuX3VzZXJBZ2VudD12b2lkIDA7dGhpcy5fbGlzdGVuZXJzPXZvaWQgMDt0aGlzLl9jc3NTZXQ9dm9pZCAwO3RoaXMuX3VzZXJBZ2VudD11c2VyQWdlbnQ7dGhpcy5fbGlzdGVuZXJzPVtdO3RoaXMuX2Nzc1NldD17fTt9X2NyZWF0ZUNsYXNzKFN0eWxlS2VlcGVyLFt7a2V5Olwic3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24gc3Vic2NyaWJlKGxpc3RlbmVyKXt2YXIgX3RoaXM9dGhpcztpZih0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik9PT0tMSl7dGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO31yZXR1cm57Ly8gTXVzdCBiZSBmYXQgYXJyb3cgdG8gY2FwdHVyZSBgdGhpc2BcbnJlbW92ZTpmdW5jdGlvbiByZW1vdmUoKXt2YXIgbGlzdGVuZXJJbmRleD1fdGhpcy5fbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO2lmKGxpc3RlbmVySW5kZXg+LTEpe190aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGxpc3RlbmVySW5kZXgsMSk7fX19O319LHtrZXk6XCJhZGRDU1NcIix2YWx1ZTpmdW5jdGlvbiBhZGRDU1MoY3NzKXt2YXIgX3RoaXMyPXRoaXM7aWYoIXRoaXMuX2Nzc1NldFtjc3NdKXt0aGlzLl9jc3NTZXRbY3NzXT10cnVlO3RoaXMuX2VtaXRDaGFuZ2UoKTt9cmV0dXJuey8vIE11c3QgYmUgZmF0IGFycm93IHRvIGNhcHR1cmUgYHRoaXNgXG5yZW1vdmU6ZnVuY3Rpb24gcmVtb3ZlKCl7ZGVsZXRlIF90aGlzMi5fY3NzU2V0W2Nzc107X3RoaXMyLl9lbWl0Q2hhbmdlKCk7fX07fX0se2tleTpcImdldENTU1wiLHZhbHVlOmZ1bmN0aW9uIGdldENTUygpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9jc3NTZXQpLmpvaW4oJ1xcbicpO319LHtrZXk6XCJfZW1pdENoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uIF9lbWl0Q2hhbmdlKCl7dGhpcy5fbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpe3JldHVybiBsaXN0ZW5lcigpO30pO319XSk7cmV0dXJuIFN0eWxlS2VlcGVyO30oKTtleHBvcnRzW1wiZGVmYXVsdFwiXT1TdHlsZUtlZXBlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9zdHlsZS1rZWVwZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMud2l0aFJhZGl1bUNvbnRleHRzPXdpdGhSYWRpdW1Db250ZXh0cztleHBvcnRzLlJhZGl1bUNvbmZpZ0NvbnRleHQ9ZXhwb3J0cy5TdHlsZUtlZXBlckNvbnRleHQ9dm9pZCAwO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0XCIpKTt2YXIgX2hvaXN0Tm9uUmVhY3RTdGF0aWNzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImhvaXN0LW5vbi1yZWFjdC1zdGF0aWNzXCIpKTt2YXIgX3N0eWxlS2VlcGVyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vc3R5bGUta2VlcGVyXCIpKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntcImRlZmF1bHRcIjpvYmp9O31mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmope2lmKG9iaiYmb2JqLl9fZXNNb2R1bGUpe3JldHVybiBvYmo7fWVsc2V7dmFyIG5ld09iaj17fTtpZihvYmohPW51bGwpe2Zvcih2YXIga2V5IGluIG9iail7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixrZXkpKXt2YXIgZGVzYz1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosa2V5KTp7fTtpZihkZXNjLmdldHx8ZGVzYy5zZXQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosa2V5LGRlc2MpO31lbHNle25ld09ialtrZXldPW9ialtrZXldO319fX1uZXdPYmpbXCJkZWZhdWx0XCJdPW9iajtyZXR1cm4gbmV3T2JqO319ZnVuY3Rpb24gX2V4dGVuZHMoKXtfZXh0ZW5kcz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldO2Zvcih2YXIga2V5IGluIHNvdXJjZSl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSxrZXkpKXt0YXJnZXRba2V5XT1zb3VyY2Vba2V5XTt9fX1yZXR1cm4gdGFyZ2V0O307cmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9dmFyIFN0eWxlS2VlcGVyQ29udGV4dD1fcmVhY3RbXCJkZWZhdWx0XCJdLmNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtleHBvcnRzLlN0eWxlS2VlcGVyQ29udGV4dD1TdHlsZUtlZXBlckNvbnRleHQ7dmFyIFJhZGl1bUNvbmZpZ0NvbnRleHQ9X3JlYWN0W1wiZGVmYXVsdFwiXS5jcmVhdGVDb250ZXh0KHVuZGVmaW5lZCk7ZXhwb3J0cy5SYWRpdW1Db25maWdDb250ZXh0PVJhZGl1bUNvbmZpZ0NvbnRleHQ7ZnVuY3Rpb24gd2l0aFJhZGl1bUNvbnRleHRzKFdyYXBwZWRDb21wb25lbnQpe3ZhciBXaXRoUmFkaXVtQ29udGV4dHM9X3JlYWN0W1wiZGVmYXVsdFwiXS5mb3J3YXJkUmVmKGZ1bmN0aW9uKHByb3BzLHJlZil7dmFyIHJhZGl1bUNvbmZpZ0NvbnRleHQ9KDAsX3JlYWN0LnVzZUNvbnRleHQpKFJhZGl1bUNvbmZpZ0NvbnRleHQpO3ZhciBzdHlsZUtlZXBlckNvbnRleHQ9KDAsX3JlYWN0LnVzZUNvbnRleHQpKFN0eWxlS2VlcGVyQ29udGV4dCk7cmV0dXJuIF9yZWFjdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChXcmFwcGVkQ29tcG9uZW50LF9leHRlbmRzKHtyZWY6cmVmfSxwcm9wcyx7cmFkaXVtQ29uZmlnQ29udGV4dDpyYWRpdW1Db25maWdDb250ZXh0LHN0eWxlS2VlcGVyQ29udGV4dDpzdHlsZUtlZXBlckNvbnRleHR9KSk7fSk7V2l0aFJhZGl1bUNvbnRleHRzLmRpc3BsYXlOYW1lPVwid2l0aFJhZGl1bUNvbnRleHRzKFwiLmNvbmNhdChXcmFwcGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lfHxXcmFwcGVkQ29tcG9uZW50Lm5hbWV8fCdDb21wb25lbnQnLFwiKVwiKTtyZXR1cm4oMCxfaG9pc3ROb25SZWFjdFN0YXRpY3NbXCJkZWZhdWx0XCJdKShXaXRoUmFkaXVtQ29udGV4dHMsV3JhcHBlZENvbXBvbmVudCk7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL2NvbnRleHQuanNcbi8vIG1vZHVsZSBpZCA9IDE2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjt2YXIgX3R5cGVvZjI9dHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCI/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iajt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iajt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09dm9pZCAwO3ZhciBfY3NzUnVsZVNldFRvU3RyaW5nPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2Nzcy1ydWxlLXNldC10by1zdHJpbmdcIikpO3ZhciBfcmVhY3Q9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0XCIpKTt2YXIgX3Byb3BUeXBlcz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJwcm9wLXR5cGVzXCIpKTt2YXIgX2NvbnRleHQ9cmVxdWlyZShcIi4uL2NvbnRleHRcIik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKXtpZihvYmomJm9iai5fX2VzTW9kdWxlKXtyZXR1cm4gb2JqO31lbHNle3ZhciBuZXdPYmo9e307aWYob2JqIT1udWxsKXtmb3IodmFyIGtleSBpbiBvYmope2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosa2V5KSl7dmFyIGRlc2M9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLGtleSk6e307aWYoZGVzYy5nZXR8fGRlc2Muc2V0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLGtleSxkZXNjKTt9ZWxzZXtuZXdPYmpba2V5XT1vYmpba2V5XTt9fX19bmV3T2JqW1wiZGVmYXVsdFwiXT1vYmo7cmV0dXJuIG5ld09iajt9fWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e1wiZGVmYXVsdFwiOm9ian07fWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtpZih0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpPT09XCJzeW1ib2xcIil7X3R5cGVvZj1mdW5jdGlvbiBfdHlwZW9mKG9iail7cmV0dXJuIHR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9O31lbHNle190eXBlb2Y9ZnVuY3Rpb24gX3R5cGVvZihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9O31yZXR1cm4gX3R5cGVvZihvYmopO31mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7fX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZihcInZhbHVlXCJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsY2FsbCl7aWYoY2FsbCYmKF90eXBlb2YoY2FsbCk9PT1cIm9iamVjdFwifHx0eXBlb2YgY2FsbD09PVwiZnVuY3Rpb25cIikpe3JldHVybiBjYWxsO31yZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTt9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKXtpZihzZWxmPT09dm9pZCAwKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7fXJldHVybiBzZWxmO31mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobyl7X2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pe3JldHVybiBvLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO307cmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTt9ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe2lmKHR5cGVvZiBzdXBlckNsYXNzIT09XCJmdW5jdGlvblwiJiZzdXBlckNsYXNzIT09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSk7aWYoc3VwZXJDbGFzcylfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk7fWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLHApe19zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLHApe28uX19wcm90b19fPXA7cmV0dXJuIG87fTtyZXR1cm4gX3NldFByb3RvdHlwZU9mKG8scCk7fXZhciBTdHlsZT0vKiNfX1BVUkVfXyovZnVuY3Rpb24oX1B1cmVDb21wb25lbnQpe19pbmhlcml0cyhTdHlsZSxfUHVyZUNvbXBvbmVudCk7ZnVuY3Rpb24gU3R5bGUoKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxTdHlsZSk7cmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKFN0eWxlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpO31fY3JlYXRlQ2xhc3MoU3R5bGUsW3trZXk6XCJfYnVpbGRTdHlsZXNcIix2YWx1ZTpmdW5jdGlvbiBfYnVpbGRTdHlsZXMoc3R5bGVzKXt2YXIgX3RoaXM9dGhpczt2YXIgdXNlckFnZW50PXRoaXMucHJvcHMucmFkaXVtQ29uZmlnJiZ0aGlzLnByb3BzLnJhZGl1bUNvbmZpZy51c2VyQWdlbnR8fHRoaXMucHJvcHMucmFkaXVtQ29uZmlnQ29udGV4dCYmdGhpcy5wcm9wcy5yYWRpdW1Db25maWdDb250ZXh0LnVzZXJBZ2VudDt2YXIgc2NvcGVTZWxlY3Rvcj10aGlzLnByb3BzLnNjb3BlU2VsZWN0b3I7dmFyIHJvb3RSdWxlcz1PYmplY3Qua2V5cyhzdHlsZXMpLnJlZHVjZShmdW5jdGlvbihhY2N1bXVsYXRvcixzZWxlY3Rvcil7aWYoX3R5cGVvZihzdHlsZXNbc2VsZWN0b3JdKSE9PSdvYmplY3QnKXthY2N1bXVsYXRvcltzZWxlY3Rvcl09c3R5bGVzW3NlbGVjdG9yXTt9cmV0dXJuIGFjY3VtdWxhdG9yO30se30pO3ZhciByb290U3R5bGVzPU9iamVjdC5rZXlzKHJvb3RSdWxlcykubGVuZ3RoPygwLF9jc3NSdWxlU2V0VG9TdHJpbmdbXCJkZWZhdWx0XCJdKShzY29wZVNlbGVjdG9yfHwnJyxyb290UnVsZXMsdXNlckFnZW50KTonJztyZXR1cm4gcm9vdFN0eWxlcytPYmplY3Qua2V5cyhzdHlsZXMpLnJlZHVjZShmdW5jdGlvbihhY2N1bXVsYXRvcixzZWxlY3Rvcil7dmFyIHJ1bGVzPXN0eWxlc1tzZWxlY3Rvcl07aWYoc2VsZWN0b3I9PT0nbWVkaWFRdWVyaWVzJyl7YWNjdW11bGF0b3IrPV90aGlzLl9idWlsZE1lZGlhUXVlcnlTdHJpbmcocnVsZXMpO31lbHNlIGlmKF90eXBlb2Yoc3R5bGVzW3NlbGVjdG9yXSk9PT0nb2JqZWN0Jyl7dmFyIGNvbXBsZXRlU2VsZWN0b3I9c2NvcGVTZWxlY3Rvcj9zZWxlY3Rvci5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihwYXJ0KXtyZXR1cm4gc2NvcGVTZWxlY3RvcisnICcrcGFydC50cmltKCk7fSkuam9pbignLCcpOnNlbGVjdG9yO2FjY3VtdWxhdG9yKz0oMCxfY3NzUnVsZVNldFRvU3RyaW5nW1wiZGVmYXVsdFwiXSkoY29tcGxldGVTZWxlY3RvcixydWxlcyx1c2VyQWdlbnQpO31yZXR1cm4gYWNjdW11bGF0b3I7fSwnJyk7fX0se2tleTpcIl9idWlsZE1lZGlhUXVlcnlTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbiBfYnVpbGRNZWRpYVF1ZXJ5U3RyaW5nKHN0eWxlc0J5TWVkaWFRdWVyeSl7dmFyIF90aGlzMj10aGlzO3ZhciBtZWRpYVF1ZXJ5U3RyaW5nPScnO09iamVjdC5rZXlzKHN0eWxlc0J5TWVkaWFRdWVyeSkuZm9yRWFjaChmdW5jdGlvbihxdWVyeSl7bWVkaWFRdWVyeVN0cmluZys9J0BtZWRpYSAnK3F1ZXJ5Kyd7JytfdGhpczIuX2J1aWxkU3R5bGVzKHN0eWxlc0J5TWVkaWFRdWVyeVtxdWVyeV0pKyd9Jzt9KTtyZXR1cm4gbWVkaWFRdWVyeVN0cmluZzt9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyKCl7aWYoIXRoaXMucHJvcHMucnVsZXMpe3JldHVybiBudWxsO312YXIgc3R5bGVzPXRoaXMuX2J1aWxkU3R5bGVzKHRoaXMucHJvcHMucnVsZXMpO3JldHVybiBfcmVhY3RbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiLHtkYW5nZXJvdXNseVNldElubmVySFRNTDp7X19odG1sOnN0eWxlc319KTt9fV0pO3JldHVybiBTdHlsZTt9KF9yZWFjdC5QdXJlQ29tcG9uZW50KTtTdHlsZS5wcm9wVHlwZXM9e3JhZGl1bUNvbmZpZzpfcHJvcFR5cGVzW1wiZGVmYXVsdFwiXS5vYmplY3QscnVsZXM6X3Byb3BUeXBlc1tcImRlZmF1bHRcIl0ub2JqZWN0LHNjb3BlU2VsZWN0b3I6X3Byb3BUeXBlc1tcImRlZmF1bHRcIl0uc3RyaW5nfTtTdHlsZS5kZWZhdWx0UHJvcHM9e3Njb3BlU2VsZWN0b3I6Jyd9O3ZhciBfZGVmYXVsdD0oMCxfY29udGV4dC53aXRoUmFkaXVtQ29udGV4dHMpKFN0eWxlKTtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9jb21wb25lbnRzL3N0eWxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpO3ZhciBfZW5oYW5jZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vZW5oYW5jZXJcIikpO3ZhciBfc3R5bGVLZWVwZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vc3R5bGUta2VlcGVyXCIpKTt2YXIgX3N0eWxlU2hlZXQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdHlsZS1zaGVldFwiKSk7dmFyIF9jb250ZXh0PXJlcXVpcmUoXCIuLi9jb250ZXh0XCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e1wiZGVmYXVsdFwiOm9ian07fWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iail7aWYob2JqJiZvYmouX19lc01vZHVsZSl7cmV0dXJuIG9iajt9ZWxzZXt2YXIgbmV3T2JqPXt9O2lmKG9iaiE9bnVsbCl7Zm9yKHZhciBrZXkgaW4gb2JqKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSkpe3ZhciBkZXNjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaixrZXkpOnt9O2lmKGRlc2MuZ2V0fHxkZXNjLnNldCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaixrZXksZGVzYyk7fWVsc2V7bmV3T2JqW2tleV09b2JqW2tleV07fX19fW5ld09ialtcImRlZmF1bHRcIl09b2JqO3JldHVybiBuZXdPYmo7fX1mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLGV4Y2x1ZGVkKXtpZihzb3VyY2U9PW51bGwpcmV0dXJue307dmFyIHRhcmdldD1fb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsZXhjbHVkZWQpO3ZhciBrZXksaTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgc291cmNlU3ltYm9sS2V5cz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7Zm9yKGk9MDtpPHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoO2krKyl7a2V5PXNvdXJjZVN5bWJvbEtleXNbaV07aWYoZXhjbHVkZWQuaW5kZXhPZihrZXkpPj0wKWNvbnRpbnVlO2lmKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLGtleSkpY29udGludWU7dGFyZ2V0W2tleV09c291cmNlW2tleV07fX1yZXR1cm4gdGFyZ2V0O31mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsZXhjbHVkZWQpe2lmKHNvdXJjZT09bnVsbClyZXR1cm57fTt2YXIgdGFyZ2V0PXt9O3ZhciBzb3VyY2VLZXlzPU9iamVjdC5rZXlzKHNvdXJjZSk7dmFyIGtleSxpO2ZvcihpPTA7aTxzb3VyY2VLZXlzLmxlbmd0aDtpKyspe2tleT1zb3VyY2VLZXlzW2ldO2lmKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KT49MCljb250aW51ZTt0YXJnZXRba2V5XT1zb3VyY2Vba2V5XTt9cmV0dXJuIHRhcmdldDt9ZnVuY3Rpb24gZ2V0U3R5bGVLZWVwZXIoY29uZmlnUHJvcCxjb25maWdDb250ZXh0KXt2YXIgdXNlckFnZW50PWNvbmZpZ1Byb3AmJmNvbmZpZ1Byb3AudXNlckFnZW50fHxjb25maWdDb250ZXh0JiZjb25maWdDb250ZXh0LnVzZXJBZ2VudDtyZXR1cm4gbmV3IF9zdHlsZUtlZXBlcltcImRlZmF1bHRcIl0odXNlckFnZW50KTt9dmFyIFN0eWxlUm9vdElubmVyPSgwLF9lbmhhbmNlcltcImRlZmF1bHRcIl0pKGZ1bmN0aW9uKF9yZWYpe3ZhciBjaGlsZHJlbj1fcmVmLmNoaWxkcmVuLG90aGVyUHJvcHM9X29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsW1wiY2hpbGRyZW5cIl0pO3JldHVybiBfcmVhY3RbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixvdGhlclByb3BzLGNoaWxkcmVuLF9yZWFjdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfc3R5bGVTaGVldFtcImRlZmF1bHRcIl0sbnVsbCkpO30pO3ZhciBTdHlsZVJvb3Q9ZnVuY3Rpb24gU3R5bGVSb290KHByb3BzKXsvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqLy8vIFBhc3MgZG93biBhbGwgcHJvcHMgZXhjZXB0IGNvbmZpZyB0byB0aGUgcmVuZGVyZWQgZGl2LlxuLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqL3ZhciByYWRpdW1Db25maWc9cHJvcHMucmFkaXVtQ29uZmlnO3ZhciBjb25maWdDb250ZXh0PSgwLF9yZWFjdC51c2VDb250ZXh0KShfY29udGV4dC5SYWRpdW1Db25maWdDb250ZXh0KTt2YXIgc3R5bGVLZWVwZXI9KDAsX3JlYWN0LnVzZVJlZikoZ2V0U3R5bGVLZWVwZXIocmFkaXVtQ29uZmlnLGNvbmZpZ0NvbnRleHQpKTtyZXR1cm4gX3JlYWN0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9jb250ZXh0LlN0eWxlS2VlcGVyQ29udGV4dC5Qcm92aWRlcix7dmFsdWU6c3R5bGVLZWVwZXIuY3VycmVudH0sX3JlYWN0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFN0eWxlUm9vdElubmVyLHByb3BzKSk7fTt2YXIgX2RlZmF1bHQ9U3R5bGVSb290O2V4cG9ydHNbXCJkZWZhdWx0XCJdPV9kZWZhdWx0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL2NvbXBvbmVudHMvc3R5bGUtcm9vdC5qc1xuLy8gbW9kdWxlIGlkID0gMTYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIlwidXNlIHN0cmljdFwiO3ZhciBfdHlwZW9mMj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT12b2lkIDA7dmFyIF9yZWFjdD1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpO3ZhciBfc3R5bGVLZWVwZXI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vc3R5bGUta2VlcGVyXCIpKTt2YXIgX2NvbnRleHQ9cmVxdWlyZShcIi4uL2NvbnRleHRcIik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7XCJkZWZhdWx0XCI6b2JqfTt9ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKXtpZihvYmomJm9iai5fX2VzTW9kdWxlKXtyZXR1cm4gb2JqO31lbHNle3ZhciBuZXdPYmo9e307aWYob2JqIT1udWxsKXtmb3IodmFyIGtleSBpbiBvYmope2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosa2V5KSl7dmFyIGRlc2M9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLGtleSk6e307aWYoZGVzYy5nZXR8fGRlc2Muc2V0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLGtleSxkZXNjKTt9ZWxzZXtuZXdPYmpba2V5XT1vYmpba2V5XTt9fX19bmV3T2JqW1wiZGVmYXVsdFwiXT1vYmo7cmV0dXJuIG5ld09iajt9fWZ1bmN0aW9uIF90eXBlb2Yob2JqKXtpZih0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpPT09XCJzeW1ib2xcIil7X3R5cGVvZj1mdW5jdGlvbiBfdHlwZW9mKG9iail7cmV0dXJuIHR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9O31lbHNle190eXBlb2Y9ZnVuY3Rpb24gX3R5cGVvZihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9O31yZXR1cm4gX3R5cGVvZihvYmopO31mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7fX1mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZihcInZhbHVlXCJpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319ZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsY2FsbCl7aWYoY2FsbCYmKF90eXBlb2YoY2FsbCk9PT1cIm9iamVjdFwifHx0eXBlb2YgY2FsbD09PVwiZnVuY3Rpb25cIikpe3JldHVybiBjYWxsO31yZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTt9ZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKXtpZihzZWxmPT09dm9pZCAwKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7fXJldHVybiBzZWxmO31mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobyl7X2dldFByb3RvdHlwZU9mPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pe3JldHVybiBvLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO307cmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTt9ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe2lmKHR5cGVvZiBzdXBlckNsYXNzIT09XCJmdW5jdGlvblwiJiZzdXBlckNsYXNzIT09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSk7aWYoc3VwZXJDbGFzcylfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk7fWZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLHApe19zZXRQcm90b3R5cGVPZj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLHApe28uX19wcm90b19fPXA7cmV0dXJuIG87fTtyZXR1cm4gX3NldFByb3RvdHlwZU9mKG8scCk7fXZhciBTdHlsZVNoZWV0PS8qI19fUFVSRV9fKi9mdW5jdGlvbihfQ29tcG9uZW50KXtfaW5oZXJpdHMoU3R5bGVTaGVldCxfQ29tcG9uZW50KTsvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvc29ydC1jb21wXG5mdW5jdGlvbiBTdHlsZVNoZWV0KCl7dmFyIF90aGlzO19jbGFzc0NhbGxDaGVjayh0aGlzLFN0eWxlU2hlZXQpO190aGlzPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsX2dldFByb3RvdHlwZU9mKFN0eWxlU2hlZXQpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSk7X3RoaXMuc3R5bGVLZWVwZXI9dm9pZCAwO190aGlzLl9zdWJzY3JpcHRpb249dm9pZCAwO190aGlzLl9yb290PXZvaWQgMDtfdGhpcy5fY3NzPXZvaWQgMDtfdGhpcy5fb25DaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgbmV4dENTUz1fdGhpcy5zdHlsZUtlZXBlci5nZXRDU1MoKTtpZihuZXh0Q1NTIT09X3RoaXMuX2Nzcyl7aWYoX3RoaXMuX3Jvb3Qpe190aGlzLl9yb290LmlubmVySFRNTD1uZXh0Q1NTO31lbHNle3Rocm93IG5ldyBFcnJvcignTm8gcm9vdCBzdHlsZSBvYmplY3QgZm91bmQsIGV2ZW4gYWZ0ZXIgU3R5bGVTaGVldCBtb3VudC4nKTt9X3RoaXMuX2Nzcz1uZXh0Q1NTO319O2lmKCFfdGhpcy5wcm9wcy5zdHlsZUtlZXBlckNvbnRleHQpe3Rocm93IG5ldyBFcnJvcignU3R5bGVSb290IGlzIHJlcXVpcmVkIHRvIHVzZSBTdHlsZVNoZWV0Jyk7fV90aGlzLnN0eWxlS2VlcGVyPV90aGlzLnByb3BzLnN0eWxlS2VlcGVyQ29udGV4dDtfdGhpcy5fY3NzPV90aGlzLnN0eWxlS2VlcGVyLmdldENTUygpO3JldHVybiBfdGhpczt9X2NyZWF0ZUNsYXNzKFN0eWxlU2hlZXQsW3trZXk6XCJjb21wb25lbnREaWRNb3VudFwiLHZhbHVlOmZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCl7dGhpcy5fc3Vic2NyaXB0aW9uPXRoaXMuc3R5bGVLZWVwZXIuc3Vic2NyaWJlKHRoaXMuX29uQ2hhbmdlKTt0aGlzLl9vbkNoYW5nZSgpO319LHtrZXk6XCJzaG91bGRDb21wb25lbnRVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUoKXtyZXR1cm4gZmFsc2U7fX0se2tleTpcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsdmFsdWU6ZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKXtpZih0aGlzLl9zdWJzY3JpcHRpb24pe3RoaXMuX3N1YnNjcmlwdGlvbi5yZW1vdmUoKTt9fX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uIHJlbmRlcigpe3ZhciBfdGhpczI9dGhpcztyZXR1cm4gX3JlYWN0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic3R5bGVcIix7ZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6e19faHRtbDp0aGlzLl9jc3N9LHJlZjpmdW5jdGlvbiByZWYoYyl7X3RoaXMyLl9yb290PWM7fX0pO319XSk7cmV0dXJuIFN0eWxlU2hlZXQ7fShfcmVhY3QuQ29tcG9uZW50KTt2YXIgX2RlZmF1bHQ9KDAsX2NvbnRleHQud2l0aFJhZGl1bUNvbnRleHRzKShTdHlsZVNoZWV0KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1fZGVmYXVsdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmFkaXVtL2xpYi9jb21wb25lbnRzL3N0eWxlLXNoZWV0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1rZXlmcmFtZXM7dmFyIF9jc3NSdWxlU2V0VG9TdHJpbmc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jc3MtcnVsZS1zZXQtdG8tc3RyaW5nXCIpKTt2YXIgX2hhc2g9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9oYXNoXCIpKTt2YXIgX3ByZWZpeGVyPXJlcXVpcmUoXCIuL3ByZWZpeGVyXCIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e1wiZGVmYXVsdFwiOm9ian07fWZ1bmN0aW9uIGtleWZyYW1lcyhrZXlmcmFtZVJ1bGVzLG5hbWUpe3JldHVybntfX3JhZGl1bUtleWZyYW1lczp0cnVlLF9fcHJvY2VzczpmdW5jdGlvbiBfX3Byb2Nlc3ModXNlckFnZW50KXt2YXIga2V5ZnJhbWVzUHJlZml4ZWQ9KDAsX3ByZWZpeGVyLmdldFByZWZpeGVkS2V5ZnJhbWVzKSh1c2VyQWdlbnQpO3ZhciBydWxlcz1PYmplY3Qua2V5cyhrZXlmcmFtZVJ1bGVzKS5tYXAoZnVuY3Rpb24ocGVyY2VudGFnZSl7cmV0dXJuKDAsX2Nzc1J1bGVTZXRUb1N0cmluZ1tcImRlZmF1bHRcIl0pKHBlcmNlbnRhZ2Usa2V5ZnJhbWVSdWxlc1twZXJjZW50YWdlXSx1c2VyQWdlbnQpO30pLmpvaW4oJ1xcbicpO3ZhciBhbmltYXRpb25OYW1lPShuYW1lP25hbWUrJy0nOicnKSsncmFkaXVtLWFuaW1hdGlvbi0nKygwLF9oYXNoW1wiZGVmYXVsdFwiXSkocnVsZXMpO3ZhciBjc3M9J0AnK2tleWZyYW1lc1ByZWZpeGVkKycgJythbmltYXRpb25OYW1lKycge1xcbicrcnVsZXMrJ1xcbn1cXG4nO3JldHVybntjc3M6Y3NzLGFuaW1hdGlvbk5hbWU6YW5pbWF0aW9uTmFtZX07fX07fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yYWRpdW0vbGliL2tleWZyYW1lcy5qc1xuLy8gbW9kdWxlIGlkID0gMTY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17d3JhcHBlcjp7bWFyZ2luOic1cHgnLGRpc3BsYXk6J2ZsZXgnLHdpZHRoOic5NSUnfSxoaWRlOntkaXNwbGF5Oidub25lJ30sc2VsZWN0Ont3aWR0aDonNzAlJyxtYXJnaW46JzVweCcsYm9yZGVyUmFkaXVzOic1cHgnLCc6Zm9jdXMnOntiYWNrZ3JvdW5kQ29sb3I6J2xpZ2h0cGluayd9fSxyZWFkT25seTp7YmFja2dyb3VuZENvbG9yOicjRjNFRkVGJ30sbGFiZWw6e3dpZHRoOiczMCUnLG1hcmdpbjonNXB4J30sYnV0dG9uOnt3aWR0aDonNSUnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3NlbGVjdC1yZWt2L3NlbGVjdC1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnYWNjb3VudCc7XG5cbnZhciBCdXR0b25BY2NvdW50ID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvbkFjY291bnQsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b25BY2NvdW50KHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdXR0b25BY2NvdW50KTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uQWNjb3VudC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvbkFjY291bnQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMudmFsdWVcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uQWNjb3VudCwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCdhY2NvdW50Jyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZTtcbiAgICAgICAgICAgIHZhciBidXR0b25TdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5idXR0b24sIHN0eWxlcy5idXR0b25BY2NvdW50KTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIEJ1dHRvbixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBidXR0b25TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5zaG93LFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW0lDT05dIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMudmFsdWUgIT09IHByZXZTdGF0ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBuZXh0UHJvcHMudmFsdWUgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCdXR0b25BY2NvdW50O1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uQWNjb3VudC5wcm9wVHlwZXMgPSB7XG4gICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxuQnV0dG9uQWNjb3VudC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWUsXG4gICAgdmFsdWU6ICcnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvbkFjY291bnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tYWNjb3VudC9idXR0b24tYWNjb3VudC5qc3hcbi8vIG1vZHVsZSBpZCA9IDE2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2NvbnRhaW5lcjp7bWFyZ2luOicxMHB4IDAnfSxzZWxlY3RTdHlsZTp7bWFyZ2luOic1cHgnLGRpc3BsYXk6J2ZsZXgnLHdpZHRoOic5NSUnfSxwYWdlTmFtZTp7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6J3gtbGFyZ2UnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL21lbnUtdG9vbGJhci9tZW51LXRvb2xiYXIuc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgRG9jdW1lbnRUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vLi4vLi4vZG9jdW1lbnRUZW1wbGF0ZS9pbmRleC5qc3gnKSxcbiAgICBJbnB1dFRleHQgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LXRleHQvaW5wdXQtdGV4dC5qc3gnKSxcbiAgICBJbnB1dERhdGUgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LWRhdGUvaW5wdXQtZGF0ZS5qc3gnKSxcbiAgICBJbnB1dE51bWJlciA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci5qc3gnKSxcbiAgICBTZWxlY3QgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3NlbGVjdC9zZWxlY3QuanN4JyksXG4gICAgVGV4dEFyZWEgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3RleHQtYXJlYS90ZXh0LWFyZWEuanN4JyksXG4gICAgRGF0YUdyaWQgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2RhdGEtZ3JpZC9kYXRhLWdyaWQuanN4JyksXG4gICAgcmVsYXRlZERvY3VtZW50cyA9IHJlcXVpcmUoJy4uLy4uLy4uL21peGluL3JlbGF0ZWREb2N1bWVudHMuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9qb3VybmFsLXN0eWxlcy5qcycpO1xuXG52YXIgTElCUkFSSUVTID0gWydhc3V0dXNlZCcsICdrb250b2QnLCAndHVubnVzJywgJ3Byb2plY3QnXTtcblxudmFyIEpvdXJuYWwgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoSm91cm5hbCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gSm91cm5hbChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSm91cm5hbCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEpvdXJuYWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihKb3VybmFsKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZG9jSWQ6IHByb3BzLmRvY0lkID8gcHJvcHMuZG9jSWQgOiBOdW1iZXIocHJvcHMubWF0Y2gucGFyYW1zLmRvY0lkKSxcbiAgICAgICAgICAgIGxvYWRlZERhdGE6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMucGFnZXMgPSBbeyBwYWdlTmFtZTogJ0pvdXJuYWwnIH1dO1xuICAgICAgICBfdGhpcy5jcmVhdGVHcmlkUm93ID0gX3RoaXMuY3JlYXRlR3JpZFJvdy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVjYWxjRG9jU3VtbWEgPSBfdGhpcy5yZWNhbGNEb2NTdW1tYS5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5yZW5kZXJlciA9IF90aGlzLnJlbmRlcmVyLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5ncmlkVmFsaWRhdGVGaWVsZHMgPSBfdGhpcy5ncmlkVmFsaWRhdGVGaWVsZHMuYmluZChfdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhKb3VybmFsLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGluaXREYXRhID0gdGhpcy5wcm9wcy5pbml0RGF0YSA/IHRoaXMucHJvcHMuaW5pdERhdGEgOiB7fTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50VGVtcGxhdGUsIHsgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgcmVmOiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSA/IHRoaXMucHJvcHMuaGlzdG9yeSA6IG51bGwsXG4gICAgICAgICAgICAgICAgZG9jVHlwZUlkOiAnSk9VUk5BTCcsXG4gICAgICAgICAgICAgICAgaW5pdERhdGE6IGluaXREYXRhLFxuICAgICAgICAgICAgICAgIGxpYnM6IExJQlJBUklFUyxcbiAgICAgICAgICAgICAgICBwYWdlczogdGhpcy5wYWdlcyxcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcbiAgICAgICAgICAgICAgICBjcmVhdGVHcmlkUm93OiB0aGlzLmNyZWF0ZUdyaWRSb3csXG4gICAgICAgICAgICAgICAgZ3JpZFZhbGlkYXRvcjogdGhpcy5ncmlkVmFsaWRhdGVGaWVsZHMsXG4gICAgICAgICAgICAgICAgcmVjYWxjRG9jOiB0aGlzLnJlY2FsY0RvY1N1bW1hLFxuICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudDogJ2lucHV0LW51bWJlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICB2YXIgYnBtID0gc2VsZi5kb2NEYXRhICYmIHNlbGYuZG9jRGF0YS5icG0gPyBzZWxmLmRvY0RhdGEuYnBtIDogW10sXG4gICAgICAgICAgICAgICAgaXNFZGl0ZU1vZGUgPSBzZWxmLnN0YXRlLmVkaXRlZCxcbiAgICAgICAgICAgICAgICBncmlkRGF0YSA9IHNlbGYuZG9jRGF0YS5ncmlkRGF0YSxcbiAgICAgICAgICAgICAgICBncmlkQ29sdW1ucyA9IHNlbGYuZG9jRGF0YS5ncmlkQ29uZmlnO1xuXG4gICAgICAgICAgICB2YXIgZ3JpZFJvd1ZhbGlkYXRvciA9IHRoaXMuZ3JpZFZhbGlkYXRlRmllbGRzKCk7XG5cbiAgICAgICAgICAgIC8vINGE0L7RgNC80LjRgNGD0LXQvCDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4XG4gICAgICAgICAgICBpZiAoc2VsZi5kb2NEYXRhLnJlbGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHJlbGF0ZWREb2N1bWVudHMoc2VsZik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J107XG4gICAgICAgICAgICB2YXIgbGlicyA9IGRvYyA/IGRvYy5saWJzIDoge307XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcoc2VsZi5kb2NEYXRhLm51bWJlcikgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXREYXRlLCB7IHRpdGxlOiAnS3V1cFxceEU0ZXYgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmtwdixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1rcHYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1BhcnRuZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhc3V0dXNpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ2FzdXR1c2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2FzdXR1c2VkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5hc3V0dXNpZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzZWxmLmRvY0RhdGEuYXN1dHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1hc3V0dXNpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEb2t1bWVudCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkb2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuZG9rIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWRvaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRBcmVhLCB7IHRpdGxlOiAnU2VsZ2l0dXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzZWxnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1zZWxnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLnNlbGcgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5ncmlkQ29udGFpbmVyIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEYXRhR3JpZCwgeyBzb3VyY2U6ICdkZXRhaWxzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZERhdGE6IGdyaWREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29sdW1uczogZ3JpZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUdyaWRSb3c6IHRoaXMuaGFuZGxlR3JpZFJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IGlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcmlkQnRuQ2xpY2s6IHNlbGYuaGFuZGxlR3JpZEJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmdyaWQuaGVhZGVyVGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2RhdGEtZ3JpZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU3VtbWE6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1zdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihzZWxmLmRvY0RhdGEuc3VtbWEgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHN0eWxlcy5zdW1tYS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiAnXlswLTldKyhcXFxcLlswLTldezEsNH0pPyQnIH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdNXFx4RTRya3VzZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtdXVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1tdXVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm11dWQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXRlLmdyaWRSb3dFZGl0ID8gdGhpcy5jcmVhdGVHcmlkUm93KHNlbGYpIDogbnVsbFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQodC+0LfQtNCw0YHRgiDQuCDQstC10YDQvdC10YIg0LrQvtC80L/QvtC90LXQvdGCINGB0YDQvtC60Lgg0LPRgNC40LTQsFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtYTUx9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZUdyaWRSb3cnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlR3JpZFJvdyhzZWxmKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gc2VsZi5ncmlkUm93RGF0YSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZU1lc3NhZ2UgPSAnJyxcbiAgICAgICAgICAgICAgICAvLyBzZWxmLnN0YXRlLndhcm5pbmdcbiAgICAgICAgICAgIGJ1dHRvbk9rUmVhZE9ubHkgPSB2YWxpZGF0ZU1lc3NhZ2UubGVuZ3RoID4gMCB8fCAhc2VsZi5zdGF0ZS5jaGVja2VkLFxuICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0cyA9IFsnYnRuT2snLCAnYnRuQ2FuY2VsJ107XG5cbiAgICAgICAgICAgIGlmIChidXR0b25Pa1JlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgLy8g0YPQsdC10YDQtdC8INC60L3QvtC/0LrRgyDQntC6XG4gICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzLnNwbGljZSgwLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFyb3cpIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsKTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICcubW9kYWxQYWdlJyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBtb2RhbE9iamVjdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtZ3JpZC1yb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiBzZWxmLm1vZGFsUGFnZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlTmFtZTogJ1JlYSBsaXNhbWluZSAvIHBhcmFuZGFtaW5lJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2dyaWQtcm93LWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhdGUuZ3JpZFdhcm5pbmcubGVuZ3RoID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXRlLmdyaWRXYXJuaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0RlZWJldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkZWViZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAna29udG9kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydrb250b2QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LmRlZWJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZGVlYmV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0tyZWVkaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna3JlZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sna29udG9kJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5rcmVlZGl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdrcmVlZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnU3VtbWE6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIocm93LnN1bW1hKSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc3VtbWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93SW5wdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1R1bm51cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0dW5udXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWyd0dW5udXMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LnR1bm51cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUdW5udXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnUHJvamVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwcm9qJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ3Byb2plY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ3Byb2plY3QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LnByb2osXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3Byb2onLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1Byb2pla3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQstCw0LvQuNC00LDRgtC+0YAg0LTQu9GPINGB0YLRgNC+0LrQuCDQs9GA0LjQtNCwXHJcbiAgICAgICAgICogQHBhcmFtIGdyaWRSb3dEYXRhINGB0YLRgNC+0LrQsCDQs9GA0LjQtNCwXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ3JpZFZhbGlkYXRlRmllbGRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdyaWRWYWxpZGF0ZUZpZWxkcygpIHtcbiAgICAgICAgICAgIHZhciB3YXJuaW5nID0gJyc7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5yZWZzWydkb2N1bWVudCddO1xuICAgICAgICAgICAgaWYgKGRvYyAmJiBkb2MuZ3JpZFJvd0RhdGEpIHtcblxuICAgICAgICAgICAgICAgIC8vINGC0L7Qu9GM0LrQviDQv9C+0YHQu9C1INC/0YDQvtCy0LXRgNC60Lgg0YTQvtGA0LzRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXG4gICAgICAgICAgICAgICAgaWYgKGRvYy5ncmlkUm93RGF0YSAmJiAhZG9jLmdyaWRSb3dEYXRhWydkZWViZXQnXSkgd2FybmluZyA9IHdhcm5pbmcgKyAnINCU0LXQsdC10YInO1xuICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydrcmVlZGl0J10pIHdhcm5pbmcgPSB3YXJuaW5nICsgJyDQmtGA0LXQtNC40YInO1xuICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydzdW1tYSddKSB3YXJuaW5nID0gd2FybmluZyArICcg0KHRg9C80LzQsCc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY0RvY1N1bW1hKCdzdW1tYScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdhcm5pbmc7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQn9C10YDQtdGA0LDRgdGH0LXRgiDQuNGC0L7Qs9C+0LLRi9GFINGB0YPQvNC8XHJcbiAgICAgICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2FsY0RvY1N1bW1hJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlY2FsY0RvY1N1bW1hKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgZG9jRGF0YSA9IHRoaXMucmVmc1snZG9jdW1lbnQnXS5kb2NEYXRhO1xuXG4gICAgICAgICAgICBkb2NEYXRhW2ZpZWxkXSA9IDA7XG5cbiAgICAgICAgICAgIGlmIChkb2NEYXRhLmdyaWREYXRhICYmIGRvY0RhdGEuZ3JpZERhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZG9jRGF0YS5ncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jRGF0YVtmaWVsZF0gKz0gTnVtYmVyKHJvd1tmaWVsZF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEpvdXJuYWw7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5Kb3VybmFsLnByb3BUeXBlcyA9IHtcbiAgICBkb2NJZDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBpbml0RGF0YTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB1c2VyRGF0YTogUHJvcFR5cGVzLm9iamVjdFxufTtcblxuSm91cm5hbC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgaW5pdERhdGE6IHt9LFxuICAgIHVzZXJEYXRhOiB7fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBKb3VybmFsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9qb3VybmFsL2RvY3VtZW50L2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMTY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIF9mZXRjaERhdGEgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2xpYnMvZmV0Y2hEYXRhJyk7XG52YXIgRG9jQ29udGV4dCA9IHJlcXVpcmUoJy4vLi4vLi4vZG9jLWNvbnRleHQuanMnKTtcbnZhciBNZW51ID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL21lbnUtdG9vbGJhci9tZW51LXRvb2xiYXIuanN4Jyk7XG52YXIgRG9jUmlnaHRzID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb25maWcvZG9jX3JpZ2h0cycpO1xudmFyIGNoZWNrUmlnaHRzID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2NoZWNrUmlnaHRzJyk7XG52YXIgTElCU19VUkwgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2NvbmZpZy9jb25zdGFudHMnKS5MSUJTLlBPU1RfTE9BRF9MSUJTX1VSTDtcbnZhciBVUkwgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2NvbmZpZy9jb25zdGFudHMnKS5ET0NTLlBPU1RfTE9BRF9ET0NTX1VSTDtcblxudmFyIEZvcm0gPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL2Zvcm0vZm9ybS5qc3gnKSxcbiAgICBUb29sYmFyQ29udGFpbmVyID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL3Rvb2xiYXItY29udGFpbmVyL3Rvb2xiYXItY29udGFpbmVyLmpzeCcpLFxuICAgIERvY1Rvb2xCYXIgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvZG9jLXRvb2xiYXIvZG9jLXRvb2xiYXIuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4JyksXG4gICAgTW9kYWxSZXBvcnQgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1yZXBvcnQvaW5kZXguanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9kb2N1bWVudC1zdHlsZXMnKTtcblxuLyoqXHJcbiAqINCa0LvQsNGB0YEg0YDQtdCw0LvQuNC30YPQtdGCINCx0LDQt9C+0LLRi9C5INC00L7QutGD0LzQtdC90YIgLlxyXG4gKi9cblxudmFyIERvY3VtZW50VGVtcGxhdGUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhEb2N1bWVudFRlbXBsYXRlLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIERvY3VtZW50VGVtcGxhdGUocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvY3VtZW50VGVtcGxhdGUpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEb2N1bWVudFRlbXBsYXRlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRG9jdW1lbnRUZW1wbGF0ZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5saWJzID0ge307XG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZG9jSWQ6IF90aGlzLnByb3BzLmRvY0lkLCAvL9C10YHQu9C4IElkINC00L7QutGD0LzQtdC90YLQsCDQvdC1INC/0LXRgNC10LTQsNC9LCDRgtC+INGB0L7Qt9C00LDQtdC8INC90L7QstGL0Lkg0LTQvtC6XG4gICAgICAgICAgICBlZGl0ZWQ6IF90aGlzLnByb3BzLmRvY0lkID09PSAwLFxuICAgICAgICAgICAgcmVsb2FkRGF0YTogIU9iamVjdC5rZXlzKHByb3BzLmluaXREYXRhKS5sZW5ndGgsXG4gICAgICAgICAgICBncmlkUm93RWRpdDogZmFsc2UsXG4gICAgICAgICAgICBncmlkUm93RXZlbnQ6IG51bGwsXG4gICAgICAgICAgICB3YXJuaW5nOiAnJyxcbiAgICAgICAgICAgIHdhcm5pbmdTdHlsZTogJycsXG4gICAgICAgICAgICBncmlkV2FybmluZzogJycsXG4gICAgICAgICAgICBjaGVja2VkOiB0cnVlLFxuICAgICAgICAgICAgbG9hZGVkTGliczogZmFsc2UsXG4gICAgICAgICAgICBsaWJQYXJhbXM6IHt9LFxuICAgICAgICAgICAgbG9nczogW10sXG4gICAgICAgICAgICBpc0Rpc2FibGVTYXZlOiBwcm9wcy5pc0Rpc2FibGVTYXZlLFxuICAgICAgICAgICAgZG9jRGF0YToge30sXG4gICAgICAgICAgICBpc1JlcG9ydDogZmFsc2UsXG4gICAgICAgICAgICB0eHRSZXBvcnQ6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMuZG9jRGF0YSA9IE9iamVjdC5rZXlzKHByb3BzLmluaXREYXRhKS5sZW5ndGggPyBwcm9wcy5pbml0RGF0YSA6IHsgaWQ6IHByb3BzLmRvY0lkIH07XG4gICAgICAgIF90aGlzLmJhY2t1cCA9IHt9O1xuICAgICAgICBfdGhpcy5yZXF1aXJlZEZpZWxkcyA9IFtdO1xuICAgICAgICBfdGhpcy5zZXJ2ZXJWYWxpZGF0aW9uID0gW107XG4gICAgICAgIF90aGlzLmJwbSA9IFtdO1xuICAgICAgICBfdGhpcy5wYWdlcyA9IHByb3BzLnBhZ2VzO1xuICAgICAgICBfdGhpcy5sb2FkaW5nTGlicyA9IHt9O1xuXG4gICAgICAgIF90aGlzLl9iaW5kKCdidG5BZGRDbGljaycsICdidG5FZGl0Q2xpY2snLCAnYnRuTG9nb3V0Q2xpY2snLCAndmFsaWRhdGlvbicsICdoYW5kbGVJbnB1dENoYW5nZScsICdwcmVwYXJlUGFyYW1zRm9yVG9vbGJhcicsICdidG5EZWxldGVDbGljaycsICdidG5QcmludENsaWNrJywgJ2J0bkVtYWlsQ2xpY2snLCAnYnRuUGRmQ2xpY2snLCAnYnRuU2F2ZUNsaWNrJywgJ2J0bkNhbmNlbENsaWNrJywgJ2J0blRhc2tDbGljaycsICdmZXRjaERhdGEnLCAnY3JlYXRlTGlicycsICdsb2FkTGlicycsICdoYXNMaWJJbkNhY2hlJywgJ2FkZFJvdycsICdlZGl0Um93JywgJ2hhbmRsZUdyaWRCdG5DbGljaycsICdoYW5kbGVHcmlkUm93SW5wdXQnLCAnaGFuZGxlR3JpZFJvdycsICd2YWxpZGF0ZUdyaWRSb3cnLCAnbW9kYWxQYWdlQ2xpY2snLCAnaGFuZGxlR3JpZFJvd0NoYW5nZScsICdoYW5kbGVQYWdlQ2xpY2snLCAnbW9kYWxQYWdlQnRuQ2xpY2snLCAnYnRuTG9nc0NsaWNrJywgJ2hhbmRsZUdyaWRDZWxsQ2xpY2snLCAnc2V0RG9jdW1lbnROYW1lJywgJ21vZGFsUmVwb3J0ZVBhZ2VCdG5DbGljaycpO1xuXG4gICAgICAgIF90aGlzLmdyaWRSb3dEYXRhID0ge307IC8v0LHRg9C00LXQvCDRhdGA0LDQvdC40YLRjCDRgdGC0YDQvtC60YMg0LPRgNC40LTQsFxuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRG9jdW1lbnRUZW1wbGF0ZSwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgICAgIC8vINGB0L7RhdGA0LDQvdC40Lwg0L/QvtGB0LvQtdC00L3QtdC1INC30L3QsNGH0LXQvdC40LUg0LTQvtC60LAg0Y3RgtC+0LPQviDRgtC40L/QsFxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZG9jSWQpIHtcbiAgICAgICAgICAgICAgICBEb2NDb250ZXh0W3RoaXMucHJvcHMuZG9jVHlwZUlkLnRvTG93ZXJDYXNlKCldID0gdGhpcy5zdGF0ZS5kb2NJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC/0LjRiNC10Lwg0LjRgdGF0L7QtNC90YvQtSDQtNCw0L3QvdGL0LUg0LIg0YXRgNCw0L3QuNC70LjRidC1LCDRgNC10LPQuNGB0YLRgNC40YDRg9C10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDRgdC+0LHRi9GC0LjQuVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIC8vINGB0L7RhdGA0LDQvdC40Lwg0LIg0LrQvtC90YLQtdC60YHRgtC1INGC0LjQvyDQtNC+0LrRg9C80LXQvdGC0LAsINGBINC60L7RgtC+0YDRi9C8INC80Ysg0YDQsNCx0L7RgtCw0LXRglxuICAgICAgICAgICAgRG9jQ29udGV4dC5kb2NUeXBlSWQgPSB0aGlzLnByb3BzLmRvY1R5cGVJZDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVsb2FkRGF0YSkge1xuICAgICAgICAgICAgICAgIC8v0LTQtdC70LDQtdC8INC30LDQv9GA0L7RgSDQvdCwINC/0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YVcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxpYnMgPSB0aGlzLmNyZWF0ZUxpYnMoKTsgLy/RgdC+0LfQtNCw0YHRgiDQvtCx0YrQtdC60YIg0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0YHQv9GA0LDQstC+0YfQvdC40LrQvtCyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5mb2N1c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9jdXNFbGVtZW50ID0gdGhpcy5yZWZzW3RoaXMucHJvcHMuZm9jdXNFbGVtZW50XTtcbiAgICAgICAgICAgICAgICBpZiAoZm9jdXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g0LfQsNC00LDRgtGMINC40LzRjyDRgNC10YDQuNGB0YLRgNCwINC90LAg0YHRgtGA0LDQvdC40YbRg1xuICAgICAgICAgICAgdGhpcy5zZXREb2N1bWVudE5hbWUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBpc0luRWRpdE1vZGUgPSB0aGlzLnN0YXRlLmVkaXRlZDtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubGlicy5sZW5ndGggJiYgIXRoaXMuc3RhdGUubG9hZGVkTGlicykge1xuICAgICAgICAgICAgICAgIHZhciBrcHYgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRvY0RhdGEgJiYgdGhpcy5kb2NEYXRhLmtwdikge1xuICAgICAgICAgICAgICAgICAgICBrcHYgPSB0aGlzLmRvY0RhdGEua3B2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyDQs9GA0YPQt9C40Lwg0YHQv9GA0LDQstC+0YfQvdC40LrQuFxuICAgICAgICAgICAgICAgIHRoaXMubG9hZExpYnMobnVsbCwga3B2KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHdhcm5pbmdTdHlsZSA9IHN0eWxlc1t0aGlzLnN0YXRlLndhcm5pbmdUeXBlXSA/IHN0eWxlc1t0aGlzLnN0YXRlLndhcm5pbmdUeXBlXSA6IG51bGw7XG5cbiAgICAgICAgICAgIHZhciBkaWFsb2dTdHJpbmcgPSB0aGlzLnNlcnZlclZhbGlkYXRpb24ubGVuZ3RoID4gMCA/ICdEb2t1bWVudCAnICsgdGhpcy5zZXJ2ZXJWYWxpZGF0aW9uWzBdLm5hbWUgKyAnID0gJyArIHRoaXMuc2VydmVyVmFsaWRhdGlvblswXS52YWx1ZSArICcganViYSBvbGVtYXMuIEthcyBqXFx4RTR0a2E/JyA6ICcnO1xuICAgICAgICAgICAgdmFyIGJ0blBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBidG5TdGFydDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5Mb2dpbjoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0bkFjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudSwgeyBwYXJhbXM6IGJ0blBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnbWVudScsXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmVrdklkOiBEb2NDb250ZXh0LnVzZXJEYXRhID8gRG9jQ29udGV4dC51c2VyRGF0YS5hc3V0dXNJZCA6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEb2NUb29sQmFyKCksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgRm9ybSxcbiAgICAgICAgICAgICAgICAgICAgeyBwYWdlczogdGhpcy5wYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2Zvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUGFnZUNsaWNrOiB0aGlzLmhhbmRsZVBhZ2VDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0luRWRpdE1vZGUgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIFRvb2xiYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ3Rvb2xiYXItY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RvYy10b29sYmFyLXdhcm5pbmcnLCBzdHlsZTogd2FybmluZ1N0eWxlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53YXJuaW5nID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndhcm5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlbmRlcmVyID8gdGhpcy5wcm9wcy5yZW5kZXJlcih0aGlzKSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxQYWdlLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnNlcnZlclZhbGlkYXRpb24ubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICdLb250cm9sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0czogWydidG5PaycsICdidG5DYW5jZWwnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsUGFnZUJ0bkNsaWNrLmJpbmQodGhpcykgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdjb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMubW9kYWxWYWxpZGF0ZS5pY29uSW1hZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTW9kYWxSZXBvcnQsIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5zdGF0ZS5pc1JlcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0OiB0aGlzLnN0YXRlLnR4dFJlcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlQnRuQ2xpY2s6IHRoaXMubW9kYWxSZXBvcnRlUGFnZUJ0bkNsaWNrIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60L3QvtC/0LrQuCDQlNC+0LHQsNCy0LjRgtGMXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkFkZENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkFkZENsaWNrKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8v0LHQtdC60LDQvyDQtNCw0L3QvdGL0YVcbiAgICAgICAgICAgIHRoaXMubWFrZUJhY2t1cCgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5oaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nICsgdGhpcy5wcm9wcy5tb2R1bGUgKyAnLycgKyB0aGlzLnByb3BzLmRvY1R5cGVJZCArICcvMCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZG9jSWQ6IDAsIGVkaXRlZDogdHJ1ZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmZldGNoRGF0YSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5mb2N1c0VsZW1lbnQgJiYgdGhpcy5yZWZzW3RoaXMucHJvcHMuZm9jdXNFbGVtZW50XSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmc1t0aGlzLnByb3BzLmZvY3VzRWxlbWVudF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0YxcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuRWRpdENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkVkaXRDbGljaygpIHtcbiAgICAgICAgICAgIC8v0LIg0YDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdGVkOiB0cnVlLCByZWxvYWREYXRhOiB0cnVlIH0pO1xuICAgICAgICAgICAgLy/QsdC10LrQsNC/INC00LDQvdC90YvRhVxuICAgICAgICAgICAgdGhpcy5tYWtlQmFja3VwKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmZvY3VzRWxlbWVudCAmJiB0aGlzLnJlZnNbdGhpcy5wcm9wcy5mb2N1c0VsZW1lbnRdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzW3RoaXMucHJvcHMuZm9jdXNFbGVtZW50XS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5EZWxldGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5EZWxldGVDbGljaygpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdidG5EZWxldGVDbGljaycpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5QcmludENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0blByaW50Q2xpY2soKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gJy9wcmludC8nICsgdGhpcy5wcm9wcy5kb2NUeXBlSWQgKyAnLycgKyBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWQgKyAnLycgKyB0aGlzLnN0YXRlLmRvY0lkO1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oJycgKyB1cmwpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5QZGZDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5QZGZDbGljaygpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL3BkZi8nICsgdGhpcy5wcm9wcy5kb2NUeXBlSWQgKyAnLycgKyBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWQgKyAnLycgKyB0aGlzLnN0YXRlLmRvY0lkO1xuICAgICAgICAgICAgd2luZG93Lm9wZW4oJycgKyB1cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60L3QvtC/0LrQuCDQvtGC0L/RgNCw0LLQutC4INC/0L7Rh9GC0YtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuRW1haWxDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5FbWFpbENsaWNrKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vINC10YHQu9C4INC00L7QutGD0LzQtdC90YIg0YLQuNC/INGB0YfQtdGCINC40LvQuCDQuNC30LLQtdGJ0LXQvdC40LUsINGC0L4g0L7RgtC/0YDQsNCy0LjQvCDQvdCw0L/RgNGP0LzRg9GOLCDQuNC90LDRh9C1INC/0LXRgNC10LDQtNGA0LjRgdGD0LXQvCDQvdCwINC/0LjRgdGM0LzQvlxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZG9jVHlwZUlkLnRvTG93ZXJDYXNlKCkgPT0gJ2FydicgfHwgdGhpcy5wcm9wcy5kb2NUeXBlSWQudG9Mb3dlckNhc2UoKSA9PSAndGVhdGlzJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCdQb3N0JywgJy9lbWFpbCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnRW1haWwgc2FhZGV0dWQgZWR1a2FsdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdvaydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLmVycm9yX21lc3NhZ2UgPyByZXNwb25zZS5lcnJvcl9tZXNzYWdlIDogJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbG9hZERhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdUZWtraXMgdmlnYSAnICsgZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDRgdC+0YXRgNCw0L3QuNC8INC/0LDRgNCw0LzQtdGC0YDRiyDQtNC70Y8g0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPINCy0LvQvtC20LXQvdC40Y8g0LIg0LrQvtC90YLQtdC60YHRgtC1XG4gICAgICAgICAgICAgICAgRG9jQ29udGV4dFsnZW1haWwtcGFyYW1zJ10gPSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY0lkOiB0aGlzLnN0YXRlLmRvY0lkLFxuICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IHRoaXMucHJvcHMuZG9jVHlwZUlkLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeVR5cGU6ICdpZCcgLy8g0LjQtCAtINC00L7QutGD0LzQtdC90YIsIHdoZXJlIC1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nICsgdGhpcy5wcm9wcy5tb2R1bGUgKyAnL2UtbWFpbC8wJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LrQvdC+0L/QutC4INGB0L7RhdGA0LDQvdC40YLRjFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5TYXZlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuU2F2ZUNsaWNrKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmRvY1R5cGVJZCAhPT0gJ1BBRVZBX1RBQUJFTCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ1NhbHZlc3Rhbi4uLicsXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCdQdXQnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAvL2NhbGwgdG8gc2F2ZVxuICAgICAgICAgICAgICAgIF90aGlzNC5kb2NEYXRhID0gcmVzcG9uc2UuZGF0YVswXTtcblxuICAgICAgICAgICAgICAgIF90aGlzNC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHJlbG9hZERhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnU2FsdmVzdGF0dWQgZWR1a2FsdCcsXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnb2snLFxuICAgICAgICAgICAgICAgICAgICBlZGl0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBkb2NJZDogX3RoaXM0LmRvY0RhdGEuaWQgPyBfdGhpczQuZG9jRGF0YS5pZCA6IDBcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2NUeXBlSWQgPSBfdGhpczQucHJvcHMuZG9jVHlwZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jSWQgPSBfdGhpczQuZG9jRGF0YS5pZDtcblxuICAgICAgICAgICAgICAgICAgICAvLyDRgdC+0YXRgNCw0L3QuNC8INCyINC60L7QvdGC0LXQutGB0YLQtSDQv9C+0YHQu9C10LTQvdC40LUg0LjQt9C80LXQvdC10L3QuNGPXG4gICAgICAgICAgICAgICAgICAgIERvY0NvbnRleHRbZG9jVHlwZUlkXSA9IF90aGlzNC5kb2NEYXRhLmlkO1xuXG4gICAgICAgICAgICAgICAgICAgIC8v0LXRgdC70Lgg0LHRi9C70L4g0YHQvtC30LTQsNC90LjQtSDQvdC+0LLQvtCz0L4g0LTQvtC60LzQtdC90YLQsCDQuCDRjdGC0L7RgiDQtNC+0Log0LHRi9C7INC60LDRgNGC0LAg0YDQtdCx0LXQvdC60LAsINGC0L4g0YHQtNC10LvQsNC10Lwg0L/QtdGA0LXQsNC00YDQtdGB0YHQsNGG0LjRjiDQvdCwINC00L7QsdCw0LLQu9C10L3QuNC1INGD0YHQu9GD0LNcblxuICAgICAgICAgICAgICAgICAgICAvLyDQvtCx0L3QvtCy0LjQvCDRgdC/0YDQsNCy0L7Rh9C90LjQulxuICAgICAgICAgICAgICAgICAgICBpZiAoRG9jQ29udGV4dC5saWJzICYmIERvY0NvbnRleHQubGlic1tkb2NUeXBlSWQudG9Mb3dlckNhc2UoKV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5sb2FkTGlicyhkb2NUeXBlSWQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0LXRgdGC0Ywg0LIg0LrQtdGI0LUgLCDRgtC+INGH0LjRgtC40LxcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpYiA9IGRvY1R5cGVJZC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChEb2NDb250ZXh0LmxpYnMgJiYgRG9jQ29udGV4dC5saWJzW2xpYl0gJiYgRG9jQ29udGV4dC5saWJzW2xpYl0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRG9jQ29udGV4dC5saWJzW2xpYl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2NUeXBlSWQudG9VcHBlckNhc2UoKSA9PT0gJ0xBUFMnICYmIF90aGlzNC5wcm9wcy5kb2NJZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g0LTQtdC70LDQtdC8INGA0LXQtNCw0LnRgNC10LrRgiDQvdCwINC60LDRgNGC0YMg0YPRgdC70YPQs1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jVHlwZUlkID0gJ0xBUFNFX0tBQVJUJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY0lkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczQucHJvcHMucmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWQgLyByZWRpcmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAnLycgKyAoX3RoaXM0LnByb3BzLm1vZHVsZSA/IF90aGlzNC5wcm9wcy5tb2R1bGUgOiAnbGFwc2VkJykgKyAnLycgKyBkb2NUeXBlSWQgKyAnLycgKyBkb2NJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQucHJvcHMuaGlzdG9yeS5yZXBsYWNlKCcvcmVsb2FkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5wcm9wcy5oaXN0b3J5LnJlcGxhY2UoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQutCwINC00Y/QuyDQutC90L7Qv9C60Lgg0J7RgtC60LDQtyDQvtGCINGB0L7RhdGA0LDQvdC10L3QuNGPXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkNhbmNlbENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkNhbmNlbENsaWNrKCkge1xuICAgICAgICAgICAgLy/QstC+0YHRgtCw0L3QvtCy0LjQvCDQv9GA0LXQttC90LXQtSDRgdC+0YHRgtC+0Y/QvdC40LVcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmRvY0lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlRnJvbUJhY2t1cCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkuZ29CYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL9GA0LXQttC40Lwg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRlZDogZmFsc2UsIHdhcm5pbmc6ICcnLCB3YXJuaW5nVHlwZTogbnVsbCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0blRhc2tDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5UYXNrQ2xpY2sodGFza05hbWUsIGtwdiwgZ3J1cHBJZCwgdGVrc3QsIGtvZ3VzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLmJwbS5maW5kKGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2submFtZSA9PT0gdGFza05hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghdGFzaykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnVmlnYSwgdGFzayAnICsgdGFza05hbWUgKyAnIGVpIGxlaWRudWQnLFxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ2Vycm9yJ1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYXBpID0gJy9uZXdBcGkvdGFzay8nICsgdGFzay50YXNrO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgd2FybmluZzogJ1TDtsO2dGFuLi4uJywgd2FybmluZ1R5cGU6ICdub3RWYWxpZCcgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCdQb3N0JywgYXBpLCBrcHYgfHwgZ3J1cHBJZCB8fCB0ZWtzdCB8fCBrb2d1cyA/IHtcbiAgICAgICAgICAgICAgICBzZWlzdWdhOiBrcHYsXG4gICAgICAgICAgICAgICAgZ3J1cHBJZDogZ3J1cHBJZCxcbiAgICAgICAgICAgICAgICB2aWl0ZW51bWJlcjogdGVrc3QsXG4gICAgICAgICAgICAgICAga29ndXM6IGtvZ3VzXG4gICAgICAgICAgICB9IDogbnVsbCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVJvdyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YU1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLmVycm9yX21lc3NhZ2UgPyByZXNwb25zZS5kYXRhLmVycm9yX21lc3NhZ2UgOiAnJztcblxuICAgICAgICAgICAgICAgIHZhciBkb2NJZCA9IGRhdGFSb3cuZG9jSWQ7XG4gICAgICAgICAgICAgICAgdmFyIGRvY1R5cGVJZCA9IGRhdGFSb3cuZG9jVHlwZUlkID8gZGF0YVJvdy5kb2NUeXBlSWQgOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRvY0lkICYmIGRvY1R5cGVJZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ0VkdWthbHQgJyArIGRhdGFNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdvaydcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBrb29zdGF0dWQgdXVzIGRvaywgdGVlbWUgcmVsb2FkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAnLycgKyBfdGhpczUucHJvcHMubW9kdWxlICsgJy8nICsgX3RoaXM1LnByb3BzLmRvY1R5cGVJZCArICcvJyArIF90aGlzNS5zdGF0ZS5kb2NJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFzay50YXNrID09ICdLb29zdGFUYWdhc2ltYWtzZScgfHwgdGFzay50YXNrID09ICdLb29zdGFVbGVrYW5uZU1ha3NlJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINC+0YHRg9GJ0LXRgdGC0LLQuNGCINC/0LXRgNC10YXQvtC0INC90LAg0LrQsNGA0YLQvtGH0LrRgyDQutC+0L3RgtGALdCw0LPQtdC90YLQsFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUucHJvcHMuaGlzdG9yeS5wdXNoKCcvbGFwc2VkLycgKyBkb2NUeXBlSWQgKyAnLycgKyBkb2NJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnByb3BzLmhpc3RvcnkucmVwbGFjZSgnL3JlbG9hZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5wcm9wcy5oaXN0b3J5LnJlcGxhY2UoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnVmlnYSwgJyArIGRhdGFNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQktGL0L/QvtC70L3QuNGCINC30LDQv9GA0L7RgSDQuCDQv9C+0LrQsNC20LXRgiDQu9C+0LPQuFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5Mb2dzQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuTG9nc0NsaWNrKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBhcGkgPSAnL25ld0FwaS9sb2dzLyc7XG5cbiAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCdQb3N0JywgYXBpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhUm93cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgX3RoaXM2LnNldFN0YXRlKHsgc2hvd0xvZ3M6IHRydWUsIGxvZ3M6IGRhdGFSb3dzIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQodC00LXQu9Cw0LXRgiDQutC+0L/QuNGOINGC0LXQutGD0YnQtdCz0L4g0YHQvtGB0YLQvtGP0L3QuNGPINC00LDQvdC90YvRhVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdtYWtlQmFja3VwJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1ha2VCYWNrdXAoKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2t1cCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZG9jRGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQstC+0YHRgtCw0L3QvtCy0LjRgtGMINGC0LXQutGD0YnQtdC1INGB0L7RgdGC0L7Rj9C90LjQtSDQuNC3INC60L7Qv9C40LhcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVzdG9yZUZyb21CYWNrdXAnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZUZyb21CYWNrdXAoKSB7XG4gICAgICAgICAgICB0aGlzLmRvY0RhdGEgPSBKU09OLnBhcnNlKHRoaXMuYmFja3VwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQuNC90L/Rg9GC0L7Qsi5cclxuICAgICAgICAgKiBAcGFyYW0gaW5wdXROYW1lXHJcbiAgICAgICAgICogQHBhcmFtIGlucHV0VmFsdWVcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlSW5wdXRDaGFuZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSW5wdXRDaGFuZ2UoaW5wdXROYW1lLCBpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQuNC30LzQtdC90LXQvdC40LlcbiAgICAgICAgICAgIC8vINC40LfQvNC10L3QtdC90LjRjyDQtNC+0L/Rg9GB0YLQuNC80Ysg0YLQvtC70YzQutC+INCyINGA0LXQttC40LzQtSDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuZWRpdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbm90IGluIGVkaXRlIG1vZGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZG9jRGF0YVtpbnB1dE5hbWVdID0gaW5wdXRWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmhhbmRsZUlucHV0Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVJbnB1dENoYW5nZShpbnB1dE5hbWUsIGlucHV0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQvtCx0YDQsNCx0L7RgtGH0LjQutCwINCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcGFyYW0gZ3JpZERhdGFcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlR3JpZENlbGxDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVHcmlkQ2VsbENsaWNrKGFjdGlvbiwgZG9jSWQsIGlkeCwgY29sdW1uSWQsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb2NEYXRhICYmIHRoaXMuZG9jRGF0YS5ncmlkRGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9jRGF0YS5ncmlkRGF0YVtpZHhdW2NvbHVtbklkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkb2NEYXRhOiB0aGlzLmRvY0RhdGEgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQtdGB0YLRjCDRgtGA0LjQs9Cz0LXRgCwg0LLRi9C30L7QstC10Lwg0LXQs9C+XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMudHJpZ2dlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRyaWdnZXIodGhpcywgaWR4LCBjb2x1bW5JZCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0LLRi9C30L7QstC10YIg0LzQtdGC0L7QtCDQstCw0LvQuNC00LDRhtC40Lgg0LTQsNC90L3Ri9GFINGB0L/RgNCw0LLQvtGH0L3QuNC60LAgKNC60L7QtNCwKSDQuCDQstC10YDQvdC10YIg0YDQtdC30YPQu9GM0YLQsNGCINC/0YDQvtCy0LXRgNC60LhcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICd2YWxpZGF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmVkaXRlZCkgcmV0dXJuICcnO1xuXG4gICAgICAgICAgICB2YXIgd2FybmluZyA9ICcnLFxuICAgICAgICAgICAgICAgIG5vdFJlcXVpcmVkRmllbGRzID0gW10sXG4gICAgICAgICAgICAgICAgLy8g0L/QuNGI0LXQvCDQsiDQvNCw0YHRgdC40LIg0L/QvtC70Y8g0YEg0L7RgtGB0YPRgtGB0YLQstGD0Y7RidC40LzQuCDQtNCw0L3QvdGL0LzQuFxuICAgICAgICAgICAgZXhwcmVzc2lvbkZpZWxkcyA9IFtdLFxuICAgICAgICAgICAgICAgIC8vINC/0LjRiNC10Lwg0LLRi9GA0LDQttC10L3QuNC1XG4gICAgICAgICAgICBub3RNaW5NYXhSdWxlID0gW107XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnJlcXVpcmVkRmllbGRzKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVpcmVkRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5uYW1lICYmIGZpZWxkLm5hbWUgaW4gX3RoaXM3LmRvY0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF90aGlzNy5kb2NEYXRhW2ZpZWxkLm5hbWVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlICYmIGZpZWxkLnR5cGUgIT09ICdCJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdFJlcXVpcmVkRmllbGRzLnB1c2goZmllbGQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5zZXJ2ZXJWYWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcGFyaW5nIHRvIHNlcnZlciB0byB2YWxpZGF0ZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5mZXRjaERhdGEoJ1Bvc3QnLCAnL25ld0FwaS92YWxpZGF0ZS8nICsgZmllbGQuc2VydmVyVmFsaWRhdGlvbiArICcvJyArIHZhbHVlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YS5sZW5ndGgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2NJZCA9IHJlc3BvbnNlLmRhdGEuZGF0YVswXS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3dhcm5pbmcgPSBfdGhpczcuc3RhdGUud2FybmluZztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2NJZCAmJiBkb2NJZCAhPT0gX3RoaXM3LnN0YXRlLmRvY0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v0L/QtdGA0LXQsNC00YDQtdGB0L7QstC60LBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnNlcnZlclZhbGlkYXRpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBkb2NJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd2FybmluZyA9IF93YXJuaW5nICsgKHZhbHVlICsgJyAoJyArIGZpZWxkLm5hbWUgKyAnKSBqdWJhIG9sZW1hcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc3ZhZSBpbiBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogX3dhcm5pbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ25vdFZhbGlkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0LzQuNC9IC4g0LzQsNC60YEg0LfQvdCw0YfQtdC90LjRj1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB8fCB2YWx1ZSAmJiB2YWx1ZSA+IHByb3BzLm1heFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrVmFsdWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmaWVsZC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnRCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVkVmFsdWVEID0gRGF0ZS5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5taW4gJiYgY29udHJvbGxlZFZhbHVlRCA8IGZpZWxkLm1pbiAmJiBmaWVsZC5tYXggJiYgY29udHJvbGxlZFZhbHVlRCA+IGZpZWxkLm1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVkVmFsdWVOID0gTnVtYmVyKHZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQubWluICYmIGNvbnRyb2xsZWRWYWx1ZU4gPT09IDAgfHwgZmllbGQubWluICYmIGNvbnRyb2xsZWRWYWx1ZU4gPCBmaWVsZC5taW4gJiYgZmllbGQubWF4ICYmIGNvbnRyb2xsZWRWYWx1ZU4gPiBmaWVsZC5tYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RNaW5NYXhSdWxlLnB1c2goZmllbGQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNC60LAg0L3QsCDQstGL0YDQsNC20LXQvdC40LVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5leHByZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBfdGhpczcuZG9jRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IGZpZWxkLmV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGV2YWwoZmllbGQuZXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbkZpZWxkcy5wdXNoKGZpZWxkLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC50cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC50cmlnZ2VyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChub3RSZXF1aXJlZEZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmcgPSB3YXJuaW5nICsgJyBwdXVkdWIgdmFqYWxpa3VkIGFuZG1lZCAoJyArIG5vdFJlcXVpcmVkRmllbGRzLmpvaW4oJywgJykgKyAnKSAnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChub3RNaW5NYXhSdWxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZyA9IHdhcm5pbmcgPyB3YXJuaW5nIDogJycgKyAnIG1pbi9tYXggb24gdmFsZSgnICsgbm90TWluTWF4UnVsZS5qb2luKCcsICcpICsgJykgJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZXhwcmVzc2lvbkZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmcgPSB3YXJuaW5nID8gd2FybmluZyA6ICcnICsgJyB2YWxlIGFuZG1lZCAoJyArIGV4cHJlc3Npb25GaWVsZHMuam9pbignLCAnKSArICcpICc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHdhcm5pbmcsXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiB3YXJuaW5nLmxlbmd0aCA/ICdub3RWYWxpZCcgOiBudWxsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB3YXJuaW5nOyAvLyDQstC10YDQvdC10Lwg0LjQt9Cy0LXRidC10L3QuNC1INC+0LEg0LjRgtC+0LPQsNGFINCy0LDQu9C40LTQsNGG0LjQuFxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0JLQtdGA0L3QtdGCINC60L7QvNC/0L7QvdC10YIgLSDQv9Cw0L3QtdC70Ywg0LjQvdGB0YLRgNGD0LzQtdC90YLQvtCyINC00L7QutGD0LzQtdC90YLQsFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtYTUx9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlckRvY1Rvb2xCYXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRG9jVG9vbEJhcigpIHtcbiAgICAgICAgICAgIHZhciB0b29sYmFyID0gdGhpcy5wcmVwYXJlUGFyYW1zRm9yVG9vbGJhcigpO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgVG9vbGJhckNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICB7IHJlZjogJ3Rvb2xiYXJDb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2NUb29sQmFyLCB7IHJlZjogJ2RvYy10b29sYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgZG9jVHlwZUlkOiB0aGlzLnByb3BzLmRvY1R5cGVJZCxcbiAgICAgICAgICAgICAgICAgICAgYnBtOiB0aGlzLmJwbSA/IHRoaXMuYnBtIDogW10sXG4gICAgICAgICAgICAgICAgICAgIGxvZ3M6IHRoaXMuc3RhdGUubG9ncyxcbiAgICAgICAgICAgICAgICAgICAgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRlZDogdGhpcy5zdGF0ZS5lZGl0ZWQsXG4gICAgICAgICAgICAgICAgICAgIGRvY1N0YXR1czogdGhpcy5kb2NEYXRhLmRvY19zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogdGhpcy52YWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBidG5BZGRDbGljazogdGhpcy5idG5BZGRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgYnRuRWRpdENsaWNrOiB0aGlzLmJ0bkVkaXRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgYnRuQ2FuY2VsQ2xpY2s6IHRoaXMuYnRuQ2FuY2VsQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIGJ0blByaW50Q2xpY2s6IHRoaXMuYnRuUHJpbnRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgYnRuRW1haWxDbGljazogdGhpcy5idG5FbWFpbENsaWNrLFxuICAgICAgICAgICAgICAgICAgICBidG5TYXZlQ2xpY2s6IHRoaXMuYnRuU2F2ZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBidG5Mb2dzQ2xpY2s6IHRoaXMuYnRuTG9nc0NsaWNrLFxuICAgICAgICAgICAgICAgICAgICBidG5UYXNrQ2xpY2s6IHRoaXMuYnRuVGFza0NsaWNrLFxuICAgICAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zOiB0b29sYmFyXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiAg0YfQuNGC0LDQtdC8INC00LDQvdC90YvQtSDRgdC+INGB0YLQvtGA0LAsINGE0L7RgNC80LjRgNGD0LXQvCDQv9Cw0YDQsNC80LXRgtGA0Ysg0LTQu9GPINC60L3QvtC/0L7QuiDRg9C/0YDQsNCy0LvQtdC90LjRjywg0Lgg0YLRg9C00LAg0LjRhSDQvtGC0LTQsNC10LxcclxuICAgICAgICAgKiBAcmV0dXJucyB7e2J0bkFkZDoge3Nob3c6IGJvb2xlYW4sIGRpc2FibGVkOiBib29sZWFufSwgYnRuRWRpdDoge3Nob3c6IGJvb2xlYW4sIGRpc2FibGVkOiBib29sZWFufSwgYnRuRGVsZXRlOiB7c2hvdzogYm9vbGVhbiwgZGlzYWJsZWQ6IGJvb2xlYW59LCBidG5QcmludDoge3Nob3c6IGJvb2xlYW4sIGRpc2FibGVkOiBib29sZWFufX19XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ByZXBhcmVQYXJhbXNGb3JUb29sYmFyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXBhcmVQYXJhbXNGb3JUb29sYmFyKCkge1xuICAgICAgICAgICAgdmFyIGRvY1JpZ2h0cyA9IERvY1JpZ2h0c1t0aGlzLnByb3BzLmRvY1R5cGVJZF0gPyBEb2NSaWdodHNbdGhpcy5wcm9wcy5kb2NUeXBlSWRdIDogW107XG4gICAgICAgICAgICB2YXIgdXNlclJvbGVzID0gRG9jQ29udGV4dC51c2VyRGF0YSA/IERvY0NvbnRleHQudXNlckRhdGEucm9sZXMgOiBbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBidG5BZGQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogY2hlY2tSaWdodHModXNlclJvbGVzLCBkb2NSaWdodHMsICdhZGQnKSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5FZGl0OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAnZWRpdCcpLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0blNhdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5zdGF0ZS5lZGl0ZWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnN0YXRlLmlzRGlzYWJsZVNhdmVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZToge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBjaGVja1JpZ2h0cyh1c2VyUm9sZXMsIGRvY1JpZ2h0cywgJ2RlbGV0ZScpLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0blByaW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAncHJpbnQnKSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5TdGFydDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5Mb2dpbjoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0bkFjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5SZWt2OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCS0YvQv9C+0LvQvdC40YIg0LfQsNC/0YDQvtGB0YtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmV0Y2hEYXRhJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoRGF0YShwcm90b2NvbCwgYXBpLCBhcGlfcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHVybCA9IGFwaSA/IGFwaSA6IFVSTCArICcvJyArIHRoaXMucHJvcHMuZG9jVHlwZUlkICsgJy8nICsgdGhpcy5zdGF0ZS5kb2NJZDtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSAnZmV0Y2hEYXRhUG9zdCc7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogdGhpcy5wcm9wcy5kb2NUeXBlSWQgPyB0aGlzLnByb3BzLmRvY1R5cGVJZCA6IERvY0NvbnRleHQuZG9jVHlwZUlkLFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUgPyB0aGlzLnByb3BzLm1vZHVsZSA6IERvY0NvbnRleHQubW9kdWxlLFxuICAgICAgICAgICAgICAgIHVzZXJJZDogRG9jQ29udGV4dC51c2VyRGF0YS51c2VySWQsXG4gICAgICAgICAgICAgICAgdXVpZDogRG9jQ29udGV4dC51c2VyRGF0YS51dWlkLFxuICAgICAgICAgICAgICAgIGRvY0lkOiB0aGlzLnN0YXRlLmRvY0lkLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IERvY0NvbnRleHRbYXBpXSA/IERvY0NvbnRleHRbYXBpXSA6IG51bGxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChwcm90b2NvbCkge1xuICAgICAgICAgICAgICAgIC8vcmVxdWVzdCBjYWxsIG5vdCBkZWZhdWx0XG4gICAgICAgICAgICAgICAgbWV0aG9kID0gJ2ZldGNoRGF0YScgKyBwcm90b2NvbDtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHRoaXMuZG9jRGF0YSwgYXBpX3BhcmFtcyA/IGFwaV9wYXJhbXMgOiB7fSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZWQsIHJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgX2ZldGNoRGF0YVttZXRob2RdKHVybCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9ICcvbG9naW4nO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9leGVjdXRlIHNlbGVjdCBjYWxsc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYWN0aW9uICYmIHJlc3BvbnNlLmRhdGEuYWN0aW9uID09PSAnc2VsZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5kb2NEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBzdG9yZSByZXF1aXJlZCBmaWVsZHMgaW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGFbMF0ucmVxdWlyZWRGaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnJlcXVpcmVkRmllbGRzID0gcmVzcG9uc2UuZGF0YS5kYXRhWzBdLnJlcXVpcmVkRmllbGRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbGwgc3RvcmUgYnBtIGluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhWzBdLmJwbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9jUmlnaHRzID0gRG9jUmlnaHRzW190aGlzOC5wcm9wcy5kb2NUeXBlSWRdID8gRG9jUmlnaHRzW190aGlzOC5wcm9wcy5kb2NUeXBlSWRdIDogW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VyUm9sZXMgPSBEb2NDb250ZXh0LnVzZXJEYXRhID8gRG9jQ29udGV4dC51c2VyRGF0YS5yb2xlcyA6IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINGC0L7Qu9GM0LrQviDQtNC+0YHRgtGD0L/QvdGL0LUg0YLQsNGB0LrQuCDQtNC+0LvQttC90Ysg0L/QvtC/0LDRgdGC0Ywg0LIg0YHQv9C40YHQvtC6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5icG0gPSByZXNwb25zZS5kYXRhLmRhdGFbMF0uYnBtLmZpbHRlcihmdW5jdGlvbiAodGFzaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCB0YXNrLnRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Nob3VsZCByZXR1cm4gZGF0YSBhbmQgY2FsbGVkIGZvciByZWxvYWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoeyByZWxvYWREYXRhOiBmYWxzZSwgd2FybmluZzogJycsIHdhcm5pbmdUeXBlOiBudWxsIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkKHJlc3BvbnNlLmRhdGEuZGF0YVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmFjdGlvbiAmJiByZXNwb25zZS5kYXRhLmFjdGlvbiA9PT0gJ3NhdmUnICYmIHJlc3BvbnNlLmRhdGEucmVzdWx0LmVycm9yX2NvZGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvcl90ZWF0aXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdCAmJiByZXNwb25zZS5kYXRhLnJlc3VsdC5lcnJvcl9tZXNzYWdlID8gcmVzcG9uc2UuZGF0YS5yZXN1bHQuZXJyb3JfbWVzc2FnZSA6ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGluIHNhdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnVGVra2lzIHZpZ2E6IHNhbHZlc3RhbWluZSBlYmFcXHhGNW5uZXN0dXMgJyArIGVycm9yX3RlYXRpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4dFJlcG9ydDogcmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXBvcnQ6ICEhKHJlc3BvbnNlLmRhdGEuZGF0YSAmJiByZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlZChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZldGNoIHZpZ2EgJywgcmVzcG9uc2UsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdUZWtraXMgdmlnYSAnICsgKHJlc3BvbnNlLmRhdGEuZXJyb3JfbWVzc2FnZSA/IHJlc3BvbnNlLmRhdGEuZXJyb3JfbWVzc2FnZSA6ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ2Vycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NhdGNoZWQgZmV0Y2ggZXJyb3IgJyArIGUpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ1Rla2tpcyB2aWdhICcgKyBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHQtdGB0L/QtdGH0LjRgiDQt9Cw0LPRgNGD0LfQutGDINC00LDQvdC90YvRhSDQtNC70Y8g0LHQuNCx0LvQuNC+0YLQtdC6XHJcbiAgICAgICAgICogbGliTmFtZSAtINC60L7QtCDRgdC/0YDQsNCy0L7Rh9C90LjQutCwXHJcbiAgICAgICAgICoga3B2IC0g0LTQsNGC0LAsINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOINGB0LXQs9C+0LTQvdGPXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2xvYWRMaWJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRMaWJzKGxpYk5hbWUsIGtwdikge1xuICAgICAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBsaWJzQ291bnQgPSBsaWJOYW1lID8gMSA6IHRoaXMucHJvcHMubGlicy5sZW5ndGg7XG5cbiAgICAgICAgICAgIHZhciBsaWJzVG9Mb2FkID0gbGliTmFtZSA/IFtsaWJOYW1lXSA6IE9iamVjdC5rZXlzKHRoaXMubGlicyk7XG4gICAgICAgICAgICAvLyBzdGFydCBsb2FkaW5nXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGluZ0xpYnNbbGliTmFtZV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdMaWJzW2xpYk5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g0YPQttC1INC40LTQtdGCINC30LDQs9GA0YPQt9C60LBcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpYnNUb0xvYWQuZm9yRWFjaChmdW5jdGlvbiAobGliKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGFzU3FsV2hlcmUgPSBsaWIgaW4gX3RoaXM5LnN0YXRlLmxpYlBhcmFtcztcblxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7IC8vYWp1dGlzZWx0XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogX3RoaXM5LnByb3BzLm1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBEb2NDb250ZXh0LnVzZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICB1dWlkOiBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWRcbiAgICAgICAgICAgICAgICB9LCBoYXNTcWxXaGVyZSA/IHtcbiAgICAgICAgICAgICAgICAgICAgc3FsOiBfdGhpczkuc3RhdGUubGliUGFyYW1zW2xpYl0sXG4gICAgICAgICAgICAgICAgICAgIGtwdjoga3B2ID8ga3B2IDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKVxuICAgICAgICAgICAgICAgIH0gOiB7fSk7XG5cbiAgICAgICAgICAgICAgICAvLyDQv9GA0L7QstC10YDQuNC8INC90LDQu9C40YfQuNC1INC00LDQvdC90YvRhSDQsiDQutC10YjQtSwg0LXRgdC70Lgg0L3QtdGCLCDRgtC+INCz0YDRg9C30LjQvFxuICAgICAgICAgICAgICAgIGlmICghIV90aGlzOS5zdGF0ZS5saWJQYXJhbXNbbGliXSB8fCAhX3RoaXM5Lmhhc0xpYkluQ2FjaGUobGliKSkge1xuICAgICAgICAgICAgICAgICAgICBfZmV0Y2hEYXRhLmZldGNoRGF0YVBvc3QoTElCU19VUkwgKyAnLycgKyBsaWIsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiAnZGF0YScgaW4gcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkubGlic1tsaWJdID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQucmVzdWx0LmRhdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIGxpYiBpbiBjYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvY0NvbnRleHQubGlic1tsaWJdID0gX3RoaXM5LmxpYnNbbGliXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnNDb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINC+0YLQvNC10YLQutCwINGH0YLQviDRgdC/0YDQsNCy0L7Rh9C90LjQuiDQt9Cw0LPRgNGD0LbQtdC9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmxvYWRpbmdMaWJzW2xpYl0gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlic0NvdW50ICYmICFfdGhpczkuc3RhdGUubG9hZGVkTGlicykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsbCBsaWJzIGxvYWRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZExpYnM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnS8O1aWsgcMO8c2lhbmRtZWQgbGFhZGl0dWQgw7VubmVzdHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnb2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdsb2FkTGlicyBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g0LHQtdGA0LXQvCDQtNCw0L3QvdGL0LUg0LjQtyDQutC10YjQsFxuICAgICAgICAgICAgICAgICAgICBfdGhpczkubGlic1tsaWJdID0gRG9jQ29udGV4dC5saWJzW2xpYl0uZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrcHYgPSBfdGhpczkuZG9jRGF0YS52YWxpZCA/IF90aGlzOS5kb2NEYXRhLnZhbGlkIDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtwdiA9IF90aGlzOS5kb2NEYXRhLmtwdiA/IF90aGlzOS5kb2NEYXRhLmtwdiA6IGtwdjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC10YHQtNC4INCyINGB0L/RgNCw0LLQvtGH0L3QuNC60LUg0LXRgdGC0Ywg0LTQsNGC0LAg0Lgg0L7QvdCwINC90LUg0L/Rg9GB0YLQsNGPXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvdy52YWxpZCB8fCBuZXcgRGF0ZShrcHYpIDw9IG5ldyBEYXRlKHJvdy52YWxpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmxvYWRpbmdMaWJzW2xpYl0gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBsaWJzQ291bnQtLTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpYnNDb3VudCAmJiAhX3RoaXM5LnN0YXRlLmxvYWRlZExpYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxsIGxpYnMgbG9hZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWRMaWJzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdLw7VpayBww7xzaWFuZG1lZCBsYWFkaXR1ZCDDtW5uZXN0dXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnb2snXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsaWJzQ291bnQgPD0gMSAmJiAhX3RoaXM5LnN0YXRlLmxvYWRlZExpYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hbGwgbGlicyBsb2FkZWQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWRMaWJzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ0vDtWlrIHDDvHNpYW5kbWVkIGxhYWRpdHVkIMO1bm5lc3R1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ29rJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC/0YDQvtCy0LXRgNC40YIg0L3QsNC70LjRh9C40Lgg0LIg0LrQtdGI0LUg0LTQsNC90L3Ri9GFINC4INC10YHQu9C4INC90LXRgiwg0YLQviDQstC10YDQvdC10YIgZmFsc2VcclxuICAgICAgICAgKiBAcGFyYW0gbGliXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhc0xpYkluQ2FjaGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzTGliSW5DYWNoZShsaWIpIHtcbiAgICAgICAgICAgIGlmICghRG9jQ29udGV4dC5saWJzKSB7XG4gICAgICAgICAgICAgICAgRG9jQ29udGV4dC5saWJzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIURvY0NvbnRleHQubGlic1tsaWJdIHx8IERvY0NvbnRleHQubGlic1tsaWJdLmxlbmd0aCA9PT0gMCA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCy0LXRgNC90LXRgiDQvtCx0YrQtdC60YIg0LHQuNCx0LvQuNC+0YLQtdC6INC00L7QutGD0LzQtdC90YLQsFxyXG4gICAgICAgICAqIEByZXR1cm5zIHt7fX1cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlTGlicycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVMaWJzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgbGlicyA9IHt9O1xuICAgICAgICAgICAgdmFyIGxpYlBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5saWJzLmZvckVhY2goZnVuY3Rpb24gKGxpYikge1xuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIGxpYiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobGliKSkgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9vYmplY3RcbiAgICAgICAgICAgICAgICAgICAgbGlic1tsaWIuaWRdID0gW107XG4gICAgICAgICAgICAgICAgICAgIGxpYlBhcmFtc1tsaWIuaWRdID0gbGliLmZpbHRlcjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaWJzW2xpYl0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsaWJQYXJhbXM6IGxpYlBhcmFtcyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAubG9hZExpYnMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGxpYnM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQldGB0LvQuCDQtdGB0YLRjCDQsiDQv9GA0L7Qv9GB0LDRhSDQvNC10YLQvtC0INGB0L7Qt9C00LDQvdC40Y8g0YHRgtGA0L7QutC4INCz0YDQuNC00LAsINCy0YvQt9C+0LLQtdGCINC10LPQvlxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmlkUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUdyaWRSb3coKSB7XG4gICAgICAgICAgICB2YXIgZ3JpZFJvdyA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNyZWF0ZUdyaWRSb3cpIHtcbiAgICAgICAgICAgICAgICBncmlkUm93ID0gdGhpcy5wcm9wcy5jcmVhdGVHcmlkUm93KHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdyaWRSb3c7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQutCwINC90LAg0LLQutC70LDQtNC60YMg0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVBhZ2VDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVQYWdlQ2xpY2socGFnZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAocGFnZS5oYW5kbGVQYWdlQ2xpY2spIHtcbiAgICAgICAgICAgICAgICBwYWdlLmhhbmRsZVBhZ2VDbGljayhwYWdlLmRvY1R5cGVJZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2UuZG9jSWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICcvJyArIERvY0NvbnRleHQubW9kdWxlICsgJy8nICsgcGFnZS5kb2NUeXBlSWQgKyAnLycgKyBwYWdlLmRvY0lkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5yZXBsYWNlKCcvcmVsb2FkJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMTEucHJvcHMuaGlzdG9yeS5yZXBsYWNlKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Lkg0LTQu9GPINC/0LDQvdC10LvQuCDQuNC90YHRgtGA0YPQvNC10L3RgtC+0LIg0LPRgNC40LTQsFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVHcmlkQnRuQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlR3JpZEJ0bkNsaWNrKGJ0bk5hbWUsIGFjdGl2ZVJvdywgaWQsIGRvY1R5cGVJZCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5oYW5kbGVHcmlkQnRuQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQtdGB0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiwg0YLQviDQvtGC0LTQsNC10Lwg0YLRg9C00LAsINC40L3QsNGH0LUg0LLRi9C30YvQstCw0LXQvCDQvNC10YLQvtC0INC90LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDRgdGC0YDQvtC60LhcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhhbmRsZUdyaWRCdG5DbGljayhidG5OYW1lLCBhY3RpdmVSb3csIGlkLCBkb2NUeXBlSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGJ0bk5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsaXNhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdtdXVkYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVSb3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdrdXN0dXRhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlUm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWaWdhbmUgY2xpY2sgLiAnLCBidG5OYW1lLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogINGD0L/RgNCw0LLQu9C10L3QuNC1INC80L7QtNCw0LvRjNC90YvQvCDQvtC60L3QvtC8XHJcbiAgICAgICAgICogQHBhcmFtIGdyaWRFdmVudFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVHcmlkUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUdyaWRSb3coZ3JpZEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ3JpZFJvd0VkaXQ6IHRydWUsIGdyaWRSb3dFdmVudDogZ3JpZEV2ZW50IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0LTQvtCx0LDQstC40YIg0LIg0YHQvtGB0YLQvtGP0L3QuNC1INC90L7QstGD0Y4g0YHRgtGA0L7QutGDXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FkZFJvdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRSb3coKSB7XG4gICAgICAgICAgICAvL9C10YHQu9C4INC90LUg0LfQsNC00LDQvSDQutC+0L3RhNC40LMg0LPRgNC40LTQsCwg0YLQviDQstC10YDQvdC10YIg0YTQsNC70YzRiFxuICAgICAgICAgICAgaWYgKCF0aGlzLmRvY0RhdGEuZ3JpZENvbmZpZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBncmlkQ29sdW1ucyA9IHRoaXMuZG9jRGF0YS5ncmlkQ29uZmlnLFxuICAgICAgICAgICAgICAgIG5ld1JvdyA9IHt9O1xuXG4gICAgICAgICAgICAvL9GB0L7Qt9C00LDQtNC40Lwg0L7QsdGK0LXQutGCIC0g0YHRgtGA0L7QutGDINCz0YDQuNC00LBcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JpZENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBncmlkQ29sdW1uc1tpXS5pZDtcbiAgICAgICAgICAgICAgICBuZXdSb3dbZmllbGRdID0gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld1Jvdy5pZCA9ICdORVcnICsgTWF0aC5yYW5kb20oKTsgLy8g0LPQtdC90LXRgNC40Lwg0L3QvtCy0L7QtSDQuNC0XG5cbiAgICAgICAgICAgIHRoaXMuZ3JpZFJvd0RhdGEgPSBuZXdSb3c7XG5cbiAgICAgICAgICAgIC8vINC+0YLQutGA0L7QtdC8INC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyaWRSb3dFZGl0OiB0cnVlLCBncmlkUm93RXZlbnQ6ICdhZGQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7RgtC60YDQvtC10YIg0LDQutGC0LjQstC90YPRjiDRgdGC0YDQvtC60YMg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y9cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZWRpdFJvdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlZGl0Um93KCkge1xuICAgICAgICAgICAgdGhpcy5ncmlkUm93RGF0YSA9IHRoaXMuZG9jRGF0YS5ncmlkRGF0YVt0aGlzLnJlZnNbJ2RhdGEtZ3JpZCddLnN0YXRlLmFjdGl2ZVJvd107XG5cbiAgICAgICAgICAgIC8vINC+0YLQutGA0L7QtdC8INC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyaWRSb3dFZGl0OiB0cnVlLCBncmlkUm93RXZlbnQ6ICdlZGl0JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINGD0LTQsNC70LjRgiDQsNC60YLQuNCy0L3Rg9GOINGB0YLRgNC+0LrRg1xyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZWxldGVSb3cnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlUm93KCkge1xuICAgICAgICAgICAgdGhpcy5kb2NEYXRhLmdyaWREYXRhLnNwbGljZSh0aGlzLnJlZnNbJ2RhdGEtZ3JpZCddLnN0YXRlLmFjdGl2ZVJvdywgMSk7XG5cbiAgICAgICAgICAgIC8vINC/0LXRgNC10YDQsNGB0YfQtdGCINC40YLQvtCz0L7QslxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMucmVjYWxjRG9jKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZWNhbGNEb2MoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vINC40LfQvNC10L3QuNC8INGB0L7RgdGC0L7Rj9C90LjQtVxuICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINGB0YLRgNC+0Log0LPRgNC40LTQsFxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUdyaWRSb3dJbnB1dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVHcmlkUm93SW5wdXQobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZWEgPSB0aGlzLmRvY0RhdGEuZ3JpZENvbmZpZy5maWx0ZXIoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuaWQgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGNvbHVtblR5cGUgPSByZWEubGVuZ3RoICYmIHJlYVswXS50eXBlID8gcmVhWzBdLnR5cGUgOiAndGV4dCc7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoY29sdW1uVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRSb3dEYXRhW25hbWVdID0gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncmlkUm93RGF0YVtuYW1lXSA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFJvd0RhdGFbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVHcmlkUm93KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQvtGC0YHQu9C10LbQuNCy0LDQtdC8INC40LfQvNC10L3QtdC90LjRjyDQtNCw0L3QvdGL0YUg0L3QsCDRhNC+0YDQvNC1XHJcbiAgICAgICAgICogQHBhcmFtIG5hbWVcclxuICAgICAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlR3JpZFJvd0NoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVHcmlkUm93Q2hhbmdlKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmdyaWRSb3dEYXRhW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlR3JpZFJvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogd2lsbCBjaGVjayB2YWx1ZXMgb24gdGhlIGZvcm0gYW5kIHJldHVybiBzdHJpbmcgd2l0aCB3YXJuaW5nXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ZhbGlkYXRlR3JpZFJvdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZUdyaWRSb3coKSB7XG4gICAgICAgICAgICB2YXIgd2FybmluZyA9ICcnO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5ncmlkVmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgd2FybmluZyA9IHRoaXMucHJvcHMuZ3JpZFZhbGlkYXRvcih0aGlzLmdyaWRSb3dEYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdhcm5pbmcubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgIC8vINC10YHRgtGMINC/0YDQvtCx0LvQtdC80YtcbiAgICAgICAgICAgICAgICB3YXJuaW5nID0gJ9Ce0YLRgdGD0YLRgdCy0YPRjtGCINC00LDQvdC90YvQtTonICsgd2FybmluZztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNoZWNrZWQ6IHRydWUsIGdyaWRXYXJuaW5nOiB3YXJuaW5nIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7RgtGA0LDQsdC+0YLQsNC10LwgT2sg0LjQtyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsFxyXG4gICAgICAgICAqIEBwYXJhbSBidG5FdmVudFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUNsaWNrKGJ0bkV2ZW50LCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBzaG93TW9kYWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChidG5FdmVudCA9PT0gJ09rJykge1xuICAgICAgICAgICAgICAgIC8vINC40YnQtdC8INC/0L4g0LjQtCDRgdGC0YDQvtC60YMg0LIg0LTQsNC90L3Ri9GFINCz0YDQuNC00LAsINC10YHQu9C4INC90LXRgiwg0YLQviDQtNC+0LHQsNCy0LjQvCDRgdGC0YDQvtC60YNcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZG9jRGF0YS5ncmlkRGF0YS5sZW5ndGggfHwgIXRoaXMuZG9jRGF0YS5ncmlkRGF0YS5zb21lKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5pZCA9PT0gX3RoaXMxMi5ncmlkUm93RGF0YS5pZDtcbiAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyDQstGB0YLQsNCy0LrQsCDQvdC+0LLQvtC5INGB0YLRgNC+0LrQuFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY0RhdGEuZ3JpZERhdGEuc3BsaWNlKDAsIDAsIHRoaXMuZ3JpZFJvd0RhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jRGF0YS5ncmlkRGF0YSA9IHRoaXMuZG9jRGF0YS5ncmlkRGF0YS5tYXAoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5pZCA9PT0gX3RoaXMxMi5ncmlkUm93RGF0YS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINC90LDRiNC70LgsINC30LDQvNC10YnQsNC10LxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMi5ncmlkUm93RGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2hvd01vZGFsID0gISF0aGlzLnN0YXRlLndhcm5pbmc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnJlY2FsY0RvYykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVjYWxjRG9jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ3JpZFJvd0VkaXQ6IHNob3dNb2RhbCB9KTtcbiAgICAgICAgICAgIHJldHVybiBzaG93TW9kYWw7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19iaW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9iaW5kKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWV0aG9kcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgICAgIG1ldGhvZHNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzMTNbbWV0aG9kXSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczEzW21ldGhvZF0gPSBfdGhpczEzW21ldGhvZF0uYmluZChfdGhpczEzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60Lgg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICAgICAgICAgKiBAcGFyYW0gYnRuRXZlbnRcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxQYWdlQnRuQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kYWxQYWdlQnRuQ2xpY2soYnRuRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblxuICAgICAgICAgICAgLy/Qv9C+0LvRg9GH0LjQvCDQt9C90LDRh9C10L3QuNC1XG4gICAgICAgICAgICB2YXIgZG9jSWQgPSB0aGlzLnNlcnZlclZhbGlkYXRpb25bMF0ucmVzdWx0O1xuXG4gICAgICAgICAgICAvLyDQvtCx0L3Rg9C70LjQvCDQuNGC0L7QsyDQstCw0LvQuNC00LDRhtC40LhcbiAgICAgICAgICAgIHRoaXMuc2VydmVyVmFsaWRhdGlvbiA9IFtdO1xuXG4gICAgICAgICAgICBpZiAoYnRuRXZlbnQgPT09ICdPaycpIHtcbiAgICAgICAgICAgICAgICAvLyDRgNC10LTQsNC50YDQtdC60YJcbiAgICAgICAgICAgICAgICAvLyBrb29zdGF0dWQgdXVzIGRvayxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnLycgKyB0aGlzLnByb3BzLm1vZHVsZSArICcvJyArIHRoaXMucHJvcHMuZG9jVHlwZUlkICsgJy8nICsgZG9jSWQpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAnLycgKyB0aGlzLnByb3BzLm1vZHVsZSArICcvJyArIHRoaXMucHJvcHMuZG9jVHlwZUlkICsgJy8nICsgZG9jSWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnJlcGxhY2UoJy9yZWxvYWQnKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5wcm9wcy5oaXN0b3J5LnJlcGxhY2UoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8v0L/QvtC40YHQuiDQvdCw0LfQstCw0L3QuNGPINGA0LXQs9C40YHRgtGA0LBcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RG9jdW1lbnROYW1lJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERvY3VtZW50TmFtZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczE1ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGRvY1R5cGUgPSBEb2NDb250ZXh0WydtZW51J10uZmluZChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5rb29kID09PSBfdGhpczE1LnByb3BzLmRvY1R5cGVJZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGRvY1R5cGUpIHtcbiAgICAgICAgICAgICAgICBEb2NDb250ZXh0LnBhZ2VOYW1lID0gZG9jVHlwZS5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0YPQsdC10YDQtdGCINC+0LrQvdC+INGBINC+0YLRh9C10YLQvtC8XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUmVwb3J0ZVBhZ2VCdG5DbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb2RhbFJlcG9ydGVQYWdlQnRuQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBpc1JlcG9ydCA9IGV2ZW50ICYmIGV2ZW50ID09ICdPaycgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNSZXBvcnQ6IGlzUmVwb3J0IH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERvY3VtZW50VGVtcGxhdGU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbkRvY3VtZW50VGVtcGxhdGUucHJvcFR5cGVzID0ge1xuICAgIGluaXREYXRhOiBQcm9wVHlwZXMub2JqZWN0LCAvL9Ch0L7QtNC10YDQttCw0L3QuNC1INC00L7QutGD0LzQtdC90YLQsFxuICAgIHJlcXVpcmVkRmllbGRzOiBQcm9wVHlwZXMuYXJyYXksIC8vINC+0LHRj9C30LDRgtC10LvRjNC90YvQtSDQv9C+0LvRj1xuICAgIGVkaXRlZDogUHJvcFR5cGVzLmJvb2wsIC8v0YDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG4gICAgZG9jVHlwZUlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsIC8v0YLQuNC/INC00L7QutGD0LzQtdC90YLQsFxuICAgIGRvY0lkOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsIC8vaWQg0LTQvtC60YPQvNC10L3RgtCwXG4gICAgbGliczogUHJvcFR5cGVzLmFycmF5LCAvL9GB0L/QuNGB0L7QuiDQsdC40LHQu9C40L7RgtC10LpcbiAgICByZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsIC8v0YfQsNGB0YLQvdGL0LUg0LrQvtC80L/QvtC90LXRgtGLINC00L7QutGD0LzQtdC90YLQsFxuICAgIHJlY2FsY0RvYzogUHJvcFR5cGVzLmZ1bmMsIC8v0L/QtdGA0LXRgNCw0YHRh9C10YIg0YHRg9C80Lwg0LTQvtC60YPQvNC10L3RgtCwXG4gICAgZm9jdXNFbGVtZW50OiBQcm9wVHlwZXMuc3RyaW5nIC8v0LXQu9C10LzQtdC90YIg0L3QsCDQutC+0YLQvtGA0YvQuSDQsdGD0LTQtdGCINC+0YLQtNCw0L0g0YTQvtC60YPRgSDQv9GA0Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQuFxufTtcblxuRG9jdW1lbnRUZW1wbGF0ZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgaW5pdERhdGE6IFtdLFxuICAgIGRvY0lkOiAwLFxuICAgIGVkaXRlZDogZmFsc2UsXG4gICAgcmVxdWlyZWRGaWVsZHM6IFtdLFxuICAgIHBhZ2VzOiBbXSxcbiAgICBsaWJzOiBbXSxcbiAgICBpc0Rpc2FibGVTYXZlOiBmYWxzZSxcbiAgICBpc0dyaWREYXRhU2F2ZTogZmFsc2UsXG4gICAgcmVsb2FkOiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb2N1bWVudFRlbXBsYXRlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9kb2N1bWVudFRlbXBsYXRlL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMTcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17QVJWOntzZWxlY3Q6WydrYXN1dGFqYScsJ2FydmVzdGFqYScsJ3ZhYXRsZWphJywncGVha2FzdXRhamEnXSxhZGQ6WydrYXN1dGFqYScsJ3BlYWthc3V0YWphJ10sZWRpdDpbJ2thc3V0YWphJywncGVha2FzdXRhamEnXSxkZWxldGU6WydrYXN1dGFqYScsJ3BlYWthc3V0YWphJ119LFNNSzp7c2VsZWN0Olsna2FzdXRhamEnLCdhcnZlc3RhamEnLCd2YWF0bGVqYScsJ3BlYWthc3V0YWphJ10sYWRkOlsna2FzdXRhamEnLCdwZWFrYXN1dGFqYSddLGVkaXQ6WydrYXN1dGFqYScsJ3BlYWthc3V0YWphJ10sZGVsZXRlOlsna2FzdXRhamEnLCdwZWFrYXN1dGFqYSddLGltcG9ydDpbJ2FkbWluJ119LFBBTktfVlY6e3NlbGVjdDpbJ2thc3V0YWphJywnYXJ2ZXN0YWphJywndmFhdGxlamEnLCdwZWFrYXN1dGFqYSddLGFkZDpbJ2thc3V0YWphJywncGVha2FzdXRhamEnLCdhcnZlc3RhamEnXSxlZGl0Olsna2FzdXRhamEnLCdwZWFrYXN1dGFqYScsJ2FydmVzdGFqYSddLGRlbGV0ZTpbJ2thc3V0YWphJywncGVha2FzdXRhamEnLCdhcnZlc3RhamEnXX0sVk1LOntzZWxlY3Q6WydrYXN1dGFqYScsJ2FydmVzdGFqYScsJ3ZhYXRsZWphJywncGVha2FzdXRhamEnXSxhZGQ6WydrYXN1dGFqYScsJ3BlYWthc3V0YWphJ10sZWRpdDpbJ2thc3V0YWphJywncGVha2FzdXRhamEnXSxkZWxldGU6WydrYXN1dGFqYScsJ3BlYWthc3V0YWphJ119LFZPUkRFUjp7c2VsZWN0Olsna2FzdXRhamEnLCdhcnZlc3RhamEnLCd2YWF0bGVqYScsJ3BlYWthc3V0YWphJ10sYWRkOlsna2FzdXRhamEnLCdwZWFrYXN1dGFqYSddLGVkaXQ6WydrYXN1dGFqYScsJ3BlYWthc3V0YWphJ10sZGVsZXRlOlsna2FzdXRhamEnLCdwZWFrYXN1dGFqYSddfSxTT1JERVI6e3NlbGVjdDpbJ2thc3V0YWphJywnYXJ2ZXN0YWphJywndmFhdGxlamEnLCdwZWFrYXN1dGFqYSddLGFkZDpbJ2thc3V0YWphJywncGVha2FzdXRhamEnXSxlZGl0Olsna2FzdXRhamEnLCdwZWFrYXN1dGFqYSddLGRlbGV0ZTpbJ2thc3V0YWphJywncGVha2FzdXRhamEnXX0sS09OVE9EOntzZWxlY3Q6WydrYXN1dGFqYScsJ3ZhYXRsZWphJywncGVha2FzdXRhamEnXSxhZGQ6WydwZWFrYXN1dGFqYSddLGVkaXQ6WydwZWFrYXN1dGFqYSddLGRlbGV0ZTpbJ3BlYWthc3V0YWphJ119LFRVTk5VUzp7c2VsZWN0Olsna2FzdXRhamEnLCd2YWF0bGVqYScsJ3BlYWthc3V0YWphJ10sYWRkOlsna2FzdXRhamEnXSxlZGl0Olsna2FzdXRhamEnXSxkZWxldGU6WydrYXN1dGFqYSddfSwvL25vbWVuY2xhdHVyZVxuTk9NRU5DTEFUVVJFOntzZWxlY3Q6WydrYXN1dGFqYScsJ3ZhYXRsZWphJywncGVha2FzdXRhamEnXSxhZGQ6WydrYXN1dGFqYSddLGVkaXQ6WydrYXN1dGFqYSddLGRlbGV0ZTpbJ2thc3V0YWphJ10saW1wb3J0OlsnYWRtaW4nXX0sQVNVVFVTRUQ6e3NlbGVjdDpbJ2thc3V0YWphJywndmFhdGxlamEnLCdwZWFrYXN1dGFqYSddLGFkZDpbJ2thc3V0YWphJywnYXJ2ZXN0YWphJ10sZWRpdDpbJ2thc3V0YWphJywnYXJ2ZXN0YWphJ10sZGVsZXRlOlsna2FzdXRhamEnXX0sUFJPSkVDVDp7c2VsZWN0Olsna2FzdXRhamEnLCd2YWF0bGVqYScsJ3BlYWthc3V0YWphJ10sYWRkOlsna2FzdXRhamEnXSxlZGl0Olsna2FzdXRhamEnXSxkZWxldGU6WydrYXN1dGFqYSddfSxBUlRJS0tFTDp7c2VsZWN0Olsna2FzdXRhamEnLCd2YWF0bGVqYScsJ3BlYWthc3V0YWphJ10sYWRkOlsna2FzdXRhamEnXSxlZGl0Olsna2FzdXRhamEnXSxkZWxldGU6WydrYXN1dGFqYSddfSxBTExJS0FTOntzZWxlY3Q6WydrYXN1dGFqYScsJ3ZhYXRsZWphJywncGVha2FzdXRhamEnXSxhZGQ6WydrYXN1dGFqYSddLGVkaXQ6WydrYXN1dGFqYSddLGRlbGV0ZTpbJ2thc3V0YWphJ119LFRFR0VWOntzZWxlY3Q6WydrYXN1dGFqYScsJ3ZhYXRsZWphJywncGVha2FzdXRhamEnXSxhZGQ6WydrYXN1dGFqYSddLGVkaXQ6WydrYXN1dGFqYSddLGRlbGV0ZTpbJ2thc3V0YWphJ119LC8vYXN1dHVzZV9saWlrXG5BU1VUVVNFX0xJSUs6e3NlbGVjdDpbJ2FydmVzdGFqYSddLGFkZDpbJ2FydmVzdGFqYSddLGVkaXQ6WydhcnZlc3RhamEnXSxkZWxldGU6WydhcnZlc3RhamEnXX0sLy9rb29saXR1c2VfbGlpa1xuS09PTElUVVNFX0xJSUs6e3NlbGVjdDpbJ2FydmVzdGFqYSddLGFkZDpbJ2thc3V0YWphJ10sZWRpdDpbJ2thc3V0YWphJ10sZGVsZXRlOlsna2FzdXRhamEnXX0sLy9rb29saXR1c2VfdHl5cFxuS09PTElUVVNFX1RZWVA6e3NlbGVjdDpbJ2FydmVzdGFqYSddLGFkZDpbJ2FydmVzdGFqYSddLGVkaXQ6WydhcnZlc3RhamEnXSxkZWxldGU6WydhcnZlc3RhamEnXX0sVEVBVElTOntzZWxlY3Q6WydhcnZlc3RhamEnXSxhZGQ6WydhcnZlc3RhamEnXSxlZGl0OlsnYXJ2ZXN0YWphJ10sZGVsZXRlOlsnYXJ2ZXN0YWphJ119LExBUFM6e3NlbGVjdDpbJ2FydmVzdGFqYSddLGFkZDpbJ2FydmVzdGFqYSddLGVkaXQ6WydhcnZlc3RhamEnXSxkZWxldGU6WydhcnZlc3RhamEnXSxrb29zdGFBcnZlOlsna2FzdXRhamEnXSxrb29zdGFFdHRlbWFrc3VBcnZlZDpbJ2thc3V0YWphJ10sa29vc3RhRXR0ZW1ha3N1QXJ2ZTpbJ2thc3V0YWphJ10sYXJ2ZXN0YVRhYWJlbDpbJ2FydmVzdGFqYSddLGltcG9ydExhcHNlZDpbJ2FkbWluJ10saW1wb3J0VmlpdGVucjpbJ2FkbWluJ119LFZBTkVNOntzZWxlY3Q6WydhcnZlc3RhamEnXSxhZGQ6WydhcnZlc3RhamEnXSxlZGl0OlsnYXJ2ZXN0YWphJ10sZGVsZXRlOlsnYXJ2ZXN0YWphJ10saW1wb3J0VmFuZW1hZDpbJ2FkbWluJ10saW1wb3J0VmFuZW1hdGVSZWdpc3RlcjpbJ2FkbWluJ10saW1wb3J0TGVwaW5ndWQ6WydhZG1pbiddfSxMQVBTRV9LQUFSVDp7c2VsZWN0OlsnYXJ2ZXN0YWphJ10sYWRkOlsnYXJ2ZXN0YWphJ10sZWRpdDpbJ2FydmVzdGFqYSddLGRlbGV0ZTpbJ2FydmVzdGFqYSddLGltcG9ydFRlZW51c2VkOlsnYWRtaW4nXSxtdXVkYUV0dGVtYWtzdVBlcmlvZDpbJ2FydmVzdGFqYSddLG11dWRhVGVlbnVzdGVUYWh0YWVnOlsnYXJ2ZXN0YWphJ119LExBUFNFX1RBQUJFTDp7c2VsZWN0OlsnYXJ2ZXN0YWphJ10sYWRkOlsnYXJ2ZXN0YWphJ10sZWRpdDpbJ2FydmVzdGFqYSddLGRlbGV0ZTpbJ2FydmVzdGFqYSddLGltcG9ydFRhYWJlbDpbJ2FkbWluJ119LFBBRVZBX1RBQUJFTDp7c2VsZWN0OlsnYXJ2ZXN0YWphJ10sYWRkOlsnYXJ2ZXN0YWphJ10sZWRpdDpbJ2FydmVzdGFqYSddLGRlbGV0ZTpbJ2FydmVzdGFqYSddLGFydmVzdGFQYWV2YVRhYWJlbDpbJ2FydmVzdGFqYSddfSxMQVBTRV9HUlVQUDp7c2VsZWN0OlsnYXJ2ZXN0YWphJ10sYWRkOlsnYXJ2ZXN0YWphJ10sZWRpdDpbJ2FydmVzdGFqYSddLGRlbGV0ZTpbJ2FydmVzdGFqYSddLHV1ZW5kYUhpbm5hZDpbJ2FydmVzdGFqYSddLGltcG9ydEdyb3VwczpbJ2FkbWluJ10sYXJ2ZXN0YUtvbmRUYWFiZWw6WydhcnZlc3RhamEnXX19O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29uZmlnL2RvY19yaWdodHMuanNcbi8vIG1vZHVsZSBpZCA9IDE3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7Ly8gd2lsbCBjaGVjayByaWdodHMgZm9yIGFjdGlvblxudmFyIGNoZWNrUmlnaHRzPWZ1bmN0aW9uIGNoZWNrUmlnaHRzKHVzZXJSb2xlcyxkb2NSaWdodHMsYWN0aW9uKXt2YXIgaXNfYWNjZXB0ZWQ9ZmFsc2U7aWYoZG9jUmlnaHRzJiZkb2NSaWdodHNbYWN0aW9uXSl7ZG9jUmlnaHRzW2FjdGlvbl0uZm9yRWFjaChmdW5jdGlvbihyb2xlKXsvLyByYWFtYXR1cGlkYWphZFxuaXNfYWNjZXB0ZWQ9dXNlclJvbGVzJiZ1c2VyUm9sZXMuaXNfa2FzdXRhamEmJnJvbGU9PSdrYXN1dGFqYSc/dHJ1ZTppc19hY2NlcHRlZDtpZighaXNfYWNjZXB0ZWQpe2lzX2FjY2VwdGVkPXVzZXJSb2xlcyYmdXNlclJvbGVzLmlzX3BlYWthc3V0YWphJiZyb2xlPT0ncGVha2FzdXRhamEnP3RydWU6aXNfYWNjZXB0ZWQ7fS8vIGFydmVzdGFqYWRcbmlmKCFpc19hY2NlcHRlZCl7aXNfYWNjZXB0ZWQ9dXNlclJvbGVzJiZ1c2VyUm9sZXMuaXNfYXJ2ZXN0YWphJiZyb2xlPT0nYXJ2ZXN0YWphJz90cnVlOmlzX2FjY2VwdGVkO30vLyBhZG1pbmlkXG5pZighaXNfYWNjZXB0ZWQpe2lzX2FjY2VwdGVkPXVzZXJSb2xlcyYmdXNlclJvbGVzLmlzX2FkbWluJiZyb2xlPT0nYWRtaW4nP3RydWU6aXNfYWNjZXB0ZWQ7fX0pO31lbHNley8vINC10YHQu9C4INC90LXRgiDQvtCz0YDQsNC90LjRh9C10L3QuNC5XG5pc19hY2NlcHRlZD10cnVlO31yZXR1cm4gaXNfYWNjZXB0ZWQ7fTttb2R1bGUuZXhwb3J0cz1jaGVja1JpZ2h0cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2xpYnMvY2hlY2tSaWdodHMuanNcbi8vIG1vZHVsZSBpZCA9IDE3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e1JFQ09SRFNfTElNSVQ6MTAwMCwvLyDRgtCw0YHQutC4XG5ldmVudHM6e0xBUFM6W3tuYW1lOidUYWJlbGkga29vc3RhbWluZScsbWV0aG9kOidhcnZlc3RhVGFhYmVsJyxkb2NUeXBlSWQ6J2xhcHNlX3RhYWJlbCd9LHtuYW1lOidBcnZldGUga29vc3RhbWluZScsbWV0aG9kOidrb29zdGFBcnZlZCcsZG9jVHlwZUlkOidhcnYnfSx7bmFtZTonRXR0ZW1ha3N1YXJ2ZSBrb29zdGFtaW5lJyxtZXRob2Q6J2tvb3N0YUV0dGVtYWtzdUFydmVkJyxkb2NUeXBlSWQ6J2Fydid9XX0sLy8g0LvQvtCz0LhcbmxvZ3M6e2dyaWRDb25maWc6W3tpZDpcImthc3V0YWphXCIsbmFtZTpcIkthc3V0YWphXCIsd2lkdGg6XCIyMCVcIixzaG93OnRydWV9LHtpZDpcImtvb3N0YXR1ZFwiLG5hbWU6XCJLb29zdGF0dWRcIix3aWR0aDpcIjE1JVwifSx7aWQ6XCJtdXVkYXR1ZFwiLG5hbWU6XCJNdXVkYXR1ZFwiLHdpZHRoOlwiMTUlXCJ9LHtpZDpcInByaW5kaXR1ZFwiLG5hbWU6XCJQcmluZGl0dWRcIix3aWR0aDpcIjE1JVwifSx7aWQ6XCJlbWFpbFwiLG5hbWU6XCJNZWlsaXR1ZFwiLHdpZHRoOlwiMTUlXCJ9LHtpZDpcImVhcnZlXCIsbmFtZTpcImUtQXJ2ZVwiLHdpZHRoOlwiMTUlXCJ9LHtpZDpcImt1c3R1dGF0dWRcIixuYW1lOlwiS3VzdHV0YXR1ZFwiLHdpZHRoOlwiMTUlXCJ9XX0sLy8g0L7RgtGH0LXRgiDQvtCxINC40YHQv9C+0LvQvdC10L3QuNC4XG50dWxlbXVzZWQ6e2dyaWRDb25maWc6W3tpZDpcImlkXCIsbmFtZTpcImlkXCIsd2lkdGg6XCI1JVwiLHNob3c6ZmFsc2V9LHtpZDona2FzX3ZpZ2FuZScsbmFtZTonU3RhYXR1cycsd2lkdGg6JzUlJyxzaG93OnRydWUseWVzQmFja2dyb3VuZENvbG9yOidyZWQnLG5vQmFja2dyb3VuZENvbG9yOidncmVlbid9LHtpZDpcInJlc3VsdFwiLG5hbWU6XCJUdWxlbXVzZWRcIix3aWR0aDpcIjEwJVwiLHNob3c6ZmFsc2V9LHtpZDpcImVycm9yX21lc3NhZ2VcIixuYW1lOlwiVGVhdGlzXCIsd2lkdGg6XCI3MCVcIixzaG93OnRydWV9LHtpZDpcInZpaXRlbnJcIixuYW1lOlwiVmlpdGVudW1iZXJcIix3aWR0aDpcIjE1JVwiLHNob3c6dHJ1ZX1dfSwvLyDRgdGH0LXRgtCwXG5BUlY6e0xJQl9PQkpTOlt7aWQ6J2tvbnRvZCcsZmlsdGVyOicnfSx7aWQ6J2Rva1Byb3BzJyxmaWx0ZXI6J3doZXJlIGtvb2QgPSBcXCdBUlZcXCcnfSx7aWQ6J3VzZXJzJyxmaWx0ZXI6Jyd9LHtpZDondHVubnVzJyxmaWx0ZXI6Jyd9LHtpZDoncHJvamVjdCcsZmlsdGVyOicnfSx7aWQ6J2FydGlra2VsJyxmaWx0ZXI6Jyd9LHtpZDonYWxsaWthcycsZmlsdGVyOicnfSx7aWQ6J3RlZ2V2JyxmaWx0ZXI6Jyd9LHtpZDonYWEnLGZpbHRlcjonJ30se2lkOidub21lbmNsYXR1cmUnLGZpbHRlcjond2hlcmUgZG9rID0gXFwnQVJWXFwnJ30se2lkOidsYXBzZV9ncnVwcCcsZmlsdGVyOicnfV19LE5PTUVOQ0xBVFVSRTp7TElCUkFSSUVTOlt7aWQ6J2tvbnRvZCcsZmlsdGVyOicnfSx7aWQ6J3R1bm51cycsZmlsdGVyOicnfSx7aWQ6J3Byb2plY3QnLGZpbHRlcjonJ30se2lkOidkb2N1bWVudCcsZmlsdGVyOid3aGVyZSBrb29kOjpURVhUIGluIChcXCdBUlZcXCcsXFwnVk1LXFwnLFxcJ1NNS1xcJyknfSx7aWQ6J2FydGlra2VsJyxmaWx0ZXI6Jyd9LHtpZDonYWxsaWthcycsZmlsdGVyOicnfSx7aWQ6J3RlZ2V2JyxmaWx0ZXI6Jyd9LHtpZDona29vbGl0dXNlX2xpaWsnLGZpbHRlcjonJ31dLFRBWElFUzpbe2lkOjEsa29vZDpudWxsLG5hbWU6Jy0lJ30se2lkOjIsa29vZDonMCcsbmFtZTonMCUnfSx7aWQ6Myxrb29kOic1JyxuYW1lOic1JSd9LHtpZDo0LGtvb2Q6JzEwJyxuYW1lOicxMCUnfSx7aWQ6NSxrb29kOicxOCcsbmFtZTonMTglJ30se2lkOjYsa29vZDonMjAnLG5hbWU6JzIwJSd9XSxVSElLOlt7aWQ6MSxrb29kOidtdXVkJyxuYW1lOidNdXVkJ30se2lkOjIsa29vZDondGsnLG5hbWU6J1TDvGtrJ30se2lkOjMsa29vZDoncMOkZXYnLG5hbWU6J1DDpGV2J30se2lkOjQsa29vZDona3V1JyxuYW1lOidLdXUnfSx7aWQ6NSxrb29kOidhYXN0YScsbmFtZTonQWFzdGEnfV0sQUxHT1JJVE1JRDpbe2lkOjEsa29vZDoncMOkZXYnLG5hbWU6J1DDpGV2J30se2lkOjIsa29vZDona29uc3RhbnRuZScsbmFtZTonS29uc3RhbnRuZSd9LHtpZDozLGtvb2Q6J2vDvGxhc3RhbWluZScsbmFtZTonS8O8bGFzdGFtaW5lJ31dLFRZWVA6W3tpZDoyLGtvb2Q6J1NPT0RVU1RVUycsbmFtZTonICd9XX0sUkVLVjp7TElCX09CSlM6W3tpZDona29udG9kJyxmaWx0ZXI6Jyd9LHtpZDonYXN1dHVzZV9saWlrJyxmaWx0ZXI6Jyd9XX0sTEFQU0VfR1JVUFA6e0xJQlJBUklFUzpbe2lkOidub21lbmNsYXR1cmUnLGZpbHRlcjond2hlcmUgZG9rID0gXFwnQVJWXFwnJ30se2lkOidrb29saXR1c2VfdHl5cCcsZmlsdGVyOicnfV19LExBUFNFRF9LQUFSVDp7TElCUkFSSUVTOlt7aWQ6J3R1bm51cycsZmlsdGVyOicnfSx7aWQ6J25vbWVuY2xhdHVyZScsZmlsdGVyOid3aGVyZSBkb2sgPSBcXCdBUlZcXCcnfSx7aWQ6J2xhcHNlX2dydXBwJyxmaWx0ZXI6Jyd9XX0sLy8g0L3QvtC00LAg0LTQu9GPINGB0L/RgNCw0LLQvtGH0L3QuNC60L7QslxuTElCUzp7UE9TVF9MT0FEX0xJQlNfVVJMOicvbmV3QXBpL2xvYWRMaWJzJ30sLy8g0L3QvtC00LAg0LTQu9GPINC00L7QutGD0LzQtdC90YLQvtCyXG5ET0NTOntQT1NUX0xPQURfRE9DU19VUkw6Jy9uZXdBcGkvZG9jdW1lbnQnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb25maWcvY29uc3RhbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgUGFnZUxhYmVsID0gcmVxdWlyZSgnLi4vcGFnZS1sYWJlbC9wYWdlLWxhYmVsLmpzeCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vZm9ybS1zdHlsZXMnKTtcblxudmFyIEZvcm0gPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoRm9ybSwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gRm9ybShwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9ybSk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZvcm0uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGb3JtKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLmhhbmRsZVBhZ2VDbGljayA9IF90aGlzLmhhbmRsZVBhZ2VDbGljay5iaW5kKF90aGlzKTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINCy0LrQu9Cw0LTQutC4XHJcbiAgICAgKiBAcGFyYW0gcGFnZVxyXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhGb3JtLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVQYWdlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUGFnZUNsaWNrKHBhZ2UpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaGFuZGxlUGFnZUNsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVQYWdlQ2xpY2socGFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHBhZ2VzID0gdGhpcy5wcm9wcy5wYWdlcztcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgcGFnZXMubGVuZ3RoID8gcGFnZXMubWFwKGZ1bmN0aW9uIChwYWdlLCBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGFnZUxhYmVsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogaWR4ID09IDAgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVQYWdlQ2xpY2s6IF90aGlzMi5oYW5kbGVQYWdlQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IF90aGlzMi5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3BhZ2UtJyArIGlkeCB9KTtcbiAgICAgICAgICAgICAgICB9KSA6IG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5wYWdlIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEZvcm07XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5Gb3JtLnByb3BUeXBlcyA9IHtcbiAgICBwYWdlczogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG4gICAgaGFuZGxlUGFnZUNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5cbkZvcm0uZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZS52YWx1ZU9mKCksXG4gICAgcGFnZXM6IFtdXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZvcm07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2Zvcm0vZm9ybS5qc3hcbi8vIG1vZHVsZSBpZCA9IDE3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuL3BhZ2UtbGFiZWwtc3R5bGVzJyk7XG5cbnZhciBQYWdlTGFiZWwgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoUGFnZUxhYmVsLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBQYWdlTGFiZWwocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhZ2VMYWJlbCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFBhZ2VMYWJlbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFBhZ2VMYWJlbCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZFxuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8vIHdpbGwgdXBkYXRlIHN0YXRlIGlmIHByb3BzIGNoYW5nZWRcblxuXG4gICAgX2NyZWF0ZUNsYXNzKFBhZ2VMYWJlbCwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7XG4gICAgICAgICAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvdCwINGB0L7QsdGL0YLQuNC1INC60LvQuNC6LCDQv9C+0LTQs9GA0YPQttCw0LXQvCDRgdCy0Y/Qt9Cw0L3QvdGL0Lkg0LTQvtC60YPQvNC10L3RglxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhZ2UgPSB0aGlzLnByb3BzLnBhZ2U7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmhhbmRsZVBhZ2VDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGFuZGxlUGFnZUNsaWNrKHBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSB0aGlzLnByb3BzLnBhZ2UsXG4gICAgICAgICAgICAgICAgc3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMucGFnZUxhYmVsLCB0aGlzLnByb3BzLmFjdGl2ZSA/IHsgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnIH0gOiB7fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnN0YXRlLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdwYWdlTGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrIH0sXG4gICAgICAgICAgICAgICAgcGFnZS5wYWdlTmFtZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLmRpc2FibGVkICE9PSBwcmV2U3RhdGUuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXNhYmxlZDogbmV4dFByb3BzLmRpc2FibGVkIH07XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUGFnZUxhYmVsO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuUGFnZUxhYmVsLnByb3BUeXBlcyA9IHtcbiAgICBoYW5kbGVQYWdlQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxuICAgIHBhZ2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgYWN0aXZlOiBQcm9wVHlwZXMuYm9vbFxufTtcblxuUGFnZUxhYmVsLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgYWN0aXZlOiB0cnVlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBhZ2VMYWJlbDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvcGFnZS1sYWJlbC9wYWdlLWxhYmVsLmpzeFxuLy8gbW9kdWxlIGlkID0gMTc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17cGFnZUxhYmVsOntib3JkZXI6JzFweCBzb2xpZCBsaWdodEdyZXknLGJvcmRlclJhZGl1czonM3B4Jyxib3JkZXJCb3R0b206JzFweCBzb2xpZCB3aGl0ZScsbWFyZ2luOic1cHgnLG1hcmdpbkxlZnQ6Jy03cHgnLHBhZGRpbmc6JzJweCAxMHB4IDJweCAxMHB4J319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9wYWdlLWxhYmVsL3BhZ2UtbGFiZWwtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtwYWdlOnsvKlxyXG4gICAgICAgIGJvcmRlcjonMXB4IHNvbGlkIGJsYWNrJyxcclxuKi9ib3JkZXJSYWRpdXM6JzNweCd9LGljb25zOnthZGQ6J2ltYWdlcy9pY29ucy9hZGQucG5nJyxlZGl0OidpbWFnZXMvaWNvbnMvZWRpdC5wbmcnLGRlbGV0ZTonaW1hZ2VzL2ljb25zL2RlbGV0ZS5wbmcnLGZpbHRlcjonaW1hZ2VzL2ljb25zL2ZpbHRlci5wbmcnLHByaW50OidpbWFnZXMvaWNvbnMvcHJpbnQucG5nJyxvazonaW1hZ2VzL2ljb25zL29rLnBuZycsY2FuY2VsOidpbWFnZXMvaWNvbnMvY2FuY2VsLnBuZyd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvZm9ybS9mb3JtLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuLy9jb25zdCB7d2l0aFJvdXRlcn0gPSByZXF1aXJlKCdyZWFjdC1yb3V0ZXItZG9tJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgVG9vbGJhckNvbnRhaW5lciA9IHJlcXVpcmUoJy4vLi4vdG9vbGJhci1jb250YWluZXIvdG9vbGJhci1jb250YWluZXIuanN4JyksXG4gICAgQnRuQWRkID0gcmVxdWlyZSgnLi8uLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWFkZC9idXR0b24tcmVnaXN0ZXItYWRkLmpzeCcpLFxuICAgIEJ0bkVkaXQgPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZWRpdC9idXR0b24tcmVnaXN0ZXItZWRpdC5qc3gnKSxcbiAgICBCdG5TYXZlID0gcmVxdWlyZSgnLi8uLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXNhdmUvYnV0dG9uLXJlZ2lzdGVyLXNhdmUuanN4JyksXG4gICAgQnRuQ2FuY2VsID0gcmVxdWlyZSgnLi8uLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWNhbmNlbC9idXR0b24tcmVnaXN0ZXItY2FuY2VsLmpzeCcpLFxuICAgIEJ0blByaW50ID0gcmVxdWlyZSgnLi8uLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXByaW50L2J1dHRvbi1yZWdpc3Rlci1wcmludC5qc3gnKSxcbiAgICBCdG5FbWFpbCA9IHJlcXVpcmUoJy4vLi4vYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1lbWFpbC9pbmRleC5qc3gnKSxcbiAgICBCdG5QZGYgPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcGRmL2luZGV4LmpzeCcpLFxuICAgIEJ0bkxvZ3MgPSByZXF1aXJlKCcuLy4uL3Nob3ctbG9ncy9pbmRleC5qc3gnKSxcbiAgICBUYXNrV2lkZ2V0ID0gcmVxdWlyZSgnLi8uLi90YXNrLXdpZGdldC90YXNrLXdpZGdldC5qc3gnKTtcblxudmFyIERvY1Rvb2xCYXIgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoRG9jVG9vbEJhciwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gRG9jVG9vbEJhcihwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9jVG9vbEJhcik7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERvY1Rvb2xCYXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEb2NUb29sQmFyKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLmJ0bkVkaXRDbGljayA9IF90aGlzLmJ0bkVkaXRDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuYnRuQWRkQ2xpY2sgPSBfdGhpcy5idG5BZGRDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuYnRuU2F2ZUNsaWNrID0gX3RoaXMuYnRuU2F2ZUNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5idG5DYW5jZWxDbGljayA9IF90aGlzLmJ0bkNhbmNlbENsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5idG5QcmludENsaWNrID0gX3RoaXMuYnRuUHJpbnRDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuYnRuUGRmQ2xpY2sgPSBfdGhpcy5idG5QZGZDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuYnRuRW1haWxDbGljayA9IF90aGlzLmJ0bkVtYWlsQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmJ0bkxvZ3NDbGljayA9IF90aGlzLmJ0bkxvZ3NDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlQnV0dG9uVGFzayA9IF90aGlzLmhhbmRsZUJ1dHRvblRhc2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZVNlbGVjdFRhc2sgPSBfdGhpcy5oYW5kbGVTZWxlY3RUYXNrLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIF90aGlzLmRvY0lkID0gbnVsbDtcblxuICAgICAgICBpZiAocHJvcHMuZG9jSWQpIHtcbiAgICAgICAgICAgIF90aGlzLmRvY0lkID0gcHJvcHMuZG9jSWQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBkb2NTdGF0dXM6IHByb3BzLmRvY1N0YXR1c1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERvY1Rvb2xCYXIsIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaXNFZGl0TW9kZSA9IHRoaXMucHJvcHMuZWRpdGVkLFxuICAgICAgICAgICAgICAgIGlzRG9jRGlzYWJsZWQgPSB0aGlzLnN0YXRlLmRvY1N0YXR1cyA9PT0gMixcbiAgICAgICAgICAgICAgICBkb2NJZCA9IHRoaXMuZG9jSWQ7XG5cbiAgICAgICAgICAgIC8vINC60L3QvtC/0LrQuCDRgNC10LbQuNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQtNC+0LvQttC90Ysg0L/RgNC+0L/QsNGB0YLRjCDQtdGB0LvQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC4INC/0L7QutCw0LfRi9Cy0LDRgtGMINC10YHQu9C4INGA0LDQt9GA0LXRiNC10L3QvlxuICAgICAgICAgICAgdmFyIGthc19hZGQgPSB0aGlzLnByb3BzLnRvb2xiYXJQYXJhbXMgPyB0aGlzLnByb3BzLnRvb2xiYXJQYXJhbXNbJ2J0bkFkZCddLnNob3cgOiB0cnVlO1xuICAgICAgICAgICAgaWYgKGthc19hZGQgJiYgaXNFZGl0TW9kZSkge1xuICAgICAgICAgICAgICAgIGthc19hZGQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBrYXNfZWRpdCA9IHRoaXMucHJvcHMudG9vbGJhclBhcmFtcyA/IHRoaXMucHJvcHMudG9vbGJhclBhcmFtc1snYnRuQWRkJ10uc2hvdyA6IHRydWU7XG4gICAgICAgICAgICBpZiAoa2FzX2VkaXQgJiYgaXNFZGl0TW9kZSkge1xuICAgICAgICAgICAgICAgIGthc19lZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0b29sYmFyUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGJ0bkFkZDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBrYXNfYWRkLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuRWRpdDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBrYXNfZWRpdCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGlzRG9jRGlzYWJsZWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0blByaW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuRW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5TYXZlOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGlzRWRpdE1vZGUgJiYgIWlzRG9jRGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLnRvb2xiYXJQYXJhbXMgJiYgdGhpcy5wcm9wcy50b29sYmFyUGFyYW1zWydidG5TYXZlJ10gPyB0aGlzLnByb3BzLnRvb2xiYXJQYXJhbXNbJ2J0blNhdmUnXS5kaXNhYmxlZCA6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5DYW5jZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogaXNFZGl0TW9kZSAmJiBkb2NJZCAhPT0gMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgVG9vbGJhckNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICB7IHJlZjogJ3Rvb2xiYXJDb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5BZGQsIHsgcmVmOiAnYnRuQWRkJyxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5idG5BZGRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdG9vbGJhclBhcmFtc1snYnRuQWRkJ10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRvb2xiYXJQYXJhbXNbJ2J0bkFkZCddLmRpc2FibGVkIH0pLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuRWRpdCwgeyByZWY6ICdidG5FZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdNdXVkYScsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYnRuRWRpdENsaWNrLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5FZGl0J10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRvb2xiYXJQYXJhbXNbJ2J0bkVkaXQnXS5kaXNhYmxlZCB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blNhdmUsIHsgcmVmOiAnYnRuU2F2ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnU2FsdmVzdGEnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmJ0blNhdmVDbGljayxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdG9vbGJhclBhcmFtc1snYnRuU2F2ZSddLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0b29sYmFyUGFyYW1zWydidG5TYXZlJ10uZGlzYWJsZWQgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5DYW5jZWwsIHsgcmVmOiAnYnRuQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdUw7xoaXN0YScsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYnRuQ2FuY2VsQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXNbJ2J0bkNhbmNlbCddLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0b29sYmFyUGFyYW1zWydidG5DYW5jZWwnXS5kaXNhYmxlZCB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blByaW50LCB7IHJlZjogJ2J0blByaW50JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdUcsO8a2snLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmJ0blByaW50Q2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXNbJ2J0blByaW50J10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRvb2xiYXJQYXJhbXNbJ2J0blByaW50J10uZGlzYWJsZWQgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5FbWFpbCwgeyByZWY6ICdidG5FbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogdGhpcy5wcm9wcy5kb2NUeXBlSWQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYnRuRW1haWxDbGljayxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdG9vbGJhclBhcmFtc1snYnRuRW1haWwnXS5zaG93LFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdG9vbGJhclBhcmFtc1snYnRuRW1haWwnXS5kaXNhYmxlZCB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkxvZ3MsIHsgcmVmOiAnYnRuTG9ncycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMucHJvcHMubG9ncyxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5idG5Mb2dzQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIHNob3c6ICFpc0VkaXRNb2RlIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYnBtLmxlbmd0aCAmJiAhaXNEb2NEaXNhYmxlZCAmJiAhaXNFZGl0TW9kZSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFza1dpZGdldCwgeyByZWY6ICd0YXNrV2lkZ2V0JyxcbiAgICAgICAgICAgICAgICAgICAgdGFza0xpc3Q6IHRoaXMucHJvcHMuYnBtLFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVTZWxlY3RUYXNrOiB0aGlzLmhhbmRsZVNlbGVjdFRhc2ssXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUJ1dHRvblRhc2s6IHRoaXMuaGFuZGxlQnV0dG9uVGFza1xuICAgICAgICAgICAgICAgIH0pIDogbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCS0YvQt9C+0LLQtdGCINC80LXRgtC+0LQg0L/QtdGA0LXRhdC+0LTQsCDQvdCwINC90L7QstGL0Lkg0LTQvtC60YPQvNC10L3RglxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5BZGRDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5BZGRDbGljaygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJ0bkFkZENsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5idG5BZGRDbGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdtZXRob2QgYWRkIG5vdCBleGlzdHMgaW4gcHJvcHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60LggRWRpdFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5FZGl0Q2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuRWRpdENsaWNrKCkge1xuICAgICAgICAgICAgLy8g0L/QtdGA0LXQstC+0LTQuNC8INC00L7QutGD0LzQtdC90YIg0LIg0YDQtdC20LjQvCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPLCDRgdC+0YXRgNCw0L3QtdC9ID0gZmFsc2VcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5kb2NTdGF0dXMgfHwgdGhpcy5wcm9wcy5kb2NTdGF0dXMgPCAyKSB7XG4gICAgICAgICAgICAgICAgLy90aGlzLmRvY0lkXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaGlzdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy9yYWFtYS8nICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJ0bkVkaXRDbGljaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJ0bkVkaXRDbGljaygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ21ldGhvZCBlZGl0IG5vdCBleGlzdHMgaW4gcHJvcHMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0blByaW50Q2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuUHJpbnRDbGljaygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmJ0blByaW50Q2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJ0blByaW50Q2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuUGRmQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuUGRmQ2xpY2soKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5idG5QZGZDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYnRuUGRmQ2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60LggZW1haWxcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuRW1haWxDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5FbWFpbENsaWNrKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYnRuRW1haWxDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYnRuRW1haWxDbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60L3QvtC/0LrQuCBTYXZlXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0blNhdmVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5TYXZlQ2xpY2soKSB7XG4gICAgICAgICAgICAvLyDQstCw0LvQuNC00LDRgtC+0YBcbiAgICAgICAgICAgIHZhciB2YWxpZGF0aW9uTWVzc2FnZSA9IHRoaXMucHJvcHMudmFsaWRhdG9yID8gdGhpcy5wcm9wcy52YWxpZGF0b3IoKSA6ICcnLFxuICAgICAgICAgICAgICAgIGlzVmFsaWQgPSB0aGlzLnByb3BzLnZhbGlkYXRvciA/ICF2YWxpZGF0aW9uTWVzc2FnZSA6IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L/RgNC+0YjQu9C4INCy0LDQu9C40LTQsNGG0LjRjiwg0YLQviDRgdC+0YXRgNCw0L3QtdGP0LxcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5idG5TYXZlQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5idG5TYXZlQ2xpY2soKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdtZXRob2Qgc2F2ZSBub3QgZXhpc3RzIGluIHByb3BzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQgaXMgbm90IHZhbGlkJywgaXNWYWxpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0YHQvtCx0YvRgtC40Y8g0LrQu9C40LrQsCDQtNC70Y8g0LrQvdC+0L/QutC4INCe0YLQutCw0LdcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuQ2FuY2VsQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuQ2FuY2VsQ2xpY2soKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5idG5DYW5jZWxDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYnRuQ2FuY2VsQ2xpY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbWV0aG9kIGNhbmNlbCBub3QgZXhpc3RzIGluIHByb3BzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkxvZ3NDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5Mb2dzQ2xpY2soKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5idG5Mb2dzQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJ0bkxvZ3NDbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVCdXR0b25UYXNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUJ1dHRvblRhc2sodGFza05hbWUsIGtwdiwgZ3J1cHBJZCwgdGVrc3QsIGtvZ3VzKSB7XG4gICAgICAgICAgICAvLyDQuNGI0LXQvCDRgtCw0YHQutGDXG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMucHJvcHMuYnBtLmZpbmQoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3cubmFtZSA9PT0gdGFza05hbWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICAvLyDQvNC10YLQvtC0INCy0YvQt9GL0LLQsNC10YLRgdGPINC/0YDQuCDQstGL0LHQvtGA0LUg0LfQsNC00LDRh9C4XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYnRuVGFza0NsaWNrKHRhc2submFtZSwga3B2LCBncnVwcElkLCB0ZWtzdCwga29ndXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTZWxlY3RUYXNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdFRhc2soZSkge1xuICAgICAgICAgICAgLy8g0LzQtdGC0L7QtCDQstGL0LfRi9Cy0LDQtdGC0YHRjyDQv9GA0Lgg0LLRi9Cx0L7RgNC1INC30LDQtNCw0YfQuFxuICAgICAgICAgICAgdmFyIHRhc2tWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYnRuVGFza0NsaWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuYnRuVGFza0NsaWNrKHRhc2tWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRG9jVG9vbEJhcjtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbkRvY1Rvb2xCYXIucHJvcFR5cGVzID0ge1xuICAgIGJwbTogUHJvcFR5cGVzLmFycmF5LFxuICAgIGVkaXRlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgZG9jU3RhdHVzOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHZhbGlkYXRvcjogUHJvcFR5cGVzLmZ1bmNcbn07XG5cbkRvY1Rvb2xCYXIuZGVmYXVsdFByb3BzID0ge1xuICAgIGJwbTogW10sXG4gICAgZWRpdGVkOiBmYWxzZSxcbiAgICBkb2NTdGF0dXM6IDBcbn07XG5cbi8vbW9kdWxlLmV4cG9ydHMgPSB3aXRoUm91dGVyKERvY1Rvb2xCYXIpO1xubW9kdWxlLmV4cG9ydHMgPSBEb2NUb29sQmFyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9kb2MtdG9vbGJhci9kb2MtdG9vbGJhci5qc3hcbi8vIG1vZHVsZSBpZCA9IDE3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnYWRkJztcblxudmFyIEJ1dHRvblJlZ2lzdGVyQWRkID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvblJlZ2lzdGVyQWRkLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uUmVnaXN0ZXJBZGQocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblJlZ2lzdGVyQWRkKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblJlZ2lzdGVyQWRkLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnV0dG9uUmVnaXN0ZXJBZGQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblJlZ2lzdGVyQWRkLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCdhZGQnKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0xpc2EnLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5BZGQnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5zaG93LFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW0lDT05dIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvblJlZ2lzdGVyQWRkO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuLypcclxuQnV0dG9uUmVnaXN0ZXJBZGQucHJvcFR5cGVzID0ge1xyXG4gICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxyXG59XHJcbiovXG5cbkJ1dHRvblJlZ2lzdGVyQWRkLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc2hvdzogdHJ1ZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25SZWdpc3RlckFkZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1hZGQvYnV0dG9uLXJlZ2lzdGVyLWFkZC5qc3hcbi8vIG1vZHVsZSBpZCA9IDE3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnc2F2ZSc7XG5cbnZhciBCdXR0b25SZWdpc3RlclNhdmUgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uUmVnaXN0ZXJTYXZlLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uUmVnaXN0ZXJTYXZlKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdXR0b25SZWdpc3RlclNhdmUpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCdXR0b25SZWdpc3RlclNhdmUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25SZWdpc3RlclNhdmUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBkaXNhYmxlZDogcHJvcHMuZGlzYWJsZWRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b25SZWdpc3RlclNhdmUsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgICAgIC8vINC00LjRgdC10LnQsdC70LjQvCDQutC90L7Qv9C60YNcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaXNhYmxlZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZGlzYWJsZWQ6IG5leHRQcm9wcy5kaXNhYmxlZCB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5TYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdTYXZlJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5zaG93LFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5zdGF0ZS5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW0lDT05dIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvblJlZ2lzdGVyU2F2ZTtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbkJ1dHRvblJlZ2lzdGVyU2F2ZS5wcm9wVHlwZXMgPSB7XG4gICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5cbkJ1dHRvblJlZ2lzdGVyU2F2ZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uUmVnaXN0ZXJTYXZlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXNhdmUvYnV0dG9uLXJlZ2lzdGVyLXNhdmUuanN4XG4vLyBtb2R1bGUgaWQgPSAxODBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcycpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBJQ09OID0gJ2NhbmNlbCc7XG5cbnZhciBCdXR0b25SZWdpc3RlckNhbmNlbCA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b25SZWdpc3RlckNhbmNlbCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgLy8g0LrQvdC+0L/QutCwINGB0L7Qt9C00LDQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwINCyINGA0LXQs9C40YHRgtGA0LDRhVxuICAgIGZ1bmN0aW9uIEJ1dHRvblJlZ2lzdGVyQ2FuY2VsKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdXR0b25SZWdpc3RlckNhbmNlbCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblJlZ2lzdGVyQ2FuY2VsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnV0dG9uUmVnaXN0ZXJDYW5jZWwpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBkaXNhYmxlZDogcHJvcHMuZGlzYWJsZWRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b25SZWdpc3RlckNhbmNlbCwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMub25DbGljaygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKG5leHRQcm9wcykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpc2FibGVkOiBuZXh0UHJvcHMuZGlzYWJsZWQgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnN0YXRlLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVnaXN0ZXJDYW5jZWw7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5CdXR0b25SZWdpc3RlckNhbmNlbC5wcm9wVHlwZXMgPSB7XG4gICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5cbkJ1dHRvblJlZ2lzdGVyQ2FuY2VsLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc2hvdzogdHJ1ZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25SZWdpc3RlckNhbmNlbDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1jYW5jZWwvYnV0dG9uLXJlZ2lzdGVyLWNhbmNlbC5qc3hcbi8vIG1vZHVsZSBpZCA9IDE4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAncHJpbnQnO1xuXG52YXIgQnV0dG9uUmVnaXN0ZXJQcmludCA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b25SZWdpc3RlclByaW50LCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uUmVnaXN0ZXJQcmludChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uUmVnaXN0ZXJQcmludCk7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCdXR0b25SZWdpc3RlclByaW50Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnV0dG9uUmVnaXN0ZXJQcmludCkpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uUmVnaXN0ZXJQcmludCwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMub25DbGljayh0aGlzLnByb3BzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5QcmludCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVnaXN0ZXJQcmludDtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbi8qXHJcbkJ1dHRvblJlZ2lzdGVyUHJpbnQucHJvcFR5cGVzID0ge1xyXG4gICAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxyXG59XHJcbiovXG5cbkJ1dHRvblJlZ2lzdGVyUHJpbnQuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlLFxuICAgIHZhbHVlOiAnUHJpbnQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblJlZ2lzdGVyUHJpbnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItcHJpbnQvYnV0dG9uLXJlZ2lzdGVyLXByaW50LmpzeFxuLy8gbW9kdWxlIGlkID0gMTgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi9tb2RhbHBhZ2UvbW9kYWxQYWdlLmpzeCcpLFxuICAgIElDT04gPSAnbWFpbCc7XG5cbnZhciBCdXR0b25SZWdpc3RlckVtYWlsID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uUmVnaXN0ZXJFbWFpbCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uUmVnaXN0ZXJFbWFpbChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uUmVnaXN0ZXJFbWFpbCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblJlZ2lzdGVyRW1haWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25SZWdpc3RlckVtYWlsKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvd01vZGFsOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5tb2RhbFBhZ2VDbGljayA9IF90aGlzLm1vZGFsUGFnZUNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLyoqXHJcbiAgICAgKiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQuiwg0L7RgtC60YDQvtC10YIg0LzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+XHJcbiAgICAgKiBAcGFyYW0gZVxyXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b25SZWdpc3RlckVtYWlsLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICAvLyDQtdGB0LvQuCDRgtGA0LXQsdGD0LXRgtGB0Y8g0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3QviDQuNGF0LLQtdGJ0LXQvdC40LUsINGC0L4g0L7RgtC60YDRi9Cy0LDQtdC8INC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3Qviwg0LjQvdCw0YfQtSDQstGL0LfRi9Cy0LDQtdC8INC80LXRgtC+0LQg0LjQtyDQv9GA0L7Qv9GB0L7QslxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZG9jVHlwZUlkLnRvTG93ZXJDYXNlKCkgPT09ICdhcnYnIHx8IHRoaXMucHJvcHMuZG9jVHlwZUlkLnRvTG93ZXJDYXNlKCkgPT09ICd0ZWF0aXMnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dNb2RhbDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbFBhZ2VDbGljaygnT2snKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIEJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuRW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgcmVmOiAnaW1hZ2UnLCBzcmM6IHN0eWxlcy5pY29uc1tJQ09OXSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxQYWdlLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogdGhpcy5tb2RhbFBhZ2VDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICcnICsgdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMuc3RhdGUuc2hvd01vZGFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBbJ2J0bk9rJywgJ2J0bkNhbmNlbCddXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdLYXMgc2FhZGEgZW1haWwgPydcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC90LAg0LrQvdC+0L/QutC4INC80L7QttCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXHJcbiAgICAgICAgICogQHBhcmFtIGJ0bkV2ZW50XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUNsaWNrKGJ0bkV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoYnRuRXZlbnQgPT09ICdPaycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2xpY2sodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd01vZGFsOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCdXR0b25SZWdpc3RlckVtYWlsO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG4vKlxyXG5CdXR0b25SZWdpc3RlclByaW50LnByb3BUeXBlcyA9IHtcclxuICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcclxufVxyXG4qL1xuXG5CdXR0b25SZWdpc3RlckVtYWlsLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc2hvdzogdHJ1ZSxcbiAgICB2YWx1ZTogJ0VtYWlsJyxcbiAgICBkb2NUeXBlSWQ6ICcnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblJlZ2lzdGVyRW1haWw7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tZW1haWwvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAxODNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBidXR0b25TdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcycpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vbW9kYWxwYWdlLXN0eWxlcycpO1xuXG52YXIgTW9kYWxQYWdlID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKE1vZGFsUGFnZSwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gTW9kYWxQYWdlKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbFBhZ2UpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNb2RhbFBhZ2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNb2RhbFBhZ2UpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuaGFuZGxlQnRuQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmNoYW5nZVZpc2liaWxpdHlNb2RhbFBhZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogX3RoaXMucHJvcHMuc2hvd1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5vbktleVVwID0gX3RoaXMub25LZXlVcC5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhNb2RhbFBhZ2UsIFt7XG4gICAgICAgIGtleTogJ2NoYW5nZVZpc2liaWxpdHlNb2RhbFBhZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlVmlzaWJpbGl0eU1vZGFsUGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93OiAhdGhpcy5zdGF0ZS5zaG93IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVCdG5DbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVCdG5DbGljayhidG5FdmVudCkge1xuICAgICAgICAgICAgLy8g0LfQsNC60YDRi9Cy0LDQtdC8INC+0LrQvdC+INC4INC10YHQu9C4INC/0LXRgNC10LTQsNC9INC+0LHRgNCw0LHQvtGC0YfQuNC6LCDQvtGC0LTQsNC10Lwg0YLRg9C00LAg0LTQsNC90L3Ri9C1XG5cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVmlzaWJpbGl0eU1vZGFsUGFnZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kYWxQYWdlQnRuQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgc2hvdyA9IHRoaXMucHJvcHMubW9kYWxQYWdlQnRuQ2xpY2soYnRuRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L/QtdGA0LXRhdCy0LDRgtC40YIg0YHRi9Cx0YLQuNGPINC90LDQttCw0YLQuNGPINC60L3QvtC/0LrQuCDQuCDQstGL0LfQvtCy0LXRgiDQtNC10YTQvtC70YLQvdGL0LUg0LzQtdGC0L7QtNGLXHJcbiAgICAgICAgICogQHBhcmFtIGVcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb25LZXlVcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZnNbJ2J0bk9rJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQnRuQ2xpY2soJ09rJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVmc1snYnRuQ2FuY2VsJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQnRuQ2xpY2soJ0NhbmNlbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L/QtdGA0LXQtNCw0L0g0LDRgtGA0LjQsdGDIG1vZGFsT2JqZWN0cyA9IFsnYnRuT2snLCdidG5DYW5jZWwnXVxuICAgICAgICAgICAgdmFyIGhpZGVCdG5PayA9IHRoaXMucHJvcHMubW9kYWxPYmplY3RzLmluZGV4T2YoJ2J0bk9rJykgPT0gLTEgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICAgICAgLy8g0YPQv9GA0LDQstC70LXQvdC40LUg0LrQvdC+0L/QutC+0Lkg0J7QulxuICAgICAgICAgICAgaGlkZUJ0bkNhbmNlbCA9IHRoaXMucHJvcHMubW9kYWxPYmplY3RzLmluZGV4T2YoJ2J0bkNhbmNlbCcpID09IC0xID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgICAgIC8vINGD0L/RgNCw0LLQu9C10L3QuNC1INC60L3QvtC/0LrQvtC5IENhbmNlbFxuICAgICAgICAgICAgZGlzcGxheU1vZGFsID0gdGhpcy5zdGF0ZS5zaG93ID8gJ2ZsZXgnIDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIHBhZ2VQb3NpdGlvbiA9IHRoaXMucHJvcHMucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMuY29udGFpbmVyLCB7IGRpc3BsYXk6IGRpc3BsYXlNb2RhbCB9LCB7IGp1c3RpZnlDb250ZW50OiBwYWdlUG9zaXRpb24gfSksXG4gICAgICAgICAgICAgICAgYnV0dG9uT2tTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5tb2RhbFBhZ2VCdXR0b25zLCBzdHlsZXMuZGVmYXVsdEJ1dHRvbik7XG5cbiAgICAgICAgICAgIHZhciBTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5tb2RhbFBhZ2UsIHRoaXMucHJvcHMuc3R5bGVzID8gdGhpcy5wcm9wcy5zdHlsZXMgOiB7fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGNvbnRhaW5lclN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBvbktleVVwOiB0aGlzLm9uS2V5VXBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBTdHlsZSwgcmVmOiAnbW9kYWxQYWdlQ29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuaGVhZGVyLCByZWY6ICdtb2RhbFBhZ2VIZWFkZXInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2hlYWRlck5hbWUnLCBzdHlsZTogc3R5bGVzLmhlYWRlck5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tb2RhbFBhZ2VOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IHN0eWxlOiBzdHlsZXMuYnV0dG9uQ2xvc2UsIHJlZjogJ2J0bkNsb3NlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZVZpc2liaWxpdHlNb2RhbFBhZ2UuYmluZCh0aGlzKSwgdmFsdWU6ICd4JyB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMubW9kYWxQYWdlQ29udGVudCwgcmVmOiAnbW9kYWxQYWdlQ29udGVudCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLm1vZGFsRm9vdGVyLCByZWY6ICdtb2RhbFBhZ2VCdXR0b25zJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUJ0bk9rID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5PaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnT2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogYnV0dG9uT2tTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICd3aWR0aCcgaW4gc3R5bGVzLm1vZGFsUGFnZUJ1dHRvbnMgPyBzdHlsZXMubW9kYWxQYWdlQnV0dG9ucy53aWR0aCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJ2hlaWdodCcgaW4gc3R5bGVzLm1vZGFsUGFnZUJ1dHRvbnMgPyBzdHlsZXMubW9kYWxQYWdlQnV0dG9ucy5oZWlnaHQgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUJ0bkNsaWNrLmJpbmQodGhpcywgJ09rJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnYnRuT2snIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogYnV0dG9uU3R5bGVzLmljb25zWydvayddIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgc3R5bGU6IHN0eWxlcy5idXR0b25zU2VwYXJhdG9yIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUJ0bkNhbmNlbCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLm1vZGFsUGFnZUJ1dHRvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnd2lkdGgnIGluIHN0eWxlcy5tb2RhbFBhZ2VCdXR0b25zID8gc3R5bGVzLm1vZGFsUGFnZUJ1dHRvbnMud2lkdGggOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdoZWlnaHQnIGluIHN0eWxlcy5tb2RhbFBhZ2VCdXR0b25zID8gc3R5bGVzLm1vZGFsUGFnZUJ1dHRvbnMuaGVpZ2h0IDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVCdG5DbGljay5iaW5kKHRoaXMsICdDYW5jZWwnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxQYWdlQnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnYnRuQ2FuY2VsJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgcmVmOiAnaW1hZ2UnLCBzcmM6IGJ1dHRvblN0eWxlcy5pY29uc1snY2FuY2VsJ10gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMuc2hvdyAhPT0gcHJldlN0YXRlLnNob3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzaG93OiBuZXh0UHJvcHMuc2hvdyB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1vZGFsUGFnZTtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbi8qXHJcbk1vZGFsUGFnZS5wcm9wVHlwZXMgPSB7XHJcbiAgICBtb2RhbFBhZ2VOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICBtb2RhbFBhZ2VCdG5DbGljazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIHNob3c6IFByb3BUeXBlcy5ib29sLFxyXG4gICAgcG9zaXRpb246IFByb3BUeXBlcy5vbmVPZihbJ2NlbnRlcicsICdmbGV4LXN0YXJ0JywgJ2ZsZXgtZW5kJ10pLFxyXG59XHJcbiovXG5cbk1vZGFsUGFnZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgbW9kYWxQYWdlTmFtZTogJ2RlZmF1bE5hbWUnLFxuICAgIG1vZGFsT2JqZWN0czogWydidG5PaycsICdidG5DYW5jZWwnXSxcbiAgICBwb3NpdGlvbjogJ2NlbnRlcicsXG4gICAgc2hvdzogZmFsc2Vcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kYWxQYWdlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxQYWdlLmpzeFxuLy8gbW9kdWxlIGlkID0gMTg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17Y29udGFpbmVyOntwb3NpdGlvbjonZml4ZWQnLHRvcDonMCcsbGVmdDowLHJpZ2h0OjAsYm90dG9tOjAsYmFja2dyb3VuZENvbG9yOidyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMjUpJyxkaXNwbGF5OidmbGV4JyxqdXN0aWZ5Q29udGVudDonY2VudGVyJ30sbW9kYWxQYWdlOntwb3NpdGlvbjoncmVsYXRpdmUnLGJvcmRlcjonMXB4IHNvbGlkIGJsYWNrJyxiYWNrZ3JvdW5kOid3aGl0ZScsbWFyZ2luOic4cHgnLGJvcmRlclJhZGl1czonNHB4JyxvdXRsaW5lOidub25lJyxkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLGFsaWduU2VsZjonY2VudGVyJyxoZWlnaHQ6J2F1dG8nLG1heEhlaWdodDonOTUlJyxvdmVyZmxvdzonYXV0bycsekluZGV4OjF9LG1vZGFsUGFnZUNvbnRlbnQ6e3BhZGRpbmc6JzEwcHgnLG1hcmdpbjonMTBweCd9LGhlYWRlcjp7aGVpZ2h0OiczMHB4Jyx3aWR0aDonMTAwJScsYm9yZGVyOicxcHggc29saWQgZGFya2dyYXknLGJhY2tncm91bmQ6J2xpZ2h0Z3JheScsZGlzcGxheTonZmxleCcsanVzdGlmeUNvbnRlbnQ6J3NwYWNlLWJldHdlZW4nfSxoZWFkZXJOYW1lOntjb2xvcjond2hpdGUnLGFsaWduU2VsZjonY2VudGVyJyxtYXJnaW5MZWZ0OicxMHB4J30sbW9kYWxGb290ZXI6e2FsaWduU2VsZjonY2VudGVyJyxkaXNwbGF5OidmbGV4JyxtYXJnaW5Cb3R0b246JzEwcHgnfSxtb2RhbFBhZ2VCdXR0b25zOntoZWlnaHQ6JzMwcHgnLHdpZHRoOicxMDBweCcsbWFyZ2luQm90dG9tOicxMHB4J30sYnV0dG9uc1NlcGFyYXRvcjp7d2lkdGg6JzEwcHgnfSxidXR0b25DbG9zZTp7Ym9yZGVyUmFkaXVzOic1MCUnLGJhY2tncm91bmRDb2xvcjonbGlnaHRncmF5Jyxib3JkZXI6J25vbmUnLGZvbnRXZWlnaHQ6JzkwMCcsbWFyZ2luOicwcHggMHB4J30sbGVmdDp7cmlnaHQ6J2F1dG8nLGxlZnQ6JzAnfSxyaWdodDp7bGVmdDonYXV0bycscmlnaHQ6JzAnfSxkZWZhdWx0QnV0dG9uOntiYWNrZ3JvdW5kQ29sb3I6J2xpZ2h0Qmx1ZSd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE4NVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnYXR0YWNobWVudCc7XG5cbnZhciBCdXR0b25QZGYgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uUGRmLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0LLRi9C30L7QstCwINGE0LDQudC70LAg0LLQu9C+0LTQtdC90LjRjyDQsiDRhNC+0YDQvNCw0YLQtSBQREZcbiAgICBmdW5jdGlvbiBCdXR0b25QZGYocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblBkZik7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCdXR0b25QZGYuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25QZGYpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblBkZiwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25DbGljaygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMub25DbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIEJ1dHRvbixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkdldFBkZicsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlID8gdGhpcy5wcm9wcy52YWx1ZSA6ICdQREYnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUGRmO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uUGRmLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc2hvdzogdHJ1ZVxufTtcbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uUGRmO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXBkZi9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDE4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuL3N0eWxlcycpLFxuICAgIERhdGFHcmlkID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy9kYXRhLWdyaWQvZGF0YS1ncmlkLmpzeCcpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIEJ0bkluZm8gPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24taW5mby9pbmRleC5qc3gnKSxcbiAgICBNb2RhbFBhZ2UgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFsUGFnZS5qc3gnKTtcblxudmFyIEdSSURfQ09ORklHID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb25maWcvY29uc3RhbnRzJykubG9ncy5ncmlkQ29uZmlnO1xuXG52YXIgU2hvd0xvZ3MgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoU2hvd0xvZ3MsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIFNob3dMb2dzKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaG93TG9ncyk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNob3dMb2dzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2hvd0xvZ3MpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzaG93OiAhIV90aGlzLnByb3BzLmRhdGEubGVuZ3RoXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMubW9kYWxQYWdlQ2xpY2sgPSBfdGhpcy5tb2RhbFBhZ2VDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTaG93TG9ncywgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zaG93ID8gdGhpcy5tb2RhbFBhZ2UoKSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuTG9ncycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTG9nZ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5zaG93LFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuYnV0dG9uLmljb24gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKCk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxQYWdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZSgpIHtcbiAgICAgICAgICAgIHZhciBtb2RhbE9iamVjdHMgPSBbJ2J0bk9rJ107XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0czogbW9kYWxPYmplY3RzLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtZ3JpZCcsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsUGFnZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VOYW1lOiAnTG9nZ2lkJyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuYnRuSW5mbyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkluZm8sIHsgcmVmOiAnYnRuSW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6ICdsb2dpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdncmlkLXJvdy1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0YUdyaWQsIHsgZ3JpZERhdGE6IHRoaXMucHJvcHMuZGF0YS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZENvbHVtbnM6IEdSSURfQ09ORklHLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZGF0YS1ncmlkJyB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQgPT09ICdPaycpIHtcblxuICAgICAgICAgICAgICAgIC8vINC/0L7QutCw0LfQsNGC0Ywg0L3QvtCy0L7QtSDQt9C90LDRh9C10L3QuNC1XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3c6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNob3dMb2dzO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuU2hvd0xvZ3MucHJvcFR5cGVzID0ge1xuICAgIHNob3c6IFByb3BUeXBlcy5ib29sXG59O1xuXG5TaG93TG9ncy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgc2hvdzogdHJ1ZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTaG93TG9ncztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvc2hvdy1sb2dzL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMTg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17d3JhcHBlcjp7bWFyZ2luOic1cHgnLGRpc3BsYXk6J2ZsZXgnLHdpZHRoOic5NSUnfSxidXR0b246e2ljb246Jy9pbWFnZXMvaWNvbnMvaW5mby5wbmcnLHdpZHRoOicxMCUnfSxidG5JbmZvOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidyb3ctcmV2ZXJzZSd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvc2hvdy1sb2dzL3N0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTg4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIFRvb2xiYXJDb250YWluZXIgPSByZXF1aXJlKCcuLy4uL3Rvb2xiYXItY29udGFpbmVyL3Rvb2xiYXItY29udGFpbmVyLmpzeCcpLFxuICAgIEdyaWRCdXR0b25BZGQgPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItYWRkL2J1dHRvbi1yZWdpc3Rlci1hZGQuanN4JyksXG4gICAgR3JpZEJ1dHRvbkVkaXQgPSByZXF1aXJlKCcuLy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZWRpdC9idXR0b24tcmVnaXN0ZXItZWRpdC5qc3gnKSxcbiAgICBHcmlkQnV0dG9uRGVsZXRlID0gcmVxdWlyZSgnLi8uLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWRlbGV0ZS9idXR0b24tcmVnaXN0ZXItZGVsZXRlLmpzeCcpLFxuICAgIE1vZGFsUGFnZURlbGV0ZSA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLWRlbGV0ZS9tb2RhbFBhZ2UtZGVsZXRlLmpzeCcpLFxuICAgIElucHV0Q2hlY2tCb3ggPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtY2hlY2tib3gvaW5wdXQtY2hlY2tib3guanN4JyksXG4gICAga2V5ZG93biA9IHJlcXVpcmUoJ3JlYWN0LWtleWRvd24nKTtcblxuLy9jb25zdCAgICBLRVlTID0gWzM4LCA0MF07IC8vINC80L7QvdC40YLQvtGA0LjQvCDRgtC+0LvRjNC60L4g0YHRgtGA0LXQu9C60Lgg0LLQstC10YDRhSDQuCDQstC90LjQt9GFXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi9kYXRhLWdyaWQtc3R5bGVzJyk7XG5cbnZhciBpc0V4aXN0cyA9IGZ1bmN0aW9uIGlzRXhpc3RzKG9iamVjdCwgcHJvcCkge1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICBpZiAob2JqZWN0ICYmIHByb3AgaW4gb2JqZWN0KSB7XG4gICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vL0BrZXlkb3duIEB0b2RvXG5cbnZhciBEYXRhR3JpZCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKERhdGFHcmlkLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIERhdGFHcmlkKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRhR3JpZCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERhdGFHcmlkLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGF0YUdyaWQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBhY3RpdmVSb3c6IDAsXG4gICAgICAgICAgICBhY3RpdmVDb2x1bW46ICcnLFxuICAgICAgICAgICAgaXNEZWxldGU6IGZhbHNlLFxuICAgICAgICAgICAgc29ydDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IG51bGwsXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLnZhbHVlID8gX3RoaXMucHJvcHMudmFsdWUgOiAwLFxuICAgICAgICAgICAgZ3JpZERhdGE6IHByb3BzLmdyaWREYXRhLFxuICAgICAgICAgICAgc3VidG90YWxzOiBwcm9wcy5zdWJ0b3RhbHMgPyBwcm9wcy5zdWJ0b3RhbHMgOiBbXSxcbiAgICAgICAgICAgIGlzU2VsZWN0OiBfdGhpcy5wcm9wcy5pc1NlbGVjdFxuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzLmhhbmRsZUdyaWRIZWFkZXJDbGljayA9IF90aGlzLmhhbmRsZUdyaWRIZWFkZXJDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2VsbERibENsaWNrID0gX3RoaXMuaGFuZGxlQ2VsbERibENsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gX3RoaXMuaGFuZGxlS2V5RG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucHJlcGFyZVRhYmxlUm93ID0gX3RoaXMucHJlcGFyZVRhYmxlUm93LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVHcmlkQnRuQ2xpY2sgPSBfdGhpcy5oYW5kbGVHcmlkQnRuQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldEdyaWRSb3dJbmRleEJ5SWQgPSBfdGhpcy5nZXRHcmlkUm93SW5kZXhCeUlkLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5wcmVwYXJlVGFibGVGb290ZXIgPSBfdGhpcy5wcmVwYXJlVGFibGVGb290ZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFN1bSA9IF90aGlzLmdldFN1bS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ3JpZCA9IFtdO1xuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvLyB3aWxsIHVwZGF0ZSBzdGF0ZSBpZiBwcm9wcyBjaGFuZ2VkXG5cblxuICAgIF9jcmVhdGVDbGFzcyhEYXRhR3JpZCwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciB0YWJsZUhlYWRlclN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGVzLmhlYWRlclRhYmxlID8gc3R5bGVzLmhlYWRlclRhYmxlIDoge30sIHRoaXMucHJvcHMuc3R5bGUpO1xuICAgICAgICAgICAgdmFyIHRhYmxlTWFpblN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGVzLm1haW5UYWJsZSA/IHN0eWxlcy5tYWluVGFibGUgOiB7fSwgdGhpcy5wcm9wcy5zdHlsZSk7XG5cbiAgICAgICAgICAgIHZhciB0b29sYmFyUGFyYW1zID0gT2JqZWN0LmFzc2lnbih7XG5cbiAgICAgICAgICAgICAgICBidG5BZGQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5FZGl0OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuRGVsZXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuUHJpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcy5wcm9wcy50b29sYmFyUGFyYW1zID8gdGhpcy5wcm9wcy50b29sYmFyUGFyYW1zIDoge30pO1xuXG4gICAgICAgICAgICAvLyDQv9GA0LjQvNC10Lwg0LIg0LfQsNGH0LXRgiDQv9C10YDQtdC00LDQvdC90YvQtSDRgdGC0LjQu9C4XG4gICAgICAgICAgICBzdHlsZXMgPSBfZXh0ZW5kcyh7fSwgc3R5bGVzLCB0aGlzLnByb3BzLnN0eWxlKTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5tYWluIH0sXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zaG93VG9vbEJhciA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIFRvb2xiYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2dyaWQtdG9vbGJhci1jb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdsZWZ0JyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEdyaWRCdXR0b25BZGQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXMuYnRuQWRkLnNob3csXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUdyaWRCdG5DbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTGlzYScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdncmlkLWJ1dHRvbi1hZGQnIH0pLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEdyaWRCdXR0b25FZGl0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zLmJ0bkVkaXQuc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlR3JpZEJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdNdXVkYScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdncmlkLWJ1dHRvbi1lZGl0JyB9KSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChHcmlkQnV0dG9uRGVsZXRlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zLmJ0bkRlbGV0ZS5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVHcmlkQnRuQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0t1c3R1dGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZ3JpZC1idXR0b24tZGVsZXRlJyB9KVxuICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuaGVhZGVyIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAndGFibGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdkYXRhR3JpZFRhYmxlJywgc3R5bGU6IHRhYmxlSGVhZGVyU3R5bGUsIG9uS2V5UHJlc3M6IHRoaXMuaGFuZGxlS2V5RG93biB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGJvZHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlVGFibGVIZWFkZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy53cmFwcGVyIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAndGFibGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogdGFibGVNYWluU3R5bGUsIHRhYkluZGV4OiAnMScsIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M6IHRoaXMuaGFuZGxlS2V5RG93biB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGJvZHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyB2aXNpYmlsaXR5OiAnY29sbGFwc2UnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlVGFibGVIZWFkZXIodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZVRhYmxlUm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdWJ0b3RhbHMgJiYgdGhpcy5wcm9wcy5zdWJ0b3RhbHMubGVuZ3RoID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlVGFibGVGb290ZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTW9kYWxQYWdlRGVsZXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMuc3RhdGUuaXNEZWxldGUsXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsRGVsZXRlUGFnZUJ0bkNsaWNrLmJpbmQodGhpcykgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gLy8gcmVuZGVyXG5cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxEZWxldGVQYWdlQnRuQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kYWxEZWxldGVQYWdlQnRuQ2xpY2soYnRuRXZlbnQpIHtcbiAgICAgICAgICAgIC8vY2xvc2UgbW9kYWxwYWdlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNEZWxldGU6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgICBpZiAoYnRuRXZlbnQgPT09ICdPaycgJiYgdGhpcy5wcm9wcy5oYW5kbGVHcmlkQnRuQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhhbmRsZUdyaWRCdG5DbGljaygnZGVsZXRlJywgdGhpcy5zdGF0ZS5hY3RpdmVSb3csIHRoaXMuc3RhdGUuZ3JpZERhdGEubGVuZ3RoID8gdGhpcy5zdGF0ZS5ncmlkRGF0YVt0aGlzLnN0YXRlLmFjdGl2ZVJvd10uaWQgOiAwLCB0aGlzLnByb3BzLmRvY1R5cGVJZCA/IHRoaXMucHJvcHMuZG9jVHlwZUlkIDogJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40LrQsCDRgdCw0LHRi9GC0LjRjyDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC4INC/0LDQvdC10LvQuCDQs9GA0LjQtNCwXHJcbiAgICAgICAgICogQHBhcmFtIGJ0bk5hbWVcclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlR3JpZEJ0bkNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUdyaWRCdG5DbGljayhidG5OYW1lKSB7XG5cbiAgICAgICAgICAgIHZhciBhY3RpdmVSb3cgPSB0aGlzLnN0YXRlLmFjdGl2ZVJvdztcblxuICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5zdGF0ZS5ncmlkRGF0YS5sZW5ndGggPyB0aGlzLnN0YXRlLmdyaWREYXRhW2FjdGl2ZVJvd10uaWQgOiAwO1xuXG4gICAgICAgICAgICB2YXIgZG9jVHlwZUlkID0gdGhpcy5wcm9wcy5kb2NUeXBlSWQgPyB0aGlzLnByb3BzLmRvY1R5cGVJZCA6ICcnO1xuXG4gICAgICAgICAgICBpZiAoKGJ0bk5hbWUgPT09ICdkZWxldGUnIHx8IGJ0bk5hbWUgPT09ICdLdXN0dXRhJykgJiYgIXRoaXMuc3RhdGUuaXNEZWxldGUpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgb3BlbiBtb2RhbCBwYWdlIGFuZCBhc2sgY29uZmlybWF0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoeyBpc0RlbGV0ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaGFuZGxlR3JpZEJ0bkNsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVHcmlkQnRuQ2xpY2soYnRuTmFtZSwgYWN0aXZlUm93LCBpZCwgZG9jVHlwZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC40YnQtdC8INC40L3QtNC10YUg0LIg0LzQsNGB0YHQuNCy0LUg0LTQsNC90L3Ri9GFXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEdyaWRSb3dJbmRleEJ5SWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0R3JpZFJvd0luZGV4QnlJZCgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5zdGF0ZS5ncmlkRGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93LmlkID09PSBfdGhpczIuc3RhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA+IC0xID8gaW5kZXggOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7RgtGA0LDQsdCw0YLRi9Cy0LDQtdGCINGB0L7QsdGL0YLQuCDQutC70LjQutCwINC/0L4g0Y/Rh9C10LnQutC1XHJcbiAgICAgICAgICogQHBhcmFtIGlkeFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVDZWxsQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2VsbENsaWNrKGlkeCwgY29sdW1uSWQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5ncmlkRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMucHJvcHMub25DaGFuZ2VBY3Rpb24gfHwgbnVsbDtcblxuICAgICAgICAgICAgICAgIHZhciBkb2NJZCA9IHRoaXMuc3RhdGUuZ3JpZERhdGFbaWR4XS5pZDtcbiAgICAgICAgICAgICAgICB2YXIgZ3JpZERhdGEgPSBfZXh0ZW5kcyh7fSwgdGhpcy5zdGF0ZS5ncmlkRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyDQntGC0YDQsNCx0L7RgtCw0LXRgiDQutC70LjQuiDQv9C+INC60L7Qu9C+0L3QutC4INGB0LXQu9C10LrRgiDQtNC70Y8g0LLRi9Cx0L7RgNCwINC80LDRgdGB0LjQstCwINC30LDQv9C40YHQtdC5XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNTZWxlY3QgJiYgY29sdW1uSWQgPT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g0YPQttC1INCy0YvQsdGA0LDQvSwg0L3QsNC00L4g0LjRgdC60LvRjtGH0LjRgtGMXG4gICAgICAgICAgICAgICAgICAgIGdyaWREYXRhW2lkeF0uc2VsZWN0ID0gIWdyaWREYXRhW2lkeF0uc2VsZWN0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vINC10YHQu9C4INC/0L7Qu9C1INC90LUg0L7RgtC80LXRh9C10L3QviDQutCw0LogcmVhZE9ubHkg0YLQviDRgdC7LiDQtNC10LnRgdGC0LLQuNC1INC90LUg0LTQvtC70LbQvdC+INC/0YDQvtC40YHRhdC+0LTQuNGC0YxcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMucHJvcHMuZ3JpZENvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cuaWQgPT0gY29sdW1uSWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uICYmIGNvbHVtbi5sZW5ndGggJiYgIWNvbHVtblswXS5yZWFkT25seSAmJiB0aGlzLnByb3BzLmlzRm9yVXBkYXRlICYmIGdyaWREYXRhW2lkeF1bY29sdW1uSWRdICE9PSBudWxsICYmIGdyaWREYXRhW2lkeF1bY29sdW1uSWRdICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFsdWUgY2hhbmdlZFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZERhdGFbaWR4XVtjb2x1bW5JZF0gPSAhZ3JpZERhdGFbaWR4XVtjb2x1bW5JZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZERhdGE6IGdyaWREYXRhLFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVSb3c6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRvY0lkXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpczMuc3RhdGUuZ3JpZERhdGFbaWR4XVtjb2x1bW5JZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMucHJvcHMub25DbGljaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnByb3BzLm9uQ2xpY2soYWN0aW9uLCBkb2NJZCwgaWR4LCBjb2x1bW5JZCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LTQstC+0LnQvdC+0LPQviDQutC70LjQutCwINC/0L4g0Y/Rh9C10LnQutC1XHJcbiAgICAgICAgICogQHBhcmFtIGlkeFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVDZWxsRGJsQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2VsbERibENsaWNrKGlkeCkge1xuICAgICAgICAgICAgLy8g0L7RgtC80LXRgtC40Lwg0LDQutGC0LjQstC90YPRjiDRgdGC0YDQvtC60YMg0Lgg0LLRi9C30L7QstC10L0g0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gZGJsQ2xpY2tcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2VsbENsaWNrKGlkeCwgbnVsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkRibENsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkRibENsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntGC0YDQsNCx0L7RgtCw0LXRgiDQutC70LjQuiDQv9C+INC30LDQs9C+0LvQvtCy0LrRgyDQs9GA0LjQtNCwICjRgdC+0YDRgtC40YDQvtCy0LrQsClcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAtINC90LDQuNC80LXQvdC+0LLQsNC90LjQtSDQutC+0LvQvtC90LrQuFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVHcmlkSGVhZGVyQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlR3JpZEhlYWRlckNsaWNrKG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChuYW1lID09PSAnc2VsZWN0JyB8fCBuYW1lID09PSAncm93X2lkJykge1xuICAgICAgICAgICAgICAgIC8vINCy0LjRgNGC0YPQsNC70YzQvdCw0Y8g0LrQvtC70L7QvdC60LBcbiAgICAgICAgICAgICAgICAvLyDQvNC10L3Rj9C10Lwg0LfQvdCw0YfQtdC90LjQtSDQstGL0LHRgNCw0L3QviDQvdCwINC90LDQvtCx0L7RgNC+0YJcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmdyaWREYXRhLmxlbmd0aCA+IDAgJiYgbmFtZSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnN0YXRlLmdyaWREYXRhO1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LnNlbGVjdCA9ICFyb3cuc2VsZWN0O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdyaWREYXRhOiBkYXRhIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzb3J0ID0gdGhpcy5zdGF0ZS5zb3J0O1xuICAgICAgICAgICAgaWYgKHNvcnQubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHNvcnQuZGlyZWN0aW9uID0gc29ydC5kaXJlY3Rpb24gPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvcnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2FzYydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc29ydEJ5ID0gW3sgY29sdW1uOiBzb3J0Lm5hbWUsIGRpcmVjdGlvbjogc29ydC5kaXJlY3Rpb24gfV07XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGFjdGl2ZUNvbHVtbjogbmFtZSxcbiAgICAgICAgICAgICAgICBzb3J0OiBzb3J0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25IZWFkZXJDbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25IZWFkZXJDbGljayhzb3J0QnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCDRgdC+0LHRi9GC0LjQtSAtINC90LDQttC40YLQuNC1INGB0YLRgNC10LvQutC4INCy0L3QuNC3XHJcbiAgICAgICAgICogQHBhcmFtIGVcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlS2V5RG93bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICAgICAgICAgIC8vINGA0LXQsNC60YbQuNGPINC90LAg0LrQu9Cw0LLQuNCw0YLRg9GA0YNcbiAgICAgICAgICAgIHZhciByb3dJbmRleCA9IHRoaXMuc3RhdGUuYWN0aXZlUm93O1xuICAgICAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgLy8g0LLQvdC40LcsINGD0LLQtdC70LjRh9C40Lwg0LDQutGC0LjQstC90YPRjiDRgdGC0YDQvtC60YMg0L3QsCArIDFcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXgrKztcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5ncmlkRGF0YS5sZW5ndGggPCByb3dJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g0LLQtdGA0L3QtdC8INC/0YDQtdC20L3QtdC1INC30L3QsNGH0LXQvdC40LVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4ID0gdGhpcy5zdGF0ZS5hY3RpdmVSb3c7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgLy8g0LLQvdC40LcsINGD0LLQtdC70LjRh9C40Lwg0LDQutGC0LjQstC90YPRjiDRgdGC0YDQvtC60YMg0L3QsCAtIDFcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXgtLTtcbiAgICAgICAgICAgICAgICAgICAgcm93SW5kZXggPSByb3dJbmRleCA8IDAgPyAwIDogcm93SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgYWN0aXZlUm93OiByb3dJbmRleFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQk9C+0YLQvtCy0LjRgiDRgdGC0YDQvtC60YMg0LTQu9GPINCz0YDQuNC00LBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHJlcGFyZVRhYmxlUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXBhcmVUYWJsZVJvdygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgYWN0aXZlUm93ID0gdGhpcy5nZXRHcmlkUm93SW5kZXhCeUlkKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmdyaWREYXRhLm1hcChmdW5jdGlvbiAocm93LCByb3dJbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3RJbmRleCA9ICd0ci0nICsgcm93SW5kZXg7XG5cbiAgICAgICAgICAgICAgICB2YXIgZ3JpZENvbHVtbnMgPSBfdGhpczQucHJvcHMuZ3JpZENvbHVtbnMubWFwKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5pZCA9PT0gJ3NlbGVjdCcgJiYgX3RoaXM0LnByb3BzLmlzU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICd0cicsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogb2JqZWN0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpczQuaGFuZGxlQ2VsbENsaWNrLmJpbmQoX3RoaXM0LCByb3dJbmRleCwgbnVsbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRvdWJsZUNsaWNrOiBfdGhpczQuaGFuZGxlQ2VsbERibENsaWNrLmJpbmQoX3RoaXM0LCByb3dJbmRleCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd246IF90aGlzNC5oYW5kbGVLZXlEb3duLmJpbmQoX3RoaXM0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMudHIsIGFjdGl2ZVJvdyA9PT0gcm93SW5kZXggPyBzdHlsZXMuZm9jdXNlZCA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb2JqZWN0SW5kZXggfSxcbiAgICAgICAgICAgICAgICAgICAgZ3JpZENvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQvdCw0LfQvdCw0YfQuNC8INGB0LjQvNCy0L7Qu9GLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC70L7Qs9C40YfQtdGB0LrQuNGFINC00LDQvdC90YvRhVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvb2xWYWx1ZVllcyA9IGNvbHVtbi5ib29sU3VtYm9sWWVzID8gY29sdW1uLmJvb2xTdW1ib2xZZXMgOiBzdHlsZXMuYm9vbFN1bWJvbFsneWVzJ10udmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib29sVmFsdWVObyA9IGNvbHVtbi5ib29sU3VtYm9sTm8gPyBjb2x1bW4uYm9vbFN1bWJvbE5vIDogc3R5bGVzLmJvb2xTdW1ib2xbJ25vJ10udmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib29sVmFsdWVOdWxsID0gY29sdW1uLmJvb2xTdW1ib2xOdWxsID8gY29sdW1uLmJvb2xTdW1ib2xOdWxsIDogc3R5bGVzLmJvb2xTdW1ib2xbJ251bGwnXSA/IHN0eWxlcy5ib29sU3VtYm9sWydudWxsJ10udmFsdWUgOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQv9GA0LjQstC10LTQtdC8INC30L3QsNGH0LXQvdC40LUgdmFsdWUg0Log0LfQsNC00LDQvdC+0LzRgyDRgtC40L/RgyDQtNC70Y8g0L/QsNGA0LDQvNC10YLRgNCwIGhpZGVFbXB0eVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZml4ZWRWYWx1ZSA9IGNvbHVtbi50eXBlICYmIGNvbHVtbi50eXBlID09IFwiaW50ZWdlclwiID8gTnVtYmVyKHJvd1tjb2x1bW4uaWRdKSA6IHJvd1tjb2x1bW4uaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbEluZGV4ID0gJ3RkLScgKyByb3dJbmRleCArICctJyArIGNvbHVtbkluZGV4O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzcGxheSA9IGlzRXhpc3RzKGNvbHVtbiwgJ3Nob3cnKSA/IGNvbHVtbi5zaG93IDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IGlzRXhpc3RzKGNvbHVtbiwgJ3dpZHRoJykgPyBjb2x1bW4ud2lkdGggOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMudGQsICFkaXNwbGF5ID8geyBkaXNwbGF5OiAnbm9uZScgfSA6IHt9LCB7IHdpZHRoOiB3aWR0aCB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0LjQvCDQvdCwINC30LDQtNCw0L3QvdGL0Lkg0YbQstC10YJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZXMuYm9vbENvbG91ciAmJiBjb2x1bW4udHlwZSAmJiBjb2x1bW4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IE9iamVjdC5hc3NpZ24oc3R5bGUsIHsgYmFja2dyb3VuZENvbG9yOiAhIXJvd1tjb2x1bW4uaWRdID8gc3R5bGVzLmJvb2xDb2xvdXIueWVzIDogc3R5bGVzLmJvb2xDb2xvdXIubm8gfSwgeyBjb2xvcjogISFyb3dbY29sdW1uLmlkXSA/IHN0eWxlcy5ib29sU3VtYm9sWyd5ZXMnXS5jb2xvciA6IHN0eWxlcy5ib29sU3VtYm9sWydubyddLmNvbG9yIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQt9Cw0LTQsNC9INGE0L7QvSDQsiDQutC+0L3RhNC40LPQtSDQs9GA0LjQtNCwXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnllc0JhY2tncm91bmRDb2xvciAmJiAoISFyb3dbY29sdW1uLmlkXSB8fCByb3dbY29sdW1uLmlkXSA9PSAnVmlnYScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHsgYmFja2dyb3VuZENvbG9yOiBjb2x1bW4ueWVzQmFja2dyb3VuZENvbG9yIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQntC6LCBWaWdhINC00LvRjyAg0YDQsNC/0L7RgNGC0LAg0L7QsSDQuNGB0L/QvtC70L3QtdC90LjQtdC1XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uLm5vQmFja2dyb3VuZENvbG9yICYmICghcm93W2NvbHVtbi5pZF0gfHwgcm93W2NvbHVtbi5pZF0gPT0gJ09rJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IF9leHRlbmRzKHt9LCBzdHlsZSwgeyBiYWNrZ3JvdW5kQ29sb3I6IGNvbHVtbi5ub0JhY2tncm91bmRDb2xvciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5udWxsQmFja2dyb3VuZENvbG9yICYmIHJvd1tjb2x1bW4uaWRdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IF9leHRlbmRzKHt9LCBzdHlsZSwgeyBiYWNrZ3JvdW5kQ29sb3I6IGNvbHVtbi5udWxsQmFja2dyb3VuZENvbG9yIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g0YbQstC10YIsINC/0YDQuCDQt9C90LDRh9C10L3QuNC4IE5VTExcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZXMudGQgJiYgc3R5bGVzLnRkLm51bGxDb2xvdXIgJiYgcm93W2NvbHVtbi5pZF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gT2JqZWN0LmFzc2lnbihzdHlsZSwgeyBiYWNrZ3JvdW5kQ29sb3I6IHN0eWxlcy50ZC5udWxsQ29sb3VyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQutCw0YHRgtC+0LzQvdC+0LUg0L7QsdGA0LDQsdC+0YLQutCwINGB0YLQuNC70LXQuSDQvdCwINC60LvQtdGC0LrRg1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC5wcm9wcy5jdXN0b21fc3R5bGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21lU3R5bGUgPSBfdGhpczQucHJvcHMuY3VzdG9tX3N0eWxpbmcoY29sdW1uLCByb3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gX2V4dGVuZHMoe30sIHN0eWxlLCBjdXN0b21lU3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQvtCx0LXRgNC10Lwg0LTQu9GPINC60L7QvdC60YDQtdGC0L3QvtCz0L4g0L/QvtC70Y8g0L/QsNGA0LDQvNC10YLRgCBoaWRlRW1wdHlWYWx1ZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNIaWRlRW1wdHlWYWx1ZSA9IGNvbHVtbi5oaWRlRW1wdHlWYWx1ZSA/IGNvbHVtbi5oaWRlRW1wdHlWYWx1ZSA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmhpZGVFbXB0eVZhbHVlICYmIHJvd1snbm9tX2lkJ10gJiYgcm93Wydub21faWQnXSA9PSA5OTk5OTk5OTkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hpZGVFbXB0eVZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogY2VsbEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGNlbGxJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246IGNvbHVtbi50eXBlICYmIGNvbHVtbi50eXBlID09PSAnYm9vbGVhbicgPyAnY2VudGVyJyA6ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogX3RoaXM0LmhhbmRsZUNlbGxDbGljay5iaW5kKF90aGlzNCwgcm93SW5kZXgsIGNvbHVtbi5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi50eXBlICYmIGNvbHVtbi50eXBlID09PSAnYm9vbGVhbicgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhcm93W2NvbHVtbi5pZF0gPyBib29sVmFsdWVZZXMgOiByb3dbY29sdW1uLmlkXSA9PSBudWxsID8gYm9vbFZhbHVlTnVsbCA6IGJvb2xWYWx1ZU5vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IGlzSGlkZUVtcHR5VmFsdWUgJiYgIWZpeGVkVmFsdWUgPyBudWxsIDogcm93W2NvbHVtbi5pZF1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0JPQvtGC0L7QstC40YIg0LrQvtC80L/QvtC90LXQvdGCINC40YLQvtCz0L7QstCw0Y8g0YHRgtGA0L7QutCwINCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcGFyYW0gaXNIaWRkZW4gLSDQutC+0LvQvtC90LrQsCDQsdGD0LTQtdGCINGB0LrRgNGL0YLQsFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwcmVwYXJlVGFibGVGb290ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcGFyZVRhYmxlRm9vdGVyKGlzSGlkZGVuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZ3JpZENvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlckluZGV4ID0gJ3RkLScgKyBpbmRleDtcblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJTdHlsZSA9ICd0ZCc7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGlzcGxheSA9IGlzRXhpc3RzKGNvbHVtbiwgJ3Nob3cnKSA/IGNvbHVtbi5zaG93IDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBpc0V4aXN0cyhjb2x1bW4sICd3aWR0aCcpID8gY29sdW1uLndpZHRoIDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlc1toZWFkZXJTdHlsZV0sICFkaXNwbGF5ID8geyBkaXNwbGF5OiAnbm9uZScgfSA6IHt9LCB7IHdpZHRoOiB3aWR0aCB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBzdWJJbmRleCA9IF90aGlzNS5wcm9wcy5zdWJ0b3RhbHMuaW5kZXhPZihjb2x1bW4uaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0b3RhbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoc3ViSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IF90aGlzNS5nZXRTdW0oY29sdW1uLmlkLCBjb2x1bW4udHlwZSAmJiBjb2x1bW4udHlwZSA9PSAnaW50ZWdlcicgPyAwIDogMik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0LLQuNC00LjQvNC+0YHRgtGMXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICd0ZCcsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogaGVhZGVySW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGhlYWRlckluZGV4XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCT0L7RgtC+0LLQuNGCINC60L7QvNC/0L7QvdC10L3RgiDQt9Cw0LPQvtC70L7QstC+0Log0LPRgNC40LTQsFxyXG4gICAgICAgICAqIEBwYXJhbSBpc0hpZGRlbiAtINC60L7Qu9C+0L3QutCwINCx0YPQtNC10YIg0YHQutGA0YvRgtCwXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ByZXBhcmVUYWJsZUhlYWRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYXJlVGFibGVIZWFkZXIoaXNIaWRkZW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyDQtdGB0LvQuCDQtdGB0YLRjCDQvtC/0YbQuNGPINCy0YvQsdC+0YAsINGC0L4g0LTQvtCx0LDQstC40Lwg0LIg0LzQsNGB0YHQuNCyINC60L7Qu9C+0L3QutGDINGBINC/0L7Qu9C10LwgdGlja2VkXG4gICAgICAgICAgICB2YXIgZ3JpZENvbHVtbnMgPSB0aGlzLnByb3BzLmdyaWRDb2x1bW5zLm1hcChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pZCA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LnNob3cgPSBfdGhpczYucHJvcHMuaXNTZWxlY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGdyaWRDb2x1bW5zLm1hcChmdW5jdGlvbiAoY29sdW1uLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJJbmRleCA9ICd0aC0nICsgaW5kZXggKyBjb2x1bW4uaWQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyU3R5bGUgPSBpc0hpZGRlbiA/ICd0aEhpZGRlbicgOiAndGgnO1xuXG4gICAgICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINGB0YLQuNC70Ywg0LfQsNCz0L7Qu9C+0LLQutCwLCDQvdCwINGE0L7QvdGCXG4gICAgICAgICAgICAgICAgdmFyIGZvbnRDb2xvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGNvbHVtbi5zaG93Qm9sZCAmJiBzdHlsZXNbaGVhZGVyU3R5bGVdLmJvbGRDb2xvciA/IHN0eWxlc1toZWFkZXJTdHlsZV0uYm9sZENvbG9yIDogc3R5bGVzW2hlYWRlclN0eWxlXS5jb2xvclxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgZGlzcGxheSA9IGlzRXhpc3RzKGNvbHVtbiwgJ3Nob3cnKSA/IGNvbHVtbi5zaG93IDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBpc0V4aXN0cyhjb2x1bW4sICd3aWR0aCcpID8gY29sdW1uLndpZHRoIDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlc1toZWFkZXJTdHlsZV0sICFkaXNwbGF5ID8geyBkaXNwbGF5OiAnbm9uZScgfSA6IHt9LCB7IHdpZHRoOiB3aWR0aCB9LCBmb250Q29sb3IpLFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDb2x1bW4gPSBfdGhpczYuc3RhdGUuYWN0aXZlQ29sdW1uLFxuICAgICAgICAgICAgICAgICAgICBpY29uVHlwZSA9IF90aGlzNi5zdGF0ZS5zb3J0LmRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VTdHlsZUFzYyA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5pbWFnZSwgYWN0aXZlQ29sdW1uID09PSBjb2x1bW4uaWQgJiYgaWNvblR5cGUgPT09ICdhc2MnID8ge30gOiB7IGRpc3BsYXk6ICdub25lJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VTdHlsZURlc2MgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMuaW1hZ2UsIGFjdGl2ZUNvbHVtbiA9PT0gY29sdW1uLmlkICYmIGljb25UeXBlID09PSAnZGVzYycgPyB7fSA6IHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8g0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0LLQuNC00LjQvNC+0YHRgtGMXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICd0aCcsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogaGVhZGVySW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGhlYWRlckluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogX3RoaXM2LmhhbmRsZUdyaWRIZWFkZXJDbGljay5iaW5kKF90aGlzNiwgY29sdW1uLmlkKSB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi5uYW1lXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZGVuID8gUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZUFzYycsIHN0eWxlOiBpbWFnZVN0eWxlQXNjLCBzcmM6IHN0eWxlcy5pY29uc1snYXNjJ10sIGFsdDogJ2FzYycgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpc0hpZGRlbiA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgcmVmOiAnaW1hZ2VEZXNjJywgc3R5bGU6IGltYWdlU3R5bGVEZXNjLCBzcmM6IHN0eWxlcy5pY29uc1snZGVzYyddLCBhbHQ6ICdkZXNjJyB9KSA6IG51bGxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDRgNCw0YHRh9C10YIg0LjRgtC+0LPQvtCyXHJcbiAgICAgICAgICogQHBhcmFtIGNvbHVtbkZpZWxkXHJcbiAgICAgICAgICogQHBhcmFtIGRlY1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFN1bScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdW0oY29sdW1uRmllbGQsIGRlYykge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcbiAgICAgICAgICAgIHZhciBzdW1tYSA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5ncmlkRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmdyaWREYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICBzdW1tYSA9IHJvd1tjb2x1bW5GaWVsZF0gJiYgIWlzTmFOKHJvd1tjb2x1bW5GaWVsZF0pID8gTnVtYmVyKHJvd1tjb2x1bW5GaWVsZF0pIDogcm93W2NvbHVtbkZpZWxkXSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IHRvdGFsICsgTnVtYmVyKHN1bW1hKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsLnRvRml4ZWQoZGVjID8gZGVjIDogMCk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRQcm9wcztcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShuZXh0UHJvcHMuZ3JpZERhdGEpICE9PSBKU09OLnN0cmluZ2lmeShwcmV2U3RhdGUuZ3JpZERhdGEpIHx8IEpTT04uc3RyaW5naWZ5KG5leHRQcm9wcy5ncmlkQ29sdW1ucykgIT09IEpTT04uc3RyaW5naWZ5KHByZXZTdGF0ZS5ncmlkQ29sdW1ucykgfHwgbmV4dFByb3BzLmdyaWREYXRhLmxlbmd0aCAhPT0gcHJldlN0YXRlLmdyaWREYXRhLmxlbmd0aCB8fCBuZXh0UHJvcHMuaXNTZWxlY3QgIT09IHByZXZTdGF0ZS5pc1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGdyaWREYXRhOiBuZXh0UHJvcHMuZ3JpZERhdGEgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEYXRhR3JpZDtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuRGF0YUdyaWQucHJvcFR5cGVzID0ge1xuICAgIGdyaWRDb2x1bW5zOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBpZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHdpZHRoOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBzaG93OiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKFsndGV4dCcsICdudW1iZXInLCAnaW50ZWdlcicsICdkYXRlJywgJ3N0cmluZycsICdzZWxlY3QnLCAnYm9vbGVhbiddKVxuICAgIH0pKS5pc1JlcXVpcmVkLFxuICAgIGdyaWREYXRhOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgICBvbkNoYW5nZUFjdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvbkRibENsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvbkhlYWRlckNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBjdXN0b21fc3R5bGluZzogUHJvcFR5cGVzLmZ1bmMsXG4gICAgYWN0aXZlUm93OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGhhbmRsZUdyaWRDZWxsQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxuICAgIHNob3dUb29sQmFyOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzdWJ0b3RhbHM6IFByb3BUeXBlcy5hcnJheVxufTtcblxuRGF0YUdyaWQuZGVmYXVsdFByb3BzID0ge1xuICAgIGdyaWRDb2x1bW5zOiBbXSxcbiAgICBncmlkRGF0YTogW10sXG4gICAgc3R5bGU6IHt9LFxuICAgIHNob3dUb29sQmFyOiBmYWxzZSxcbiAgICBpc0ZvclVwZGF0ZTogZmFsc2UsXG4gICAgY3VzdG9tX3N0eWxpbmc6IG51bGwsXG4gICAgc3VidG90YWxzOiBbXVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRhR3JpZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvZGF0YS1ncmlkL2RhdGEtZ3JpZC5qc3hcbi8vIG1vZHVsZSBpZCA9IDE4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnZGVsZXRlJztcblxudmFyIEJ1dHRvblJlZ2lzdGVyRGVsZXRlID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvblJlZ2lzdGVyRGVsZXRlLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uUmVnaXN0ZXJEZWxldGUocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblJlZ2lzdGVyRGVsZXRlKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblJlZ2lzdGVyRGVsZXRlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQnV0dG9uUmVnaXN0ZXJEZWxldGUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblJlZ2lzdGVyRGVsZXRlLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCdkZWxldGUnKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0t1c3R1dGEnLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5EZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVnaXN0ZXJEZWxldGU7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG4vKlxyXG5CdXR0b25SZWdpc3RlckRlbGV0ZS5wcm9wVHlwZXMgPSB7XHJcbiAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXHJcbn1cclxuKi9cblxuQnV0dG9uUmVnaXN0ZXJEZWxldGUuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblJlZ2lzdGVyRGVsZXRlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWRlbGV0ZS9idXR0b24tcmVnaXN0ZXItZGVsZXRlLmpzeFxuLy8gbW9kdWxlIGlkID0gMTkwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIE1vZGFsUGFnZSA9IHJlcXVpcmUoJy4uL21vZGFsUGFnZS5qc3gnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuLi9tb2RhbHBhZ2UtZGVsZXRlL21vZGFscGFnZS1kZWxldGUtc3R5bGVzJyk7XG5cbnZhciBNb2RhbFBhZ2VEZWxldGUgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoTW9kYWxQYWdlRGVsZXRlLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBNb2RhbFBhZ2VEZWxldGUocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsUGFnZURlbGV0ZSk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vZGFsUGFnZURlbGV0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1vZGFsUGFnZURlbGV0ZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3c6IF90aGlzLnByb3BzLnNob3dcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8vIHdpbGwgdXBkYXRlIHN0YXRlIGlmIHByb3BzIGNoYW5nZWRcblxuXG4gICAgX2NyZWF0ZUNsYXNzKE1vZGFsUGFnZURlbGV0ZSwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBtb2RhbE9iamVjdHMgPSBbJ2J0bk9rJywgJ2J0bkNhbmNlbCddO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBNb2RhbFBhZ2UsXG4gICAgICAgICAgICAgICAgeyByZWY6ICdtb2RhbFBhZ2UnLFxuICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogdGhpcy5wcm9wcy5tb2RhbFBhZ2VCdG5DbGljayxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5zdGF0ZS5zaG93LFxuICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VOYW1lOiAnRGVsZXRlIGRvY3VtZW50JyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2NvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb24gfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ21lc3NhZ2UnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEthcyBrdXN0dXRhIGRva3VtZW50ID8gJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLnNob3cgIT09IHByZXZTdGF0ZS5zaG93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc2hvdzogbmV4dFByb3BzLnNob3cgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNb2RhbFBhZ2VEZWxldGU7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuLypcclxuTW9kYWxQYWdlRGVsZXRlLnByb3BUeXBlcyA9IHtcclxuICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXHJcbn1cclxuKi9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGFsUGFnZURlbGV0ZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1kZWxldGUvbW9kYWxQYWdlLWRlbGV0ZS5qc3hcbi8vIG1vZHVsZSBpZCA9IDE5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2ljb246Jy9pbWFnZXMvaWNvbnMvZGVsZXRlLnBuZyd9O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLWRlbGV0ZS9tb2RhbHBhZ2UtZGVsZXRlLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIHJhZGl1bSA9IHJlcXVpcmUoJ3JhZGl1bScpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGVzJyk7XG5cbnZhciBJbnB1dCA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhJbnB1dCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gSW5wdXQocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElucHV0KTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoSW5wdXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihJbnB1dCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBCb29sZWFuKHByb3BzLnZhbHVlKSxcbiAgICAgICAgICAgIHJlYWRPbmx5OiBwcm9wcy5yZWFkT25seSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZFxuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5vbkNoYW5nZSA9IF90aGlzLm9uQ2hhbmdlLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG5cbiAgICBfY3JlYXRlQ2xhc3MoSW5wdXQsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzWydjaGVja2JveCddLmNoZWNrZWQgPSB0aGlzLnN0YXRlLnZhbHVlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkNoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBlLnRhcmdldC5jaGVja2VkO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmFsdWU6IHZhbHVlIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUucmVhZE9ubHkgJiYgdGhpcy5wcm9wcy5vbkNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy5uYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5pbnB1dCwgdGhpcy5wcm9wcy53aWR0aCA/IHsgd2lkdGg6IHRoaXMucHJvcHMud2lkdGggfSA6IHt9LCB0aGlzLnN0YXRlLnJlYWRPbmx5ID8gc3R5bGVzLnJlYWRPbmx5IDoge30pO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMud3JhcHBlciB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5sYWJlbCwgaHRtbEZvcjogdGhpcy5wcm9wcy5uYW1lLCByZWY6ICdsYWJlbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50aXRsZVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnByb3BzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGlucHV0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRoaXMuc3RhdGUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0aGlzLnN0YXRlLnJlYWRPbmx5LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuc3RhdGUucmVhZE9ubHlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINGD0YHRgtCw0L3QvtCy0LjRgiDRhNC+0LrRg9GBINC90LAg0Y3Qu9C10LzQtdC90YLRi1xyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmb2N1cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICAgICAgICAgIHRoaXMucmVmc1snY2hlY2tib3gnXS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMudmFsdWUgIT09IHByZXZTdGF0ZS52YWx1ZSB8fCBuZXh0UHJvcHMucmVhZE9ubHkgIT09IHByZXZTdGF0ZS5yZWFkT25seSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBuZXh0UHJvcHMudmFsdWUsIHJlYWRPbmx5OiBuZXh0UHJvcHMucmVhZE9ubHkgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBJbnB1dDtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbklucHV0LnByb3BUeXBlcyA9IHtcbiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5ib29sLFxuICAgIHJlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmdcbn07XG5cbklucHV0LmRlZmF1bHRQcm9wcyA9IHtcbiAgICByZWFkT25seTogZmFsc2UsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHZhbHVlOiBmYWxzZSxcbiAgICB0aXRsZTogJydcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcmFkaXVtKElucHV0KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtY2hlY2tib3gvaW5wdXQtY2hlY2tib3guanN4XG4vLyBtb2R1bGUgaWQgPSAxOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtpbnB1dDp7Jzpmb2N1cyc6e2JhY2tncm91bmRDb2xvcjonbGlnaHRwaW5rJ319LHJlYWRPbmx5OntiYWNrZ3JvdW5kQ29sb3I6JyNGM0VGRUYnfSx3cmFwcGVyOnttYXJnaW46JzVweCcsZGlzcGxheTonZmxleCcsd2lkdGg6Jzk1JSd9LGxhYmVsOnt3aWR0aDonMzAlJyxtYXJnaW46JzVweCd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtY2hlY2tib3gvc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5BTExfUFJJTlRBQkxFX0tFWVM9ZXhwb3J0cy5BTExfS0VZUz1leHBvcnRzLktleXM9ZXhwb3J0cy5zZXRCaW5kaW5nPWV4cG9ydHMua2V5ZG93blNjb3BlZD1leHBvcnRzLmRlZmF1bHQ9dW5kZWZpbmVkO3ZhciBfZGVjb3JhdG9ycz1yZXF1aXJlKCcuL2RlY29yYXRvcnMnKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnZGVmYXVsdCcse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlY29yYXRvcnMpLmRlZmF1bHQ7fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCdrZXlkb3duU2NvcGVkJyx7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gX2RlY29yYXRvcnMua2V5ZG93blNjb3BlZDt9fSk7dmFyIF9zdG9yZT1yZXF1aXJlKCcuL3N0b3JlJyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsJ3NldEJpbmRpbmcnLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiBfc3RvcmUuc2V0QmluZGluZzt9fSk7dmFyIF9rZXlzPXJlcXVpcmUoJy4vbGliL2tleXMnKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnS2V5cycse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpLmRlZmF1bHQ7fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCdBTExfS0VZUycse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIF9rZXlzLkFMTF9LRVlTO319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnQUxMX1BSSU5UQUJMRV9LRVlTJyx7ZW51bWVyYWJsZTp0cnVlLGdldDpmdW5jdGlvbiBnZXQoKXtyZXR1cm4gX2tleXMuQUxMX1BSSU5UQUJMRV9LRVlTO319KTtyZXF1aXJlKCcuL2xpYi9hcnJheS5mcm9tJyk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O31cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qta2V5ZG93bi9kaXN0L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBfdHlwZW9mMj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmtleWRvd25TY29wZWQ9dW5kZWZpbmVkO3ZhciBfdHlwZW9mPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJl90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcik9PT1cInN5bWJvbFwiP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mMihvYmopO307LyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGRlY29yYXRvcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi92YXIgX2NsYXNzX2RlY29yYXRvcj1yZXF1aXJlKCcuL2NsYXNzX2RlY29yYXRvcicpO3ZhciBfY2xhc3NfZGVjb3JhdG9yMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc19kZWNvcmF0b3IpO3ZhciBfbWV0aG9kX2RlY29yYXRvcj1yZXF1aXJlKCcuL21ldGhvZF9kZWNvcmF0b3InKTt2YXIgX21ldGhvZF9kZWNvcmF0b3IyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZF9kZWNvcmF0b3IpO3ZhciBfbWV0aG9kX2RlY29yYXRvcl9zY29wZWQ9cmVxdWlyZSgnLi9tZXRob2RfZGVjb3JhdG9yX3Njb3BlZCcpO3ZhciBfbWV0aG9kX2RlY29yYXRvcl9zY29wZWQyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ldGhvZF9kZWNvcmF0b3Jfc2NvcGVkKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fS8qKlxuICogbm9vcERlY29yYXRvclxuICpcbiAqIEBhY2Nlc3MgcHJpdmF0ZVxuICogQHJldHVybiB7dW5kZWZpbmVkfSBSZXR1cm5zIGB1bmRlZmluZWRgIHNvIHRoYXQgdGhlIG9yaWdpbmFsIHVuZGVjb3JhdGVkIGluc3RhbmNlL21ldGhvZCBpcyB1c2VkXG4gKi9mdW5jdGlvbiBub29wRGVjb3JhdG9yKCl7cmV0dXJuIHVuZGVmaW5lZDt9LyoqXG4gKiBfZGVjb3JhdG9yXG4gKlxuICogQGFjY2VzcyBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2RGbiBUaGUgbWV0aG9kIHdyYXBwZXIgdG8gZGVsZWdhdGUgdG8sIGJhc2VkIG9uIHdoZXRoZXIgdXNlciBoYXMgc3BlY2lmaWVkIGEgc2NvcGVkIGRlY29yYXRvciBvciBub3RcbiAqIEBwYXJhbSB7QXJyYXl9IC4uLmFyZ3MgUmVtYWluZGVyIG9mIGFyZ3VtZW50cyBwYXNzZWQgaW5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgZGVjb3JhdGVkIGNsYXNzIG9yIG1ldGhvZFxuICovZnVuY3Rpb24gX2RlY29yYXRvcihtZXRob2RGbil7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheShfbGVuPjE/X2xlbi0xOjApLF9rZXk9MTtfa2V5PF9sZW47X2tleSsrKXthcmdzW19rZXktMV09YXJndW1lbnRzW19rZXldO30vLyBjaGVjayB0aGUgZmlyc3QgYXJndW1lbnQgdG8gc2VlIGlmIGl0J3MgYSB1c2VyLXN1cHBsaWVkIGtleWNvZGUgb3IgYXJyYXlcbi8vIG9mIGtleWNvZGVzLCBvciBpZiBpdCdzIHRoZSB3cmFwcGVkIGNsYXNzIG9yIG1ldGhvZFxudmFyIHRlc3RBcmc9YXJnc1swXTt2YXIgaXNBcnJheT1BcnJheS5pc0FycmF5KHRlc3RBcmcpOy8vIGlmIHRoZSB0ZXN0IGFyZ3VtZW50IGlzIG5vdCBhbiBvYmplY3Qgb3IgZnVuY3Rpb24sIGl0IGlzIHVzZXItc3VwcGxpZWRcbi8vIGtleWNvZGVzLiBlbHNlIHRoZXJlIGFyZSBubyBhcmd1bWVudHMgYW5kIGl0J3MganVzdCB0aGUgd3JhcHBlZCBjbGFzc1xuaWYoaXNBcnJheXx8flsnc3RyaW5nJywnbnVtYmVyJywnc3ltYm9sJ10uaW5kZXhPZih0eXBlb2YgdGVzdEFyZz09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YodGVzdEFyZykpKXt2YXIga2V5cz1pc0FycmF5P3Rlc3RBcmc6YXJnczsvLyByZXR1cm4gdGhlIGRlY29yYXRvciBmdW5jdGlvbiwgd2hpY2ggb24gdGhlIG5leHQgY2FsbCB3aWxsIGxvb2sgZm9yXG4vLyB0aGUgcHJlc2VuY2Ugb2YgYSBtZXRob2QgbmFtZSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhIHdyYXBwZWQgbWV0aG9kXG4vLyBvciBjb21wb25lbnRcbnJldHVybiBmdW5jdGlvbih0YXJnZXQsbWV0aG9kTmFtZSxkZXNjcmlwdG9yKXtyZXR1cm4gbWV0aG9kTmFtZT9tZXRob2RGbih7dGFyZ2V0OnRhcmdldCxkZXNjcmlwdG9yOmRlc2NyaXB0b3Isa2V5czprZXlzfSk6KDAsX2NsYXNzX2RlY29yYXRvcjIuZGVmYXVsdCkodGFyZ2V0LGtleXMpO307fWVsc2V7dmFyIFdyYXBwZWRDb21wb25lbnQ9YXJnc1swXTt2YXIgbWV0aG9kTmFtZT1hcmdzWzFdOy8vIG1ldGhvZCBkZWNvcmF0b3JzIHdpdGhvdXQga2V5Y29kZSAod2hpY2gpIGFyZ3VtZW50cyBhcmUgbm90IGFsbG93ZWQuXG5pZihXcmFwcGVkQ29tcG9uZW50JiYhbWV0aG9kTmFtZSl7cmV0dXJuIF9jbGFzc19kZWNvcmF0b3IyLmRlZmF1bHQuYXBwbHkodW5kZWZpbmVkLGFyZ3MpO31lbHNle2NvbnNvbGUud2FybihtZXRob2ROYW1lKyc6IE1ldGhvZCBkZWNvcmF0b3JzIG11c3QgaGF2ZSBrZXljb2RlIGFyZ3VtZW50cywgc28gdGhlIGRlY29yYXRvciBmb3IgdGhpcyBtZXRob2Qgd2lsbCBub3QgZG8gYW55dGhpbmcnKTtyZXR1cm4gbm9vcERlY29yYXRvcjt9fX0vKipcbiAqIGtleWRvd25TY29wZWRcbiAqXG4gKiBNZXRob2QgZGVjb3JhdG9yIHRoYXQgd2lsbCBsb29rIGZvciBjaGFuZ2VzIHRvIGl0cyB0YXJnZXRlZCBjb21wb25lbnQnc1xuICogYGtleWRvd25gIHByb3BzIHRvIGRlY2lkZSB3aGVuIHRvIHRyaWdnZXIsIHJhdGhlciB0aGFuIHJlc3BvbmRpbmcgZGlyZWN0bHlcbiAqIHRvIGtleWRvd24gZXZlbnRzLiBUaGlzIGxldHMgeW91IHNwZWNpZnkgYSBAa2V5ZG93biBkZWNvcmF0ZWQgY2xhc3MgaGlnaGVyXG4gKiB1cCBpbiB0aGUgdmlldyBoaWVyYXJjaHkgZm9yIGxhcmdlciBzY29waW5nIG9mIGtleWRvd24gZXZlbnRzLCBvciBmb3JcbiAqIHByb2dyYW1tYXRpY2FsbHkgc2VuZGluZyBrZXlkb3duIGV2ZW50cyBhcyBwcm9wcyBpbnRvIHRoZSBjb21wb25lbnRzIGluIG9yZGVyXG4gKiB0byB0cmlnZ2VyIGRlY29yYXRlZCBtZXRob2RzIHdpdGggbWF0Y2hpbmcga2V5cy5cbiAqXG4gKiBAYWNjZXNzIHB1YmxpY1xuICogQHBhcmFtIHtBcnJheX0gLi4uYXJncyAgQWxsIChvciBubykgYXJndW1lbnRzIHBhc3NlZCBpbiBmcm9tIGRlY29yYXRpb25cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgZGVjb3JhdGVkIGNsYXNzIG9yIG1ldGhvZFxuICovZnVuY3Rpb24ga2V5ZG93blNjb3BlZCgpe2Zvcih2YXIgX2xlbjI9YXJndW1lbnRzLmxlbmd0aCxhcmdzPUFycmF5KF9sZW4yKSxfa2V5Mj0wO19rZXkyPF9sZW4yO19rZXkyKyspe2FyZ3NbX2tleTJdPWFyZ3VtZW50c1tfa2V5Ml07fXJldHVybiBfZGVjb3JhdG9yLmFwcGx5KHVuZGVmaW5lZCxbX21ldGhvZF9kZWNvcmF0b3Jfc2NvcGVkMi5kZWZhdWx0XS5jb25jYXQoYXJncykpO30vKipcbiAqIGtleWRvd25cbiAqXG4gKiBUaGUgbWFpbiBkZWNvcmF0b3IgYW5kIGRlZmF1bHQgZXhwb3J0LCBoYW5kbGVzIGJvdGggY2xhc3NlcyBhbmQgbWV0aG9kcy5cbiAqXG4gKiBAYWNjZXNzIHB1YmxpY1xuICogQHBhcmFtIHtBcnJheX0gLi4uYXJncyAgQWxsIChvciBubykgYXJndW1lbnRzIHBhc3NlZCBpbiBmcm9tIGRlY29yYXRpb25cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgZGVjb3JhdGVkIGNsYXNzIG9yIG1ldGhvZFxuICovZnVuY3Rpb24ga2V5ZG93bigpe2Zvcih2YXIgX2xlbjM9YXJndW1lbnRzLmxlbmd0aCxhcmdzPUFycmF5KF9sZW4zKSxfa2V5Mz0wO19rZXkzPF9sZW4zO19rZXkzKyspe2FyZ3NbX2tleTNdPWFyZ3VtZW50c1tfa2V5M107fXJldHVybiBfZGVjb3JhdG9yLmFwcGx5KHVuZGVmaW5lZCxbX21ldGhvZF9kZWNvcmF0b3IyLmRlZmF1bHRdLmNvbmNhdChhcmdzKSk7fWV4cG9ydHMuZGVmYXVsdD1rZXlkb3duO2V4cG9ydHMua2V5ZG93blNjb3BlZD1rZXlkb3duU2NvcGVkO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvZGVjb3JhdG9ycy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTk2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzt2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgX2V4dGVuZHM9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXTtmb3IodmFyIGtleSBpbiBzb3VyY2Upe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2Usa2V5KSl7dGFyZ2V0W2tleV09c291cmNlW2tleV07fX19cmV0dXJuIHRhcmdldDt9O3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKFwidmFsdWVcImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX1yZXR1cm4gZnVuY3Rpb24oQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fTt9KCk7dmFyIF9yZWFjdD1yZXF1aXJlKCdyZWFjdCcpO3ZhciBfcmVhY3QyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTt2YXIgX3N0b3JlPXJlcXVpcmUoJy4uL3N0b3JlJyk7dmFyIHN0b3JlPV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9zdG9yZSk7dmFyIF9ldmVudF9oYW5kbGVycz1yZXF1aXJlKCcuLi9ldmVudF9oYW5kbGVycycpO3ZhciBfa2V5cz1yZXF1aXJlKCcuLi9saWIva2V5cycpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iail7aWYob2JqJiZvYmouX19lc01vZHVsZSl7cmV0dXJuIG9iajt9ZWxzZXt2YXIgbmV3T2JqPXt9O2lmKG9iaiE9bnVsbCl7Zm9yKHZhciBrZXkgaW4gb2JqKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSkpbmV3T2JqW2tleV09b2JqW2tleV07fX1uZXdPYmouZGVmYXVsdD1vYmo7cmV0dXJuIG5ld09iajt9fWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO319ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZixjYWxsKXtpZighc2VsZil7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO31yZXR1cm4gY2FsbCYmKCh0eXBlb2YgY2FsbD09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mKGNhbGwpKT09PVwib2JqZWN0XCJ8fHR5cGVvZiBjYWxsPT09XCJmdW5jdGlvblwiKT9jYWxsOnNlbGY7fWZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PVwiZnVuY3Rpb25cIiYmc3VwZXJDbGFzcyE9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiKyh0eXBlb2Ygc3VwZXJDbGFzcz09PVwidW5kZWZpbmVkXCI/XCJ1bmRlZmluZWRcIjpfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7fXN1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MmJnN1cGVyQ2xhc3MucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6c3ViQ2xhc3MsZW51bWVyYWJsZTpmYWxzZSx3cml0YWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfX0pO2lmKHN1cGVyQ2xhc3MpT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcyxzdXBlckNsYXNzKTpzdWJDbGFzcy5fX3Byb3RvX189c3VwZXJDbGFzczt9LyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAbW9kdWxlIGNvbXBvbmVudFdyYXBwZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi8vKipcbiAqIGNvbXBvbmVudFdyYXBwZXJcbiAqXG4gKiBAYWNjZXNzIHB1YmxpY1xuICogQHBhcmFtIHtvYmplY3R9IFdyYXBwZWRDb21wb25lbnQgUmVhY3QgY29tcG9uZW50IGNsYXNzIHRvIGJlIHdyYXBwZWRcbiAqIEBwYXJhbSB7YXJyYXl9IFtrZXlzXSBUaGUga2V5KHMpIGJvdW5kIHRvIHRoZSBjbGFzc1xuICogQHJldHVybiB7b2JqZWN0fSBUaGUgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgd3JhcHMgdGhlIGRlY29yYXRlZCBjbGFzc1xuICovZnVuY3Rpb24gY29tcG9uZW50V3JhcHBlcihXcmFwcGVkQ29tcG9uZW50KXt2YXIga2V5cz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMV06X2tleXMuQUxMX0tFWVM7dmFyIEtleUJvYXJkSGVscGVyPWZ1bmN0aW9uKF9SZWFjdCRDb21wb25lbnQpe19pbmhlcml0cyhLZXlCb2FyZEhlbHBlcixfUmVhY3QkQ29tcG9uZW50KTtmdW5jdGlvbiBLZXlCb2FyZEhlbHBlcihwcm9wcyl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsS2V5Qm9hcmRIZWxwZXIpO3ZhciBfdGhpcz1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLChLZXlCb2FyZEhlbHBlci5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihLZXlCb2FyZEhlbHBlcikpLmNhbGwodGhpcyxwcm9wcykpO190aGlzLnN0YXRlPXtldmVudDpudWxsfTtyZXR1cm4gX3RoaXM7fV9jcmVhdGVDbGFzcyhLZXlCb2FyZEhlbHBlcixbe2tleTonY29tcG9uZW50RGlkTW91bnQnLHZhbHVlOmZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCl7KDAsX2V2ZW50X2hhbmRsZXJzLm9uTW91bnQpKHRoaXMpO319LHtrZXk6J2NvbXBvbmVudFdpbGxVbm1vdW50Jyx2YWx1ZTpmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpeygwLF9ldmVudF9oYW5kbGVycy5vblVubW91bnQpKHRoaXMpO319LHtrZXk6J2hhbmRsZUtleURvd24nLHZhbHVlOmZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpe3ZhciBfdGhpczI9dGhpczsvLyB0byBzaW11bGF0ZSBhIGtleXByZXNzLCBzZXQgdGhlIGV2ZW50IGFuZCB0aGVuIGNsZWFyIGl0IGluIHRoZSBjYWxsYmFja1xudGhpcy5zZXRTdGF0ZSh7ZXZlbnQ6ZXZlbnR9LGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzMi5zZXRTdGF0ZSh7ZXZlbnQ6bnVsbH0pO30pO319LHtrZXk6J3JlbmRlcicsdmFsdWU6ZnVuY3Rpb24gcmVuZGVyKCl7cmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFdyYXBwZWRDb21wb25lbnQsX2V4dGVuZHMoe30sdGhpcy5wcm9wcyx7a2V5ZG93bjp0aGlzLnN0YXRlfSkpO319XSk7cmV0dXJuIEtleUJvYXJkSGVscGVyO30oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7c3RvcmUuc2V0QmluZGluZyh7a2V5czpbXS5jb25jYXQoa2V5cyksZm46S2V5Qm9hcmRIZWxwZXIucHJvdG90eXBlLmhhbmRsZUtleURvd24sdGFyZ2V0OktleUJvYXJkSGVscGVyLnByb3RvdHlwZX0pO3JldHVybiBLZXlCb2FyZEhlbHBlcjt9ZXhwb3J0cy5kZWZhdWx0PWNvbXBvbmVudFdyYXBwZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWtleWRvd24vZGlzdC9kZWNvcmF0b3JzL2NsYXNzX2RlY29yYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTk3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBfc2xpY2VkVG9BcnJheT1mdW5jdGlvbigpe2Z1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLGkpe3ZhciBfYXJyPVtdO3ZhciBfbj10cnVlO3ZhciBfZD1mYWxzZTt2YXIgX2U9dW5kZWZpbmVkO3RyeXtmb3IodmFyIF9pPWFycltTeW1ib2wuaXRlcmF0b3JdKCksX3M7IShfbj0oX3M9X2kubmV4dCgpKS5kb25lKTtfbj10cnVlKXtfYXJyLnB1c2goX3MudmFsdWUpO2lmKGkmJl9hcnIubGVuZ3RoPT09aSlicmVhazt9fWNhdGNoKGVycil7X2Q9dHJ1ZTtfZT1lcnI7fWZpbmFsbHl7dHJ5e2lmKCFfbiYmX2lbXCJyZXR1cm5cIl0pX2lbXCJyZXR1cm5cIl0oKTt9ZmluYWxseXtpZihfZCl0aHJvdyBfZTt9fXJldHVybiBfYXJyO31yZXR1cm4gZnVuY3Rpb24oYXJyLGkpe2lmKEFycmF5LmlzQXJyYXkoYXJyKSl7cmV0dXJuIGFycjt9ZWxzZSBpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpe3JldHVybiBzbGljZUl0ZXJhdG9yKGFycixpKTt9ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTt9fTt9KCk7ZXhwb3J0cy5fcmVzZXRTdG9yZT1fcmVzZXRTdG9yZTtleHBvcnRzLmFjdGl2YXRlPWFjdGl2YXRlO2V4cG9ydHMuZGVsZXRlSW5zdGFuY2U9ZGVsZXRlSW5zdGFuY2U7ZXhwb3J0cy5maW5kQmluZGluZ0ZvckV2ZW50PWZpbmRCaW5kaW5nRm9yRXZlbnQ7ZXhwb3J0cy5nZXRCaW5kaW5nPWdldEJpbmRpbmc7ZXhwb3J0cy5nZXRJbnN0YW5jZXM9Z2V0SW5zdGFuY2VzO2V4cG9ydHMuaXNFbXB0eT1pc0VtcHR5O2V4cG9ydHMuc2V0QmluZGluZz1zZXRCaW5kaW5nO3ZhciBfbWF0Y2hfa2V5cz1yZXF1aXJlKCcuL2xpYi9tYXRjaF9rZXlzJyk7dmFyIF9tYXRjaF9rZXlzMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXRjaF9rZXlzKTt2YXIgX3BhcnNlX2tleXM9cmVxdWlyZSgnLi9saWIvcGFyc2Vfa2V5cycpO3ZhciBfcGFyc2Vfa2V5czI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2Vfa2V5cyk7dmFyIF91dWlkPXJlcXVpcmUoJy4vbGliL3V1aWQnKTt2YXIgX3V1aWQyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V1aWQpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycil7aWYoQXJyYXkuaXNBcnJheShhcnIpKXtmb3IodmFyIGk9MCxhcnIyPUFycmF5KGFyci5sZW5ndGgpO2k8YXJyLmxlbmd0aDtpKyspe2FycjJbaV09YXJyW2ldO31yZXR1cm4gYXJyMjt9ZWxzZXtyZXR1cm4gQXJyYXkuZnJvbShhcnIpO319LyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBzdG9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovLyoqXG4gKiBwcml2YXRlXG4gKlxuICovLy8gZGljdCBmb3IgY2xhc3MgcHJvdG90eXBlcyA9PiBiaW5kaW5nc1xudmFyIF9oYW5kbGVycz1uZXcgTWFwKCk7Ly8gYWxsIG1vdW50ZWQgaW5zdGFuY2VzIHRoYXQgaGF2ZSBrZXliaW5kaW5nc1xudmFyIF9pbnN0YW5jZXM9bmV3IFNldCgpOy8vIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBfcmVzZXRTdG9yZSgpe19oYW5kbGVycy5jbGVhcigpO19pbnN0YW5jZXMuY2xlYXIoKTt9LyoqXG4gKiBhY3RpdmF0ZVxuICpcbiAqIEBhY2Nlc3MgcHVibGljXG4gKiBAcGFyYW0ge29iamVjdH0gaW5zdGFuY2UgSW5zdGFudGlhdGVkIGNsYXNzIHRoYXQgZXh0ZW5kZWQgUmVhY3QuQ29tcG9uZW50LCB0byBiZSBmb2N1c2VkIHRvIHJlY2VpdmUga2V5ZG93biBldmVudHNcbiAqL2Z1bmN0aW9uIGFjdGl2YXRlKGluc3RhbmNlcyl7dmFyIGluc3RhbmNlc0FycmF5PVtdLmNvbmNhdChpbnN0YW5jZXMpOy8vIGlmIG5vIGNvbXBvbmVudHMgd2VyZSBmb3VuZCBhcyBhbmNlc3RvcnMgb2YgdGhlIGV2ZW50IHRhcmdldCxcbi8vIGVmZmVjdGl2ZWx5IGRlYWN0aXZhdGUga2V5ZG93biBoYW5kbGluZyBieSBjYXBwaW5nIHRoZSBzZXQgb2YgaW5zdGFuY2VzXG4vLyB3aXRoIGBudWxsYC5cbmlmKCFpbnN0YW5jZXNBcnJheS5sZW5ndGgpe19pbnN0YW5jZXMuYWRkKG51bGwpO31lbHNle19pbnN0YW5jZXMuZGVsZXRlKG51bGwpOy8vIGRlbGV0aW5nIGFuZCB0aGVuIGFkZGluZyB0aGUgaW5zdGFuY2UocykgaGFzIHRoZSBlZmZlY3Qgb2Ygc29ydGluZyB0aGUgc2V0XG4vLyBhY2NvcmRpbmcgdG8gaW5zdGFuY2UgYWN0aXZhdGlvbiAoYXNjZW5kaW5nKVxuaW5zdGFuY2VzQXJyYXkuZm9yRWFjaChmdW5jdGlvbihpbnN0YW5jZSl7X2luc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO19pbnN0YW5jZXMuYWRkKGluc3RhbmNlKTt9KTt9fTsvKipcbiAqIGRlbGV0ZUluc3RhbmNlXG4gKlxuICogQGFjY2VzcyBwdWJsaWNcbiAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXQgSW5zdGFudGlhdGVkIGNsYXNzIHRoYXQgZXh0ZW5kZWQgUmVhY3QuQ29tcG9uZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmFsdWUgc2V0LmhhcyggdGFyZ2V0ICkgd291bGQgaGF2ZSByZXR1cm5lZCBwcmlvciB0byBkZWxldGlvblxuICovZnVuY3Rpb24gZGVsZXRlSW5zdGFuY2UodGFyZ2V0KXtfaW5zdGFuY2VzLmRlbGV0ZSh0YXJnZXQpO307ZnVuY3Rpb24gZmluZEJpbmRpbmdGb3JFdmVudChldmVudCl7aWYoIV9pbnN0YW5jZXMuaGFzKG51bGwpKXt2YXIga2V5TWF0Y2hlc0V2ZW50PWZ1bmN0aW9uIGtleU1hdGNoZXNFdmVudChrZXlTZXQpe3JldHVybigwLF9tYXRjaF9rZXlzMi5kZWZhdWx0KSh7a2V5U2V0OmtleVNldCxldmVudDpldmVudH0pO307Ly8gbG9vcCB0aHJvdWdoIGluc3RhbmNlcyBpbiByZXZlcnNlIGFjdGl2YXRpb24gb3JkZXIgc28gdGhhdCBtb3N0XG4vLyByZWNlbnRseSBhY3RpdmF0ZWQgaW5zdGFuY2UgZ2V0cyBmaXJzdCBkaWJzIG9uIGV2ZW50XG52YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbj10cnVlO3ZhciBfZGlkSXRlcmF0b3JFcnJvcj1mYWxzZTt2YXIgX2l0ZXJhdG9yRXJyb3I9dW5kZWZpbmVkO3RyeXtmb3IodmFyIF9pdGVyYXRvcj1bXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KF9pbnN0YW5jZXMpKS5yZXZlcnNlKClbU3ltYm9sLml0ZXJhdG9yXSgpLF9zdGVwOyEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbj0oX3N0ZXA9X2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7X2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbj10cnVlKXt2YXIgaW5zdGFuY2U9X3N0ZXAudmFsdWU7dmFyIGJpbmRpbmdzPWdldEJpbmRpbmcoaW5zdGFuY2UuY29uc3RydWN0b3IucHJvdG90eXBlKTt2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjI9dHJ1ZTt2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyPWZhbHNlO3ZhciBfaXRlcmF0b3JFcnJvcjI9dW5kZWZpbmVkO3RyeXtmb3IodmFyIF9pdGVyYXRvcjI9YmluZGluZ3NbU3ltYm9sLml0ZXJhdG9yXSgpLF9zdGVwMjshKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yPShfc3RlcDI9X2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpO19pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yPXRydWUpe3ZhciBfc3RlcDIkdmFsdWU9X3NsaWNlZFRvQXJyYXkoX3N0ZXAyLnZhbHVlLDIpLGtleVNldHM9X3N0ZXAyJHZhbHVlWzBdLGZuPV9zdGVwMiR2YWx1ZVsxXTtpZihrZXlTZXRzLnNvbWUoa2V5TWF0Y2hlc0V2ZW50KSl7Ly8gcmV0dXJuIHdoZW4gbWF0Y2hpbmcga2V5YmluZGluZyBpcyBmb3VuZCAtIGkuZS4gb25seSBvbmVcbi8vIGtleWJvdW5kIGNvbXBvbmVudCBjYW4gcmVzcG9uZCB0byBhIGdpdmVuIGtleSBjb2RlLiB0byBnZXQgYXJvdW5kIHRoaXMsXG4vLyBzY29wZSBhIGNvbW1vbiBhbmNlc3RvciBjb21wb25lbnQgY2xhc3Mgd2l0aCBAa2V5ZG93biBhbmQgdXNlXG4vLyBAa2V5ZG93blNjb3BlZCB0byBiaW5kIHRoZSBkdXBsaWNhdGUga2V5cyBpbiB5b3VyIGNoaWxkIGNvbXBvbmVudHNcbi8vIChvciBqdXN0IGluc3BlY3QgbmV4dFByb3BzLmtleWRvd24uZXZlbnQpLlxucmV0dXJue2ZuOmZuLGluc3RhbmNlOmluc3RhbmNlfTt9fX1jYXRjaChlcnIpe19kaWRJdGVyYXRvckVycm9yMj10cnVlO19pdGVyYXRvckVycm9yMj1lcnI7fWZpbmFsbHl7dHJ5e2lmKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiYmX2l0ZXJhdG9yMi5yZXR1cm4pe19pdGVyYXRvcjIucmV0dXJuKCk7fX1maW5hbGx5e2lmKF9kaWRJdGVyYXRvckVycm9yMil7dGhyb3cgX2l0ZXJhdG9yRXJyb3IyO319fX19Y2F0Y2goZXJyKXtfZGlkSXRlcmF0b3JFcnJvcj10cnVlO19pdGVyYXRvckVycm9yPWVycjt9ZmluYWxseXt0cnl7aWYoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24mJl9pdGVyYXRvci5yZXR1cm4pe19pdGVyYXRvci5yZXR1cm4oKTt9fWZpbmFsbHl7aWYoX2RpZEl0ZXJhdG9yRXJyb3Ipe3Rocm93IF9pdGVyYXRvckVycm9yO319fX1yZXR1cm4gbnVsbDt9Oy8qKlxuICogZ2V0QmluZGluZ1xuICpcbiAqIEBhY2Nlc3MgcHVibGljXG4gKiBAcGFyYW0ge29iamVjdH0gdGFyZ2V0IENsYXNzIHVzZWQgYXMga2V5IGluIGRpY3Qgb2Yga2V5IGJpbmRpbmdzXG4gKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBvYmplY3QgY29udGFpbmluZyBiaW5kaW5ncyBmb3IgdGhlIGdpdmVuIGNsYXNzXG4gKi9mdW5jdGlvbiBnZXRCaW5kaW5nKF9yZWYpe3ZhciBfX3JlYWN0S2V5ZG93blVVSUQ9X3JlZi5fX3JlYWN0S2V5ZG93blVVSUQ7cmV0dXJuIF9oYW5kbGVycy5nZXQoX19yZWFjdEtleWRvd25VVUlEKTt9Oy8qKlxuICogZ2V0SW5zdGFuY2VzXG4gKlxuICogQGFjY2VzcyBwdWJsaWNcbiAqIEByZXR1cm4ge3NldH0gQWxsIHN0b3JlZCBpbnN0YW5jZXMgKGFsbCBtb3VudGVkIGNvbXBvbmVudCBpbnN0YW5jZXMgd2l0aCBrZXliaW5kaW5ncylcbiAqL2Z1bmN0aW9uIGdldEluc3RhbmNlcygpe3JldHVybiBfaW5zdGFuY2VzO307LyoqXG4gKiBpc0VtcHR5XG4gKlxuICogQGFjY2VzcyBwdWJsaWNcbiAqIEByZXR1cm4ge251bWJlcn0gU2l6ZSBvZiB0aGUgc2V0IG9mIGFsbCBzdG9yZWQgaW5zdGFuY2VzXG4gKi9mdW5jdGlvbiBpc0VtcHR5KCl7cmV0dXJuIV9pbnN0YW5jZXMuc2l6ZTt9Oy8qKlxuICogc2V0QmluZGluZ1xuICpcbiAqIEBhY2Nlc3MgcHVibGljXG4gKiBAcGFyYW0ge29iamVjdH0gYXJncyBBbGwgYXJndW1lbnRzIG5lY2Vzc2FyeSB0byBzZXQgdGhlIGJpbmRpbmdcbiAqIEBwYXJhbSB7YXJyYXl9IGFyZ3Mua2V5cyBLZXkgY29kZXMgdGhhdCBzaG91bGQgdHJpZ2dlciB0aGUgZm5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGFyZ3MuZm4gVGhlIGNhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuIGdpdmVuIGtleXMgYXJlIHByZXNzZWRcbiAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzLnRhcmdldCBUaGUgZGVjb3JhdGVkIGNsYXNzXG4gKi9mdW5jdGlvbiBzZXRCaW5kaW5nKF9yZWYyKXt2YXIga2V5cz1fcmVmMi5rZXlzLGZuPV9yZWYyLmZuLHRhcmdldD1fcmVmMi50YXJnZXQ7dmFyIGtleVNldHM9KDAsX3BhcnNlX2tleXMyLmRlZmF1bHQpKGtleXMpO3ZhciBfX3JlYWN0S2V5ZG93blVVSUQ9dGFyZ2V0Ll9fcmVhY3RLZXlkb3duVVVJRDtpZighX19yZWFjdEtleWRvd25VVUlEKXt0YXJnZXQuX19yZWFjdEtleWRvd25VVUlEPSgwLF91dWlkMi5kZWZhdWx0KSgpO19oYW5kbGVycy5zZXQodGFyZ2V0Ll9fcmVhY3RLZXlkb3duVVVJRCxuZXcgTWFwKFtba2V5U2V0cyxmbl1dKSk7fWVsc2V7X2hhbmRsZXJzLmdldChfX3JlYWN0S2V5ZG93blVVSUQpLnNldChrZXlTZXRzLGZuKTt9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qta2V5ZG93bi9kaXN0L3N0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSAxOThcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIF9rZXlzPXJlcXVpcmUoJy4va2V5cycpO3ZhciBQUklOVEFCTEVfQ0hBUkFDVEVSUz0nMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVp+IUAjJCVeJiooKS1fKz1bXVxcXFx7fXw7XFwnOlwiLC4vPD4/wqMnO3ZhciBtb2RLZXlzPU9iamVjdC5rZXlzKF9rZXlzLm1vZGlmaWVycyk7ZnVuY3Rpb24gbWF0Y2hLZXlzKF9yZWYpe3ZhciBrZXlTZXQ9X3JlZi5rZXlTZXQsZXZlbnQ9X3JlZi5ldmVudDt2YXIga2V5PWtleVNldC5rZXksX2tleVNldCRtb2RpZmllcnM9a2V5U2V0Lm1vZGlmaWVycyxtb2RpZmllcnM9X2tleVNldCRtb2RpZmllcnM9PT11bmRlZmluZWQ/W106X2tleVNldCRtb2RpZmllcnM7dmFyIGtleXNNYXRjaD12b2lkIDA7a2V5c01hdGNoPWtleT09PV9rZXlzLkFMTF9LRVlTO2lmKGtleT09PV9rZXlzLkFMTF9QUklOVEFCTEVfS0VZUyl7aWYoZXZlbnQua2V5KXsvLyBNb2Rlcm4gYnJvd3NlcnMgaW1wbGVtZW50IGBrZXlgLCBzbyBpZiBga2V5YCBpcyBsZW5ndGggMSwgd2UgaGF2ZSBhIG1hdGNoLiBlLmcuICdhJyBmb3IgdGhlXG4vLyBhIGtleSwgb3IgJzInIGZvciB0aGUgMiBrZXkuIEFsbCBvdGhlciBub24tcHJpbnRhYmxlIGNoYXJhY3RlcnMgaGF2ZSBuYW1lcywgZS5nLiAnRW50ZXInIG9yICdCYWNrc3BhY2UnLlxua2V5c01hdGNoPWV2ZW50LmtleS5sZW5ndGg9PT0xO31lbHNley8vIEZvciBicm93c2VycyB0aGF0IGRvIG5vIHN1cHBvcnQgYGV2ZW50LmtleWAsIHdlIHRlc3QgYWdhaW5zdCBhIGxpc3Qgb2YgY2hhcmFjdGVyc1xudmFyIHByZXNzZWRDaGFyPVN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQuY2hhckNvZGUpO2tleXNNYXRjaD1QUklOVEFCTEVfQ0hBUkFDVEVSUy5pbmRleE9mKHByZXNzZWRDaGFyKT49MDt9fWlmKGtleT09PWV2ZW50LndoaWNoKXt2YXIgZXZ0TW9kS2V5cz1tb2RLZXlzLmZpbHRlcihmdW5jdGlvbihtb2RLZXkpe3JldHVybiBldmVudFttb2RLZXkrJ0tleSddO30pLnNvcnQoKTtrZXlzTWF0Y2g9bW9kaWZpZXJzLmxlbmd0aD09PWV2dE1vZEtleXMubGVuZ3RoJiZtb2RpZmllcnMuZXZlcnkoZnVuY3Rpb24obW9kS2V5LGluZGV4KXtyZXR1cm4gZXZ0TW9kS2V5c1tpbmRleF09PT1tb2RLZXk7fSk7fXJldHVybiBrZXlzTWF0Y2g7fWV4cG9ydHMuZGVmYXVsdD1tYXRjaEtleXM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWtleWRvd24vZGlzdC9saWIvbWF0Y2hfa2V5cy5qc1xuLy8gbW9kdWxlIGlkID0gMTk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pOy8vIFRPRE86IE5lZWQgYmV0dGVyLCBtb3JlIGNvbXBsZXRlLCBhbmQgbW9yZSBtZXRob2RpY2FsIGtleSBkZWZpbml0aW9uc1xudmFyIEtleXM9e2JhY2tzcGFjZTo4LGRlbDo0NixkZWxldGU6NDYsdGFiOjksZW50ZXI6MTMsJ3JldHVybic6MTMsZXNjOjI3LHNwYWNlOjMyLHBhZ2VVcDozMyxwYWdlRG93bjozNCxlbmQ6MzUsaG9tZTozNixsZWZ0OjM3LHVwOjM4LHJpZ2h0OjM5LGRvd246NDAsJzsnOjE4NiwnPSc6MTg3LCcsJzoxODgsJy0nOjE4OSwnLic6MTkwLCcvJzoxOTEsJ2AnOjE5MiwnWyc6MjE5LCdcXFxcJzoyMjAsJ10nOjIyMX07Ly8gQWRkIHVwcGVyY2FzZSB2ZXJzaW9ucyBvZiBrZXlzIGFib3ZlIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuT2JqZWN0LmtleXMoS2V5cykuZm9yRWFjaChmdW5jdGlvbihrZXkpe3JldHVybiBLZXlzW2tleS50b1VwcGVyQ2FzZSgpXT1LZXlzW2tleV07fSk7JzAxMjM0NTY3ODknLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKG51bSxpbmRleCl7cmV0dXJuIEtleXNbbnVtXT1pbmRleCs0ODt9KTsnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGxldHRlcixpbmRleCl7S2V5c1tsZXR0ZXJdPWluZGV4KzY1O0tleXNbbGV0dGVyLnRvTG93ZXJDYXNlKCldPWluZGV4KzY1O30pOy8vIGZuIGtleXNcblsxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMl0uZm9yRWFjaChmdW5jdGlvbihpdGVtLGluZGV4KXtyZXR1cm4gS2V5c1snZicraW5kZXhdPTExMStpbmRleDt9KTt2YXIgbW9kaWZpZXJzPWV4cG9ydHMubW9kaWZpZXJzPXtjb250cm9sOidjdHJsJyxjdHJsOidjdHJsJyxzaGlmdDonc2hpZnQnLG1ldGE6J21ldGEnLGNtZDonbWV0YScsY29tbWFuZDonbWV0YScsb3B0aW9uOidhbHQnLGFsdDonYWx0J307dmFyIEFMTF9LRVlTPWV4cG9ydHMuQUxMX0tFWVM9U3ltYm9sKCdBTExfS0VZUycpO3ZhciBBTExfUFJJTlRBQkxFX0tFWVM9ZXhwb3J0cy5BTExfUFJJTlRBQkxFX0tFWVM9U3ltYm9sKCdBTExfUFJJTlRBQkxFX0tFWVMnKTtleHBvcnRzLmRlZmF1bHQ9S2V5cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcmVhY3Qta2V5ZG93bi9kaXN0L2xpYi9rZXlzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIF9rZXlzPXJlcXVpcmUoJy4va2V5cycpO3ZhciBfa2V5czI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O31mdW5jdGlvbiBwYXJzZUtleXMoa2V5c0FycmF5KXtyZXR1cm4ga2V5c0FycmF5Lm1hcChmdW5jdGlvbihrZXkpe3ZhciBrZXlTZXQ9e2tleTprZXl9O2lmKHR5cGVvZiBrZXk9PT0nc3RyaW5nJyl7dmFyIGtleVN0cmluZz1rZXkudG9Mb3dlckNhc2UoKS50cmltKCk7dmFyIG1hdGNoZXM9a2V5U3RyaW5nLnNwbGl0KC9cXHM/XFwrXFxzPy8pO2tleVNldD1tYXRjaGVzLmxlbmd0aD09PTE/e2tleTpfa2V5czIuZGVmYXVsdFtrZXlTdHJpbmddfTp7a2V5Ol9rZXlzMi5kZWZhdWx0W21hdGNoZXMucG9wKCldLG1vZGlmaWVyczptYXRjaGVzLm1hcChmdW5jdGlvbihtb2RLZXkpe3JldHVybiBfa2V5cy5tb2RpZmllcnNbbW9kS2V5XTt9KS5zb3J0KCl9O31yZXR1cm4ga2V5U2V0O30pO31leHBvcnRzLmRlZmF1bHQ9cGFyc2VLZXlzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL3BhcnNlX2tleXMuanNcbi8vIG1vZHVsZSBpZCA9IDIwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGVmYXVsdD11dWlkOy8vIENvdW50ZXIgYmVpbmcgaW5jcmVtZW50ZWQuIEpTIGlzIHNpbmdsZS10aHJlYWRlZCwgc28gaXQnbGwgSnVzdCBXb3Jr4oSiLlxudmFyIF9fY291bnRlcj0xOy8qKlxuICogUmV0dXJucyBhIHByb2Nlc3Mtd2lkZSB1bmlxdWUgaWRlbnRpZmllci5cbiAqL2Z1bmN0aW9uIHV1aWQoKXtyZXR1cm5cInVpZC1cIitfX2NvdW50ZXIrKzt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWtleWRvd24vZGlzdC9saWIvdXVpZC5qc1xuLy8gbW9kdWxlIGlkID0gMjAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMub25Vbm1vdW50PWV4cG9ydHMub25Nb3VudD11bmRlZmluZWQ7ZXhwb3J0cy5fb25DbGljaz1fb25DbGljaztleHBvcnRzLl9vbktleURvd249X29uS2V5RG93bjtleHBvcnRzLl9zaG91bGRDb25zaWRlcj1fc2hvdWxkQ29uc2lkZXI7dmFyIF9kb21faGVscGVycz1yZXF1aXJlKCcuL2xpYi9kb21faGVscGVycycpO3ZhciBfZG9tX2hlbHBlcnMyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RvbV9oZWxwZXJzKTt2YXIgX2xpc3RlbmVycz1yZXF1aXJlKCcuL2xpYi9saXN0ZW5lcnMnKTt2YXIgX2xpc3RlbmVyczI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdGVuZXJzKTt2YXIgX3N0b3JlPXJlcXVpcmUoJy4vc3RvcmUnKTt2YXIgc3RvcmU9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3N0b3JlKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmope2lmKG9iaiYmb2JqLl9fZXNNb2R1bGUpe3JldHVybiBvYmo7fWVsc2V7dmFyIG5ld09iaj17fTtpZihvYmohPW51bGwpe2Zvcih2YXIga2V5IGluIG9iail7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixrZXkpKW5ld09ialtrZXldPW9ialtrZXldO319bmV3T2JqLmRlZmF1bHQ9b2JqO3JldHVybiBuZXdPYmo7fX1mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fWZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpe2lmKEFycmF5LmlzQXJyYXkoYXJyKSl7Zm9yKHZhciBpPTAsYXJyMj1BcnJheShhcnIubGVuZ3RoKTtpPGFyci5sZW5ndGg7aSsrKXthcnIyW2ldPWFycltpXTt9cmV0dXJuIGFycjI7fWVsc2V7cmV0dXJuIEFycmF5LmZyb20oYXJyKTt9fS8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovLyoqXG4gKiBAbW9kdWxlIGV2ZW50SGFuZGxlcnNcbiAqXG4gKi8vKipcbiAqIHByaXZhdGVcbiAqXG4gKi8vKipcbiAqIF9vbkNsaWNrXG4gKlxuICogQGFjY2VzcyBwcml2YXRlXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVGhlIGNsaWNrIGV2ZW50IG9iamVjdFxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50LnRhcmdldCBUaGUgRE9NIG5vZGUgZnJvbSB0aGUgY2xpY2sgZXZlbnRcbiAqL2Z1bmN0aW9uIF9vbkNsaWNrKF9yZWYpe3ZhciB0YXJnZXQ9X3JlZi50YXJnZXQ7c3RvcmUuYWN0aXZhdGUoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzdG9yZS5nZXRJbnN0YW5jZXMoKSkpLnJlZHVjZShfZG9tX2hlbHBlcnMyLmRlZmF1bHQuZmluZENvbnRhaW5lck5vZGVzKHRhcmdldCksW10pLnNvcnQoX2RvbV9oZWxwZXJzMi5kZWZhdWx0LnNvcnRCeURPTVBvc2l0aW9uKS5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0uaW5zdGFuY2U7fSkpO30vKipcbiAqIF9vbktleURvd246IFRoZSBrZXlkb3duIGV2ZW50IGNhbGxiYWNrXG4gKlxuICogQGFjY2VzcyBwcml2YXRlXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgVGhlIGtleWRvd24gZXZlbnQgb2JqZWN0XG4gKiBAcGFyYW0ge251bWJlcn0gZXZlbnQud2hpY2ggVGhlIGtleSBjb2RlICh3aGljaCkgcmVjZWl2ZWQgZnJvbSB0aGUga2V5ZG93biBldmVudFxuICovZnVuY3Rpb24gX29uS2V5RG93bihldmVudCl7dmFyIGZvcmNlQ29uc2lkZXI9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzFdOmZhbHNlO2lmKGZvcmNlQ29uc2lkZXJ8fF9zaG91bGRDb25zaWRlcihldmVudCkpe3ZhciBfcmVmMj1zdG9yZS5maW5kQmluZGluZ0ZvckV2ZW50KGV2ZW50KXx8e30sZm49X3JlZjIuZm4saW5zdGFuY2U9X3JlZjIuaW5zdGFuY2U7aWYoZm4pe2ZuLmNhbGwoaW5zdGFuY2UsZXZlbnQpO3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO30vKipcbiAqIF9zaG91bGRDb25zaWRlcjogQ29uZGl0aW9ucyBmb3IgcHJvY2VlZGluZyB3aXRoIGtleSBldmVudCBoYW5kbGluZ1xuICpcbiAqIEBhY2Nlc3MgcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRoZSBrZXlkb3duIGV2ZW50IG9iamVjdFxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50LnRhcmdldCBUaGUgbm9kZSBvcmlnaW4gb2YgdGhlIGV2ZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRvIGNvbnRpbnVlIHByb2Nlc2luZyB0aGUga2V5ZG93biBldmVudFxuICovZnVuY3Rpb24gX3Nob3VsZENvbnNpZGVyKF9yZWYzKXt2YXIgY3RybEtleT1fcmVmMy5jdHJsS2V5LHRhcmdldD1fcmVmMy50YXJnZXQ7cmV0dXJuIGN0cmxLZXl8fCF+WydJTlBVVCcsJ1NFTEVDVCcsJ1RFWFRBUkVBJ10uaW5kZXhPZih0YXJnZXQudGFnTmFtZSkmJighdGFyZ2V0LmdldEF0dHJpYnV0ZXx8dGFyZ2V0LmdldEF0dHJpYnV0ZSgncm9sZScpIT09J3RleHRib3gnKTt9LyoqXG4gKiBwdWJsaWNcbiAqXG4gKi8vKipcbiAqIG9uTW91bnRcbiAqXG4gKiBAYWNjZXNzIHB1YmxpY1xuICovZnVuY3Rpb24gb25Nb3VudChpbnN0YW5jZSl7c3RvcmUuYWN0aXZhdGUoaW5zdGFuY2UpO19saXN0ZW5lcnMyLmRlZmF1bHQuYmluZEtleXMoX29uS2V5RG93bik7X2xpc3RlbmVyczIuZGVmYXVsdC5iaW5kQ2xpY2tzKF9vbkNsaWNrKTtfZG9tX2hlbHBlcnMyLmRlZmF1bHQuYmluZEZvY3VzYWJsZXMoaW5zdGFuY2Usc3RvcmUuYWN0aXZhdGUpO30vKipcbiAqIG9uVW5tb3VudFxuICpcbiAqIEBhY2Nlc3MgcHVibGljXG4gKi9mdW5jdGlvbiBvblVubW91bnQoaW5zdGFuY2Upe3N0b3JlLmRlbGV0ZUluc3RhbmNlKGluc3RhbmNlKTtpZihzdG9yZS5pc0VtcHR5KCkpe19saXN0ZW5lcnMyLmRlZmF1bHQudW5iaW5kQ2xpY2tzKF9vbkNsaWNrKTtfbGlzdGVuZXJzMi5kZWZhdWx0LnVuYmluZEtleXMoX29uS2V5RG93bik7fX1leHBvcnRzLm9uTW91bnQ9b25Nb3VudDtleHBvcnRzLm9uVW5tb3VudD1vblVubW91bnQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWtleWRvd24vZGlzdC9ldmVudF9oYW5kbGVycy5qc1xuLy8gbW9kdWxlIGlkID0gMjAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6dHJ1ZX0pO3ZhciBfcmVhY3REb209cmVxdWlyZSgncmVhY3QtZG9tJyk7dmFyIF9yZWFjdERvbTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9dmFyIGZvY3VzYWJsZVNlbGVjdG9yPSdhW2hyZWZdLCBidXR0b24sIGlucHV0LCBvYmplY3QsIHNlbGVjdCwgdGV4dGFyZWEsIFt0YWJpbmRleF0nOy8qKlxuICogYmluZEZvY3VzYWJsZXM6IEZpbmQgYW55IGZvY3VzYWJsZSBjaGlsZCBlbGVtZW50cyBvZiB0aGUgY29tcG9uZW50IGluc3RhbmNlIGFuZFxuICogYWRkIGFuIG9uRm9jdXMgaGFuZGxlciB0byBmb2N1cyBvdXIga2V5ZG93biBoYW5kbGVycyBvbiB0aGUgcGFyZW50IGNvbXBvbmVudFxuICogd2hlbiB1c2VyIGtleXMgYXBwbGllcyBmb2N1cyB0byB0aGUgZWxlbWVudC5cbiAqXG4gKiBOT1RFOiBPbmUgbGltaXRhdGlvbiBvZiB0aGlzIHJpZ2h0IG5vdyBpcyB0aGF0IGlmIHlvdSB0YWIgb3V0IG9mIHRoZVxuICogY29tcG9uZW50LCBfZm9jdXNlZEluc3RhbmNlIHdpbGwgc3RpbGwgYmUgc2V0IHVudGlsIG5leHQgY2xpY2sgb3IgbW91bnQgb3JcbiAqIGNvbnRyb2xsZWQgZm9jdXMuXG4gKlxuICogQGFjY2VzcyBwdWJsaWNcbiAqIEBwYXJhbSB7b2JqZWN0fSBpbnN0YW5jZSBUaGUga2V5LWJvdW5kIGNvbXBvbmVudCBpbnN0YW5jZVxuICogQHBhcmFtIHtjYWxsYmFja30gYWN0aXZhdGVPbkZvY3VzIFRoZSBmbiB0byBmaXJlIHdoZW4gZWxlbWVudCBpcyBmb2N1c2VkXG4gKi8vKipcbiAqIEBtb2R1bGUgZG9tSGVscGVyc1xuICpcbiAqL2Z1bmN0aW9uIGJpbmRGb2N1c2FibGVzKGluc3RhbmNlLGFjdGl2YXRlT25Gb2N1cyl7aWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCl7dHJ5e3ZhciBub2RlPV9yZWFjdERvbTIuZGVmYXVsdC5maW5kRE9NTm9kZShpbnN0YW5jZSk7aWYobm9kZSl7dmFyIGZvY3VzYWJsZXM9bm9kZS5xdWVyeVNlbGVjdG9yQWxsKGZvY3VzYWJsZVNlbGVjdG9yKTtpZihmb2N1c2FibGVzLmxlbmd0aCl7dmFyIG9uRm9jdXM9ZnVuY3Rpb24gb25Gb2N1cyhlbGVtZW50KXt2YXIgb25Gb2N1c1ByZXY9ZWxlbWVudC5vbmZvY3VzO3JldHVybiBmdW5jdGlvbihldmVudCl7YWN0aXZhdGVPbkZvY3VzKGluc3RhbmNlKTtpZihvbkZvY3VzUHJldilvbkZvY3VzUHJldi5jYWxsKGVsZW1lbnQsZXZlbnQpO307fTtBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmb2N1c2FibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBlbGVtZW50Lm9uZm9jdXM9b25Gb2N1cyhlbGVtZW50KTt9KTt9fX1jYXRjaChlcnJvcil7Ly8gbm9vcCwgbW9zdGx5IHN1cHByZXNzaW5nIGVycm9yIGhlcmUgaHR0cHM6Ly9naXRodWIuY29tL2dsb3J0aG8vcmVhY3Qta2V5ZG93bi9pc3N1ZXMvNzZcbn19fS8qKlxuICogZmluZENvbnRhaW5lck5vZGVzOiBDYWxsZWQgYnkgb3VyIGNsaWNrIGhhbmRsZXIgdG8gZmluZCBpbnN0YW5jZXMgd2l0aCBub2Rlc1xuICogdGhhdCBhcmUgZXF1YWwgdG8gb3IgdGhhdCBjb250YWluIHRoZSBjbGljayB0YXJnZXQuIEFueSB0aGF0IHBhc3MgdGhpcyB0ZXN0XG4gKiB3aWxsIGJlIHJlY2lwaWVudHMgb2YgdGhlIG5leHQga2V5ZG93biBldmVudC5cbiAqXG4gKiBAYWNjZXNzIHB1YmxpY1xuICogQHBhcmFtIHtvYmplY3R9IHRhcmdldCBUaGUgY2xpY2sgZXZlbnQudGFyZ2V0IERPTSBlbGVtZW50XG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gUmVkdWNlciBmdW5jdGlvblxuICovZnVuY3Rpb24gZmluZENvbnRhaW5lck5vZGVzKHRhcmdldCl7cmV0dXJuIGZ1bmN0aW9uKG1lbW8saW5zdGFuY2Upe3RyeXt2YXIgbm9kZT1fcmVhY3REb20yLmRlZmF1bHQuZmluZERPTU5vZGUoaW5zdGFuY2UpO2lmKG5vZGUmJihub2RlPT09dGFyZ2V0fHxub2RlLmNvbnRhaW5zKHRhcmdldCkpKXttZW1vLnB1c2goe2luc3RhbmNlOmluc3RhbmNlLG5vZGU6bm9kZX0pO319ZmluYWxseXtyZXR1cm4gbWVtbzt9fTt9LyoqXG4gKiBzb3J0QnlET01Qb3NpdGlvbjogQ2FsbGVkIGJ5IG91ciBjbGljayBoYW5kbGVyIHRvIHNvcnQgYSBsaXN0IG9mIGluc3RhbmNlc1xuICogYWNjb3JkaW5nIHRvIGxlYXN0IC0+IG1vc3QgbmVzdGVkLiBUaGlzIGlzIHNvIHRoYXQgaWYgbXVsdGlwbGUga2V5Ym91bmRcbiAqIGluc3RhbmNlcyBoYXZlIG5vZGVzIHRoYXQgYXJlIGFuY2VzdG9ycyBvZiB0aGUgY2xpY2sgdGFyZ2V0LCB0aGV5IHdpbGwgYmVcbiAqIHNvcnRlZCB0byBsZXQgdGhlIGluc3RhbmNlIGNsb3Nlc3QgdG8gdGhlIGNsaWNrIHRhcmdldCBnZXQgZmlyc3QgZGlicyBvbiB0aGVcbiAqIG5leHQga2V5IGRvd24gZXZlbnQuXG4gKi9mdW5jdGlvbiBzb3J0QnlET01Qb3NpdGlvbihhLGIpe3JldHVybiBhLm5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYi5ub2RlKT09PTEwPzE6LTE7fWV4cG9ydHMuZGVmYXVsdD17YmluZEZvY3VzYWJsZXM6YmluZEZvY3VzYWJsZXMsZmluZENvbnRhaW5lck5vZGVzOmZpbmRDb250YWluZXJOb2Rlcyxzb3J0QnlET01Qb3NpdGlvbjpzb3J0QnlET01Qb3NpdGlvbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWtleWRvd24vZGlzdC9saWIvZG9tX2hlbHBlcnMuanNcbi8vIG1vZHVsZSBpZCA9IDIwNFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTsvKipcbiAqIEBtb2R1bGUgTGlzdGVuZXJzXG4gKlxuICovLy8gZmxhZyBmb3Igd2hldGhlciBjbGljayBsaXN0ZW5lciBoYXMgYmVlbiBib3VuZCB0byBkb2N1bWVudFxudmFyIF9jbGlja3NCb3VuZD1mYWxzZTsvLyBmbGFnIGZvciB3aGV0aGVyIGtleWRvd24gbGlzdGVuZXIgaGFzIGJlZW4gYm91bmQgdG8gZG9jdW1lbnRcbnZhciBfa2V5c0JvdW5kPWZhbHNlO3ZhciBMaXN0ZW5lcnM9ey8qKlxuICAgKiBfYmluZEtleXNcbiAgICpcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICovYmluZEtleXM6ZnVuY3Rpb24gYmluZEtleXMoY2FsbGJhY2spe2lmKCFfa2V5c0JvdW5kKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxjYWxsYmFjayk7X2tleXNCb3VuZD10cnVlO319LC8qKlxuICAgKiB1bmJpbmRLZXlzXG4gICAqXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqL3VuYmluZEtleXM6ZnVuY3Rpb24gdW5iaW5kS2V5cyhjYWxsYmFjayl7aWYoX2tleXNCb3VuZCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsY2FsbGJhY2spO19rZXlzQm91bmQ9ZmFsc2U7fX0sLyoqXG4gICAqIGJpbmRDbGlja3NcbiAgICpcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICovYmluZENsaWNrczpmdW5jdGlvbiBiaW5kQ2xpY2tzKGNhbGxiYWNrKXtpZighX2NsaWNrc0JvdW5kKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2FsbGJhY2ssdHJ1ZSk7X2NsaWNrc0JvdW5kPXRydWU7fX0sLyoqXG4gICAqIHVuYmluZENsaWNrc1xuICAgKlxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKi91bmJpbmRDbGlja3M6ZnVuY3Rpb24gdW5iaW5kQ2xpY2tzKGNhbGxiYWNrKXtpZihfY2xpY2tzQm91bmQpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYWxsYmFjayx0cnVlKTtfY2xpY2tzQm91bmQ9ZmFsc2U7fX19O2V4cG9ydHMuZGVmYXVsdD1MaXN0ZW5lcnM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3JlYWN0LWtleWRvd24vZGlzdC9saWIvbGlzdGVuZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBfdHlwZW9mMj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgU3ltYm9sLml0ZXJhdG9yPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqO306ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiZ0eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2Ygb2JqO307T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTt2YXIgX3R5cGVvZj10eXBlb2YgU3ltYm9sPT09XCJmdW5jdGlvblwiJiZfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpPT09XCJzeW1ib2xcIj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT09XCJ1bmRlZmluZWRcIj9cInVuZGVmaW5lZFwiOl90eXBlb2YyKG9iaik7fTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJnR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBvYmo9PT1cInVuZGVmaW5lZFwiP1widW5kZWZpbmVkXCI6X3R5cGVvZjIob2JqKTt9Oy8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQG1vZHVsZSBtZXRob2RXcmFwcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovdmFyIF9zdG9yZT1yZXF1aXJlKCcuLi9zdG9yZScpO3ZhciBzdG9yZT1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfc3RvcmUpO3ZhciBfZXZlbnRfaGFuZGxlcnM9cmVxdWlyZSgnLi4vZXZlbnRfaGFuZGxlcnMnKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmope2lmKG9iaiYmb2JqLl9fZXNNb2R1bGUpe3JldHVybiBvYmo7fWVsc2V7dmFyIG5ld09iaj17fTtpZihvYmohPW51bGwpe2Zvcih2YXIga2V5IGluIG9iail7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixrZXkpKW5ld09ialtrZXldPW9ialtrZXldO319bmV3T2JqLmRlZmF1bHQ9b2JqO3JldHVybiBuZXdPYmo7fX0vKipcbiAqIF9pc1JlYWN0S2V5RG93blxuICpcbiAqIEBhY2Nlc3MgcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IFRoZSBwb3NzaWJseSBzeW50aGV0aWMgZXZlbnQgcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHdpdGhcbiAqIHRoZSBtZXRob2QgaW52b2NhdGlvbi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9mdW5jdGlvbiBfaXNSZWFjdEtleURvd24oZXZlbnQpe3JldHVybiBldmVudCYmKHR5cGVvZiBldmVudD09PSd1bmRlZmluZWQnPyd1bmRlZmluZWQnOl90eXBlb2YoZXZlbnQpKT09PSdvYmplY3QnJiZldmVudC5uYXRpdmVFdmVudCBpbnN0YW5jZW9mIHdpbmRvdy5LZXlib2FyZEV2ZW50JiZldmVudC50eXBlPT09J2tleWRvd24nO30vKipcbiAqIG1ldGhvZFdyYXBwZXJcbiAqXG4gKiBAYWNjZXNzIHB1YmxpY1xuICogQHBhcmFtIHtvYmplY3R9IGFyZ3MgQWxsIGFyZ3VtZW50cyBuZWNlc3NhcnkgZm9yIHdyYXBwaW5nIG1ldGhvZFxuICogQHBhcmFtIHtvYmplY3R9IGFyZ3MudGFyZ2V0IFRoZSBkZWNvcmF0ZWQgY2xhc3NcbiAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzLmRlc2NyaXB0b3IgTWV0aG9kIGRlc2NyaXB0b3JcbiAqIEBwYXJhbSB7YXJyYXl9IGFyZ3Mua2V5cyBUaGUgYXJyYXkgb2Yga2V5cyBib3VuZCB0byB0aGUgZ2l2ZW4gbWV0aG9kXG4gKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBtZXRob2QgZGVzY3JpcHRvclxuICovZnVuY3Rpb24gbWV0aG9kV3JhcHBlcihfcmVmKXt2YXIgdGFyZ2V0PV9yZWYudGFyZ2V0LGRlc2NyaXB0b3I9X3JlZi5kZXNjcmlwdG9yLGtleXM9X3JlZi5rZXlzO3ZhciBmbj1kZXNjcmlwdG9yLnZhbHVlOy8vIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSBjcmVhdGVkIGEgYmluZGluZyBmb3IgdGhpcyBjbGFzcyAodmlhIGFub3RoZXJcbi8vIGRlY29yYXRlZCBtZXRob2QpLCB3cmFwIHRoZXNlIGxpZmVjeWNsZSBtZXRob2RzLlxuaWYoIXN0b3JlLmdldEJpbmRpbmcodGFyZ2V0KSl7dmFyIGNvbXBvbmVudERpZE1vdW50PXRhcmdldC5jb21wb25lbnREaWRNb3VudCxjb21wb25lbnRXaWxsVW5tb3VudD10YXJnZXQuY29tcG9uZW50V2lsbFVubW91bnQ7dGFyZ2V0LmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7KDAsX2V2ZW50X2hhbmRsZXJzLm9uTW91bnQpKHRoaXMpO2lmKGNvbXBvbmVudERpZE1vdW50KXJldHVybiBjb21wb25lbnREaWRNb3VudC5jYWxsKHRoaXMpO307dGFyZ2V0LmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7KDAsX2V2ZW50X2hhbmRsZXJzLm9uVW5tb3VudCkodGhpcyk7aWYoY29tcG9uZW50V2lsbFVubW91bnQpcmV0dXJuIGNvbXBvbmVudFdpbGxVbm1vdW50LmNhbGwodGhpcyk7fTt9Ly8gYWRkIHRoaXMgYmluZGluZyBvZiBrZXlzIGFuZCBtZXRob2QgdG8gdGhlIHRhcmdldCdzIGJpbmRpbmdzXG5zdG9yZS5zZXRCaW5kaW5nKHtrZXlzOmtleXMsdGFyZ2V0OnRhcmdldCxmbjpmbn0pO2Rlc2NyaXB0b3IudmFsdWU9ZnVuY3Rpb24oKXtmb3IodmFyIF9sZW49YXJndW1lbnRzLmxlbmd0aCxhcmdzPUFycmF5KF9sZW4pLF9rZXk9MDtfa2V5PF9sZW47X2tleSsrKXthcmdzW19rZXldPWFyZ3VtZW50c1tfa2V5XTt9dmFyIG1heWJlRXZlbnQ9YXJnc1swXTtpZihfaXNSZWFjdEtleURvd24obWF5YmVFdmVudCkpey8vIHByb3h5IG1ldGhvZCBpbiBvcmRlciB0byB1c2UgQGtleWRvd24gYXMgZmlsdGVyIGZvciBrZXlkb3duIGV2ZW50cyBjb21pbmdcbi8vIGZyb20gYW4gYWN0dWFsIG9uS2V5RG93biBiaW5kaW5nIChhcyBpZGVudGlmaWVkIGJ5IHJlYWN0J3MgYWRkaXRpb24gb2Zcbi8vICduYXRpdmVFdmVudCcgKyB0eXBlID09PSAna2V5ZG93bicpXG5pZighbWF5YmVFdmVudC5jdHJsS2V5KXsvLyB3ZSBhbHJlYWR5IHdoaXRlbGlzdCBzaG9ydGN1dHMgd2l0aCBjdHJsIG1vZGlmaWVycyBzbyBpZiB3ZSB3ZXJlIHRvXG4vLyBmaXJlIGl0IGFnYWluIGhlcmUgdGhlIG1ldGhvZCB3b3VsZCB0cmlnZ2VyIHR3aWNlLiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dsb3J0aG8vcmVhY3Qta2V5ZG93bi9pc3N1ZXMvMzhcbnJldHVybigwLF9ldmVudF9oYW5kbGVycy5fb25LZXlEb3duKShtYXliZUV2ZW50LHRydWUpO319ZWxzZSBpZighbWF5YmVFdmVudHx8IShtYXliZUV2ZW50IGluc3RhbmNlb2Ygd2luZG93LktleWJvYXJkRXZlbnQpfHxtYXliZUV2ZW50LnR5cGUhPT0na2V5ZG93bicpey8vIGlmIG91ciBmaXJzdCBhcmd1bWVudCBpcyBhIGtleWRvd24gZXZlbnQgaXQgaXMgYmVpbmcgaGFuZGxlZCBieSBvdXJcbi8vIGJpbmRpbmcgc3lzdGVtLiBpZiBpdCdzIGFueXRoaW5nIGVsc2UsIGp1c3QgcGFzcyB0aHJvdWdoLlxucmV0dXJuIGZuLmNhbGwuYXBwbHkoZm4sW3RoaXNdLmNvbmNhdChhcmdzKSk7fX07cmV0dXJuIGRlc2NyaXB0b3I7fWV4cG9ydHMuZGVmYXVsdD1tZXRob2RXcmFwcGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvZGVjb3JhdG9ycy9tZXRob2RfZGVjb3JhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7dmFyIF9tYXRjaF9rZXlzPXJlcXVpcmUoJy4uL2xpYi9tYXRjaF9rZXlzJyk7dmFyIF9tYXRjaF9rZXlzMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXRjaF9rZXlzKTt2YXIgX3BhcnNlX2tleXM9cmVxdWlyZSgnLi4vbGliL3BhcnNlX2tleXMnKTt2YXIgX3BhcnNlX2tleXMyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlX2tleXMpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9LyoqXG4gKiBtZXRob2RXcmFwcGVyU2NvcGVkXG4gKlxuICogQGFjY2VzcyBwdWJsaWNcbiAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzIEFsbCBhcmdzIG5lY2Vzc2FyeSBmb3IgZGVjb3JhdGluZyB0aGUgbWV0aG9kXG4gKiBAcGFyYW0ge29iamVjdH0gYXJncy50YXJnZXQgVGhlIGRlY29yYXRlZCBtZXRob2QncyBjbGFzcyBvYmplY3RcbiAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzLmRlc2NyaXB0b3IgVGhlIG1ldGhvZCdzIGRlc2NyaXB0b3Igb2JqZWN0XG4gKiBAcGFyYW0ge2FycmF5fSBhcmdzLmtleXMgVGhlIGtleSBjb2RlcyBib3VuZCB0byB0aGUgZGVjb3JhdGVkIG1ldGhvZFxuICogQHJldHVybiB7b2JqZWN0fSBUaGUgbWV0aG9kJ3MgZGVzY3JpcHRvciBvYmplY3RcbiAqLy8qKlxuICogQG1vZHVsZSBtZXRob2RXcmFwcGVyU2NvcGVkXG4gKlxuICovZnVuY3Rpb24gbWV0aG9kV3JhcHBlclNjb3BlZChfcmVmKXt2YXIgdGFyZ2V0PV9yZWYudGFyZ2V0LGRlc2NyaXB0b3I9X3JlZi5kZXNjcmlwdG9yLGtleXM9X3JlZi5rZXlzO3ZhciBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzPXRhcmdldC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzO3ZhciBmbj1kZXNjcmlwdG9yLnZhbHVlO2lmKCFrZXlzKXtjb25zb2xlLndhcm4oZm4rJzoga2V5ZG93blNjb3BlZCByZXF1aXJlcyBvbmUgb3IgbW9yZSBrZXlzJyk7fWVsc2V7LyoqXG4gICAgICogX3Nob3VsZFRyaWdnZXJcbiAgICAgKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0aGlzUHJvcHMgRXhzdGluZyBwcm9wcyBmcm9tIHRoZSB3cmFwcGVkIGNvbXBvbmVudFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0aGlzUHJvcHMua2V5ZG93biBUaGUgbmFtZXNwYWNlZCBzdGF0ZSBmcm9tIHRoZSBoaWdoZXItb3JkZXJcbiAgICAgKiBjb21wb25lbnQgKGNsYXNzX2RlY29yYXRvcilcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzIFRoZSBpbmNvbWluZyBwcm9wcyBmcm9tIHRoZSB3cmFwcGVkIGNvbXBvbmVudFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHMua2V5ZG93biBUaGUgbmFtZXNjYXBlZCBzdGF0ZSBmcm9tIHRoZSBoaWdoZXItb3JkZXJcbiAgICAgKiBjb21wb25lbnQgKGNsYXNzX2RlY29yYXRvcilcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBrZXlzIFRoZSBrZXlzIGJvdW5kIHRvIHRoZSBkZWNvcmF0ZWQgbWV0aG9kXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBhbGwgdGVzdHMgaGF2ZSBwYXNzZWRcbiAgICAgKi92YXIgX3Nob3VsZFRyaWdnZXI9ZnVuY3Rpb24gX3Nob3VsZFRyaWdnZXIoa2V5ZG93blRoaXMsa2V5ZG93bk5leHQpe2lmKCEoa2V5ZG93bk5leHQmJmtleWRvd25OZXh0LmV2ZW50JiYha2V5ZG93blRoaXMuZXZlbnQpKXJldHVybiBmYWxzZTtyZXR1cm4ga2V5U2V0cy5zb21lKGZ1bmN0aW9uKGtleVNldCl7cmV0dXJuKDAsX21hdGNoX2tleXMyLmRlZmF1bHQpKHtrZXlTZXQ6a2V5U2V0LGV2ZW50OmtleWRvd25OZXh0LmV2ZW50fSk7fSk7fTsvLyB3cmFwIHRoZSBjb21wb25lbnQncyBsaWZlY3ljbGUgbWV0aG9kIHRvIGludGVyY2VwdCBrZXkgY29kZXMgY29taW5nIGRvd25cbi8vIGZyb20gdGhlIHdyYXBwZWQvc2NvcGVkIGNvbXBvbmVudCB1cCB0aGUgdmlldyBoaWVyYXJjaHkuIGlmIG5ldyBrZXlkb3duXG4vLyBldmVudCBoYXMgYXJyaXZlZCBhbmQgdGhlIGtleSBjb2RlcyBtYXRjaCB3aGF0IHdhcyBzcGVjaWZpZWQgaW4gdGhlXG4vLyBkZWNvcmF0b3IsIGNhbGwgdGhlIHdyYXBwZWQgbWV0aG9kLlxudmFyIGtleVNldHM9KDAsX3BhcnNlX2tleXMyLmRlZmF1bHQpKGtleXMpO3RhcmdldC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzPWZ1bmN0aW9uKG5leHRQcm9wcyl7dmFyIGtleWRvd25OZXh0PW5leHRQcm9wcy5rZXlkb3duO3ZhciBrZXlkb3duVGhpcz10aGlzLnByb3BzLmtleWRvd247aWYoX3Nob3VsZFRyaWdnZXIoa2V5ZG93blRoaXMsa2V5ZG93bk5leHQpKXtyZXR1cm4gZm4uY2FsbCh0aGlzLGtleWRvd25OZXh0LmV2ZW50KTt9Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheShfbGVuPjE/X2xlbi0xOjApLF9rZXk9MTtfa2V5PF9sZW47X2tleSsrKXthcmdzW19rZXktMV09YXJndW1lbnRzW19rZXldO31pZihjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKXJldHVybiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzLmNhbGwuYXBwbHkoY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyxbdGhpcyxuZXh0UHJvcHNdLmNvbmNhdChhcmdzKSk7fTt9cmV0dXJuIGRlc2NyaXB0b3I7fWV4cG9ydHMuZGVmYXVsdD1tZXRob2RXcmFwcGVyU2NvcGVkO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvZGVjb3JhdG9ycy9tZXRob2RfZGVjb3JhdG9yX3Njb3BlZC5qc1xuLy8gbW9kdWxlIGlkID0gMjA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JzsvLyBQcm9kdWN0aW9uIHN0ZXBzIG9mIEVDTUEtMjYyLCBFZGl0aW9uIDYsIDIyLjEuMi4xXG4vLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZnJvbVxuaWYoIUFycmF5LmZyb20pe0FycmF5LmZyb209ZnVuY3Rpb24oKXt2YXIgdG9TdHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzt2YXIgaXNDYWxsYWJsZT1mdW5jdGlvbiBpc0NhbGxhYmxlKGZuKXtyZXR1cm4gdHlwZW9mIGZuPT09J2Z1bmN0aW9uJ3x8dG9TdHIuY2FsbChmbik9PT0nW29iamVjdCBGdW5jdGlvbl0nO307dmFyIHRvSW50ZWdlcj1mdW5jdGlvbiB0b0ludGVnZXIodmFsdWUpe3ZhciBudW1iZXI9TnVtYmVyKHZhbHVlKTtpZihpc05hTihudW1iZXIpKXtyZXR1cm4gMDt9aWYobnVtYmVyPT09MHx8IWlzRmluaXRlKG51bWJlcikpe3JldHVybiBudW1iZXI7fXJldHVybihudW1iZXI+MD8xOi0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG51bWJlcikpO307dmFyIG1heFNhZmVJbnRlZ2VyPU1hdGgucG93KDIsNTMpLTE7dmFyIHRvTGVuZ3RoPWZ1bmN0aW9uIHRvTGVuZ3RoKHZhbHVlKXt2YXIgbGVuPXRvSW50ZWdlcih2YWx1ZSk7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGxlbiwwKSxtYXhTYWZlSW50ZWdlcik7fTsvLyBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBmcm9tIG1ldGhvZCBpcyAxLlxucmV0dXJuIGZ1bmN0aW9uIGZyb20oYXJyYXlMaWtlLyosIG1hcEZuLCB0aGlzQXJnICovKXsvLyAxLiBMZXQgQyBiZSB0aGUgdGhpcyB2YWx1ZS5cbnZhciBDPXRoaXM7Ly8gMi4gTGV0IGl0ZW1zIGJlIFRvT2JqZWN0KGFycmF5TGlrZSkuXG52YXIgaXRlbXM9T2JqZWN0KGFycmF5TGlrZSk7Ly8gMy4gUmV0dXJuSWZBYnJ1cHQoaXRlbXMpLlxuaWYoYXJyYXlMaWtlPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJyYXkuZnJvbSByZXF1aXJlcyBhbiBhcnJheS1saWtlIG9iamVjdCAtIG5vdCBudWxsIG9yIHVuZGVmaW5lZFwiKTt9Ly8gNC4gSWYgbWFwZm4gaXMgdW5kZWZpbmVkLCB0aGVuIGxldCBtYXBwaW5nIGJlIGZhbHNlLlxudmFyIG1hcEZuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCB1bmRlZmluZWQ7dmFyIFQ7aWYodHlwZW9mIG1hcEZuIT09J3VuZGVmaW5lZCcpey8vIDUuIGVsc2Vcbi8vIDUuIGEgSWYgSXNDYWxsYWJsZShtYXBmbikgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbmlmKCFpc0NhbGxhYmxlKG1hcEZuKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkuZnJvbTogd2hlbiBwcm92aWRlZCwgdGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTt9Ly8gNS4gYi4gSWYgdGhpc0FyZyB3YXMgc3VwcGxpZWQsIGxldCBUIGJlIHRoaXNBcmc7IGVsc2UgbGV0IFQgYmUgdW5kZWZpbmVkLlxuaWYoYXJndW1lbnRzLmxlbmd0aD4yKXtUPWFyZ3VtZW50c1syXTt9fS8vIDEwLiBMZXQgbGVuVmFsdWUgYmUgR2V0KGl0ZW1zLCBcImxlbmd0aFwiKS5cbi8vIDExLiBMZXQgbGVuIGJlIFRvTGVuZ3RoKGxlblZhbHVlKS5cbnZhciBsZW49dG9MZW5ndGgoaXRlbXMubGVuZ3RoKTsvLyAxMy4gSWYgSXNDb25zdHJ1Y3RvcihDKSBpcyB0cnVlLCB0aGVuXG4vLyAxMy4gYS4gTGV0IEEgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZCBcbi8vIG9mIEMgd2l0aCBhbiBhcmd1bWVudCBsaXN0IGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBpdGVtIGxlbi5cbi8vIDE0LiBhLiBFbHNlLCBMZXQgQSBiZSBBcnJheUNyZWF0ZShsZW4pLlxudmFyIEE9aXNDYWxsYWJsZShDKT9PYmplY3QobmV3IEMobGVuKSk6bmV3IEFycmF5KGxlbik7Ly8gMTYuIExldCBrIGJlIDAuXG52YXIgaz0wOy8vIDE3LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW7igKYgKGFsc28gc3RlcHMgYSAtIGgpXG52YXIga1ZhbHVlO3doaWxlKGs8bGVuKXtrVmFsdWU9aXRlbXNba107aWYobWFwRm4pe0Fba109dHlwZW9mIFQ9PT0ndW5kZWZpbmVkJz9tYXBGbihrVmFsdWUsayk6bWFwRm4uY2FsbChULGtWYWx1ZSxrKTt9ZWxzZXtBW2tdPWtWYWx1ZTt9ays9MTt9Ly8gMTguIExldCBwdXRTdGF0dXMgYmUgUHV0KEEsIFwibGVuZ3RoXCIsIGxlbiwgdHJ1ZSkuXG5BLmxlbmd0aD1sZW47Ly8gMjAuIFJldHVybiBBLlxucmV0dXJuIEE7fTt9KCk7fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZWFjdC1rZXlkb3duL2Rpc3QvbGliL2FycmF5LmZyb20uanNcbi8vIG1vZHVsZSBpZCA9IDIwOFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e21haW5UYWJsZTp7dGFibGVMYXlvdXQ6J2ZpeGVkJyx3aWR0aDonLXdlYmtpdC1jYWxjKDEwMCUgKyAxNnB4KScsYm9yZGVyQ29sbGFwc2U6J2NvbGxhcHNlJyxtYXJnaW5Cb3R0b206JzIwcHgnfSxoZWFkZXJUYWJsZTp7dGFibGVMYXlvdXQ6J2ZpeGVkJyx3aWR0aDonMTAwJScsYm9yZGVyQ29sbGFwc2U6J2NvbGxhcHNlJ30sZm9vdGVyVGFibGU6e3RhYmxlTGF5b3V0OidmaXhlZCcsd2lkdGg6JzEwMCUnLGJvcmRlckNvbGxhcHNlOidjb2xsYXBzZSd9LHRoOntib3JkZXJCb3R0b206JzFweCBzb2xpZCBibGFjaycsYmFja2dyb3VuZENvbG9yOidncmV5JyxoZWlnaHQ6JzMwcHgnLGJvcmRlcjonMXB4IHNvbGlkIGxpZ2h0Z3JheScsZGlzcGxheTondGFibGUtY2VsbCcsY29sb3I6J2JsYWNrJyxib2xkQ29sb3I6J3JlZCd9LHRoSGlkZGVuOntib3JkZXJCb3R0b206JzFweCBzb2xpZCBibGFjaycsYmFja2dyb3VuZENvbG9yOidncmV5JyxoZWlnaHQ6JzFweCcsYm9yZGVyOicxcHggc29saWQgbGlnaHRncmF5JyxkaXNwbGF5Oid0YWJsZS1jZWxsJ30sdHI6e2JhY2tncm91bmRDb2xvcjond2hpdGUnfSxmb2N1c2VkOntiYWNrZ3JvdW5kQ29sb3I6J2xpZ2h0Ymx1ZSd9LHRkOntib3JkZXI6JzFweCBzb2xpZCBsaWdodGdyYXknLGRpc3BsYXk6J3RhYmxlLWNlbGwnLHBhZGRpbmdMZWZ0Oic1cHgnfSxpY29uczp7YXNjOicvaW1hZ2VzL2ljb25zL3NvcnQtYWxwaGEtYXNjLnBuZycsZGVzYzonL2ltYWdlcy9pY29ucy9zb3J0LWFscGhhLWRlc2MucG5nJ30saW1hZ2U6e21hcmdpbjonMXB4J30sd3JhcHBlcjp7aGVpZ2h0Oidpbmhlcml0JyxvdmVyZmxvdzonYXV0bycsbWluSGVpZ2h0OicxMDBweCd9LG1haW46e2hlaWdodDonaW5oZXJpdCd9LGhlYWRlcjp7b3ZlcmZsb3c6J2hpZGRlbid9LGJvb2xTdW1ib2w6e3llczp7dmFsdWU6J1xcdTI3MTQnLGNvbG9yOidncmVlbid9LG5vOnsvL3ZhbHVlOiAnXFx1MjcxNicsXG5jb2xvcjpudWxsfSxudWxsOnt2YWx1ZTonLScsY29sb3I6bnVsbH19LGJvb2xDb2xvdXI6e3llczpudWxsLG5vOm51bGx9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvZGF0YS1ncmlkL2RhdGEtZ3JpZC1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDIwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciBnZXROb3cgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2xpYnMvZ2V0Tm93Jyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZXhlY3V0ZS9idXR0b24tcmVnaXN0ZXItZXhlY3V0ZS5qc3gnKSxcbiAgICBCdXR0b25PcGVuID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBTZWxlY3QgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3NlbGVjdC9zZWxlY3QuanN4JyksXG4gICAgSW5wdXREYXRlID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy9pbnB1dC1kYXRlL2lucHV0LWRhdGUuanN4JyksXG4gICAgSW5wdXRUZXh0ID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy9pbnB1dC10ZXh0L2lucHV0LXRleHQuanN4JyksXG4gICAgSW5wdXROdW1iZXIgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL2lucHV0LW51bWJlci9pbnB1dC1udW1iZXIuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi90YXNrLXdpZGdldC1zdHlsZXMnKTtcbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi9kb2MtY29udGV4dC5qcycpO1xuXG52YXIgVGFza1dpZGdldCA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhUYXNrV2lkZ2V0LCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBUYXNrV2lkZ2V0KHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYXNrV2lkZ2V0KTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGFza1dpZGdldC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhc2tXaWRnZXQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB0YXNrTGlzdDogcHJvcHMudGFza0xpc3QgfHwgW10sXG4gICAgICAgICAgICBhY3R1YWxUYXNrOiBwcm9wcy50YXNrTGlzdFswXS5uYW1lLFxuICAgICAgICAgICAgc2hvd0xpc3Q6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd01vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dEYXRlOiB0cnVlLFxuICAgICAgICAgICAgdGl0bGVEYXRlOiBudWxsLFxuICAgICAgICAgICAgc2hvd1ZpaXRlbnVtYmVyOiBmYWxzZSxcbiAgICAgICAgICAgIHRpdGxlVmlpdGVudW1iZXI6IG51bGwsXG4gICAgICAgICAgICBzaG93WWtzdXM6IHByb3BzLmthc1Nob3dZa3N1cyxcbiAgICAgICAgICAgIHRpdGxlWWtzdXM6IG51bGwsXG4gICAgICAgICAgICBzaG93S29ndXM6IHByb3BzLmthc1Nob3dLb2d1cyxcbiAgICAgICAgICAgIHRpdGxlS29ndXM6IG51bGwsXG4gICAgICAgICAgICB2aWl0ZW51bWJlcjogbnVsbCxcbiAgICAgICAgICAgIHlrc3VzOiAwLFxuICAgICAgICAgICAga29ndXM6IERvY0NvbnRleHQubWtKYWFrID8gRG9jQ29udGV4dC5ta0phYWsgOiAwLFxuICAgICAgICAgICAgc2Vpc3VnYTogZ2V0Tm93KClcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuaGFuZGxlU2VsZWN0VGFzayA9IF90aGlzLmhhbmRsZVNlbGVjdFRhc2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZUJ1dHRvblRhc2sgPSBfdGhpcy5oYW5kbGVCdXR0b25UYXNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVCdXR0b25PcGVuQ2xpY2sgPSBfdGhpcy5oYW5kbGVCdXR0b25PcGVuQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLm1vZGFsUGFnZUNsaWNrID0gX3RoaXMubW9kYWxQYWdlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlID0gX3RoaXMuaGFuZGxlSW5wdXRDaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVGFza1dpZGdldCwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUudGFza0xpc3QpIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsKTtcblxuICAgICAgICAgICAgdmFyIHRhc2tzID0gdGhpcy5zdGF0ZS50YXNrTGlzdC5tYXAoZnVuY3Rpb24gKHRhc2ssIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IGluZGV4KyssIG5hbWU6ICcgJywga29vZDogdGFzay5uYW1lIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHRhc2tJZCA9IHRhc2tzLmZpbmRJbmRleChmdW5jdGlvbiAodGFzaykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLm5hbWUgPT0gX3RoaXMyLnN0YXRlLmFjdHVhbFRhc2s7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLndyYXBwZXIgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLndyYXBwZXIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnV0dG9uVGFzaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVCdXR0b25UYXNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmFjdHVhbFRhc2tcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b25PcGVuLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnV0dG9uT3Blbkxpc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQnV0dG9uT3BlbkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAndicgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93TGlzdCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IG5hbWU6ICduYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuc2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGFza3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmFjdHVhbFRhc2sgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRoaXMuc3RhdGUuYWN0dWFsVGFzayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1uYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVNlbGVjdFRhc2ssXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2UgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dNb2RhbCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlQnRuQ2xpY2s6IHRoaXMubW9kYWxQYWdlQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlTmFtZTogJ1RlZ2V2dXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBbJ2J0bk9rJywgJ2J0bkNhbmNlbCddXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0thcyBrXFx4RTRpdmF0YSAnICsgdGhpcy5zdGF0ZS5hY3R1YWxUYXNrICsgJyA/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hvd0RhdGUgPyBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0RGF0ZSwgeyB0aXRsZTogdGhpcy5zdGF0ZS50aXRsZURhdGUgPyB0aGlzLnN0YXRlLnRpdGxlRGF0ZSA6ICdTZWlzdWdhICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NlaXN1Z2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnNlaXN1Z2EsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQta3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93WWtzdXMgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogdGhpcy5zdGF0ZS50aXRsZVlrc3VzID8gdGhpcy5zdGF0ZS50aXRsZVlrc3VzIDogXCLDnGtzdXM6XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3lrc3VzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAnbGFwc2VfZ3J1cHAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IERvY0NvbnRleHQubGlicy5sYXBzZV9ncnVwcCA/IERvY0NvbnRleHQubGlicy5sYXBzZV9ncnVwcCA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1sYXBzZV9ncnVwcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAnaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnlrc3VzIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93VmlpdGVudW1iZXIgPyBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnN0YXRlLnRpdGxlVmlpdGVudW1iZXIgPyB0aGlzLnN0YXRlLnRpdGxlVmlpdGVudW1iZXIgOiBcIlZpaXRlbnVtYmVyOlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2aWl0ZW51bWJlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtdmlpdGVudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnZpaXRlbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93S29ndXMgPyBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiB0aGlzLnN0YXRlLnRpdGxlS29ndXMgPyB0aGlzLnN0YXRlLnRpdGxlS29ndXMgOiAnVsOkw6RydHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna29ndXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIodGhpcy5zdGF0ZS5rb2d1cyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQta29ndXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IERvY0NvbnRleHQubWtKYWFrID8gRG9jQ29udGV4dC5ta0phYWsgOiA5OTk5OTk5OTksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UgfSkgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxQYWdlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kYWxQYWdlQ2xpY2soYnRuRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93TW9kYWw6IGZhbHNlIH0pO1xuICAgICAgICAgICAgaWYgKGJ0bkV2ZW50ID09PSAnT2snKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVCdXR0b25UYXNrKHRoaXMuc3RhdGUuYWN0dWFsVGFzaywgdGhpcy5zdGF0ZS5zZWlzdWdhLCB0aGlzLnN0YXRlLnlrc3VzLCB0aGlzLnN0YXRlLnZpaXRlbnVtYmVyLCB0aGlzLnN0YXRlLmtvZ3VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlQnV0dG9uT3BlbkNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUJ1dHRvbk9wZW5DbGljaygpIHtcbiAgICAgICAgICAgIHZhciBpc1Nob3cgPSAhdGhpcy5zdGF0ZS5zaG93TGlzdDtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93TGlzdDogaXNTaG93IH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTZWxlY3RUYXNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdFRhc2sobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBpc1Nob3cgPSAhdGhpcy5zdGF0ZS5zaG93TGlzdDtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGhpcy5zdGF0ZS50YXNrTGlzdC5maW5kKGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2submFtZSA9PSB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGlzU2hvd0RhdGUgPSB0YXNrICYmIHRhc2suaGFzT3duUHJvcGVydHkoJ2hpZGVEYXRlJykgPyAhdGFzay5oaWRlRGF0ZSA6IHRydWU7XG4gICAgICAgICAgICB2YXIgc2hvd1lrc3VzID0gdGFzayAmJiB0YXNrLmhhc093blByb3BlcnR5KCdzaG93WWtzdXMnKSA/IHRhc2suc2hvd1lrc3VzIDogZmFsc2U7XG4gICAgICAgICAgICB2YXIgc2hvd1ZpaXRlbnVtYmVyID0gdGFzayAmJiB0YXNrLmhhc093blByb3BlcnR5KCdzaG93VmlpdGVudW1iZXInKSA/IHRhc2suc2hvd1ZpaXRlbnVtYmVyIDogZmFsc2U7XG4gICAgICAgICAgICB2YXIgc2hvd0tvZ3VzID0gdGFzayAmJiB0YXNrLmhhc093blByb3BlcnR5KCdzaG93S29ndXMnKSA/IHRhc2suc2hvd0tvZ3VzIDogZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNob3dMaXN0OiBpc1Nob3csXG4gICAgICAgICAgICAgICAgYWN0dWFsVGFzazogdmFsdWUsXG4gICAgICAgICAgICAgICAgc2hvd0RhdGU6IGlzU2hvd0RhdGUsXG4gICAgICAgICAgICAgICAgdGl0bGVEYXRlOiB0YXNrLnRpdGxlRGF0ZSA/IHRhc2sudGl0bGVEYXRlIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzaG93WWtzdXM6IHNob3dZa3N1cyxcbiAgICAgICAgICAgICAgICBzaG93VmlpdGVudW1iZXI6IHNob3dWaWl0ZW51bWJlcixcbiAgICAgICAgICAgICAgICB0aXRsZVZpaXRlbnVtYmVyOiB0YXNrLnRpdGxlVmlpdGVudW1iZXIgPyB0YXNrLnRpdGxlVmlpdGVudW1iZXIgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNob3dLb2d1czogc2hvd0tvZ3VzLFxuICAgICAgICAgICAgICAgIHRpdGxlS29ndXM6IHRhc2sudGl0bGVLb2d1cyA/IHRhc2sudGl0bGVLb2d1cyA6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVCdXR0b25UYXNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUJ1dHRvblRhc2soKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHNob3dZa3N1cyA9IHRoaXMuc3RhdGUuc2hvd1lrc3VzO1xuICAgICAgICAgICAgdmFyIHNob3dWaWl0ZW51bWJlciA9IHRoaXMuc3RhdGUuc2hvd1ZpaXRlbnVtYmVyO1xuICAgICAgICAgICAgdmFyIHNob3dLb2d1cyA9IHRoaXMuc3RhdGUuc2hvd0tvZ3VzO1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLnN0YXRlLnRhc2tMaXN0LmZpbmQoZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5uYW1lID09IF90aGlzMy5zdGF0ZS5hY3R1YWxUYXNrO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgaXNTaG93RGF0ZSA9IHRhc2sgJiYgdGFzay5oYXNPd25Qcm9wZXJ0eSgnaGlkZURhdGUnKSA/ICF0YXNrLmhpZGVEYXRlIDogdHJ1ZTtcbiAgICAgICAgICAgIHZhciBpc1Nob3dWaWl0ZW51bWJlciA9IHRhc2sgJiYgdGFzay5oYXNPd25Qcm9wZXJ0eSgnc2hvd1ZpaXRlbnVtYmVyJykgPyB0YXNrLnNob3dWaWl0ZW51bWJlciA6IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGlzU2hvd0tvZ3VzID0gdGFzayAmJiB0YXNrLmhhc093blByb3BlcnR5KCdzaG93S29ndXMnKSA/IHRhc2suc2hvd0tvZ3VzIDogZmFsc2U7XG5cbiAgICAgICAgICAgIHNob3dZa3N1cyA9IHRhc2sgJiYgdGFzay5oYXNPd25Qcm9wZXJ0eSgnc2hvd1lrc3VzJykgPyB0YXNrLnNob3dZa3N1cyA6IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzaG93TW9kYWw6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hvd1lrc3VzOiBzaG93WWtzdXMsXG4gICAgICAgICAgICAgICAgc2hvd0RhdGU6IGlzU2hvd0RhdGUsXG4gICAgICAgICAgICAgICAgc2hvd0tvZ3VzOiBpc1Nob3dLb2d1cyxcbiAgICAgICAgICAgICAgICBzaG93VmlpdGVudW1iZXI6IGlzU2hvd1ZpaXRlbnVtYmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vd2lsbCBzYXZlIHZhbHVlXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUlucHV0Q2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUlucHV0Q2hhbmdlKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGVWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICBzZWlzdWdhOiB0aGlzLnN0YXRlLnNlaXN1Z2EsXG4gICAgICAgICAgICAgICAgeWtzdXM6IHRoaXMuc3RhdGUueWtzdXMsXG4gICAgICAgICAgICAgICAgdmlpdGVudW1iZXI6IHRoaXMuc3RhdGUudmlpdGVudW1iZXIsXG4gICAgICAgICAgICAgICAga29ndXM6IHRoaXMuc3RhdGUua29ndXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzdGF0ZVZhbHVlW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlVmFsdWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRhc2tXaWRnZXQ7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5UYXNrV2lkZ2V0LnByb3BUeXBlcyA9IHtcbiAgICB0YXNrTGlzdDogUHJvcFR5cGVzLmFycmF5LFxuICAgIGhhbmRsZUJ1dHRvblRhc2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgaGFuZGxlU2VsZWN0VGFzazogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBrYXNTaG93WWtzdXM6IFByb3BUeXBlcy5ib29sLFxuICAgIGthc1Nob3dLb2d1czogUHJvcFR5cGVzLmJvb2wsXG4gICAga2FzU2hvd1ZpaXRlbnVtYmVyOiBQcm9wVHlwZXMuYm9vbFxufTtcblxuVGFza1dpZGdldC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgdGFza0xpc3Q6IFtdLFxuICAgIGthc1Nob3dZa3N1czogZmFsc2UsXG4gICAga2FzU2hvd0tvZ3VzOiBmYWxzZSxcbiAgICBrYXNTaG93VmlpdGVudW1iZXI6IGZhbHNlXG59O1xubW9kdWxlLmV4cG9ydHMgPSBUYXNrV2lkZ2V0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy90YXNrLXdpZGdldC90YXNrLXdpZGdldC5qc3hcbi8vIG1vZHVsZSBpZCA9IDIxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjsvLyB3aWxsIHJldHVybiBkYXRlIGluIGZvcm1hdCAnWVlZWS1NTS1ERCdcbm1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIG5vdz1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMF06bmV3IERhdGUoKTtyZXR1cm4gbm93LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsMTApO307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9saWJzL2dldE5vdy5qc1xuLy8gbW9kdWxlIGlkID0gMjExXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgSUNPTiA9ICdleGVjdXRlJztcblxudmFyIEJ1dHRvblJlZ2lzdGVyRXhlY3V0ZSA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b25SZWdpc3RlckV4ZWN1dGUsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b25SZWdpc3RlckV4ZWN1dGUocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblJlZ2lzdGVyRXhlY3V0ZSk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblJlZ2lzdGVyRXhlY3V0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvblJlZ2lzdGVyRXhlY3V0ZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IF90aGlzLmhhbmRsZUNsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblJlZ2lzdGVyRXhlY3V0ZSwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5FeGVjdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMuc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVnaXN0ZXJFeGVjdXRlO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uUmVnaXN0ZXJFeGVjdXRlLnByb3BUeXBlcyA9IHtcbiAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cbkJ1dHRvblJlZ2lzdGVyRXhlY3V0ZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uUmVnaXN0ZXJFeGVjdXRlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWV4ZWN1dGUvYnV0dG9uLXJlZ2lzdGVyLWV4ZWN1dGUuanN4XG4vLyBtb2R1bGUgaWQgPSAyMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgcmFkaXVtID0gcmVxdWlyZSgncmFkaXVtJyk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9zZWxlY3Qtc3R5bGVzJyk7XG5cbnZhciBTZWxlY3QgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoU2VsZWN0LCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBTZWxlY3QocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlbGVjdCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNlbGVjdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNlbGVjdCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BzLmRhdGEsXG4gICAgICAgICAgICB2YWx1ZTogMCAvKiDQt9C00LXRgdGMINC/0L4g0LfQvdCw0YfQtdC90LjRjiDQmNCUICovXG4gICAgICAgICAgICAsIHJlYWRPbmx5OiBwcm9wcy5yZWFkT25seSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgIGZpZWxkVmFsdWU6IHByb3BzLnZhbHVlIC8q0LfQtNC10YHRjCDQv9C+INC30L3QsNGH0LXQvdC4INC/0L7Qu9GPIGNvbGxJZCAqL1xuICAgICAgICAgICAgLCBidG5EZWxldGU6IHByb3BzLmJ0bkRlbGV0ZSAvKiDQtdGB0LvQuCDQuNGB0YLQuNC90YMsINGC0L4g0YDQuNGB0YPQtdC8INGA0Y/QtNC+0Lwg0LrQvdC+0L/QutGDINC00LvRjyDQvtGH0LjRgdGC0LrQuCDQt9C90LDRh9C10L3QuNGPKi9cbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpcy5vbkNoYW5nZSA9IF90aGlzLm9uQ2hhbmdlLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5idG5EZWxDbGljayA9IF90aGlzLmJ0bkRlbENsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRWYWx1ZUJ5SWQgPSBfdGhpcy5nZXRWYWx1ZUJ5SWQuYmluZChfdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIC8vIHdpbGwgdXBkYXRlIHN0YXRlIGlmIHByb3BzIGNoYW5nZWRcblxuXG4gICAgX2NyZWF0ZUNsYXNzKFNlbGVjdCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jb2xsSWQgJiYgdGhpcy5wcm9wcy5jb2xsSWQgIT09ICdpZCcpIHtcbiAgICAgICAgICAgICAgICAvLyDQuNGJ0LXQvCDQmNCUINC/0L4g0LfQvdCw0YfQtdC90LjRjiDQv9C+0LvRj1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VmFsdWVCeUlkKHRoaXMuc3RhdGUuZGF0YSwgdGhpcy5wcm9wcy5jb2xsSWQsIHRoaXMuc3RhdGUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkNoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY29sbElkICYmIHRoaXMucHJvcHMuY29sbElkICE9PSAnaWQnKSB7XG4gICAgICAgICAgICAgICAgLy8g0L3QsNC50LTQtdC8INC/0L4g0LjQtCDQt9C90LDRh9C10L3QuNC1INC/0L7Qu9GPINCyIGNvbGxJZFxuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLmdldFZhbHVlQnlJZCh0aGlzLnN0YXRlLmRhdGEsIHRoaXMucHJvcHMuY29sbElkLCBmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vINGB0L7RhdGA0LDQvdC40Lwg0LjQtCDQutCw0LogdmFsdWVcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBmaWVsZFZhbHVlOiBmaWVsZFZhbHVlLCB2YWx1ZTogZS50YXJnZXQudmFsdWUgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgLy8g0YHQvNC+0YLRgNC40Lwg0Log0YfQtdC80YMg0L/RgNC40LLRj9C30LDQvSDRgdC10LvQtdC60YIg0Lgg0L7RgtC00LDQuNC8INC10LPQviDQvdCw0LLQtdGA0YVcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMubmFtZSwgZmllbGRWYWx1ZSk7IC8vINCyINGB0LvRg9GH0LDQtSDQtdGB0LvQuCDQt9Cw0LTQsNC9INC+0LHRgNCw0LHQvtGC0YfQuNC6INC90LAg0LLQtdGA0YXQvdC10Lwg0YPRgNC+0LLQvdC1LCDQvtGC0LTQsNC00LjQvCDQvtCx0YDQsNCx0L7RgtC60YMg0YLRg9C00LBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5zZWxlY3QsIHRoaXMucHJvcHMuc3R5bGUgPyB0aGlzLnByb3BzLnN0eWxlIDoge30pO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMud3JhcHBlciwgcmVmOiAnd3JhcHBlcicgfSxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRpdGxlID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdsYWJlbCcsIHN0eWxlOiBzdHlsZXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9yOiB0aGlzLnByb3BzLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50aXRsZVxuICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc2VsZWN0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS52YWx1ZSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucHJvcHMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnN0YXRlLnJlYWRPbmx5LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogdGhpcy5wcm9wcy5zaXplID8gdGhpcy5wcm9wcy5zaXplIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcGFpcmVEYXRhT3B0aW9ucygpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGNvbGxJZFxyXG4gICAgICAgICAqIEBwYXJhbSByb3dJZFxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRWYWx1ZUJ5SWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWVCeUlkKGRhdGEsIGNvbGxJZCwgcm93SWQpIHtcbiAgICAgICAgICAgIC8vINCy0LXRgNC90LXRgiDQt9C90LDRh9C10L3QuNGPINC/0L7Qu9GPINC/0L4g0LLRi9Cx0YDQsNC90L3QvtC80YMg0JjQlFxuICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSAwO1xuICAgICAgICAgICAgdmFyIGZvdW5kUm93ID0gZGF0YS5maW5kKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93W2NvbGxJZF0gPT09IHJvd0lkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZm91bmRSb3cpIHtcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gZm91bmRSb3dbY29sbElkXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkRlbENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkRlbENsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyDQv9C+INCy0YvQt9C+0LLRgyDQutC90L7Qv9C60YMg0YPQtNCw0LvQuNGC0YwsINC+0LHQvdGD0LvRj9C10YIg0LfQvdCw0YfQtdC90LjQtVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiAnJyB9KTtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J/QvtC00LPQvtGC0L7QstC40YIg0LTQsNGC0LDRgdC10YIg0LTQu9GPINGB0LXQu9C10LrRgtCwXHJcbiAgICAgICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ByZXBhaXJlRGF0YU9wdGlvbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcGFpcmVEYXRhT3B0aW9ucygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5zdGF0ZS5kYXRhLmxlbmd0aCA/IHRoaXMuc3RhdGUuZGF0YSA6IFtdO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUudmFsdWUgJiYgIWRhdGEuZmluZChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cuaWQgPT09IDA7XG4gICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBhZGQgZW1wdHkgcm93XG4gICAgICAgICAgICAgICAgICAgIGRhdGEudW5zaGlmdCh7IGlkOiAwLCBrb29kOiAnJywgbmltZXR1czogJycgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGRhdGEubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gJ29wdGlvbi0nICsgaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSAnICc7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3dWYWx1ZSA9IChpdGVtLmtvb2QgPyBpdGVtLmtvb2QgOiAnJykgKyAnICcgKyBzZXBhcmF0b3IgKyAnICcgKyAoaXRlbS5uYW1lID8gaXRlbS5uYW1lIDogaXRlbS5uaW1ldHVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IGl0ZW1bX3RoaXMyLnByb3BzLmNvbGxJZF0sIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjoga2V5IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gUmVhY3QuY3JlYXRlRWxlbWVudCgnb3B0aW9uJywgeyB2YWx1ZTogMCwga2V5OiBNYXRoLnJhbmRvbSgpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDRg9GB0YLQsNC90L7QstC40YIg0YTQvtC60YPRgSDQvdCwINGN0LvQtdC80LXQvdGC0YtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZm9jdXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnNbJ3NlbGVjdCddLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy52YWx1ZSAhPT0gcHJldlN0YXRlLnZhbHVlIHx8IG5leHRQcm9wcy5yZWFkT25seSAhPT0gcHJldlN0YXRlLnJlYWRPbmx5IHx8IEpTT04uc3RyaW5naWZ5KG5leHRQcm9wcy5kYXRhKSAhPT0gSlNPTi5zdHJpbmdpZnkocHJldlN0YXRlLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSwgcmVhZE9ubHk6IG5leHRQcm9wcy5yZWFkT25seSwgZGF0YTogbmV4dFByb3BzLmRhdGEgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTZWxlY3Q7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5TZWxlY3QucHJvcFR5cGVzID0ge1xuICAgIGRhdGE6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIGlkOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICBrb29kOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBuaW1ldHVzOiBQcm9wVHlwZXMuc3RyaW5nXG4gICAgfSkpLFxuICAgIHJlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgYnRuRGVsZXRlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjb2xsSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBkZWZhdWx0VmFsdWU6IFByb3BUeXBlcy5zdHJpbmdcbn07XG5cblNlbGVjdC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICB2YWxpZDogdHJ1ZSxcbiAgICBidG5EZWxldGU6IGZhbHNlLFxuICAgIGNvbGxJZDogJ2lkJyxcbiAgICB0aXRsZTogJycsXG4gICAgZGVmYXVsdFZhbHVlOiAnJyxcbiAgICBkYXRhOiBbeyBpZDogMCwga29vZDogJycsIG5pbWV0dXM6ICcnIH1dXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJhZGl1bShTZWxlY3QpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3Qvc2VsZWN0LmpzeFxuLy8gbW9kdWxlIGlkID0gMjEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17d3JhcHBlcjp7bWFyZ2luOic1cHgnLGRpc3BsYXk6J2ZsZXgnLHdpZHRoOic5NSUnfSxpbnB1dDp7d2lkdGg6JzcwJScsbWFyZ2luOic1cHggMnB4Jyxib3JkZXJSYWRpdXM6JzVweCd9LGE6e3dpZHRoOic3MCUnLG1hcmdpbkxlZnQ6JzVweCcsYm9yZGVyUmFkaXVzOic1cHgnfSxoaWRlOntkaXNwbGF5Oidub25lJ30sc2VsZWN0Ont3aWR0aDonNzAlJyxoZWlnaHQ6JzMwcHgnLG1hcmdpbjonNXB4IDJweCcsYm9yZGVyUmFkaXVzOic1cHgnLCc6Zm9jdXMnOntiYWNrZ3JvdW5kQ29sb3I6J2xpZ2h0cGluayd9LG9wYWNpdHk6MX0scmVhZE9ubHk6e2JhY2tncm91bmRDb2xvcjonI0YzRUZFRid9LGxhYmVsOnt3aWR0aDonMzAlJyxtYXJnaW46JzVweCd9LGJ1dHRvbjp7d2lkdGg6JzUlJ319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3Qvc2VsZWN0LXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIHJhZGl1bSA9IHJlcXVpcmUoJ3JhZGl1bScpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vaW5wdXQtZGF0ZS1zdHlsZXMnKTtcblxudmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcblxudmFyIElucHV0RGF0ZSA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhJbnB1dERhdGUsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIElucHV0RGF0ZShwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5wdXREYXRlKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoSW5wdXREYXRlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSW5wdXREYXRlKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlIHx8ICcnLFxuICAgICAgICAgICAgcmVhZE9ubHk6IHByb3BzLnJlYWRPbmx5XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm9uQ2hhbmdlID0gX3RoaXMub25DaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqINGD0YHRgtCw0L3QvtCy0LjRgiDRhNC+0LrRg9GBINC90LAg0Y3Qu9C10LzQtdC90YLRi1xyXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhJbnB1dERhdGUsIFt7XG4gICAgICAgIGtleTogJ2ZvY3VzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvY3VzKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzWydpbnB1dCddLmZvY3VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3aWxsIHVwZGF0ZSBzdGF0ZSBpZiBwcm9wcyBjaGFuZ2VkXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGUoZmllbGRWYWx1ZSk7XG5cbiAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQt9C90LDRh9C10L3QuNC1INC90YPQuywg0YLQviDQv9GD0YHRgtGMINCx0YPQtNC10YIgbnVsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbiA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiBmaWVsZFZhbHVlIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0LfQsNC00LDQvSDQvtCx0YDQsNCx0L7RgtGH0LjQuiwg0LLQtdGA0L3QtdC8INC10LPQvlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMubmFtZSwgZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0UGxhY2VIb2xkZXIgPSB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8IHRoaXMucHJvcHMudGl0bGUsXG4gICAgICAgICAgICAgICAgaW5wdXRTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5pbnB1dCwgdGhpcy5wcm9wcy53aWR0aCA/IHsgd2lkdGg6IHRoaXMucHJvcHMud2lkdGggfSA6IHt9LCB0aGlzLnN0YXRlLnJlYWRPbmx5ID8gc3R5bGVzLnJlYWRPbmx5IDoge30sIHRoaXMucHJvcHMuc3R5bGVzID8gdGhpcy5wcm9wcy5zdHlsZXMgOiB7fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy53cmFwcGVyIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmxhYmVsLCBodG1sRm9yOiB0aGlzLnByb3BzLm5hbWUsIHJlZjogJ2xhYmVsJyB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRpdGxlXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogaW5wdXRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnZhbHVlIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdGhpcy5zdGF0ZS5yZWFkT25seSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBpbnB1dFBsYWNlSG9sZGVyLFxuICAgICAgICAgICAgICAgICAgICBtaW46IHRoaXMucHJvcHMubWluLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IHRoaXMucHJvcHMubWF4LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndmFsaWRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0LzQuNC9ICwg0LzQsNGFXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5taW4gJiYgdGhpcy5wcm9wcy5tYXggJiYgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZVZhbHVlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRhdGVWYWx1ZSA+IHRoaXMucHJvcHMubWluICYmIGRhdGVWYWx1ZSA8IHRoaXMucHJvcHMubWF4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMudmFsdWUgIT09IHByZXZTdGF0ZS52YWx1ZSB8fCBuZXh0UHJvcHMucmVhZE9ubHkgIT09IHByZXZTdGF0ZS5yZWFkT25seSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBuZXh0UHJvcHMudmFsdWUsIHJlYWRPbmx5OiBuZXh0UHJvcHMucmVhZE9ubHkgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBJbnB1dERhdGU7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5JbnB1dERhdGUucHJvcFR5cGVzID0ge1xuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBtaW46IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbWF4OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHJlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdmFsaWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHBhdHRlcm46IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgd2lkdGg6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmdcbn07XG5cbklucHV0RGF0ZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICB2YWxpZDogdHJ1ZSxcbiAgICB2YWx1ZTogU3RyaW5nKGN1cnJlbnREYXRlKSxcbiAgICB0aXRsZTogJydcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcmFkaXVtKElucHV0RGF0ZSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LWRhdGUvaW5wdXQtZGF0ZS5qc3hcbi8vIG1vZHVsZSBpZCA9IDIxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2lucHV0Ont3aWR0aDonNzAlJyxib3JkZXJSYWRpdXM6JzNweCcsbWFyZ2luOic1cHggMnB4JywnOmZvY3VzJzp7YmFja2dyb3VuZENvbG9yOidsaWdodHBpbmsnfSxib3JkZXI6JzFweCBzb2xpZCBncmF5JyxoZWlnaHQ6JzMwcHgnfSxmb2N1c2VkOntiYWNrZ3JvdW5kQ29sb3I6J2xpZ2h0Ymx1ZSd9LHJlYWRPbmx5OntiYWNrZ3JvdW5kQ29sb3I6JyNGM0VGRUYnfSx3cmFwcGVyOnttYXJnaW46JzVweCcsZGlzcGxheTonZmxleCcsd2lkdGg6Jzk1JSd9LGxhYmVsOnt3aWR0aDonMzAlJyxtYXJnaW46JzVweCd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvaW5wdXQtZGF0ZS9pbnB1dC1kYXRlLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIHJhZGl1bSA9IHJlcXVpcmUoJ3JhZGl1bScpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vaW5wdXQtdGV4dC1zdHlsZXMnKTtcblxudmFyIElucHV0ID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKElucHV0LCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBJbnB1dChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5wdXQpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKElucHV0KSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlIHx8ICcnLFxuICAgICAgICAgICAgcmVhZE9ubHk6IHByb3BzLnJlYWRPbmx5LFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgdmFsaWQ6IHByb3BzLnZhbGlkXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm9uQ2hhbmdlID0gX3RoaXMub25DaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvLyB3aWxsIHVwZGF0ZSBzdGF0ZSBpZiBwcm9wcyBjaGFuZ2VkXG5cblxuICAgIF9jcmVhdGVDbGFzcyhJbnB1dCwgW3tcbiAgICAgICAga2V5OiAnb25DaGFuZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogZmllbGRWYWx1ZSB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMubmFtZSwgZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRQbGFjZUhvbGRlciA9IHRoaXMucHJvcHMucGxhY2Vob2xkZXIgfHwgdGhpcy5wcm9wcy50aXRsZSxcbiAgICAgICAgICAgICAgICBpbnB1dFN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGVzLmlucHV0LCB0aGlzLnByb3BzLndpZHRoID8geyB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCB9IDoge30sIHRoaXMucHJvcHMuc3R5bGUgPyB0aGlzLnByb3BzLnN0eWxlIDoge30sIHRoaXMuc3RhdGUucmVhZE9ubHkgPyBzdHlsZXMucmVhZE9ubHkgOiB7fSk7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy53cmFwcGVyIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmxhYmVsLCBodG1sRm9yOiB0aGlzLnByb3BzLm5hbWUsIHJlZjogJ2xhYmVsJyB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRpdGxlXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5wcm9wcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBpbnB1dFN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnByb3BzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdGhpcy5zdGF0ZS5yZWFkT25seSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IHRoaXMucHJvcHMucGF0dGVybixcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGlucHV0UGxhY2VIb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICBtYXhMZW5ndGg6IHRoaXMucHJvcHMubWF4TGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0YPRgdGC0LDQvdC+0LLQuNGCINGE0L7QutGD0YEg0L3QsCDRjdC70LXQvNC10L3RgtGLXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZvY3VzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvY3VzKCkge1xuICAgICAgICAgICAgdGhpcy5yZWZzWydpbnB1dCddLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy52YWx1ZSAhPT0gcHJldlN0YXRlLnZhbHVlIHx8IG5leHRQcm9wcy5yZWFkT25seSAhPT0gcHJldlN0YXRlLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSwgcmVhZE9ubHk6IG5leHRQcm9wcy5yZWFkT25seSB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIElucHV0O1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuSW5wdXQucHJvcFR5cGVzID0ge1xuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICByZWFkT25seTogUHJvcFR5cGVzLmJvb2wsXG4gICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHZhbGlkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwYXR0ZXJuOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5JbnB1dC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICB2YWxpZDogdHJ1ZSxcbiAgICB2YWx1ZTogJycsXG4gICAgdGl0bGU6ICcnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJhZGl1bShJbnB1dCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LXRleHQvaW5wdXQtdGV4dC5qc3hcbi8vIG1vZHVsZSBpZCA9IDIxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2lucHV0Ont3aWR0aDonNzAlJyxtYXJnaW46JzVweCAycHgnLGJvcmRlclJhZGl1czonM3B4JywnOmZvY3VzJzp7YmFja2dyb3VuZENvbG9yOidsaWdodHBpbmsnfSxib3JkZXI6JzFweCBzb2xpZCBncmF5JyxoZWlnaHQ6JzMwcHgnfSxyZWFkT25seTp7YmFja2dyb3VuZENvbG9yOicjRjNFRkVGJ30sd3JhcHBlcjp7bWFyZ2luOic1cHgnLGRpc3BsYXk6J2ZsZXgnLHdpZHRoOic5NSUnfSxsYWJlbDp7d2lkdGg6JzMwJScsbWFyZ2luOic1cHgnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LXRleHQvaW5wdXQtdGV4dC1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDIxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuL2lucHV0LW51bWJlci1zdHlsZXMnKTtcbnZhciByYWRpdW0gPSByZXF1aXJlKCdyYWRpdW0nKTtcblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIElucHV0ID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKElucHV0LCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBJbnB1dChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5wdXQpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKElucHV0KSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICAgICAgcmVhZE9ubHk6IHByb3BzLnJlYWRPbmx5LFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgdmFsaWQ6IHByb3BzLnZhbGlkXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm9uQ2hhbmdlID0gX3RoaXMub25DaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvLyB3aWxsIHVwZGF0ZSBzdGF0ZSBpZiBwcm9wcyBjaGFuZ2VkXG5cblxuICAgIF9jcmVhdGVDbGFzcyhJbnB1dCwgW3tcbiAgICAgICAga2V5OiAnb25DaGFuZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogZmllbGRWYWx1ZSB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMucHJvcHMubmFtZSwgZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRQbGFjZUhvbGRlciA9IHRoaXMucHJvcHMucGxhY2Vob2xkZXIgfHwgdGhpcy5wcm9wcy5uYW1lLFxuICAgICAgICAgICAgICAgIGlucHV0U3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMuaW5wdXQsIHRoaXMucHJvcHMuc3R5bGUgPyB0aGlzLnByb3BzLnN0eWxlIDoge30sIHRoaXMucHJvcHMud2lkdGggPyB7IHdpZHRoOiB0aGlzLnByb3BzLndpZHRoIH0gOiB7fSwgdGhpcy5zdGF0ZS5yZWFkT25seSA/IHN0eWxlcy5yZWFkT25seSA6IHt9KSxcbiAgICAgICAgICAgICAgICBpbnB1dE1pblZhbHVlID0gdGhpcy5wcm9wcy5taW4sXG4gICAgICAgICAgICAgICAgaW5wdXRNYXhWYWx1ZSA9IHRoaXMucHJvcHMubWF4O1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy53cmFwcGVyIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmxhYmVsLCBodG1sRm9yOiB0aGlzLnByb3BzLm5hbWUsIHJlZjogJ2xhYmVsJyB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnRpdGxlXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogdGhpcy5wcm9wcy50eXBlID8gdGhpcy5wcm9wcy50eXBlIDogJ251bWJlcicsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnByb3BzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGlucHV0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0aGlzLnN0YXRlLnJlYWRPbmx5LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGlucHV0UGxhY2VIb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICBtaW46IGlucHV0TWluVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIG1heDogaW5wdXRNYXhWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RlcDogJzAuMDEnLFxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiAnXFxcXGQrKFxcXFwuXFxcXGR7Mn0pPycsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDRg9GB0YLQsNC90L7QstC40YIg0YTQvtC60YPRgSDQvdCwINGN0LvQtdC80LXQvdGC0YtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZm9jdXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnNbJ2lucHV0J10uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgICBpZiAobmV4dFByb3BzLnZhbHVlICE9PSBwcmV2U3RhdGUudmFsdWUgfHwgbmV4dFByb3BzLnJlYWRPbmx5ICE9PSBwcmV2U3RhdGUucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbmV4dFByb3BzLnZhbHVlLCByZWFkT25seTogbmV4dFByb3BzLnJlYWRPbmx5IH07XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gSW5wdXQ7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5JbnB1dC5wcm9wVHlwZXMgPSB7XG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHZhbHVlOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHJlYWRPbmx5OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdmFsaWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHBhdHRlcm46IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbWluOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIG1heDogUHJvcFR5cGVzLm51bWJlclxufTtcblxuSW5wdXQuZGVmYXVsdFByb3BzID0ge1xuICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgdmFsaWQ6IHRydWUsXG4gICAgbWluOiAtOTk5OTk5OTk5LFxuICAgIG1heDogOTk5OTk5OTk5XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJhZGl1bShJbnB1dCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LW51bWJlci9pbnB1dC1udW1iZXIuanN4XG4vLyBtb2R1bGUgaWQgPSAyMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtpbnB1dDp7d2lkdGg6JzcwJScsbWFyZ2luOic1cHggMnB4Jyxib3JkZXJSYWRpdXM6JzNweCcsJzpmb2N1cyc6e2JhY2tncm91bmRDb2xvcjonbGlnaHRwaW5rJ30sYm9yZGVyOicxcHggc29saWQgZ3JheScsaGVpZ2h0OiczMHB4J30sZm9jdXNlZDp7YmFja2dyb3VuZENvbG9yOidsaWdodGJsdWUnfSxyZWFkT25seTp7YmFja2dyb3VuZENvbG9yOicjRjNFRkVGJ30sd3JhcHBlcjp7bWFyZ2luOic1cHgnLGRpc3BsYXk6J2ZsZXgnLHdpZHRoOic5NSUnfSxsYWJlbDp7d2lkdGg6JzMwJScsbWFyZ2luOic1cHgnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2lucHV0LW51bWJlci9pbnB1dC1udW1iZXItc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXt3cmFwcGVyOntkaXNwbGF5OidpbmxpbmUtZmxleCd9LGJ1dHRvbU9wZW46e2Rpc3BsYXk6J2ZsZXgnfSxzZWxlY3Q6e3dpZHRoOidhdXRvJyxwb3NpdGlvbjonYWJzb2x1dGUnLGhlaWdodDonMzBweCd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvdGFzay13aWRnZXQvdGFzay13aWRnZXQtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBNb2RhbFBhZ2UgPSByZXF1aXJlKCcuLi9tb2RhbFBhZ2UuanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9zdHlsZXMuanMnKTtcblxudmFyIFRleHRBcmVhID0gcmVxdWlyZSgnLi8uLi8uLi90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCcpO1xudmFyIERhdGFHcmlkID0gcmVxdWlyZSgnLi4vLi4vZGF0YS1ncmlkL2RhdGEtZ3JpZC5qc3gnKTtcblxudmFyIE1vZGFsUGFnZUluZm8gPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoTW9kYWxQYWdlSW5mbywgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gTW9kYWxQYWdlSW5mbyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kYWxQYWdlSW5mbyk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vZGFsUGFnZUluZm8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNb2RhbFBhZ2VJbmZvKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogX3RoaXMucHJvcHMuc2hvd1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvLyB3aWxsIHVwZGF0ZSBzdGF0ZSBpZiBwcm9wcyBjaGFuZ2VkXG5cblxuICAgIF9jcmVhdGVDbGFzcyhNb2RhbFBhZ2VJbmZvLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIEdSSURfQ09ORklHID0gcmVxdWlyZSgnLi8uLi8uLi8uLi8uLi9jb25maWcvY29uc3RhbnRzJykudHVsZW11c2VkLmdyaWRDb25maWc7XG5cbiAgICAgICAgICAgIHZhciBzeXN0ZW1NZXNzYWdlID0gdGhpcy5wcm9wcy5zeXN0ZW1NZXNzYWdlID8gdGhpcy5wcm9wcy5zeXN0ZW1NZXNzYWdlIDogJycsXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMucHJvcHMucmVwb3J0ID8gdGhpcy5wcm9wcy5yZXBvcnQgOiAnJyxcbiAgICAgICAgICAgICAgICBtb2RhbE9iamVjdHMgPSBbJ2J0bk9rJ107XG5cbiAgICAgICAgICAgIHZhciByZXBvcnQgPSB0aGlzLmxvZVR1bGVtdXNlZChkYXRhKTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgTW9kYWxQYWdlLFxuICAgICAgICAgICAgICAgIHsgcmVmOiAnbW9kYWxQYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5tb2RhbFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMuc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlQnRuQ2xpY2s6IHRoaXMucHJvcHMubW9kYWxQYWdlQnRuQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICdUXFx4RjZcXHhGNlxceEZDbGVzYW5uZSByZXBvcnQnLFxuICAgICAgICAgICAgICAgICAgICBtb2RhbE9iamVjdHM6IG1vZGFsT2JqZWN0c1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAnY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbiB9KSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1NZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdSZXBvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudHVsZW11cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1yZXBvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXBvcnQua29ra3VWb3R0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2dyaWQtcm93LWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0YUdyaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkRGF0YTogcmVwb3J0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZENvbHVtbnM6IEdSSURfQ09ORklHLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUb29sQmFyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdkYXRhLWdyaWQnIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsb2VUdWxlbXVzZWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9lVHVsZW11c2VkKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciByZXBvcnQgPSB7XG4gICAgICAgICAgICAgICAga29ra3VWb3R0ZTogJycsXG4gICAgICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSAwO1xuICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L7QtNC40L0g0L7QsdGM0LXQutGCXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmRhdGEgJiYgX3R5cGVvZihkYXRhLmRhdGEpID09ICdvYmplY3QnICYmICFkYXRhLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0LmRhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGRhdGEucmVzdWx0ICYmICFkYXRhLmVycm9yX2NvZGUgPyAnT2snIDogJ1ZpZ2EnLFxuICAgICAgICAgICAgICAgICAgICBrYXNfdmlnYW5lOiBkYXRhLmthc192aWdhbmUgPyAnVmlnYScgOiAnT2snLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiBkYXRhLmVycm9yX2NvZGUsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yX21lc3NhZ2U6IGRhdGEuZXJyb3JfbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgdmlpdGVucjogZGF0YS52aWl0ZW5yID8gZGF0YS52aWl0ZW5yIDogbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghZGF0YS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmRhdGEgJiYgKHR5cGVvZiBkYXRhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihkYXRhKSkgPT0gJ29iamVjdCcgJiYgZGF0YS5kYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5tYXAoZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0LmRhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcm93LmlkID8gcm93LmlkIDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBrYXNfdmlnYW5lOiByb3cua2FzX3ZpZ2FuZSA/ICdWaWdhJyA6ICdPaycsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHJvdy5yZXN1bHQgJiYgIXJvdy5lcnJvcl9jb2RlID8gJ09rJyA6ICdWaWdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6IHJvdy5lcnJvcl9jb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZTogcm93LmVycm9yX21lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWl0ZW5yOiByb3cudmlpdGVuciA/IHJvdy52aWl0ZW5yIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyb3cucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXBvcnQua29ra3VWb3R0ZSA9ICdWZWFkIGtva2t1ICcgKyBlcnJvcnMgKyAnLCBSZWFkIGtva2t1OiAnICsgcmVwb3J0LmRhdGEubGVuZ3RoICsgJywgXFx4RDVubmVzdHVzOiAnICsgKHJlcG9ydC5kYXRhLmxlbmd0aCAtIGVycm9ycyk7XG4gICAgICAgICAgICByZXR1cm4gcmVwb3J0O1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMuc2hvdyAhPT0gcHJldlN0YXRlLnNob3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzaG93OiBuZXh0UHJvcHMuc2hvdyB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1vZGFsUGFnZUluZm87XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5Nb2RhbFBhZ2VJbmZvLnByb3BUeXBlcyA9IHtcbiAgICBzeXN0ZW1NZXNzYWdlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiBQcm9wVHlwZXMuZnVuY1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RhbFBhZ2VJbmZvO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLXJlcG9ydC9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDIyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2ljb246Jy9pbWFnZXMvaWNvbnMvaW5mby5wbmcnLG1vZGFsUGFnZTp7aGVpZ2h0Oic3NSUnfSx0dWxlbXVzOntoZWlnaHQ6JzJlbSd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1yZXBvcnQvc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi90ZXh0LWFyZWEtc3R5bGVzJyk7XG52YXIgcmFkaXVtID0gcmVxdWlyZSgncmFkaXVtJyk7XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBJbnB1dCA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhJbnB1dCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gSW5wdXQocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElucHV0KTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoSW5wdXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihJbnB1dCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSB8fCAnJyxcbiAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGVkIHx8IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpcy5vbkNoYW5nZSA9IF90aGlzLm9uQ2hhbmdlLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoSW5wdXQsIFt7XG4gICAgICAgIGtleTogJ29uQ2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gZS50YXJnZXQudmFsdWU7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogZmllbGRWYWx1ZSB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnByb3BzLm5hbWUsIGZpZWxkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGlucHV0UGxhY2VIb2xkZXIgPSB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8IHRoaXMucHJvcHMudGl0bGUsXG4gICAgICAgICAgICAgICAgaW5wdXRTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcy5pbnB1dCwgdGhpcy5wcm9wcy53aWR0aCA/IHsgd2lkdGg6IHRoaXMucHJvcHMud2lkdGggfSA6IHt9LCB0aGlzLnN0YXRlLnJlYWRPbmx5ID8gc3R5bGVzLnJlYWRPbmx5IDoge30sIHRoaXMucHJvcHMuc3R5bGUgPyB0aGlzLnByb3BzLnN0eWxlIDoge30pO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMud3JhcHBlciB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgIHsgaHRtbEZvcjogdGhpcy5wcm9wcy5uYW1lLCByZWY6ICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmxhYmVsIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50aXRsZVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScsIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGlucHV0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMucHJvcHMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS52YWx1ZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRoaXMucHJvcHMucmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogaW5wdXRQbGFjZUhvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy52YWx1ZSAhPT0gcHJldlN0YXRlLnZhbHVlIHx8IG5leHRQcm9wcy5yZWFkT25seSAhPT0gcHJldlN0YXRlLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSwgcmVhZE9ubHk6IG5leHRQcm9wcy5yZWFkT25seSB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIElucHV0O1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuSW5wdXQucHJvcFR5cGVzID0ge1xuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICByZWFkT25seTogUHJvcFR5cGVzLmJvb2wsXG4gICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHZhbGlkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxuSW5wdXQuZGVmYXVsdFByb3BzID0ge1xuICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgdmFsaWQ6IHRydWUsXG4gICAgdGl0bGU6ICcnLFxuICAgIHZhbHVlOiAnJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSByYWRpdW0oSW5wdXQpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeFxuLy8gbW9kdWxlIGlkID0gMjI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17aW5wdXQ6e3dpZHRoOicxMDAlJyxib3JkZXJSYWRpdXM6JzNweCcsb3ZlcmZsb3c6J3Njcm9sbCcsaGVpZ2h0OidmaXQtY29udGVudCcsJzpmb2N1cyc6e2JhY2tncm91bmRDb2xvcjonbGlnaHRwaW5rJ30sYm9yZGVyOicxcHggc29saWQgZ3JheSd9LGZvY3VzZWQ6e2JhY2tncm91bmRDb2xvcjonbGlnaHRibHVlJ30scmVhZE9ubHk6e2JhY2tncm91bmRDb2xvcjonI0YzRUZFRid9LHdyYXBwZXI6e21hcmdpbjonNXB4JyxkaXNwbGF5OidmbGV4Jyx3aWR0aDonOTglJyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nfSxsYWJlbDp7bWFyZ2luOic1cHgnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3RleHQtYXJlYS90ZXh0LWFyZWEtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtkb2NSb3c6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J3JvdycvKlxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJsdWUnXHJcbiAgICAgICAgKi99LGRvY0NvbHVtbjp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJywvKlxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHllbGxvdycsXHJcbiAgICAgICAgKi93aWR0aDonNTAlJ30sZG9jOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLypcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBicm93bidcclxuICAgICAgICAqL30sb2s6e2JhY2tncm91bmRDb2xvcjonbGlnaHRncmVlbicsd2lkdGg6JzEwMCUnLHRleHRBbGlnbjoncmlnaHQnfSxlcnJvcjp7YmFja2dyb3VuZENvbG9yOidsaWdodGNvcmFsJyx3aWR0aDonMTAwJScsdGV4dEFsaWduOidyaWdodCd9LG5vdFZhbGlkOntiYWNrZ3JvdW5kQ29sb3I6J3llbGxvdycsd2lkdGg6JzEwMCUnLHRleHRBbGlnbjoncmlnaHQnfSxtb2RhbFZhbGlkYXRlOntpY29uSW1hZ2U6Jy9pbWFnZXMvaWNvbnMvaW5mby5wbmcnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2RvY3VtZW50VGVtcGxhdGUvZG9jdW1lbnQtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVsYXRlZERvY3VtZW50cyA9IGZ1bmN0aW9uIHJlbGF0ZWREb2N1bWVudHMoc2VsZikge1xuICAgIC8vINGE0L7RgNC80LjRgNGD0LXQvCDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4XG4gICAgdmFyIHBhZ2VzID0gc2VsZi5wYWdlcztcbiAgICB2YXIgcmVsYXRlZERvY3VtZW50cyA9IHNlbGYuZG9jRGF0YS5yZWxhdGlvbnMgPyBzZWxmLmRvY0RhdGEucmVsYXRpb25zIDogW107XG4gICAgaWYgKHNlbGYucGFnZXMgJiYgc2VsZi5wYWdlcy5sZW5ndGggJiYgKCFzZWxmLmRvY0RhdGEuaWQgfHwgc2VsZi5kb2NEYXRhLmlkID09PSAwKSkge1xuICAgICAgICAvLyDRgdC+0LfQtNCw0LXQvCDQvdC+0LLRi9C5INC00L7QulxuICAgICAgICBwYWdlcyA9IFtzZWxmLnBhZ2VzWzBdXTtcbiAgICAgICAgcmVsYXRlZERvY3VtZW50cyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChyZWxhdGVkRG9jdW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVsYXRlZERvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgICAgIGlmIChkb2MuaWQpIHtcbiAgICAgICAgICAgICAgICAvLyDQv9GA0L7QstC10YDQuNC8INC90LAg0YPQvdC40LrQsNC70YzQvdC+0YHRgtGMINGB0L/QuNGB0LrQsCDQtNC+0LrRg9C80LXQvdGC0L7QslxuICAgICAgICAgICAgICAgIHZhciBpc0V4aXN0cyA9IHBhZ2VzLmZpbmQoZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYWdlLmRvY0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5kb2NJZCA9PSBkb2MuaWQgJiYgcGFnZS5kb2NUeXBlSWQgPT0gZG9jLmRvY190eXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vINCyINC80LDRgdGB0LjQstC1INC90LXRgiwg0LTQvtCx0LDQstC40Lwg0YHRgdGL0LvQutGDINC90LAg0LTQvtC60YPQvNC10L3RglxuICAgICAgICAgICAgICAgICAgICBwYWdlcy5wdXNoKHsgZG9jVHlwZUlkOiBkb2MuZG9jX3R5cGUsIGRvY0lkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlTmFtZTogZG9jLm5hbWUgKyAoZG9jLm51bWJlciA/ICcgbnI6JyArIGRvYy5udW1iZXIgOiAnIGlkOicgKyBkb2MuaWQpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbGYucGFnZXMgPSBwYWdlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcmVsYXRlZERvY3VtZW50cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL21peGluL3JlbGF0ZWREb2N1bWVudHMuanN4XG4vLyBtb2R1bGUgaWQgPSAyMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtkb2NSb3c6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J3JvdycvKlxyXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBibHVlJ1xyXG4qL30sZG9jQ29sdW1uOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLC8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHllbGxvdycsXHJcbiovd2lkdGg6JzUwJSd9LGRvYzp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJy8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJyb3duJ1xyXG4qL30sZ3JpZFJvdzp7Ym9yZGVyOicxcHggc29saWQgYmxhY2snLGJhY2tncm91bmRDb2xvcjond2hpdGUnLHBvc2l0aW9uOidyZWxhdGl2ZScsbWFyZ2luOicxMCUgMzAlIDEwJSAzMCUnLHdpZHRoOidhdXRvJyxvcGFjaXR5OicxJyx0b3A6JzEwMHB4J30sZ3JpZDp7bWFpblRhYmxlOnt3aWR0aDonMTAwJSd9LGhlYWRlclRhYmxlOnt3aWR0aDonMTAwJSd9LGdyaWRDb250YWluZXI6e3dpZHRoOicxMDAlJ319LHN1bW1hOnt3aWR0aDonYXV0byd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvam91cm5hbC9kb2N1bWVudC9qb3VybmFsLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBfZmV0Y2hEYXRhID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2ZldGNoRGF0YScpO1xudmFyIERvY0NvbnRleHQgPSByZXF1aXJlKCcuLy4uLy4uL2RvYy1jb250ZXh0LmpzJyk7XG52YXIgTWVudSA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9tZW51LXRvb2xiYXIvbWVudS10b29sYmFyLmpzeCcpO1xudmFyIERvY1JpZ2h0cyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29uZmlnL2RvY19yaWdodHMnKTtcbnZhciBjaGVja1JpZ2h0cyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9jaGVja1JpZ2h0cycpO1xudmFyIGNyZWF0ZUVtcHR5RmlsdGVyRGF0YSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9jcmVhdGVFbXB0eUZpbHRlckRhdGEnKTtcbnZhciBwcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL3ByZXBhcmVTcWxXaGVyZUZyb21GaWx0ZXInKTtcbnZhciBDb25zdCA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29uZmlnL2NvbnN0YW50cycpO1xudmFyIExpaW1pdCA9IENvbnN0LlJFQ09SRFNfTElNSVQ7XG52YXIgcHJlcGFyZURhdGEgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2xpYnMvcHJlcGFpcmVGaWx0ZXJEYXRhJyk7XG5cbnZhciBEYXRhR3JpZCA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9kYXRhLWdyaWQvZGF0YS1ncmlkLmpzeCcpLFxuICAgIFN0YXJ0TWVudSA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9zdGFydC1tZW51L3N0YXJ0LW1lbnUuanN4JyksXG4gICAgQnRuQWRkID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItYWRkL2J1dHRvbi1yZWdpc3Rlci1hZGQuanN4JyksXG4gICAgQnRuRWRpdCA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWVkaXQvYnV0dG9uLXJlZ2lzdGVyLWVkaXQuanN4JyksXG4gICAgQnRuRGVsZXRlID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZGVsZXRlL2J1dHRvbi1yZWdpc3Rlci1kZWxldGUuanN4JyksXG4gICAgQnRuUHJpbnQgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1wcmludC9idXR0b24tcmVnaXN0ZXItcHJpbnQuanN4JyksXG4gICAgQnRuUGRmID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcGRmL2luZGV4LmpzeCcpLFxuICAgIEJ0bkZpbHRlciA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWZpbHRlci9idXR0b24tcmVnaXN0ZXItZmlsdGVyLmpzeCcpLFxuICAgIEJ0blNlbGVjdCA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXNlbGVjdC9pbmRleC5qc3gnKSxcbiAgICBCdG5FbWFpbCA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLWVtYWlsL2luZGV4LmpzeCcpLFxuICAgIEJ0blJlZnJlc2ggPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWZyZXNoL2luZGV4LmpzeCcpLFxuICAgIFRvb2xiYXJDb250YWluZXIgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvdG9vbGJhci1jb250YWluZXIvdG9vbGJhci1jb250YWluZXIuanN4JyksXG4gICAgR3JpZEZpbHRlciA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9kYXRhLWdyaWQvZ3JpZC1maWx0ZXIvZ3JpZC1maWx0ZXIuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4JyksXG4gICAgSW5wdXRUZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LXRleHQvaW5wdXQtdGV4dC5qc3gnKSxcbiAgICBNb2RhbFBhZ2VEZWxldGUgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1kZWxldGUvbW9kYWxQYWdlLWRlbGV0ZS5qc3gnKSxcbiAgICBNb2RhbFJlcG9ydCA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxwYWdlLXJlcG9ydC9pbmRleC5qc3gnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuL2RvY3VtZW50cy1zdHlsZXMnKTtcblxuLyoqXHJcbiAqINCa0LvQsNGB0YEg0YDQtdCw0LvQuNC30YPQtdGCINC00L7QutGD0LzQtdC90YIg0YHQv9GA0LDQstC+0YfQvdC40LrQsCDQv9GA0LjQt9C90LDQutC+0LIuXHJcbiAqL1xuXG52YXIgRG9jdW1lbnRzID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoRG9jdW1lbnRzLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIERvY3VtZW50cyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9jdW1lbnRzKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRG9jdW1lbnRzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRG9jdW1lbnRzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLmdyaWREYXRhID0gW107XG4gICAgICAgIF90aGlzLmdyaWRDb25maWcgPSBEb2NDb250ZXh0LmdyaWRDb25maWcgPyBEb2NDb250ZXh0LmdyaWRDb25maWdbcHJvcHMuZG9jVHlwZUlkXSA6IFtdO1xuICAgICAgICBfdGhpcy5maWx0ZXJEYXRhID0gRG9jQ29udGV4dC5maWx0ZXIgJiYgRG9jQ29udGV4dC5maWx0ZXJbcHJvcHMuZG9jVHlwZUlkXSA/IERvY0NvbnRleHQuZmlsdGVyW3Byb3BzLmRvY1R5cGVJZF0gOiBbXTtcblxuICAgICAgICBpZiAocHJvcHMuaW5pdERhdGEgJiYgcHJvcHMuaW5pdERhdGEucmVzdWx0KSB7XG4gICAgICAgICAgICBfdGhpcy5ncmlkRGF0YSA9IHByb3BzLmluaXREYXRhLnJlc3VsdC5kYXRhIHx8IFtdO1xuICAgICAgICAgICAgX3RoaXMuZ3JpZENvbmZpZyA9ICFfdGhpcy5ncmlkQ29uZmlnLmxlbmd0aCA/IHByb3BzLmluaXREYXRhLmdyaWRDb25maWcgOiBfdGhpcy5ncmlkQ29uZmlnO1xuICAgICAgICAgICAgX3RoaXMuc3VidG90YWxzID0gcHJvcHMuaW5pdERhdGEuc3VidG90YWxzIHx8IFtdO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BzLmluaXREYXRhICYmIHByb3BzLmluaXREYXRhLmdyaWREYXRhKSB7XG5cbiAgICAgICAgICAgIF90aGlzLmdyaWREYXRhID0gcHJvcHMuaW5pdERhdGEuZ3JpZERhdGEgfHwgW107XG4gICAgICAgICAgICBfdGhpcy5ncmlkQ29uZmlnID0gIV90aGlzLmdyaWRDb25maWcubGVuZ3RoID8gcHJvcHMuaW5pdERhdGEuZ3JpZENvbmZpZyA6IF90aGlzLmdyaWRDb25maWc7XG4gICAgICAgICAgICBfdGhpcy5zdWJ0b3RhbHMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLmRvY1R5cGVJZCA9IHByb3BzLmRvY1R5cGVJZDtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5ncmlkRGF0YS5sZW5ndGggPyBfdGhpcy5ncmlkRGF0YVswXS5pZCA6IDAsXG4gICAgICAgICAgICBzb3J0Qnk6IHt9LFxuICAgICAgICAgICAgc3FsV2hlcmU6ICcnLFxuICAgICAgICAgICAgZ2V0RmlsdGVyOiBmYWxzZSxcbiAgICAgICAgICAgIGlzRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgIGhhc1N0YXJ0TWVudVZpc2libGU6IGZhbHNlLCAvLyB3aWxsIHNob3cgc3RhcnQgbWVudVxuICAgICAgICAgICAgc3RhcnRNZW51VmFsdWU6ICdwYXJlbnRpZCcsXG4gICAgICAgICAgICB3YXJuaW5nOiAnJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgd2FybmluZ1R5cGU6ICcnLFxuICAgICAgICAgICAgbGltaXQ6IExpaW1pdCwgLy8gZGVmYXVsdCBsaW1pdCBmb3IgcXVlcnksXG4gICAgICAgICAgICBpc0VtcHR5RmlsdGVyOiBmYWxzZSwgLy8g0LXRgdC70LggdHJ1ZSDRgtC+INC+0LHQvdGD0LvQuNGCINC00LDQvdC90YvQtSDRhNC40LvRjNGC0YDQsCDQv9GA0Lgg0L/QtdGA0LXQs9GA0YPQt9C60LUg0LTQsNC90L3Ri9GFXG4gICAgICAgICAgICBzaG93U2VsZWN0RmllbGRzOiBmYWxzZSwgLy93aWxsIG9wZW4gb3IgY2xvc2UgY29sdW1uIGluIGdyaWQgdG8gc2VsZWN0IHJvd3NcbiAgICAgICAgICAgIGlzUmVwb3J0OiBmYWxzZSwgLy8g0L/QvtC60LDQtyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtSDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjRj1xuICAgICAgICAgICAgdHh0UmVwb3J0OiBbXSAvLyDQtNCw0L3QvdGL0LUg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y9cbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpcy5fYmluZCgnYnRuQWRkQ2xpY2snLCAnY2xpY2tIYW5kbGVyJywgJ2J0bkVkaXRDbGljaycsICdkYmxDbGlja0hhbmRsZXInLCAnaGVhZGVyQ2xpY2tIYW5kbGVyJywgJ2hlYWRlckNsaWNrSGFuZGxlcicsICdidG5GaWx0ZXJDbGljaycsICdidG5TZWxlY3RDbGljaycsICdidG5SZWZyZXNoQ2xpY2snLCAnbW9kYWxQYWdlQnRuQ2xpY2snLCAnbW9kYWxEZWxldGVQYWdlQnRuQ2xpY2snLCAnZmlsdGVyRGF0YUhhbmRsZXInLCAncmVuZGVyRmlsdGVyVG9vbGJhcicsICdidG5TdGFydENsaWNrSGFubGVyJywgJ3JlbmRlclN0YXJ0TWVudScsICdzdGFydE1lbnVDbGlja0hhbmRsZXInLCAnZmV0Y2hEYXRhJywgJ2hhbmRsZUlucHV0Q2hhbmdlJywgJ2J0bkVtYWlsQ2xpY2snLCAnc2V0UmVnaXN0ZXJOYW1lJywgJ21vZGFsUmVwb3J0ZVBhZ2VCdG5DbGljaycpO1xuXG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqINC/0LjRiNC10Lwg0LTQtdC70LDQtdC8INC30LDQv9GA0L7RgSDQv9C+INC40YLQvtCz0YMg0LfQsNCz0YDRg9C30LrQuFxyXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhEb2N1bWVudHMsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICghRG9jQ29udGV4dC5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICBEb2NDb250ZXh0LmZpbHRlciA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3aWxsIHNhdmUgY3VycmVudCBkb2NUeXBlaWRcbiAgICAgICAgICAgIERvY0NvbnRleHRbJ2RvY1R5cGVJZCddID0gdGhpcy5kb2NUeXBlSWQ7XG5cbiAgICAgICAgICAgIHZhciByZWxvYWQgPSBmYWxzZTsgLy8gaWYgcmVsb2FkID09PSB0cnVlIHRoZW4gaXQgd2lsbCBjYWxsIHRvIHJlbG9hZFxuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5pbml0RGF0YSAmJiB0aGlzLnByb3BzLmluaXREYXRhLmRvY1R5cGVJZCAmJiB0aGlzLnByb3BzLmluaXREYXRhLmRvY1R5cGVJZC50b1VwcGVyQ2FzZSgpICE9PSB0aGlzLmRvY1R5cGVJZC50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgcmVsb2FkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g0LTQtdGE0L7Qu9GC0L3Ri9C1INC30L3QsNGH0LXQvdC40Y9cbiAgICAgICAgICAgIGlmICghRG9jQ29udGV4dC5maWx0ZXJbdGhpcy5kb2NUeXBlSWRdICYmIERvY0NvbnRleHQuZ3JpZENvbmZpZ1t0aGlzLmRvY1R5cGVJZF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gRG9jQ29udGV4dC5ncmlkQ29uZmlnW3RoaXMuZG9jVHlwZUlkXTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gcHJlcGFyZURhdGEoY29uZmlnLCB0aGlzLmRvY1R5cGVJZCk7XG5cbiAgICAgICAgICAgICAgICAvLyDQuNGJ0LXQvCDQtNC10YTQvtC70YLQvdGL0LUg0LfQvdCw0YfQtdC90LjRj1xuICAgICAgICAgICAgICAgIGNvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZXZhbChyb3cuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gZGVmYXVsdCB2YWx1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQuNGJ0LXQvCDQuCDQv9GA0LjRgdCy0LDQtdCy0LDQtdC8INC30L3QsNGH0LXQvdC40LVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gZmlsdGVyLmZpbmRJbmRleChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5pZCA9PSByb3cuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJbaWR4XS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgRG9jQ29udGV4dC5maWx0ZXJbdGhpcy5kb2NUeXBlSWRdID0gZmlsdGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0LjQvCDRgdC+0YXRgNCw0L3QtdC90L3Ri9C5INGE0LjQu9GM0YLRgCDQtNC70Y8g0Y3RgtC+0LPQviDRgtC40L/QsFxuICAgICAgICAgICAgaWYgKERvY0NvbnRleHQuZmlsdGVyW3RoaXMuZG9jVHlwZUlkXSAmJiBEb2NDb250ZXh0LmZpbHRlclt0aGlzLmRvY1R5cGVJZF0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyRGF0YSA9IERvY0NvbnRleHQuZmlsdGVyW3RoaXMuZG9jVHlwZUlkXTtcbiAgICAgICAgICAgICAgICByZWxvYWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVsb2FkIHx8ICF0aGlzLnByb3BzLmluaXREYXRhIHx8ICF0aGlzLmdyaWREYXRhLmxlbmd0aCB8fCAhdGhpcy5wcm9wcy5pbml0RGF0YS5kb2NUeXBlSWQpIHtcblxuICAgICAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNC40Lwg0L3QsCDRhNC40LvRjNGC0YBcbiAgICAgICAgICAgICAgICB2YXIgc3FsV2hlcmUgPSBwcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyKHRoaXMuZmlsdGVyRGF0YSwgdGhpcy5kb2NUeXBlSWQpO1xuXG4gICAgICAgICAgICAgICAgLy/QtNC10LvQsNC10Lwg0LfQsNC/0YDQvtGBINC90LAg0L/QvtC70YPRh9C10L3QuNC1INC00LDQvdC90YvRhVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzcWxXaGVyZTogc3FsV2hlcmUgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuZmV0Y2hEYXRhKCdzZWxlY3REb2NzJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIGxhc3REb2NJZCBhdmFpbGFibGUsIHdpbGwgcG9pbnQgaXQgYXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIGlmIChEb2NDb250ZXh0W3RoaXMuZG9jVHlwZUlkLnRvTG93ZXJDYXNlKCldKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvY0lkID0gRG9jQ29udGV4dFt0aGlzLmRvY1R5cGVJZC50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgdmFsdWU6IGRvY0lkIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDQt9Cw0LTQsNGC0Ywg0LjQvNGPINGA0LXRgNC40YHRgtGA0LAg0L3QsCDRgdGC0YDQsNC90LjRhtGDXG4gICAgICAgICAgICB0aGlzLnNldFJlZ2lzdGVyTmFtZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF9zdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZSA/IHRoaXMucHJvcHMuc3R5bGUgOiB7fSk7XG4gICAgICAgICAgICB2YXIgd2FybmluZ1N0eWxlID0gdGhpcy5zdGF0ZS53YXJuaW5nVHlwZSAmJiBzdHlsZXNbdGhpcy5zdGF0ZS53YXJuaW5nVHlwZV0gPyBzdHlsZXNbdGhpcy5zdGF0ZS53YXJuaW5nVHlwZV0gOiBudWxsO1xuICAgICAgICAgICAgdmFyIGJ0blBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBidG5TdGFydDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5Mb2dpbjoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0bkFjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogX3N0eWxlLmRvYyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudSwgeyBwYXJhbXM6IGJ0blBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnbWVudScsXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmVrdklkOiBEb2NDb250ZXh0LnVzZXJEYXRhID8gRG9jQ29udGV4dC51c2VyRGF0YS5hc3V0dXNJZCA6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IF9zdHlsZS5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZW5kZXIodGhpcylcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRmlsdGVyVG9vbGJhcigpLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRG9jVG9vbEJhcigpLFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUud2FybmluZyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIFRvb2xiYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAndG9vbGJhci1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHdhcm5pbmdTdHlsZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndhcm5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBfc3R5bGUuZ3JpZENvbnRhaW5lciB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERhdGFHcmlkLCB7IHJlZjogJ2RhdGFHcmlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBfc3R5bGUuZ3JpZC5tYWluVGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkRGF0YTogdGhpcy5ncmlkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRDb2x1bW5zOiB0aGlzLmdyaWRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0b3RhbHM6IHRoaXMuc3VidG90YWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jbGlja0hhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRibENsaWNrOiB0aGlzLmRibENsaWNrSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSGVhZGVyQ2xpY2s6IHRoaXMuaGVhZGVyQ2xpY2tIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tX3N0eWxpbmc6IHRoaXMucHJvcHMuY3VzdG9tX3N0eWxpbmcgPyB0aGlzLnByb3BzLmN1c3RvbV9zdHlsaW5nIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0OiB0aGlzLnN0YXRlLnNob3dTZWxlY3RGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS52YWx1ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5nZXRGaWx0ZXIgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWxQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdtb2RhbHBhZ2VGaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsUGFnZUJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICdGaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR3JpZEZpbHRlciwgeyByZWY6ICdncmlkRmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0VsZW1lbnQ6IHRoaXMuZ3JpZENvbmZpZ1sxXS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IHRoaXMuZG9jVHlwZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMuZmlsdGVyRGF0YUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZENvbmZpZzogdGhpcy5ncmlkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZmlsdGVyRGF0YSB9KVxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChNb2RhbFBhZ2VEZWxldGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMuc3RhdGUuaXNEZWxldGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogdGhpcy5tb2RhbERlbGV0ZVBhZ2VCdG5DbGljay5iaW5kKHRoaXMpIH0pLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsUmVwb3J0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnN0YXRlLmlzUmVwb3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0OiB0aGlzLnN0YXRlLnR4dFJlcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsUmVwb3J0ZVBhZ2VCdG5DbGljayB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvL9C/0L7QuNGB0Log0L3QsNC30LLQsNC90LjRjyDRgNC10LPQuNGB0YLRgNCwXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFJlZ2lzdGVyTmFtZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRSZWdpc3Rlck5hbWUoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGRvY1R5cGUgPSBEb2NDb250ZXh0WydtZW51J10uZmluZChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5rb29kID09PSBfdGhpczMucHJvcHMuZG9jVHlwZUlkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZG9jVHlwZSkge1xuICAgICAgICAgICAgICAgIERvY0NvbnRleHQucGFnZU5hbWUgPSBkb2NUeXBlLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQuNC30LzQtdC90LXQvdC40Lkg0LIg0LjQvdC/0YPRgiAo0LvQuNC80LjRgilcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlSW5wdXRDaGFuZ2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSW5wdXRDaGFuZ2UobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsaW1pdDogIXZhbHVlIHx8IHZhbHVlID4gTGlpbWl0ID8gTGlpbWl0IDogdmFsdWUgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQstGL0LfQvtCy0LXRgCDQv9C+0LTQs9GA0YPQt9C60YMg0LTQsNC90L3Ri9GFINGBINC/0LDRgNCw0LzQtdGC0YDQvtC8INGB0L7RgNGC0LjRgNC+0LLQutC4XHJcbiAgICAgICAgICogQHBhcmFtIHNvcnRCeVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoZWFkZXJDbGlja0hhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGVhZGVyQ2xpY2tIYW5kbGVyKHNvcnRCeSkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChzb3J0QnlbMF0uY29sdW1uID09ICdzZWxlY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g0LjRhdC10Lwg0YLQuNC/INC/0L7Qu9GPLCDQtdGB0LvQuCDRg9C60LDQt9Cw0L1cbiAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLmdyaWRDb25maWcuZmluZChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5pZCA9PSBzb3J0QnlbMF0uY29sdW1uO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocm93ICYmIHJvdy50eXBlKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzb3J0QnlbMF0sIHsgdHlwZTogcm93LnR5cGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc29ydEJ5OiBzb3J0QnkgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuZmV0Y2hEYXRhKCdzZWxlY3REb2NzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LLQvtC50L3QvtCz0L4g0LrQu9C40LrQsFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkYmxDbGlja0hhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGJsQ2xpY2tIYW5kbGVyKCkge1xuICAgICAgICAgICAgdGhpcy5idG5FZGl0Q2xpY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQs9GA0LjQtNCwXHJcbiAgICAgICAgICogQHBhcmFtIGFjdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSBkb2NJZFxyXG4gICAgICAgICAqIEBwYXJhbSBpZHhcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2xpY2tIYW5kbGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihhY3Rpb24sIGRvY0lkLCBpZHgpIHtcbiAgICAgICAgICAgIGlmIChkb2NJZCAmJiB0eXBlb2YgZG9jSWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiBkb2NJZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0YLQutGA0L7QtdGCINC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDRgSDQv9C+0LvRj9C80Lgg0LTQu9GPINGE0LjQu9GM0YLRgNCw0YbQuNC4XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkZpbHRlckNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkZpbHRlckNsaWNrKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlckRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJEYXRhID0gY3JlYXRlRW1wdHlGaWx0ZXJEYXRhKHRoaXMuZ3JpZENvbmZpZywgdGhpcy5maWx0ZXJEYXRhLCB0aGlzLmRvY1R5cGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ2V0RmlsdGVyOiB0cnVlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0LLRi9C/0L7Qu9C90LjRgiDQt9Cw0L/RgNC+0YEg0Lgg0L7QsdC90L7QstC40YIg0LTQsNC90L3Ri9C1INCz0YDQuNC00LBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuUmVmcmVzaENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0blJlZnJlc2hDbGljaygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgnc2VsZWN0RG9jcycpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzNS5zZXRTdGF0ZSh7IHdhcm5pbmc6ICdFZHVrYWx0Jywgd2FybmluZ1R5cGU6ICdvaycgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60LggQWRkXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkFkZENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkFkZENsaWNrKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYnRuQWRkQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAvLyDQutCw0YHRgtC+0LzQvdGL0Lkg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y9cbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJ0bkFkZENsaWNrKHRoaXMuc3RhdGUudmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwYXRobmFtZTogJy8nICsgdGhpcy5wcm9wcy5tb2R1bGUgKyAnLycgKyB0aGlzLmRvY1R5cGVJZCArICcvMCcsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60L3QvtC/0LrQuCBFZGl0XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkVkaXRDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5FZGl0Q2xpY2soKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5idG5FZGl0Q2xpY2spIHtcbiAgICAgICAgICAgICAgICAvLyDQutCw0YHRgtC+0LzQvdGL0Lkg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y9cbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmJ0bkVkaXRDbGljayh0aGlzLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6ICcvJyArIHRoaXMucHJvcHMubW9kdWxlICsgJy8nICsgdGhpcy5kb2NUeXBlSWQgKyAnLycgKyB0aGlzLnN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogeyBtb2R1bGU6IHRoaXMucHJvcHMubW9kdWxlIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60LggRGVsZXRlXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkRlbGV0ZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0bkRlbGV0ZUNsaWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzRGVsZXRlOiB0cnVlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60L3QvtC/0LrQuCBQcmludFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5QcmludENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0blByaW50Q2xpY2soKSB7XG4gICAgICAgICAgICB2YXIgc3FsV2hlcmUgPSB0aGlzLnN0YXRlLnNxbFdoZXJlO1xuICAgICAgICAgICAgdmFyIHVybCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBlbmNvZGVVUklDb21wb25lbnQoJycgKyBzcWxXaGVyZSk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRGF0YSA9IHRoaXMuZmlsdGVyRGF0YS5maWx0ZXIoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIXJvdy52YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGVuY29kZVVSSUNvbXBvbmVudCgnJyArIEpTT04uc3RyaW5naWZ5KGZpbHRlckRhdGEpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlckRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gJy9wcmludC8nICsgdGhpcy5kb2NUeXBlSWQgKyAnLycgKyBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWQgKyAnLycgKyBmaWx0ZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVybCA9ICcvcHJpbnQvJyArIHRoaXMuZG9jVHlwZUlkICsgJy8nICsgRG9jQ29udGV4dC51c2VyRGF0YS51dWlkICsgJy8wJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCArICcvJyArIHBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LrQvdC+0L/QutC4IFBkZlxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5QZGZDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5QZGZDbGljaygpIHtcbiAgICAgICAgICAgIHZhciBzcWxXaGVyZSA9IHRoaXMuc3RhdGUuc3FsV2hlcmU7XG4gICAgICAgICAgICB2YXIgdXJsID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGVuY29kZVVSSUNvbXBvbmVudCgnJyArIHNxbFdoZXJlKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBlbmNvZGVVUklDb21wb25lbnQoJycgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmZpbHRlckRhdGEpKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVyRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB1cmwgPSAnL3BkZi8nICsgdGhpcy5kb2NUeXBlSWQgKyAnLycgKyBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWQgKyAnLycgKyBmaWx0ZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVybCA9ICcvcGRmLycgKyB0aGlzLmRvY1R5cGVJZCArICcvJyArIERvY0NvbnRleHQudXNlckRhdGEudXVpZCArICcvMCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwgKyAnLycgKyBwYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC60L3QvtC/0LrQuCDRhNC40LvRjNGC0YDQsNGG0LjQuFxyXG4gICAgICAgICAqIEBwYXJhbSBidG5FdmVudFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdtb2RhbFBhZ2VCdG5DbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb2RhbFBhZ2VCdG5DbGljayhidG5FdmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBmaWx0ZXJTdHJpbmcgPSAnJzsgLy8g0YHRgtGA0L7QutCwINGE0LjQu9GM0YLRgNCwXG5cbiAgICAgICAgICAgIGlmIChidG5FdmVudCA9PT0gJ09rJykge1xuICAgICAgICAgICAgICAgIC8vINGB0L7QsdC40YDQsNC10Lwg0LTQsNC90L3Ri9C1XG5cbiAgICAgICAgICAgICAgICBmaWx0ZXJTdHJpbmcgPSBwcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyKHRoaXMuZmlsdGVyRGF0YSwgdGhpcy5kb2NUeXBlSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDRh9C40YHRgtC40Lwg0YHRgtGA0L7QutGDINGE0LjQu9GM0YLRgNCw0YbQuNC4INC4INC80LDRgdGB0LjQsiDRhNC40LvRjNGC0YDQvtCyXG4gICAgICAgICAgICAgICAgZmlsdGVyU3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJEYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICByb3cudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93LnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuc3RhcnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cuZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuZW5kID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBnZXRGaWx0ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNxbFdoZXJlOiBmaWx0ZXJTdHJpbmcsXG4gICAgICAgICAgICAgICAgaXNFbXB0eUZpbHRlcjogIWZpbHRlclN0cmluZ1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmV0Y2hEYXRhKCdzZWxlY3REb2NzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60Lgg0YTQuNC70YzRgtGA0LDRhtC40LhcclxuICAgICAgICAgKiBAcGFyYW0gYnRuRXZlbnRcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxEZWxldGVQYWdlQnRuQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kYWxEZWxldGVQYWdlQnRuQ2xpY2soYnRuRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNEZWxldGU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgaWYgKGJ0bkV2ZW50ID09PSAnT2snKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHdhcm5pbmc6ICdUw7bDtnRhbi4uLicsIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCdkZWxldGUnKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIGluIGZldGNoLT4gJywgZXJyKTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yX21lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2RhdGEuZXJyb3JfbWVzc2FnZScsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnNldFN0YXRlKHsgd2FybmluZzogJ1Rla2tpcyB2aWdhOiAnICsgZGF0YS5lcnJvcl9tZXNzYWdlLCB3YXJuaW5nVHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyAmJiBkYXRhLnN0YXR1cyA9PSA0MDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSAnL2xvZ2luJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5mZXRjaERhdGEoJ3NlbGVjdERvY3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC10YHQu9C4INC10YHRgtGMINCyINC60LXRiNC1ICwg0YLQviDRh9C4Y9GC0LjQvFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpYiA9IF90aGlzNy5kb2NUeXBlSWQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEb2NDb250ZXh0LmxpYnNbbGliXSAmJiBEb2NDb250ZXh0LmxpYnNbbGliXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jQ29udGV4dC5saWJzW2xpYl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINGE0LjQu9GM0YLRgNCwINCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaWx0ZXJEYXRhSGFuZGxlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJEYXRhSGFuZGxlcihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckRhdGEgPSBkYXRhO1xuXG4gICAgICAgICAgICAvLyDRgdC+0LfQtNCw0LTQuCDQvtCx0YzQtdC60YIgPSDQtNC10YDQttCw0YLQtdC70Ywg0YHQvtGB0YLQvtGP0L3QuNGPINGE0LjQu9GM0YLRgNCwXG4gICAgICAgICAgICBpZiAoIURvY0NvbnRleHQuZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgRG9jQ29udGV4dC5maWx0ZXIgPSB7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFEb2NDb250ZXh0LmZpbHRlclt0aGlzLmRvY1R5cGVJZF0pIHtcbiAgICAgICAgICAgICAgICBEb2NDb250ZXh0LmZpbHRlclt0aGlzLmRvY1R5cGVJZF0gPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwICYmIHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIERvY0NvbnRleHQuZmlsdGVyW3RoaXMuZG9jVHlwZUlkXSA9IHRoaXMuZmlsdGVyRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60Lgg0YHRgtCw0YDRgiDQvNC10L3RjlxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdidG5TdGFydENsaWNrSGFubGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ0blN0YXJ0Q2xpY2tIYW5sZXIoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaGFzU3RhcnRNZW51VmlzaWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC/0L7Qu9GD0YfQuNGCINC+0YIg0YHRgtCw0YDRgtC+0LPQviDQvNC10L3RjiDQtNCw0L3QvdGL0LUsINGB0L/RgNGP0YfQtdGCINC80LXQvdGOXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N0YXJ0TWVudUNsaWNrSGFuZGxlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydE1lbnVDbGlja0hhbmRsZXIodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBoYXNTdGFydE1lbnVWaXNpYmxlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCh7XG4gICAgICAgICAgICAgICAgcGF0aG5hbWU6ICcvJyArIHRoaXMucHJvcHMubW9kdWxlICsgJy8nICsgdmFsdWUsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHsgbW9kdWxlOiB0aGlzLnByb3BzLm1vZHVsZSB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYnRuU2VsZWN0Q2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuU2VsZWN0Q2xpY2soKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1NlbGVjdEZpZWxkczogIXRoaXMuc3RhdGUuc2hvd1NlbGVjdEZpZWxkcyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCS0LXRgNC90LXRgiDQutC+0LzQv9C+0L3QtdGCINGBINC00LDQvdC90YvQvNC4INGB0YLRgNC+0LrQuCDRhNC40LvRjNGC0YDQsNGG0LjQuFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtYTUx9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlckZpbHRlclRvb2xiYXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRmlsdGVyVG9vbGJhcigpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSB0aGlzLmdldEZpbHRlclN0cmluZygpO1xuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IHZvaWQgMDtcblxuICAgICAgICAgICAgaWYgKGZpbHRlcikge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIFRvb2xiYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAnZmlsdGVyVG9vbGJhckNvbnRhaW5lcicsIHBvc2l0aW9uOiAnbGVmdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEZpbHRlcjogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVyU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9GA0LXQvtCx0YDQsNC30YPQtdGCINC00LDQvdC90YvQtSDRhNC40LvRjNGC0YDQsCDQsiDRgdGC0YDQvtC60YMg0YfRgtC+0LEg0L/QvtC60LDQt9Cw0YLRjCDQtdC1XHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0RmlsdGVyU3RyaW5nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpbHRlclN0cmluZygpIHtcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSAnJztcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJEYXRhLm1hcChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgdmFyIGthc19zaXNhbGRhYiA9IHJvdy5zcWxObyAmJiByb3cuc3FsTm8gPT0gMCA/ICc8PicgOiAnPSc7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgKyAnICcgKyByb3cubmFtZSArICc+PScgKyByb3cuc3RhcnQgKyAnLCcgKyByb3cubmFtZSArICc8PScgKyByb3cuZW5kICsgJzsnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyA9IHN0cmluZyArIHJvdy5uYW1lICsgJzonICsga2FzX3Npc2FsZGFiICsgJyAnICsgcm93LnZhbHVlICsgJzsgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCS0LXRgNC90LXRgiDQutC+0LzQv9C+0L3QtdGCIC0g0L/QsNC90LXQu9GMINC40L3RgdGC0YDRg9C80LXQvdGC0L7QsiDQtNC+0LrRg9C80LXQvdGC0LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJEb2NUb29sQmFyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckRvY1Rvb2xCYXIoKSB7XG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gdGhpcy5nZXRGaWx0ZXJTdHJpbmcoKTtcblxuICAgICAgICAgICAgdmFyIHRvb2xiYXJQYXJhbXMgPSB0aGlzLnByZXBhcmVQYXJhbXNGb3JUb29sYmFyKCk7IC8v0L/QsNGA0LDQvNC10YLRgNGLINC00LvRjyDQutC90L7Qv9C+0Log0YPQv9GA0LDQstC70LXQvdC40Y8sINCy0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINCw0LrRgtC40LLQvdC+0Lkg0YHRgtGA0L7QutC4XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHJlZjogJ2lucHV0LWxpbWl0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGltaWl0OicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGltaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5saW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcodGhpcy5zdGF0ZS5saW1pdCkgfHwgTGlpbWl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBUb29sYmFyQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICd0b29sYmFyQ29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5BZGQsIHsgb25DbGljazogdGhpcy5idG5BZGRDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5BZGQnXS5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IHRvb2xiYXJQYXJhbXNbJ2J0bkFkZCddLmRpc2FibGVkIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5FZGl0LCB7IG9uQ2xpY2s6IHRoaXMuYnRuRWRpdENsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTXV1ZGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXNbJ2J0bkVkaXQnXS5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IHRvb2xiYXJQYXJhbXNbJ2J0bkVkaXQnXS5kaXNhYmxlZCB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuRGVsZXRlLCB7IG9uQ2xpY2s6IHRoaXMuYnRuRGVsZXRlQ2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5EZWxldGUnXS5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IHRvb2xiYXJQYXJhbXNbJ2J0bkRlbGV0ZSddLmRpc2FibGVkIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5QcmludCwgeyBvbkNsaWNrOiB0aGlzLmJ0blByaW50Q2xpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5QcmludCddLnNob3csXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdUcsO8a2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IHRvb2xiYXJQYXJhbXNbJ2J0blByaW50J10uZGlzYWJsZWQgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blBkZiwgeyBvbkNsaWNrOiB0aGlzLmJ0blBkZkNsaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdG9vbGJhclBhcmFtc1snYnRuUGRmJ10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1BERicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZTogdG9vbGJhclBhcmFtc1snYnRuUGRmJ10uZGlzYWJsZWQgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkVtYWlsLCB7IG9uQ2xpY2s6IHRoaXMuYnRuRW1haWxDbGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQYXJhbXNbJ2J0bkVtYWlsJ10uc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0VtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IHRoaXMuZG9jVHlwZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IHRvb2xiYXJQYXJhbXNbJ2J0bkVtYWlsJ10uZGlzYWJsZWQgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkZpbHRlciwgeyBvbkNsaWNrOiB0aGlzLmJ0bkZpbHRlckNsaWNrIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5SZWZyZXNoLCB7IG9uQ2xpY2s6IHRoaXMuYnRuUmVmcmVzaENsaWNrIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5TZWxlY3QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUGFyYW1zWydidG5TZWxlY3QnXS5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnVmFsaWRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmJ0blNlbGVjdENsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2dyaWQtYnV0dG9uLXNlbGVjdCcgfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntGC0LrRgNC+0LXRgiDRgdGC0LDRgNGC0L7QstC+0LUg0LzQtdC90Y5cclxuICAgICAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyU3RhcnRNZW51JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclN0YXJ0TWVudSgpIHtcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNTdGFydE1lbnVWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50ID0gUmVhY3QuY3JlYXRlRWxlbWVudChTdGFydE1lbnUsIHsgcmVmOiAnc3RhcnRNZW51JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuc3RhcnRNZW51VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrSGFuZGxlcjogdGhpcy5zdGFydE1lbnVDbGlja0hhbmRsZXIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogINGH0LjRgtCw0LXQvCDQtNCw0L3QvdGL0LUg0YHQviDRgdGC0L7RgNCwLCDRhNC+0YDQvNC40YDRg9C10Lwg0L/QsNGA0LDQvNC10YLRgNGLINC00LvRjyDQutC90L7Qv9C+0Log0YPQv9GA0LDQstC70LXQvdC40Y8sINC4INGC0YPQtNCwINC40YUg0L7RgtC00LDQtdC8XHJcbiAgICAgICAgICogQHJldHVybnMge3tidG5BZGQ6IHtzaG93OiBib29sZWFuLCBkaXNhYmxlZDogYm9vbGVhbn0sIGJ0bkVkaXQ6IHtzaG93OiBib29sZWFuLCBkaXNhYmxlZDogYm9vbGVhbn0sIGJ0bkRlbGV0ZToge3Nob3c6IGJvb2xlYW4sIGRpc2FibGVkOiBib29sZWFufSwgYnRuUHJpbnQ6IHtzaG93OiBib29sZWFuLCBkaXNhYmxlZDogYm9vbGVhbn19fVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwcmVwYXJlUGFyYW1zRm9yVG9vbGJhcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYXJlUGFyYW1zRm9yVG9vbGJhcigpIHtcbiAgICAgICAgICAgIHZhciBkb2NSaWdodHMgPSBEb2NSaWdodHNbdGhpcy5kb2NUeXBlSWRdID8gRG9jUmlnaHRzW3RoaXMuZG9jVHlwZUlkXSA6IHt9O1xuICAgICAgICAgICAgdmFyIHVzZXJSb2xlcyA9IERvY0NvbnRleHQudXNlckRhdGEgPyBEb2NDb250ZXh0LnVzZXJEYXRhLnJvbGVzIDogW107XG5cbiAgICAgICAgICAgIHZhciB0b29sYmFyUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgYWRkOiB0aGlzLnByb3BzLnRvb2xiYXJQcm9wcyA/ICEhdGhpcy5wcm9wcy50b29sYmFyUHJvcHMuYWRkIDogY2hlY2tSaWdodHModXNlclJvbGVzLCBkb2NSaWdodHMsICdhZGQnKSxcbiAgICAgICAgICAgICAgICBlZGl0OiB0aGlzLnByb3BzLnRvb2xiYXJQcm9wcyA/ICEhdGhpcy5wcm9wcy50b29sYmFyUHJvcHMuZWRpdCA6IGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAnZWRpdCcpLFxuICAgICAgICAgICAgICAgIGRlbGV0ZTogdGhpcy5wcm9wcy50b29sYmFyUHJvcHMgPyAhIXRoaXMucHJvcHMudG9vbGJhclByb3BzLmRlbGV0ZSA6IGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAnZGVsZXRlJyksXG4gICAgICAgICAgICAgICAgcHJpbnQ6IHRoaXMucHJvcHMudG9vbGJhclByb3BzID8gISF0aGlzLnByb3BzLnRvb2xiYXJQcm9wcy5wcmludCA6IGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAncHJpbnQnKSxcbiAgICAgICAgICAgICAgICBwZGY6IHRoaXMucHJvcHMudG9vbGJhclByb3BzID8gISF0aGlzLnByb3BzLnRvb2xiYXJQcm9wcy5wZGYgOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnByb3BzLnRvb2xiYXJQcm9wcyA/ICEhdGhpcy5wcm9wcy50b29sYmFyUHJvcHMuZW1haWwgOiB0cnVlLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnByb3BzLnRvb2xiYXJQcm9wcyA/ICEhdGhpcy5wcm9wcy50b29sYmFyUHJvcHMuc3RhcnQgOiB0cnVlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgYnRuQWRkOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQcm9wc1snYWRkJ10sXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuRWRpdDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUHJvcHNbJ2VkaXQnXSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLnZhbHVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5EZWxldGU6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdG9vbGJhclByb3BzWydkZWxldGUnXSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLnZhbHVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5QcmludDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0b29sYmFyUHJvcHNbJ3ByaW50J10sXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuUGRmOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQcm9wc1sncGRmJ10sXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuRW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdG9vbGJhclByb3BzWydlbWFpbCddLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0blN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRvb2xiYXJQcm9wc1snc3RhcnQnXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuTG9naW46IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5BY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuU2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMuZ3JpZENvbmZpZyAmJiB0aGlzLmdyaWRDb25maWcubGVuZ3RoID8gISF0aGlzLmdyaWRDb25maWcuZmluZChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm93LmlkID09PSAnc2VsZWN0JztcbiAgICAgICAgICAgICAgICAgICAgfSkgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcy5wcm9wcy50b29sYmFyUGFyYW1zID8gdGhpcy5wcm9wcy50b29sYmFyUGFyYW1zIDoge30pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0JLRi9C/0L7Qu9C90LjRgiDQt9Cw0L/RgNC+0YHRi1xyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmZXRjaERhdGEnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hEYXRhKG1ldGhvZCwgYWRkaXRpb25hbERhdGEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgVVJMID0gJy9uZXdBcGknO1xuICAgICAgICAgICAgdmFyIHNxbFdoZXJlID0gdGhpcy5zdGF0ZS5zcWxXaGVyZTtcbiAgICAgICAgICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgVVJMID0gJy9uZXdBcGkvZGVsZXRlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncHJpbnQnOlxuICAgICAgICAgICAgICAgICAgICBVUkwgPSAnL3ByaW50LycgKyB0aGlzLmRvY1R5cGVJZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0RG9jcyc6XG4gICAgICAgICAgICAgICAgICAgIFVSTCA9ICcvbmV3QXBpJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgVVJMID0gJy8nICsgbWV0aG9kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g0YHRgtCw0LLQuNC8INGB0YLQsNGC0YPRgVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHdhcm5pbmc6ICdUw7bDtnRhbi4uLicsIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnIH0pO1xuXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlcjogdGhpcy5kb2NUeXBlSWQsIC8vINC/0LDRgNCw0LzQtdGC0YDRi1xuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogdGhpcy5kb2NUeXBlSWQsIC8vINC00LvRjyDRgdC+0LPQu9Cw0YHQvtCy0LDQvdC40Y8g0YEg0LTQvtC60YPQvNC10L3RgtC+0LxcbiAgICAgICAgICAgICAgICBzb3J0Qnk6IHRoaXMuc3RhdGUuc29ydEJ5LCAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsFxuICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnN0YXRlLmxpbWl0LCAvLyByb3cgbGltaXQgaW4gcXVlcnlcbiAgICAgICAgICAgICAgICBkb2NJZDogdGhpcy5zdGF0ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICBzcWxXaGVyZTogc3FsV2hlcmUsIC8vINC00LjQvdCw0LzQuNGH0LXRgdC60LjQuSDRhNC40LvRjNGC0YAg0LPRgNC40LTQsFxuICAgICAgICAgICAgICAgIGZpbHRlckRhdGE6IHRoaXMuZmlsdGVyRGF0YSxcbiAgICAgICAgICAgICAgICBsYXN0RG9jSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgbW9kdWxlOiB0aGlzLnByb3BzLm1vZHVsZSxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IERvY0NvbnRleHQudXNlckRhdGEudXNlcklkLFxuICAgICAgICAgICAgICAgIHV1aWQ6IERvY0NvbnRleHQudXNlckRhdGEudXVpZCxcbiAgICAgICAgICAgICAgICBkYXRhOiBhZGRpdGlvbmFsRGF0YVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlZCwgcmVqZWN0ZWQpIHtcblxuICAgICAgICAgICAgICAgIF9mZXRjaERhdGFbJ2ZldGNoRGF0YVBvc3QnXShVUkwsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAmJiByZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24gPSAnL2xvZ2luJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHsgd2FybmluZzogJycgKyByZXNwb25zZS5lcnJvcl9tZXNzYWdlLCB3YXJuaW5nVHlwZTogJ2Vycm9yJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZTogJ2Vycm9yICcgKyAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmVycm9yX21lc3NhZ2UgPyAncmVzcG9uc2UuZGF0YS5lcnJvcl9tZXNzYWdlJyA6IHJlc3BvbnNlLmVycm9yX21lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ3NlbGVjdERvY3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguZ3JpZERhdGEgPSByZXNwb25zZS5kYXRhLnJlc3VsdC5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0LfQsNC00LDQvSDRgtGA0LjQs9Cz0LXRgCwg0LLRi9C30L7QstC10Lwg0LXQs9C+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5wcm9wcy50cmlnZ2VyX3NlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMudHJpZ2dlcl9zZWxlY3QoX3RoaXM4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoeyB3YXJuaW5nOiAnRWR1a2FsdCcsIHdhcm5pbmdUeXBlOiAnb2snIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PSAnZGVsZXRlJyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEucmVzdWx0ICYmIHJlc3BvbnNlLmRhdGEucmVzdWx0LmVycm9yX2NvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNC60LAg0L/QtdGA0LXQtCDRg9C00LDQu9C10L3QuNC10LxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICdUZWtraXMgdmlnYToga3VzdHV0YW1pbmUgZWJhXFx4RjVubmVzdHVzJztcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHh0UmVwb3J0OiByZXNwb25zZS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVwb3J0OiAhIShyZXNwb25zZS5kYXRhLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5kYXRhLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlZChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZmV0Y2ggZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZyBoYXBwZW5lZCBpbiBzZXR0aW5nIHVwIHRoZSByZXF1ZXN0IHRoYXQgdHJpZ2dlcmVkIGFuIEVycm9yXG4gICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnVGVra2lzIHZpZ2EgJyArIGVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RlZChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQutC90L7Qv9C60Lgg0L7RgtC/0YDQsNCy0LrQuCDQv9C+0YfRgtGLXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkVtYWlsQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuRW1haWxDbGljaygpIHtcbiAgICAgICAgICAgIC8vINGB0L7RhdGA0LDQvdC40Lwg0L/QsNGA0LDQvNC10YLRgNGLINC00LvRjyDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8g0LLQu9C+0LbQtdC90LjRjyDQsiDQutC+0L3RgtC10LrRgdGC0LVcbiAgICAgICAgICAgIERvY0NvbnRleHRbJ2VtYWlsLXBhcmFtcyddID0ge1xuICAgICAgICAgICAgICAgIGRvY0lkOiB0aGlzLnN0YXRlLmRvY0lkLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogdGhpcy5kb2NUeXBlSWQsXG4gICAgICAgICAgICAgICAgcXVlcnlUeXBlOiAnc3FsV2hlcmUnLCAvLyDQuNC0IC0g0LTQvtC60YPQvNC10L3RglxuICAgICAgICAgICAgICAgIHNxbFdoZXJlOiB0aGlzLnN0YXRlLnNxbFdoZXJlLFxuICAgICAgICAgICAgICAgIGZpbHRlckRhdGE6IHRoaXMuZmlsdGVyRGF0YVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nICsgdGhpcy5wcm9wcy5tb2R1bGUgKyAnL2UtbWFpbC8wJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDRg9Cx0LXRgNC10YIg0L7QutC90L4g0YEg0L7RgtGH0LXRgtC+0LxcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxSZXBvcnRlUGFnZUJ0bkNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUmVwb3J0ZVBhZ2VCdG5DbGljayhldmVudCkge1xuICAgICAgICAgICAgdmFyIGlzUmVwb3J0ID0gZXZlbnQgJiYgZXZlbnQgPT0gJ09rJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1JlcG9ydDogaXNSZXBvcnQgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19iaW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9iaW5kKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtZXRob2RzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5W21ldGhvZF0gPSBfdGhpczlbbWV0aG9kXS5iaW5kKF90aGlzOSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEb2N1bWVudHM7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbkRvY3VtZW50cy5wcm9wVHlwZXMgPSB7XG4gICAgaW5pdERhdGE6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIHJlc3VsdDogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgICAgZ3JpZENvbmZpZzogUHJvcFR5cGVzLmFycmF5XG4gICAgfSksXG4gICAgZG9jVHlwZUlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cbkRvY3VtZW50cy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgbW9kdWxlOiAnbGFwc2VkJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb2N1bWVudHM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2RvY3VtZW50cy9kb2N1bWVudHMuanN4XG4vLyBtb2R1bGUgaWQgPSAyMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnOy8qKlxyXG4gKiDRgdC+0LfQtNCw0YHRgiDRgdGC0YDQvtC60YMgLSDRhNC40LvRjNGC0YAg0LjQtyDQv9Cw0YDQsNC80LXRgtGA0L7QslxyXG4gKiBAcGFyYW0gZmlsdGVyRGF0YVxyXG4gKiBAcGFyYW0gZG9jVHlwZUlkXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAqL3ZhciBwcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyPWZ1bmN0aW9uIHByZXBhcmVTcWxXaGVyZUZyb21GaWx0ZXIoZmlsdGVyRGF0YSxkb2NUeXBlSWQpe3ZhciBmaWx0ZXJTdHJpbmc9Jyc7Ly8g0YHRgtGA0L7QutCwINGE0LjQu9GM0YLRgNCwXG52YXIga2FzX3Npc2FsZGFiPScnO2ZpbHRlckRhdGEuZm9yRWFjaChmdW5jdGlvbihyb3cpe2lmKHJvdy52YWx1ZSl7ZmlsdGVyU3RyaW5nPWZpbHRlclN0cmluZysoZmlsdGVyU3RyaW5nLmxlbmd0aD4wP1wiIGFuZCBcIjpcIiB3aGVyZSBcIik7a2FzX3Npc2FsZGFiPXJvdy5zcWxObyYmTnVtYmVyKHJvdy5zcWxObyk9PTA/J05PVCc6Jyc7c3dpdGNoKHJvdy50eXBlKXtjYXNlJ3RleHQnOnZhciBwcmVwYWlyZWRQYXJhbWV0ZXI9cm93LnZhbHVlLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHN0cil7cmV0dXJuJ1xcJycrc3RyLnRyaW0oKSsnXFwnJzt9KS5qb2luKCcsJyk7Ly8g0LXRgdC70Lgg0L/QsNGA0LDQvNC10YLRgNGLINGA0LDQt9C00LXQtNC10L3Riywg0YLQviDQvNC90L7QttC10YHRgtCy0LXQvdC90YvQuSDQv9Cw0YDQsNC80LXRgtGAXG5pZihyb3cudmFsdWUubWF0Y2goLywvKSl7ZmlsdGVyU3RyaW5nPWZpbHRlclN0cmluZysnICcrcm93LmlkKycgJytrYXNfc2lzYWxkYWIrJyAgaW4gKCcrcHJlcGFpcmVkUGFyYW1ldGVyKycpJzt9ZWxzZXtpZihkb2NUeXBlSWQ9PSdLVVVfVEFBQkVMJyl7ZmlsdGVyU3RyaW5nPWZpbHRlclN0cmluZysnICB1cHBlcignK3Jvdy5pZCsnKSAnK2thc19zaXNhbGRhYisnIGxpa2UgdXBwZXIoXFwnJScrcm93LnZhbHVlLnRyaW0oKSsnJVxcJyknO31lbHNley8vINC+0LHRgNCw0LHQvtGC0LrQsCDQvdC10LrQvtGA0YDQtdC60YLQvdC+0Lkg0LrQvtC00LjRgNC+0LLQutC4XG5maWx0ZXJTdHJpbmc9ZmlsdGVyU3RyaW5nKycgIHVwcGVyKCcrcm93LmlkKycpICcra2FzX3Npc2FsZGFiKycgbGlrZSB1cHBlcihcXCclJytyb3cudmFsdWUudHJpbSgpKyclXFwnKSc7fX1icmVhaztjYXNlJ3N0cmluZyc6ZmlsdGVyU3RyaW5nPWZpbHRlclN0cmluZysnICB1cHBlcignK3Jvdy5pZCsnKSAnK2thc19zaXNhbGRhYisnIGxpa2UgdXBwZXIoXFwnJScrcm93LnZhbHVlLnRyaW0oKSsnJVxcJyknO2JyZWFrO2Nhc2UnZGF0ZSc6aWYoJ3N0YXJ0J2luIHJvdyYmcm93LnN0YXJ0KXtmaWx0ZXJTdHJpbmc9ZmlsdGVyU3RyaW5nKycgZm9ybWF0X2RhdGUoJytyb3cuaWQrJzo6dGV4dCkgID49ICBmb3JtYXRfZGF0ZShcXCcnK3Jvdy5zdGFydCsnXFwnOjp0ZXh0KSBhbmQgKGZvcm1hdF9kYXRlKCcrcm93LmlkKyc6OnRleHQpICA8PSAgZm9ybWF0X2RhdGUoXFwnJytyb3cuZW5kKydcXCc6OnRleHQpIG9yICcrcm93LmVuZCsnIGlzIG51bGwpJzt9ZWxzZSBpZihyb3cuaWQ9PSd2YWxpZCcpey8vINC00LvRjyDRjdGC0L7Qs9C+INC/0L7Qu9GPINGB0YLQsNCy0LjQvCDRhNC40LvRjNGC0YAg0L3QsCDQutC+0L3RgtC10LrRgiDQtNC10LnRgdGC0LLRg9C10YIg0LTQvlxuZmlsdGVyU3RyaW5nPWZpbHRlclN0cmluZysnIChmb3JtYXRfZGF0ZSgnK3Jvdy5pZCsnOjp0ZXh0KSAgPj0gIGZvcm1hdF9kYXRlKFxcJycrcm93LnZhbHVlKydcXCc6OnRleHQpIG9yICcrcm93LmlkKycgaXMgbnVsbCknO31lbHNle2ZpbHRlclN0cmluZz1maWx0ZXJTdHJpbmcrcm93LmlkKyhrYXNfc2lzYWxkYWImJmthc19zaXNhbGRhYj09J05PVCc/XCI8PlwiOlwiPVwiKStcIidcIityb3cudmFsdWUrXCInXCI7fWJyZWFrO2Nhc2UnbnVtYmVyJzppZignc3RhcnQnaW4gcm93JiZyb3cuc3RhcnQpe2ZpbHRlclN0cmluZz1maWx0ZXJTdHJpbmcrJyAnK3Jvdy5pZCsnOjpudW1lcmljICA+PSAgJytyb3cuc3RhcnQrJyBhbmQgKCcrcm93LmlkKyc6Om51bWVyaWMgIDw9ICAnK3Jvdy5lbmQrJyBvciAnK3Jvdy5lbmQrJyBpcyBudWxsKSc7fWVsc2V7ZmlsdGVyU3RyaW5nPWZpbHRlclN0cmluZytyb3cuaWQrXCI6Om51bWVyaWMgIFwiKyhrYXNfc2lzYWxkYWImJmthc19zaXNhbGRhYj09J05PVCc/XCI8PlwiOlwiPVwiKStyb3cudmFsdWU7fWJyZWFrO2Nhc2UnaW50ZWdlcic6aWYoJ3N0YXJ0J2luIHJvdyYmcm93LnN0YXJ0KXtmaWx0ZXJTdHJpbmc9ZmlsdGVyU3RyaW5nKycgJytyb3cuaWQrJyAgPj0gICcrcm93LnN0YXJ0KycgYW5kICgnK3Jvdy5pZCsnICA8PSAgJytyb3cuZW5kKycgb3IgJytyb3cuZW5kKycgaXMgbnVsbCknO31lbHNle2ZpbHRlclN0cmluZz1maWx0ZXJTdHJpbmcrcm93LmlkK1wiOjppbnRlZ2VyICBcIisoa2FzX3Npc2FsZGFiJiZrYXNfc2lzYWxkYWI9PSdOT1QnP1wiPD5cIjpcIj1cIikrcm93LnZhbHVlO31icmVhazt9fX0pO3JldHVybiBmaWx0ZXJTdHJpbmc7fTttb2R1bGUuZXhwb3J0cz1wcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbGlicy9wcmVwYXJlU3FsV2hlcmVGcm9tRmlsdGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBEb2NDb250ZXh0PXJlcXVpcmUoJy4vLi4vZnJvbnRlbmQvZG9jLWNvbnRleHQnKTt2YXIgZ2V0RGVmYXVsRGF0ZT1yZXF1aXJlKCcuL2dldERlZmF1bHREYXRlJyk7LyoqXHJcbiAqINCy0LXRgNC90LXRgiDQtNC10YTQvtC70YLQvdGL0LUg0LfQvdCw0YfQtdC90LjRjyDQstC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRgtC40L/QsFxyXG4gKiBAcGFyYW0gcm93XHJcbiAqL3ZhciBnZXREZWZhdWx0VmFsdWVzPWZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZXMocm93KXt2YXIgcmV0dXJuVmFsdWU9e3N0YXJ0Om51bGwsZW5kOm51bGwsdmFsdWU6bnVsbH07aWYoISFyb3cuaW50ZXJ2YWwmJiFyb3cuc3RhcnQmJiFyb3cuZW5kKXtzd2l0Y2gocm93LnR5cGUpe2Nhc2UnZGF0ZSc6cmV0dXJuVmFsdWUuc3RhcnQ9Z2V0RGVmYXVsRGF0ZSgpLnN0YXJ0O3JldHVyblZhbHVlLmVuZD1nZXREZWZhdWxEYXRlKCkuZW5kO2JyZWFrO2RlZmF1bHQ6cmV0dXJuVmFsdWUuc3RhcnQ9bnVsbDtyZXR1cm5WYWx1ZS5lbmQ7fX1yZXR1cm4gcmV0dXJuVmFsdWU7fTtmdW5jdGlvbiBwcmVwYXJlRmlsdGVyRGF0YShncmlkQ29uZmlnLGRvY1R5cGVJZCl7dmFyIGRhdGE9W107aWYoIURvY0NvbnRleHQuZmlsdGVyKXtEb2NDb250ZXh0LmZpbHRlcj17fTt9aWYoIURvY0NvbnRleHQuZmlsdGVyW2RvY1R5cGVJZF0pe0RvY0NvbnRleHQuZmlsdGVyW2RvY1R5cGVJZF09W107fS8vINC/0YDQvtCy0LXRgNC40LwsINC10YHQu9C4INGE0LjQu9GM0YLRgCDRg9C20LUg0YHQvtGF0YDQsNC90LXQvSwg0YLQviDQstC10YDQvdC10Lwg0YPQttC1INGA0LDQvdC10LUg0YHQvtGF0LbQsNC90L3Ri9C5INC80LDRgdGB0LjQslxuaWYoZG9jVHlwZUlkJiZEb2NDb250ZXh0LmZpbHRlcltkb2NUeXBlSWRdLmxlbmd0aD4wKXtkYXRhPURvY0NvbnRleHQuZmlsdGVyW2RvY1R5cGVJZF07fWVsc2V7Z3JpZENvbmZpZy5tYXAoZnVuY3Rpb24ocm93KXt2YXIgZmllbGQ9e2lkOnJvdy5pZCx2YWx1ZTpyb3cudmFsdWU/cm93LnZhbHVlOm51bGwsbmFtZTpyb3cuaWQsc3FsTm86MSx0eXBlOnJvdy50eXBlP3Jvdy50eXBlOid0ZXh0JyxpbnRlcnZhbDohIXJvdy5pbnRlcnZhbCxzdGFydDpyb3cudmFsdWU/cm93LnZhbHVlOm51bGwsZW5kOnJvdy52YWx1ZT9yb3cudmFsdWU6bnVsbH07aWYocm93LmludGVydmFsKXtmaWVsZFtyb3cuaWQrJ19zdGFydCddPXJvdy52YWx1ZT9yb3cudmFsdWU6bnVsbDtmaWVsZFtyb3cuaWQrJ19lbmQnXT1yb3cudmFsdWU/cm93LnZhbHVlOm51bGw7fWRhdGEucHVzaChmaWVsZCk7fSk7fXJldHVybiBkYXRhO31tb2R1bGUuZXhwb3J0cz1wcmVwYXJlRmlsdGVyRGF0YTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2xpYnMvcHJlcGFpcmVGaWx0ZXJEYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAyMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnOy8qKlxyXG4gKiDQtNC+0LHQsNCy0LjRgiDQvdC+0LvRjCDQsiDQvNC10YHRj9GGINC40LvQuCDQtNC10L3RjCDQv9C+INC90LXQvtCx0YXQvtC00LjQvNC+0YHRgtC4XHJcbiAqIEBwYXJhbSB2YWx1ZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi92YXIgZ2V0VHdvRGlnaXRzPWZ1bmN0aW9uIGdldFR3b0RpZ2l0cyh2YWx1ZSl7cmV0dXJuIHZhbHVlPDEwPycwJyt2YWx1ZTp2YWx1ZTt9Oy8qKlxyXG4gKiDQstC10YDQvdC10YIg0LTQtdGE0L7Qu9GC0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8g0LLQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YLQuNC/0LBcclxuICogQHBhcmFtIHJvd1xyXG4gKi92YXIgZ2V0RGVmYXVsdERhdGU9ZnVuY3Rpb24gZ2V0RGVmYXVsdERhdGUocGVyaW9kKXt2YXIgcmV0dXJuVmFsdWU9e3N0YXJ0Om51bGwsZW5kOm51bGwsdmFsdWU6bnVsbH07RGF0ZS5wcm90b3R5cGUuZGF5c0luTW9udGg9ZnVuY3Rpb24oKXtyZXR1cm4gMzMtbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwzMykuZ2V0RGF0ZSgpO307dmFyIHRvZGF5PW5ldyBEYXRlKCk7dmFyIGN1cnJlbnRNb250aD1nZXRUd29EaWdpdHModG9kYXkuZ2V0TW9udGgoKSsxKTt2YXIgY3VycmVudFllYXI9Z2V0VHdvRGlnaXRzKHRvZGF5LmdldEZ1bGxZZWFyKCkpO3ZhciBzdGFydE1vbnRoPWN1cnJlbnRZZWFyKyctJytjdXJyZW50TW9udGgrJy0wMSc7dmFyIGRheXNJbk1vbnRoPWdldFR3b0RpZ2l0cyh0b2RheS5kYXlzSW5Nb250aCgpKTt2YXIgZmluaXNoTW9udGg9Y3VycmVudFllYXIrJy0nK2N1cnJlbnRNb250aCsnLScrZGF5c0luTW9udGg7c3dpdGNoKHBlcmlvZCl7Y2FzZSdLVVUnOnJldHVyblZhbHVlLnN0YXJ0PXN0YXJ0TW9udGg7cmV0dXJuVmFsdWUuZW5kPWZpbmlzaE1vbnRoO2JyZWFrO2Nhc2UnQUFTVEEnOnJldHVyblZhbHVlLnN0YXJ0PWN1cnJlbnRZZWFyKyctMDEtMDEnO3JldHVyblZhbHVlLmVuZD1jdXJyZW50WWVhcisnLTEyLTMxJztkZWZhdWx0OnJldHVyblZhbHVlLnN0YXJ0PW51bGw7cmV0dXJuVmFsdWUuZW5kPW51bGw7fXJldHVybiByZXR1cm5WYWx1ZTt9O21vZHVsZS5leHBvcnRzPWdldERlZmF1bHREYXRlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbGlicy9nZXREZWZhdWx0RGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgSUNPTiA9ICdmaWx0ZXInO1xuXG52YXIgQnV0dG9uUmVnaXN0ZXJGaWx0ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uUmVnaXN0ZXJGaWx0ZXIsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b25SZWdpc3RlckZpbHRlcihwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uUmVnaXN0ZXJGaWx0ZXIpO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uUmVnaXN0ZXJGaWx0ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25SZWdpc3RlckZpbHRlcikpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uUmVnaXN0ZXJGaWx0ZXIsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2soKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5GaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0ZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMuc2hvdyxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5oYW5kbGVDbGljayhlKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgcmVmOiAnaW1hZ2UnLCBzcmM6IHN0eWxlcy5pY29uc1tJQ09OXSB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCdXR0b25SZWdpc3RlckZpbHRlcjtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbi8qXHJcbkJ1dHRvblJlZ2lzdGVyRmlsdGVyLnByb3BUeXBlcyA9IHtcclxuICAgIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcclxufVxyXG4qL1xuXG5CdXR0b25SZWdpc3RlckZpbHRlci5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWVcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblJlZ2lzdGVyRmlsdGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWZpbHRlci9idXR0b24tcmVnaXN0ZXItZmlsdGVyLmpzeFxuLy8gbW9kdWxlIGlkID0gMjM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgSUNPTiA9ICdzZWxlY3QnO1xuXG52YXIgQnV0dG9uU2VsZWN0ID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvblNlbGVjdCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgLy8g0LrQvdC+0L/QutCwINGB0L7Qt9C00LDQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwINCyINGA0LXQs9C40YHRgtGA0LDRhVxuICAgIGZ1bmN0aW9uIEJ1dHRvblNlbGVjdChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uU2VsZWN0KTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblNlbGVjdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvblNlbGVjdCkpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uU2VsZWN0LCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCdzZWxlY3QnKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnByb3BzLnZhbHVlID8gdGhpcy5wcm9wcy52YWx1ZSA6ICdWYWxpZGEnO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuU2VsZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uU2VsZWN0O1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuLypcclxuQnV0dG9uUmVnaXN0ZXJQcmludC5wcm9wVHlwZXMgPSB7XHJcbiAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXHJcbn1cclxuKi9cblxuQnV0dG9uU2VsZWN0LmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc2hvdzogdHJ1ZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25TZWxlY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tc2VsZWN0L2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgSUNPTiA9ICdyZWZyZXNoJztcblxudmFyIEJ1dHRvblJlZnJlc2ggPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uUmVmcmVzaCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgLy8g0LrQvdC+0L/QutCwINGB0L7Qt9C00LDQvdC40Y8g0LTQvtC60YPQvNC10L3RgtCwINCyINGA0LXQs9C40YHRgtGA0LDRhVxuICAgIGZ1bmN0aW9uIEJ1dHRvblJlZnJlc2gocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblJlZnJlc2gpO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uUmVmcmVzaC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvblJlZnJlc2gpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblJlZnJlc2gsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2soKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5SZWZyZXNoJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdVdWVuZGEnLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQnV0dG9uUmVmcmVzaDtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbkJ1dHRvblJlZnJlc2guZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlXG59O1xubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25SZWZyZXNoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZnJlc2gvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgRG9jQ29udGV4dCA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vZG9jLWNvbnRleHQuanMnKTtcbnZhciBwcmVwYXJlRGF0YSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vLi4vbGlicy9wcmVwYWlyZUZpbHRlckRhdGEnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuL2dyaWQtZmlsdGVyLXN0eWxlcycpO1xuXG52YXIgR3JpZEZpbHRlciA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhHcmlkRmlsdGVyLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBHcmlkRmlsdGVyKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHcmlkRmlsdGVyKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoR3JpZEZpbHRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEdyaWRGaWx0ZXIpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBncmlkQ29uZmlnOiBwcm9wcy5ncmlkQ29uZmlnLCAvLyBncmlkIGNvbmZpZ1xuICAgICAgICAgICAgZGF0YTogcHJvcHMuZGF0YVxuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZSA9IF90aGlzLmhhbmRsZUNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucHJlcGFyZUZpbHRlckZpZWxkcyA9IF90aGlzLnByZXBhcmVGaWx0ZXJGaWVsZHMuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnJldHVybkludGVydmFsID0gX3RoaXMucmV0dXJuSW50ZXJ2YWwuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnJldHVyblRleHRDb21wb25lbnQgPSBfdGhpcy5yZXR1cm5UZXh0Q29tcG9uZW50LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVTZWxlY3RDaGFuZ2UgPSBfdGhpcy5oYW5kbGVTZWxlY3RDaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INC90LAg0LjQt9C80LXQvdC10L3QuNGPINC40L3Qv9GD0YLQvtCyXHJcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKEdyaWRGaWx0ZXIsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkge1xuICAgICAgICAgICAgdGhpcy5zYXZlRmlsdGVyQ29udGVudChlLnRhcmdldC5uYW1lLCBlLnRhcmdldC52YWx1ZSwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDQvdCwINC40LfQvNC10L3QtdC90LjRjyDQstGL0LHQvtGA0LAg0YHQtdC70LXQutGC0LBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlU2VsZWN0Q2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdENoYW5nZShlKSB7XG4gICAgICAgICAgICB0aGlzLnNhdmVGaWx0ZXJDb250ZW50KGUudGFyZ2V0Lm5hbWUsIG51bGwsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINGB0L7RhdGA0LDQvdC40YIg0LfQvdCw0YfQtdC90LjQtSDRhNC40LvRjNGC0YDQsFxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lXHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgICAgICogQHBhcmFtIHNxbE5vIC0g0LjRgdC60LvRjtGH0LXQvdC40LUg0L3QsCDRhNC40LvRjNGC0YBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2F2ZUZpbHRlckNvbnRlbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUZpbHRlckNvbnRlbnQobmFtZSwgdmFsdWUsIHNxbE5vKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMucHJvcHMuZGF0YTtcblxuICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0LjQvCDQvdCwINC90LDQu9C40YfQuNC1INC/0L7Qu9C10Lkg0LTQu9GPINGE0LjQu9GM0YLRgNCw0YbQuNC4XG4gICAgICAgICAgICBpZiAoIWRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHByZXBhcmVEYXRhKHRoaXMucHJvcHMuZ3JpZENvbmZpZywgdGhpcy5wcm9wcy5kb2NUeXBlSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5wcm9wcy5kYXRhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIga2FzX3Npc2FsZGFiID0gMTtcbiAgICAgICAgICAgIC8vINC40YnQtdC8INC30L3QsNGH0LXQvdC40LUgc3FsTm9cbiAgICAgICAgICAgIGlmIChEb2NDb250ZXh0LmZpbHRlclt0aGlzLnByb3BzLmRvY1R5cGVJZF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gRG9jQ29udGV4dC5maWx0ZXJbdGhpcy5wcm9wcy5kb2NUeXBlSWRdLmZpbmRJbmRleChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cuaWQgPT09IG5hbWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGthc19zaXNhbGRhYiA9IERvY0NvbnRleHQuZmlsdGVyW3RoaXMucHJvcHMuZG9jVHlwZUlkXVtpZHhdLnNxbE5vO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g0YHQvtGF0YDQsNC90LjQvCDQt9C90LDRh9C10L3QuNC1INGE0LjQu9GM0YLRgNCwXG5cbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLm1hcChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pZCA9PT0gbmFtZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHJvdy52YWx1ZSA9ICFzcWxObyA/IHZhbHVlIDogcm93LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByb3cuc3FsTm8gPSB2YWx1ZSA/IGthc19zaXNhbGRhYiA6IHNxbE5vO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBpbmRleCA9IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBpc0ludGVydmFsU3RhcnQgPSAhIW5hbWUubWF0Y2goL19zdGFydC8pLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJ2YWxFbmQgPSAhIW5hbWUubWF0Y2goL19lbmQvKTtcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBuYW1lO1xuXG4gICAgICAgICAgICAvLyDQvdCw0LTQviDQvdCw0LnRgtC4INGN0LvQtdC80LXQvdGCINC80LDRgdGB0LjQstCwINGBINC00LDQvdC90YvQvNC4INC00LvRjyDRjdGC0L7Qs9C+INC60L7QvNC/0L7QvdC10L3RgtCwXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIGlzSW50ZXJ2YWxTdGFydCA9ICEhbmFtZS5tYXRjaCgvX3N0YXJ0Lyk7XG4gICAgICAgICAgICAgICAgaXNJbnRlcnZhbEVuZCA9ICEhbmFtZS5tYXRjaCgvX2VuZC8pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzSW50ZXJ2YWxTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aWxsIHJlcGxhY2Ugc3RhcnQgZnJvbSBmaXJsZE5hbWVcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lID0gbmFtZS5yZXBsYWNlKC9fc3RhcnQvaSwgJycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc0ludGVydmFsRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdpbGwgcmVwbGFjZSBlbmQgZnJvbSBmaXJsZE5hbWVcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lID0gbmFtZS5yZXBsYWNlKC9fZW5kL2ksICcnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5pZCA9PT0gZmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0ludGVydmFsU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpbmRleF0uc3RhcnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpbmRleF1bZmllbGROYW1lICsgJ19zdGFydCddID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaW5kZXhdLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0ludGVydmFsRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaW5kZXhdLmVuZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBkYXRhW2luZGV4XVtmaWVsZE5hbWUgKyAnX2VuZCddID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbaW5kZXhdLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGFbaW5kZXhdLnNxbE5vID0gc3FsTm8gPyBzcWxObyA6IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vINGB0L7RhdGA0LDQvdC40Lwg0YTQuNC70YzRgtGAXG4gICAgICAgICAgICBEb2NDb250ZXh0LmZpbHRlclt0aGlzLnByb3BzLmRvY1R5cGVJZF0gPSBkYXRhO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5oYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVyKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gcHJlcGFyZURhdGEodGhpcy5wcm9wcy5ncmlkQ29uZmlnLCB0aGlzLnByb3BzLmRvY1R5cGVJZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5oYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oYW5kbGVyKGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDQtdGB0LvQuCDRg9C60LDQt9Cw0L0g0Y3Qu9C10LzQtdC90YIgLCDRgtC+INGD0YHRgtCw0L3QvtCy0LjQvCDQvdCwINC90LXQs9C+INGE0L7QutGD0YFcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmZvY3VzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBmb2N1c0VsZW1lbnQgPSB0aGlzLnJlZnNbdGhpcy5wcm9wcy5mb2N1c0VsZW1lbnRdO1xuICAgICAgICAgICAgICAgIGlmIChmb2N1c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgLy8g0YHQvtC30LTQsNGB0YIg0LjQtyDQv9C+0LvQtdC5INCz0YDQuNC00LAg0LrQvtC80L/QvtC90LXQvdGC0Ysg0LTQu9GPINGE0L7RgNC80LjRgNC+0LLQsNC90LjRjyDRg9GB0LvQvtCy0LjQuSDRhNC40LvRjNGC0YDQsNGG0LjQuFxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmZpZWxkc2V0IH0sXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlRmlsdGVyRmllbGRzKClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ByZXBhcmVGaWx0ZXJGaWVsZHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcGFyZUZpbHRlckZpZWxkcygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyDRgtC+0LvRjNC60L4g0L/QvtC70Y8sINC60L7RgtC+0YDRi9C1INC+0YLQvNC10YfQsNC90Ysg0LrQsNC6IHNob3c6dHJ1ZSDQuNC70Lgg0Y/QstC90L4g0LrQsCDRg9C60LDQt9Cw0L3RiyDQuCDRgtC1LCDRgyDQutC+0YLQvtGL0YUg0L3QtdGC0YMgaGlkZUZpbHRlclxuICAgICAgICAgICAgdmFyIGZpbHRlckZpZWxkcyA9IHRoaXMucHJvcHMuZ3JpZENvbmZpZy5maWx0ZXIoZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmlkICE9PSAnaWQnICYmICFmaWVsZC5oaWRlRmlsdGVyICYmICghZmllbGQuZmlsdGVyIHx8IGZpZWxkLmZpbHRlciA9PSAnc2hvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlckZpZWxkcy5tYXAoZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmZvcm1XaWRnZXQsIGtleTogJ2ZpZWxkU2V0LScgKyByb3cuaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmZvcm1XaWRnZXRMYWJlbCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZm9ybVdpZGdldElucHV0IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuaW50ZXJ2YWwgPyBfdGhpczIucmV0dXJuSW50ZXJ2YWwocm93KSA6IF90aGlzMi5yZXR1cm5UZXh0Q29tcG9uZW50KHJvdylcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmV0dXJuVGV4dENvbXBvbmVudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXR1cm5UZXh0Q29tcG9uZW50KHJvdykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnByb3BzLmRhdGE7XG5cbiAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNC40Lwg0L3QsCDQvdCw0LvQuNGH0LjQtSDQv9C+0LvQtdC5INC00LvRjyDRhNC40LvRjNGC0YDQsNGG0LjQuFxuICAgICAgICAgICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBwcmVwYXJlRGF0YSh0aGlzLnByb3BzLmdyaWRDb25maWcsIHRoaXMucHJvcHMuZG9jVHlwZUlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudFR5cGUgPSByb3cudHlwZSA/IHJvdy50eXBlIDogJ3RleHQnO1xuXG4gICAgICAgICAgICAvLyDQuNGI0LXQvCDQtNC10YTQvtC70YLQvdC+0LUg0LfQvdCw0YfQtdC90LjQtVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gcm93LnZhbHVlID8gcm93LnZhbHVlIDogJyc7XG4gICAgICAgICAgICB2YXIga2FzX3Npc2FsZGFiID0gMTtcblxuICAgICAgICAgICAgLy8g0LjRidC10Lwg0LjQvdC40YbQuNCw0LvQuNC30LjRgNC+0LLQsNC90L3QvtC1INC30L3QsNGH0LXQvdC40LVcbiAgICAgICAgICAgIHZhciBvYmogPSBkYXRhLmZpbmQoZnVuY3Rpb24gKGRhdGFSb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVJvdy5pZCA9PSByb3cuaWQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG9iaiAmJiAndmFsdWUnIGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmICghb2JqLnZhbHVlICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vINC10YHRgtGMINC00LXRhNC+0LvRgtC90L7QtSDQt9C90LDRh9C10L3QuNC1XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGF0YVtpbmRleF1bcm93LmlkXS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBvYmoudmFsdWUgPyBvYmoudmFsdWUgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgICBrYXNfc2lzYWxkYWIgPSBvYmouc3FsTm8gPyBvYmouc3FsTm8gOiAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMud3JhcHBlciB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuc2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGthc19zaXNhbGRhYiB8fCAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcm93LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnc3FsTm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlU2VsZWN0Q2hhbmdlIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdTSVNBTERBQidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogMCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0VJIFNJU0FMREEnXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBzdHlsZTogc3R5bGVzLmlucHV0LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBjb21wb25lbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcm93Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvdy5pZCxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHJvdy50b29sVGlwID8gcm93LnRvb2xUaXAgOiByb3cubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiByb3cuaWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRoaXMucHJvcHMuZGF0YVtyb3cuaWRdIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0LLQtdGA0L3QtdGCINC00LLQsCDQuNC90L/Rg9GC0LAsINCz0LTQtSDQsdGD0LTRg9GCINGF0YDQsNC90LjRgtGB0Y8g0LfQvdCw0YfQtdC90LjRjyDQtNC70Y8g0YHQvdCw0YfQsNC70LAg0Lgg0LrQvtC90YbQsCDQtNC40LDQv9Cw0LfQvtC90LBcclxuICAgICAgICAgKiBAcGFyYW0gcm93XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JldHVybkludGVydmFsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJldHVybkludGVydmFsKHJvdykge1xuICAgICAgICAgICAgaWYgKHJvdyAmJiByb3cuaW50ZXJ2YWwgJiYgISgnc3RhcnQnIGluIHJvdykpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByb3cudmFsdWUgPyByb3cudmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgICAgIHJvdyA9IF9leHRlbmRzKHt9LCByb3csIHsgc3RhcnQ6IHZhbHVlIH0sIHsgZW5kOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnByb3BzLmRhdGE7XG4gICAgICAgICAgICB2YXIgb2JqID0gZGF0YS5maW5kKGZ1bmN0aW9uIChkYXRhUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFSb3cuaWQgPT0gcm93LmlkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZVN0YXJ0ID0gcm93LmludGVydmFsID8gb2JqWydzdGFydCddIDogb2JqLnZhbHVlO1xuICAgICAgICAgICAgdmFyIHZhbHVlRW5kID0gcm93LmludGVydmFsID8gb2JqWydlbmQnXSA6IG9iai52YWx1ZTtcblxuICAgICAgICAgICAgdmFyIGNvbXBvbmVudFR5cGUgPSByb3cudHlwZSA/IHJvdy50eXBlIDogJ3RleHQnO1xuICAgICAgICAgICAgaWYgKHZhbHVlU3RhcnQgJiYgdmFsdWVFbmQpIHtcbiAgICAgICAgICAgICAgICAvLyDRgdC+0YXRgNCw0L3QuNC8INC30L3QsNGH0LXQvdC40LVcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVGaWx0ZXJDb250ZW50KHJvdy5uYW1lLCB2YWx1ZVN0YXJ0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVGaWx0ZXJDb250ZW50KHJvdy5uYW1lLCB2YWx1ZUVuZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5pbnRlcnZhbCB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyBzdHlsZTogc3R5bGVzLmlucHV0LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBjb21wb25lbnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcm93Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvdy5pZCArICdfc3RhcnQnLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogcm93Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogcm93LmlkICsgJ19zdGFydCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVN0YXJ0IHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGhpcy5wcm9wcy5kYXRhW3Jvdy5pZF1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICctJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHN0eWxlOiBzdHlsZXMuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbXBvbmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiByb3cubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcm93LmlkICsgJ19lbmQnLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogcm93Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogcm93LmlkICsgJ19lbmQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVFbmQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0aGlzLnByb3BzLmRhdGFbcm93LmlkXVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcblxuICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KG5leHRQcm9wcy5ncmlkQ29uZmlnKSAhPT0gSlNPTi5zdHJpbmdpZnkocHJldlN0YXRlLmdyaWRDb25maWcpIHx8IEpTT04uc3RyaW5naWZ5KG5leHRQcm9wcy5kYXRhKSAhPT0gSlNPTi5zdHJpbmdpZnkocHJldlN0YXRlLmRhdGEpIHx8IHByZXZTdGF0ZS5kYXRhLmxlbmd0aCA9PT0gMCB8fCBwcmV2U3RhdGUuZGF0YS5sZW5ndGggIT09IG5leHRQcm9wcy5kYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGdyaWRDb25maWc6IG5leHRQcm9wcy5ncmlkQ29uZmlnLCBkYXRhOiBuZXh0UHJvcHMuZGF0YSB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdyaWRGaWx0ZXI7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5HcmlkRmlsdGVyLnByb3BUeXBlcyA9IHtcbiAgICBncmlkQ29uZmlnOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgICBkYXRhOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHcmlkRmlsdGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9kYXRhLWdyaWQvZ3JpZC1maWx0ZXIvZ3JpZC1maWx0ZXIuanN4XG4vLyBtb2R1bGUgaWQgPSAyNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO3ZhciBfc2VsZWN0O2Z1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KTt9ZWxzZXtvYmpba2V5XT12YWx1ZTt9cmV0dXJuIG9iajt9bW9kdWxlLmV4cG9ydHM9e2Zvcm1XaWRnZXQ6e21hcmdpbkJvdHRvbTonNXB4JyxkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidyb3cnfSxmb3JtV2lkZ2V0TGFiZWw6e2Rpc3BsYXk6J2ZsZXgnLGp1c3RpZnlDb250ZW50OidmbGV4LWVuZCcsd2lkdGg6JzQwJScsbWFyZ2luUmlnaHQ6JzEwcHgnfSxmb3JtV2lkZ2V0SW5wdXQ6e3dpZHRoOicxMDAlJyxib3JkZXJSYWRpdXM6JzJweCcscGFkZGluZzonM3B4Jyxib3JkZXI6JzBweCd9LGlucHV0Ontib3JkZXJSYWRpdXM6JzJweCcscGFkZGluZzonNXB4JyxkaXNwbGF5OidpbmxpbmUtYmxvY2snfSxzZWxlY3Q6KF9zZWxlY3Q9e2JvcmRlclJhZGl1czonMnB4JyxwYWRkaW5nOic1cHgnLGRpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6J2F1dG8nfSxfZGVmaW5lUHJvcGVydHkoX3NlbGVjdCwnZGlzcGxheScsJ2ZsZXgnKSxfZGVmaW5lUHJvcGVydHkoX3NlbGVjdCwnbWFyZ2luUmlnaHQnLCc1cHgnKSxfc2VsZWN0KSx3cmFwcGVyOnttYXJnaW46JzVweCcsZGlzcGxheTonZmxleCcsd2lkdGg6Jzk1JSd9LGZpZWxkU2V0Ontib3JkZXJSYWRpdXM6JzJweCcsbWFyZ2luOicxMHB4J30sdWk6e2JvcmRlclJhZGl1czonMnB4JyxwYWRkaW5nOic1cHgnLGRpc3BsYXk6J2lubGluZS1ibG9jayd9LGludGVydmFsOntkaXNwbGF5OidpbmxpbmUtZmxleCd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvZGF0YS1ncmlkL2dyaWQtZmlsdGVyL2dyaWQtZmlsdGVyLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17ZG9jUm93OntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidyb3cgd3JhcCcvKlxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJsdWUnXHJcbiAgICAgICAgKi99LGRvY0NvbHVtbjp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJywvKlxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHllbGxvdycsXHJcbiAgICAgICAgKi93aWR0aDonNTAlJ30sZG9jOntwb3NpdGlvbjoncmVsYXRpdmUnLGhlaWdodDonMTAwJScsZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJy8qXHJcbiAgICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYnJvd24nXHJcbiAgICAgICAgKi99LGdyaWRDb250YWluZXI6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhGbG93Oidyb3cgd3JhcCcsaGVpZ2h0Oic5NSUnfSxncmlkOnttYWluVGFibGU6e3RhYmxlTGF5b3V0OidmaXhlZCcscG9zaXRpb246J3JlbGF0aXZlJyx0ZDp7Ym9yZGVyOicxcHggc29saWQgbGlnaHRHcmV5JyxkaXNwbGF5Oid0YWJsZS1jZWxsJyxwYWRkaW5nTGVmdDonNXB4J30sbWluSGVpZ2h0OicyMDBweCcsbWFyZ2luQm90dG9tOicyMHB4J30saGVhZGVyVGFibGU6e3RhYmxlTGF5b3V0OidmaXhlZCd9fSxsaW1pdDp7d2lkdGg6JzIwJScsbWFyZ2luOic1cHggMnB4J30sb2s6e2JhY2tncm91bmRDb2xvcjonbGlnaHRncmVlbicsd2lkdGg6JzEwMCUnLHRleHRBbGlnbjoncmlnaHQnfSxlcnJvcjp7YmFja2dyb3VuZENvbG9yOidsaWdodGNvcmFsJyx3aWR0aDonMTAwJScsdGV4dEFsaWduOidyaWdodCd9LG5vdFZhbGlkOntiYWNrZ3JvdW5kQ29sb3I6J3llbGxvdycsd2lkdGg6JzEwMCUnLHRleHRBbGlnbjoncmlnaHQnfSx0b3RhbDp7d2lkdGg6J2F1dG8nfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2RvY3VtZW50cy9kb2N1bWVudHMtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIGdldE5vdyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vLi4vbGlicy9nZXROb3cnKTtcblxudmFyIE1vZGFsUGFnZSA9IHJlcXVpcmUoJy4vLi4vLi4vbW9kYWxwYWdlL21vZGFsUGFnZS5qc3gnKTtcblxudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgSW5wdXREYXRlID0gcmVxdWlyZSgnLi4vLi4vaW5wdXQtZGF0ZS9pbnB1dC1kYXRlLmpzeCcpLFxuICAgIElucHV0TnVtYmVyID0gcmVxdWlyZSgnLi4vLi4vaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci5qc3gnKSxcbiAgICBJQ09OID0gJ2V4ZWN1dGUnO1xuXG52YXIgQnV0dG9uVGFzayA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b25UYXNrLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uVGFzayhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uVGFzayk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvblRhc2suX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25UYXNrKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvd01vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIHNlaXN1Z2E6IGdldE5vdygpLFxuICAgICAgICAgICAga29ndXM6IDAsXG4gICAgICAgICAgICBrYXNfa29uZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBfdGhpcy5oYW5kbGVDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMubW9kYWxQYWdlQ2xpY2sgPSBfdGhpcy5tb2RhbFBhZ2VDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSW5wdXRDaGFuZ2UgPSBfdGhpcy5oYW5kbGVJbnB1dENoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b25UYXNrLCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd01vZGFsOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wcm9wcy52YWx1ZSA/IHRoaXMucHJvcHMudmFsdWUgOiAnVMOkaXRtaW5lJztcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuVGFzaycgfHwgdGhpcy5wcm9wcy5yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW0lDT05dIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dNb2RhbCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlQnRuQ2xpY2s6IHRoaXMubW9kYWxQYWdlQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VOYW1lOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbE9iamVjdHM6IFsnYnRuT2snLCAnYnRuQ2FuY2VsJ11cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0thcyBrXFx4RTRpdmF0YSBcIicgKyB2YWx1ZSArICdcIiA/JyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zaG93RGF0ZSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXREYXRlLCB7IHRpdGxlOiAnU2Vpc3VnYSAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2twdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5zZWlzdWdhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQta3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlIH0pIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zaG93S29ndXMgPyBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiB0aGlzLnByb3BzLnRpdGxlID8gdGhpcy5wcm9wcy50aXRsZSA6ICdWw6TDpHJ0dXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2tvZ3VzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIodGhpcy5zdGF0ZS5rb2d1cyksXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1rb2d1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVJbnB1dENoYW5nZSB9KSA6IG51bGxcbiAgICAgICAgICAgICAgICApIDogbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxQYWdlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kYWxQYWdlQ2xpY2soYnRuRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93TW9kYWw6IGZhbHNlIH0pO1xuICAgICAgICAgICAgaWYgKGJ0bkV2ZW50ID09PSAnT2snKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKHRoaXMucHJvcHMudmFsdWUsIHRoaXMucHJvcHMuc2hvd0tvZ3VzID8gdGhpcy5zdGF0ZS5rb2d1cyA6IHRoaXMuc3RhdGUuc2Vpc3VnYSwgdGhpcy5zdGF0ZS5rYXNfa29uZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL3dpbGwgc2F2ZSB2YWx1ZVxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVJbnB1dENoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVJbnB1dENoYW5nZShuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAna3B2JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlaXN1Z2E6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdrb2d1cyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBrb2d1czogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2thc19rb25kJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGthc19rb25kOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCdXR0b25UYXNrO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uVGFzay5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWUsXG4gICAgc2hvd0RhdGU6IHRydWUsXG4gICAgc2hvd0tvZ3VzOiBmYWxzZSxcbiAgICBzaG93S29uZDogZmFsc2Vcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uVGFzaztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi10YXNrL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIGZldGNoRGF0YSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9mZXRjaERhdGEnKTtcbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi9kb2MtY29udGV4dC5qcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4Jyk7XG52YXIgTW9kYWxSZXBvcnQgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFscGFnZS1yZXBvcnQvaW5kZXguanN4Jyk7XG5cbnZhciBVcGxvYWRCdXR0b24gPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoVXBsb2FkQnV0dG9uLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBVcGxvYWRCdXR0b24ocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVwbG9hZEJ1dHRvbik7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFVwbG9hZEJ1dHRvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFVwbG9hZEJ1dHRvbikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLCAvL9C80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDQt9Cw0LrRgNGL0YLQvlxuICAgICAgICAgICAgc2VsZWN0ZWRGaWxlOiBudWxsLFxuICAgICAgICAgICAgcmVzcG9uc2U6IG51bGwsXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlzUmVwb3J0OiBmYWxzZSxcbiAgICAgICAgICAgIHR4dFJlcG9ydDogW11cblxuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzLm1vZGFsUGFnZUNsaWNrID0gX3RoaXMubW9kYWxQYWdlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLm9uQ2hhbmdlSGFuZGxlciA9IF90aGlzLm9uQ2hhbmdlSGFuZGxlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBfdGhpcy5oYW5kbGVDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZmVjdGhEYXRhID0gX3RoaXMuZmVjdGhEYXRhLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5tb2RhbFJlcG9ydGVQYWdlQnRuQ2xpY2sgPSBfdGhpcy5tb2RhbFJlcG9ydGVQYWdlQnRuQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVXBsb2FkQnV0dG9uLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLnNob3cgPyB0aGlzLm1vZGFsUGFnZSgpIDogUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIEJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuVXBsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlID8gdGhpcy5wcm9wcy52YWx1ZSA6ICdJbXBvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgcmVmOiAnaW1hZ2UnLCBzcmM6IHN0eWxlcy5idXR0b24uaWNvbiB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChNb2RhbFJlcG9ydCwge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnN0YXRlLmlzUmVwb3J0LFxuICAgICAgICAgICAgICAgICAgICByZXBvcnQ6IHRoaXMuc3RhdGUudHh0UmVwb3J0LFxuICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogdGhpcy5tb2RhbFJlcG9ydGVQYWdlQnRuQ2xpY2sgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb2RhbFBhZ2UoKSB7XG4gICAgICAgICAgICB2YXIgbW9kYWxPYmplY3RzID0gdGhpcy5zdGF0ZS5sb2FkaW5nID8gWydidG5DYW5jZWwnXSA6IFsnYnRuT2snLCAnYnRuQ2FuY2VsJ107XG4gICAgICAgICAgICB2YXIgbWltZVR5cGVzID0gdGhpcy5wcm9wcy5taW1lVHlwZXMgPyB0aGlzLnByb3BzLm1pbWVUeXBlcyA6IFwiLmNzdiwgLnhtbFwiO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBtb2RhbE9iamVjdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtdXBsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogdGhpcy5tb2RhbFBhZ2VDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICdJbXBvcnQnIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2ZpbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6IG1pbWVUeXBlcyB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXNwb25zZSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKGV2ZW50ID09PSAnT2snKSB7XG4gICAgICAgICAgICAgICAgLy8g0L/QvtC60LDQt9Cw0YLRjCDQvdC+0LLQvtC1INC30L3QsNGH0LXQvdC40LVcblxuICAgICAgICAgICAgICAgIC8vdXBsb2FkXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBmZXRjaFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZlY3RoRGF0YSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbF9tZXNzYWdlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmVycm9yX21lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsX21lc3NhZ2UgPSByZXNwb25zZS5kYXRhLmVycm9yX21lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5wcm9wcy5vbkNsaWNrKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINCy0YvQstC10LTQtdC8INC90LAg0Y3QutGA0LDQvSDQvtGC0YfQtdGCXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JlcG9ydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHh0UmVwb3J0OiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuZGF0YSA/IHJlc3BvbnNlLmRhdGEuZGF0YSA6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0L7RgtGH0LXRgtCwINC90LXRgiwg0YLQvtC70YzQutC+INC40L3RhNC+0YDQvNCw0YbQuNGPXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbF9tZXNzYWdlID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoeyByZXNwb25zZTogbF9tZXNzYWdlIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9zZSBtb2RhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7IHJlc3BvbnNlOiBudWxsLCBzaG93OiBmYWxzZSwgbG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVzcG9uc2U6IG51bGwsIHNob3c6IGZhbHNlLCBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vINCy0YvQv9C+0LvQvdC40Lwg0LrQsNGB0YLQvtC80L3Ri9C5INC80LXRgtC+0LQg0L7QsdGA0LDQsdC+0YLRh9C40LrQsCDRgdC+0LHRi9GC0LjRj1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2xpY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZXNwb25zZTogbnVsbCwgc2hvdzogZmFsc2UsIGxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkNoYW5nZUhhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRGaWxlOiBldmVudC50YXJnZXQuZmlsZXNbMF0gfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZlY3RoRGF0YScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmZWN0aERhdGEoKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlcjogdGhpcy5wcm9wcy5kb2NUeXBlSWQsIC8vINC/0LDRgNCw0LzQtdGC0YDRi1xuICAgICAgICAgICAgICAgIHV1aWQ6IERvY0NvbnRleHQudXNlckRhdGEudXVpZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCd1dWlkJywgRG9jQ29udGV4dC51c2VyRGF0YS51dWlkKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdkb2NUeXBlSWQnLCB0aGlzLnByb3BzLmRvY1R5cGVJZCk7XG5cbiAgICAgICAgICAgIHJldHVybiBmZXRjaERhdGEuZmV0Y2hEYXRhUG9zdCgnL25ld0FwaS91cGxvYWQvJywgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDRg9Cx0LXRgNC10YIg0L7QutC90L4g0YEg0L7RgtGH0LXRgtC+0LxcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxSZXBvcnRlUGFnZUJ0bkNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUmVwb3J0ZVBhZ2VCdG5DbGljayhldmVudCkge1xuICAgICAgICAgICAgdmFyIGlzUmVwb3J0ID0gZXZlbnQgJiYgZXZlbnQgPT0gJ09rJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc1JlcG9ydDogaXNSZXBvcnQgfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVXBsb2FkQnV0dG9uO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuVXBsb2FkQnV0dG9uLnByb3BUeXBlcyA9IHtcbiAgICBzaG93OiBQcm9wVHlwZXMuYm9vbFxufTtcblxuVXBsb2FkQnV0dG9uLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBzaG93OiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBVcGxvYWRCdXR0b247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3VwbG9hZF9idXR0b24vaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXt3cmFwcGVyOnttYXJnaW46JzVweCcsZGlzcGxheTonZmxleCcsd2lkdGg6Jzk1JSd9LGJ1dHRvbjp7aWNvbjonL2ltYWdlcy9pY29ucy9pbXBvcnQucG5nJyx3aWR0aDonMTAlJ319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy91cGxvYWRfYnV0dG9uL3N0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgRG9jQ29udGV4dCA9IHJlcXVpcmUoJy4uLy4uL2RvYy1jb250ZXh0Jyk7XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgZmV0Y2hEYXRhID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2ZldGNoRGF0YScpO1xudmFyIFBPU1RfTE9BRF9MSUJTX1VSTCA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29uZmlnL2NvbnN0YW50cycpLkxJQlMuUE9TVF9MT0FEX0xJQlNfVVJMO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vc2VsZWN0LWRhdGEtc3R5bGVzJyksXG4gICAgRGF0YUdyaWQgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL2RhdGEtZ3JpZC9kYXRhLWdyaWQuanN4JyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElucHV0VGV4dCA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtdGV4dC9pbnB1dC10ZXh0LmpzeCcpLFxuICAgIE1vZGFsUGFnZSA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9tb2RhbHBhZ2UvbW9kYWxQYWdlLmpzeCcpO1xuXG52YXIgU2VsZWN0RGF0YSA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhTZWxlY3REYXRhLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBTZWxlY3REYXRhKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3REYXRhKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2VsZWN0RGF0YS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNlbGVjdERhdGEpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMudmFsdWUsIC8qINCy0L7Qt9Cy0YDQsNGJ0LDQtdC80L7QtSDQt9C90LDRh9C10L3QuNC1LCDQvdCw0L/RgNC40LzQtdGAIGlkKi9cbiAgICAgICAgICAgIGZpZWxkVmFsdWU6IHByb3BzLmRlZmF1bHRWYWx1ZSwgLyrQstC40LTQuNC80L7QtSDQt9C90LDRh9C10L3QuNC1LCDQvdCw0L/RgNC40LzQtdGAIGtvb2Qg0LjQu9C4IG5hbWUg0L/QviDRg9C60LDQt9Cw0L3QvdC+0LzRgyDQsiBjb2xsSWQgKi9cbiAgICAgICAgICAgIHJlYWRPbmx5OiBwcm9wcy5yZWFkT25seSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgIGVkaXRlZDogcHJvcHMuZWRpdGVkLFxuICAgICAgICAgICAgZ3JpZERhdGE6IFtdLFxuICAgICAgICAgICAgZ3JpZENvbmZpZzogcHJvcHMuY29uZmlnLFxuICAgICAgICAgICAgZ3JpZEFjdGl2ZVJvdzogMCxcbiAgICAgICAgICAgIHNob3c6IF90aGlzLnByb3BzLnNob3csXG4gICAgICAgICAgICBsaW1pdDogJzEwJ1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5oYW5kbGVJbnB1dENoYW5nZSA9IF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVHcmlkQ2xpY2sgPSBfdGhpcy5oYW5kbGVHcmlkQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLm1vZGFsUGFnZUNsaWNrID0gX3RoaXMubW9kYWxQYWdlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmxvYWRMaWJzID0gX3RoaXMubG9hZExpYnMuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZUdyaWRCdG5DbGljayA9IF90aGlzLmhhbmRsZUdyaWRCdG5DbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTZWxlY3REYXRhLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTGlicygnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnZhbHVlICYmIHByZXZTdGF0ZS52YWx1ZSAhPT0gdGhpcy5zdGF0ZS52YWx1ZSAmJiAhdGhpcy5zdGF0ZS5maWVsZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTGlicygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIGlzRWRpdGVNb2RlID0gIXRoaXMuc3RhdGUucmVhZE9ubHksXG4gICAgICAgICAgICAgICAgYnRuU3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZXMuYnV0dG9uLCB7IGRpc3BsYXk6IGlzRWRpdGVNb2RlID8gJ2lubGluZScgOiAnbm9uZScgfSk7XG5cbiAgICAgICAgICAgIHZhciBpc1JlYWRPbmx5ID0gdGhpcy5wcm9wcy5yZWFkT25seTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3cpIHtcbiAgICAgICAgICAgICAgICBpc1JlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy53cmFwcGVyIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgcmVmOiAnaW5wdXROYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuZmllbGRWYWx1ZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGlzUmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IHZhbHVlOiAndicsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0blNob3cnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogYnRuU3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93ID8gdGhpcy5tb2RhbFBhZ2UoKSA6IG51bGxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb2RhbFBhZ2UoKSB7XG4gICAgICAgICAgICB2YXIgbW9kYWxPYmplY3RzID0gWydidG5PaycsICdidG5DYW5jZWwnXTtcbiAgICAgICAgICAgIHZhciBsaW1pdElucHV0U3R5bGUgPSBzdHlsZXMubGltaXRJbnB1dDtcblxuICAgICAgICAgICAgdmFyIHRvb2xiYXJQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgYnRuQWRkOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnRuRWRpdDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZToge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBidG5QcmludDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0czogbW9kYWxPYmplY3RzLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtZ3JpZCcsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsUGFnZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VOYW1lOiAnVmFsaSByZWEnIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAnZ3JpZC1yb3ctY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyByZWY6ICdpbnB1dC1maWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPdHNpbmd1IHBhcmFtZXRyaWQ6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdncmlkRmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmZpZWxkVmFsdWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdGhpcy5wcm9wcy5yZWFkT25seSB8fCAhdGhpcy5zdGF0ZS5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0YUdyaWQsIHsgZ3JpZERhdGE6IHRoaXMuc3RhdGUuZ3JpZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29sdW1uczogdGhpcy5zdGF0ZS5ncmlkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVHcmlkQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcmlkQnRuQ2xpY2s6IHRoaXMuaGFuZGxlR3JpZEJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyUGFyYW1zOiB0b29sYmFyUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZGF0YS1ncmlkJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgcmVmOiAnaW5wdXQtbGltaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMaW1paXQ6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBsaW1pdElucHV0U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGltaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubGltaXQgfHwgJzEwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC40LfQvNC10L3QuNGPINC30L3QsNGH0LXQvdC40Y8g0LIg0YLQtdC60YHRgtC+0LLQvtC8ICjQv9C+0LjRgdC60L7QstC+0LwpINC/0L7Qu9C1XG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUlucHV0Q2hhbmdlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUlucHV0Q2hhbmdlKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdyZWFkb25seSAnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuYW1lID09PSAnZ3JpZEZpbHRlcicpIHtcbiAgICAgICAgICAgICAgICAvLyDQvtCx0L3QvtCy0LjQvCDRgdGC0LXQudGCXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiAwLCBmaWVsZFZhbHVlOiB2YWx1ZSwgc2hvdzogdHJ1ZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0LLRi9C/0L7Qu9C90LjQvCDQt9Cw0L/RgNC+0YFcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkTGlicyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiAwLCBmaWVsZFZhbHVlOiB2YWx1ZSwgc2hvdzogZmFsc2UgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL9Cy0YvQv9C+0LvQvdC40Lwg0LfQsNC/0YDQvtGBXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIubG9hZExpYnModmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2xpbWl0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsaW1pdDogdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQgPT09ICdPaycpIHtcbiAgICAgICAgICAgICAgICAvLyDQvdCw0LTQviDQvdCw0LnRgtC4INCw0LrRgtC40LLQvdGD0Y4g0YHRgtGA0L7QutGDXG5cbiAgICAgICAgICAgICAgICB2YXIgYm91bmRGaWVsZCA9IHRoaXMucHJvcHMuYm91bmRUb0dyaWQgPyB0aGlzLnByb3BzLmJvdW5kVG9HcmlkIDogJ25hbWUnLFxuICAgICAgICAgICAgICAgICAgICAvL2dyaWQgZmlsZWQgbmFtZVxuICAgICAgICAgICAgICAgIGJvdW5kVG9EYXRhID0gdGhpcy5wcm9wcy5ib3VuZFRvRGF0YSA/IHRoaXMucHJvcHMuYm91bmRUb0RhdGEgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgLy9JbnB1dERlZmF1bHRWYWx1ZVxuICAgICAgICAgICAgICAgIGJvdW5kRmllbGREYXRhID0gdGhpcy5wcm9wcy5uYW1lOyAvL2lucHV0TmFtZSA9IGZpZWxkbmFtZVxuXG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVJvdyA9IHRoaXMuc3RhdGUuZ3JpZEFjdGl2ZVJvdyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnN0YXRlLmdyaWREYXRhW2FjdGl2ZVJvd11bJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLnN0YXRlLmdyaWREYXRhW2FjdGl2ZVJvd11bYm91bmRGaWVsZF07XG4gICAgICAgICAgICAgICAgLy8g0L/QvtC70YPRh9C40YLRjCDQtNCw0L3QvdGL0LUg0L/QvtC70LXQuSDQuCDRg9GB0YLQsNC90L7QstC40YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0LTQu9GPINCy0LjQtNC20LXRgtCwXG5cbiAgICAgICAgICAgICAgICAvLyDQv9C+0LrQsNC30LDRgtGMINC90L7QstC+0LUg0LfQvdCw0YfQtdC90LjQtVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogdmFsdWUsIGZpZWxkVmFsdWU6IGZpZWxkVmFsdWUsIHNob3c6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8g0LLQtdGA0L3Rg9GC0Ywg0LfQvdCw0YfQtdC90LjQtSDQvdCw0LLQtdGA0YVcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoYm91bmRGaWVsZERhdGEsIHZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyB0ZXh0IHZhbHVlIG9mIGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGlmIChib3VuZFRvRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZShib3VuZFRvRGF0YSwgZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL9C10YHQu9C4INC/0YDQuNCy0Y/Qt9Cw0L3QviDQtNGA0YPQs9C+0LUg0L/QvtC70LVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY29sbE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5wcm9wcy5jb2xsTmFtZSwgZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vINCy0L7RgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHRgtCw0YDRi9C1INC30L3QsNGH0LXQvdC40Y8g0LjQtyDQv9GA0L7Qv9GB0L7Qsiwg0LfQsNCy0YDRi9Cy0YvQsNC10Lwg0L7QutC90L5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlLCBzaG93OiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVHcmlkQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlR3JpZENsaWNrKGV2ZW50LCB2YWx1ZSwgYWN0aXZlUm93KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ3JpZEFjdGl2ZVJvdzogYWN0aXZlUm93LCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2xvYWRMaWJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRMaWJzKGZpZWxkVmFsdWUsIGtwdikge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBsaWIgPSB0aGlzLnByb3BzLmxpYk5hbWU7XG4gICAgICAgICAgICB2YXIgc3FsV2hlcmUgPSAnJztcbiAgICAgICAgICAgIHZhciBsaW1pdCA9IHRoaXMuc3RhdGUubGltaXQgPyB0aGlzLnN0YXRlLmxpbWl0IDogMTAwO1xuICAgICAgICAgICAgdmFyIGlzU2VhY2hCeUlkID0gdGhpcy5zdGF0ZS52YWx1ZSAmJiAhZmllbGRWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuc3FsRmllbGRzICYmIHRoaXMucHJvcHMuc3FsRmllbGRzLmxlbmd0aCAmJiBmaWVsZFZhbHVlICYmIGZpZWxkVmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3FsRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc09yID0gc3FsV2hlcmUubGVuZ3RoID4gMCA/ICcgb3IgJyA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBzcWxXaGVyZSA9IHNxbFdoZXJlLmNvbmNhdCgnICcgKyBpc09yICsgJyBlbmNvZGUoJyArIGZpZWxkICsgJzo6Ynl0ZWEsIFxcJ2VzY2FwZVxcJykgaWxpa2UgXFwnJScgKyBmaWVsZFZhbHVlLnRyaW0oKSArICclXFwnJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1NlYWNoQnlJZCkge1xuICAgICAgICAgICAgICAgIC8vIHdpbGwgc2VhY2ggYnkgaWRcbiAgICAgICAgICAgICAgICBzcWxXaGVyZSA9ICdpZCA9ICcgKyB0aGlzLnN0YXRlLnZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzcWxXaGVyZSA9ICd3aGVyZSAnICsgc3FsV2hlcmU7XG5cbiAgICAgICAgICAgIHZhciBsaWJQYXJhbXMgPSBPYmplY3QuYXNzaWduKHsgdXVpZDogRG9jQ29udGV4dC51c2VyRGF0YS51dWlkIH0sIHNxbFdoZXJlLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICBzcWw6IHNxbFdoZXJlLFxuICAgICAgICAgICAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgICAgICAgICAgICBrcHY6IGtwdiA/IGtwdiA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMClcbiAgICAgICAgICAgIH0gOiB7fSk7XG5cbiAgICAgICAgICAgIGlmIChzcWxXaGVyZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZmV0Y2hEYXRhLmZldGNoRGF0YVBvc3QoUE9TVF9MT0FEX0xJQlNfVVJMICsgJy8nICsgbGliLCBsaWJQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBncmlkRGF0YSA9IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZENvbmZpZyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiAnZGF0YScgaW4gcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWREYXRhID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQucmVzdWx0LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29uZmlnID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQucmVzdWx0LmdyaWRDb25maWc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZERhdGEgJiYgZ3JpZERhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2VhY2hCeUlkICYmICFfdGhpczMuc3RhdGUuc2hvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINGC0L7Qu9GM0LrQviDQvtC00L3QsCDQt9Cw0L/QuNGB0YwuINCT0YDQuNC0INC90LUg0L3Rg9C20LXQvVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWU6IGdyaWREYXRhWzBdW190aGlzMy5wcm9wcy5ib3VuZFRvR3JpZF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBncmlkRGF0YVswXVsnaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZERhdGE6IGdyaWREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29uZmlnOiBncmlkQ29uZmlnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7IGdyaWREYXRhOiBncmlkRGF0YSwgZ3JpZENvbmZpZzogZ3JpZENvbmZpZywgc2hvdzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdsb2FkTGlicyBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlR3JpZEJ0bkNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUdyaWRCdG5DbGljayhidG5OYW1lLCBhY3RpdmVSb3csIGlkLCBkb2NUeXBlSWQpIHtcbiAgICAgICAgICAgIC8vINC30LDQutGA0YvQstCw0LXQvCDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L4g0L/QvtC40YHQutCwINC4INC/0LXRgNC10YXQvtC00LjQvCDQvdCwINC90L7QstGD0Y4g0LfQsNC/0LjRgdGMINGB0L/RgNCw0LLQvtGH0L3QuNC60LBcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHZhciBkb2NJZCA9IHRoaXMuc3RhdGUuZ3JpZERhdGFbYWN0aXZlUm93XVsnaWQnXTtcbiAgICAgICAgICAgIHN3aXRjaCAoYnRuTmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJNdXVkYVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnLycgKyBEb2NDb250ZXh0Lm1vZHVsZSArICcvJyArIHRoaXMucHJvcHMubGliTmFtZSArICcvJyArIGRvY0lkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVkaXRcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nICsgRG9jQ29udGV4dC5tb2R1bGUgKyAnLycgKyB0aGlzLnByb3BzLmxpYk5hbWUgKyAnLycgKyBkb2NJZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nICsgRG9jQ29udGV4dC5tb2R1bGUgKyAnLycgKyB0aGlzLnByb3BzLmxpYk5hbWUgKyAnLzAnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZpZ2FuZSBjbGljaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcHMudmFsdWUgIT09IHByZXZTdGF0ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBuZXh0UHJvcHMudmFsdWUgfTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTZWxlY3REYXRhO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuU2VsZWN0RGF0YS5wcm9wVHlwZXMgPSB7XG4gICAgcmVhZE9ubHk6IFByb3BUeXBlcy5ib29sLFxuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjb2xsSWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNob3c6IFByb3BUeXBlcy5ib29sXG59O1xuXG5TZWxlY3REYXRhLmRlZmF1bHRQcm9wcyA9IHtcbiAgICByZWFkT25seTogZmFsc2UsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIGJ0bkRlbGV0ZTogZmFsc2UsXG4gICAgdmFsdWU6IDAsXG4gICAgY29sbElkOiAnaWQnLFxuICAgIHRpdGxlOiAnJyxcbiAgICBzaG93OiBmYWxzZVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZWxlY3REYXRhO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS5qc3hcbi8vIG1vZHVsZSBpZCA9IDI1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e3dyYXBwZXI6e21hcmdpbjonNXB4JyxkaXNwbGF5OidmbGV4Jyx3aWR0aDonOTUlJ30saW5wdXQ6e3dpZHRoOic3NSUnLG1hcmdpbkxlZnQ6JzE1cHgnLGJvcmRlclJhZGl1czonM3B4JyxoZWlnaHQ6JzMwcHgnfSxoaWRlOntkaXNwbGF5Oidub25lJ30sc2VsZWN0Ont3aWR0aDonNjAlJyxtYXJnaW5MZWZ0OicxNXB4J30scmVhZE9ubHk6e2JhY2tncm91bmRDb2xvcjonI0YzRUZFRid9LGxhYmVsOnt3aWR0aDonNDAlJyxtYXJnaW46JzVweCd9LGJ1dHRvbjp7d2lkdGg6JzEwJSd9LGxpbWl0SW5wdXQ6e3dpZHRoOicxMCUnfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL3NlbGVjdC1kYXRhL3NlbGVjdC1kYXRhLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGVzJyk7XG52YXIgTG9hZGluZyA9IGZ1bmN0aW9uIExvYWRpbmcocHJvcHMpIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHN0eWxlcy53aW5kb3cgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMubGFiZWwgfSxcbiAgICAgICAgICAgIHByb3BzLmxhYmVsXG4gICAgICAgIClcbiAgICApO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMb2FkaW5nO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9sb2FkaW5nL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17bGFiZWw6e3dpZHRoOidhdXRvJ30sd2luZG93OntkaXNwbGF5OidmbGV4JyxqdXN0aWZ5Q29udGVudDonY2VudGVyJyxhbGlnbkl0ZW1zOidjZW50ZXInfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2xvYWRpbmcvc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiXCJ1c2Ugc3RyaWN0XCI7Ly8gd2lsbCBjYWxjdWxhdGUgc3VtIG9mIHNvbWUgZmllbGRcbnZhciBnZXRTdW09ZnVuY3Rpb24gZ2V0U3VtKGRhdGEsY29sdW1uRmllbGQpe3ZhciB0b3RhbD0wO2lmKGRhdGEmJmRhdGEubGVuZ3RoJiZkYXRhWzBdW2NvbHVtbkZpZWxkXSl7ZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHJvdyl7cmV0dXJuIHRvdGFsPXRvdGFsK051bWJlcihyb3dbY29sdW1uRmllbGRdKTt9KTt9cmV0dXJuIHRvdGFsLnRvRml4ZWQoMik7fTttb2R1bGUuZXhwb3J0cz1nZXRTdW07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9saWJzL2dldFN1bS5qc1xuLy8gbW9kdWxlIGlkID0gMjU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIERvY3VtZW50UmVnaXN0ZXIgPSByZXF1aXJlKCcuLy4uL2RvY3VtZW50cy9kb2N1bWVudHMuanN4Jyk7XG52YXIgVG9vbGJhckNvbnRhaW5lciA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy90b29sYmFyLWNvbnRhaW5lci90b29sYmFyLWNvbnRhaW5lci5qc3gnKTtcbnZhciBCdG5TZXR0aW5ncyA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXNldHRpbmdzL2luZGV4LmpzeCcpO1xudmFyIEJ0blByaW50ID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItcHJpbnQvYnV0dG9uLXJlZ2lzdGVyLXByaW50LmpzeCcpO1xudmFyIEJ0bkVtYWlsID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tZW1haWwvaW5kZXguanN4Jyk7XG52YXIgQnRuRWFydmUgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1lYXJ2ZS9pbmRleC5qc3gnKTtcbnZhciBJbnB1dE51bWJlciA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci5qc3gnKTtcbnZhciBCdG5BcnZlc3RhID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tdGFzay9pbmRleC5qc3gnKTtcblxudmFyIGdldFN1bSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9nZXRTdW0nKTtcblxudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vYXJ2LXJlZ2lzdGVyLXN0eWxlcycpO1xuXG52YXIgRE9DX1RZUEVfSUQgPSAnQVJWJztcbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi9kb2MtY29udGV4dC5qcycpO1xudmFyIEVWRU5UUyA9IFt7IG5hbWU6ICdIw6TDpGxlc3RhbWluZScsIG1ldGhvZDogbnVsbCwgZG9jVHlwZUlkOiBudWxsIH0sIHsgbmFtZTogJ1Ryw7xrayBrw7VpayB2YWxpdHVkIGFydmVkJywgbWV0aG9kOiBudWxsLCBkb2NUeXBlSWQ6IG51bGwgfSwgeyBuYW1lOiAnRW1haWwga8O1aWsgdmFsaXR1ZCBhcnZlZCcsIG1ldGhvZDogbnVsbCwgZG9jVHlwZUlkOiBudWxsIH0sIHsgbmFtZTogJ1NhYWRhIEUtQXJ2ZWQgKE9tbml2YSkga8O1aWsgdmFsaXR1ZCBhcnZlZCcsIG1ldGhvZDogbnVsbCwgZG9jVHlwZUlkOiBudWxsIH0sIHsgbmFtZTogJ1NhYW1hIFhNTCBlLWFydmVkIGvDtWlrIHZhbGl0dWQgYXJ2ZWQnLCBtZXRob2Q6IG51bGwsIGRvY1R5cGVJZDogbnVsbCB9LCB7IG5hbWU6ICdTYWFtYSBYTUwgZS1hcnZlZCAoU0VCKSBrw7VpayB2YWxpdHVkIGFydmVkJywgbWV0aG9kOiBudWxsLCBkb2NUeXBlSWQ6IG51bGwgfSwgeyBuYW1lOiAnU2FhbWEgWE1MIGUtYXJ2ZWQgKFNXRUQpIGvDtWlrIHZhbGl0dWQgYXJ2ZWQnLCBtZXRob2Q6IG51bGwsIGRvY1R5cGVJZDogbnVsbCB9LCB7IG5hbWU6ICdOw7V1ZXRlIG1haGFrYW5uZScsIG1ldGhvZDogbnVsbCwgZG9jVHlwZUlkOiBudWxsIH1dO1xuXG4vKipcclxuICog0JrQu9Cw0YHRgSDRgNC10LDQu9C40LfRg9C10YIg0LTQvtC60YPQvNC10L3RgiDRgdC/0YDQsNCy0L7Rh9C90LjQutCwINC/0YDQuNC30L3QsNC60L7Qsi5cclxuICovXG5cbnZhciBEb2N1bWVudHMgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoRG9jdW1lbnRzLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBEb2N1bWVudHMocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvY3VtZW50cyk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERvY3VtZW50cy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERvY3VtZW50cykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5vbkNsaWNrSGFuZGxlciA9IF90aGlzLm9uQ2xpY2tIYW5kbGVyLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5yZW5kZXJlciA9IF90aGlzLnJlbmRlcmVyLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHN1bW1hOiAwLFxuICAgICAgICAgICAgamFhazogMCxcbiAgICAgICAgICAgIHJlYWQ6IDBcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERvY3VtZW50cywgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2N1bWVudFJlZ2lzdGVyLCB7IGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnkgPyB0aGlzLnByb3BzLmhpc3RvcnkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IHRoaXMucHJvcHMubW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdyZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogdGhpcy5yZW5kZXJlciB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnUmVhZCBrb2trdTonLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVhZF9rb2trdScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXJlYWQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHRoaXMuc3RhdGUucmVhZCkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwgeyB0aXRsZTogJ1N1bW1hIGtva2t1OicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdW1tYV9rb2trdScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXN1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcih0aGlzLnN0YXRlLnN1bW1hKS50b0ZpeGVkKDIpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlIH0pLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdKXFx4RTRcXHhFNGsga29ra3U6JyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2phYWtfa29ra3UnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLnRvdGFsLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1qYWFrJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcih0aGlzLnN0YXRlLmphYWspLnRvRml4ZWQoMikgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcmVyKHNlbGYpIHtcbiAgICAgICAgICAgIHZhciBzdW1tYSA9IHNlbGYuZ3JpZERhdGEgPyBnZXRTdW0oc2VsZi5ncmlkRGF0YSwgJ3N1bW1hJykgOiAwO1xuICAgICAgICAgICAgdmFyIGphYWsgPSBzZWxmLmdyaWREYXRhID8gZ2V0U3VtKHNlbGYuZ3JpZERhdGEsICdqYWFrJykgOiAwO1xuICAgICAgICAgICAgaWYgKHN1bW1hKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHN1bW1hOiBzdW1tYSwgcmVhZDogc2VsZi5ncmlkRGF0YS5sZW5ndGgsIGphYWs6IGphYWsgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIFRvb2xiYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkVhcnZlLCB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja0hhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIHBocmFzZTogJ0thcyBsYWFkaWRhIFhNTCAoU1dFRCkgZmFpbD8nLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5FYXJ2ZVN3ZWRYTUwnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogRVZFTlRTWzZdLm5hbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkVhcnZlLCB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja0hhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIHBocmFzZTogJ0thcyBsYWFkaWRhIFhNTCAoU0VCKSBmYWlsPycsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkVhcnZlU2ViWE1MJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEVWRU5UU1s1XS5uYW1lXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5FYXJ2ZSwge1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2tIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IERPQ19UWVBFX0lELFxuICAgICAgICAgICAgICAgICAgICBwaHJhc2U6ICdLYXMgbGFhZGlkYSBYTUwgZmFpbD8nLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5FYXJ2ZVhNTCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBFVkVOVFNbNF0ubmFtZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuRWFydmUsIHtcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5vbkNsaWNrSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgZG9jVHlwZUlkOiBET0NfVFlQRV9JRCxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuRWFydmVPbW5pdmEnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogRVZFTlRTWzNdLm5hbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkVtYWlsLCB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja0hhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkVtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEVWRU5UU1syXS5uYW1lXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5QcmludCwge1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2tIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IERPQ19UWVBFX0lELFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5QcmludCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBFVkVOVFNbMV0ubmFtZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuQXJ2ZXN0YSwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogRVZFTlRTWzddLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja0hhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bi0nICsgRVZFTlRTWzddLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2tleS0nICsgRVZFTlRTWzddLm5hbWVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blNldHRpbmdzLCB7XG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHNlbGYucHJvcHMuaGlzdG9yeSA/IHNlbGYucHJvcHMuaGlzdG9yeSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGlja0hhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0blNldHRpbmdzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEVWRU5UU1swXS5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2hhbmRsZXIg0LTQu9GPINGB0L7QsdGL0YLQuNGPINC60LvQuNC6INC90LAg0LrQvdC+0L/QutCw0YUg0L/QsNC90LXQu9C4XG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uQ2xpY2tIYW5kbGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2xpY2tIYW5kbGVyKGV2ZW50LCBzZWlzdWdhKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGlkcyA9IG5ldyBTZXQoKTsgLy8g0YHRjtC00LAg0L/QuNGI0LXQvCDQuNC0INGB0YfQtdGC0L7QvCwg0LrQvtGC0L7RgNGL0LUg0L/QvtC0INC+0LHRgNCw0LHQvtGC0LrRg1xuXG4gICAgICAgICAgICB2YXIgRG9jID0gdGhpcy5yZWZzWydyZWdpc3RlciddO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBFVkVOVFNbMF0ubmFtZTpcbiAgICAgICAgICAgICAgICAgICAgLy/QtNC10LvQsNC10Lwg0YDQtdC00LDQudGA0LXQutGCINC90LAg0LrQvtC90YTQuNCz0YPRgNCw0YbQuNGOXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKCcvJyArIHRoaXMucHJvcHMubW9kdWxlICsgJy9jb25maWcvJyArIERvY0NvbnRleHQudXNlckRhdGEuYXN1dHVzSWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVWRU5UU1sxXS5uYW1lOlxuICAgICAgICAgICAgICAgICAgICAvLyBQcmludFxuXG4gICAgICAgICAgICAgICAgICAgIC8vINCx0YPQtNC10YIg0LLRi9Cy0LXQtNC10L3QviDQvdCwINC/0LXRh9Cw0YLRjCDQstGL0LHRgNCw0L3QvdGL0LUg0Lgg0YLQvtC70YzQutC+INC00LvRjyDQv9C10YfQsNGC0Lgg0YHRh9C10YLQsFxuICAgICAgICAgICAgICAgICAgICBEb2MuZ3JpZERhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93LnNlbGVjdCAmJiByb3cua2FzX3BhYmVyaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQstGL0LHRgNCw0L3QviDQtNC70Y8g0L/QtdGH0LDRgtC4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzLmFkZChyb3cuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8g0LrQvtC90LLQtdGA0YLQsNGG0LjRjyDQsiDQvNCw0YHRgdC40LJcbiAgICAgICAgICAgICAgICAgICAgaWRzID0gQXJyYXkuZnJvbShpZHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnTGVpZHNpbiAnICsgaWRzLmxlbmd0aCArICcgYXJ2ZWlkIHByaW50aW1pc2VrcycsIC8vINGB0YLRgNC+0LrQsCDQuNC30LLQtdGJ0LXQvdC40LlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ29rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAnL211bHRpcGxlX3ByaW50LycgKyBET0NfVFlQRV9JRCArICcvJyArIERvY0NvbnRleHQudXNlckRhdGEudXVpZCArICcvJyArIGlkcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCcnICsgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ01pdHRlIMO8aHRlZ2kgYXJ2ZSBsZWlkbnVtJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRVZFTlRTWzJdLm5hbWU6XG4gICAgICAgICAgICAgICAgICAgIC8vZW1haWxzXG5cbiAgICAgICAgICAgICAgICAgICAgLy8g0LHRg9C00LXRgiDQvtGC0L/RgNCw0LLQu9C10L3QviDQvdCwINC/0L7Rh9GC0YMgINCy0YvQsdGA0LDQvdC90YvQtSDQuCDRgtC+0LvRjNC60L4g0LTQu9GPINGN0Lsu0L/QvtGH0YLRiyDRgdGH0LXRgtCwXG4gICAgICAgICAgICAgICAgICAgIERvYy5ncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuc2VsZWN0ICYmIHJvdy5rYXNfZW1haWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQstGL0LHRgNCw0L3QviDQtNC70Y8g0L/QtdGH0LDRgtC4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzLmFkZChyb3cuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDQutC+0L3QstC10YDRgtCw0YbQuNGPINCyINC80LDRgdGB0LjQslxuICAgICAgICAgICAgICAgICAgICBpZHMgPSBBcnJheS5mcm9tKGlkcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdNaXR0ZSDDvGh0ZWdpIGFydmUgbGVpZG51bScsIC8vINGB0YLRgNC+0LrQsCDQuNC30LLQtdGJ0LXQvdC40LlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ25vdFZhbGlkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQvtGC0L/RgNCw0LLQu9GP0LXQvCDQt9Cw0L/RgNC+0YEg0L3QsCDQstGL0L/QvtC70L3QtdC90LjQtVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBEb2MuZmV0Y2hEYXRhKCdlbWFpbCcsIGlkcykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoeyB3YXJuaW5nOiAnS29ra3Ugc2FhZGV0dWQgYXJ2ZWlkIGVtYWlsZ2E6ICcgKyBkYXRhLnJlc3VsdCwgd2FybmluZ1R5cGU6ICdvaycgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZW1haWwgZXJyb3InLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHsgd2FybmluZzogJ1Rla2tpcyB2aWdhOiAnICsgZGF0YS5lcnJvcl9tZXNzYWdlLCB3YXJuaW5nVHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdlbWFpbCBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoeyB3YXJuaW5nOiAnVGVra2lzIHZpZ2E6ICcgKyBlcnJvciwgd2FybmluZ1R5cGU6ICdlcnJvcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBFVkVOVFNbM10ubmFtZTpcbiAgICAgICAgICAgICAgICAgICAgLy9lLWFydmVkXG5cbiAgICAgICAgICAgICAgICAgICAgLy8g0LHRg9C00LXRgiDQvtGC0L/RgNCw0LLQu9C10L3QviDQvdCwINC/0L7Rh9GC0YMgINCy0YvQsdGA0LDQvdC90YvQtSDQuCDRgtC+0LvRjNC60L4g0LTQu9GPINGN0Lsu0L/QvtGH0YLRiyDRgdGH0LXRgtCwXG4gICAgICAgICAgICAgICAgICAgIERvYy5ncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuc2VsZWN0ICYmIHJvdy5rYXNfZWFydmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0LLRi9Cx0YDQsNC90L4g0LTQu9GPINC/0LXRh9Cw0YLQuFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5hZGQocm93LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vINC60L7QvdCy0LXRgNGC0LDRhtC40Y8g0LIg0LzQsNGB0YHQuNCyXG4gICAgICAgICAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20oaWRzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ01pdHRlIMO8aHRlZ2kgYXJ2ZSBsZWlkbnVtJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC+0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5mZXRjaERhdGEoJ2UtYXJ2ZWQnLCBpZHMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiAncmVzdWx0JyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7IHdhcm5pbmc6ICdLb2trdSBzYWFkZXR1ZCBhcnZlaWQgIDogJyArIGRhdGEucmVzdWx0LCB3YXJuaW5nVHlwZTogJ29rJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JfbWVzc2FnZSA9ICdUZWtraXMgdmlnYScgKyAoZGF0YSAmJiAnZXJyb3JfbWVzc2FnZScgaW4gZGF0YS5lcnJvcl9tZXNzYWdlICYmIGRhdGEuZXJyb3JfbWVzc2FnZSkgPyBkYXRhLmVycm9yX21lc3NhZ2UgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHsgd2FybmluZzogJycgKyBlcnJvcl9tZXNzYWdlLCB3YXJuaW5nVHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yX21lc3NhZ2UgPSAnVGVra2lzIHZpZ2EnICsgZXJyLlR5cGVFcnJvciA/IGVyci5UeXBlRXJyb3IgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoeyB3YXJuaW5nOiAnJyArIGVycm9yX21lc3NhZ2UsIHdhcm5pbmdUeXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVWRU5UU1s0XS5uYW1lOlxuICAgICAgICAgICAgICAgICAgICAvL2UtYXJ2ZWQgKFhNTClcblxuICAgICAgICAgICAgICAgICAgICAvLyDQsdGD0LTQtdGCINC+0YLQv9GA0LDQstC70LXQvdC+INC90LAg0L/QvtGH0YLRgyAg0LLRi9Cx0YDQsNC90L3Ri9C1INC4INGC0L7Qu9GM0LrQviDQtNC70Y8g0Y3Quy7Qv9C+0YfRgtGLINGB0YfQtdGC0LBcbiAgICAgICAgICAgICAgICAgICAgRG9jLmdyaWREYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdy5zZWxlY3QgJiYgcm93Lmthc19lYXJ2ZWQgJiYgTnVtYmVyKHJvdy5zdW1tYSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0LLRi9Cx0YDQsNC90L4g0LTQu9GPINC/0LXRh9Cw0YLQuFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5hZGQocm93LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vINC60L7QvdCy0LXRgNGC0LDRhtC40Y8g0LIg0LzQsNGB0YHQuNCyXG4gICAgICAgICAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20oaWRzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ01pdHRlIMO8aHRlZ2kgYXJ2ZSBsZWlkbnVtJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC+0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1XG4gICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdMZWlkc2luICcgKyBpZHMubGVuZ3RoICsgJyBhcnZlaWQnLCAvLyDRgdGC0YDQvtC60LAg0LjQt9Cy0LXRidC10L3QuNC5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdvaydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3VybCA9ICcvZS1hcnZlZC8nICsgRG9jQ29udGV4dC51c2VyRGF0YS51dWlkICsgJy8nICsgaWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJycgKyBfdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRVZFTlRTWzVdLm5hbWU6XG4gICAgICAgICAgICAgICAgICAgIC8vZS1hcnZlZCBTRUIgKFhNTClcblxuICAgICAgICAgICAgICAgICAgICAvLyDQsdGD0LTQtdGCINGB0YTQvtGA0LzQuNGA0L7QstCw0L0g0YTQsNC50Lsg0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0LIg0LHQsNC90Log0KHQldCRXG4gICAgICAgICAgICAgICAgICAgIERvYy5ncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cua2FzX2VhcnZlZCAmJiByb3cucGFuayAmJiByb3cucGFuayA9PSAnU0VCJyAmJiByb3cuc2VsZWN0ICYmIE51bWJlcihyb3cuc3VtbWEpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINCy0YvQsdGA0LDQvdC+INC00LvRjyDQv9C10YfQsNGC0LhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHMuYWRkKHJvdy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyDQutC+0L3QstC10YDRgtCw0YbQuNGPINCyINC80LDRgdGB0LjQslxuICAgICAgICAgICAgICAgICAgICBpZHMgPSBBcnJheS5mcm9tKGlkcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdNaXR0ZSDDvGh0ZWdpIGFydmUgbGVpZG51bScsIC8vINGB0YLRgNC+0LrQsCDQuNC30LLQtdGJ0LXQvdC40LlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ25vdFZhbGlkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQvtGC0L/RgNCw0LLQu9GP0LXQvCDQt9Cw0L/RgNC+0YEg0L3QsCDQstGL0L/QvtC70L3QtdC90LjQtVxuICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnTGVpZHNpbiAnICsgaWRzLmxlbmd0aCArICcgYXJ2ZWlkJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnb2snXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF91cmwyID0gJy9lLWFydmVkL3NlYi8nICsgRG9jQ29udGV4dC51c2VyRGF0YS51dWlkICsgJy8nICsgaWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJycgKyBfdXJsMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFVkVOVFNbNl0ubmFtZTpcbiAgICAgICAgICAgICAgICAgICAgLy9lLWFydmVkIFN3ZWQgKFhNTClcblxuICAgICAgICAgICAgICAgICAgICAvLyDQsdGD0LTQtdGCINGB0YTQvtGA0LzQuNGA0L7QstCw0L0g0YTQsNC50Lsg0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0LIg0LHQsNC90LogU1dFRFxuICAgICAgICAgICAgICAgICAgICBEb2MuZ3JpZERhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93Lmthc19lYXJ2ZWQgJiYgcm93LnNlbGVjdCAmJiByb3cucGFuayAmJiByb3cucGFuayA9PSAnU1dFRCcgJiYgTnVtYmVyKHJvdy5zdW1tYSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJiYgcm93Lmthc19zd2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0LLRi9Cx0YDQsNC90L4g0LTQu9GPINC/0LXRh9Cw0YLQuFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5hZGQocm93LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vINC60L7QvdCy0LXRgNGC0LDRhtC40Y8g0LIg0LzQsNGB0YHQuNCyXG4gICAgICAgICAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20oaWRzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ01pdHRlIMO8aHRlZ2kgYXJ2ZSBsZWlkbnVtJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINC+0YLQv9GA0LDQstC70Y/QtdC8INC30LDQv9GA0L7RgSDQvdCwINCy0YvQv9C+0LvQvdC10L3QuNC1XG4gICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdMZWlkc2luICcgKyBpZHMubGVuZ3RoICsgJyBhcnZlaWQnLCAvLyDRgdGC0YDQvtC60LAg0LjQt9Cy0LXRidC10L3QuNC5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdvaydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3VybDMgPSAnL2UtYXJ2ZWQvc3dlZC8nICsgRG9jQ29udGV4dC51c2VyRGF0YS51dWlkICsgJy8nICsgaWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJycgKyBfdXJsMyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFVkVOVFNbN10ubmFtZTpcbiAgICAgICAgICAgICAgICAgICAgLy/RgdC/0LjRgdCw0L3QuNC1INC80LDQu9C+0LLQtdGA0L7Rj9GC0L3Ri9GFXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIC8vINCx0YPQtNC10YIg0YHRhNC+0YDQvNC40YDQvtCy0LDQvSDRhNCw0LnQuyDQtNC70Y8g0L7RgtC/0YDQsNCy0LrQuCDQsiDQsdCw0L3QuiBTV0VEXG4gICAgICAgICAgICAgICAgICAgIERvYy5ncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cuZWJhdG9lbmFvbGlzZWQgPT0gJ0phaCcgJiYgTnVtYmVyKHJvdy5qYWFrKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAmJiByb3cua2FzX3N3ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQstGL0LHRgNCw0L3QviDQtNC70Y8g0L/QtdGH0LDRgtC4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzLmFkZChyb3cuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8g0LrQvtC90LLQtdGA0YLQsNGG0LjRjyDQsiDQvNCw0YHRgdC40LJcbiAgICAgICAgICAgICAgICAgICAgaWRzID0gQXJyYXkuZnJvbShpZHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnTWl0dGUgw7xodGVnaSBhcnZlIGxlaWRudW0nLCAvLyDRgdGC0YDQvtC60LAg0LjQt9Cy0LXRidC10L3QuNC5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdub3RWYWxpZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgRG9jLmZldGNoRGF0YSgnY2FsYy9lYmF0b2VuYW9saXNlZCcsIHsgZG9jczogaWRzLCBzZWlzdWdhOiBzZWlzdWdhIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICd0YXNrIHNhYWRldHVkIHRcXHhFNGl0bWlzZWxlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHsgd2FybmluZzogJycgKyBtZXNzYWdlLCB3YXJuaW5nVHlwZTogJ29rJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHVsZW11c2VkID0gZGF0YS5kYXRhLnJlc3VsdC50dWxlbXVzZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINC+0YLQutGA0YvQstCw0LXQvCDQvtGC0YfQtdGCXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7IGlzUmVwb3J0OiB0cnVlLCB0eHRSZXBvcnQ6IHR1bGVtdXNlZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvcl9tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoeyB3YXJuaW5nOiAnVGVra2lzIHZpZ2E6ICcgKyBkYXRhLmVycm9yX21lc3NhZ2UsIHdhcm5pbmdUeXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnS29ra3UgYXJ2ZXN0YXR1ZCA6ICcgKyBkYXRhLnJlc3VsdCArICcsICcgKyBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnbm90VmFsaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRG9jdW1lbnRzO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb2N1bWVudHM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2Fydi9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBzdHlsZXMgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXItc3R5bGVzJyksXG4gICAgQnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLmpzeCcpLFxuICAgIElDT04gPSAnc2V0dGluZ3MnO1xuXG52YXIgQnV0dG9uU2V0dGluZ3MgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQnV0dG9uU2V0dGluZ3MsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b25TZXR0aW5ncyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uU2V0dGluZ3MpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCdXR0b25TZXR0aW5ncy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvblNldHRpbmdzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uU2V0dGluZ3MsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2sodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuU2V0dGluZ3MnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW0lDT05dIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvblNldHRpbmdzO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQnV0dG9uU2V0dGluZ3MuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICBzaG93OiB0cnVlLFxuICAgIHZhbHVlOiAnU2V0dGluZ3MnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblNldHRpbmdzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXNldHRpbmdzL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi9tb2RhbHBhZ2UvbW9kYWxQYWdlLmpzeCcpLFxuICAgIElDT04gPSAnbWFpbCc7XG5cbnZhciBCdXR0b25SZWdpc3RlckVtYWlsID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEJ1dHRvblJlZ2lzdGVyRW1haWwsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b25SZWdpc3RlckVtYWlsKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdXR0b25SZWdpc3RlckVtYWlsKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQnV0dG9uUmVnaXN0ZXJFbWFpbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJ1dHRvblJlZ2lzdGVyRW1haWwpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzaG93TW9kYWw6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm1vZGFsUGFnZUNsaWNrID0gX3RoaXMubW9kYWxQYWdlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC60LvQuNC6LCDQvtGC0LrRgNC+0LXRgiDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L5cclxuICAgICAqIEBwYXJhbSBlXHJcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblJlZ2lzdGVyRW1haWwsIFt7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93TW9kYWw6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHBocmFzZSA9IHRoaXMucHJvcHMucGhyYXNlID8gdGhpcy5wcm9wcy5waHJhc2UgOiAnS2FzIHNhYWRhIEUtQXJ2ZSA/JztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkVtYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5zaG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlQnRuQ2xpY2s6IHRoaXMubW9kYWxQYWdlQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VOYW1lOiAnJyArIHRoaXMucHJvcHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnN0YXRlLnNob3dNb2RhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0czogWydidG5PaycsICdidG5DYW5jZWwnXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwaHJhc2VcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC90LAg0LrQvdC+0L/QutC4INC80L7QttCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXHJcbiAgICAgICAgICogQHBhcmFtIGJ0bkV2ZW50XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUNsaWNrKGJ0bkV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoYnRuRXZlbnQgPT09ICdPaycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2xpY2sodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd01vZGFsOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCdXR0b25SZWdpc3RlckVtYWlsO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuLypcclxuQnV0dG9uUmVnaXN0ZXJQcmludC5wcm9wVHlwZXMgPSB7XHJcbiAgICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXHJcbn1cclxuKi9cblxuQnV0dG9uUmVnaXN0ZXJFbWFpbC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWUsXG4gICAgdmFsdWU6ICdFbWFpbCdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uUmVnaXN0ZXJFbWFpbDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1lYXJ2ZS9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2dyaWQ6e21haW5UYWJsZTp7d2lkdGg6JzEwMCUnLHRkOntib3JkZXI6JzFweCBzb2xpZCBsaWdodEdyZXknLGRpc3BsYXk6J3RhYmxlLWNlbGwnLHBhZGRpbmdMZWZ0Oic1cHgnfX0saGVhZGVyVGFibGU6e3dpZHRoOicxMDAlJ30sZ3JpZENvbnRhaW5lcjp7d2lkdGg6JzEwMCUnfX0sZG9jOntoZWlnaHQ6JzEwMCUnfSx0b3RhbDp7d2lkdGg6J2F1dG8nfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2Fydi9hcnYtcmVnaXN0ZXItc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgRG9jdW1lbnRUZW1wbGF0ZSA9IHJlcXVpcmUoJy4uLy4uL2RvY3VtZW50VGVtcGxhdGUvaW5kZXguanN4JyksXG4gICAgSW5wdXRUZXh0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC10ZXh0L2lucHV0LXRleHQuanN4JyksXG4gICAgSW5wdXREYXRlID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC1kYXRlL2lucHV0LWRhdGUuanN4JyksXG4gICAgSW5wdXROdW1iZXIgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LW51bWJlci9pbnB1dC1udW1iZXIuanN4JyksXG4gICAgU2VsZWN0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9zZWxlY3Qvc2VsZWN0LmpzeCcpLFxuICAgIFNlbGVjdERhdGEgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3NlbGVjdC1kYXRhL3NlbGVjdC1kYXRhLmpzeCcpLFxuICAgIFRleHRBcmVhID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCcpLFxuICAgIERhdGFHcmlkID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9kYXRhLWdyaWQvZGF0YS1ncmlkLmpzeCcpLFxuICAgIHJlbGF0ZWREb2N1bWVudHMgPSByZXF1aXJlKCcuLi8uLi8uLi9taXhpbi9yZWxhdGVkRG9jdW1lbnRzLmpzeCcpLFxuICAgIE1vZGFsUGFnZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFsUGFnZS5qc3gnKSxcbiAgICBCdXR0b25FZGl0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWVkaXQvYnV0dG9uLXJlZ2lzdGVyLWVkaXQuanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9hcnZlLnN0eWxlcycpO1xudmFyIFJvdW5kID0gcmVxdWlyZSgnLi8uLi8uLi8uLi8uLi9saWJzL3JvdW5kX3RvXzInKTtcbnZhciBMb2FkaW5nID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb21wb25lbnRzL2xvYWRpbmcvaW5kZXguanN4Jyk7XG5cbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9kb2MtY29udGV4dCcpO1xudmFyIExJQl9PQkpTID0gcmVxdWlyZSgnLi8uLi8uLi8uLi8uLi9jb25maWcvY29uc3RhbnRzJykuQVJWLkxJQl9PQkpTO1xuXG52YXIgQXJ2ZSA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhBcnZlLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBBcnZlKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcnZlKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQXJ2ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFydmUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBsb2FkZWREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgIG1vZHVsZTogcHJvcHMubW9kdWxlID8gcHJvcHMubW9kdWxlIDogRG9jQ29udGV4dC5tb2R1bGUsXG4gICAgICAgICAgICBsYXBzSWQ6IG51bGwsXG4gICAgICAgICAgICBkb2NJZDogcHJvcHMuZG9jSWQgPyBwcm9wcy5kb2NJZCA6IE51bWJlcihwcm9wcy5tYXRjaC5wYXJhbXMuZG9jSWQpXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMuY3JlYXRlR3JpZFJvdyA9IF90aGlzLmNyZWF0ZUdyaWRSb3cuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnJlY2FsY0RvY1N1bW1hID0gX3RoaXMucmVjYWxjRG9jU3VtbWEuYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBfdGhpcy5yZW5kZXJlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ3JpZFZhbGlkYXRlRmllbGRzID0gX3RoaXMuZ3JpZFZhbGlkYXRlRmllbGRzLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5idG5FZGl0QXN1dHVzQ2xpY2sgPSBfdGhpcy5idG5FZGl0QXN1dHVzQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmJ0bkVkaXRMYXBzQ2xpY2sgPSBfdGhpcy5idG5FZGl0TGFwc0NsaWNrLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5wYWdlcyA9IFt7IHBhZ2VOYW1lOiAnQXJ2ZScsIGRvY1R5cGVJZDogJ0FSVicgfV07XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhBcnZlLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmhpc3RvcnkgJiYgdGhpcy5wcm9wcy5oaXN0b3J5LmxvY2F0aW9uLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxhcHNJZCA9IHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbi5zdGF0ZS5sYXBzSWQ7XG4gICAgICAgICAgICAgICAgdmFyIF9tb2R1bGUgPSB0aGlzLnByb3BzLmhpc3RvcnkubG9jYXRpb24uc3RhdGUubW9kdWxlID8gdGhpcy5wcm9wcy5oaXN0b3J5LmxvY2F0aW9uLnN0YXRlLm1vZHVsZSA6ICdsYXBzZWQnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsYXBzSWQ6IGxhcHNJZCwgbW9kdWxlOiBfbW9kdWxlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9jdW1lbnRUZW1wbGF0ZSwgeyBkb2NJZDogdGhpcy5zdGF0ZS5kb2NJZCxcbiAgICAgICAgICAgICAgICByZWY6ICdkb2N1bWVudCcsXG4gICAgICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5LFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogJ0FSVicsXG4gICAgICAgICAgICAgICAgbW9kdWxlOiB0aGlzLnN0YXRlLm1vZHVsZSxcbiAgICAgICAgICAgICAgICBpbml0RGF0YTogdGhpcy5wcm9wcy5pbml0RGF0YSA/IHRoaXMucHJvcHMuaW5pdERhdGEgOiB7fSxcbiAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbGliczogTElCX09CSlMsXG4gICAgICAgICAgICAgICAgcGFnZXM6IHRoaXMucGFnZXMsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXI6IHRoaXMucmVuZGVyZXIsXG4gICAgICAgICAgICAgICAgY3JlYXRlR3JpZFJvdzogdGhpcy5jcmVhdGVHcmlkUm93LFxuICAgICAgICAgICAgICAgIGdyaWRWYWxpZGF0b3I6IHRoaXMuZ3JpZFZhbGlkYXRlRmllbGRzLFxuICAgICAgICAgICAgICAgIHJlY2FsY0RvYzogdGhpcy5yZWNhbGNEb2NTdW1tYSxcbiAgICAgICAgICAgICAgICBmb2N1c0VsZW1lbnQ6ICdpbnB1dC1udW1iZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAq0JLQtdGA0L3QtdGCINC60LDRgdGC0L7QvNC90YvQtSDQutC+0LzQv9C+0L3QtdC90YLRiyDQtNC+0LrRg9C80LXQvdGC0LBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyZXIoc2VsZikge1xuICAgICAgICAgICAgaWYgKCFzZWxmIHx8ICFzZWxmLmRvY0RhdGEgfHwgIXNlbGYuZG9jRGF0YS5rcHYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2MgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMb2FkaW5nLCB7IGxhYmVsOiAnTGFhZGltaW5lLi4uJyB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpc0VkaXRNb2RlID0gc2VsZi5zdGF0ZS5lZGl0ZWQsXG4gICAgICAgICAgICAgICAgZ3JpZERhdGEgPSBzZWxmLmRvY0RhdGEuZ3JpZERhdGEsXG4gICAgICAgICAgICAgICAgZ3JpZENvbHVtbnMgPSBzZWxmLmRvY0RhdGEuZ3JpZENvbmZpZyxcbiAgICAgICAgICAgICAgICBncmlkQXJ2VGFzdURhdGEgPSBzZWxmLmRvY0RhdGEucXVlcnlBcnZUYXN1LFxuICAgICAgICAgICAgICAgIGdyaWRUYXN1ZENvbHVtbnMgPSBzZWxmLmRvY0RhdGEuZ3JpZFRhc3VkQ29uZmlnO1xuXG4gICAgICAgICAgICAvLyDRhNC+0YDQvNC40YDRg9C10Lwg0LfQsNCy0LjRgdC40LzQvtGB0YLQuFxuICAgICAgICAgICAgaWYgKHNlbGYuZG9jRGF0YS5yZWxhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZWxhdGVkRG9jdW1lbnRzKHNlbGYpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDQtdGB0LvQuCDQt9Cw0LTQsNC9INC/0LDRgNCw0LzQtdGC0YAgbGFwc2lkINGC0L4g0YHQvtGF0YDQsNC90LjQvCDQtdCz0L4g0LIg0LTQvtC60YPQvNC10L3RgtC1XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5sYXBzSWQgJiYgIXNlbGYuZG9jRGF0YS5sYXBzaWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRvY0RhdGEubGFwc2lkID0gdGhpcy5zdGF0ZS5sYXBzSWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2MgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgcmVmOiAnaW5wdXQtbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5udW1iZXIgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdLdXVwXFx4RTRldiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5rcHYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWtwdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdUXFx4RTRodGFlZyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGFodGFlZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEudGFodGFlZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtdGFodGFlZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0tvbnRlZXJpbWluZTonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZG9rbGF1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ2Rva1Byb3BzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydkb2tQcm9wcyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuZG9rbGF1c2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2Rva3Byb3AtZG9rbGF1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdLb250ZWVyaW1pbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyByZWY6ICdpbnB1dC1sYXVzZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMYXVzZW5kIG5yLjonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGF1c19ucicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcoc2VsZi5kb2NEYXRhLmxhdXNfbnIpIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdERhdGEsIHsgdGl0bGU6ICdNYWtzamE6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliTmFtZTogJ2FzdXR1c2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsRmllbGRzOiBbJ25pbWV0dXMnLCAncmVna29vZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5hc3V0dXNpZCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlbGYuZG9jRGF0YS5hc3V0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kVG9HcmlkOiAnbmltZXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kVG9EYXRhOiAnYXN1dHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LWFzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0TW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uRWRpdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5FZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdNdXVkYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYnRuRWRpdEFzdXR1c0NsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiAhaXNFZGl0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5idG5FZGl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdERhdGEsIHsgdGl0bGU6ICdMYXBzZSBuaW1pOicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsYXBzaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJOYW1lOiAnbGFwcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEZpZWxkczogWyduaW1pJywgJ2lzaWt1a29vZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5sYXBzaWQgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzZWxmLmRvY0RhdGEubGFwc2VfbmltaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRUb0dyaWQ6ICduaW1pJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRUb0RhdGE6ICduaW1pJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LWxhcHNpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhOiBzZWxmLnVzZXJEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b25FZGl0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkVkaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ011dWRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5idG5FZGl0TGFwc0NsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiAhaXNFZGl0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5idG5FZGl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ0xpc2EgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpc2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmxpc2EgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWxpc2EnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnVmlpdGVudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmlpdGVucicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEudmlpdGVuciB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtdmlpdGVudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0FydmVsZHVzIGFydmUgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FhX2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ2FhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5hYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydhYSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFN0cmluZyhzZWxmLmRvY0RhdGEuYWEpIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1hYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0TW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRBcmVhLCB7IHRpdGxlOiAnTVxceEU0cmt1c2VkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5tdXVkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0TW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERhdGFHcmlkLCB7IHNvdXJjZTogJ2RldGFpbHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWREYXRhOiBncmlkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29sdW1uczogZ3JpZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IGlzRWRpdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR3JpZFJvdzogdGhpcy5oYW5kbGVHcmlkUm93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUdyaWRCdG5DbGljazogc2VsZi5oYW5kbGVHcmlkQnRuQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuZ3JpZC5oZWFkZXJUYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdkYXRhLWdyaWQnIH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdTdW1tYSAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtc3VtbWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIoc2VsZi5kb2NEYXRhLnN1bW1hKSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuc3VtbWFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwgeyB0aXRsZTogJ0tcXHhFNGliZW1ha3MgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna2JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1rYm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuc3VtbWEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihzZWxmLmRvY0RhdGEua2JtKSB8fCAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdKXFx4RTRcXHhFNGs6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY3VycmVuY3knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdqYWFrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1qYWFrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLnN1bW1hLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIoc2VsZi5kb2NEYXRhLmphYWspIHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhdGUuZ3JpZFJvd0VkaXQgPyB0aGlzLmNyZWF0ZUdyaWRSb3coc2VsZikgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdsYWJlbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVGFzdWQnXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0YUdyaWQsIHsgc291cmNlOiAndGFzdWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWREYXRhOiBncmlkQXJ2VGFzdURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZENvbHVtbnM6IGdyaWRUYXN1ZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUdyaWRCdG5DbGljazogc2VsZi5oYW5kbGVHcmlkQnRuQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jVHlwZUlkOiAnc21rJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmdyaWQuaGVhZGVyVGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGFzdWQtZGF0YS1ncmlkJyB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCh0L7Qt9C00LDRgdGCINC60L7QvNC/0L7QvdC10YIg0YHRgtGA0L7QutC4INCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmlkUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUdyaWRSb3coc2VsZikge1xuXG4gICAgICAgICAgICB2YXIgcm93ID0gc2VsZi5ncmlkUm93RGF0YSA/IHNlbGYuZ3JpZFJvd0RhdGEgOiB7fSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZU1lc3NhZ2UgPSAnJyxcbiAgICAgICAgICAgICAgICAvLyBzZWxmLnN0YXRlLndhcm5pbmdcbiAgICAgICAgICAgIGJ1dHRvbk9rUmVhZE9ubHkgPSB2YWxpZGF0ZU1lc3NhZ2UubGVuZ3RoID4gMCB8fCAhc2VsZi5zdGF0ZS5jaGVja2VkLFxuICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0cyA9IFsnYnRuT2snLCAnYnRuQ2FuY2VsJ107XG5cbiAgICAgICAgICAgIGlmIChidXR0b25Pa1JlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgLy8g0YPQsdC10YDQtdC8INC60L3QvtC/0LrRgyDQntC6XG4gICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzLnNwbGljZSgwLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFyb3cpIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCBudWxsKTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICcubW9kYWxQYWdlJyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBtb2RhbE9iamVjdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtZ3JpZC1yb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiBzZWxmLm1vZGFsUGFnZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlTmFtZTogJ1JlYSBsaXNhbWluZSAvIHBhcmFuZGFtaW5lJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2dyaWQtcm93LWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhdGUuZ3JpZFdhcm5pbmcubGVuZ3RoID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXRlLmdyaWRXYXJuaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1xceERDa3N1czonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3lrc3VzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICdsYXBzZV9ncnVwcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2xhcHNlX2dydXBwJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93Lnlrc3VzIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiByb3cueWtzeXMgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3QtbGFwc2VfZ3J1cHAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnVGVlbnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdub21pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAnbm9tZW5jbGF0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1snbm9tZW5jbGF0dXJlJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93Lm5vbWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAnaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnbm9taWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUZWVudXNlIGtvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnS29ndXMgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb2d1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHJvdy5rb2d1cyA/IHJvdy5rb2d1cyA6IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZERhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAna29ndXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybjogJ1swLTldezEwfScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93SW5wdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwgeyB0aXRsZTogJ1Nvb2R1c3R1cyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Nvb2R1c3R1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHJvdy5zb29kdXN0dXMgPyByb3cuc29vZHVzdHVzIDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdoaW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46ICdbMC05XXsxMH0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0lucHV0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnSGluZCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2hpbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihyb3cuaGluZCA/IHJvdy5oaW5kIDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdoaW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46ICdbMC05XXsxMH0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0lucHV0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdLYm0tdGE6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna2JtdGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihyb3cuc3VtbWEgPyByb3cuc3VtbWEgLSByb3cua2JtIDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2tibXRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46ICdbMC05XXsxMH0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwgeyB0aXRsZTogJ0tibTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrYm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihyb3cua2JtID8gcm93LmtibSA6IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdrYm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybjogJ1swLTldezEwfScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJsdXI6IHNlbGYuaGFuZGxlR3JpZFJvd0lucHV0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdTdW1tYTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHJvdy5zdW1tYSA/IHJvdy5zdW1tYSA6IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiAnWzAtOV17MTB9JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dJbnB1dCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0tvcnIuIGtvbnRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2tvbnRvZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5rb250byB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2tvbnRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdUdW5udXM6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0dW5udXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWyd0dW5udXMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3cudHVubnVzIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1RlZ2V2dXM6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb29kMScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ3RlZ2V2J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93Lmtvb2QxIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAna29vZDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1Byb2plY3Q6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwcm9qJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sncHJvamVjdCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5wcm9qIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAncHJvamVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdBbGxpa2FzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb29kMicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2FsbGlrYXMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3cua29vZDIgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdrb29kMicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdFZWxhcnZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb29kNScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2FydGlra2VsJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93Lmtvb2Q1IHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAna29vZDUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdNXFx4RTRya3VzZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2dyaWRyb3ctdGV4dGFyZWEtbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3cubXV1ZCB8fCAnJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQstCw0LvQuNC00LDRgtC+0YAg0LTQu9GPINGB0YLRgNC+0LrQuCDQs9GA0LjQtNCwXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ3JpZFZhbGlkYXRlRmllbGRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdyaWRWYWxpZGF0ZUZpZWxkcygpIHtcbiAgICAgICAgICAgIHZhciB3YXJuaW5nID0gJyc7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5yZWZzWydkb2N1bWVudCddO1xuICAgICAgICAgICAgaWYgKGRvYyAmJiBkb2MuZ3JpZFJvd0RhdGEpIHtcblxuICAgICAgICAgICAgICAgIC8vINGC0L7Qu9GM0LrQviDQv9C+0YHQu9C1INC/0YDQvtCy0LXRgNC60Lgg0YTQvtGA0LzRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXG4gICAgICAgICAgICAgICAgaWYgKGRvYy5ncmlkUm93RGF0YSAmJiAhZG9jLmdyaWRSb3dEYXRhWydub21pZCddKSB3YXJuaW5nID0gd2FybmluZyArICcg0JrQvtC0INC+0L/QtdGA0LDRhtC40LgnO1xuICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydrb2d1cyddKSB3YXJuaW5nID0gd2FybmluZyArICcg0JrQvtC70LjRh9C10YHRgtCy0L4nO1xuICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydzdW1tYSddKSB3YXJuaW5nID0gd2FybmluZyArICcg0KHRg9C80LzQsCc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY1Jvd1N1bW0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY0RvY1N1bW1hKCdzdW1tYScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdhcm5pbmc7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9C10YDQtdGA0LDRgdGH0LXRgiDRgdGD0LzQvNGLINGB0YLRgNC+0LrQuCDQuCDRgNCw0YHRh9C10YIg0L3QsNC70L7Qs9CwXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2FsY1Jvd1N1bW0nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjYWxjUm93U3VtbSgpIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J107XG5cbiAgICAgICAgICAgIGlmICghT2JqZWN0LmtleXMoZG9jLmdyaWRSb3dEYXRhKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL9C/0L7QtNGB0YLQsNCy0LjQvCDQvdCw0LjQvNC10L3QvtCy0LDQvdC40LUg0YPRgdC70L7Qs9GDXG5cbiAgICAgICAgICAgIHZhciB2YXQgPSAwO1xuICAgICAgICAgICAgdmFyIG5vbUhpbmQgPSAwO1xuICAgICAgICAgICAgaWYgKGRvYy5ncmlkUm93RGF0YVsnbm9taWQnXSkge1xuICAgICAgICAgICAgICAgIHZhciBub21EYXRhTmFtZSA9IGRvYy5saWJzWydub21lbmNsYXR1cmUnXS5maW5kKGZ1bmN0aW9uIChsaWIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihsaWIuaWQpID09PSBOdW1iZXIoZG9jLmdyaWRSb3dEYXRhWydub21pZCddKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChub21EYXRhTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2hpbmQnXSA9IG5vbURhdGFOYW1lLmhpbmQgJiYgIWRvYy5ncmlkUm93RGF0YVsnaGluZCddID8gbm9tRGF0YU5hbWUuaGluZCA6IGRvYy5ncmlkUm93RGF0YVsnaGluZCddO1xuICAgICAgICAgICAgICAgICAgICB2YXQgPSBub21EYXRhTmFtZS52YXQgPyBOdW1iZXIobm9tRGF0YU5hbWUudmF0KSAvIDEwMCA6IDA7XG4gICAgICAgICAgICAgICAgICAgIG5vbUhpbmQgPSBub21EYXRhTmFtZS5oaW5kO1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tvb2QnXSA9IG5vbURhdGFOYW1lLmtvb2QgPyBub21EYXRhTmFtZS5rb29kIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWyduaW1ldHVzJ10gPSBub21EYXRhTmFtZS5uaW1ldHVzID8gbm9tRGF0YU5hbWUubmltZXR1cyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsndWhpayddID0gbm9tRGF0YU5hbWUudWhpayA/IG5vbURhdGFOYW1lLnVoaWsgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tvbnRvJ10gPSBub21EYXRhTmFtZS5rb250byA/IG5vbURhdGFOYW1lLmtvbnRvIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWyd0dW5udXMnXSA9IG5vbURhdGFOYW1lLnR1bm51cyA/IG5vbURhdGFOYW1lLnR1bm51cyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsncHJvaiddID0gbm9tRGF0YU5hbWUucHJvaiA/IG5vbURhdGFOYW1lLnByb2ogOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tvb2QxJ10gPSBub21EYXRhTmFtZS50ZWdldiA/IG5vbURhdGFOYW1lLnRlZ2V2IDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWydrb29kMiddID0gbm9tRGF0YU5hbWUuYWxsaWthcyA/IG5vbURhdGFOYW1lLmFsbGlrYXMgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tvb2Q1J10gPSBub21EYXRhTmFtZS5hcnRpa2tlbCA/IG5vbURhdGFOYW1lLmFydGlra2VsIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsna29ndXMnXSA9IE51bWJlcihkb2MuZ3JpZFJvd0RhdGEua29ndXMpO1xuICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWydzb29kdXN0dXMnXSA9IGRvYy5ncmlkUm93RGF0YVsnc29vZHVzdHVzJ10gPyBOdW1iZXIoZG9jLmdyaWRSb3dEYXRhLnNvb2R1c3R1cykgOiAwO1xuICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWydoaW5kJ10gPSBub21IaW5kICYmIGRvYy5ncmlkUm93RGF0YVsnc29vZHVzdHVzJ10gPyBOdW1iZXIobm9tSGluZCkgLSBkb2MuZ3JpZFJvd0RhdGFbJ3Nvb2R1c3R1cyddIDogTnVtYmVyKGRvYy5ncmlkUm93RGF0YS5oaW5kKTtcbiAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsna2JtdGEnXSA9IFJvdW5kKE51bWJlcihkb2MuZ3JpZFJvd0RhdGFbJ2tvZ3VzJ10pICogTnVtYmVyKGRvYy5ncmlkUm93RGF0YVsnaGluZCddKSk7XG4gICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tibSddID0gUm91bmQoTnVtYmVyKGRvYy5ncmlkUm93RGF0YVsna2JtdGEnXSkgKiB2YXQpO1xuICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWydzdW1tYSddID0gUm91bmQoTnVtYmVyKGRvYy5ncmlkUm93RGF0YVsna2JtdGEnXSkgKyBOdW1iZXIoZG9jLmdyaWRSb3dEYXRhWydrYm0nXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0J/QtdGA0LXRgNCw0YHRh9C10YIg0LjRgtC+0LPQvtCy0YvRhSDRgdGD0LzQvCDQtNC+0LrRg9C80LXQvdGC0LBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVjYWxjRG9jU3VtbWEnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjYWxjRG9jU3VtbWEoKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5yZWZzWydkb2N1bWVudCddO1xuXG4gICAgICAgICAgICBkb2MuZG9jRGF0YVsnc3VtbWEnXSA9IDA7XG4gICAgICAgICAgICBkb2MuZG9jRGF0YVsna2JtJ10gPSAwO1xuICAgICAgICAgICAgZG9jLmRvY0RhdGEuZ3JpZERhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgZG9jLmRvY0RhdGFbJ3N1bW1hJ10gPSBOdW1iZXIoZG9jLmRvY0RhdGFbJ3N1bW1hJ10pICsgTnVtYmVyKHJvd1snc3VtbWEnXSk7XG4gICAgICAgICAgICAgICAgZG9jLmRvY0RhdGFbJ2tibSddID0gTnVtYmVyKGRvYy5kb2NEYXRhWydrYm0nXSkgKyBOdW1iZXIocm93WydrYm0nXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvYy5kb2NEYXRhWydzdW1tYSddID0gUm91bmQoZG9jLmRvY0RhdGFbJ3N1bW1hJ10pO1xuICAgICAgICAgICAgZG9jLmRvY0RhdGFbJ2tibSddID0gUm91bmQoZG9jLmRvY0RhdGFbJ2tibSddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC60LvQuNGB0LrQsCDQvdCwINC60L3QvtC/0LrQtSDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC60L7QvdGC0YAt0LDQs9C10L3RgtCwXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkVkaXRBc3V0dXNDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidG5FZGl0QXN1dHVzQ2xpY2soKSB7XG4gICAgICAgICAgICB2YXIgZG9jQXN1dHVzSWQgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J10uZG9jRGF0YS5hc3V0dXNpZDtcblxuICAgICAgICAgICAgLy8g0L7RgdGD0YnQtdGB0YLQstC40YIg0L/QtdGA0LXRhdC+0LQg0L3QsCDQutCw0YDRgtC+0YfQutGDINC60L7QvdGC0YAt0LDQs9C10L3RgtCwXG4gICAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnLycgKyB0aGlzLnN0YXRlLm1vZHVsZSArICcvYXN1dHVzZWQvJyArIGRvY0FzdXR1c0lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0L/QviDQutC70LjQutGDINC60L3QvtC/0LrQuCDQoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INGA0LXQsdC10L3QutCwXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2J0bkVkaXRMYXBzQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnRuRWRpdExhcHNDbGljaygpIHtcbiAgICAgICAgICAgIHZhciBkb2NMYXBzSWQgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J10uZG9jRGF0YS5sYXBzaWQ7XG4gICAgICAgICAgICBpZiAoZG9jTGFwc0lkKSB7XG4gICAgICAgICAgICAgICAgLy8g0L7RgdGD0YnQtdGB0YLQstC40YIg0L/QtdGA0LXRhdC+0LQg0L3QsCDQutCw0YDRgtC+0YfQutGDINC60L7QvdGC0YAt0LDQs9C10L3RgtCwXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nICsgdGhpcy5zdGF0ZS5tb2R1bGUgKyAnL2xhcHMvJyArIGRvY0xhcHNJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQXJ2ZTtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbkFydmUucHJvcFR5cGVzID0ge1xuICAgIGRvY0lkOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGluaXREYXRhOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHVzZXJEYXRhOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5BcnZlLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBwYXJhbXM6IHsgZG9jSWQ6IDAgfSxcbiAgICBpbml0RGF0YToge30sXG4gICAgdXNlckRhdGE6IHt9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFydmU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2Fydi9kb2N1bWVudC9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2RvY1Jvdzp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjoncm93Jy8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJsdWUnXHJcbiovfSxkb2NDb2x1bW46e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J2NvbHVtbicsLypcclxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgeWVsbG93JyxcclxuKi93aWR0aDonNTAlJ30sZG9jOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLypcclxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYnJvd24nXHJcbiovfSxzdW1tYTp7d2lkdGg6J2F1dG8nfSxncmlkOnttYWluVGFibGU6e3dpZHRoOicxMDAlJ30saGVhZGVyVGFibGU6e3dpZHRoOicxMDAlJ30sZ3JpZENvbnRhaW5lcjp7d2lkdGg6JzEwMCUnfX0sZ3JpZFJvdzp7LypcclxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYmxhY2snLFxyXG4qL2JhY2tncm91bmRDb2xvcjond2hpdGUnLHBvc2l0aW9uOidyZWxhdGl2ZScsbWFyZ2luOicxMCUgMzAlIDEwJSAzMCUnLHdpZHRoOidhdXRvJyxvcGFjaXR5OicxJyx0b3A6JzEwMHB4J30sYnRuRWRpdDp7d2lkdGg6J21pbi1jb250ZW50J319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9hcnYvZG9jdW1lbnQvYXJ2ZS5zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCJcInVzZSBzdHJpY3RcIjt2YXIgcm91bmRUb1R3bz1mdW5jdGlvbiByb3VuZFRvVHdvKG51bSl7cmV0dXJuKyhNYXRoLnJvdW5kKG51bStcImUrMlwiKStcImUtMlwiKTt9O21vZHVsZS5leHBvcnRzPXJvdW5kVG9Ud287XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9saWJzL3JvdW5kX3RvXzIuanNcbi8vIG1vZHVsZSBpZCA9IDI3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBEb2N1bWVudFJlZ2lzdGVyID0gcmVxdWlyZSgnLi8uLi9kb2N1bWVudHMvZG9jdW1lbnRzLmpzeCcpO1xudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vc21rLXJlZ2lzdGVyLXN0eWxlcycpO1xudmFyIERPQ19UWVBFX0lEID0gJ1NNSyc7XG52YXIgQnV0dG9uVXBsb2FkID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL3VwbG9hZF9idXR0b24vaW5kZXguanN4Jyk7XG52YXIgQnRuTG9ncyA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uX2xvZ3MvaW5kZXguanN4Jyk7XG52YXIgVG9vbGJhckNvbnRhaW5lciA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy90b29sYmFyLWNvbnRhaW5lci90b29sYmFyLWNvbnRhaW5lci5qc3gnKTtcbnZhciBJbnB1dE51bWJlciA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci5qc3gnKTtcblxudmFyIGdldFN1bSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9nZXRTdW0nKTtcblxudmFyIGNoZWNrUmlnaHRzID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2NoZWNrUmlnaHRzJyk7XG52YXIgRG9jQ29udGV4dCA9IHJlcXVpcmUoJy4vLi4vLi4vZG9jLWNvbnRleHQuanMnKTtcblxudmFyIERvY1JpZ2h0cyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29uZmlnL2RvY19yaWdodHMnKTtcblxuLyoqXHJcbiAqINCa0LvQsNGB0YEg0YDQtdCw0LvQuNC30YPQtdGCINC00L7QutGD0LzQtdC90YIg0L/RgNC40YXQvtC00L3QvtCz0L4g0L/Qu9Cw0YLQtdC20L3QvtCz0L4g0L7RgNC00LXRgNCwLlxyXG4gKi9cblxudmFyIERvY3VtZW50cyA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhEb2N1bWVudHMsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIERvY3VtZW50cyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9jdW1lbnRzKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRG9jdW1lbnRzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRG9jdW1lbnRzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnJlbmRlcmVyID0gX3RoaXMucmVuZGVyZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3VtbWE6IDAsXG4gICAgICAgICAgICByZWFkOiAwLFxuICAgICAgICAgICAgaXNSZXBvcnQ6IGZhbHNlLFxuICAgICAgICAgICAgdHh0UmVwb3J0OiBbXVxuXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRG9jdW1lbnRzLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50UmVnaXN0ZXIsIHsgaW5pdERhdGE6IHRoaXMucHJvcHMuaW5pdERhdGEsXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSA/IHRoaXMucHJvcHMuaGlzdG9yeSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ3JlZ2lzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgZG9jVHlwZUlkOiBET0NfVFlQRV9JRCxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiB0aGlzLnJlbmRlcmVyIH0pLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdSZWFkIGtva2t1OicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZWFkX2tva2t1JyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy50b3RhbCxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtcmVhZCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIodGhpcy5zdGF0ZS5yZWFkKSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnU3VtbWEga29ra3U6JyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hX2tva2t1JyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy50b3RhbCxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtc3VtbWEnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHRoaXMuc3RhdGUuc3VtbWEpLnRvRml4ZWQoMikgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcmVyKHNlbGYpIHtcbiAgICAgICAgICAgIGlmICghc2VsZikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZG9jUmlnaHRzID0gRG9jUmlnaHRzW0RPQ19UWVBFX0lEXSA/IERvY1JpZ2h0c1tET0NfVFlQRV9JRF0gOiBbXTtcbiAgICAgICAgICAgIHZhciB1c2VyUm9sZXMgPSBEb2NDb250ZXh0LnVzZXJEYXRhID8gRG9jQ29udGV4dC51c2VyRGF0YS5yb2xlcyA6IFtdO1xuXG4gICAgICAgICAgICB2YXIgZGVlYmV0ID0gc2VsZi5ncmlkRGF0YSAmJiBzZWxmLmdyaWREYXRhLmxlbmd0aCA/IHNlbGYuZ3JpZERhdGFbMF0uZGVlYmV0X3RvdGFsIDogMDtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzdW1tYTogZGVlYmV0LCByZWFkOiBzZWxmLmdyaWREYXRhLmxlbmd0aCB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgVG9vbGJhckNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAnaW1wb3J0JykgPyBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvblVwbG9hZCwge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5VcGxvYWQnLFxuICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IERPQ19UWVBFX0lELFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZXM6ICcuY3N2LC54bWwnXG4gICAgICAgICAgICAgICAgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuTG9ncywge1xuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5OiBzZWxmLnByb3BzLmhpc3RvcnkgPyBzZWxmLnByb3BzLmhpc3RvcnkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5Mb2dzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdQYW5nYSBWViBsb2dpZCdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC60LDRgdGC0L7QvNC90YvQuSDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQuiDQvdCwINC60L3QvtC/0LrRgyDQuNC80L/QvtGA0YLQsFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcblxuICAgICAgICAgICAgLy/QvtCx0L3QvtCy0LjQvCDQtNCw0L3QvdGL0LVcbiAgICAgICAgICAgIHZhciBEb2MgPSB0aGlzLnJlZnNbJ3JlZ2lzdGVyJ107XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIERvYy5mZXRjaERhdGEoJ3NlbGVjdERvY3MnKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERvY3VtZW50cztcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gRG9jdW1lbnRzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9zbWsvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyNzVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtncmlkOnttYWluVGFibGU6e3dpZHRoOicxMDAlJyx0ZDp7Ym9yZGVyOicxcHggc29saWQgbGlnaHRHcmV5JyxkaXNwbGF5Oid0YWJsZS1jZWxsJyxwYWRkaW5nTGVmdDonNXB4J319LGhlYWRlclRhYmxlOnt3aWR0aDonMTAwJSd9LGdyaWRDb250YWluZXI6e3dpZHRoOicxMDAlJ319LGRvYzp7aGVpZ2h0OicxMDAlJ30sdG90YWw6e3dpZHRoOidhdXRvJ319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9zbWsvc21rLXJlZ2lzdGVyLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjc2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9kb2MtY29udGV4dC5qcycpO1xuXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi4vYnV0dG9uLXJlZ2lzdGVyLXN0eWxlcycpLFxuICAgIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci5qc3gnKSxcbiAgICBJQ09OID0gJ2luZm8nO1xuXG52YXIgQnV0dG9uTG9ncyA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b25Mb2dzLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyDQutC90L7Qv9C60LAg0YHQvtC30LTQsNC90LjRjyDQtNC+0LrRg9C80LXQvdGC0LAg0LIg0YDQtdCz0LjRgdGC0YDQsNGFXG4gICAgZnVuY3Rpb24gQnV0dG9uTG9ncyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9uTG9ncyk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEJ1dHRvbkxvZ3MuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25Mb2dzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlIHx8ICdMb2dpZCdcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgLy8gd2lsbCB1cGRhdGUgc3RhdGUgaWYgcHJvcHMgY2hhbmdlZFxuXG5cbiAgICBfY3JlYXRlQ2xhc3MoQnV0dG9uTG9ncywgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMub25DbGljaykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uQ2xpY2soJ2xvZ2lkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIG5hbWVcbiAgICAgICAgICAgICAgICB2YXIgZG9jVHlwZSA9IERvY0NvbnRleHRbJ21lbnUnXS5maW5kKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdy5rb29kLnRvVXBwZXJDYXNlKCkgPT09ICdwYW5rX3Z2Jy50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFkb2NUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIERvY0NvbnRleHQucGFnZU5hbWUgPSBkb2NUeXBlID8gZG9jVHlwZS5uYW1lIDogJ1BhbmdhIHbDpGxqYXbDtXR0ZSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9yZWRpcmVjdFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKHsgcGF0aG5hbWU6ICcvJyArIERvY0NvbnRleHQubW9kdWxlICsgJy9wYW5rX3Z2Jywgc3RhdGU6IHsgbW9kdWxlOiBEb2NDb250ZXh0Lm1vZHVsZSB9IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIEJ1dHRvbixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5Mb2dpZCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuYnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnByb3BzLnNob3cgPyB0aGlzLnByb3BzLnNob3cgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7IHJlZjogJ2ltYWdlJywgc3JjOiBzdHlsZXMuaWNvbnNbSUNPTl0gfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy52YWx1ZSAhPT0gcHJldlN0YXRlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvbkxvZ3M7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5CdXR0b25Mb2dzLnByb3BUeXBlcyA9IHtcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxuQnV0dG9uTG9ncy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWUsXG4gICAgdmFsdWU6ICdMb2dpZCdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uTG9ncztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbl9sb2dzL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIERvY3VtZW50VGVtcGxhdGUgPSByZXF1aXJlKCcuLi8uLi9kb2N1bWVudFRlbXBsYXRlL2luZGV4LmpzeCcpLFxuICAgIElucHV0VGV4dCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtdGV4dC9pbnB1dC10ZXh0LmpzeCcpLFxuICAgIElucHV0RGF0ZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtZGF0ZS9pbnB1dC1kYXRlLmpzeCcpLFxuICAgIElucHV0TnVtYmVyID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC1udW1iZXIvaW5wdXQtbnVtYmVyLmpzeCcpLFxuICAgIFNlbGVjdCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0L3NlbGVjdC5qc3gnKSxcbiAgICBTZWxlY3REYXRhID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9zZWxlY3QtZGF0YS9zZWxlY3QtZGF0YS5qc3gnKSxcbiAgICBUZXh0QXJlYSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvdGV4dC1hcmVhL3RleHQtYXJlYS5qc3gnKSxcbiAgICBEYXRhR3JpZCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvZGF0YS1ncmlkL2RhdGEtZ3JpZC5qc3gnKSxcbiAgICBEb2tQcm9wID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9kb2Nwcm9wL2RvY3Byb3AuanN4JyksXG4gICAgcmVsYXRlZERvY3VtZW50cyA9IHJlcXVpcmUoJy4uLy4uLy4uL21peGluL3JlbGF0ZWREb2N1bWVudHMuanN4JyksXG4gICAgTW9kYWxQYWdlID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4JyksXG4gICAgTG9hZGluZyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29tcG9uZW50cy9sb2FkaW5nL2luZGV4LmpzeCcpLFxuICAgIEJ1dHRvblV1ZW5kYUxpYiA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi11dWVuZGEtbGliL2luZGV4LmpzeCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4vc21rLXN0eWxlJyk7XG5cbnZhciBET0NfVFlQRV9JRCA9ICdTTUsnO1xudmFyIERvY0NvbnRleHQgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2RvYy1jb250ZXh0LmpzJyk7XG5cbnZhciBMSUJSQVJJRVMgPSBbeyBpZDogJ2tvbnRvZCcsIGZpbHRlcjogJycgfSwgeyBpZDogJ2Rva1Byb3BzJywgZmlsdGVyOiAnV0hFUkUga29vZCA9IFxcJ1NNS1xcJycgfSwgeyBpZDogJ3VzZXJzJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAndHVubnVzJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAncHJvamVjdCcsIGZpbHRlcjogJycgfSwgeyBpZDogJ25vbWVuY2xhdHVyZScsIGZpbHRlcjogJ3doZXJlIGRvayBpbiAoXFwnTUtcXCcsXFwnU01LXFwnKScgfSwgeyBpZDogJ2FzdXR1c2VkJywgZmlsdGVyOiAnd2hlcmUgaWQgaW4gKHNlbGVjdCBhc3V0dXNpZCBmcm9tIGxhcHNlZC52YW5lbWFkKScgfSwgeyBpZDogJ3ZhbmVtJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAnYWEnLCBmaWx0ZXI6ICcnIH1dO1xuXG52YXIgU21rID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFNtaywgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gU21rKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTbWspO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTbWsuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTbWspKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBkb2NJZDogcHJvcHMuZG9jSWQgPyBwcm9wcy5kb2NJZCA6IE51bWJlcihwcm9wcy5tYXRjaC5wYXJhbXMuZG9jSWQpLFxuICAgICAgICAgICAgbG9hZGVkRGF0YTogZmFsc2UsXG4gICAgICAgICAgICBsYXBzSWQ6IG51bGwsXG4gICAgICAgICAgICBtb2R1bGU6IF90aGlzLnByb3BzLm1vZHVsZSxcbiAgICAgICAgICAgIGlzQXNrVG9DcmVhdGVGcm9tQXJ2OiB0cnVlLCAvLyDQtdGB0LvQuCDRg9C60LDQt9Cw0L0g0YHRh9C10YIsINCwINC00L7Qui7QuNC0ID0gMCAsINGC0L4g0LzQvtC20L3QviDRgdC+0LfQtNC/0YLRjCDQvtGA0LTQtdGAINC/0L4g0YHRh9C10YLRg1xuICAgICAgICAgICAgZ2V0U01LOiBmYWxzZSxcbiAgICAgICAgICAgIGFydklkOiAwLFxuICAgICAgICAgICAga2FzX2FhX2thc2l0c2k6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMuY3JlYXRlR3JpZFJvdyA9IF90aGlzLmNyZWF0ZUdyaWRSb3cuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnJlY2FsY0RvY1N1bW1hID0gX3RoaXMucmVjYWxjRG9jU3VtbWEuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnJlY2FsY1Jvd1N1bW0gPSBfdGhpcy5yZWNhbGNSb3dTdW1tLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIF90aGlzLnJlbmRlcmVyID0gX3RoaXMucmVuZGVyZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdyaWRWYWxpZGF0ZUZpZWxkcyA9IF90aGlzLmdyaWRWYWxpZGF0ZUZpZWxkcy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMubW9kYWxQYWdlQnRuQ2xpY2sgPSBfdGhpcy5tb2RhbFBhZ2VCdG5DbGljay5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5wYWdlcyA9IFt7IHBhZ2VOYW1lOiAnU2lzc2VtYWtzZSBrb3JyYWxkdXMnLCBkb2NUeXBlSWQ6ICdTTUsnIH1dO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNtaywgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5oaXN0b3J5ICYmIHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbi5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXBzSWQgPSB0aGlzLnByb3BzLmhpc3RvcnkubG9jYXRpb24uc3RhdGUubGFwc0lkO1xuICAgICAgICAgICAgICAgIHZhciBfbW9kdWxlID0gdGhpcy5wcm9wcy5oaXN0b3J5LmxvY2F0aW9uLnN0YXRlLm1vZHVsZSA/IHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbi5zdGF0ZS5tb2R1bGUgOiAnbGFwc2VkJztcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbGFwc0lkOiBsYXBzSWQsIG1vZHVsZTogX21vZHVsZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50VGVtcGxhdGUsIHsgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgcmVmOiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5LFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5zdGF0ZS5tb2R1bGUsXG4gICAgICAgICAgICAgICAgaW5pdERhdGE6IHRoaXMucHJvcHMuaW5pdERhdGEsXG4gICAgICAgICAgICAgICAgcmVsb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxpYnM6IExJQlJBUklFUyxcbiAgICAgICAgICAgICAgICBwYWdlczogdGhpcy5wYWdlcyxcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcbiAgICAgICAgICAgICAgICBjcmVhdGVHcmlkUm93OiB0aGlzLmNyZWF0ZUdyaWRSb3csXG4gICAgICAgICAgICAgICAgZ3JpZFZhbGlkYXRvcjogdGhpcy5ncmlkVmFsaWRhdGVGaWVsZHMsXG4gICAgICAgICAgICAgICAgcmVjYWxjRG9jOiB0aGlzLnJlY2FsY0RvY1N1bW1hLFxuICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudDogJ2lucHV0LW51bWJlcidcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQktC10YDQvdC10YIg0LrQsNGB0YLQvtC80L3Ri9C1INC60L7QvNC/0L7QvdC10L3RgtGLINC00L7QutGD0LzQtdC90YLQsFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtYTUx9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcmVyKHNlbGYpIHtcbiAgICAgICAgICAgIGlmICghc2VsZiB8fCAhc2VsZi5kb2NEYXRhIHx8ICFzZWxmLmRvY0RhdGEua3B2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGluZywgeyBsYWJlbDogJ0xhYWRpbWluZS4uLicgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaXNFZGl0ZU1vZGUgPSBzZWxmLnN0YXRlLmVkaXRlZDtcblxuICAgICAgICAgICAgLy8g0YTQvtGA0LzQuNGA0YPQtdC8INC30LDQstC40YHQuNC80L7RgdGC0LhcbiAgICAgICAgICAgIGlmIChzZWxmLmRvY0RhdGEucmVsYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRlZERvY3VtZW50cyhzZWxmKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGlzTmV3RG9jID0gIXNlbGYuZG9jRGF0YS5pZCB8fCBzZWxmLmRvY0RhdGEuaWQgPT09IDA7XG4gICAgICAgICAgICBpZiAoKCFzZWxmLmRvY0RhdGEuaWQgfHwgc2VsZi5kb2NEYXRhLmlkID09PSAwKSAmJiBzZWxmLmRvY0RhdGEuYXJ2aWQgJiYgdGhpcy5zdGF0ZS5pc0Fza1RvQ3JlYXRlRnJvbUFydikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBnZXRTTUs6IHRydWUsIGlzQXNrVG9DcmVhdGVGcm9tQXJ2OiBmYWxzZSwgYXJ2SWQ6IHNlbGYuZG9jRGF0YS5hcnZpZCB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcXVlcnlBcnZUYXN1XG4gICAgICAgICAgICB2YXIgZ3JpZEFydkRhdGEgPSBzZWxmLmRvY0RhdGEucXVlcnlBcnZUYXN1LFxuICAgICAgICAgICAgICAgIGdyaWRBcnZDb2x1bW5zID0gc2VsZi5kb2NEYXRhLmdyaWRBcnZDb25maWc7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmRvY0RhdGEuamFhaykge1xuICAgICAgICAgICAgICAgIERvY0NvbnRleHQubWtKYWFrID0gc2VsZi5kb2NEYXRhLmphYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZGl2LWRvYycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgdGl0bGU6ICdOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFN0cmluZyhzZWxmLmRvY0RhdGEubnVtYmVyIHx8ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdLdXVwXFx4RTRldiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5rcHYgfHwgJzAxLTA3LTIwMjAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1rcHYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0FydmVsZHVzIGFydmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYWFfaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAnYWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNlbGYuZG9jRGF0YS5hYV9pZCkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydhYSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFN0cmluZyhzZWxmLmRvY0RhdGEucGFuaykgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3QtYWFJZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdNYWtzZXBcXHhFNGV2ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYWtzZXBhZXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm1ha3NlcGFldiB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbWFrc2VwYWV2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgdGl0bGU6ICdWaWl0ZW51bWJlciAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmlpdGVucicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEudmlpdGVuciB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtdmlpdGVucicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2tQcm9wLCB7IHRpdGxlOiAnS29udGVlcmltaW5lOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZG9rbGF1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydkb2tQcm9wcyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2tUeXBlSWQ6ICdTTUsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNlbGYuZG9jRGF0YS5kb2tsYXVzaWQpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc2VsZi5kb2NEYXRhLmRva3Byb3AgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZG9rcHJvcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdTZWxnaXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NlbGcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3RleHRhcmVhLXNlbGcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuc2VsZyB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0YUdyaWQsIHsgc291cmNlOiAnZGV0YWlscycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZERhdGE6IHNlbGYuZG9jRGF0YS5ncmlkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29sdW1uczogc2VsZi5kb2NEYXRhLmdyaWRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IGlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUdyaWRSb3c6IHNlbGYuaGFuZGxlR3JpZFJvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcmlkQnRuQ2xpY2s6IHNlbGYuaGFuZGxlR3JpZEJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5ncmlkLmhlYWRlclRhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2RhdGEtZ3JpZCcgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgdGl0bGU6ICdLb2trdTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtc3VtbWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogU3RyaW5nKHNlbGYuZG9jRGF0YS5zdW1tYSkgfHwgJzAuMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnTVxceEU0XFx4RTRyYW1hdGEgc3VtbWE6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdta19qYWFrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtamFhaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcoc2VsZi5kb2NEYXRhLmphYWspIHx8ICcwLjAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0QXJlYSwgeyB0aXRsZTogJ01cXHhFNHJrdXNlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1tdXVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEubXV1ZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgc2VsZi5zdGF0ZS5ncmlkUm93RWRpdCA/IHRoaXMuY3JlYXRlR3JpZFJvdyhzZWxmKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxQYWdlLFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ21vZGFscGFnZUNyZWF0ZU9yZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiB0aGlzLm1vZGFsUGFnZUJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlTmFtZTogJ0thcyBrb29zdGEgU01LJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMuc3RhdGUuZ2V0U01LIH0sXG4gICAgICAgICAgICAgICAgICAgICdLYXMga29vc3RhIFNNSz8nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdsYWJlbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBcnZlZCdcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEYXRhR3JpZCwgeyBzb3VyY2U6ICdhcnZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkRGF0YTogZ3JpZEFydkRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29sdW1uczogZ3JpZEFydkNvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9vbEJhcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcmlkQnRuQ2xpY2s6IHNlbGYuaGFuZGxlR3JpZEJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jVHlwZUlkOiAnYXJ2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcy5ncmlkLmhlYWRlclRhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYXJ2ZWQtZGF0YS1ncmlkJyB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiB3aWxsIGNyZWF0ZSBTTUtcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW9kYWxQYWdlQnRuQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kYWxQYWdlQnRuQ2xpY2soYnRuRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ2V0U01LOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIGlmIChidG5FdmVudCA9PT0gJ09rJykge1xuICAgICAgICAgICAgICAgIHZhciBEb2MgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J107XG4gICAgICAgICAgICAgICAgdmFyIGFwaSA9ICcvY2FsYy9rb29zdGFNSyc7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IERPQ19UWVBFX0lELFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IHRoaXMucHJvcHMubW9kdWxlID8gdGhpcy5wcm9wcy5tb2R1bGUgOiBEb2NDb250ZXh0Lm1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBEb2NDb250ZXh0LnVzZXJEYXRhLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgdXVpZDogRG9jQ29udGV4dC51c2VyRGF0YS51dWlkLFxuICAgICAgICAgICAgICAgICAgICBkb2NzOiBbTnVtYmVyKHRoaXMuc3RhdGUuYXJ2SWQpXSxcbiAgICAgICAgICAgICAgICAgICAgc2Vpc3VnYTogRG9jLmRvY0RhdGEgJiYgRG9jLmRvY0RhdGEua3B2ID8gRG9jLmRvY0RhdGEua3B2IDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogRG9jQ29udGV4dFthcGldID8gRG9jQ29udGV4dFthcGldIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdGFza05hbWU6ICdrb29zdGFNSydcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgRG9jLmZldGNoRGF0YSgnUG9zdCcsIGFwaSwgeyBkYXRhOiBwYXJhbXMgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmVycm9yX21lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ3ZpZ2E6ICcgKyByZXNwb25zZS5lcnJvcl9tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RG9jSWQgPSByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5yZXN1bHQgJiYgcmVzcG9uc2UuZGF0YS5yZXN1bHQuZG9jX2lkID8gcmVzcG9uc2UuZGF0YS5yZXN1bHQuZG9jX2lkIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnRWR1a2FsdCwgc3V1bmF0YW4gLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdvaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINC/0LXRgNC10YXQvtC00LjQvCDQvdCwINGB0L7Qt9C00LDQvdC90Lkg0LTQvtC6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RvY0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAnLycgKyAoX3RoaXMyLnByb3BzLm1vZHVsZSA/IF90aGlzMi5wcm9wcy5tb2R1bGUgOiBEb2NDb250ZXh0Lm1vZHVsZSkgKyAnL3Ntay8nICsgbmV3RG9jSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucHJvcHMuaGlzdG9yeS5yZXBsYWNlKCcvcmVsb2FkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucHJvcHMuaGlzdG9yeS5yZXBsYWNlKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ1Rla2tpcyB2aWdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdhcGkgY2FsbCBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdWaWdhICcgKyBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0YTQvtGA0LzQuNGA0YPQtdGCINC+0LHRitC10LrRgtGLINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0YHRgtGA0L7QutC4INCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmlkUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUdyaWRSb3coc2VsZikge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHNlbGYuZ3JpZFJvd0RhdGEgPyBzZWxmLmdyaWRSb3dEYXRhIDoge30sXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVNZXNzYWdlID0gJycsXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5zdGF0ZS53YXJuaW5nXG4gICAgICAgICAgICBidXR0b25Pa1JlYWRPbmx5ID0gdmFsaWRhdGVNZXNzYWdlLmxlbmd0aCA+IDAgfHwgIXNlbGYuc3RhdGUuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICBtb2RhbE9iamVjdHMgPSBbJ2J0bk9rJywgJ2J0bkNhbmNlbCddO1xuXG4gICAgICAgICAgICBpZiAoYnV0dG9uT2tSZWFkT25seSkge1xuICAgICAgICAgICAgICAgIC8vINGD0LHQtdGA0LXQvCDQutC90L7Qv9C60YMg0J7QulxuICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0cy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcm93KSByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCk7XG5cbiAgICAgICAgICAgIC8vINC90LDQu9C+0LbQuNGC0Ywg0YTQuNC70YzRgtGAINC90LAg0YHQv9C40YHQvtC6INC/0LvQsNGC0LXQu9GM0YnQuNC60L7Qsiwg0LXRgdC70Lgg0YPQutCw0LfQsNC9INCy0LjRgtC10L3Rg9C80LHQtdGAXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHNlbGYubGlic1snYXN1dHVzZWQnXTtcbiAgICAgICAgICAgIGlmIChzZWxmLmRvY0RhdGEudmlpdGVuciAmJiBzZWxmLmxpYnNbJ3ZhbmVtJ10gJiYgc2VsZi5saWJzWyd2YW5lbSddLmxlbmd0aCAmJiBzZWxmLmxpYnNbJ2FzdXR1c2VkJ10gJiYgc2VsZi5saWJzWydhc3V0dXNlZCddLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgLy8g0L3QsNC50YLQuCDRgNC+0LTQuNGC0LXQu9GPXG4gICAgICAgICAgICAgICAgdmFyIHZhbmVtID0gc2VsZi5saWJzWyd2YW5lbSddLmZpbHRlcihmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cudmlpdGVuciA9PT0gc2VsZi5kb2NEYXRhLnZpaXRlbnI7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFuZW0gJiYgdmFuZW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vINC90LDRiNC70Lgg0YDQvtC00LjRgtC10LvRjywg0YHRgtCw0LLQuNC8INGE0LjQu9GM0YLRgFxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdmFuZW0uZmluZChmdW5jdGlvbiAoa2lyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBraXJpLmlkID09PSByb3cuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsCDQv9C+INC40LQg0LrQvtC00YNcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5rb29kLmxvY2FsZUNvbXBhcmUoYi5rb29kLCAnZW4nLCB7IHNlbnNpdGl2aXR5OiAnYmFzZScgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICcubW9kYWxQYWdlJyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBtb2RhbE9iamVjdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtZ3JpZC1yb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiBzZWxmLm1vZGFsUGFnZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlTmFtZTogJ1JlYSBsaXNhbWluZSAvIHBhcmFuZGFtaW5lJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2dyaWQtcm93LWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnT3BlcmF0c2lvb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbm9taWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ25vbWVuY2xhdHVyZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93Lm5vbWlkIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiByb3cua29vZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnbm9taWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdQYXJ0bmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5hc3V0dXNpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiByb3cuYXN1dHVzIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2FzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvblV1ZW5kYUxpYiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmOiBzZWxmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWI6ICdhc3V0dXNlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnQXJ2ZWxkdXMgYXJ2ZTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5hYSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZERhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdhYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dJbnB1dCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdTdW1tYTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihyb3cuc3VtbWEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0lucHV0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdLb3JyLiBrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICdrb250b2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2tvbnRvZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LmtvbnRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdUdW5udXM6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3R1bm51cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICd0dW5udXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ3R1bm51cyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LnR1bm51cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1Byb2plY3Q6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Byb2onLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAncHJvamVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sncHJvamVjdCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LnByb2osXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3Byb2plY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9C10YDQtdGA0LDRgdGH0LXRgiDQuNGC0L7Qs9C+0LLQvtC5INGB0YPQvNC80Ysg0LTQvtC60YPQvNC10L3RgtCwXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2FsY0RvY1N1bW1hJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlY2FsY0RvY1N1bW1hKCkge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVmc1snZG9jdW1lbnQnXTtcbiAgICAgICAgICAgIGRvYy5kb2NEYXRhWydzdW1tYSddID0gMDtcbiAgICAgICAgICAgIGRvYy5kb2NEYXRhLmdyaWREYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGRvYy5kb2NEYXRhWydzdW1tYSddICs9IE51bWJlcihyb3dbJ3N1bW1hJ10pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9C+0LTRgdGC0LDQstC40YIg0LrQvtC0INC+0L/QtdGA0LDRhtC40LhcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVjYWxjUm93U3VtbScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNhbGNSb3dTdW1tKCkge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVmc1snZG9jdW1lbnQnXTtcblxuICAgICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhkb2MuZ3JpZFJvd0RhdGEpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/Qv9C+0LTRgdGC0LDQstC40Lwg0L3QsNC40LzQtdC90L7QstCw0L3QuNC1INGD0YHQu9C+0LPRg1xuXG4gICAgICAgICAgICBpZiAoZG9jLmdyaWRSb3dEYXRhWydub21pZCddKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vbURhdGFOYW1lID0gZG9jLmxpYnNbJ25vbWVuY2xhdHVyZSddLmZpbmQoZnVuY3Rpb24gKGxpYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGliLmlkID09PSBOdW1iZXIoZG9jLmdyaWRSb3dEYXRhWydub21pZCddKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChub21EYXRhTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tvb2QnXSA9IG5vbURhdGFOYW1lLmtvb2Q7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsnbmltZXR1cyddID0gbm9tRGF0YU5hbWUubmltZXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8v0L/QvtC00YHRgtCw0LLQuNC8INC90LDQuNC80LXQvdC+0LLQsNC90LjQtVxuICAgICAgICAgICAgaWYgKGRvYy5ncmlkUm93RGF0YVsnYXN1dHVzaWQnXSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGFzdXR1c0RhdGFOYW1lID0gZG9jLmxpYnNbJ2FzdXR1c2VkJ10uZmluZChmdW5jdGlvbiAobGliKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaWIuaWQgPT09IE51bWJlcihkb2MuZ3JpZFJvd0RhdGFbJ2FzdXR1c2lkJ10pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFzdXR1c0RhdGFOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsnYXN1dHVzJ10gPSBhc3V0dXNEYXRhTmFtZS5uaW1ldHVzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydhYSddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2FhJ10gPSBhc3V0dXNEYXRhTmFtZS5wYW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0LLQsNC70LjQtNCw0YLQvtGAINC00LvRjyDRgdGC0YDQvtC60Lgg0LPRgNC40LTQsFxyXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dyaWRWYWxpZGF0ZUZpZWxkcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBncmlkVmFsaWRhdGVGaWVsZHMoKSB7XG4gICAgICAgICAgICB2YXIgd2FybmluZyA9ICcnO1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVmc1snZG9jdW1lbnQnXTtcbiAgICAgICAgICAgIGlmIChkb2MgJiYgZG9jLmdyaWRSb3dEYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAvLyDRgtC+0LvRjNC60L4g0L/QvtGB0LvQtSDQv9GA0L7QstC10YDQutC4INGE0L7RgNC80Ysg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjFxuICAgICAgICAgICAgICAgIGlmIChkb2MuZ3JpZFJvd0RhdGEgJiYgIWRvYy5ncmlkUm93RGF0YVsnbm9taWQnXSkgd2FybmluZyA9IHdhcm5pbmcgKyAnINCa0L7QtCDQvtC/0LXRgNCw0YbQuNC4JztcbiAgICAgICAgICAgICAgICBpZiAoIWRvYy5ncmlkUm93RGF0YVsnc3VtbWEnXSkgd2FybmluZyA9IHdhcm5pbmcgKyAnINCh0YPQvNC80LAnO1xuICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydhc3V0dXNpZCddKSB3YXJuaW5nID0gd2FybmluZyArICcg0J/Qu9Cw0YLQuNC70YzRidC40LonO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNhbGNSb3dTdW1tKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNhbGNEb2NTdW1tYSgnc3VtbWEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3YXJuaW5nO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNtaztcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cblNtay5wcm9wVHlwZXMgPSB7XG4gICAgZG9jSWQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgaW5pdERhdGE6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgdXNlckRhdGE6IFByb3BUeXBlcy5vYmplY3Rcbn07XG5cblNtay5kZWZhdWx0UHJvcHMgPSB7XG4gICAgaW5pdERhdGE6IHt9LFxuICAgIHVzZXJEYXRhOiB7fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTbWs7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL3Ntay9kb2N1bWVudC9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIvLyDQstC40LTQttC10YIsINC+0LHRitC10LTQuNC90Y/RjtGJ0LjQuSDRgdC10LvQtdC60YIg0Lgg0YLQtdC60YHRgi4g0LIg0YLQtdC60YHRgtC1INC+0YLRgNCw0LbQsNGO0YLQvNGPINC00LDQvdC90YvQtSwg0YHQstGP0LfQsNC90L3Ri9C1INGBINGB0LXQu9C10LrRgtC+0Lxcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIFNlbGVjdCA9IHJlcXVpcmUoJy4uL3NlbGVjdC9zZWxlY3QuanN4Jyk7XG52YXIgQnV0dG9uRWRpdCA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci9idXR0b24tcmVnaXN0ZXItZWRpdC9idXR0b24tcmVnaXN0ZXItZWRpdC5qc3gnKTtcbnZhciBCdXR0b25BZGQgPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXJlZ2lzdGVyLWFkZC9idXR0b24tcmVnaXN0ZXItYWRkLmpzeCcpO1xudmFyIFRleHQgPSByZXF1aXJlKCcuLi90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCcpO1xudmFyIERvY0NvbnRleHQgPSByZXF1aXJlKCcuLy4uLy4uL2RvYy1jb250ZXh0LmpzJyk7XG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi9zdHlsZXMuanMnKTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIFNlbGVjdFRleHRXaWRnZXQgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoU2VsZWN0VGV4dFdpZGdldCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gU2VsZWN0VGV4dFdpZGdldChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VsZWN0VGV4dFdpZGdldCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNlbGVjdFRleHRXaWRnZXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTZWxlY3RUZXh0V2lkZ2V0KSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlID8gcHJvcHMudmFsdWUgOiBudWxsLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLCAvLyDQv9C+0LnQtNC10YIg0LIg0YLQtdC60YHRgtC+0LLRg9GOINC+0LHQu9Cw0YHRgtGMXG4gICAgICAgICAgICBsaWJEYXRhOiBwcm9wcy5kYXRhXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmhhbmRsZVNlbGVjdE9uQ2hhbmdlID0gX3RoaXMuaGFuZGxlU2VsZWN0T25DaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICAvLyB3aWxsIHVwZGF0ZSBzdGF0ZSBpZiBwcm9wcyBjaGFuZ2VkXG5cblxuICAgIF9jcmVhdGVDbGFzcyhTZWxlY3RUZXh0V2lkZ2V0LCBbe1xuICAgICAgICBrZXk6ICdoYW5kbGVTZWxlY3RPbkNoYW5nZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RPbkNoYW5nZShuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vINC+0YLRgNCw0LHQvtGC0LDQtdC8INGB0L7QsdGL0YLQuNC1INC4INC/0L7QvNC10L3Rj9C10Lwg0YHQvtGB0YLQvtGP0L3QuNC1XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB2YWx1ZTogdmFsdWUgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMi5wcm9wcy5vbkNoYW5nZShfdGhpczIucHJvcHMubmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgICAg0LrQsNGB0YLQvtC80L3Ri9C5INC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGO0YLQuNGPINC60LvQuNC6XHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyDQtNC10LvQsNC10Lwg0YDQtdC00LDQudGA0LXQutGCINC90LAg0YHRgtGA0LDQvdC40YbRhiDRgdC/0YDQsNCy0L7Rh9C90LjQutCwXG4gICAgICAgICAgICBpZiAoZXZlbnQgPT09ICdlZGl0JyB8fCBldmVudCA9PT0gJ011dWRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6ICcvJyArIERvY0NvbnRleHQubW9kdWxlICsgJy9kb2twcm9wcy8nICsgdGhpcy5zdGF0ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsgZG9rUHJvcElkOiBEb2NDb250ZXh0LmRvY1R5cGVJZCwgdHlwZTogJ3RleHQnIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09ICdhZGQnIHx8IGV2ZW50ID09PSAnTGlzYScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhuYW1lOiAnLycgKyBEb2NDb250ZXh0Lm1vZHVsZSArICcvZG9rcHJvcHMvMCcsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IGRva1Byb3BJZDogRG9jQ29udGV4dC5kb2NUeXBlSWQsIHR5cGU6ICd0ZXh0JyB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQnNC10YLQvtC0INC40YnQtdGCINCyINGB0L/RgNCw0LLQvtGH0L3QuNC60LUg0L7Qv9C40YHQsNC90LjQtVxyXG4gICAgICAgICAqIEBwYXJhbSBsaWJEYXRhXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0RGVzY3JpcHRpb25CeVNlbGVjdFZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uQnlTZWxlY3RWYWx1ZShsaWJEYXRhKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgLy8g0L3QsNC50LTQtdC8INCyINGB0L/RgNCw0LLQvtGH0L3QuNC60LUg0L7Qv9C40YHQsNC90LjQtSDQuCDRg9GB0YLQsNC90L7QstC40Lwg0LXQs9C+INGB0L7RgdGC0L7Rj9C90LjQtVxuICAgICAgICAgICAgdmFyIGxpYlJvdyA9IGxpYkRhdGEuZmlsdGVyKGZ1bmN0aW9uIChsaWIpIHtcblxuICAgICAgICAgICAgICAgIGlmIChsaWIuaWQgPT09IF90aGlzMy5wcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGliO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHNlbGcgPSAnJyxcbiAgICAgICAgICAgICAgICBzZWxnT2JqZWN0ID0gbGliUm93Lmxlbmd0aCA/IGxpYlJvd1swXS5kZXRhaWxzIDogJyc7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHNlbGdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZ09iamVjdC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g0LjQvdGC0LXRgNC10YHRg9GO0YIg0YLQvtC70YzQutC+IFwi0YHQvtCx0YHRgtCy0LXQvdC90YvQtVwiINGB0LLQvtC50YHRgtCy0LAg0L7QsdGK0LXQutGC0LBcbiAgICAgICAgICAgICAgICAgICAgc2VsZyA9IHNlbGcgKyBwcm9wZXJ0eSArICc6JyArIHNlbGdPYmplY3RbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxnO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLndyYXBwZXIgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyBjbGFzc05hbWU6IHRoaXMucHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5wcm9wcy50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnByb3BzLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudmFsdWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8IHRoaXMucHJvcHMudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0aGlzLnByb3BzLnJlYWRPbmx5LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVTZWxlY3RPbkNoYW5nZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudmFsdWUgPyBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbkVkaXQsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdNdXVkYScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMucmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2tcbiAgICAgICAgICAgICAgICB9KSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uQWRkLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTGlzYScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRoaXMucHJvcHMucmVhZE9ubHksXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRQcm9wcy52YWx1ZSAhPT0gcHJldlN0YXRlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG5leHRQcm9wcy52YWx1ZSB9O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNlbGVjdFRleHRXaWRnZXQ7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5TZWxlY3RUZXh0V2lkZ2V0LnByb3BUeXBlcyA9IHtcbiAgICB2YWx1ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbGliczogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBkZWZhdWx0VmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcmVhZE9ubHk6IFByb3BUeXBlcy5ib29sLFxuICAgIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5TZWxlY3RUZXh0V2lkZ2V0LmRlZmF1bHRQcm9wcyA9IHtcbiAgICByZWFkT25seTogZmFsc2UsXG4gICAgdGl0bGU6ICcnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbGVjdFRleHRXaWRnZXQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9jb21wb25lbnRzL2RvY3Byb3AvZG9jcHJvcC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e3dyYXBwZXI6e21hcmdpbjonNXB4JyxkaXNwbGF5OidmbGV4Jyx3aWR0aDonOTUlJ30saW5wdXQ6e3dpZHRoOic3MCUnLG1hcmdpbkxlZnQ6JzVweCcsYm9yZGVyUmFkaXVzOic1cHgnfSxhOnt3aWR0aDonNzAlJyxtYXJnaW5MZWZ0Oic1cHgnLGJvcmRlclJhZGl1czonNXB4J30saGlkZTp7ZGlzcGxheTonbm9uZSd9LHNlbGVjdDp7d2lkdGg6JzcwJScsaGVpZ3RoOicxMDAlJyxtYXJnaW5MZWZ0Oic1cHgnLGJvcmRlclJhZGl1czonNXB4JywnOmZvY3VzJzp7YmFja2dyb3VuZENvbG9yOidsaWdodHBpbmsnfX0scmVhZE9ubHk6e2JhY2tncm91bmRDb2xvcjonI0YzRUZFRid9LGxhYmVsOnt3aWR0aDonMzAlJyxtYXJnaW46JzVweCd9LGJ1dHRvbjp7d2lkdGg6JzUlJ319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvY29tcG9uZW50cy9kb2Nwcm9wL3N0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpLFxuICAgIHN0eWxlcyA9IHJlcXVpcmUoJy4uL2J1dHRvbi1yZWdpc3Rlci1zdHlsZXMnKSxcbiAgICBCdXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24tcmVnaXN0ZXIuanN4JyksXG4gICAgSUNPTiA9ICdyZWZyZXNoJztcblxudmFyIEJ1dHRvblV1ZW5kYUxpYiA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhCdXR0b25VdWVuZGFMaWIsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIC8vINC60L3QvtC/0LrQsCDRgdC+0LfQtNCw0L3QuNGPINC00L7QutGD0LzQtdC90YLQsCDQsiDRgNC10LPQuNGB0YLRgNCw0YVcbiAgICBmdW5jdGlvbiBCdXR0b25VdWVuZGFMaWIocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvblV1ZW5kYUxpYik7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChCdXR0b25VdWVuZGFMaWIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihCdXR0b25VdWVuZGFMaWIpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJ1dHRvblV1ZW5kYUxpYiwgW3tcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L/QtdGA0LXQtNCw0L0g0L7QsdGA0LDQsdC+0YLRh9C40LosINCy0LXRgNC90LXQvCDQtdCz0L5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNsaWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vINC10YHQu9C4INC/0LXRgNC10LTQsNC9INC00L7QutGD0LzQtdC90YIsINCy0YvQt9C+0LLQtdC8INC80LXRgtC+0LQg0L7QsdC90L7QstC70LXQvdC40Y8g0LHQuNCx0LvQuNC+0YLQtdC60LhcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGYgJiYgdGhpcy5wcm9wcy5zZWxmLmxvYWRMaWJzICYmIHRoaXMucHJvcHMubGliKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLnByb3BzLnNlbGY7XG4gICAgICAgICAgICAgICAgc2VsZi5sb2FkTGlicyh0aGlzLnByb3BzLmxpYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgQnV0dG9uLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuVXVlbmRhJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdGhpcy5wcm9wcy5zaG93LFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW1nJywgeyByZWY6ICdpbWFnZScsIHNyYzogc3R5bGVzLmljb25zW0lDT05dIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvblV1ZW5kYUxpYjtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbkJ1dHRvblV1ZW5kYUxpYi5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIHNob3c6IHRydWVcbn07XG5tb2R1bGUuZXhwb3J0cyA9IEJ1dHRvblV1ZW5kYUxpYjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi11dWVuZGEtbGliL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17ZG9jUm93OntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidyb3cnLypcclxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYmx1ZSdcclxuKi99LGRvY0NvbHVtbjp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJywvKlxyXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB5ZWxsb3cnLFxyXG4qL3dpZHRoOic1MCUnfSxkb2M6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J2NvbHVtbicvKlxyXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBicm93bidcclxuKi99LGdyaWRSb3c6e2JvcmRlcjonMXB4IHNvbGlkIGJsYWNrJyxiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJyxwb3NpdGlvbjoncmVsYXRpdmUnLG1hcmdpbjonMTAlIDMwJSAxMCUgMzAlJyx3aWR0aDonYXV0bycsb3BhY2l0eTonMScsdG9wOicxMDBweCd9LGRvY1Rvb2xiYXJXYXJuaW5nOntmbG9hdDonbGVmdCcsYmFja2dyb3VuZENvbG9yOidyZWQnLG1hcmdpbjonMTBweCd9LGdyaWQ6e21haW5UYWJsZTp7d2lkdGg6JzEwMCUnfSxoZWFkZXJUYWJsZTp7d2lkdGg6JzEwMCUnfSxncmlkQ29udGFpbmVyOnt3aWR0aDonMTAwJSd9fX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL3Ntay9kb2N1bWVudC9zbWstc3R5bGUuanNcbi8vIG1vZHVsZSBpZCA9IDI4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBEb2N1bWVudFJlZ2lzdGVyID0gcmVxdWlyZSgnLi8uLi9kb2N1bWVudHMvZG9jdW1lbnRzLmpzeCcpO1xudmFyIElucHV0TnVtYmVyID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy9pbnB1dC1udW1iZXIvaW5wdXQtbnVtYmVyLmpzeCcpO1xuXG52YXIgZ2V0U3VtID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2dldFN1bScpO1xudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vdm1rLXJlZ2lzdGVyLXN0eWxlcycpO1xudmFyIERvY0NvbnRleHQgPSByZXF1aXJlKCcuLy4uLy4uL2RvYy1jb250ZXh0LmpzJyk7XG5cbnZhciBUb29sYmFyQ29udGFpbmVyID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL3Rvb2xiYXItY29udGFpbmVyL3Rvb2xiYXItY29udGFpbmVyLmpzeCcpO1xudmFyIEJ0blNlcGEgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1lYXJ2ZS9pbmRleC5qc3gnKTtcbnZhciBET0NfVFlQRV9JRCA9ICdWTUsnO1xuXG4vKipcclxuICog0JrQu9Cw0YHRgSDRgNC10LDQu9C40LfRg9C10YIg0LTQvtC60YPQvNC10L3RgiDQv9GA0LjRhdC+0LTQvdC+0LPQviDQv9C70LDRgtC10LbQvdC+0LPQviDQvtGA0LTQtdGA0LAuXHJcbiAqL1xuXG52YXIgRG9jdW1lbnRzID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKERvY3VtZW50cywgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRzKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEb2N1bWVudHMpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEb2N1bWVudHMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEb2N1bWVudHMpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMub25DbGlja0hhbmRsZXIgPSBfdGhpcy5vbkNsaWNrSGFuZGxlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBfdGhpcy5yZW5kZXJlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzdW1tYTogMCxcbiAgICAgICAgICAgIHJlYWQ6IDBcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERvY3VtZW50cywgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2N1bWVudFJlZ2lzdGVyLCB7IGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdyZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSA/IHRoaXMucHJvcHMuaGlzdG9yeSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogdGhpcy5yZW5kZXJlciB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnUmVhZCBrb2trdTonLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVhZF9rb2trdScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXJlYWQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHRoaXMuc3RhdGUucmVhZCkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwgeyB0aXRsZTogJ1N1bW1hIGtva2t1OicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdW1tYV9rb2trdScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXN1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcih0aGlzLnN0YXRlLnN1bW1hKS50b0ZpeGVkKDIpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICB2YXIgc3VtbWEgPSBzZWxmLmdyaWREYXRhID8gZ2V0U3VtKHNlbGYuZ3JpZERhdGEsICdrcmVlZGl0JykgOiAwO1xuICAgICAgICAgICAgaWYgKHN1bW1hKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHN1bW1hOiBzdW1tYSwgcmVhZDogc2VsZi5ncmlkRGF0YS5sZW5ndGggfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIFRvb2xiYXJDb250YWluZXIsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blNlcGEsIHtcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5vbkNsaWNrSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgcGhyYXNlOiAnS2FzIGxhYWRpZGEgWE1MIGZhaWw/JyxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuU2VwYVhNTCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnU2FhbWEgWE1MIChTRVBBKSBrw7VpayB2YWxpdHVkIG1ha3NlZCdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vaGFuZGxlciDQtNC70Y8g0YHQvtCx0YvRgtC40Y8g0LrQu9C40Log0L3QsCDQutC90L7Qv9C60LDRhSDQv9Cw0L3QtdC70LhcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb25DbGlja0hhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBpZHMgPSBuZXcgU2V0KCk7IC8vINGB0Y7QtNCwINC/0LjRiNC10Lwg0LjQtCDRgdGH0LXRgtC+0LwsINC60L7RgtC+0YDRi9C1INC/0L7QtCDQvtCx0YDQsNCx0L7RgtC60YNcblxuICAgICAgICAgICAgdmFyIERvYyA9IHRoaXMucmVmc1sncmVnaXN0ZXInXTtcbiAgICAgICAgICAgIC8vINCx0YPQtNC10YIg0L7RgtC/0YDQsNCy0LvQtdC90L4g0L3QsCDQv9C+0YfRgtGDICDQstGL0LHRgNCw0L3QvdGL0LUg0Lgg0YLQvtC70YzQutC+INC00LvRjyDRjdC7LtC/0L7Rh9GC0Ysg0YHRh9C10YLQsFxuICAgICAgICAgICAgRG9jLmdyaWREYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIC8vINCy0YvQsdGA0LDQvdC+INC00LvRjyDQv9C10YfQsNGC0LhcbiAgICAgICAgICAgICAgICBpZHMuYWRkKHJvdy5pZCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g0LrQvtC90LLQtdGA0YLQsNGG0LjRjyDQsiDQvNCw0YHRgdC40LJcbiAgICAgICAgICAgIGlkcyA9IEFycmF5LmZyb20oaWRzKTtcblxuICAgICAgICAgICAgaWYgKCFpZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgRG9jLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ01pdHRlIMO8aHRlZ2kgbWFrc2UgbGVpZG51bScsIC8vINGB0YLRgNC+0LrQsCDQuNC30LLQtdGJ0LXQvdC40LlcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdub3RWYWxpZCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g0L7RgtC/0YDQsNCy0LvRj9C10Lwg0LfQsNC/0YDQvtGBINC90LAg0LLRi9C/0L7Qu9C90LXQvdC40LVcbiAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnTGVpZHNpbiAnICsgaWRzLmxlbmd0aCArICcgbWFrc2VkJywgLy8g0YHRgtGA0L7QutCwINC40LfQstC10YnQtdC90LjQuVxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ29rJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9ICcvc2VwYS8nICsgRG9jQ29udGV4dC51c2VyRGF0YS51dWlkICsgJy8nICsgaWRzO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCcnICsgdXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEb2N1bWVudHM7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERvY3VtZW50cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvdm1rL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17Z3JpZDp7bWFpblRhYmxlOnt3aWR0aDonMTAwJScsdGQ6e2JvcmRlcjonMXB4IHNvbGlkIGxpZ2h0R3JleScsZGlzcGxheTondGFibGUtY2VsbCcscGFkZGluZ0xlZnQ6JzVweCd9fSxoZWFkZXJUYWJsZTp7d2lkdGg6JzEwMCUnfSxncmlkQ29udGFpbmVyOnt3aWR0aDonMTAwJSd9fSxkb2M6e2hlaWdodDonMTAwJSd9LHRvdGFsOnt3aWR0aDonYXV0byd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvdm1rL3Ztay1yZWdpc3Rlci1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBEb2N1bWVudFRlbXBsYXRlID0gcmVxdWlyZSgnLi4vLi4vZG9jdW1lbnRUZW1wbGF0ZS9pbmRleC5qc3gnKSxcbiAgICBJbnB1dFRleHQgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LXRleHQvaW5wdXQtdGV4dC5qc3gnKSxcbiAgICBJbnB1dERhdGUgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LWRhdGUvaW5wdXQtZGF0ZS5qc3gnKSxcbiAgICBJbnB1dE51bWJlciA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci5qc3gnKSxcbiAgICBTZWxlY3QgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3NlbGVjdC9zZWxlY3QuanN4JyksXG4gICAgU2VsZWN0RGF0YSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0LWRhdGEvc2VsZWN0LWRhdGEuanN4JyksXG4gICAgQnV0dG9uRWRpdCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1lZGl0L2J1dHRvbi1yZWdpc3Rlci1lZGl0LmpzeCcpLFxuICAgIFRleHRBcmVhID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCcpLFxuICAgIERhdGFHcmlkID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9kYXRhLWdyaWQvZGF0YS1ncmlkLmpzeCcpLFxuICAgIERva1Byb3AgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2RvY3Byb3AvZG9jcHJvcC5qc3gnKSxcbiAgICByZWxhdGVkRG9jdW1lbnRzID0gcmVxdWlyZSgnLi4vLi4vLi4vbWl4aW4vcmVsYXRlZERvY3VtZW50cy5qc3gnKSxcbiAgICBNb2RhbFBhZ2UgPSByZXF1aXJlKCcuLy4uLy4uLy4uL2NvbXBvbmVudHMvbW9kYWxwYWdlL21vZGFsUGFnZS5qc3gnKSxcbiAgICBMb2FkaW5nID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb21wb25lbnRzL2xvYWRpbmcvaW5kZXguanN4JyksXG4gICAgQnV0dG9uVXVlbmRhTGliID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9idXR0b24tcmVnaXN0ZXIvYnV0dG9uLXV1ZW5kYS1saWIvaW5kZXguanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi92bWstc3R5bGUnKTtcblxudmFyIExJQlJBUklFUyA9IFt7IGlkOiAna29udG9kJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAnZG9rUHJvcHMnLCBmaWx0ZXI6ICd3aGVyZSBrb29kID0gXFwnVk1LXFwnJyB9LCB7IGlkOiAndXNlcnMnLCBmaWx0ZXI6ICcnIH0sIHsgaWQ6ICd0dW5udXMnLCBmaWx0ZXI6ICcnIH0sIHsgaWQ6ICdwcm9qZWN0JywgZmlsdGVyOiAnJyB9LCB7IGlkOiAnYXJ0aWtrZWwnLCBmaWx0ZXI6ICcnIH0sIHsgaWQ6ICdhbGxpa2FzJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAndGVnZXYnLCBmaWx0ZXI6ICcnIH0sIHsgaWQ6ICdhYScsIGZpbHRlcjogJycgfSwgeyBpZDogJ2FzdXR1c2VkJywgZmlsdGVyOiAnd2hlcmUgaWQgaW4gKHNlbGVjdCBhc3V0dXNpZCBmcm9tIGxhcHNlZC52YW5lbWFkKScgfSwgeyBpZDogJ3ZhbmVtJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAnbm9tZW5jbGF0dXJlJywgZmlsdGVyOiAnd2hlcmUgZG9rIGluIChcXCdWTUtcXCcsXFwnTUtcXCcpJyB9XTtcblxudmFyIFZtayA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFZtaywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBWbWsocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZtayk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFZtay5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFZtaykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRvY0lkOiBwcm9wcy5kb2NJZCA/IHByb3BzLmRvY0lkIDogTnVtYmVyKHByb3BzLm1hdGNoLnBhcmFtcy5kb2NJZCksXG4gICAgICAgICAgICBsb2FkZWREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgIG1vZHVsZTogX3RoaXMucHJvcHMubW9kdWxlXG5cbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpcy5jcmVhdGVHcmlkUm93ID0gX3RoaXMuY3JlYXRlR3JpZFJvdy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVjYWxjRG9jU3VtbWEgPSBfdGhpcy5yZWNhbGNEb2NTdW1tYS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVjYWxjUm93U3VtbSA9IF90aGlzLnJlY2FsY1Jvd1N1bW0uYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBfdGhpcy5yZW5kZXJlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ3JpZFZhbGlkYXRlRmllbGRzID0gX3RoaXMuZ3JpZFZhbGlkYXRlRmllbGRzLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIF90aGlzLnBhZ2VzID0gW3sgcGFnZU5hbWU6ICdWw6RsamFtYWtzZSBrb3JyYWxkdXMnLCBkb2NUeXBlSWQ6ICdTTUsnIH1dO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFZtaywgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50VGVtcGxhdGUsIHsgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgcmVmOiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogJ1ZNSycsXG4gICAgICAgICAgICAgICAgbW9kdWxlOiAnbGFwc2VkJyxcbiAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5LFxuICAgICAgICAgICAgICAgIGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgIGxpYnM6IExJQlJBUklFUyxcbiAgICAgICAgICAgICAgICBwYWdlczogdGhpcy5wYWdlcyxcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcbiAgICAgICAgICAgICAgICBjcmVhdGVHcmlkUm93OiB0aGlzLmNyZWF0ZUdyaWRSb3csXG4gICAgICAgICAgICAgICAgZ3JpZFZhbGlkYXRvcjogdGhpcy5ncmlkVmFsaWRhdGVGaWVsZHMsXG4gICAgICAgICAgICAgICAgcmVjYWxjRG9jOiB0aGlzLnJlY2FsY0RvY1N1bW1hLFxuICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudDogJ2lucHV0LW51bWJlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0JLQtdGA0L3QtdGCINC60LDRgdGC0L7QvNC90YvQtSDQutC+0LzQv9C+0L3QtdC90YLRiyDQtNC+0LrRg9C80LXQvdGC0LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICB2YXIgaXNFZGl0ZU1vZGUgPSBzZWxmLnN0YXRlLmVkaXRlZDtcblxuICAgICAgICAgICAgaWYgKCFzZWxmIHx8ICFzZWxmLmRvY0RhdGEgfHwgIXNlbGYuZG9jRGF0YS5rcHYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2MgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMb2FkaW5nLCB7IGxhYmVsOiAnTGFhZGltaW5lLi4uJyB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vINGE0L7RgNC80LjRgNGD0LXQvCDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4XG4gICAgICAgICAgICBpZiAoc2VsZi5kb2NEYXRhLnJlbGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHJlbGF0ZWREb2N1bWVudHMoc2VsZik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZGl2LWRvYycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgdGl0bGU6ICdOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFN0cmluZyhzZWxmLmRvY0RhdGEubnVtYmVyKSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdLdXVwXFx4RTRldiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAna3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5rcHYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWtwdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnQXJ2ZWxkdXMgYXJ2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhYV9pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICdhYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIoc2VsZi5kb2NEYXRhLmFhX2lkKSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2FhJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogU3RyaW5nKHNlbGYuZG9jRGF0YS5wYW5rKSB8fCBzZWxmLmxpYnNbJ2FhJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1hYUlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ0FydmUgbnIuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Fydm5yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5hcnZuciB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtYXJ2bnInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdNYWtzZXBcXHhFNGV2ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYWtzZXBhZXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm1ha3NlcGFldixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbWFrc2VwYWV2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgdGl0bGU6ICdWaWl0ZW51bWJlciAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmlpdGVucicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEudmlpdGVuciB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtdmlpdGVucicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2tQcm9wLCB7IHRpdGxlOiAnS29udGVlcmltaW5lOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZG9rbGF1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydkb2tQcm9wcyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2tUeXBlSWQ6ICdWTUsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNlbGYuZG9jRGF0YS5kb2tsYXVzaWQpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc2VsZi5kb2NEYXRhLmRva3Byb3AgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZG9rcHJvcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0RGF0YSwgeyB0aXRsZTogJ0xhcHNlIG5pbWk6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xhcHNpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYk5hbWU6ICdsYXBzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsRmllbGRzOiBbJ25pbWknLCAnaXNpa3Vrb29kJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmxhcHNpZCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlbGYuZG9jRGF0YS5sYXBzZV9uaW1pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZFRvR3JpZDogJ25pbWknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZFRvRGF0YTogJ25pbWknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3QtbGFwc2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRhdGE6IHNlbGYudXNlckRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b25FZGl0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0bkVkaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ011dWRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5idG5FZGl0TGFwc0NsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuYnRuRWRpdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU2VsZ2l0dXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NlbGcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtc2VsZycsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLnNlbGcgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGF0YUdyaWQsIHsgc291cmNlOiAnZGV0YWlscycsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkRGF0YTogc2VsZi5kb2NEYXRhLmdyaWREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZENvbHVtbnM6IHNlbGYuZG9jRGF0YS5ncmlkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2xCYXI6IGlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR3JpZFJvdzogc2VsZi5oYW5kbGVHcmlkUm93LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR3JpZEJ0bkNsaWNrOiBzZWxmLmhhbmRsZUdyaWRCdG5DbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLmdyaWQuaGVhZGVyVGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdkYXRhLWdyaWQnIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ0tva2t1OiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXN1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcoc2VsZi5kb2NEYXRhLnN1bW1hKSB8fCAnMC4wMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdNXFx4RTRya3VzZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ211dWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm11dWQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHNlbGYuc3RhdGUuZ3JpZFJvd0VkaXQgPyB0aGlzLmNyZWF0ZUdyaWRSb3coc2VsZikgOiBudWxsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0YTQvtGA0LzQuNGA0YPQtdGCINC+0LHRitC10LrRgtGLINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0YHRgtGA0L7QutC4INCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmlkUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUdyaWRSb3coc2VsZikge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHNlbGYuZ3JpZFJvd0RhdGEgPyBzZWxmLmdyaWRSb3dEYXRhIDoge30sXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVNZXNzYWdlID0gJycsXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5zdGF0ZS53YXJuaW5nXG4gICAgICAgICAgICBidXR0b25Pa1JlYWRPbmx5ID0gdmFsaWRhdGVNZXNzYWdlLmxlbmd0aCA+IDAgfHwgIXNlbGYuc3RhdGUuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICBtb2RhbE9iamVjdHMgPSBbJ2J0bk9rJywgJ2J0bkNhbmNlbCddO1xuXG4gICAgICAgICAgICBpZiAoYnV0dG9uT2tSZWFkT25seSkge1xuICAgICAgICAgICAgICAgIC8vINGD0LHQtdGA0LXQvCDQutC90L7Qv9C60YMg0J7QulxuICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0cy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcm93KSByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCk7XG5cbiAgICAgICAgICAgIHZhciBub21EYXRhID0gc2VsZi5saWJzWydub21lbmNsYXR1cmUnXS5maWx0ZXIoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGlmIChyb3cuZG9rID09PSAnTUsnIHx8IHJvdy5kb2sgPT09ICdWTUsnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vINC90LDQu9C+0LbQuNGC0Ywg0YTQuNC70YzRgtGAINC90LAg0YHQv9C40YHQvtC6INC/0LvQsNGC0LXQu9GM0YnQuNC60L7Qsiwg0LXRgdC70Lgg0YPQutCw0LfQsNC9INCy0LjRgtC10L3Rg9C80LHQtdGAXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHNlbGYubGlic1snYXN1dHVzZWQnXTtcbiAgICAgICAgICAgIGlmIChzZWxmLmRvY0RhdGEudmlpdGVuciAmJiBzZWxmLmxpYnNbJ3ZhbmVtJ10gJiYgc2VsZi5saWJzWyd2YW5lbSddLmxlbmd0aCAmJiBzZWxmLmxpYnNbJ2FzdXR1c2VkJ10gJiYgc2VsZi5saWJzWydhc3V0dXNlZCddLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgLy8g0L3QsNC50YLQuCDRgNC+0LTQuNGC0LXQu9GPXG4gICAgICAgICAgICAgICAgdmFyIHZhbmVtID0gc2VsZi5saWJzWyd2YW5lbSddLmZpbHRlcihmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3cudmlpdGVuciA9PT0gc2VsZi5kb2NEYXRhLnZpaXRlbnI7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFuZW0gJiYgdmFuZW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vINC90LDRiNC70Lgg0YDQvtC00LjRgtC10LvRjywg0YHRgtCw0LLQuNC8INGE0LjQu9GM0YLRgFxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdmFuZW0uZmluZChmdW5jdGlvbiAoa2lyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBraXJpLmlkID09PSByb3cuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDRgdC+0YDRgtC40YDQvtCy0LrQsCDQv9C+INC40LQg0LrQvtC00YNcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5rb29kLmxvY2FsZUNvbXBhcmUoYi5rb29kLCAnZW4nLCB7IHNlbnNpdGl2aXR5OiAnYmFzZScgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICcubW9kYWxQYWdlJyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxPYmplY3RzOiBtb2RhbE9iamVjdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdtb2RhbHBhZ2UtZ3JpZC1yb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZUJ0bkNsaWNrOiBzZWxmLm1vZGFsUGFnZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxQYWdlTmFtZTogJ1JlYSBsaXNhbWluZSAvIHBhcmFuZGFtaW5lJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJlZjogJ2dyaWQtcm93LWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnT3BlcmF0c2lvb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbm9taWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBub21EYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93Lm5vbWlkIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiByb3cua29vZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnbm9taWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdQYXJ0bmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5hc3V0dXNpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiByb3cuYXN1dHVzIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2FzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvblV1ZW5kYUxpYiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmOiBzZWxmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWI6ICdhc3V0dXNlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnQXJ2ZWxkdXMgYXJ2ZTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5hYSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZERhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdhYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dJbnB1dCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdTdW1tYTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihyb3cuc3VtbWEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0lucHV0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdLb3JyLiBrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICdrb250b2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2tvbnRvZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LmtvbnRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdUdW5udXM6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3R1bm51cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICd0dW5udXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ3R1bm51cyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LnR1bm51cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1Byb2plY3Q6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Byb2onLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAncHJvamVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sncHJvamVjdCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm93LnByb2osXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3Byb2plY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9C10YDQtdGA0LDRgdGH0LXRgiDQuNGC0L7Qs9C+0LLQvtC5INGB0YPQvNC80Ysg0LTQvtC60YPQvNC10L3RgtCwXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlY2FsY0RvY1N1bW1hJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlY2FsY0RvY1N1bW1hKCkge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVmc1snZG9jdW1lbnQnXTtcbiAgICAgICAgICAgIGRvYy5kb2NEYXRhWydzdW1tYSddID0gMDtcbiAgICAgICAgICAgIGRvYy5kb2NEYXRhLmdyaWREYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xuICAgICAgICAgICAgICAgIGRvYy5kb2NEYXRhWydzdW1tYSddICs9IE51bWJlcihyb3dbJ3N1bW1hJ10pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQv9C+0LTRgdGC0LDQstC40YIg0LrQvtC0INC+0L/QtdGA0LDRhtC40LhcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVjYWxjUm93U3VtbScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNhbGNSb3dTdW1tKCkge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMucmVmc1snZG9jdW1lbnQnXTtcblxuICAgICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhkb2MuZ3JpZFJvd0RhdGEpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/Qv9C+0LTRgdGC0LDQstC40Lwg0L3QsNC40LzQtdC90L7QstCw0L3QuNC1INGD0YHQu9C+0LPRg1xuXG4gICAgICAgICAgICBpZiAoZG9jLmdyaWRSb3dEYXRhWydub21pZCddKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vbURhdGFOYW1lID0gZG9jLmxpYnNbJ25vbWVuY2xhdHVyZSddLmZpbmQoZnVuY3Rpb24gKGxpYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGliLmlkID09PSBOdW1iZXIoZG9jLmdyaWRSb3dEYXRhWydub21pZCddKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChub21EYXRhTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBkb2MuZ3JpZFJvd0RhdGFbJ2tvb2QnXSA9IG5vbURhdGFOYW1lLmtvb2Q7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsnbmltZXR1cyddID0gbm9tRGF0YU5hbWUubmltZXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8v0L/QvtC00YHRgtCw0LLQuNC8INC90LDQuNC80LXQvdC+0LLQsNC90LjQtVxuICAgICAgICAgICAgaWYgKGRvYy5ncmlkUm93RGF0YVsnYXN1dHVzaWQnXSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGFzdXR1c0RhdGFOYW1lID0gZG9jLmxpYnNbJ2FzdXR1c2VkJ10uZmluZChmdW5jdGlvbiAobGliKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaWIuaWQgPT09IE51bWJlcihkb2MuZ3JpZFJvd0RhdGFbJ2FzdXR1c2lkJ10pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFzdXR1c0RhdGFOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsnYXN1dHVzJ10gPSBhc3V0dXNEYXRhTmFtZS5uaW1ldHVzO1xuICAgICAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQvdC1INGD0LrQsNC30LDQvSDRgNCw0YHRhy4g0YHRh9C10YIg0Lgg0LXRgdGC0Ywg0LIg0LrQsNGA0YLQvtGH0LrQtSwg0YLQviDQutC+0L/QuNGA0YPQtdC8XG4gICAgICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydhYSddICYmIGFzdXR1c0RhdGFOYW1lLnBhbmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsnYWEnXSA9IGFzdXR1c0RhdGFOYW1lLnBhbms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQstCw0LvQuNC00LDRgtC+0YAg0LTQu9GPINGB0YLRgNC+0LrQuCDQs9GA0LjQtNCwXHJcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ3JpZFZhbGlkYXRlRmllbGRzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdyaWRWYWxpZGF0ZUZpZWxkcygpIHtcbiAgICAgICAgICAgIHZhciB3YXJuaW5nID0gJyc7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5yZWZzWydkb2N1bWVudCddO1xuICAgICAgICAgICAgaWYgKGRvYyAmJiBkb2MuZ3JpZFJvd0RhdGEpIHtcblxuICAgICAgICAgICAgICAgIC8vINGC0L7Qu9GM0LrQviDQv9C+0YHQu9C1INC/0YDQvtCy0LXRgNC60Lgg0YTQvtGA0LzRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXG4gICAgICAgICAgICAgICAgaWYgKGRvYy5ncmlkUm93RGF0YSAmJiAhZG9jLmdyaWRSb3dEYXRhWydub21pZCddKSB3YXJuaW5nID0gd2FybmluZyArICcg0JrQvtC0INC+0L/QtdGA0LDRhtC40LgnO1xuICAgICAgICAgICAgICAgIGlmICghZG9jLmdyaWRSb3dEYXRhWydzdW1tYSddKSB3YXJuaW5nID0gd2FybmluZyArICcg0KHRg9C80LzQsCc7XG4gICAgICAgICAgICAgICAgaWYgKCFkb2MuZ3JpZFJvd0RhdGFbJ2FzdXR1c2lkJ10pIHdhcm5pbmcgPSB3YXJuaW5nICsgJyDQn9C70LDRgtC40LvRjNGJ0LjQuic7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY1Jvd1N1bW0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2FsY0RvY1N1bW1hKCdzdW1tYScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdhcm5pbmc7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVm1rO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5WbWsucHJvcFR5cGVzID0ge1xuICAgIGRvY0lkOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGluaXREYXRhOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHVzZXJEYXRhOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5WbWsuZGVmYXVsdFByb3BzID0ge1xuICAgIGluaXREYXRhOiB7fSxcbiAgICB1c2VyRGF0YToge31cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVm1rO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy92bWsvZG9jdW1lbnQvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyODVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtkb2NSb3c6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J3JvdycvKlxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJsdWUnXHJcbiAgICAgICAgKi99LGRvY0NvbHVtbjp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJywvKlxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHllbGxvdycsXHJcbiAgICAgICAgKi93aWR0aDonNTAlJ30sZG9jOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLypcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBicm93bidcclxuICAgICAgICAqL30sZ3JpZFJvdzp7Ym9yZGVyOicxcHggc29saWQgYmxhY2snLGJhY2tncm91bmRDb2xvcjond2hpdGUnLHBvc2l0aW9uOidyZWxhdGl2ZScsbWFyZ2luOicxMCUgMzAlIDEwJSAzMCUnLHdpZHRoOidhdXRvJyxvcGFjaXR5OicxJyx0b3A6JzEwMHB4J30sZG9jVG9vbGJhcldhcm5pbmc6e2Zsb2F0OidsZWZ0JyxiYWNrZ3JvdW5kQ29sb3I6J3JlZCcsbWFyZ2luOicxMHB4J30sZ3JpZDp7bWFpblRhYmxlOnt3aWR0aDonMTAwJSd9LGhlYWRlclRhYmxlOnt3aWR0aDonMTAwJSd9LGdyaWRDb250YWluZXI6e3dpZHRoOicxMDAlJ319LGJ0bkVkaXQ6e3dpZHRoOidtaW4tY29udGVudCd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvdm1rL2RvY3VtZW50L3Ztay1zdHlsZS5qc1xuLy8gbW9kdWxlIGlkID0gMjg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIERvY3VtZW50UmVnaXN0ZXIgPSByZXF1aXJlKCcuLy4uL2RvY3VtZW50cy9kb2N1bWVudHMuanN4Jyk7XG52YXIgSW5wdXROdW1iZXIgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL2lucHV0LW51bWJlci9pbnB1dC1udW1iZXIuanN4Jyk7XG52YXIgZ2V0U3VtID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9saWJzL2dldFN1bScpO1xuXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi9zb3JkZXItcmVnaXN0ZXItc3R5bGVzJyk7XG52YXIgRE9DX1RZUEVfSUQgPSAnU09SREVSJztcblxudmFyIERvY0NvbnRleHQgPSByZXF1aXJlKCcuLy4uLy4uL2RvYy1jb250ZXh0LmpzJyk7XG5cbi8qKlxyXG4gKiDQmtC70LDRgdGBINGA0LXQsNC70LjQt9GD0LXRgiDQtNC+0LrRg9C80LXQvdGCINGB0L/RgNCw0LLQvtGH0L3QuNC60LAg0L/RgNC40LfQvdCw0LrQvtCyLlxyXG4gKi9cblxudmFyIERvY3VtZW50cyA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhEb2N1bWVudHMsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIERvY3VtZW50cyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9jdW1lbnRzKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRG9jdW1lbnRzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRG9jdW1lbnRzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnJlbmRlcmVyID0gX3RoaXMucmVuZGVyZXIuYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzdW1tYTogMCxcbiAgICAgICAgICAgIHJlYWQ6IDBcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERvY3VtZW50cywgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2N1bWVudFJlZ2lzdGVyLCB7IGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnkgPyB0aGlzLnByb3BzLmhpc3RvcnkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IHRoaXMucHJvcHMubW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICByZWY6ICdyZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogdGhpcy5yZW5kZXJlciB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0TnVtYmVyLCB7IHRpdGxlOiAnUmVhZCBrb2trdTonLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVhZF9rb2trdScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXJlYWQnLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHRoaXMuc3RhdGUucmVhZCkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dE51bWJlciwgeyB0aXRsZTogJ1N1bW1hIGtva2t1OicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdW1tYV9rb2trdScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMudG90YWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXN1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcih0aGlzLnN0YXRlLnN1bW1hKS50b0ZpeGVkKDIpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICB2YXIgc3VtbWEgPSBzZWxmLmdyaWREYXRhID8gZ2V0U3VtKHNlbGYuZ3JpZERhdGEsICdzdW1tYScpIDogMDtcbiAgICAgICAgICAgIGlmIChzdW1tYSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzdW1tYTogc3VtbWEsIHJlYWQ6IHNlbGYuZ3JpZERhdGEubGVuZ3RoIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEb2N1bWVudHM7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERvY3VtZW50cztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvc29yZGVyL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17Z3JpZDp7bWFpblRhYmxlOnt3aWR0aDonMTAwJScsdGQ6e2JvcmRlcjonMXB4IHNvbGlkIGxpZ2h0R3JleScsZGlzcGxheTondGFibGUtY2VsbCcscGFkZGluZ0xlZnQ6JzVweCd9fSxoZWFkZXJUYWJsZTp7d2lkdGg6JzEwMCUnfSxncmlkQ29udGFpbmVyOnt3aWR0aDonMTAwJSd9fSxkb2M6e2hlaWdodDonMTAwJSd9LHRvdGFsOnt3aWR0aDonYXV0byd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvc29yZGVyL3NvcmRlci1yZWdpc3Rlci1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBEb2N1bWVudFRlbXBsYXRlID0gcmVxdWlyZSgnLi4vLi4vZG9jdW1lbnRUZW1wbGF0ZS9pbmRleC5qc3gnKSxcbiAgICBJbnB1dFRleHQgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LXRleHQvaW5wdXQtdGV4dC5qc3gnKSxcbiAgICBJbnB1dERhdGUgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LWRhdGUvaW5wdXQtZGF0ZS5qc3gnKSxcbiAgICBJbnB1dE51bWJlciA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQtbnVtYmVyL2lucHV0LW51bWJlci5qc3gnKSxcbiAgICBTZWxlY3QgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3NlbGVjdC9zZWxlY3QuanN4JyksXG4gICAgU2VsZWN0RGF0YSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0LWRhdGEvc2VsZWN0LWRhdGEuanN4JyksXG4gICAgQnV0dG9uRWRpdCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvYnV0dG9uLXJlZ2lzdGVyL2J1dHRvbi1yZWdpc3Rlci1lZGl0L2J1dHRvbi1yZWdpc3Rlci1lZGl0LmpzeCcpLFxuICAgIFRleHRBcmVhID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCcpLFxuICAgIERhdGFHcmlkID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9kYXRhLWdyaWQvZGF0YS1ncmlkLmpzeCcpLFxuICAgIERva1Byb3AgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL2RvY3Byb3AvZG9jcHJvcC5qc3gnKSxcbiAgICByZWxhdGVkRG9jdW1lbnRzID0gcmVxdWlyZSgnLi4vLi4vLi4vbWl4aW4vcmVsYXRlZERvY3VtZW50cy5qc3gnKSxcbiAgICBNb2RhbFBhZ2UgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL21vZGFscGFnZS9tb2RhbFBhZ2UuanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9zb3JkZXItc3R5bGUnKTtcblxudmFyIERPQ19UWVBFX0lEID0gJ1NPUkRFUic7XG52YXIgRG9jQ29udGV4dCA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vZG9jLWNvbnRleHQuanMnKTtcblxudmFyIExJQlJBUklFUyA9IFt7IGlkOiAna29udG9kJywgZmlsdGVyOiAnJyB9LCB7IGlkOiAnZG9rUHJvcHMnLCBmaWx0ZXI6ICcnIH0sIHsgaWQ6ICd0dW5udXMnLCBmaWx0ZXI6ICcnIH0sIHsgaWQ6ICdwcm9qZWN0JywgZmlsdGVyOiAnJyB9LCB7IGlkOiAnbm9tZW5jbGF0dXJlJywgZmlsdGVyOiAnd2hlcmUgZG9rID0gXFwnU09SREVSXFwnJyB9LCB7IGlkOiAna2Fzc2EnLCBmaWx0ZXI6ICcnIH1dO1xuXG52YXIgU29yZGVyID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFNvcmRlciwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gU29yZGVyKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTb3JkZXIpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTb3JkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTb3JkZXIpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBsb2FkZWREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgIGRvY0lkOiBwcm9wcy5kb2NJZCA/IHByb3BzLmRvY0lkIDogTnVtYmVyKHByb3BzLm1hdGNoLnBhcmFtcy5kb2NJZCksXG4gICAgICAgICAgICBsYXBzSWQ6IG51bGwsXG4gICAgICAgICAgICBtb2R1bGU6ICdsYXBzZWQnLFxuICAgICAgICAgICAgaXNBc2tUb0NyZWF0ZUZyb21BcnY6IHRydWUsIC8vINC10YHQu9C4INGD0LrQsNC30LDQvSDRgdGH0LXRgiwg0LAg0LTQvtC6LtC40LQgPSAwICwg0YLQviDQvNC+0LbQvdC+INGB0L7Qt9C00L/RgtGMINC+0YDQtNC10YAg0L/QviDRgdGH0LXRgtGDXG4gICAgICAgICAgICBnZXRTTUs6IGZhbHNlLFxuICAgICAgICAgICAgYXJ2SWQ6IDBcblxuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5jcmVhdGVHcmlkUm93ID0gX3RoaXMuY3JlYXRlR3JpZFJvdy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVjYWxjRG9jU3VtbWEgPSBfdGhpcy5yZWNhbGNEb2NTdW1tYS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVjYWxjUm93U3VtbSA9IF90aGlzLnJlY2FsY1Jvd1N1bW0uYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBfdGhpcy5yZW5kZXJlci5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ3JpZFZhbGlkYXRlRmllbGRzID0gX3RoaXMuZ3JpZFZhbGlkYXRlRmllbGRzLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5tb2RhbFBhZ2VCdG5DbGljayA9IF90aGlzLm1vZGFsUGFnZUJ0bkNsaWNrLmJpbmQoX3RoaXMpO1xuXG4gICAgICAgIF90aGlzLnBhZ2VzID0gW3sgcGFnZU5hbWU6ICdTaXNzZXR1bGlrdSBrYXNzYW9yZGVyJywgZG9jVHlwZUlkOiAnU09SREVSJyB9XTtcblxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNvcmRlciwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5oaXN0b3J5ICYmIHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbi5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXBzSWQgPSB0aGlzLnByb3BzLmhpc3RvcnkubG9jYXRpb24uc3RhdGUubGFwc0lkO1xuICAgICAgICAgICAgICAgIHZhciBfbW9kdWxlID0gdGhpcy5wcm9wcy5oaXN0b3J5LmxvY2F0aW9uLnN0YXRlLm1vZHVsZSA/IHRoaXMucHJvcHMuaGlzdG9yeS5sb2NhdGlvbi5zdGF0ZS5tb2R1bGUgOiAnbGFwc2VkJztcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbGFwc0lkOiBsYXBzSWQsIG1vZHVsZTogX21vZHVsZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50VGVtcGxhdGUsIHsgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgcmVmOiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5LFxuICAgICAgICAgICAgICAgIGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5zdGF0ZS5tb2R1bGUsXG4gICAgICAgICAgICAgICAgcmVsb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxpYnM6IExJQlJBUklFUyxcbiAgICAgICAgICAgICAgICBwYWdlczogdGhpcy5wYWdlcyxcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcbiAgICAgICAgICAgICAgICBjcmVhdGVHcmlkUm93OiB0aGlzLmNyZWF0ZUdyaWRSb3csXG4gICAgICAgICAgICAgICAgZ3JpZFZhbGlkYXRvcjogdGhpcy5ncmlkVmFsaWRhdGVGaWVsZHMsXG4gICAgICAgICAgICAgICAgcmVjYWxjRG9jOiB0aGlzLnJlY2FsY0RvY1N1bW1hLFxuICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudDogJ2lucHV0LW51bWJlcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0JLQtdGA0L3QtdGCINC60LDRgdGC0L7QvNC90YvQtSDQutC+0LzQv9C+0L3QtdC90YLRiyDQtNC+0LrRg9C80LXQvdGC0LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICB2YXIgYnBtID0gc2VsZi5kb2NEYXRhICYmIHNlbGYuZG9jRGF0YS5icG0gPyBzZWxmLmRvY0RhdGEuYnBtIDogW10sXG4gICAgICAgICAgICAgICAgaXNFZGl0ZU1vZGUgPSBzZWxmLnN0YXRlLmVkaXRlZDtcblxuICAgICAgICAgICAgLy8g0YTQvtGA0LzQuNGA0YPQtdC8INC30LDQstC40YHQuNC80L7RgdGC0LhcbiAgICAgICAgICAgIGlmIChzZWxmLmRvY0RhdGEucmVsYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRlZERvY3VtZW50cyhzZWxmKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGlzTmV3RG9jID0gIXNlbGYuZG9jRGF0YS5pZCB8fCBzZWxmLmRvY0RhdGEuaWQgPT0gMDtcbiAgICAgICAgICAgIGlmICgoIXNlbGYuZG9jRGF0YS5pZCB8fCBzZWxmLmRvY0RhdGEuaWQgPT0gMCkgJiYgc2VsZi5kb2NEYXRhLmFydmlkICYmIHRoaXMuc3RhdGUuaXNBc2tUb0NyZWF0ZUZyb21BcnYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ2V0U01LOiB0cnVlLCBpc0Fza1RvQ3JlYXRlRnJvbUFydjogZmFsc2UsIGFydklkOiBzZWxmLmRvY0RhdGEuYXJ2aWQgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2MgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ051bWJlcjonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcoc2VsZi5kb2NEYXRhLm51bWJlcikgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9rUHJvcCwgeyB0aXRsZTogJ0tvbnRlZXJpbWluZTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZG9rbGF1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAnZG9rUHJvcHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuZG9rbGF1c2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc2VsZi5kb2NEYXRhLmRva3Byb3AgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnZG9rcHJvcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0RGF0ZSwgeyB0aXRsZTogJ0t1dXBcXHhFNGV2OicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2twdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5rcHYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQta3B2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdLYXNzYTonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrYXNzYV9pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ2thc3NhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmthc3NhX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sna2Fzc2EnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFN0cmluZyhzZWxmLmRvY0RhdGEua2Fzc2EpIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1rYXNzYUlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0RGF0YSwgeyB0aXRsZTogJ1JhaGEgc2FhamE6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYXN1dHVzaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYk5hbWU6ICdhc3V0dXNlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsRmllbGRzOiBbJ25pbWV0dXMnLCAncmVna29vZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuYXN1dHVzaWQgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlbGYuZG9jRGF0YS5hc3V0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRUb0dyaWQ6ICduaW1ldHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZFRvRGF0YTogJ2FzdXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LWFzdXR1c2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5EZWxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b25FZGl0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnYnRuRWRpdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdNdXVkYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5idG5FZGl0QXN1dHVzQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogIWlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuYnRuRWRpdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICFpc05ld0RvYyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnQXJ2ZSBuci4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdfYXJ2bnInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuYXJ2bnIgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtYXJ2bnInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6ICFpc05ld0RvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSB9KSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05ld0RvYyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0RGF0YSwgeyB0aXRsZTogJ0FydmUgbnIuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYXJ2aWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYk5hbWU6ICdhcnYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbEZpZWxkczogWydudW1iZXInLCAna3B2JywgJ2FzdXR1cyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuYXJ2aWQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LWFydmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckRhdGE6IHNlbGYudXNlckRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ0Rva3VtZW50OicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Rva3VtZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmRva3VtZW50IHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWRva3VtZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdOaW1pJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICduaW1pJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3RleHRhcmVhLW5pbWknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5uaW1pIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRBcmVhLCB7IHRpdGxlOiAnQWFkcmVzczonLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FhZHJlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtYWFkcmVzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmFhZHJlc3MgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdBbHVzOicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYWx1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1hbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEuYWx1cyB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEYXRhR3JpZCwgeyBzb3VyY2U6ICdkZXRhaWxzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWREYXRhOiBzZWxmLmRvY0RhdGEuZ3JpZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkQ29sdW1uczogc2VsZi5kb2NEYXRhLmdyaWRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9vbEJhcjogaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcmlkUm93OiBzZWxmLmhhbmRsZUdyaWRSb3csXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHcmlkQnRuQ2xpY2s6IHNlbGYuaGFuZGxlR3JpZEJ0bkNsaWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBzdHlsZXMuZ3JpZC5oZWFkZXJUYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2RhdGEtZ3JpZCcgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdTdW1tYTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1zdW1tYScsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNlbGYuZG9jRGF0YS5zdW1tYSkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0QXJlYSwgeyB0aXRsZTogJ01cXHhFNHJrdXNlZDonLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ211dWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm11dWQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHNlbGYuc3RhdGUuZ3JpZFJvd0VkaXQgPyB0aGlzLmNyZWF0ZUdyaWRSb3coc2VsZikgOiBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIE1vZGFsUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdtb2RhbHBhZ2VDcmVhdGVPcmRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogdGhpcy5tb2RhbFBhZ2VCdG5DbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICdLYXMga29vc3RhIFNNSycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnN0YXRlLmdldFNNSyB9LFxuICAgICAgICAgICAgICAgICAgICAnS2FzIGtvb3N0YSBrYXNzYW9yZGVyPydcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogd2lsbCBjcmVhdGUgU09SREVSXHJcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vZGFsUGFnZUJ0bkNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vZGFsUGFnZUJ0bkNsaWNrKGJ0bkV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdldFNNSzogZmFsc2UgfSk7XG4gICAgICAgICAgICBpZiAoYnRuRXZlbnQgPT09ICdPaycpIHtcbiAgICAgICAgICAgICAgICB2YXIgRG9jID0gdGhpcy5yZWZzWydkb2N1bWVudCddO1xuICAgICAgICAgICAgICAgIHZhciBhcGkgPSAnL2NhbGMva29vc3RhU29yZGVyJztcblxuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUgPyB0aGlzLnByb3BzLm1vZHVsZSA6IERvY0NvbnRleHQubW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IERvY0NvbnRleHQudXNlckRhdGEudXNlcklkLFxuICAgICAgICAgICAgICAgICAgICB1dWlkOiBEb2NDb250ZXh0LnVzZXJEYXRhLnV1aWQsXG4gICAgICAgICAgICAgICAgICAgIGRvY3M6IFtOdW1iZXIodGhpcy5zdGF0ZS5hcnZJZCldLFxuICAgICAgICAgICAgICAgICAgICBzZWlzdWdhOiBEb2MuZG9jRGF0YSAmJiBEb2MuZG9jRGF0YS5rcHYgPyBEb2MuZG9jRGF0YS5rcHYgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBEb2NDb250ZXh0W2FwaV0gPyBEb2NDb250ZXh0W2FwaV0gOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB0YXNrTmFtZTogJ2tvb3N0YVNvcmRlcidcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgRG9jLmZldGNoRGF0YSgnUG9zdCcsIGFwaSwgeyBkYXRhOiBwYXJhbXMgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmVycm9yX21lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZzogJ3ZpZ2E6ICcgKyByZXNwb25zZS5lcnJvcl9tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RG9jSWQgPSByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5yZXN1bHQgJiYgcmVzcG9uc2UuZGF0YS5yZXN1bHQuZG9jX2lkID8gcmVzcG9uc2UuZGF0YS5yZXN1bHQuZG9jX2lkIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnRWR1a2FsdCwgc3V1bmF0YW4gLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ1R5cGU6ICdvaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINC/0LXRgNC10YXQvtC00LjQvCDQvdCwINGB0L7Qt9C00LDQvdC90Lkg0LTQvtC6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RvY0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAnLycgKyAoX3RoaXMyLnByb3BzLm1vZHVsZSA/IF90aGlzMi5wcm9wcy5tb2R1bGUgOiBEb2NDb250ZXh0Lm1vZHVsZSkgKyAnLycgKyBET0NfVFlQRV9JRCArICcvJyArIG5ld0RvY0lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLmhpc3RvcnkucmVwbGFjZSgnL3JlbG9hZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLmhpc3RvcnkucmVwbGFjZShjdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6ICdUZWtraXMgdmlnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdUeXBlOiAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignYXBpIGNhbGwgZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAnVmlnYSAnICsgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nVHlwZTogJ2Vycm9yJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCy0LDQu9C40LTQsNGC0L7RgCDQtNC70Y8g0YHRgtGA0L7QutC4INCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcGFyYW0gZ3JpZFJvd0RhdGEg0YHRgtGA0L7QutCwINCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdncmlkVmFsaWRhdGVGaWVsZHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ3JpZFZhbGlkYXRlRmllbGRzKCkge1xuICAgICAgICAgICAgdmFyIHdhcm5pbmcgPSAnJztcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J107XG4gICAgICAgICAgICBpZiAoZG9jICYmIGRvYy5ncmlkUm93RGF0YSkge1xuXG4gICAgICAgICAgICAgICAgLy8g0YLQvtC70YzQutC+INC/0L7RgdC70LUg0L/RgNC+0LLQtdGA0LrQuCDRhNC+0YDQvNGLINC90LAg0LLQsNC70LjQtNC90L7RgdGC0YxcbiAgICAgICAgICAgICAgICBpZiAoZG9jLmdyaWRSb3dEYXRhICYmICFkb2MuZ3JpZFJvd0RhdGFbJ25vbWlkJ10pIHdhcm5pbmcgPSB3YXJuaW5nICsgJyDQmtC+0LQg0L7Qv9C10YDQsNGG0LjQuCc7XG4gICAgICAgICAgICAgICAgaWYgKCFkb2MuZ3JpZFJvd0RhdGFbJ3N1bW1hJ10pIHdhcm5pbmcgPSB3YXJuaW5nICsgJyDQodGD0LzQvNCwJztcblxuICAgICAgICAgICAgICAgIHRoaXMucmVjYWxjUm93U3VtbSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjYWxjRG9jU3VtbWEoJ3N1bW1hJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2FybmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC/0L7QtNGB0YLQsNCy0LjRgiDQutC+0LQg0L7Qv9C10YDQsNGG0LjQuFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWNhbGNSb3dTdW1tJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlY2FsY1Jvd1N1bW0oKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5yZWZzWydkb2N1bWVudCddO1xuXG4gICAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKGRvYy5ncmlkUm93RGF0YSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL9C/0L7QtNGB0YLQsNCy0LjQvCDQvdCw0LjQvNC10L3QvtCy0LDQvdC40LUg0YPRgdC70L7Qs9GDXG5cbiAgICAgICAgICAgIHZhciBub21EYXRhTmFtZSA9IGRvYy5saWJzWydub21lbmNsYXR1cmUnXS5maWx0ZXIoZnVuY3Rpb24gKGxpYikge1xuICAgICAgICAgICAgICAgIGlmIChsaWIuaWQgPT09IGRvYy5ncmlkUm93RGF0YVsnbm9taWQnXSkgcmV0dXJuIGxpYjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoZG9jLmdyaWRSb3dEYXRhWydub21pZCddKSB7XG4gICAgICAgICAgICAgICAgZG9jLmdyaWRSb3dEYXRhWydrb29kJ10gPSBub21EYXRhTmFtZVswXS5rb29kO1xuICAgICAgICAgICAgICAgIGRvYy5ncmlkUm93RGF0YVsnbmltZXR1cyddID0gbm9tRGF0YU5hbWVbMF0ubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCf0LXRgNC10YDQsNGB0YfQtdGCINGB0YPQvNC8INC00L7QutGD0LzQtdC90YLQsFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWNhbGNEb2NTdW1tYScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNhbGNEb2NTdW1tYSgpIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLnJlZnNbJ2RvY3VtZW50J107XG4gICAgICAgICAgICBkb2MuZG9jRGF0YVsnc3VtbWEnXSA9IDA7XG4gICAgICAgICAgICBkb2MuZG9jRGF0YS5ncmlkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICBkb2MuZG9jRGF0YVsnc3VtbWEnXSArPSBOdW1iZXIocm93WydzdW1tYSddKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog0YTQvtGA0LzQuNGA0YPQtdGCINC+0LHRitC10LrRgtGLINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0YHRgtGA0L7QutC4INCz0YDQuNC00LBcclxuICAgICAgICAgKiBAcmV0dXJucyB7WE1MfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmlkUm93JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUdyaWRSb3coc2VsZikge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHNlbGYuZ3JpZFJvd0RhdGEgPyBzZWxmLmdyaWRSb3dEYXRhIDoge30sXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVNZXNzYWdlID0gJycsXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5zdGF0ZS53YXJuaW5nXG4gICAgICAgICAgICBidXR0b25Pa1JlYWRPbmx5ID0gdmFsaWRhdGVNZXNzYWdlLmxlbmd0aCA+IDAgfHwgIXNlbGYuc3RhdGUuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICBtb2RhbE9iamVjdHMgPSBbJ2J0bk9rJywgJ2J0bkNhbmNlbCddO1xuXG4gICAgICAgICAgICBpZiAoYnV0dG9uT2tSZWFkT25seSkge1xuICAgICAgICAgICAgICAgIC8vINGD0LHQtdGA0LXQvCDQutC90L7Qv9C60YMg0J7QulxuICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0cy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcm93KSByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JywgbnVsbCk7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnLm1vZGFsUGFnZScgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICBNb2RhbFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsT2JqZWN0czogbW9kYWxPYmplY3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnbW9kYWxwYWdlLWdyaWQtcm93JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbFBhZ2VCdG5DbGljazogc2VsZi5tb2RhbFBhZ2VDbGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsUGFnZU5hbWU6ICdSZWEgbGlzYW1pbmUgLyBwYXJhbmRhbWluZScgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZWY6ICdncmlkLXJvdy1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXRlLmdyaWRXYXJuaW5nLmxlbmd0aCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGF0ZS5ncmlkV2FybmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdUZWVudXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbm9taWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJzOiAnbm9tZW5jbGF0dXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydub21lbmNsYXR1cmUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJvdy5ub21pZCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHJvdy5rb29kIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdub21pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnVGVlbnVzZSBrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdTdW1tYTogJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N1bW1hJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcihyb3cuc3VtbWEpIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmREYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc3VtbWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93SW5wdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0tvcnIuIGtvbnRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2tvbnRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ2tvbnRvZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sna29udG9kJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3cua29udG8gfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2tvbnRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUdyaWRSb3dDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1R1bm51czonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ3R1bm51cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sndHVubnVzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3cudHVubnVzIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0dW5udXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlR3JpZFJvd0NoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnUHJvamVjdDonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAncHJvaicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICdwcm9qZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydwcm9qZWN0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3cucHJvaiB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAncHJvamVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVHcmlkUm93Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTb3JkZXI7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5Tb3JkZXIucHJvcFR5cGVzID0ge1xuICAgIGRvY0lkOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGluaXREYXRhOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHVzZXJEYXRhOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5Tb3JkZXIuZGVmYXVsdFByb3BzID0ge1xuICAgIGluaXREYXRhOiB7fSxcbiAgICB1c2VyRGF0YToge31cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU29yZGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9zb3JkZXIvZG9jdW1lbnQvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyODlcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtkb2NSb3c6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J3JvdycvKlxyXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBibHVlJ1xyXG4qL30sZG9jQ29sdW1uOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLC8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHllbGxvdycsXHJcbiovd2lkdGg6JzUwJSd9LGRvYzp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJy8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJyb3duJ1xyXG4qL30sZ3JpZFJvdzp7Ym9yZGVyOicxcHggc29saWQgYmxhY2snLGJhY2tncm91bmRDb2xvcjond2hpdGUnLHBvc2l0aW9uOidyZWxhdGl2ZScsbWFyZ2luOicxMCUgMzAlIDEwJSAzMCUnLHdpZHRoOidhdXRvJyxvcGFjaXR5OicxJyx0b3A6JzEwMHB4J30sZG9jVG9vbGJhcldhcm5pbmc6e2Zsb2F0OidsZWZ0JyxiYWNrZ3JvdW5kQ29sb3I6J3JlZCcsbWFyZ2luOicxMHB4J30sZ3JpZDp7bWFpblRhYmxlOnt3aWR0aDonMTAwJSd9LGhlYWRlclRhYmxlOnt3aWR0aDonMTAwJSd9LGdyaWRDb250YWluZXI6e3dpZHRoOicxMDAlJ319LGJ0bkVkaXQ6e3dpZHRoOidtaW4tY29udGVudCd9fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3Mvc29yZGVyL2RvY3VtZW50L3NvcmRlci1zdHlsZS5qc1xuLy8gbW9kdWxlIGlkID0gMjkwXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIERvY3VtZW50cyA9IHJlcXVpcmUoJy4vLi4vZG9jdW1lbnRzL2RvY3VtZW50cy5qc3gnKTtcbnZhciBCdXR0b25VcGxvYWQgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvdXBsb2FkX2J1dHRvbi9pbmRleC5qc3gnKTtcbnZhciBUb29sYmFyQ29udGFpbmVyID0gcmVxdWlyZSgnLi8uLi8uLi9jb21wb25lbnRzL3Rvb2xiYXItY29udGFpbmVyL3Rvb2xiYXItY29udGFpbmVyLmpzeCcpO1xuXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi9ub21lbmNsYXR1cmUtcmVnaXN0ZXItc3R5bGVzJyk7XG52YXIgRE9DX1RZUEVfSUQgPSAnTk9NRU5DTEFUVVJFJztcblxudmFyIERvY1JpZ2h0cyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29uZmlnL2RvY19yaWdodHMnKTtcbnZhciBjaGVja1JpZ2h0cyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vbGlicy9jaGVja1JpZ2h0cycpO1xudmFyIERvY0NvbnRleHQgPSByZXF1aXJlKCcuLy4uLy4uL2RvYy1jb250ZXh0LmpzJyk7XG52YXIgZG9jUmlnaHRzID0gRG9jUmlnaHRzW0RPQ19UWVBFX0lEXSA/IERvY1JpZ2h0c1tET0NfVFlQRV9JRF0gOiBbXTtcblxuLyoqXHJcbiAqINCa0LvQsNGB0YEg0YDQtdCw0LvQuNC30YPQtdGCINC00L7QutGD0LzQtdC90YIg0YHQv9GA0LDQstC+0YfQvdC40LrQsCDQv9GA0LjQt9C90LDQutC+0LIuXHJcbiAqL1xuXG52YXIgTm9tZW5jbGF0dXJlcyA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhOb21lbmNsYXR1cmVzLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBOb21lbmNsYXR1cmVzKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb21lbmNsYXR1cmVzKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTm9tZW5jbGF0dXJlcy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE5vbWVuY2xhdHVyZXMpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBfdGhpcy5oYW5kbGVDbGljay5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBfdGhpcy5yZW5kZXJlci5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhOb21lbmNsYXR1cmVzLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9jdW1lbnRzLCB7IGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSA/IHRoaXMucHJvcHMuaGlzdG9yeSA6IG51bGwsXG4gICAgICAgICAgICAgICAgcmVmOiAncmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUsXG4gICAgICAgICAgICAgICAgZG9jVHlwZUlkOiBET0NfVFlQRV9JRCxcbiAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGVzLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogdGhpcy5yZW5kZXJlciB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyZXIoKSB7XG4gICAgICAgICAgICB2YXIgdXNlclJvbGVzID0gRG9jQ29udGV4dC51c2VyRGF0YSA/IERvY0NvbnRleHQudXNlckRhdGEucm9sZXMgOiBbXTtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgVG9vbGJhckNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIGNoZWNrUmlnaHRzKHVzZXJSb2xlcywgZG9jUmlnaHRzLCAnaW1wb3J0JykgPyBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvblVwbG9hZCwge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdidG5VcGxvYWQnLFxuICAgICAgICAgICAgICAgICAgICBkb2NUeXBlSWQ6IERPQ19UWVBFX0lELFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZXM6ICcuY3N2J1xuICAgICAgICAgICAgICAgIH0pIDogbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINC60LDRgdGC0L7QvNC90YvQuSDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQuiDQvdCwINC60L3QvtC/0LrRgyDQuNC80L/QvtGA0YLQsFxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhyZXN1bHQpIHtcblxuICAgICAgICAgICAgLy/QvtCx0L3QvtCy0LjQvCDQtNCw0L3QvdGL0LVcbiAgICAgICAgICAgIHZhciBEb2MgPSB0aGlzLnJlZnNbJ3JlZ2lzdGVyJ107XG4gICAgICAgICAgICBpZiAoIURvYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIERvYy5zZXRTdGF0ZSh7IHdhcm5pbmc6ICdFZHVrYWx0OiAgJyArIHJlc3VsdCArICc6ICcsIHdhcm5pbmdUeXBlOiAnb2snIH0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBEb2MuZmV0Y2hEYXRhKCdzZWxlY3REb2NzJyk7XG4gICAgICAgICAgICAgICAgfSwgMTAwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE5vbWVuY2xhdHVyZXM7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5vbWVuY2xhdHVyZXM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL25vbWVuY2xhdHVyZS9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2dyaWQ6e21haW5UYWJsZTp7d2lkdGg6JzEwMCUnLHRkOntib3JkZXI6JzFweCBzb2xpZCBsaWdodEdyZXknLGRpc3BsYXk6J3RhYmxlLWNlbGwnLHBhZGRpbmdMZWZ0Oic1cHgnfX0saGVhZGVyVGFibGU6e3dpZHRoOicxMDAlJ30sZ3JpZENvbnRhaW5lcjp7d2lkdGg6JzEwMCUnfX19O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9ub21lbmNsYXR1cmUvbm9tZW5jbGF0dXJlLXJlZ2lzdGVyLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIERvY3VtZW50VGVtcGxhdGUgPSByZXF1aXJlKCcuLy4uLy4uL2RvY3VtZW50VGVtcGxhdGUvaW5kZXguanN4JyksXG4gICAgSW5wdXRUZXh0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC10ZXh0L2lucHV0LXRleHQuanN4JyksXG4gICAgSW5wdXREYXRlID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC1kYXRlL2lucHV0LWRhdGUuanN4JyksXG4gICAgU2VsZWN0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9zZWxlY3Qvc2VsZWN0LmpzeCcpLFxuICAgIFRleHRBcmVhID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy90ZXh0LWFyZWEvdGV4dC1hcmVhLmpzeCcpLFxuICAgIElucHV0TnVtYmVyID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC1udW1iZXIvaW5wdXQtbnVtYmVyLmpzeCcpLFxuICAgIENoZWNrQm94ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC1jaGVja2JveC9pbnB1dC1jaGVja2JveC5qc3gnKSxcbiAgICBzdHlsZXMgPSByZXF1aXJlKCcuL25vbWVuY2xhdHVyZS1zdHlsZXMnKTtcblxudmFyIF9yZXF1aXJlJE5PTUVOQ0xBVFVSRSA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vLi4vY29uZmlnL2NvbnN0YW50cycpLk5PTUVOQ0xBVFVSRSxcbiAgICBMSUJSQVJJRVMgPSBfcmVxdWlyZSROT01FTkNMQVRVUkUuTElCUkFSSUVTLFxuICAgIFRBWElFUyA9IF9yZXF1aXJlJE5PTUVOQ0xBVFVSRS5UQVhJRVMsXG4gICAgVUhJSyA9IF9yZXF1aXJlJE5PTUVOQ0xBVFVSRS5VSElLLFxuICAgIFRZWVAgPSBfcmVxdWlyZSROT01FTkNMQVRVUkUuVFlZUCxcbiAgICBBTEdPUklUTUlEID0gX3JlcXVpcmUkTk9NRU5DTEFUVVJFLkFMR09SSVRNSUQ7XG5cbnZhciBOb21lbmNsYXR1cmUgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoTm9tZW5jbGF0dXJlLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBOb21lbmNsYXR1cmUocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5vbWVuY2xhdHVyZSk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE5vbWVuY2xhdHVyZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE5vbWVuY2xhdHVyZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRvY0lkOiBwcm9wcy5kb2NJZCA/IHByb3BzLmRvY0lkIDogTnVtYmVyKHByb3BzLm1hdGNoLnBhcmFtcy5kb2NJZCksXG4gICAgICAgICAgICBsb2FkZWREYXRhOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5yZW5kZXJlciA9IF90aGlzLnJlbmRlcmVyLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE5vbWVuY2xhdHVyZSwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50VGVtcGxhdGUsIHsgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgcmVmOiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogJ05PTUVOQ0xBVFVSRScsXG4gICAgICAgICAgICAgICAgbW9kdWxlOiB0aGlzLnByb3BzLm1vZHVsZSxcbiAgICAgICAgICAgICAgICBpbml0RGF0YTogdGhpcy5wcm9wcy5pbml0RGF0YSxcbiAgICAgICAgICAgICAgICBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnksXG4gICAgICAgICAgICAgICAgdXNlckRhdGE6IHRoaXMucHJvcHMudXNlckRhdGEsXG4gICAgICAgICAgICAgICAgbGliczogTElCUkFSSUVTLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiB0aGlzLnJlbmRlcmVyLFxuICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudDogJ2lucHV0LWtvb2QnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCc0LXRgtC+0LQg0LLQtdGA0L3QtdGCINC60LDRgdGC0L7QvNC90YvQuSDQutC+0LzQv9C+0L3QtdC90YJcclxuICAgICAgICAgKiBAcGFyYW0gc2VsZiDQuNC90YHRgtC10L3RgSDQsdCw0LfQsNCy0L7Qs9C+INC00L7QutGD0LzQtdC90YLQsFxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuZG9jRGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaXNFZGl0ZU1vZGUgPSBzZWxmLnN0YXRlLmVkaXRlZDtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvYyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ0tvb2QgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1rb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5rb29kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ05pbWV0dXMgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ25pbWV0dXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1uaW1ldHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5uaW1ldHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ0xcXHhGQ2hpa2UgbmltZXR1cyAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbHVubycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWx1bm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmx1bm8gfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnRG9rdW1lbnQ6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RvaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1snZG9jdW1lbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5kb2sgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1kb2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuRGVsZXRlOiBpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdNYWtzdW1cXHhFNFxceEU0cjonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmF0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogVEFYSUVTLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS52YXQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc2VsZi5kb2NEYXRhLnZhdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LXZhdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZTogaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXROdW1iZXIsIHsgdGl0bGU6ICdIaW5kOiAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnaGluZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LWhpbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNlbGYuZG9jRGF0YS5oaW5kIHx8IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ01cXHhGNXR0XFx4RkNoaWs6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VoaWsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBVSElLLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS51aGlrIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlbGYuZG9jRGF0YS51aGlrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3QtdWhpaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZTogaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZG9jRGF0YS5kb2sgPT0gJ0FSVicgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0hpbm5hIGFsZ29yaXRtOicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhbGdvcml0bScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IEFMR09SSVRNSUQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLmFsZ29yaXRtIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlbGYuZG9jRGF0YS5hbGdvcml0bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LWFsZ29yaXRtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuRGVsZXRlOiBpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZG9jRGF0YS5kb2sgPT0gJ0FSVicgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0tvb2xpdHVzZSBsaWlnaWQ6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ29wcGVfdHl5cCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sna29vbGl0dXNlX2xpaWsnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEub3BwZV90eXlwIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlbGYuZG9jRGF0YS5vcHBlX3R5eXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3NlbGVjdC1vcHBlX3R5eXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5EZWxldGU6IGlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kb2NEYXRhLmRvayA9PSAnQVJWJyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnVFxceEZDXFx4RkNwOicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0eXlwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogVFlZUCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEudHl5cCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzZWxmLmRvY0RhdGEudHl5cCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnc2VsZWN0LXR5eXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5EZWxldGU6IGlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdLb3JyLmtvbnRvOicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb250bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYnM6ICdrb250b2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2tvbnRvZCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhWydrb250byddIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3Rfa29udG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsSWQ6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ1R1bm51czonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ3R1bm51cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbGYubGlic1sndHVubnVzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGFbJ3R1bm51cyddIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3RfdHVubnVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnVGVnZXZ1czonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGVnZXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ3RlZ2V2J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGFbJ3RlZ2V2J10gfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3RlZ2V2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsgdGl0bGU6ICdQcm9qZWt0OicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwcm9qZWt0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGliczogJ3Byb2plY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ3Byb2plY3QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YVsncHJvamVrdCddIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdzZWxlY3RfcHJvamVrdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgeyB0aXRsZTogJ0FsbGlrYXM6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FsbGlrYXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBzZWxmLmxpYnNbJ2FsbGlrYXMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YVsnYWxsaWthcyddIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdhbGxpa2FzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbElkOiAna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7IHRpdGxlOiAnQXJ0aWtrZWw6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FydGlra2VsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZi5saWJzWydhcnRpa2tlbCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhWydhcnRpa2tlbCddIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdhcnRpa2tlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxJZDogJ2tvb2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENoZWNrQm94LCB7IHRpdGxlOiAnS2FzIElORjM/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2thc19pbmYzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEJvb2xlYW4oc2VsZi5kb2NEYXRhLmthc19pbmYzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnY2hlY2tib3hfa2FzX2luZjMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY0NvbHVtbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXREYXRlLCB7IHRpdGxlOiAnS2VodGl2IGt1bmk6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS52YWxpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtdmFsaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRBcmVhLCB7IHRpdGxlOiAnTXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ211dWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ3RleHRhcmVhLW11dWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEubXV1ZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIWlzRWRpdGVNb2RlIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE5vbWVuY2xhdHVyZTtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbk5vbWVuY2xhdHVyZS5wcm9wVHlwZXMgPSB7XG4gICAgZG9jSWQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgaW5pdERhdGE6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgdXNlckRhdGE6IFByb3BUeXBlcy5vYmplY3Rcbn07XG5cbk5vbWVuY2xhdHVyZS5kZWZhdWx0UHJvcHMgPSB7XG4gICAgaW5pdERhdGE6IHt9LFxuICAgIHVzZXJEYXRhOiB7fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBOb21lbmNsYXR1cmU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL25vbWVuY2xhdHVyZS9kb2N1bWVudC9pbmRleC5qc3hcbi8vIG1vZHVsZSBpZCA9IDI5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7bW9kdWxlLmV4cG9ydHM9e2RvY1Jvdzp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjoncm93Jy8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJsdWUnXHJcbiovfSxkb2NDb2x1bW46e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J2NvbHVtbicsLypcclxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgeWVsbG93JyxcclxuKi93aWR0aDonNTAlJ30sZG9jOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLypcclxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgYnJvd24nXHJcbiovfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL25vbWVuY2xhdHVyZS9kb2N1bWVudC9ub21lbmNsYXR1cmUtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgRG9jdW1lbnRzID0gcmVxdWlyZSgnLi8uLi9kb2N1bWVudHMvZG9jdW1lbnRzLmpzeCcpO1xudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vdHVubnVzZWQtc3R5bGVzJyk7XG52YXIgRE9DX1RZUEVfSUQgPSAnVFVOTlVTJztcblxuLyoqXHJcbiAqINCa0LvQsNGB0YEg0YDQtdCw0LvQuNC30YPQtdGCINC00L7QutGD0LzQtdC90YIg0YHQv9GA0LDQstC+0YfQvdC40LrQsCDQv9GA0LjQt9C90LDQutC+0LIuXHJcbiAqL1xuXG52YXIgVHVubnVzZWQgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoVHVubnVzZWQsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIFR1bm51c2VkKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUdW5udXNlZCk7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUdW5udXNlZC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFR1bm51c2VkKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhUdW5udXNlZCwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50cywgeyBpbml0RGF0YTogdGhpcy5wcm9wcy5pbml0RGF0YSxcbiAgICAgICAgICAgICAgICBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnkgPyB0aGlzLnByb3BzLmhpc3RvcnkgOiBudWxsLFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUsXG4gICAgICAgICAgICAgICAgcmVmOiAncmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcyxcbiAgICAgICAgICAgICAgICByZW5kZXI6IHRoaXMucmVuZGVyZXIgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVHVubnVzZWQ7XG59KFJlYWN0LlB1cmVDb21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFR1bm51c2VkO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy90dW5udXMvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtncmlkOnttYWluVGFibGU6e3dpZHRoOicxMDAlJyx0ZDp7Ym9yZGVyOicxcHggc29saWQgbGlnaHRHcmV5JyxkaXNwbGF5Oid0YWJsZS1jZWxsJyxwYWRkaW5nTGVmdDonNXB4J319LGhlYWRlclRhYmxlOnt3aWR0aDonMTAwJSd9LGdyaWRDb250YWluZXI6e3dpZHRoOicxMDAlJ319fTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3MvdHVubnVzL3R1bm51c2VkLXN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjk2XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIERvY3VtZW50VGVtcGxhdGUgPSByZXF1aXJlKCcuLy4uLy4uL2RvY3VtZW50VGVtcGxhdGUvaW5kZXguanN4JyksXG4gICAgSW5wdXRUZXh0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC10ZXh0L2lucHV0LXRleHQuanN4JyksXG4gICAgSW5wdXREYXRlID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC1kYXRlL2lucHV0LWRhdGUuanN4JyksXG4gICAgVGV4dEFyZWEgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3RleHQtYXJlYS90ZXh0LWFyZWEuanN4JyksXG4gICAgTG9hZGluZyA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vY29tcG9uZW50cy9sb2FkaW5nL2luZGV4LmpzeCcpO1xuXG52YXIgc3R5bGVzID0gcmVxdWlyZSgnLi90dW5udXMtc3R5bGVzJyk7XG5cbi8qKlxyXG4gKiDQmtC70LDRgdGBINGA0LXQsNC70LjQt9GD0LXRgiDQtNC+0LrRg9C80LXQvdGCINGB0L/RgNCw0LLQvtGH0L3QuNC60LAg0L/RgNC40LfQvdCw0LrQvtCyLlxyXG4gKi9cblxudmFyIFR1bm51cyA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhUdW5udXMsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIFR1bm51cyhwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHVubnVzKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVHVubnVzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHVubnVzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZG9jSWQ6IHByb3BzLmRvY0lkID8gcHJvcHMuZG9jSWQgOiBOdW1iZXIocHJvcHMubWF0Y2gucGFyYW1zLmRvY0lkKSxcbiAgICAgICAgICAgIGxvYWRlZERhdGE6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnJlbmRlcmVyID0gX3RoaXMucmVuZGVyZXIuYmluZChfdGhpcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVHVubnVzLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9jdW1lbnRUZW1wbGF0ZSwgeyBkb2NJZDogdGhpcy5zdGF0ZS5kb2NJZCxcbiAgICAgICAgICAgICAgICByZWY6ICdkb2N1bWVudCcsXG4gICAgICAgICAgICAgICAgZG9jVHlwZUlkOiAnVFVOTlVTJyxcbiAgICAgICAgICAgICAgICBtb2R1bGU6IHRoaXMucHJvcHMubW9kdWxlLFxuICAgICAgICAgICAgICAgIGluaXREYXRhOiB0aGlzLnByb3BzLmluaXREYXRhLFxuICAgICAgICAgICAgICAgIHVzZXJEYXRhOiB0aGlzLnByb3BzLnVzZXJEYXRhLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiB0aGlzLnJlbmRlcmVyLFxuICAgICAgICAgICAgICAgIGZvY3VzRWxlbWVudDogJ2lucHV0LWtvb2QnLFxuICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqINCc0LXRgtC+0LQg0LLQtdGA0L3QtdGCINC60LDRgdGC0L7QvNC90YvQuSDQutC+0LzQv9C+0L3QtdC90YJcclxuICAgICAgICAgKiBAcGFyYW0gc2VsZlxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXJlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJlcihzZWxmKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuZG9jRGF0YSkge1xuICAgICAgICAgICAgICAgIC8vINC90LUg0LfQsNCz0YDRg9C20LXQvdGLINC00LDQvdC90YvQtVxuICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvYyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRpbmcsIHsgbGFiZWw6ICdMYWFkaW1pbmUuLi4nIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvYyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jQ29sdW1uIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnS29vZCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdrb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC1rb29kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogIXNlbGYuc3RhdGUuZWRpdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEua29vZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ05pbWV0dXMgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbmltZXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbmltZXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFzZWxmLnN0YXRlLmVkaXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm5pbWV0dXMgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dERhdGUsIHsgdGl0bGU6ICdLZWh0aXYga3VuaTonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS52YWxpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6ICdpbnB1dC12YWxpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFzZWxmLnN0YXRlLmVkaXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRBcmVhLCB7IHRpdGxlOiAnTXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1tdXVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5tdXVkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFzZWxmLnN0YXRlLmVkaXRlZCB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVHVubnVzO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuVHVubnVzLnByb3BUeXBlcyA9IHtcbiAgICBkb2NJZDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBpbml0RGF0YTogUHJvcFR5cGVzLm9iamVjdFxufTtcblxuVHVubnVzLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBpbml0RGF0YToge31cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVHVubnVzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy90dW5udXMvZG9jdW1lbnQvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAyOTdcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtkb2NSb3c6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J3Jvdyd9LGRvY0NvbHVtbjp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJyx3aWR0aDonNTAlJ30sZG9jOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nfX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL3R1bm51cy9kb2N1bWVudC90dW5udXMtc3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyOThcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgRG9jdW1lbnRzID0gcmVxdWlyZSgnLi8uLi9kb2N1bWVudHMvZG9jdW1lbnRzLmpzeCcpO1xudmFyIHN0eWxlcyA9IHJlcXVpcmUoJy4vYXN1dHVzLXJlZ2lzdGVyLXN0eWxlcycpO1xuLy9jb25zdCBncmlkQ29uZmlnID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9tb2RlbHMvbGlicy9saWJyYXJpZXMvYXN1dHVzZWQnKS5ncmlkLmdyaWRDb25maWd1cmF0aW9uO1xuXG52YXIgRE9DX1RZUEVfSUQgPSAnQVNVVFVTRUQnO1xudmFyIEJ1dHRvblVwbG9hZCA9IHJlcXVpcmUoJy4vLi4vLi4vY29tcG9uZW50cy91cGxvYWRfYnV0dG9uL2luZGV4LmpzeCcpO1xudmFyIFRvb2xiYXJDb250YWluZXIgPSByZXF1aXJlKCcuLy4uLy4uL2NvbXBvbmVudHMvdG9vbGJhci1jb250YWluZXIvdG9vbGJhci1jb250YWluZXIuanN4Jyk7XG5cbi8qKlxyXG4gKiDQmtC70LDRgdGBINGA0LXQsNC70LjQt9GD0LXRgiDQtNC+0LrRg9C80LXQvdGCINGB0L/RgNCw0LLQvtGH0L3QuNC60LAg0L/RgNC40LfQvdCw0LrQvtCyLlxyXG4gKi9cblxudmFyIEFzdXR1c2VkID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEFzdXR1c2VkLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBBc3V0dXNlZChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXN1dHVzZWQpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChBc3V0dXNlZC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFzdXR1c2VkKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnJlbmRlcmVyID0gX3RoaXMucmVuZGVyZXIuYmluZChfdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhBc3V0dXNlZCwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50cywgeyBoaXN0b3J5OiB0aGlzLnByb3BzLmhpc3RvcnkgPyB0aGlzLnByb3BzLmhpc3RvcnkgOiBudWxsLFxuICAgICAgICAgICAgICAgIG1vZHVsZTogdGhpcy5wcm9wcy5tb2R1bGUsXG4gICAgICAgICAgICAgICAgcmVmOiAncmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlcyxcbiAgICAgICAgICAgICAgICByZW5kZXI6IHRoaXMucmVuZGVyZXIgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcmVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcmVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgVG9vbGJhckNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uVXBsb2FkLCB7XG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2J0blVwbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogRE9DX1RZUEVfSUQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2ssXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlczogJy5jc3YnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiDQutCw0YHRgtC+0LzQvdGL0Lkg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0LrQu9C40Log0L3QsCDQutC90L7Qv9C60YMg0LjQvNC/0L7RgNGC0LBcclxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2socmVzdWx0KSB7XG5cbiAgICAgICAgICAgIC8v0L7QsdC90L7QstC40Lwg0LTQsNC90L3Ri9C1XG4gICAgICAgICAgICB2YXIgRG9jID0gdGhpcy5yZWZzWydyZWdpc3RlciddO1xuICAgICAgICAgICAgaWYgKCFEb2MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBEb2Muc2V0U3RhdGUoeyB3YXJuaW5nOiAnRWR1a2FsdDogICcgKyByZXN1bHQgKyAnOiAnLCB3YXJuaW5nVHlwZTogJ29rJyB9KTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgRG9jLmZldGNoRGF0YSgnc2VsZWN0RG9jcycpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBc3V0dXNlZDtcbn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXN1dHVzZWQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2FzdXR1c2VkL2luZGV4LmpzeFxuLy8gbW9kdWxlIGlkID0gMjk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMiIsIid1c2Ugc3RyaWN0Jzttb2R1bGUuZXhwb3J0cz17Z3JpZDp7bWFpblRhYmxlOnt3aWR0aDonMTAwJScsdGQ6e2JvcmRlcjonMXB4IHNvbGlkIGxpZ2h0R3JleScsZGlzcGxheTondGFibGUtY2VsbCcscGFkZGluZ0xlZnQ6JzVweCd9fSxoZWFkZXJUYWJsZTp7d2lkdGg6JzEwMCUnfSxncmlkQ29udGFpbmVyOnt3aWR0aDonMTAwJSd9fX07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9mcm9udGVuZC9kb2NzL2FzdXR1c2VkL2FzdXR1cy1yZWdpc3Rlci1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDMwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBEb2NDb250ZXh0ID0gcmVxdWlyZSgnLi4vLi4vLi4vZG9jLWNvbnRleHQnKTtcblxudmFyIERvY3VtZW50VGVtcGxhdGUgPSByZXF1aXJlKCcuLy4uLy4uL2RvY3VtZW50VGVtcGxhdGUvaW5kZXguanN4JyksXG4gICAgSW5wdXRUZXh0ID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tcG9uZW50cy9pbnB1dC10ZXh0L2lucHV0LXRleHQuanN4JyksXG4gICAgVGV4dEFyZWEgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL3RleHQtYXJlYS90ZXh0LWFyZWEuanN4JyksXG4gICAgc3R5bGVzID0gcmVxdWlyZSgnLi9hc3V0dXNlZC5zdHlsZXMnKTtcblxudmFyIEFzdXR1c2VkID0gZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKEFzdXR1c2VkLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBBc3V0dXNlZChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXN1dHVzZWQpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChBc3V0dXNlZC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFzdXR1c2VkKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZG9jSWQ6IHByb3BzLmRvY0lkID8gcHJvcHMuZG9jSWQgOiBOdW1iZXIocHJvcHMubWF0Y2gucGFyYW1zLmRvY0lkKSxcbiAgICAgICAgICAgIGxvYWRlZERhdGE6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBfdGhpcy5yZW5kZXJlci5iaW5kKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhBc3V0dXNlZCwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERvY3VtZW50VGVtcGxhdGUsIHsgZG9jSWQ6IHRoaXMuc3RhdGUuZG9jSWQsXG4gICAgICAgICAgICAgICAgcmVmOiAnZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgICAgICAgICBtb2R1bGU6IERvY0NvbnRleHQubW9kdWxlLFxuICAgICAgICAgICAgICAgIGRvY1R5cGVJZDogJ0FTVVRVU0VEJyxcbiAgICAgICAgICAgICAgICBpbml0RGF0YTogdGhpcy5wcm9wcy5pbml0RGF0YSxcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcbiAgICAgICAgICAgICAgICBmb2N1c0VsZW1lbnQ6ICdpbnB1dC1yZWdrb29kJ1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyZXIoc2VsZikge1xuXG4gICAgICAgICAgICB2YXIgaXNFZGl0ZU1vZGUgPSBzZWxmLnN0YXRlLmVkaXRlZDtcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvYyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NDb2x1bW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnUmVnLmtvb2QgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtcmVna29vZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLnJlZ2tvb2QgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ05pbWV0dXMgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbmltZXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtbmltZXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm5pbWV0dXMgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHNlbGYuaGFuZGxlSW5wdXRDaGFuZ2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0VGV4dCwgeyB0aXRsZTogJ09tLnZvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvbXZvcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LW9tdm9ybScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLm9tdm9ybSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnQXJ2ZWxkdXMgYXJ2ZTonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtYWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5hYSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogc3R5bGVzLmRvY1JvdyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRBcmVhLCB7IHRpdGxlOiAnQWFkcmVzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYWFkcmVzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICd0ZXh0YXJlYS1hYWRyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBzZWxmLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5hYWRyZXNzIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6ICFpc0VkaXRlTW9kZSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0QXJlYSwgeyB0aXRsZTogJ0tvbnRha3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2tvbnRha3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEta29udGFrdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEua29udGFrdCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXRUZXh0LCB7IHRpdGxlOiAnVGVsZWZvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2lucHV0LXRlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5kb2NEYXRhLnRlbCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dFRleHQsIHsgdGl0bGU6ICdFbWFpbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5wdXQtZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuZG9jRGF0YS5lbWFpbCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHN0eWxlcy5kb2NSb3cgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0QXJlYSwgeyB0aXRsZTogJ011dWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ211dWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtbXV1ZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEubXV1ZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuZG9jUm93IH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWEsIHsgdGl0bGU6ICdNXFx4RTRya3VzZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21hcmsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAndGV4dGFyZWEtbWFyaycsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogc2VsZi5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLmRvY0RhdGEubWFyayB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiAhaXNFZGl0ZU1vZGUgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEFzdXR1c2VkO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxuQXN1dHVzZWQucHJvcFR5cGVzID0ge1xuICAgIGRvY0lkOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIGluaXREYXRhOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHVzZXJEYXRhOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5Bc3V0dXNlZC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgaW5pdERhdGE6IHt9LFxuICAgIHVzZXJEYXRhOiB7fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBc3V0dXNlZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Zyb250ZW5kL2RvY3MvYXN1dHVzZWQvZG9jdW1lbnQvaW5kZXguanN4XG4vLyBtb2R1bGUgaWQgPSAzMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAyIiwiJ3VzZSBzdHJpY3QnO21vZHVsZS5leHBvcnRzPXtkb2NSb3c6e2Rpc3BsYXk6J2ZsZXgnLGZsZXhEaXJlY3Rpb246J3JvdycvKlxyXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCBibHVlJ1xyXG4qL30sZG9jQ29sdW1uOntkaXNwbGF5OidmbGV4JyxmbGV4RGlyZWN0aW9uOidjb2x1bW4nLC8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHllbGxvdycsXHJcbiovd2lkdGg6JzUwJSd9LGRvYzp7ZGlzcGxheTonZmxleCcsZmxleERpcmVjdGlvbjonY29sdW1uJy8qXHJcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJyb3duJ1xyXG4qL319O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZnJvbnRlbmQvZG9jcy9hc3V0dXNlZC9kb2N1bWVudC9hc3V0dXNlZC5zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDMwMlxuLy8gbW9kdWxlIGNodW5rcyA9IDIiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNKQTtBQUNBOzs7Ozs7QUNEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSEE7QUFDQTs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2xCQTs7Ozs7O0FDQUE7QUFDQTs7Ozs7O0FDREE7Ozs7Ozs7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1ZBO0FBQ0E7Ozs7OztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1JBO0FBQ0E7Ozs7OztBQ0RBOzs7Ozs7QUNBQTtBQUNBOzs7Ozs7QUNEQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSkE7QUFDQTs7Ozs7O0FDREE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTs7Ozs7O0FDRkE7QUFDQTs7Ozs7O0FDREE7QUFDQTs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDdkRBO0FBQ0E7Ozs7OztBQ0RBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDUkE7QUFDQTs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDaEhBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbFRBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3ZJQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1BBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNQQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDZkE7QUFDQTtBQUNBOzs7Ozs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDakRBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM3REE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDdEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuSUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2hOQTtBQUNBO0FBQ0E7Ozs7OztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN2T0E7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0NBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNKQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTs7Ozs7O0FDRkE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2hGQTs7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNKQTtBQUNBO0FBQ0E7Ozs7OztBQ0ZBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBO0FBQ0E7Ozs7OztBQ0RBOzs7Ozs7QUNBQTtBQUNBOzs7Ozs7QUNEQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7QUFDQTs7Ozs7O0FDREE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNKQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSEE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNIQTtBQUNBO0FBQ0E7Ozs7OztBQ0ZBOzs7Ozs7QUNBQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDVkE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ0pBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSEE7Ozs7OztBQ0FBO0FBQ0E7Ozs7OztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ0hBO0FBQ0E7Ozs7OztBQ0RBO0FBQ0E7QUFDQTs7Ozs7O0FDRkE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBOzs7Ozs7QUNEQTtBQUNBOzs7Ozs7QUNEQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3JGQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3JXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDOXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDekZBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7Ozs7OztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2pTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNsSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbExBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuSEE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDeG5CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDMUVBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuSEE7Ozs7OztBQ0FBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDeERBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSEE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNwQkE7QUFDQTs7Ozs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ25QQTtBQUNBOzs7Ozs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN4TkE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0lBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN0SEE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzVIQTs7Ozs7O0FDQUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDeEpBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0dBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzk1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3ZXQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuTkE7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN0V0E7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNmQTs7Ozs7Ozs7QUNBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3RaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDOUdBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNsdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDUkE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDaElBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDaEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDMWxCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0pBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNqSUE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQy9mQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ3BGQTs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN0akJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUM5RkE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQy9UQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDakRBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDMUlBOzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUN4RkE7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDMUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Iiwic291cmNlUm9vdCI6IiJ9